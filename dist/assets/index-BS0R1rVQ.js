(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function XT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var fg={exports:{}},Su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function k1(){if(Wv)return Su;Wv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return Su.Fragment=e,Su.jsx=t,Su.jsxs=t,Su}var eE;function B1(){return eE||(eE=1,fg.exports=k1()),fg.exports}var T=B1(),dg={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function U1(){if(tE)return Ve;tE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),A=Symbol.iterator;function P(D){return D===null||typeof D!="object"?null:(D=A&&D[A]||D["@@iterator"],typeof D=="function"?D:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,Y={};function se(D,X,oe){this.props=D,this.context=X,this.refs=Y,this.updater=oe||$}se.prototype.isReactComponent={},se.prototype.setState=function(D,X){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,X,"setState")},se.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function me(){}me.prototype=se.prototype;function le(D,X,oe){this.props=D,this.context=X,this.refs=Y,this.updater=oe||$}var we=le.prototype=new me;we.constructor=le,Z(we,se.prototype),we.isPureReactComponent=!0;var Ie=Array.isArray;function be(){}var R={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function N(D,X,oe){var Q=oe.ref;return{$$typeof:s,type:D,key:X,ref:Q!==void 0?Q:null,props:oe}}function O(D,X){return N(D.type,X,D.props)}function V(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function j(D){var X={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(oe){return X[oe]})}var x=/\/+/g;function Re(D,X){return typeof D=="object"&&D!==null&&D.key!=null?j(""+D.key):X.toString(36)}function He(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(be,be):(D.status="pending",D.then(function(X){D.status==="pending"&&(D.status="fulfilled",D.value=X)},function(X){D.status==="pending"&&(D.status="rejected",D.reason=X)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function H(D,X,oe,Q,re){var fe=typeof D;(fe==="undefined"||fe==="boolean")&&(D=null);var ue=!1;if(D===null)ue=!0;else switch(fe){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(D.$$typeof){case s:case e:ue=!0;break;case E:return ue=D._init,H(ue(D._payload),X,oe,Q,re)}}if(ue)return re=re(D),ue=Q===""?"."+Re(D,0):Q,Ie(re)?(oe="",ue!=null&&(oe=ue.replace(x,"$&/")+"/"),H(re,X,oe,"",function(ut){return ut})):re!=null&&(V(re)&&(re=O(re,oe+(re.key==null||D&&D.key===re.key?"":(""+re.key).replace(x,"$&/")+"/")+ue)),X.push(re)),1;ue=0;var xe=Q===""?".":Q+":";if(Ie(D))for(var De=0;De<D.length;De++)Q=D[De],fe=xe+Re(Q,De),ue+=H(Q,X,oe,fe,re);else if(De=P(D),typeof De=="function")for(D=De.call(D),De=0;!(Q=D.next()).done;)Q=Q.value,fe=xe+Re(Q,De++),ue+=H(Q,X,oe,fe,re);else if(fe==="object"){if(typeof D.then=="function")return H(He(D),X,oe,Q,re);throw X=String(D),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ue}function ae(D,X,oe){if(D==null)return D;var Q=[],re=0;return H(D,Q,"","",function(fe){return X.call(oe,fe,re++)}),Q}function ie(D){if(D._status===-1){var X=D._result;X=X(),X.then(function(oe){(D._status===0||D._status===-1)&&(D._status=1,D._result=oe)},function(oe){(D._status===0||D._status===-1)&&(D._status=2,D._result=oe)}),D._status===-1&&(D._status=0,D._result=X)}if(D._status===1)return D._result.default;throw D._result}var pe=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Ne={map:ae,forEach:function(D,X,oe){ae(D,function(){X.apply(this,arguments)},oe)},count:function(D){var X=0;return ae(D,function(){X++}),X},toArray:function(D){return ae(D,function(X){return X})||[]},only:function(D){if(!V(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Ve.Activity=b,Ve.Children=Ne,Ve.Component=se,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=le,Ve.StrictMode=r,Ve.Suspense=g,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(D){return R.H.useMemoCache(D)}},Ve.cache=function(D){return function(){return D.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(D,X,oe){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var Q=Z({},D.props),re=D.key;if(X!=null)for(fe in X.key!==void 0&&(re=""+X.key),X)!I.call(X,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&X.ref===void 0||(Q[fe]=X[fe]);var fe=arguments.length-2;if(fe===1)Q.children=oe;else if(1<fe){for(var ue=Array(fe),xe=0;xe<fe;xe++)ue[xe]=arguments[xe+2];Q.children=ue}return N(D.type,re,Q)},Ve.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},Ve.createElement=function(D,X,oe){var Q,re={},fe=null;if(X!=null)for(Q in X.key!==void 0&&(fe=""+X.key),X)I.call(X,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(re[Q]=X[Q]);var ue=arguments.length-2;if(ue===1)re.children=oe;else if(1<ue){for(var xe=Array(ue),De=0;De<ue;De++)xe[De]=arguments[De+2];re.children=xe}if(D&&D.defaultProps)for(Q in ue=D.defaultProps,ue)re[Q]===void 0&&(re[Q]=ue[Q]);return N(D,fe,re)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(D){return{$$typeof:m,render:D}},Ve.isValidElement=V,Ve.lazy=function(D){return{$$typeof:E,_payload:{_status:-1,_result:D},_init:ie}},Ve.memo=function(D,X){return{$$typeof:p,type:D,compare:X===void 0?null:X}},Ve.startTransition=function(D){var X=R.T,oe={};R.T=oe;try{var Q=D(),re=R.S;re!==null&&re(oe,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(be,pe)}catch(fe){pe(fe)}finally{X!==null&&oe.types!==null&&(X.types=oe.types),R.T=X}},Ve.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ve.use=function(D){return R.H.use(D)},Ve.useActionState=function(D,X,oe){return R.H.useActionState(D,X,oe)},Ve.useCallback=function(D,X){return R.H.useCallback(D,X)},Ve.useContext=function(D){return R.H.useContext(D)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(D,X){return R.H.useDeferredValue(D,X)},Ve.useEffect=function(D,X){return R.H.useEffect(D,X)},Ve.useEffectEvent=function(D){return R.H.useEffectEvent(D)},Ve.useId=function(){return R.H.useId()},Ve.useImperativeHandle=function(D,X,oe){return R.H.useImperativeHandle(D,X,oe)},Ve.useInsertionEffect=function(D,X){return R.H.useInsertionEffect(D,X)},Ve.useLayoutEffect=function(D,X){return R.H.useLayoutEffect(D,X)},Ve.useMemo=function(D,X){return R.H.useMemo(D,X)},Ve.useOptimistic=function(D,X){return R.H.useOptimistic(D,X)},Ve.useReducer=function(D,X,oe){return R.H.useReducer(D,X,oe)},Ve.useRef=function(D){return R.H.useRef(D)},Ve.useState=function(D){return R.H.useState(D)},Ve.useSyncExternalStore=function(D,X,oe){return R.H.useSyncExternalStore(D,X,oe)},Ve.useTransition=function(){return R.H.useTransition()},Ve.version="19.2.0",Ve}var nE;function dp(){return nE||(nE=1,dg.exports=U1()),dg.exports}var ye=dp();const $T=XT(ye);var mg={exports:{}},wu={},gg={exports:{}},pg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE;function q1(){return iE||(iE=1,(function(s){function e(H,ae){var ie=H.length;H.push(ae);e:for(;0<ie;){var pe=ie-1>>>1,Ne=H[pe];if(0<o(Ne,ae))H[pe]=ae,H[ie]=Ne,ie=pe;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ae=H[0],ie=H.pop();if(ie!==ae){H[0]=ie;e:for(var pe=0,Ne=H.length,D=Ne>>>1;pe<D;){var X=2*(pe+1)-1,oe=H[X],Q=X+1,re=H[Q];if(0>o(oe,ie))Q<Ne&&0>o(re,oe)?(H[pe]=re,H[Q]=ie,pe=Q):(H[pe]=oe,H[X]=ie,pe=X);else if(Q<Ne&&0>o(re,ie))H[pe]=re,H[Q]=ie,pe=Q;else break e}}return ae}function o(H,ae){var ie=H.sortIndex-ae.sortIndex;return ie!==0?ie:H.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],E=1,b=null,A=3,P=!1,$=!1,Z=!1,Y=!1,se=typeof setTimeout=="function"?setTimeout:null,me=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function we(H){for(var ae=t(p);ae!==null;){if(ae.callback===null)r(p);else if(ae.startTime<=H)r(p),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=t(p)}}function Ie(H){if(Z=!1,we(H),!$)if(t(g)!==null)$=!0,be||(be=!0,j());else{var ae=t(p);ae!==null&&He(Ie,ae.startTime-H)}}var be=!1,R=-1,I=5,N=-1;function O(){return Y?!0:!(s.unstable_now()-N<I)}function V(){if(Y=!1,be){var H=s.unstable_now();N=H;var ae=!0;try{e:{$=!1,Z&&(Z=!1,me(R),R=-1),P=!0;var ie=A;try{t:{for(we(H),b=t(g);b!==null&&!(b.expirationTime>H&&O());){var pe=b.callback;if(typeof pe=="function"){b.callback=null,A=b.priorityLevel;var Ne=pe(b.expirationTime<=H);if(H=s.unstable_now(),typeof Ne=="function"){b.callback=Ne,we(H),ae=!0;break t}b===t(g)&&r(g),we(H)}else r(g);b=t(g)}if(b!==null)ae=!0;else{var D=t(p);D!==null&&He(Ie,D.startTime-H),ae=!1}}break e}finally{b=null,A=ie,P=!1}ae=void 0}}finally{ae?j():be=!1}}}var j;if(typeof le=="function")j=function(){le(V)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Re=x.port2;x.port1.onmessage=V,j=function(){Re.postMessage(null)}}else j=function(){se(V,0)};function He(H,ae){R=se(function(){H(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(H){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var ie=A;A=ae;try{return H()}finally{A=ie}},s.unstable_requestPaint=function(){Y=!0},s.unstable_runWithPriority=function(H,ae){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=A;A=H;try{return ae()}finally{A=ie}},s.unstable_scheduleCallback=function(H,ae,ie){var pe=s.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?pe+ie:pe):ie=pe,H){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=ie+Ne,H={id:E++,callback:ae,priorityLevel:H,startTime:ie,expirationTime:Ne,sortIndex:-1},ie>pe?(H.sortIndex=ie,e(p,H),t(g)===null&&H===t(p)&&(Z?(me(R),R=-1):Z=!0,He(Ie,ie-pe))):(H.sortIndex=Ne,e(g,H),$||P||($=!0,be||(be=!0,j()))),H},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(H){var ae=A;return function(){var ie=A;A=ae;try{return H.apply(this,arguments)}finally{A=ie}}}})(pg)),pg}var rE;function F1(){return rE||(rE=1,gg.exports=q1()),gg.exports}var yg={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function G1(){if(sE)return un;sE=1;var s=dp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:p,implementation:E}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,un.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,E)},un.flushSync=function(g){var p=c.T,E=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=E,r.d.f()}},un.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},un.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},un.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,b=m(E,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,P=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:P}):E==="script"&&r.d.X(g,{crossOrigin:b,integrity:A,fetchPriority:P,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},un.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},un.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,b=m(E,p.crossOrigin);r.d.L(g,E,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},un.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},un.requestFormReset=function(g){r.d.r(g)},un.unstable_batchedUpdates=function(g,p){return g(p)},un.useFormState=function(g,p,E){return c.H.useFormState(g,p,E)},un.useFormStatus=function(){return c.H.useHostTransitionStatus()},un.version="19.2.0",un}var aE;function H1(){if(aE)return yg.exports;aE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),yg.exports=G1(),yg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function Q1(){if(oE)return wu;oE=1;var s=F1(),e=dp(),t=H1();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,S=f.child;S;){if(S===a){_=!0,a=f,l=d;break}if(S===l){_=!0,l=f,a=d;break}S=S.sibling}if(!_){for(S=d.child;S;){if(S===a){_=!0,a=d,l=f;break}if(S===l){_=!0,l=d,a=f;break}S=S.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function E(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=E(n),i!==null)return i;n=n.sibling}return null}var b=Object.assign,A=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),me=Symbol.for("react.consumer"),le=Symbol.for("react.context"),we=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var x=Symbol.for("react.client.reference");function Re(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===x?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Z:return"Fragment";case se:return"Profiler";case Y:return"StrictMode";case Ie:return"Suspense";case be:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case $:return"Portal";case le:return n.displayName||"Context";case me:return(n._context.displayName||"Context")+".Consumer";case we:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return i=n.displayName||null,i!==null?i:Re(n.type)||"Memo";case I:i=n._payload,n=n._init;try{return Re(n(i))}catch{}}return null}var He=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},pe=[],Ne=-1;function D(n){return{current:n}}function X(n){0>Ne||(n.current=pe[Ne],pe[Ne]=null,Ne--)}function oe(n,i){Ne++,pe[Ne]=n.current,n.current=i}var Q=D(null),re=D(null),fe=D(null),ue=D(null);function xe(n,i){switch(oe(fe,i),oe(re,n),oe(Q,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?bv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=bv(i),n=Sv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}X(Q),oe(Q,n)}function De(){X(Q),X(re),X(fe)}function ut(n){n.memoizedState!==null&&oe(ue,n);var i=Q.current,a=Sv(i,n.type);i!==a&&(oe(re,n),oe(Q,a))}function Dn(n){re.current===n&&(X(Q),X(re)),ue.current===n&&(X(ue),vu._currentValue=ie)}var Hn,wi;function Vn(n){if(Hn===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Hn=i&&i[1]||"",wi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hn+n+wi}var nr=!1;function js(n,i){if(!n||nr)return"";nr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var q=K}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(K){q=K}n.call(ee.prototype)}}else{try{throw Error()}catch(K){q=K}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&q&&typeof K.stack=="string")return[K.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],S=d[1];if(_&&S){var C=_.split(`
`),U=S.split(`
`);for(f=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;f<U.length&&!U[f].includes("DetermineComponentFrameRoot");)f++;if(l===C.length||f===U.length)for(l=C.length-1,f=U.length-1;1<=l&&0<=f&&C[l]!==U[f];)f--;for(;1<=l&&0<=f;l--,f--)if(C[l]!==U[f]){if(l!==1||f!==1)do if(l--,f--,0>f||C[l]!==U[f]){var J=`
`+C[l].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=l&&0<=f);break}}}finally{nr=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Vn(a):""}function El(n,i){switch(n.tag){case 26:case 27:case 5:return Vn(n.type);case 16:return Vn("Lazy");case 13:return n.child!==i&&i!==null?Vn("Suspense Fallback"):Vn("Suspense");case 19:return Vn("SuspenseList");case 0:case 15:return js(n.type,!1);case 11:return js(n.type.render,!1);case 1:return js(n.type,!0);case 31:return Vn("Activity");default:return""}}function Tl(n){try{var i="",a=null;do i+=El(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Dt=Object.prototype.hasOwnProperty,Ft=s.unstable_scheduleCallback,Dr=s.unstable_cancelCallback,md=s.unstable_shouldYield,Ic=s.unstable_requestPaint,mn=s.unstable_now,zs=s.unstable_getCurrentPriorityLevel,bl=s.unstable_ImmediatePriority,Sl=s.unstable_UserBlockingPriority,Vr=s.unstable_NormalPriority,gd=s.unstable_LowPriority,Rc=s.unstable_IdlePriority,Nc=s.log,Cc=s.unstable_setDisableYieldValue,oi=null,Zt=null;function Qn(n){if(typeof Nc=="function"&&Cc(n),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(oi,n)}catch{}}var At=Math.clz32?Math.clz32:Vc,Dc=Math.log,Ba=Math.LN2;function Vc(n){return n>>>=0,n===0?32:31-(Dc(n)/Ba|0)|0}var Ai=256,Ls=262144,Vt=4194304;function xi(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ii(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?f=xi(l):(_&=S,_!==0?f=xi(_):a||(a=S&~n,a!==0&&(f=xi(a))))):(S=l&~d,S!==0?f=xi(S):_!==0?f=xi(_):a||(a=l&~n,a!==0&&(f=xi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function li(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function pd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mc(){var n=Vt;return Vt<<=1,(Vt&62914560)===0&&(Vt=4194304),n}function Ri(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function ks(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function yd(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var S=n.entanglements,C=n.expirationTimes,U=n.hiddenUpdates;for(a=_&~a;0<a;){var J=31-At(a),ee=1<<J;S[J]=0,C[J]=-1;var q=U[J];if(q!==null)for(U[J]=null,J=0;J<q.length;J++){var K=q[J];K!==null&&(K.lane&=-536870913)}a&=~ee}l!==0&&Bs(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function Bs(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-At(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function wl(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-At(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function Al(n,i){var a=i&-i;return a=(a&42)!==0?1:Us(a),(a&(n.suspendedLanes|i))!==0?0:a}function Us(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ir(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Oc(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:Qv(n.type))}function ui(n,i){var a=ae.p;try{return ae.p=n,i()}finally{ae.p=a}}var ci=Math.random().toString(36).slice(2),Mt="__reactFiber$"+ci,Qt="__reactProps$"+ci,Ni="__reactContainer$"+ci,Ua="__reactEvents$"+ci,_d="__reactListeners$"+ci,Pc="__reactHandles$"+ci,jc="__reactResources$"+ci,Ci="__reactMarker$"+ci;function qa(n){delete n[Mt],delete n[Qt],delete n[Ua],delete n[_d],delete n[Pc]}function Di(n){var i=n[Mt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ni]||a[Mt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Cv(n);n!==null;){if(a=n[Mt])return a;n=Cv(n)}return i}n=a,a=n.parentNode}return null}function Kn(n){if(n=n[Mt]||n[Ni]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Mn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function Vi(n){var i=n[jc];return i||(i=n[jc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ot(n){n[Ci]=!0}var xl=new Set,Il={};function Mi(n,i){Oi(n,i),Oi(n+"Capture",i)}function Oi(n,i){for(Il[n]=i,n=0;n<i.length;n++)xl.add(i[n])}var Rl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nl={},Cl={};function zc(n){return Dt.call(Cl,n)?!0:Dt.call(Nl,n)?!1:Rl.test(n)?Cl[n]=!0:(Nl[n]=!0,!1)}function Fa(n,i,a){if(zc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function On(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Pt(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function Kt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Mr(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Dl(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function We(n){if(!n._valueTracker){var i=Mr(n)?"checked":"value";n._valueTracker=Dl(n,i,""+n[i])}}function qs(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Mr(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Pi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Fs=/[\n"\\]/g;function Tn(n){return n.replace(Fs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ga(n,i,a,l,f,d,_,S){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Kt(i)):n.value!==""+Kt(i)&&(n.value=""+Kt(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?Vl(n,_,Kt(i)):a!=null?Vl(n,_,Kt(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+Kt(S):n.removeAttribute("name")}function Lc(n,i,a,l,f,d,_,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){We(n);return}a=a!=null?""+Kt(a):"",i=i!=null?""+Kt(i):a,S||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=S?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),We(n)}function Vl(n,i,a){i==="number"&&Pi(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Or(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Kt(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function kc(n,i,a){if(i!=null&&(i=""+Kt(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Kt(a):""}function Pr(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(He(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Kt(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),We(n)}function bn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Bc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ml(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Bc.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Ol(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Ml(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Ml(n,d,i[d])}function Ha(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qa(n){return jr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function hi(){}var Pl=null;function Yn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zr=null,ji=null;function Gs(n){var i=Kn(n);if(i&&(n=i.stateNode)){var a=n[Qt]||null;e:switch(n=i.stateNode,i.type){case"input":if(Ga(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[Qt]||null;if(!f)throw Error(r(90));Ga(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&qs(l)}break e;case"textarea":kc(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Or(n,!!a.multiple,i,!1)}}}var Ka=!1;function Lr(n,i,a){if(Ka)return n(i,a);Ka=!0;try{var l=n(i);return l}finally{if(Ka=!1,(zr!==null||ji!==null)&&(Oh(),zr&&(i=zr,n=ji,ji=zr=null,Gs(i),n)))for(i=0;i<n.length;i++)Gs(n[i])}}function fi(n,i){var a=n.stateNode;if(a===null)return null;var l=a[Qt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hs=!1;if(Xn)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){Hs=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{Hs=!1}var zi=null,jl=null,Qs=null;function zl(){if(Qs)return Qs;var n,i=jl,a=i.length,l,f="value"in zi?zi.value:zi.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return Qs=f.slice(n,1<l?1-l:void 0)}function Ks(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function rr(){return!0}function di(){return!1}function Jt(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?rr:di,this.isPropagationStopped=di,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),i}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Li=Jt(sr),kr=b({},sr,{view:0,detail:0}),Ll=Jt(kr),Br,Ya,ki,Xa=b({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ur,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ki&&(ki&&n.type==="mousemove"?(Br=n.screenX-ki.screenX,Ya=n.screenY-ki.screenY):Ya=Br=0,ki=n),Br)},movementY:function(n){return"movementY"in n?n.movementY:Ya}}),kl=Jt(Xa),Ys=b({},Xa,{dataTransfer:0}),qc=Jt(Ys),Fc=b({},kr,{relatedTarget:0}),Xs=Jt(Fc),Bl=b({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gc=Jt(Bl),$a=b({},sr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Hc=Jt($a),Qc=b({},sr,{data:0}),Bi=Jt(Qc),Kc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $c(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Xc[n])?!!i[n]:!1}function Ur(){return $c}var gn=b({},kr,{key:function(n){if(n.key){var i=Kc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ks(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Yc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ur,charCode:function(n){return n.type==="keypress"?Ks(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ks(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Zc=Jt(gn),Jc=b({},Xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ar=Jt(Jc),h=b({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ur}),y=Jt(h),v=b({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Jt(v),k=b({},Xa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),G=Jt(k),ce=b({},sr,{newState:0,oldState:0}),Me=Jt(ce),xt=[9,13,27,32],$e=Xn&&"CompositionEvent"in window,gt=null;Xn&&"documentMode"in document&&(gt=document.documentMode);var $n=Xn&&"TextEvent"in window&&!gt,Ui=Xn&&(!$e||gt&&8<gt&&11>=gt),mi=" ",gi=!1;function $s(n,i){switch(n){case"keyup":return xt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Za(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ja=!1;function uA(n,i){switch(n){case"compositionend":return Za(i);case"keypress":return i.which!==32?null:(gi=!0,mi);case"textInput":return n=i.data,n===mi&&gi?null:n;default:return null}}function cA(n,i){if(Ja)return n==="compositionend"||!$e&&$s(n,i)?(n=zl(),Qs=jl=zi=null,Ja=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ui&&i.locale!=="ko"?null:i.data;default:return null}}var hA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function My(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!hA[n.type]:i==="textarea"}function Oy(n,i,a,l){zr?ji?ji.push(l):ji=[l]:zr=l,i=Uh(i,"onChange"),0<i.length&&(a=new Li("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Ul=null,ql=null;function fA(n){pv(n,0)}function Wc(n){var i=Mn(n);if(qs(i))return n}function Py(n,i){if(n==="change")return i}var jy=!1;if(Xn){var vd;if(Xn){var Ed="oninput"in document;if(!Ed){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),Ed=typeof zy.oninput=="function"}vd=Ed}else vd=!1;jy=vd&&(!document.documentMode||9<document.documentMode)}function Ly(){Ul&&(Ul.detachEvent("onpropertychange",ky),ql=Ul=null)}function ky(n){if(n.propertyName==="value"&&Wc(ql)){var i=[];Oy(i,ql,n,Yn(n)),Lr(fA,i)}}function dA(n,i,a){n==="focusin"?(Ly(),Ul=i,ql=a,Ul.attachEvent("onpropertychange",ky)):n==="focusout"&&Ly()}function mA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Wc(ql)}function gA(n,i){if(n==="click")return Wc(i)}function pA(n,i){if(n==="input"||n==="change")return Wc(i)}function yA(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Pn=typeof Object.is=="function"?Object.is:yA;function Fl(n,i){if(Pn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Dt.call(i,f)||!Pn(n[f],i[f]))return!1}return!0}function By(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Uy(n,i){var a=By(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=By(a)}}function qy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?qy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Fy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Pi(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Pi(n.document)}return i}function Td(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var _A=Xn&&"documentMode"in document&&11>=document.documentMode,Wa=null,bd=null,Gl=null,Sd=!1;function Gy(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sd||Wa==null||Wa!==Pi(l)||(l=Wa,"selectionStart"in l&&Td(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Gl&&Fl(Gl,l)||(Gl=l,l=Uh(bd,"onSelect"),0<l.length&&(i=new Li("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Wa)))}function Zs(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var eo={animationend:Zs("Animation","AnimationEnd"),animationiteration:Zs("Animation","AnimationIteration"),animationstart:Zs("Animation","AnimationStart"),transitionrun:Zs("Transition","TransitionRun"),transitionstart:Zs("Transition","TransitionStart"),transitioncancel:Zs("Transition","TransitionCancel"),transitionend:Zs("Transition","TransitionEnd")},wd={},Hy={};Xn&&(Hy=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function Js(n){if(wd[n])return wd[n];if(!eo[n])return n;var i=eo[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Hy)return wd[n]=i[a];return n}var Qy=Js("animationend"),Ky=Js("animationiteration"),Yy=Js("animationstart"),vA=Js("transitionrun"),EA=Js("transitionstart"),TA=Js("transitioncancel"),Xy=Js("transitionend"),$y=new Map,Ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ad.push("scrollEnd");function pi(n,i){$y.set(n,i),Mi(i,[n])}var eh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Zn=[],to=0,xd=0;function th(){for(var n=to,i=xd=to=0;i<n;){var a=Zn[i];Zn[i++]=null;var l=Zn[i];Zn[i++]=null;var f=Zn[i];Zn[i++]=null;var d=Zn[i];if(Zn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Zy(a,f,d)}}function nh(n,i,a,l){Zn[to++]=n,Zn[to++]=i,Zn[to++]=a,Zn[to++]=l,xd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Id(n,i,a,l){return nh(n,i,a,l),ih(n)}function Ws(n,i){return nh(n,null,null,i),ih(n)}function Zy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-At(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function ih(n){if(50<fu)throw fu=0,jm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var no={};function bA(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(n,i,a,l){return new bA(n,i,a,l)}function Rd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function or(n,i){var a=n.alternate;return a===null?(a=jn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Jy(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function rh(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")Rd(n)&&(_=1);else if(typeof n=="string")_=I1(n,a,Q.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=jn(31,a,i,f),n.elementType=N,n.lanes=d,n;case Z:return ea(a.children,f,d,i);case Y:_=8,f|=24;break;case se:return n=jn(12,a,i,f|2),n.elementType=se,n.lanes=d,n;case Ie:return n=jn(13,a,i,f),n.elementType=Ie,n.lanes=d,n;case be:return n=jn(19,a,i,f),n.elementType=be,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case le:_=10;break e;case me:_=9;break e;case we:_=11;break e;case R:_=14;break e;case I:_=16,l=null;break e}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=jn(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function ea(n,i,a,l){return n=jn(7,n,l,i),n.lanes=a,n}function Nd(n,i,a){return n=jn(6,n,null,i),n.lanes=a,n}function Wy(n){var i=jn(18,null,null,0);return i.stateNode=n,i}function Cd(n,i,a){return i=jn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var e_=new WeakMap;function Jn(n,i){if(typeof n=="object"&&n!==null){var a=e_.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Tl(i)},e_.set(n,i),i)}return{value:n,source:i,stack:Tl(i)}}var io=[],ro=0,sh=null,Hl=0,Wn=[],ei=0,qr=null,qi=1,Fi="";function lr(n,i){io[ro++]=Hl,io[ro++]=sh,sh=n,Hl=i}function t_(n,i,a){Wn[ei++]=qi,Wn[ei++]=Fi,Wn[ei++]=qr,qr=n;var l=qi;n=Fi;var f=32-At(l)-1;l&=~(1<<f),a+=1;var d=32-At(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,qi=1<<32-At(i)+f|a<<f|l,Fi=d+n}else qi=1<<d|a<<f|l,Fi=n}function Dd(n){n.return!==null&&(lr(n,1),t_(n,1,0))}function Vd(n){for(;n===sh;)sh=io[--ro],io[ro]=null,Hl=io[--ro],io[ro]=null;for(;n===qr;)qr=Wn[--ei],Wn[ei]=null,Fi=Wn[--ei],Wn[ei]=null,qi=Wn[--ei],Wn[ei]=null}function n_(n,i){Wn[ei++]=qi,Wn[ei++]=Fi,Wn[ei++]=qr,qi=i.id,Fi=i.overflow,qr=n}var Wt=null,ft=null,Fe=!1,Fr=null,ti=!1,Md=Error(r(519));function Gr(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ql(Jn(i,n)),Md}function i_(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Mt]=n,i[Qt]=l,a){case"dialog":Le("cancel",i),Le("close",i);break;case"iframe":case"object":case"embed":Le("load",i);break;case"video":case"audio":for(a=0;a<mu.length;a++)Le(mu[a],i);break;case"source":Le("error",i);break;case"img":case"image":case"link":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"input":Le("invalid",i),Lc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Le("invalid",i);break;case"textarea":Le("invalid",i),Pr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Ev(i.textContent,a)?(l.popover!=null&&(Le("beforetoggle",i),Le("toggle",i)),l.onScroll!=null&&Le("scroll",i),l.onScrollEnd!=null&&Le("scrollend",i),l.onClick!=null&&(i.onclick=hi),i=!0):i=!1,i||Gr(n,!0)}function r_(n){for(Wt=n.return;Wt;)switch(Wt.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:Wt=Wt.return}}function so(n){if(n!==Wt)return!1;if(!Fe)return r_(n),Fe=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Zm(n.type,n.memoizedProps)),a=!a),a&&ft&&Gr(n),r_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ft=Nv(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ft=Nv(n)}else i===27?(i=ft,rs(n.type)?(n=ng,ng=null,ft=n):ft=i):ft=Wt?ii(n.stateNode.nextSibling):null;return!0}function ta(){ft=Wt=null,Fe=!1}function Od(){var n=Fr;return n!==null&&(xn===null?xn=n:xn.push.apply(xn,n),Fr=null),n}function Ql(n){Fr===null?Fr=[n]:Fr.push(n)}var Pd=D(null),na=null,ur=null;function Hr(n,i,a){oe(Pd,i._currentValue),i._currentValue=a}function cr(n){n._currentValue=Pd.current,X(Pd)}function jd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function zd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=f;for(var C=0;C<i.length;C++)if(S.context===i[C]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),jd(d.return,a,n),l||(_=null);break e}d=S.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),jd(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function ao(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var S=f.type;Pn(f.pendingProps.value,_.value)||(n!==null?n.push(S):n=[S])}}else if(f===ue.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(vu):n=[vu])}f=f.return}n!==null&&zd(i,n,a,l),i.flags|=262144}function ah(n){for(n=n.firstContext;n!==null;){if(!Pn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ia(n){na=n,ur=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function en(n){return s_(na,n)}function oh(n,i){return na===null&&ia(n),s_(n,i)}function s_(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ur===null){if(n===null)throw Error(r(308));ur=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ur=ur.next=i;return a}var SA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},wA=s.unstable_scheduleCallback,AA=s.unstable_NormalPriority,jt={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ld(){return{controller:new SA,data:new Map,refCount:0}}function Kl(n){n.refCount--,n.refCount===0&&wA(AA,function(){n.controller.abort()})}var Yl=null,kd=0,oo=0,lo=null;function xA(n,i){if(Yl===null){var a=Yl=[];kd=0,oo=qm(),lo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return kd++,i.then(a_,a_),i}function a_(){if(--kd===0&&Yl!==null){lo!==null&&(lo.status="fulfilled");var n=Yl;Yl=null,oo=0,lo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function IA(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var o_=H.S;H.S=function(n,i){G0=mn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&xA(n,i),o_!==null&&o_(n,i)};var ra=D(null);function Bd(){var n=ra.current;return n!==null?n:lt.pooledCache}function lh(n,i){i===null?oe(ra,ra.current):oe(ra,i.pool)}function l_(){var n=Bd();return n===null?null:{parent:jt._currentValue,pool:n}}var uo=Error(r(460)),Ud=Error(r(474)),uh=Error(r(542)),ch={then:function(){}};function u_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function c_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(hi,hi),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,f_(n),n;default:if(typeof i.status=="string")i.then(hi,hi);else{if(n=lt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,f_(n),n}throw aa=i,uo}}function sa(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(aa=a,uo):a}}var aa=null;function h_(){if(aa===null)throw Error(r(459));var n=aa;return aa=null,n}function f_(n){if(n===uo||n===uh)throw Error(r(483))}var co=null,Xl=0;function hh(n){var i=Xl;return Xl+=1,co===null&&(co=[]),c_(co,n,i)}function $l(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function fh(n,i){throw i.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function d_(n){function i(z,M){if(n){var B=z.deletions;B===null?(z.deletions=[M],z.flags|=16):B.push(M)}}function a(z,M){if(!n)return null;for(;M!==null;)i(z,M),M=M.sibling;return null}function l(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function f(z,M){return z=or(z,M),z.index=0,z.sibling=null,z}function d(z,M,B){return z.index=B,n?(B=z.alternate,B!==null?(B=B.index,B<M?(z.flags|=67108866,M):B):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function _(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function S(z,M,B,W){return M===null||M.tag!==6?(M=Nd(B,z.mode,W),M.return=z,M):(M=f(M,B),M.return=z,M)}function C(z,M,B,W){var Se=B.type;return Se===Z?J(z,M,B.props.children,W,B.key):M!==null&&(M.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===I&&sa(Se)===M.type)?(M=f(M,B.props),$l(M,B),M.return=z,M):(M=rh(B.type,B.key,B.props,null,z.mode,W),$l(M,B),M.return=z,M)}function U(z,M,B,W){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=Cd(B,z.mode,W),M.return=z,M):(M=f(M,B.children||[]),M.return=z,M)}function J(z,M,B,W,Se){return M===null||M.tag!==7?(M=ea(B,z.mode,W,Se),M.return=z,M):(M=f(M,B),M.return=z,M)}function ee(z,M,B){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Nd(""+M,z.mode,B),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case P:return B=rh(M.type,M.key,M.props,null,z.mode,B),$l(B,M),B.return=z,B;case $:return M=Cd(M,z.mode,B),M.return=z,M;case I:return M=sa(M),ee(z,M,B)}if(He(M)||j(M))return M=ea(M,z.mode,B,null),M.return=z,M;if(typeof M.then=="function")return ee(z,hh(M),B);if(M.$$typeof===le)return ee(z,oh(z,M),B);fh(z,M)}return null}function q(z,M,B,W){var Se=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Se!==null?null:S(z,M,""+B,W);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case P:return B.key===Se?C(z,M,B,W):null;case $:return B.key===Se?U(z,M,B,W):null;case I:return B=sa(B),q(z,M,B,W)}if(He(B)||j(B))return Se!==null?null:J(z,M,B,W,null);if(typeof B.then=="function")return q(z,M,hh(B),W);if(B.$$typeof===le)return q(z,M,oh(z,B),W);fh(z,B)}return null}function K(z,M,B,W,Se){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return z=z.get(B)||null,S(M,z,""+W,Se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case P:return z=z.get(W.key===null?B:W.key)||null,C(M,z,W,Se);case $:return z=z.get(W.key===null?B:W.key)||null,U(M,z,W,Se);case I:return W=sa(W),K(z,M,B,W,Se)}if(He(W)||j(W))return z=z.get(B)||null,J(M,z,W,Se,null);if(typeof W.then=="function")return K(z,M,B,hh(W),Se);if(W.$$typeof===le)return K(z,M,B,oh(M,W),Se);fh(M,W)}return null}function _e(z,M,B,W){for(var Se=null,Ye=null,Ee=M,je=M=0,Ue=null;Ee!==null&&je<B.length;je++){Ee.index>je?(Ue=Ee,Ee=null):Ue=Ee.sibling;var Xe=q(z,Ee,B[je],W);if(Xe===null){Ee===null&&(Ee=Ue);break}n&&Ee&&Xe.alternate===null&&i(z,Ee),M=d(Xe,M,je),Ye===null?Se=Xe:Ye.sibling=Xe,Ye=Xe,Ee=Ue}if(je===B.length)return a(z,Ee),Fe&&lr(z,je),Se;if(Ee===null){for(;je<B.length;je++)Ee=ee(z,B[je],W),Ee!==null&&(M=d(Ee,M,je),Ye===null?Se=Ee:Ye.sibling=Ee,Ye=Ee);return Fe&&lr(z,je),Se}for(Ee=l(Ee);je<B.length;je++)Ue=K(Ee,z,je,B[je],W),Ue!==null&&(n&&Ue.alternate!==null&&Ee.delete(Ue.key===null?je:Ue.key),M=d(Ue,M,je),Ye===null?Se=Ue:Ye.sibling=Ue,Ye=Ue);return n&&Ee.forEach(function(us){return i(z,us)}),Fe&&lr(z,je),Se}function Ae(z,M,B,W){if(B==null)throw Error(r(151));for(var Se=null,Ye=null,Ee=M,je=M=0,Ue=null,Xe=B.next();Ee!==null&&!Xe.done;je++,Xe=B.next()){Ee.index>je?(Ue=Ee,Ee=null):Ue=Ee.sibling;var us=q(z,Ee,Xe.value,W);if(us===null){Ee===null&&(Ee=Ue);break}n&&Ee&&us.alternate===null&&i(z,Ee),M=d(us,M,je),Ye===null?Se=us:Ye.sibling=us,Ye=us,Ee=Ue}if(Xe.done)return a(z,Ee),Fe&&lr(z,je),Se;if(Ee===null){for(;!Xe.done;je++,Xe=B.next())Xe=ee(z,Xe.value,W),Xe!==null&&(M=d(Xe,M,je),Ye===null?Se=Xe:Ye.sibling=Xe,Ye=Xe);return Fe&&lr(z,je),Se}for(Ee=l(Ee);!Xe.done;je++,Xe=B.next())Xe=K(Ee,z,je,Xe.value,W),Xe!==null&&(n&&Xe.alternate!==null&&Ee.delete(Xe.key===null?je:Xe.key),M=d(Xe,M,je),Ye===null?Se=Xe:Ye.sibling=Xe,Ye=Xe);return n&&Ee.forEach(function(L1){return i(z,L1)}),Fe&&lr(z,je),Se}function ot(z,M,B,W){if(typeof B=="object"&&B!==null&&B.type===Z&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case P:e:{for(var Se=B.key;M!==null;){if(M.key===Se){if(Se=B.type,Se===Z){if(M.tag===7){a(z,M.sibling),W=f(M,B.props.children),W.return=z,z=W;break e}}else if(M.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===I&&sa(Se)===M.type){a(z,M.sibling),W=f(M,B.props),$l(W,B),W.return=z,z=W;break e}a(z,M);break}else i(z,M);M=M.sibling}B.type===Z?(W=ea(B.props.children,z.mode,W,B.key),W.return=z,z=W):(W=rh(B.type,B.key,B.props,null,z.mode,W),$l(W,B),W.return=z,z=W)}return _(z);case $:e:{for(Se=B.key;M!==null;){if(M.key===Se)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){a(z,M.sibling),W=f(M,B.children||[]),W.return=z,z=W;break e}else{a(z,M);break}else i(z,M);M=M.sibling}W=Cd(B,z.mode,W),W.return=z,z=W}return _(z);case I:return B=sa(B),ot(z,M,B,W)}if(He(B))return _e(z,M,B,W);if(j(B)){if(Se=j(B),typeof Se!="function")throw Error(r(150));return B=Se.call(B),Ae(z,M,B,W)}if(typeof B.then=="function")return ot(z,M,hh(B),W);if(B.$$typeof===le)return ot(z,M,oh(z,B),W);fh(z,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,M!==null&&M.tag===6?(a(z,M.sibling),W=f(M,B),W.return=z,z=W):(a(z,M),W=Nd(B,z.mode,W),W.return=z,z=W),_(z)):a(z,M)}return function(z,M,B,W){try{Xl=0;var Se=ot(z,M,B,W);return co=null,Se}catch(Ee){if(Ee===uo||Ee===uh)throw Ee;var Ye=jn(29,Ee,null,z.mode);return Ye.lanes=W,Ye.return=z,Ye}finally{}}}var oa=d_(!0),m_=d_(!1),Qr=!1;function qd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Kr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Yr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ze&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=ih(n),Zy(n,null,a),i}return nh(n,l,i,a),ih(n)}function Zl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,wl(n,a)}}function Gd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Hd=!1;function Jl(){if(Hd){var n=lo;if(n!==null)throw n}}function Wl(n,i,a,l){Hd=!1;var f=n.updateQueue;Qr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var C=S,U=C.next;C.next=null,_===null?d=U:_.next=U,_=C;var J=n.alternate;J!==null&&(J=J.updateQueue,S=J.lastBaseUpdate,S!==_&&(S===null?J.firstBaseUpdate=U:S.next=U,J.lastBaseUpdate=C))}if(d!==null){var ee=f.baseState;_=0,J=U=C=null,S=d;do{var q=S.lane&-536870913,K=q!==S.lane;if(K?(Be&q)===q:(l&q)===q){q!==0&&q===oo&&(Hd=!0),J!==null&&(J=J.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var _e=n,Ae=S;q=i;var ot=a;switch(Ae.tag){case 1:if(_e=Ae.payload,typeof _e=="function"){ee=_e.call(ot,ee,q);break e}ee=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ae.payload,q=typeof _e=="function"?_e.call(ot,ee,q):_e,q==null)break e;ee=b({},ee,q);break e;case 2:Qr=!0}}q=S.callback,q!==null&&(n.flags|=64,K&&(n.flags|=8192),K=f.callbacks,K===null?f.callbacks=[q]:K.push(q))}else K={lane:q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},J===null?(U=J=K,C=ee):J=J.next=K,_|=q;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;K=S,S=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);J===null&&(C=ee),f.baseState=C,f.firstBaseUpdate=U,f.lastBaseUpdate=J,d===null&&(f.shared.lanes=0),Wr|=_,n.lanes=_,n.memoizedState=ee}}function g_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function p_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)g_(a[n],i)}var ho=D(null),dh=D(0);function y_(n,i){n=vr,oe(dh,n),oe(ho,i),vr=n|i.baseLanes}function Qd(){oe(dh,vr),oe(ho,ho.current)}function Kd(){vr=dh.current,X(ho),X(dh)}var zn=D(null),ni=null;function Xr(n){var i=n.alternate;oe(It,It.current&1),oe(zn,n),ni===null&&(i===null||ho.current!==null||i.memoizedState!==null)&&(ni=n)}function Yd(n){oe(It,It.current),oe(zn,n),ni===null&&(ni=n)}function __(n){n.tag===22?(oe(It,It.current),oe(zn,n),ni===null&&(ni=n)):$r()}function $r(){oe(It,It.current),oe(zn,zn.current)}function Ln(n){X(zn),ni===n&&(ni=null),X(It)}var It=D(0);function mh(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||eg(a)||tg(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var hr=0,Oe=null,st=null,zt=null,gh=!1,fo=!1,la=!1,ph=0,eu=0,mo=null,RA=0;function Tt(){throw Error(r(321))}function Xd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Pn(n[a],i[a]))return!1;return!0}function $d(n,i,a,l,f,d){return hr=d,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=n===null||n.memoizedState===null?t0:hm,la=!1,d=a(l,f),la=!1,fo&&(d=E_(i,a,l,f)),v_(n),d}function v_(n){H.H=iu;var i=st!==null&&st.next!==null;if(hr=0,zt=st=Oe=null,gh=!1,eu=0,mo=null,i)throw Error(r(300));n===null||Lt||(n=n.dependencies,n!==null&&ah(n)&&(Lt=!0))}function E_(n,i,a,l){Oe=n;var f=0;do{if(fo&&(mo=null),eu=0,fo=!1,25<=f)throw Error(r(301));if(f+=1,zt=st=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}H.H=n0,d=i(a,l)}while(fo);return d}function NA(){var n=H.H,i=n.useState()[0];return i=typeof i.then=="function"?tu(i):i,n=n.useState()[0],(st!==null?st.memoizedState:null)!==n&&(Oe.flags|=1024),i}function Zd(){var n=ph!==0;return ph=0,n}function Jd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Wd(n){if(gh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}gh=!1}hr=0,zt=st=Oe=null,fo=!1,eu=ph=0,mo=null}function pn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Oe.memoizedState=zt=n:zt=zt.next=n,zt}function Rt(){if(st===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=st.next;var i=zt===null?Oe.memoizedState:zt.next;if(i!==null)zt=i,st=n;else{if(n===null)throw Oe.alternate===null?Error(r(467)):Error(r(310));st=n,n={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},zt===null?Oe.memoizedState=zt=n:zt=zt.next=n}return zt}function yh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tu(n){var i=eu;return eu+=1,mo===null&&(mo=[]),n=c_(mo,n,i),i=Oe,(zt===null?i.memoizedState:zt.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?t0:hm),n}function _h(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return tu(n);if(n.$$typeof===le)return en(n)}throw Error(r(438,String(n)))}function em(n){var i=null,a=Oe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=yh(),Oe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=O;return i.index++,a}function fr(n,i){return typeof i=="function"?i(n):i}function vh(n){var i=Rt();return tm(i,st,n)}function tm(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var S=_=null,C=null,U=i,J=!1;do{var ee=U.lane&-536870913;if(ee!==U.lane?(Be&ee)===ee:(hr&ee)===ee){var q=U.revertLane;if(q===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),ee===oo&&(J=!0);else if((hr&q)===q){U=U.next,q===oo&&(J=!0);continue}else ee={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(S=C=ee,_=d):C=C.next=ee,Oe.lanes|=q,Wr|=q;ee=U.action,la&&a(d,ee),d=U.hasEagerState?U.eagerState:a(d,ee)}else q={lane:ee,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(S=C=q,_=d):C=C.next=q,Oe.lanes|=ee,Wr|=ee;U=U.next}while(U!==null&&U!==i);if(C===null?_=d:C.next=S,!Pn(d,n.memoizedState)&&(Lt=!0,J&&(a=lo,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=C,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function nm(n){var i=Rt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);Pn(d,i.memoizedState)||(Lt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function T_(n,i,a){var l=Oe,f=Rt(),d=Fe;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Pn((st||f).memoizedState,a);if(_&&(f.memoizedState=a,Lt=!0),f=f.queue,sm(w_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||zt!==null&&zt.memoizedState.tag&1){if(l.flags|=2048,go(9,{destroy:void 0},S_.bind(null,l,f,a,i),null),lt===null)throw Error(r(349));d||(hr&127)!==0||b_(l,i,a)}return a}function b_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Oe.updateQueue,i===null?(i=yh(),Oe.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function S_(n,i,a,l){i.value=a,i.getSnapshot=l,A_(i)&&x_(n)}function w_(n,i,a){return a(function(){A_(i)&&x_(n)})}function A_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Pn(n,a)}catch{return!0}}function x_(n){var i=Ws(n,2);i!==null&&In(i,n,2)}function im(n){var i=pn();if(typeof n=="function"){var a=n;if(n=a(),la){Qn(!0);try{a()}finally{Qn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:n},i}function I_(n,i,a,l){return n.baseState=a,tm(n,st,typeof l=="function"?l:fr)}function CA(n,i,a,l,f){if(bh(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};H.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,R_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function R_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=H.T,_={};H.T=_;try{var S=a(f,l),C=H.S;C!==null&&C(_,S),N_(n,i,S)}catch(U){rm(n,i,U)}finally{d!==null&&_.types!==null&&(d.types=_.types),H.T=d}}else try{d=a(f,l),N_(n,i,d)}catch(U){rm(n,i,U)}}function N_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){C_(n,i,l)},function(l){return rm(n,i,l)}):C_(n,i,a)}function C_(n,i,a){i.status="fulfilled",i.value=a,D_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,R_(n,a)))}function rm(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,D_(i),i=i.next;while(i!==l)}n.action=null}function D_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function V_(n,i){return i}function M_(n,i){if(Fe){var a=lt.formState;if(a!==null){e:{var l=Oe;if(Fe){if(ft){t:{for(var f=ft,d=ti;f.nodeType!==8;){if(!d){f=null;break t}if(f=ii(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ft=ii(f.nextSibling),l=f.data==="F!";break e}}Gr(l)}l=!1}l&&(i=a[0])}}return a=pn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:V_,lastRenderedState:i},a.queue=l,a=J_.bind(null,Oe,l),l.dispatch=a,l=im(!1),d=cm.bind(null,Oe,!1,l.queue),l=pn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=CA.bind(null,Oe,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function O_(n){var i=Rt();return P_(i,st,n)}function P_(n,i,a){if(i=tm(n,i,V_)[0],n=vh(fr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=tu(i)}catch(_){throw _===uo?uh:_}else l=i;i=Rt();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Oe.flags|=2048,go(9,{destroy:void 0},DA.bind(null,f,a),null)),[l,d,n]}function DA(n,i){n.action=i}function j_(n){var i=Rt(),a=st;if(a!==null)return P_(i,a,n);Rt(),i=i.memoizedState,a=Rt();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function go(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=yh(),Oe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function z_(){return Rt().memoizedState}function Eh(n,i,a,l){var f=pn();Oe.flags|=n,f.memoizedState=go(1|i,{destroy:void 0},a,l===void 0?null:l)}function Th(n,i,a,l){var f=Rt();l=l===void 0?null:l;var d=f.memoizedState.inst;st!==null&&l!==null&&Xd(l,st.memoizedState.deps)?f.memoizedState=go(i,d,a,l):(Oe.flags|=n,f.memoizedState=go(1|i,d,a,l))}function L_(n,i){Eh(8390656,8,n,i)}function sm(n,i){Th(2048,8,n,i)}function VA(n){Oe.flags|=4;var i=Oe.updateQueue;if(i===null)i=yh(),Oe.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function k_(n){var i=Rt().memoizedState;return VA({ref:i,nextImpl:n}),function(){if((Ze&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function B_(n,i){return Th(4,2,n,i)}function U_(n,i){return Th(4,4,n,i)}function q_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function F_(n,i,a){a=a!=null?a.concat([n]):null,Th(4,4,q_.bind(null,i,n),a)}function am(){}function G_(n,i){var a=Rt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Xd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function H_(n,i){var a=Rt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Xd(i,l[1]))return l[0];if(l=n(),la){Qn(!0);try{n()}finally{Qn(!1)}}return a.memoizedState=[l,i],l}function om(n,i,a){return a===void 0||(hr&1073741824)!==0&&(Be&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=Q0(),Oe.lanes|=n,Wr|=n,a)}function Q_(n,i,a,l){return Pn(a,i)?a:ho.current!==null?(n=om(n,a,l),Pn(n,i)||(Lt=!0),n):(hr&42)===0||(hr&1073741824)!==0&&(Be&261930)===0?(Lt=!0,n.memoizedState=a):(n=Q0(),Oe.lanes|=n,Wr|=n,i)}function K_(n,i,a,l,f){var d=ae.p;ae.p=d!==0&&8>d?d:8;var _=H.T,S={};H.T=S,cm(n,!1,i,a);try{var C=f(),U=H.S;if(U!==null&&U(S,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var J=IA(C,l);nu(n,i,J,Un(n))}else nu(n,i,l,Un(n))}catch(ee){nu(n,i,{then:function(){},status:"rejected",reason:ee},Un())}finally{ae.p=d,_!==null&&S.types!==null&&(_.types=S.types),H.T=_}}function MA(){}function lm(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=Y_(n).queue;K_(n,f,i,ie,a===null?MA:function(){return X_(n),a(l)})}function Y_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:ie},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function X_(n){var i=Y_(n);i.next===null&&(i=n.alternate.memoizedState),nu(n,i.next.queue,{},Un())}function um(){return en(vu)}function $_(){return Rt().memoizedState}function Z_(){return Rt().memoizedState}function OA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Un();n=Kr(a);var l=Yr(i,n,a);l!==null&&(In(l,i,a),Zl(l,i,a)),i={cache:Ld()},n.payload=i;return}i=i.return}}function PA(n,i,a){var l=Un();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},bh(n)?W_(i,a):(a=Id(n,i,a,l),a!==null&&(In(a,n,l),e0(a,i,l)))}function J_(n,i,a){var l=Un();nu(n,i,a,l)}function nu(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(bh(n))W_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,S=d(_,a);if(f.hasEagerState=!0,f.eagerState=S,Pn(S,_))return nh(n,i,f,0),lt===null&&th(),!1}catch{}finally{}if(a=Id(n,i,f,l),a!==null)return In(a,n,l),e0(a,i,l),!0}return!1}function cm(n,i,a,l){if(l={lane:2,revertLane:qm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},bh(n)){if(i)throw Error(r(479))}else i=Id(n,a,l,2),i!==null&&In(i,n,2)}function bh(n){var i=n.alternate;return n===Oe||i!==null&&i===Oe}function W_(n,i){fo=gh=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function e0(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,wl(n,a)}}var iu={readContext:en,use:_h,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};iu.useEffectEvent=Tt;var t0={readContext:en,use:_h,useCallback:function(n,i){return pn().memoizedState=[n,i===void 0?null:i],n},useContext:en,useEffect:L_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Eh(4194308,4,q_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Eh(4194308,4,n,i)},useInsertionEffect:function(n,i){Eh(4,2,n,i)},useMemo:function(n,i){var a=pn();i=i===void 0?null:i;var l=n();if(la){Qn(!0);try{n()}finally{Qn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=pn();if(a!==void 0){var f=a(i);if(la){Qn(!0);try{a(i)}finally{Qn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=PA.bind(null,Oe,n),[l.memoizedState,n]},useRef:function(n){var i=pn();return n={current:n},i.memoizedState=n},useState:function(n){n=im(n);var i=n.queue,a=J_.bind(null,Oe,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:am,useDeferredValue:function(n,i){var a=pn();return om(a,n,i)},useTransition:function(){var n=im(!1);return n=K_.bind(null,Oe,n.queue,!0,!1),pn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Oe,f=pn();if(Fe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),lt===null)throw Error(r(349));(Be&127)!==0||b_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,L_(w_.bind(null,l,d,n),[n]),l.flags|=2048,go(9,{destroy:void 0},S_.bind(null,l,d,a,i),null),a},useId:function(){var n=pn(),i=lt.identifierPrefix;if(Fe){var a=Fi,l=qi;a=(l&~(1<<32-At(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=ph++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=RA++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:um,useFormState:M_,useActionState:M_,useOptimistic:function(n){var i=pn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=cm.bind(null,Oe,!0,a),a.dispatch=i,[n,i]},useMemoCache:em,useCacheRefresh:function(){return pn().memoizedState=OA.bind(null,Oe)},useEffectEvent:function(n){var i=pn(),a={impl:n};return i.memoizedState=a,function(){if((Ze&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},hm={readContext:en,use:_h,useCallback:G_,useContext:en,useEffect:sm,useImperativeHandle:F_,useInsertionEffect:B_,useLayoutEffect:U_,useMemo:H_,useReducer:vh,useRef:z_,useState:function(){return vh(fr)},useDebugValue:am,useDeferredValue:function(n,i){var a=Rt();return Q_(a,st.memoizedState,n,i)},useTransition:function(){var n=vh(fr)[0],i=Rt().memoizedState;return[typeof n=="boolean"?n:tu(n),i]},useSyncExternalStore:T_,useId:$_,useHostTransitionStatus:um,useFormState:O_,useActionState:O_,useOptimistic:function(n,i){var a=Rt();return I_(a,st,n,i)},useMemoCache:em,useCacheRefresh:Z_};hm.useEffectEvent=k_;var n0={readContext:en,use:_h,useCallback:G_,useContext:en,useEffect:sm,useImperativeHandle:F_,useInsertionEffect:B_,useLayoutEffect:U_,useMemo:H_,useReducer:nm,useRef:z_,useState:function(){return nm(fr)},useDebugValue:am,useDeferredValue:function(n,i){var a=Rt();return st===null?om(a,n,i):Q_(a,st.memoizedState,n,i)},useTransition:function(){var n=nm(fr)[0],i=Rt().memoizedState;return[typeof n=="boolean"?n:tu(n),i]},useSyncExternalStore:T_,useId:$_,useHostTransitionStatus:um,useFormState:j_,useActionState:j_,useOptimistic:function(n,i){var a=Rt();return st!==null?I_(a,st,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:em,useCacheRefresh:Z_};n0.useEffectEvent=k_;function fm(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:b({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var dm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Un(),f=Kr(l);f.payload=i,a!=null&&(f.callback=a),i=Yr(n,f,l),i!==null&&(In(i,n,l),Zl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Un(),f=Kr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Yr(n,f,l),i!==null&&(In(i,n,l),Zl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Un(),l=Kr(a);l.tag=2,i!=null&&(l.callback=i),i=Yr(n,l,a),i!==null&&(In(i,n,a),Zl(i,n,a))}};function i0(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Fl(a,l)||!Fl(f,d):!0}function r0(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&dm.enqueueReplaceState(i,i.state,null)}function ua(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=b({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function s0(n){eh(n)}function a0(n){console.error(n)}function o0(n){eh(n)}function Sh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function l0(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function mm(n,i,a){return a=Kr(a),a.tag=3,a.payload={element:null},a.callback=function(){Sh(n,i)},a}function u0(n){return n=Kr(n),n.tag=3,n}function c0(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){l0(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){l0(i,a,l),typeof f!="function"&&(es===null?es=new Set([this]):es.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function jA(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ao(i,a,f,!0),a=zn.current,a!==null){switch(a.tag){case 31:case 13:return ni===null?Ph():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===ch?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),km(n,l,f)),!1;case 22:return a.flags|=65536,l===ch?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),km(n,l,f)),!1}throw Error(r(435,a.tag))}return km(n,l,f),Ph(),!1}if(Fe)return i=zn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Md&&(n=Error(r(422),{cause:l}),Ql(Jn(n,a)))):(l!==Md&&(i=Error(r(423),{cause:l}),Ql(Jn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Jn(l,a),f=mm(n.stateNode,l,f),Gd(n,f),bt!==4&&(bt=2)),!1;var d=Error(r(520),{cause:l});if(d=Jn(d,a),hu===null?hu=[d]:hu.push(d),bt!==4&&(bt=2),i===null)return!0;l=Jn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=mm(a.stateNode,l,n),Gd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(es===null||!es.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=u0(f),c0(f,n,a,l),Gd(a,f),!1}a=a.return}while(a!==null);return!1}var gm=Error(r(461)),Lt=!1;function tn(n,i,a,l){i.child=n===null?m_(i,null,a,l):oa(i,n.child,a,l)}function h0(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var S in l)S!=="ref"&&(_[S]=l[S])}else _=l;return ia(i),l=$d(n,i,a,_,d,f),S=Zd(),n!==null&&!Lt?(Jd(n,i,f),dr(n,i,f)):(Fe&&S&&Dd(i),i.flags|=1,tn(n,i,l,f),i.child)}function f0(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Rd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,d0(n,i,d,l,f)):(n=rh(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Sm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Fl,a(_,l)&&n.ref===i.ref)return dr(n,i,f)}return i.flags|=1,n=or(d,l),n.ref=i.ref,n.return=i,i.child=n}function d0(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Fl(d,l)&&n.ref===i.ref)if(Lt=!1,i.pendingProps=l=d,Sm(n,f))(n.flags&131072)!==0&&(Lt=!0);else return i.lanes=n.lanes,dr(n,i,f)}return pm(n,i,a,l,f)}function m0(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return g0(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&lh(i,d!==null?d.cachePool:null),d!==null?y_(i,d):Qd(),__(i);else return l=i.lanes=536870912,g0(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(lh(i,d.cachePool),y_(i,d),$r(),i.memoizedState=null):(n!==null&&lh(i,null),Qd(),$r());return tn(n,i,f,a),i.child}function ru(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function g0(n,i,a,l,f){var d=Bd();return d=d===null?null:{parent:jt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&lh(i,null),Qd(),__(i),n!==null&&ao(n,i,l,!0),i.childLanes=f,null}function wh(n,i){return i=xh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function p0(n,i,a){return oa(i,n.child,null,a),n=wh(i,i.pendingProps),n.flags|=2,Ln(i),i.memoizedState=null,n}function zA(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Fe){if(l.mode==="hidden")return n=wh(i,l),i.lanes=536870912,ru(null,n);if(Yd(i),(n=ft)?(n=Rv(n,ti),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:qr!==null?{id:qi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},a=Wy(n),a.return=i,i.child=a,Wt=i,ft=null)):n=null,n===null)throw Gr(i);return i.lanes=536870912,null}return wh(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Yd(i),f)if(i.flags&256)i.flags&=-257,i=p0(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Lt||ao(n,i,a,!1),f=(a&n.childLanes)!==0,Lt||f){if(l=lt,l!==null&&(_=Al(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Ws(n,_),In(l,n,_),gm;Ph(),i=p0(n,i,a)}else n=d.treeContext,ft=ii(_.nextSibling),Wt=i,Fe=!0,Fr=null,ti=!1,n!==null&&n_(i,n),i=wh(i,l),i.flags|=4096;return i}return n=or(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Ah(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function pm(n,i,a,l,f){return ia(i),a=$d(n,i,a,l,void 0,f),l=Zd(),n!==null&&!Lt?(Jd(n,i,f),dr(n,i,f)):(Fe&&l&&Dd(i),i.flags|=1,tn(n,i,a,f),i.child)}function y0(n,i,a,l,f,d){return ia(i),i.updateQueue=null,a=E_(i,l,a,f),v_(n),l=Zd(),n!==null&&!Lt?(Jd(n,i,d),dr(n,i,d)):(Fe&&l&&Dd(i),i.flags|=1,tn(n,i,a,d),i.child)}function _0(n,i,a,l,f){if(ia(i),i.stateNode===null){var d=no,_=a.contextType;typeof _=="object"&&_!==null&&(d=en(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=dm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},qd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?en(_):no,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(fm(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&dm.enqueueReplaceState(d,d.state,null),Wl(i,l,d,f),Jl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var S=i.memoizedProps,C=ua(a,S);d.props=C;var U=d.context,J=a.contextType;_=no,typeof J=="object"&&J!==null&&(_=en(J));var ee=a.getDerivedStateFromProps;J=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,J||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||U!==_)&&r0(i,d,l,_),Qr=!1;var q=i.memoizedState;d.state=q,Wl(i,l,d,f),Jl(),U=i.memoizedState,S||q!==U||Qr?(typeof ee=="function"&&(fm(i,a,ee,l),U=i.memoizedState),(C=Qr||i0(i,a,C,l,q,U,_))?(J||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=U),d.props=l,d.state=U,d.context=_,l=C):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Fd(n,i),_=i.memoizedProps,J=ua(a,_),d.props=J,ee=i.pendingProps,q=d.context,U=a.contextType,C=no,typeof U=="object"&&U!==null&&(C=en(U)),S=a.getDerivedStateFromProps,(U=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==ee||q!==C)&&r0(i,d,l,C),Qr=!1,q=i.memoizedState,d.state=q,Wl(i,l,d,f),Jl();var K=i.memoizedState;_!==ee||q!==K||Qr||n!==null&&n.dependencies!==null&&ah(n.dependencies)?(typeof S=="function"&&(fm(i,a,S,l),K=i.memoizedState),(J=Qr||i0(i,a,J,l,q,K,C)||n!==null&&n.dependencies!==null&&ah(n.dependencies))?(U||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,C)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=K),d.props=l,d.state=K,d.context=C,l=J):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,Ah(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=oa(i,n.child,null,f),i.child=oa(i,null,a,f)):tn(n,i,a,f),i.memoizedState=d.state,n=i.child):n=dr(n,i,f),n}function v0(n,i,a,l){return ta(),i.flags|=256,tn(n,i,a,l),i.child}var ym={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _m(n){return{baseLanes:n,cachePool:l_()}}function vm(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Bn),n}function E0(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(It.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(Fe){if(f?Xr(i):$r(),(n=ft)?(n=Rv(n,ti),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:qr!==null?{id:qi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},a=Wy(n),a.return=i,i.child=a,Wt=i,ft=null)):n=null,n===null)throw Gr(i);return tg(n)?i.lanes=32:i.lanes=536870912,null}var S=l.children;return l=l.fallback,f?($r(),f=i.mode,S=xh({mode:"hidden",children:S},f),l=ea(l,f,a,null),S.return=i,l.return=i,S.sibling=l,i.child=S,l=i.child,l.memoizedState=_m(a),l.childLanes=vm(n,_,a),i.memoizedState=ym,ru(null,l)):(Xr(i),Em(i,S))}var C=n.memoizedState;if(C!==null&&(S=C.dehydrated,S!==null)){if(d)i.flags&256?(Xr(i),i.flags&=-257,i=Tm(n,i,a)):i.memoizedState!==null?($r(),i.child=n.child,i.flags|=128,i=null):($r(),S=l.fallback,f=i.mode,l=xh({mode:"visible",children:l.children},f),S=ea(S,f,a,null),S.flags|=2,l.return=i,S.return=i,l.sibling=S,i.child=l,oa(i,n.child,null,a),l=i.child,l.memoizedState=_m(a),l.childLanes=vm(n,_,a),i.memoizedState=ym,i=ru(null,l));else if(Xr(i),tg(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var U=_.dgst;_=U,l=Error(r(419)),l.stack="",l.digest=_,Ql({value:l,source:null,stack:null}),i=Tm(n,i,a)}else if(Lt||ao(n,i,a,!1),_=(a&n.childLanes)!==0,Lt||_){if(_=lt,_!==null&&(l=Al(_,a),l!==0&&l!==C.retryLane))throw C.retryLane=l,Ws(n,l),In(_,n,l),gm;eg(S)||Ph(),i=Tm(n,i,a)}else eg(S)?(i.flags|=192,i.child=n.child,i=null):(n=C.treeContext,ft=ii(S.nextSibling),Wt=i,Fe=!0,Fr=null,ti=!1,n!==null&&n_(i,n),i=Em(i,l.children),i.flags|=4096);return i}return f?($r(),S=l.fallback,f=i.mode,C=n.child,U=C.sibling,l=or(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,U!==null?S=or(U,S):(S=ea(S,f,a,null),S.flags|=2),S.return=i,l.return=i,l.sibling=S,i.child=l,ru(null,l),l=i.child,S=n.child.memoizedState,S===null?S=_m(a):(f=S.cachePool,f!==null?(C=jt._currentValue,f=f.parent!==C?{parent:C,pool:C}:f):f=l_(),S={baseLanes:S.baseLanes|a,cachePool:f}),l.memoizedState=S,l.childLanes=vm(n,_,a),i.memoizedState=ym,ru(n.child,l)):(Xr(i),a=n.child,n=a.sibling,a=or(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function Em(n,i){return i=xh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function xh(n,i){return n=jn(22,n,null,i),n.lanes=0,n}function Tm(n,i,a){return oa(i,n.child,null,a),n=Em(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function T0(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),jd(n.return,i,a)}function bm(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function b0(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=It.current,S=(_&2)!==0;if(S?(_=_&1|2,i.flags|=128):_&=1,oe(It,_),tn(n,i,l,a),l=Fe?Hl:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&T0(n,a,i);else if(n.tag===19)T0(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&mh(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),bm(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&mh(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}bm(i,!0,a,null,d,l);break;case"together":bm(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function dr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Wr|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(ao(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=or(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=or(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Sm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&ah(n)))}function LA(n,i,a){switch(i.tag){case 3:xe(i,i.stateNode.containerInfo),Hr(i,jt,n.memoizedState.cache),ta();break;case 27:case 5:ut(i);break;case 4:xe(i,i.stateNode.containerInfo);break;case 10:Hr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Yd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Xr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?E0(n,i,a):(Xr(i),n=dr(n,i,a),n!==null?n.sibling:null);Xr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ao(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return b0(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(It,It.current),l)break;return null;case 22:return i.lanes=0,m0(n,i,a,i.pendingProps);case 24:Hr(i,jt,n.memoizedState.cache)}return dr(n,i,a)}function S0(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Lt=!0;else{if(!Sm(n,a)&&(i.flags&128)===0)return Lt=!1,LA(n,i,a);Lt=(n.flags&131072)!==0}else Lt=!1,Fe&&(i.flags&1048576)!==0&&t_(i,Hl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(n=sa(i.elementType),i.type=n,typeof n=="function")Rd(n)?(l=ua(n,l),i.tag=1,i=_0(null,i,n,l,a)):(i.tag=0,i=pm(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===we){i.tag=11,i=h0(null,i,n,l,a);break e}else if(f===R){i.tag=14,i=f0(null,i,n,l,a);break e}}throw i=Re(n)||n,Error(r(306,i,""))}}return i;case 0:return pm(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=ua(l,i.pendingProps),_0(n,i,l,f,a);case 3:e:{if(xe(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Fd(n,i),Wl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Hr(i,jt,l),l!==d.cache&&zd(i,[jt],a,!0),Jl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=v0(n,i,l,a);break e}else if(l!==f){f=Jn(Error(r(424)),i),Ql(f),i=v0(n,i,l,a);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ft=ii(n.firstChild),Wt=i,Fe=!0,Fr=null,ti=!0,a=m_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ta(),l===f){i=dr(n,i,a);break e}tn(n,i,l,a)}i=i.child}return i;case 26:return Ah(n,i),n===null?(a=Ov(i.type,null,i.pendingProps,null))?i.memoizedState=a:Fe||(a=i.type,n=i.pendingProps,l=qh(fe.current).createElement(a),l[Mt]=i,l[Qt]=n,nn(l,a,n),Ot(l),i.stateNode=l):i.memoizedState=Ov(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ut(i),n===null&&Fe&&(l=i.stateNode=Dv(i.type,i.pendingProps,fe.current),Wt=i,ti=!0,f=ft,rs(i.type)?(ng=f,ft=ii(l.firstChild)):ft=f),tn(n,i,i.pendingProps.children,a),Ah(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Fe&&((f=l=ft)&&(l=m1(l,i.type,i.pendingProps,ti),l!==null?(i.stateNode=l,Wt=i,ft=ii(l.firstChild),ti=!1,f=!0):f=!1),f||Gr(i)),ut(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Zm(f,d)?l=null:_!==null&&Zm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=$d(n,i,NA,null,null,a),vu._currentValue=f),Ah(n,i),tn(n,i,l,a),i.child;case 6:return n===null&&Fe&&((n=a=ft)&&(a=g1(a,i.pendingProps,ti),a!==null?(i.stateNode=a,Wt=i,ft=null,n=!0):n=!1),n||Gr(i)),null;case 13:return E0(n,i,a);case 4:return xe(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=oa(i,null,l,a):tn(n,i,l,a),i.child;case 11:return h0(n,i,i.type,i.pendingProps,a);case 7:return tn(n,i,i.pendingProps,a),i.child;case 8:return tn(n,i,i.pendingProps.children,a),i.child;case 12:return tn(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Hr(i,i.type,l.value),tn(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,ia(i),f=en(f),l=l(f),i.flags|=1,tn(n,i,l,a),i.child;case 14:return f0(n,i,i.type,i.pendingProps,a);case 15:return d0(n,i,i.type,i.pendingProps,a);case 19:return b0(n,i,a);case 31:return zA(n,i,a);case 22:return m0(n,i,a,i.pendingProps);case 24:return ia(i),l=en(jt),n===null?(f=Bd(),f===null&&(f=lt,d=Ld(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},qd(i),Hr(i,jt,f)):((n.lanes&a)!==0&&(Fd(n,i),Wl(i,null,null,a),Jl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Hr(i,jt,l)):(l=d.cache,Hr(i,jt,l),l!==f.cache&&zd(i,[jt],a,!0))),tn(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function mr(n){n.flags|=4}function wm(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if($0())n.flags|=8192;else throw aa=ch,Ud}else n.flags&=-16777217}function w0(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!kv(i))if($0())n.flags|=8192;else throw aa=ch,Ud}function Ih(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Mc():536870912,n.lanes|=i,vo|=i)}function su(n,i){if(!Fe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function dt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function kA(n,i,a){var l=i.pendingProps;switch(Vd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(i),null;case 1:return dt(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),cr(jt),De(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(so(i)?mr(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Od())),dt(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(mr(i),d!==null?(dt(i),w0(i,d)):(dt(i),wm(i,f,null,l,a))):d?d!==n.memoizedState?(mr(i),dt(i),w0(i,d)):(dt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&mr(i),dt(i),wm(i,f,n,l,a)),null;case 27:if(Dn(i),a=fe.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&mr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return dt(i),null}n=Q.current,so(i)?i_(i):(n=Dv(f,l,a),i.stateNode=n,mr(i))}return dt(i),null;case 5:if(Dn(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&mr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return dt(i),null}if(d=Q.current,so(i))i_(i);else{var _=qh(fe.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Mt]=i,d[Qt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(nn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&mr(i)}}return dt(i),wm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&mr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=fe.current,so(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=Wt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Mt]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Ev(n.nodeValue,a)),n||Gr(i,!0)}else n=qh(n).createTextNode(l),n[Mt]=i,i.stateNode=n}return dt(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=so(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Mt]=i}else ta(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;dt(i),n=!1}else a=Od(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(Ln(i),i):(Ln(i),null);if((i.flags&128)!==0)throw Error(r(558))}return dt(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=so(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Mt]=i}else ta(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;dt(i),f=!1}else f=Od(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Ln(i),i):(Ln(i),null)}return Ln(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),Ih(i,i.updateQueue),dt(i),null);case 4:return De(),n===null&&Qm(i.stateNode.containerInfo),dt(i),null;case 10:return cr(i.type),dt(i),null;case 19:if(X(It),l=i.memoizedState,l===null)return dt(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)su(l,!1);else{if(bt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=mh(n),d!==null){for(i.flags|=128,su(l,!1),n=d.updateQueue,i.updateQueue=n,Ih(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)Jy(a,n),a=a.sibling;return oe(It,It.current&1|2),Fe&&lr(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&mn()>Vh&&(i.flags|=128,f=!0,su(l,!1),i.lanes=4194304)}else{if(!f)if(n=mh(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,Ih(i,n),su(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Fe)return dt(i),null}else 2*mn()-l.renderingStartTime>Vh&&a!==536870912&&(i.flags|=128,f=!0,su(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=mn(),n.sibling=null,a=It.current,oe(It,f?a&1|2:a&1),Fe&&lr(i,l.treeForkCount),n):(dt(i),null);case 22:case 23:return Ln(i),Kd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(dt(i),i.subtreeFlags&6&&(i.flags|=8192)):dt(i),a=i.updateQueue,a!==null&&Ih(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&X(ra),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),cr(jt),dt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function BA(n,i){switch(Vd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return cr(jt),De(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Dn(i),null;case 31:if(i.memoizedState!==null){if(Ln(i),i.alternate===null)throw Error(r(340));ta()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Ln(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));ta()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return X(It),null;case 4:return De(),null;case 10:return cr(i.type),null;case 22:case 23:return Ln(i),Kd(),n!==null&&X(ra),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return cr(jt),null;case 25:return null;default:return null}}function A0(n,i){switch(Vd(i),i.tag){case 3:cr(jt),De();break;case 26:case 27:case 5:Dn(i);break;case 4:De();break;case 31:i.memoizedState!==null&&Ln(i);break;case 13:Ln(i);break;case 19:X(It);break;case 10:cr(i.type);break;case 22:case 23:Ln(i),Kd(),n!==null&&X(ra);break;case 24:cr(jt)}}function au(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(S){tt(i,i.return,S)}}function Zr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,f=i;var C=a,U=S;try{U()}catch(J){tt(f,C,J)}}}l=l.next}while(l!==d)}}catch(J){tt(i,i.return,J)}}function x0(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{p_(i,a)}catch(l){tt(n,n.return,l)}}}function I0(n,i,a){a.props=ua(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){tt(n,i,l)}}function ou(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){tt(n,i,f)}}function Gi(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){tt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){tt(n,i,f)}else a.current=null}function R0(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){tt(n,n.return,f)}}function Am(n,i,a){try{var l=n.stateNode;l1(l,n.type,a,i),l[Qt]=i}catch(f){tt(n,n.return,f)}}function N0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&rs(n.type)||n.tag===4}function xm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||N0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&rs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Im(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=hi));else if(l!==4&&(l===27&&rs(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Im(n,i,a),n=n.sibling;n!==null;)Im(n,i,a),n=n.sibling}function Rh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&rs(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Rh(n,i,a),n=n.sibling;n!==null;)Rh(n,i,a),n=n.sibling}function C0(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);nn(i,l,a),i[Mt]=n,i[Qt]=a}catch(d){tt(n,n.return,d)}}var gr=!1,kt=!1,Rm=!1,D0=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function UA(n,i){if(n=n.containerInfo,Xm=Xh,n=Fy(n),Td(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,S=-1,C=-1,U=0,J=0,ee=n,q=null;t:for(;;){for(var K;ee!==a||f!==0&&ee.nodeType!==3||(S=_+f),ee!==d||l!==0&&ee.nodeType!==3||(C=_+l),ee.nodeType===3&&(_+=ee.nodeValue.length),(K=ee.firstChild)!==null;)q=ee,ee=K;for(;;){if(ee===n)break t;if(q===a&&++U===f&&(S=_),q===d&&++J===l&&(C=_),(K=ee.nextSibling)!==null)break;ee=q,q=ee.parentNode}ee=K}a=S===-1||C===-1?null:{start:S,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for($m={focusedElem:n,selectionRange:a},Xh=!1,Yt=i;Yt!==null;)if(i=Yt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Yt=n;else for(;Yt!==null;){switch(i=Yt,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var _e=ua(a.type,f);n=l.getSnapshotBeforeUpdate(_e,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){tt(a,a.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Wm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Wm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Yt=n;break}Yt=i.return}}function V0(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:yr(n,a),l&4&&au(5,a);break;case 1:if(yr(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){tt(a,a.return,_)}else{var f=ua(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){tt(a,a.return,_)}}l&64&&x0(a),l&512&&ou(a,a.return);break;case 3:if(yr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{p_(n,i)}catch(_){tt(a,a.return,_)}}break;case 27:i===null&&l&4&&C0(a);case 26:case 5:yr(n,a),i===null&&l&4&&R0(a),l&512&&ou(a,a.return);break;case 12:yr(n,a);break;case 31:yr(n,a),l&4&&P0(n,a);break;case 13:yr(n,a),l&4&&j0(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=$A.bind(null,a),p1(n,a))));break;case 22:if(l=a.memoizedState!==null||gr,!l){i=i!==null&&i.memoizedState!==null||kt,f=gr;var d=kt;gr=l,(kt=i)&&!d?_r(n,a,(a.subtreeFlags&8772)!==0):yr(n,a),gr=f,kt=d}break;case 30:break;default:yr(n,a)}}function M0(n){var i=n.alternate;i!==null&&(n.alternate=null,M0(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&qa(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var pt=null,Sn=!1;function pr(n,i,a){for(a=a.child;a!==null;)O0(n,i,a),a=a.sibling}function O0(n,i,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(oi,a)}catch{}switch(a.tag){case 26:kt||Gi(a,i),pr(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||Gi(a,i);var l=pt,f=Sn;rs(a.type)&&(pt=a.stateNode,Sn=!1),pr(n,i,a),pu(a.stateNode),pt=l,Sn=f;break;case 5:kt||Gi(a,i);case 6:if(l=pt,f=Sn,pt=null,pr(n,i,a),pt=l,Sn=f,pt!==null)if(Sn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(d){tt(a,i,d)}else try{pt.removeChild(a.stateNode)}catch(d){tt(a,i,d)}break;case 18:pt!==null&&(Sn?(n=pt,xv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Io(n)):xv(pt,a.stateNode));break;case 4:l=pt,f=Sn,pt=a.stateNode.containerInfo,Sn=!0,pr(n,i,a),pt=l,Sn=f;break;case 0:case 11:case 14:case 15:Zr(2,a,i),kt||Zr(4,a,i),pr(n,i,a);break;case 1:kt||(Gi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&I0(a,i,l)),pr(n,i,a);break;case 21:pr(n,i,a);break;case 22:kt=(l=kt)||a.memoizedState!==null,pr(n,i,a),kt=l;break;default:pr(n,i,a)}}function P0(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Io(n)}catch(a){tt(i,i.return,a)}}}function j0(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Io(n)}catch(a){tt(i,i.return,a)}}function qA(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new D0),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new D0),i;default:throw Error(r(435,n.tag))}}function Nh(n,i){var a=qA(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=ZA.bind(null,n,l);l.then(f,f)}})}function wn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,S=_;e:for(;S!==null;){switch(S.tag){case 27:if(rs(S.type)){pt=S.stateNode,Sn=!1;break e}break;case 5:pt=S.stateNode,Sn=!1;break e;case 3:case 4:pt=S.stateNode.containerInfo,Sn=!0;break e}S=S.return}if(pt===null)throw Error(r(160));O0(d,_,f),pt=null,Sn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)z0(i,n),i=i.sibling}var yi=null;function z0(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:wn(i,n),An(n),l&4&&(Zr(3,n,n.return),au(3,n),Zr(5,n,n.return));break;case 1:wn(i,n),An(n),l&512&&(kt||a===null||Gi(a,a.return)),l&64&&gr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=yi;if(wn(i,n),An(n),l&512&&(kt||a===null||Gi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ci]||d[Mt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),nn(d,l,a),d[Mt]=n,Ot(d),l=d;break e;case"link":var _=zv("link","href",f).get(l+(a.href||""));if(_){for(var S=0;S<_.length;S++)if(d=_[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(S,1);break t}}d=f.createElement(l),nn(d,l,a),f.head.appendChild(d);break;case"meta":if(_=zv("meta","content",f).get(l+(a.content||""))){for(S=0;S<_.length;S++)if(d=_[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(S,1);break t}}d=f.createElement(l),nn(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Mt]=n,Ot(d),l=d}n.stateNode=l}else Lv(f,n.type,n.stateNode);else n.stateNode=jv(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Lv(f,n.type,n.stateNode):jv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Am(n,n.memoizedProps,a.memoizedProps)}break;case 27:wn(i,n),An(n),l&512&&(kt||a===null||Gi(a,a.return)),a!==null&&l&4&&Am(n,n.memoizedProps,a.memoizedProps);break;case 5:if(wn(i,n),An(n),l&512&&(kt||a===null||Gi(a,a.return)),n.flags&32){f=n.stateNode;try{bn(f,"")}catch(_e){tt(n,n.return,_e)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Am(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Rm=!0);break;case 6:if(wn(i,n),An(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(_e){tt(n,n.return,_e)}}break;case 3:if(Hh=null,f=yi,yi=Fh(i.containerInfo),wn(i,n),yi=f,An(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Io(i.containerInfo)}catch(_e){tt(n,n.return,_e)}Rm&&(Rm=!1,L0(n));break;case 4:l=yi,yi=Fh(n.stateNode.containerInfo),wn(i,n),An(n),yi=l;break;case 12:wn(i,n),An(n);break;case 31:wn(i,n),An(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Nh(n,l)));break;case 13:wn(i,n),An(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Dh=mn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Nh(n,l)));break;case 22:f=n.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,U=gr,J=kt;if(gr=U||f,kt=J||C,wn(i,n),kt=J,gr=U,An(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||C||gr||kt||ca(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(d=C.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=C.stateNode;var ee=C.memoizedProps.style,q=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;S.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(_e){tt(C,C.return,_e)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(_e){tt(C,C.return,_e)}}}else if(i.tag===18){if(a===null){C=i;try{var K=C.stateNode;f?Iv(K,!0):Iv(C.stateNode,!1)}catch(_e){tt(C,C.return,_e)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Nh(n,a))));break;case 19:wn(i,n),An(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Nh(n,l)));break;case 30:break;case 21:break;default:wn(i,n),An(n)}}function An(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(N0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=xm(n);Rh(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(bn(_,""),a.flags&=-33);var S=xm(n);Rh(n,S,_);break;case 3:case 4:var C=a.stateNode.containerInfo,U=xm(n);Im(n,U,C);break;default:throw Error(r(161))}}catch(J){tt(n,n.return,J)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function L0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;L0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function yr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)V0(n,i.alternate,i),i=i.sibling}function ca(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Zr(4,i,i.return),ca(i);break;case 1:Gi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&I0(i,i.return,a),ca(i);break;case 27:pu(i.stateNode);case 26:case 5:Gi(i,i.return),ca(i);break;case 22:i.memoizedState===null&&ca(i);break;case 30:ca(i);break;default:ca(i)}n=n.sibling}}function _r(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:_r(f,d,a),au(4,d);break;case 1:if(_r(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(U){tt(l,l.return,U)}if(l=d,f=l.updateQueue,f!==null){var S=l.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)g_(C[f],S)}catch(U){tt(l,l.return,U)}}a&&_&64&&x0(d),ou(d,d.return);break;case 27:C0(d);case 26:case 5:_r(f,d,a),a&&l===null&&_&4&&R0(d),ou(d,d.return);break;case 12:_r(f,d,a);break;case 31:_r(f,d,a),a&&_&4&&P0(f,d);break;case 13:_r(f,d,a),a&&_&4&&j0(f,d);break;case 22:d.memoizedState===null&&_r(f,d,a),ou(d,d.return);break;case 30:break;default:_r(f,d,a)}i=i.sibling}}function Nm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Kl(a))}function Cm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Kl(n))}function _i(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)k0(n,i,a,l),i=i.sibling}function k0(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:_i(n,i,a,l),f&2048&&au(9,i);break;case 1:_i(n,i,a,l);break;case 3:_i(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Kl(n)));break;case 12:if(f&2048){_i(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,S=d.onPostCommit;typeof S=="function"&&S(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){tt(i,i.return,C)}}else _i(n,i,a,l);break;case 31:_i(n,i,a,l);break;case 13:_i(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?_i(n,i,a,l):lu(n,i):d._visibility&2?_i(n,i,a,l):(d._visibility|=2,po(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Nm(_,i);break;case 24:_i(n,i,a,l),f&2048&&Cm(i.alternate,i);break;default:_i(n,i,a,l)}}function po(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,S=a,C=l,U=_.flags;switch(_.tag){case 0:case 11:case 15:po(d,_,S,C,f),au(8,_);break;case 23:break;case 22:var J=_.stateNode;_.memoizedState!==null?J._visibility&2?po(d,_,S,C,f):lu(d,_):(J._visibility|=2,po(d,_,S,C,f)),f&&U&2048&&Nm(_.alternate,_);break;case 24:po(d,_,S,C,f),f&&U&2048&&Cm(_.alternate,_);break;default:po(d,_,S,C,f)}i=i.sibling}}function lu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:lu(a,l),f&2048&&Nm(l.alternate,l);break;case 24:lu(a,l),f&2048&&Cm(l.alternate,l);break;default:lu(a,l)}i=i.sibling}}var uu=8192;function yo(n,i,a){if(n.subtreeFlags&uu)for(n=n.child;n!==null;)B0(n,i,a),n=n.sibling}function B0(n,i,a){switch(n.tag){case 26:yo(n,i,a),n.flags&uu&&n.memoizedState!==null&&R1(a,yi,n.memoizedState,n.memoizedProps);break;case 5:yo(n,i,a);break;case 3:case 4:var l=yi;yi=Fh(n.stateNode.containerInfo),yo(n,i,a),yi=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=uu,uu=16777216,yo(n,i,a),uu=l):yo(n,i,a));break;default:yo(n,i,a)}}function U0(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function cu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Yt=l,F0(l,n)}U0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)q0(n),n=n.sibling}function q0(n){switch(n.tag){case 0:case 11:case 15:cu(n),n.flags&2048&&Zr(9,n,n.return);break;case 3:cu(n);break;case 12:cu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Ch(n)):cu(n);break;default:cu(n)}}function Ch(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Yt=l,F0(l,n)}U0(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Zr(8,i,i.return),Ch(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ch(i));break;default:Ch(i)}n=n.sibling}}function F0(n,i){for(;Yt!==null;){var a=Yt;switch(a.tag){case 0:case 11:case 15:Zr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Kl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Yt=l;else e:for(a=n;Yt!==null;){l=Yt;var f=l.sibling,d=l.return;if(M0(l),l===a){Yt=null;break e}if(f!==null){f.return=d,Yt=f;break e}Yt=d}}}var FA={getCacheForType:function(n){var i=en(jt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return en(jt).controller.signal}},GA=typeof WeakMap=="function"?WeakMap:Map,Ze=0,lt=null,ze=null,Be=0,et=0,kn=null,Jr=!1,_o=!1,Dm=!1,vr=0,bt=0,Wr=0,ha=0,Vm=0,Bn=0,vo=0,hu=null,xn=null,Mm=!1,Dh=0,G0=0,Vh=1/0,Mh=null,es=null,Gt=0,ts=null,Eo=null,Er=0,Om=0,Pm=null,H0=null,fu=0,jm=null;function Un(){return(Ze&2)!==0&&Be!==0?Be&-Be:H.T!==null?qm():Oc()}function Q0(){if(Bn===0)if((Be&536870912)===0||Fe){var n=Ls;Ls<<=1,(Ls&3932160)===0&&(Ls=262144),Bn=n}else Bn=536870912;return n=zn.current,n!==null&&(n.flags|=32),Bn}function In(n,i,a){(n===lt&&(et===2||et===9)||n.cancelPendingCommit!==null)&&(To(n,0),ns(n,Be,Bn,!1)),ks(n,a),((Ze&2)===0||n!==lt)&&(n===lt&&((Ze&2)===0&&(ha|=a),bt===4&&ns(n,Be,Bn,!1)),Hi(n))}function K0(n,i,a){if((Ze&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||li(n,i),f=l?KA(n,i):Lm(n,i,!0),d=l;do{if(f===0){_o&&!l&&ns(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!HA(a)){f=Lm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var S=n;f=hu;var C=S.current.memoizedState.isDehydrated;if(C&&(To(S,_).flags|=256),_=Lm(S,_,!1),_!==2){if(Dm&&!C){S.errorRecoveryDisabledLanes|=d,ha|=d,f=4;break e}d=xn,xn=f,d!==null&&(xn===null?xn=d:xn.push.apply(xn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){To(n,0),ns(n,i,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:ns(l,i,Bn,!Jr);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Dh+300-mn(),10<f)){if(ns(l,i,Bn,!Jr),Ii(l,0,!0)!==0)break e;Er=i,l.timeoutHandle=wv(Y0.bind(null,l,a,xn,Mh,Mm,i,Bn,ha,vo,Jr,d,"Throttled",-0,0),f);break e}Y0(l,a,xn,Mh,Mm,i,Bn,ha,vo,Jr,d,null,-0,0)}}break}while(!0);Hi(n)}function Y0(n,i,a,l,f,d,_,S,C,U,J,ee,q,K){if(n.timeoutHandle=-1,ee=i.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},B0(i,d,ee);var _e=(d&62914560)===d?Dh-mn():(d&4194048)===d?G0-mn():0;if(_e=N1(ee,_e),_e!==null){Er=d,n.cancelPendingCommit=_e(nv.bind(null,n,i,d,a,l,f,_,S,C,J,ee,null,q,K)),ns(n,d,_,!U);return}}nv(n,i,d,a,l,f,_,S,C)}function HA(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Pn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ns(n,i,a,l){i&=~Vm,i&=~ha,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-At(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Bs(n,a,i)}function Oh(){return(Ze&6)===0?(du(0),!1):!0}function zm(){if(ze!==null){if(et===0)var n=ze.return;else n=ze,ur=na=null,Wd(n),co=null,Xl=0,n=ze;for(;n!==null;)A0(n.alternate,n),n=n.return;ze=null}}function To(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,h1(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Er=0,zm(),lt=n,ze=a=or(n.current,null),Be=i,et=0,kn=null,Jr=!1,_o=li(n,i),Dm=!1,vo=Bn=Vm=ha=Wr=bt=0,xn=hu=null,Mm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-At(l),d=1<<f;i|=n[f],l&=~d}return vr=i,th(),a}function X0(n,i){Oe=null,H.H=iu,i===uo||i===uh?(i=h_(),et=3):i===Ud?(i=h_(),et=4):et=i===gm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,kn=i,ze===null&&(bt=1,Sh(n,Jn(i,n.current)))}function $0(){var n=zn.current;return n===null?!0:(Be&4194048)===Be?ni===null:(Be&62914560)===Be||(Be&536870912)!==0?n===ni:!1}function Z0(){var n=H.H;return H.H=iu,n===null?iu:n}function J0(){var n=H.A;return H.A=FA,n}function Ph(){bt=4,Jr||(Be&4194048)!==Be&&zn.current!==null||(_o=!0),(Wr&134217727)===0&&(ha&134217727)===0||lt===null||ns(lt,Be,Bn,!1)}function Lm(n,i,a){var l=Ze;Ze|=2;var f=Z0(),d=J0();(lt!==n||Be!==i)&&(Mh=null,To(n,i)),i=!1;var _=bt;e:do try{if(et!==0&&ze!==null){var S=ze,C=kn;switch(et){case 8:zm(),_=6;break e;case 3:case 2:case 9:case 6:zn.current===null&&(i=!0);var U=et;if(et=0,kn=null,bo(n,S,C,U),a&&_o){_=0;break e}break;default:U=et,et=0,kn=null,bo(n,S,C,U)}}QA(),_=bt;break}catch(J){X0(n,J)}while(!0);return i&&n.shellSuspendCounter++,ur=na=null,Ze=l,H.H=f,H.A=d,ze===null&&(lt=null,Be=0,th()),_}function QA(){for(;ze!==null;)W0(ze)}function KA(n,i){var a=Ze;Ze|=2;var l=Z0(),f=J0();lt!==n||Be!==i?(Mh=null,Vh=mn()+500,To(n,i)):_o=li(n,i);e:do try{if(et!==0&&ze!==null){i=ze;var d=kn;t:switch(et){case 1:et=0,kn=null,bo(n,i,d,1);break;case 2:case 9:if(u_(d)){et=0,kn=null,ev(i);break}i=function(){et!==2&&et!==9||lt!==n||(et=7),Hi(n)},d.then(i,i);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:u_(d)?(et=0,kn=null,ev(i)):(et=0,kn=null,bo(n,i,d,7));break;case 5:var _=null;switch(ze.tag){case 26:_=ze.memoizedState;case 5:case 27:var S=ze;if(_?kv(_):S.stateNode.complete){et=0,kn=null;var C=S.sibling;if(C!==null)ze=C;else{var U=S.return;U!==null?(ze=U,jh(U)):ze=null}break t}}et=0,kn=null,bo(n,i,d,5);break;case 6:et=0,kn=null,bo(n,i,d,6);break;case 8:zm(),bt=6;break e;default:throw Error(r(462))}}YA();break}catch(J){X0(n,J)}while(!0);return ur=na=null,H.H=l,H.A=f,Ze=a,ze!==null?0:(lt=null,Be=0,th(),bt)}function YA(){for(;ze!==null&&!md();)W0(ze)}function W0(n){var i=S0(n.alternate,n,vr);n.memoizedProps=n.pendingProps,i===null?jh(n):ze=i}function ev(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=y0(a,i,i.pendingProps,i.type,void 0,Be);break;case 11:i=y0(a,i,i.pendingProps,i.type.render,i.ref,Be);break;case 5:Wd(i);default:A0(a,i),i=ze=Jy(i,vr),i=S0(a,i,vr)}n.memoizedProps=n.pendingProps,i===null?jh(n):ze=i}function bo(n,i,a,l){ur=na=null,Wd(i),co=null,Xl=0;var f=i.return;try{if(jA(n,f,i,a,Be)){bt=1,Sh(n,Jn(a,n.current)),ze=null;return}}catch(d){if(f!==null)throw ze=f,d;bt=1,Sh(n,Jn(a,n.current)),ze=null;return}i.flags&32768?(Fe||l===1?n=!0:_o||(Be&536870912)!==0?n=!1:(Jr=n=!0,(l===2||l===9||l===3||l===6)&&(l=zn.current,l!==null&&l.tag===13&&(l.flags|=16384))),tv(i,n)):jh(i)}function jh(n){var i=n;do{if((i.flags&32768)!==0){tv(i,Jr);return}n=i.return;var a=kA(i.alternate,i,vr);if(a!==null){ze=a;return}if(i=i.sibling,i!==null){ze=i;return}ze=i=n}while(i!==null);bt===0&&(bt=5)}function tv(n,i){do{var a=BA(n.alternate,n);if(a!==null){a.flags&=32767,ze=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){ze=n;return}ze=n=a}while(n!==null);bt=6,ze=null}function nv(n,i,a,l,f,d,_,S,C){n.cancelPendingCommit=null;do zh();while(Gt!==0);if((Ze&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=xd,yd(n,a,d,_,S,C),n===lt&&(ze=lt=null,Be=0),Eo=i,ts=n,Er=a,Om=d,Pm=f,H0=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,JA(Vr,function(){return ov(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,f=ae.p,ae.p=2,_=Ze,Ze|=4;try{UA(n,i,a)}finally{Ze=_,ae.p=f,H.T=l}}Gt=1,iv(),rv(),sv()}}function iv(){if(Gt===1){Gt=0;var n=ts,i=Eo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var l=ae.p;ae.p=2;var f=Ze;Ze|=4;try{z0(i,n);var d=$m,_=Fy(n.containerInfo),S=d.focusedElem,C=d.selectionRange;if(_!==S&&S&&S.ownerDocument&&qy(S.ownerDocument.documentElement,S)){if(C!==null&&Td(S)){var U=C.start,J=C.end;if(J===void 0&&(J=U),"selectionStart"in S)S.selectionStart=U,S.selectionEnd=Math.min(J,S.value.length);else{var ee=S.ownerDocument||document,q=ee&&ee.defaultView||window;if(q.getSelection){var K=q.getSelection(),_e=S.textContent.length,Ae=Math.min(C.start,_e),ot=C.end===void 0?Ae:Math.min(C.end,_e);!K.extend&&Ae>ot&&(_=ot,ot=Ae,Ae=_);var z=Uy(S,Ae),M=Uy(S,ot);if(z&&M&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==M.node||K.focusOffset!==M.offset)){var B=ee.createRange();B.setStart(z.node,z.offset),K.removeAllRanges(),Ae>ot?(K.addRange(B),K.extend(M.node,M.offset)):(B.setEnd(M.node,M.offset),K.addRange(B))}}}}for(ee=[],K=S;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ee.length;S++){var W=ee[S];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Xh=!!Xm,$m=Xm=null}finally{Ze=f,ae.p=l,H.T=a}}n.current=i,Gt=2}}function rv(){if(Gt===2){Gt=0;var n=ts,i=Eo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var l=ae.p;ae.p=2;var f=Ze;Ze|=4;try{V0(n,i.alternate,i)}finally{Ze=f,ae.p=l,H.T=a}}Gt=3}}function sv(){if(Gt===4||Gt===3){Gt=0,Ic();var n=ts,i=Eo,a=Er,l=H0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Gt=5:(Gt=0,Eo=ts=null,av(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(es=null),ir(a),i=i.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(oi,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=H.T,f=ae.p,ae.p=2,H.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var S=l[_];d(S.value,{componentStack:S.stack})}}finally{H.T=i,ae.p=f}}(Er&3)!==0&&zh(),Hi(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===jm?fu++:(fu=0,jm=n):fu=0,du(0)}}function av(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Kl(i)))}function zh(){return iv(),rv(),sv(),ov()}function ov(){if(Gt!==5)return!1;var n=ts,i=Om;Om=0;var a=ir(Er),l=H.T,f=ae.p;try{ae.p=32>a?32:a,H.T=null,a=Pm,Pm=null;var d=ts,_=Er;if(Gt=0,Eo=ts=null,Er=0,(Ze&6)!==0)throw Error(r(331));var S=Ze;if(Ze|=4,q0(d.current),k0(d,d.current,_,a),Ze=S,du(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(oi,d)}catch{}return!0}finally{ae.p=f,H.T=l,av(n,i)}}function lv(n,i,a){i=Jn(a,i),i=mm(n.stateNode,i,2),n=Yr(n,i,2),n!==null&&(ks(n,2),Hi(n))}function tt(n,i,a){if(n.tag===3)lv(n,n,a);else for(;i!==null;){if(i.tag===3){lv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(es===null||!es.has(l))){n=Jn(a,n),a=u0(2),l=Yr(i,a,2),l!==null&&(c0(a,l,i,n),ks(l,2),Hi(l));break}}i=i.return}}function km(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new GA;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Dm=!0,f.add(a),n=XA.bind(null,n,i,a),i.then(n,n))}function XA(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,lt===n&&(Be&a)===a&&(bt===4||bt===3&&(Be&62914560)===Be&&300>mn()-Dh?(Ze&2)===0&&To(n,0):Vm|=a,vo===Be&&(vo=0)),Hi(n)}function uv(n,i){i===0&&(i=Mc()),n=Ws(n,i),n!==null&&(ks(n,i),Hi(n))}function $A(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),uv(n,a)}function ZA(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),uv(n,a)}function JA(n,i){return Ft(n,i)}var Lh=null,So=null,Bm=!1,kh=!1,Um=!1,is=0;function Hi(n){n!==So&&n.next===null&&(So===null?Lh=So=n:So=So.next=n),kh=!0,Bm||(Bm=!0,e1())}function du(n,i){if(!Um&&kh){Um=!0;do for(var a=!1,l=Lh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-At(42|n)+1)-1,d&=f&~(_&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,dv(l,d))}else d=Be,d=Ii(l,l===lt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||li(l,d)||(a=!0,dv(l,d));l=l.next}while(a);Um=!1}}function WA(){cv()}function cv(){kh=Bm=!1;var n=0;is!==0&&c1()&&(n=is);for(var i=mn(),a=null,l=Lh;l!==null;){var f=l.next,d=hv(l,i);d===0?(l.next=null,a===null?Lh=f:a.next=f,f===null&&(So=a)):(a=l,(n!==0||(d&3)!==0)&&(kh=!0)),l=f}Gt!==0&&Gt!==5||du(n),is!==0&&(is=0)}function hv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-At(d),S=1<<_,C=f[_];C===-1?((S&a)===0||(S&l)!==0)&&(f[_]=pd(S,i)):C<=i&&(n.expiredLanes|=S),d&=~S}if(i=lt,a=Be,a=Ii(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(et===2||et===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Dr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||li(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Dr(l),ir(a)){case 2:case 8:a=Sl;break;case 32:a=Vr;break;case 268435456:a=Rc;break;default:a=Vr}return l=fv.bind(null,n),a=Ft(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Dr(l),n.callbackPriority=2,n.callbackNode=null,2}function fv(n,i){if(Gt!==0&&Gt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(zh()&&n.callbackNode!==a)return null;var l=Be;return l=Ii(n,n===lt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(K0(n,l,i),hv(n,mn()),n.callbackNode!=null&&n.callbackNode===a?fv.bind(null,n):null)}function dv(n,i){if(zh())return null;K0(n,i,!0)}function e1(){f1(function(){(Ze&6)!==0?Ft(bl,WA):cv()})}function qm(){if(is===0){var n=oo;n===0&&(n=Ai,Ai<<=1,(Ai&261888)===0&&(Ai=256)),is=n}return is}function mv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Qa(""+n)}function gv(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function t1(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=mv((f[Qt]||null).action),_=l.submitter;_&&(i=(i=_[Qt]||null)?mv(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var S=new Li("action","action",null,l,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(is!==0){var C=_?gv(f,_):new FormData(f);lm(a,{pending:!0,data:C,method:f.method,action:d},null,C)}}else typeof d=="function"&&(S.preventDefault(),C=_?gv(f,_):new FormData(f),lm(a,{pending:!0,data:C,method:f.method,action:d},d,C))},currentTarget:f}]})}}for(var Fm=0;Fm<Ad.length;Fm++){var Gm=Ad[Fm],n1=Gm.toLowerCase(),i1=Gm[0].toUpperCase()+Gm.slice(1);pi(n1,"on"+i1)}pi(Qy,"onAnimationEnd"),pi(Ky,"onAnimationIteration"),pi(Yy,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(vA,"onTransitionRun"),pi(EA,"onTransitionStart"),pi(TA,"onTransitionCancel"),pi(Xy,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mu));function pv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var S=l[_],C=S.instance,U=S.currentTarget;if(S=S.listener,C!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=U;try{d(f)}catch(J){eh(J)}f.currentTarget=null,d=C}else for(_=0;_<l.length;_++){if(S=l[_],C=S.instance,U=S.currentTarget,S=S.listener,C!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=U;try{d(f)}catch(J){eh(J)}f.currentTarget=null,d=C}}}}function Le(n,i){var a=i[Ua];a===void 0&&(a=i[Ua]=new Set);var l=n+"__bubble";a.has(l)||(yv(i,n,2,!1),a.add(l))}function Hm(n,i,a){var l=0;i&&(l|=4),yv(a,n,l,i)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function Qm(n){if(!n[Bh]){n[Bh]=!0,xl.forEach(function(a){a!=="selectionchange"&&(r1.has(a)||Hm(a,!1,n),Hm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Bh]||(i[Bh]=!0,Hm("selectionchange",!1,i))}}function yv(n,i,a,l){switch(Qv(i)){case 2:var f=V1;break;case 8:f=M1;break;default:f=og}a=f.bind(null,i,a,n),f=void 0,!Hs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Km(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var S=l.stateNode.containerInfo;if(S===f)break;if(_===4)for(_=l.return;_!==null;){var C=_.tag;if((C===3||C===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;S!==null;){if(_=Di(S),_===null)return;if(C=_.tag,C===5||C===6||C===26||C===27){l=d=_;continue e}S=S.parentNode}}l=l.return}Lr(function(){var U=d,J=Yn(a),ee=[];e:{var q=$y.get(n);if(q!==void 0){var K=Li,_e=n;switch(n){case"keypress":if(Ks(a)===0)break e;case"keydown":case"keyup":K=Zc;break;case"focusin":_e="focus",K=Xs;break;case"focusout":_e="blur",K=Xs;break;case"beforeblur":case"afterblur":K=Xs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=y;break;case Qy:case Ky:case Yy:K=Gc;break;case Xy:K=w;break;case"scroll":case"scrollend":K=Ll;break;case"wheel":K=G;break;case"copy":case"cut":case"paste":K=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=ar;break;case"toggle":case"beforetoggle":K=Me}var Ae=(i&4)!==0,ot=!Ae&&(n==="scroll"||n==="scrollend"),z=Ae?q!==null?q+"Capture":null:q;Ae=[];for(var M=U,B;M!==null;){var W=M;if(B=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||B===null||z===null||(W=fi(M,z),W!=null&&Ae.push(gu(M,W,B))),ot)break;M=M.return}0<Ae.length&&(q=new K(q,_e,null,a,J),ee.push({event:q,listeners:Ae}))}}if((i&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",q&&a!==Pl&&(_e=a.relatedTarget||a.fromElement)&&(Di(_e)||_e[Ni]))break e;if((K||q)&&(q=J.window===J?J:(q=J.ownerDocument)?q.defaultView||q.parentWindow:window,K?(_e=a.relatedTarget||a.toElement,K=U,_e=_e?Di(_e):null,_e!==null&&(ot=u(_e),Ae=_e.tag,_e!==ot||Ae!==5&&Ae!==27&&Ae!==6)&&(_e=null)):(K=null,_e=U),K!==_e)){if(Ae=kl,W="onMouseLeave",z="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=ar,W="onPointerLeave",z="onPointerEnter",M="pointer"),ot=K==null?q:Mn(K),B=_e==null?q:Mn(_e),q=new Ae(W,M+"leave",K,a,J),q.target=ot,q.relatedTarget=B,W=null,Di(J)===U&&(Ae=new Ae(z,M+"enter",_e,a,J),Ae.target=B,Ae.relatedTarget=ot,W=Ae),ot=W,K&&_e)t:{for(Ae=s1,z=K,M=_e,B=0,W=z;W;W=Ae(W))B++;W=0;for(var Se=M;Se;Se=Ae(Se))W++;for(;0<B-W;)z=Ae(z),B--;for(;0<W-B;)M=Ae(M),W--;for(;B--;){if(z===M||M!==null&&z===M.alternate){Ae=z;break t}z=Ae(z),M=Ae(M)}Ae=null}else Ae=null;K!==null&&_v(ee,q,K,Ae,!1),_e!==null&&ot!==null&&_v(ee,ot,_e,Ae,!0)}}e:{if(q=U?Mn(U):window,K=q.nodeName&&q.nodeName.toLowerCase(),K==="select"||K==="input"&&q.type==="file")var Ye=Py;else if(My(q))if(jy)Ye=pA;else{Ye=mA;var Ee=dA}else K=q.nodeName,!K||K.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?U&&Ha(U.elementType)&&(Ye=Py):Ye=gA;if(Ye&&(Ye=Ye(n,U))){Oy(ee,Ye,a,J);break e}Ee&&Ee(n,q,U),n==="focusout"&&U&&q.type==="number"&&U.memoizedProps.value!=null&&Vl(q,"number",q.value)}switch(Ee=U?Mn(U):window,n){case"focusin":(My(Ee)||Ee.contentEditable==="true")&&(Wa=Ee,bd=U,Gl=null);break;case"focusout":Gl=bd=Wa=null;break;case"mousedown":Sd=!0;break;case"contextmenu":case"mouseup":case"dragend":Sd=!1,Gy(ee,a,J);break;case"selectionchange":if(_A)break;case"keydown":case"keyup":Gy(ee,a,J)}var je;if($e)e:{switch(n){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Ja?$s(n,a)&&(Ue="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ue="onCompositionStart");Ue&&(Ui&&a.locale!=="ko"&&(Ja||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Ja&&(je=zl()):(zi=J,jl="value"in zi?zi.value:zi.textContent,Ja=!0)),Ee=Uh(U,Ue),0<Ee.length&&(Ue=new Bi(Ue,n,null,a,J),ee.push({event:Ue,listeners:Ee}),je?Ue.data=je:(je=Za(a),je!==null&&(Ue.data=je)))),(je=$n?uA(n,a):cA(n,a))&&(Ue=Uh(U,"onBeforeInput"),0<Ue.length&&(Ee=new Bi("onBeforeInput","beforeinput",null,a,J),ee.push({event:Ee,listeners:Ue}),Ee.data=je)),t1(ee,n,U,a,J)}pv(ee,i)})}function gu(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Uh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=fi(n,a),f!=null&&l.unshift(gu(n,f,d)),f=fi(n,i),f!=null&&l.push(gu(n,f,d))),n.tag===3)return l;n=n.return}return[]}function s1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function _v(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var S=a,C=S.alternate,U=S.stateNode;if(S=S.tag,C!==null&&C===l)break;S!==5&&S!==26&&S!==27||U===null||(C=U,f?(U=fi(a,d),U!=null&&_.unshift(gu(a,U,C))):f||(U=fi(a,d),U!=null&&_.push(gu(a,U,C)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var a1=/\r\n?/g,o1=/\u0000|\uFFFD/g;function vv(n){return(typeof n=="string"?n:""+n).replace(a1,`
`).replace(o1,"")}function Ev(n,i){return i=vv(i),vv(n)===i}function at(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||bn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&bn(n,""+l);break;case"className":On(n,"class",l);break;case"tabIndex":On(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":On(n,a,l);break;case"style":Ol(n,l,d);break;case"data":if(i!=="object"){On(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Qa(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&at(n,i,"name",f.name,f,null),at(n,i,"formEncType",f.formEncType,f,null),at(n,i,"formMethod",f.formMethod,f,null),at(n,i,"formTarget",f.formTarget,f,null)):(at(n,i,"encType",f.encType,f,null),at(n,i,"method",f.method,f,null),at(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Qa(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=hi);break;case"onScroll":l!=null&&Le("scroll",n);break;case"onScrollEnd":l!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Qa(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Le("beforetoggle",n),Le("toggle",n),Fa(n,"popover",l);break;case"xlinkActuate":Pt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Fa(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Uc.get(a)||a,Fa(n,a,l))}}function Ym(n,i,a,l,f,d){switch(a){case"style":Ol(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?bn(n,l):(typeof l=="number"||typeof l=="bigint")&&bn(n,""+l);break;case"onScroll":l!=null&&Le("scroll",n);break;case"onScrollEnd":l!=null&&Le("scrollend",n);break;case"onClick":l!=null&&(n.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Il.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[Qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Fa(n,a,l)}}}function nn(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:at(n,i,d,_,a,null)}}f&&at(n,i,"srcSet",a.srcSet,a,null),l&&at(n,i,"src",a.src,a,null);return;case"input":Le("invalid",n);var S=d=_=f=null,C=null,U=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":f=J;break;case"type":_=J;break;case"checked":C=J;break;case"defaultChecked":U=J;break;case"value":d=J;break;case"defaultValue":S=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:at(n,i,l,J,a,null)}}Lc(n,d,S,C,U,_,f,!1);return;case"select":Le("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":d=S;break;case"defaultValue":_=S;break;case"multiple":l=S;default:at(n,i,f,S,a,null)}i=d,a=_,n.multiple=!!l,i!=null?Or(n,!!l,i,!1):a!=null&&Or(n,!!l,a,!0);return;case"textarea":Le("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(S=a[_],S!=null))switch(_){case"value":l=S;break;case"defaultValue":f=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:at(n,i,_,S,a,null)}Pr(n,l,f,d);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:at(n,i,C,l,a,null)}return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(l=0;l<mu.length;l++)Le(mu[l],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(l=a[U],l!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:at(n,i,U,l,a,null)}return;default:if(Ha(i)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&Ym(n,i,J,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&at(n,i,S,l,a,null))}function l1(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,S=null,C=null,U=null,J=null;for(K in a){var ee=a[K];if(a.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":C=ee;default:l.hasOwnProperty(K)||at(n,i,K,null,l,ee)}}for(var q in l){var K=l[q];if(ee=a[q],l.hasOwnProperty(q)&&(K!=null||ee!=null))switch(q){case"type":d=K;break;case"name":f=K;break;case"checked":U=K;break;case"defaultChecked":J=K;break;case"value":_=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:K!==ee&&at(n,i,q,K,l,ee)}}Ga(n,_,S,C,U,J,d,f);return;case"select":K=_=S=q=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":K=C;default:l.hasOwnProperty(d)||at(n,i,d,null,l,C)}for(f in l)if(d=l[f],C=a[f],l.hasOwnProperty(f)&&(d!=null||C!=null))switch(f){case"value":q=d;break;case"defaultValue":S=d;break;case"multiple":_=d;default:d!==C&&at(n,i,f,d,l,C)}i=S,a=_,l=K,q!=null?Or(n,!!a,q,!1):!!l!=!!a&&(i!=null?Or(n,!!a,i,!0):Or(n,!!a,a?[]:"",!1));return;case"textarea":K=q=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:at(n,i,S,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":q=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&at(n,i,_,f,l,d)}kc(n,q,K);return;case"option":for(var _e in a)if(q=a[_e],a.hasOwnProperty(_e)&&q!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":n.selected=!1;break;default:at(n,i,_e,null,l,q)}for(C in l)if(q=l[C],K=a[C],l.hasOwnProperty(C)&&q!==K&&(q!=null||K!=null))switch(C){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:at(n,i,C,q,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)q=a[Ae],a.hasOwnProperty(Ae)&&q!=null&&!l.hasOwnProperty(Ae)&&at(n,i,Ae,null,l,q);for(U in l)if(q=l[U],K=a[U],l.hasOwnProperty(U)&&q!==K&&(q!=null||K!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:at(n,i,U,q,l,K)}return;default:if(Ha(i)){for(var ot in a)q=a[ot],a.hasOwnProperty(ot)&&q!==void 0&&!l.hasOwnProperty(ot)&&Ym(n,i,ot,void 0,l,q);for(J in l)q=l[J],K=a[J],!l.hasOwnProperty(J)||q===K||q===void 0&&K===void 0||Ym(n,i,J,q,l,K);return}}for(var z in a)q=a[z],a.hasOwnProperty(z)&&q!=null&&!l.hasOwnProperty(z)&&at(n,i,z,null,l,q);for(ee in l)q=l[ee],K=a[ee],!l.hasOwnProperty(ee)||q===K||q==null&&K==null||at(n,i,ee,q,l,K)}function Tv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function u1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,S=f.duration;if(d&&S&&Tv(_)){for(_=0,S=f.responseEnd,l+=1;l<a.length;l++){var C=a[l],U=C.startTime;if(U>S)break;var J=C.transferSize,ee=C.initiatorType;J&&Tv(ee)&&(C=C.responseEnd,_+=J*(C<S?1:(S-U)/(C-U)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Xm=null,$m=null;function qh(n){return n.nodeType===9?n:n.ownerDocument}function bv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Zm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Jm=null;function c1(){var n=window.event;return n&&n.type==="popstate"?n===Jm?!1:(Jm=n,!0):(Jm=null,!1)}var wv=typeof setTimeout=="function"?setTimeout:void 0,h1=typeof clearTimeout=="function"?clearTimeout:void 0,Av=typeof Promise=="function"?Promise:void 0,f1=typeof queueMicrotask=="function"?queueMicrotask:typeof Av<"u"?function(n){return Av.resolve(null).then(n).catch(d1)}:wv;function d1(n){setTimeout(function(){throw n})}function rs(n){return n==="head"}function xv(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),Io(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")pu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,pu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,S=d.nodeName;d[Ci]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&pu(n.ownerDocument.body);a=f}while(a);Io(i)}function Iv(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Wm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Wm(a),qa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function m1(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ci])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=ii(n.nextSibling),n===null)break}return null}function g1(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ii(n.nextSibling),n===null))return null;return n}function Rv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=ii(n.nextSibling),n===null))return null;return n}function eg(n){return n.data==="$?"||n.data==="$~"}function tg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function p1(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function ii(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var ng=null;function Nv(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return ii(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function Cv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function Dv(n,i,a){switch(i=qh(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function pu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);qa(n)}var ri=new Map,Vv=new Set;function Fh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Tr=ae.d;ae.d={f:y1,r:_1,D:v1,C:E1,L:T1,m:b1,X:w1,S:S1,M:A1};function y1(){var n=Tr.f(),i=Oh();return n||i}function _1(n){var i=Kn(n);i!==null&&i.tag===5&&i.type==="form"?X_(i):Tr.r(n)}var wo=typeof document>"u"?null:document;function Mv(n,i,a){var l=wo;if(l&&typeof i=="string"&&i){var f=Tn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Vv.has(f)||(Vv.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),nn(i,"link",n),Ot(i),l.head.appendChild(i)))}}function v1(n){Tr.D(n),Mv("dns-prefetch",n,null)}function E1(n,i){Tr.C(n,i),Mv("preconnect",n,i)}function T1(n,i,a){Tr.L(n,i,a);var l=wo;if(l&&n&&i){var f='link[rel="preload"][as="'+Tn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Tn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Tn(a.imageSizes)+'"]')):f+='[href="'+Tn(n)+'"]';var d=f;switch(i){case"style":d=Ao(n);break;case"script":d=xo(n)}ri.has(d)||(n=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),ri.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(yu(d))||i==="script"&&l.querySelector(_u(d))||(i=l.createElement("link"),nn(i,"link",n),Ot(i),l.head.appendChild(i)))}}function b1(n,i){Tr.m(n,i);var a=wo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Tn(l)+'"][href="'+Tn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=xo(n)}if(!ri.has(d)&&(n=b({rel:"modulepreload",href:n},i),ri.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(_u(d)))return}l=a.createElement("link"),nn(l,"link",n),Ot(l),a.head.appendChild(l)}}}function S1(n,i,a){Tr.S(n,i,a);var l=wo;if(l&&n){var f=Vi(l).hoistableStyles,d=Ao(n);i=i||"default";var _=f.get(d);if(!_){var S={loading:0,preload:null};if(_=l.querySelector(yu(d)))S.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":i},a),(a=ri.get(d))&&ig(n,a);var C=_=l.createElement("link");Ot(C),nn(C,"link",n),C._p=new Promise(function(U,J){C.onload=U,C.onerror=J}),C.addEventListener("load",function(){S.loading|=1}),C.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Gh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:S},f.set(d,_)}}}function w1(n,i){Tr.X(n,i);var a=wo;if(a&&n){var l=Vi(a).hoistableScripts,f=xo(n),d=l.get(f);d||(d=a.querySelector(_u(f)),d||(n=b({src:n,async:!0},i),(i=ri.get(f))&&rg(n,i),d=a.createElement("script"),Ot(d),nn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function A1(n,i){Tr.M(n,i);var a=wo;if(a&&n){var l=Vi(a).hoistableScripts,f=xo(n),d=l.get(f);d||(d=a.querySelector(_u(f)),d||(n=b({src:n,async:!0,type:"module"},i),(i=ri.get(f))&&rg(n,i),d=a.createElement("script"),Ot(d),nn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Ov(n,i,a,l){var f=(f=fe.current)?Fh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ao(a.href),a=Vi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Ao(a.href);var d=Vi(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(yu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),ri.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ri.set(n,a),d||x1(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=xo(a),a=Vi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Ao(n){return'href="'+Tn(n)+'"'}function yu(n){return'link[rel="stylesheet"]['+n+"]"}function Pv(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function x1(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),nn(i,"link",a),Ot(i),n.head.appendChild(i))}function xo(n){return'[src="'+Tn(n)+'"]'}function _u(n){return"script[async]"+n}function jv(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+Tn(a.href)+'"]');if(l)return i.instance=l,Ot(l),l;var f=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Ot(l),nn(l,"style",f),Gh(l,a.precedence,n),i.instance=l;case"stylesheet":f=Ao(a.href);var d=n.querySelector(yu(f));if(d)return i.state.loading|=4,i.instance=d,Ot(d),d;l=Pv(a),(f=ri.get(f))&&ig(l,f),d=(n.ownerDocument||n).createElement("link"),Ot(d);var _=d;return _._p=new Promise(function(S,C){_.onload=S,_.onerror=C}),nn(d,"link",l),i.state.loading|=4,Gh(d,a.precedence,n),i.instance=d;case"script":return d=xo(a.src),(f=n.querySelector(_u(d)))?(i.instance=f,Ot(f),f):(l=a,(f=ri.get(d))&&(l=b({},a),rg(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ot(f),nn(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Gh(l,a.precedence,n));return i.instance}function Gh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var S=l[_];if(S.dataset.precedence===i)d=S;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function ig(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function rg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Hh=null;function zv(n,i,a){if(Hh===null){var l=new Map,f=Hh=new Map;f.set(a,l)}else f=Hh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Ci]||d[Mt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var S=l.get(_);S?S.push(d):l.set(_,[d])}}return l}function Lv(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function I1(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function kv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function R1(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Ao(l.href),d=i.querySelector(yu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Qh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,Ot(d);return}d=i.ownerDocument||i,l=Pv(l),(f=ri.get(f))&&ig(l,f),d=d.createElement("link"),Ot(d);var _=d;_._p=new Promise(function(S,C){_.onload=S,_.onerror=C}),nn(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Qh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var sg=0;function N1(n,i){return n.stylesheets&&n.count===0&&Yh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Yh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&sg===0&&(sg=62500*u1());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Yh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>sg?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Qh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Kh=null;function Yh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Kh=new Map,i.forEach(C1,n),Kh=null,Qh.call(n))}function C1(n,i){if(!(i.state.loading&4)){var a=Kh.get(n);if(a)var l=a.get(null);else{a=new Map,Kh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Qh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var vu={$$typeof:le,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function D1(n,i,a,l,f,d,_,S,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.hiddenUpdates=Ri(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Bv(n,i,a,l,f,d,_,S,C,U,J,ee){return n=new D1(n,i,a,_,C,U,J,ee,S),i=1,d===!0&&(i|=24),d=jn(3,null,null,i),n.current=d,d.stateNode=n,i=Ld(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},qd(d),n}function Uv(n){return n?(n=no,n):no}function qv(n,i,a,l,f,d){f=Uv(f),l.context===null?l.context=f:l.pendingContext=f,l=Kr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Yr(n,l,i),a!==null&&(In(a,n,i),Zl(a,n,i))}function Fv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function ag(n,i){Fv(n,i),(n=n.alternate)&&Fv(n,i)}function Gv(n){if(n.tag===13||n.tag===31){var i=Ws(n,67108864);i!==null&&In(i,n,67108864),ag(n,67108864)}}function Hv(n){if(n.tag===13||n.tag===31){var i=Un();i=Us(i);var a=Ws(n,i);a!==null&&In(a,n,i),ag(n,i)}}var Xh=!0;function V1(n,i,a,l){var f=H.T;H.T=null;var d=ae.p;try{ae.p=2,og(n,i,a,l)}finally{ae.p=d,H.T=f}}function M1(n,i,a,l){var f=H.T;H.T=null;var d=ae.p;try{ae.p=8,og(n,i,a,l)}finally{ae.p=d,H.T=f}}function og(n,i,a,l){if(Xh){var f=lg(l);if(f===null)Km(n,i,l,$h,a),Kv(n,l);else if(P1(f,n,i,a,l))l.stopPropagation();else if(Kv(n,l),i&4&&-1<O1.indexOf(n)){for(;f!==null;){var d=Kn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=xi(d.pendingLanes);if(_!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var C=1<<31-At(_);S.entanglements[1]|=C,_&=~C}Hi(d),(Ze&6)===0&&(Vh=mn()+500,du(0))}}break;case 31:case 13:S=Ws(d,2),S!==null&&In(S,d,2),Oh(),ag(d,2)}if(d=lg(l),d===null&&Km(n,i,l,$h,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Km(n,i,l,null,a)}}function lg(n){return n=Yn(n),ug(n)}var $h=null;function ug(n){if($h=null,n=Di(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return $h=n,null}function Qv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zs()){case bl:return 2;case Sl:return 8;case Vr:case gd:return 32;case Rc:return 268435456;default:return 32}default:return 32}}var cg=!1,ss=null,as=null,os=null,Eu=new Map,Tu=new Map,ls=[],O1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kv(n,i){switch(n){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Eu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tu.delete(i.pointerId)}}function bu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Kn(i),i!==null&&Gv(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function P1(n,i,a,l,f){switch(i){case"focusin":return ss=bu(ss,n,i,a,l,f),!0;case"dragenter":return as=bu(as,n,i,a,l,f),!0;case"mouseover":return os=bu(os,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return Eu.set(d,bu(Eu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Tu.set(d,bu(Tu.get(d)||null,n,i,a,l,f)),!0}return!1}function Yv(n){var i=Di(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,ui(n.priority,function(){Hv(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,ui(n.priority,function(){Hv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Zh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=lg(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Pl=l,a.target.dispatchEvent(l),Pl=null}else return i=Kn(a),i!==null&&Gv(i),n.blockedOn=a,!1;i.shift()}return!0}function Xv(n,i,a){Zh(n)&&a.delete(i)}function j1(){cg=!1,ss!==null&&Zh(ss)&&(ss=null),as!==null&&Zh(as)&&(as=null),os!==null&&Zh(os)&&(os=null),Eu.forEach(Xv),Tu.forEach(Xv)}function Jh(n,i){n.blockedOn===i&&(n.blockedOn=null,cg||(cg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,j1)))}var Wh=null;function $v(n){Wh!==n&&(Wh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Wh===n&&(Wh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(ug(l||a)===null)continue;break}var d=Kn(a);d!==null&&(n.splice(i,3),i-=3,lm(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Io(n){function i(C){return Jh(C,n)}ss!==null&&Jh(ss,n),as!==null&&Jh(as,n),os!==null&&Jh(os,n),Eu.forEach(i),Tu.forEach(i);for(var a=0;a<ls.length;a++){var l=ls[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<ls.length&&(a=ls[0],a.blockedOn===null);)Yv(a),a.blockedOn===null&&ls.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Qt]||null;if(typeof d=="function")_||$v(a);else if(_){var S=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Qt]||null)S=_.formAction;else if(ug(f)!==null)continue}else S=_.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),$v(a)}}}function Zv(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function hg(n){this._internalRoot=n}ef.prototype.render=hg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Un();qv(a,l,n,i,null,null)},ef.prototype.unmount=hg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;qv(n.current,2,null,n,null,null),Oh(),i[Ni]=null}};function ef(n){this._internalRoot=n}ef.prototype.unstable_scheduleHydration=function(n){if(n){var i=Oc();n={blockedOn:null,target:n,priority:i};for(var a=0;a<ls.length&&i!==0&&i<ls[a].priority;a++);ls.splice(a,0,n),a===0&&Yv(n)}};var Jv=e.version;if(Jv!=="19.2.0")throw Error(r(527,Jv,"19.2.0"));ae.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var z1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{oi=tf.inject(z1),Zt=tf}catch{}}return wu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=s0,d=a0,_=o0;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Bv(n,1,!1,null,null,a,l,null,f,d,_,Zv),n[Ni]=i.current,Qm(n),new hg(i)},wu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=s0,_=a0,S=o0,C=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(C=a.formState)),i=Bv(n,1,!0,i,a??null,l,f,C,d,_,S,Zv),i.context=Uv(null),a=i.current,l=Un(),l=Us(l),f=Kr(l),f.callback=null,Yr(a,f,l),a=l,i.current.lanes=a,ks(i,a),Hi(i),n[Ni]=i.current,Qm(n),new ef(i)},wu.version="19.2.0",wu}var lE;function K1(){if(lE)return mg.exports;lE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),mg.exports=Q1(),mg.exports}var Y1=K1();const X1=XT(Y1),$1=({onLoginSuccess:s})=>{const[e,t]=ye.useState(""),[r,o]=ye.useState(""),[u,c]=ye.useState(""),m=g=>{g.preventDefault(),e==="admin"&&r==="password"?(c(""),s()):c("Invalid username or password")};return T.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:T.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-white rounded-xl shadow-lg",children:[T.jsxs("div",{className:"text-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-indigo-600",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L9 9.61v5.07a1 1 0 001.527.854l4-2.222a1 1 0 00.473-.854V9.61l3.71-2.06a1 1 0 000-1.84l-7-3zM10 8.39L3.71 5.33l6.29-2.94 6.29 2.94L10 8.39zM11 11.07v2.88l2 1.11v-2.88l-2-1.11z"})}),T.jsx("h1",{className:"mt-4 text-3xl font-bold text-gray-900",children:"Vidya Gram"}),T.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Admin Portal"})]}),T.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),T.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Username (admin)",value:e,onChange:g=>t(g.target.value)})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"password-input",className:"sr-only",children:"Password"}),T.jsx("input",{id:"password-input",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password (password)",value:r,onChange:g=>o(g.target.value)})]})]}),u&&T.jsx("p",{className:"text-sm text-center text-red-500",children:u}),T.jsx("div",{children:T.jsx("button",{type:"submit",className:"relative flex justify-center w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md group hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})})]})]})})};var vi=(s=>(s.Dashboard="DASHBOARD",s.Students="STUDENTS",s.Batches="BATCHES",s.Payments="PAYMENTS",s))(vi||{});const Z1=({onDataLoaded:s})=>{const[e,t]=ye.useState(null),[r,o]=ye.useState(!1),[u,c]=ye.useState(null),m=ye.useCallback(p=>{var A;const E=(A=p.target.files)==null?void 0:A[0];if(!E)return;t(E.name),o(!0),c(null);const b=new FileReader;b.onload=P=>{var $;try{const Z=($=P.target)==null?void 0:$.result,Y=XLSX.read(Z,{type:"binary"}),se=Y.SheetNames[0],me=Y.Sheets[se],le=XLSX.utils.sheet_to_json(me);s(le)}catch(Z){console.error("Error parsing Excel file:",Z),c("Failed to parse the Excel file. Please check the format.")}finally{o(!1)}},b.onerror=()=>{c("Failed to read the file."),o(!1)},b.readAsBinaryString(E)},[s]),g=()=>{const p=[{"Roll No":101,Name:"Aarav Sharma",Father:"Rajesh Sharma",Mother:"Priya Sharma",Phone:"9876543210","Emergency Number":"9876543211",Gender:"Male",Batch:"A1",Address:"123, Main Street, Delhi","Total Fees":5e4,"Amount Paid":1e4,"Full Paid":"No","Payment Method":"UPI","Payment Date":"2023-08-01",Mode:"Monthly",Remarks:"First installment"}],E=XLSX.utils.json_to_sheet(p),b=XLSX.utils.book_new();XLSX.utils.book_append_sheet(b,E,"Students"),XLSX.writeFile(b,"VidyaGram_Demo_Sheet.xlsx")};return T.jsxs("div",{children:[T.jsx("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:T.jsx("div",{className:"flex items-center justify-center w-full px-6 py-10 border-2 border-gray-300 border-dashed rounded-md",children:T.jsxs("div",{className:"space-y-1 text-center",children:[T.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:T.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),T.jsxs("div",{className:"flex text-sm text-gray-600",children:[T.jsx("span",{className:"text-indigo-600",children:"Upload a file"}),T.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:".xlsx, .xls",onChange:m}),T.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),T.jsx("p",{className:"text-xs text-gray-500",children:"XLSX, XLS up to 10MB"})]})})}),T.jsx("div",{className:"text-center mt-4",children:T.jsx("button",{type:"button",onClick:g,className:"text-sm font-medium text-indigo-600 hover:text-indigo-500 hover:underline",children:"Download Demo Excel Format"})}),r&&T.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Processing file..."}),e&&!r&&T.jsxs("p",{className:"mt-2 text-sm text-green-600",children:["File loaded: ",e]}),u&&T.jsx("p",{className:"mt-2 text-sm text-red-600",children:u})]})},J1=({students:s,onClose:e})=>{const t=["Roll No","Name","Father","Mother","Phone","Emergency Number","Gender","Batch","Address","Total Fees","Total Paid","Fees Remaining","Full Paid","Mode","Remarks"],[r,o]=ye.useState(new Set(t)),u=g=>{o(p=>{const E=new Set(p);return E.has(g)?E.delete(g):E.add(g),E})},c=g=>{o(g?new Set(t):new Set)},m=()=>{if(r.size===0){alert("Please select at least one column to export.");return}const g=A=>(A.payments||[]).reduce((P,$)=>P+$.amount,0),p=s.map(A=>{const P=g(A),$=A["Total Fees"]-P,Z={...A,"Total Paid":P,"Fees Remaining":$>0&&!A["Full Paid"]?$:0},Y={};return r.forEach(se=>{Y[se]=Z[se]}),Y}),E=XLSX.utils.json_to_sheet(p),b=XLSX.utils.book_new();XLSX.utils.book_append_sheet(b,E,"Students"),XLSX.writeFile(b,`student_data_${new Date().toISOString().slice(0,10)}.xlsx`),e()};return T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[T.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Export Student Data"}),T.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select columns for export."}),T.jsxs("div",{className:"mb-4 flex gap-4",children:[T.jsx("button",{onClick:()=>c(!0),className:"text-sm text-indigo-600 hover:underline",children:"Select All"}),T.jsx("button",{onClick:()=>c(!1),className:"text-sm text-indigo-600 hover:underline",children:"Deselect All"})]}),T.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-60 overflow-y-auto border p-2 rounded-md",children:t.map(g=>T.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[T.jsx("input",{type:"checkbox",checked:r.has(g),onChange:()=>u(g),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),T.jsx("span",{children:g})]},g))}),T.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[T.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),T.jsx("button",{onClick:m,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Export"})]})]})})},W1=({students:s,onEditStudent:e,onCreateBatch:t,onDeleteStudent:r,onRecordPayment:o})=>{const[u,c]=ye.useState(""),[m,g]=ye.useState(new Set),[p,E]=ye.useState(!1),[b,A]=ye.useState(!1),[P,$]=ye.useState(""),[Z,Y]=ye.useState(null),[se,me]=ye.useState("desc"),le=ye.useMemo(()=>{if(!u.trim())return s;const x=u.toLowerCase().trim();return s.filter(Re=>String(Re.Name??"").toLowerCase().includes(x)||String(Re["Roll No"]??"").toLowerCase().includes(x)||String(Re.Phone??"").toLowerCase().includes(x))},[s,u]),we=x=>{g(Re=>{const He=new Set(Re);return He.has(x)?He.delete(x):He.add(x),He})},Ie=x=>{x.target.checked?g(new Set(le.map(Re=>Re.id))):g(new Set)},be=()=>{m.size>0?E(!0):alert("Please select students to form a batch.")},R=()=>{P.trim()&&m.size>0&&(t(P,Array.from(m)),$(""),g(new Set),E(!1))},I=x=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(x),N=()=>{me(x=>x==="desc"?"asc":"desc")},O=({label:x,value:Re})=>T.jsxs("div",{children:[T.jsx("p",{className:"text-xs text-gray-500",children:x}),T.jsx("p",{className:"text-sm font-medium text-gray-800",children:Re||"N/A"})]}),V=({student:x})=>{const Re=(x.payments||[]).reduce((ae,ie)=>ae+ie.amount,0);if(x["Full Paid"]||Re>=x["Total Fees"])return T.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"PAID"});const H=x["Total Fees"]-Re;return T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"font-semibold text-red-600",children:I(H)}),T.jsx("button",{onClick:ae=>{ae.stopPropagation(),o(x)},title:"Record Payment",className:"text-blue-500 hover:text-blue-700",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[T.jsx("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"}),T.jsx("path",{fillRule:"evenodd",d:"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z",clipRule:"evenodd"})]})})]})},j=x=>(x.payments||[]).reduce((Re,He)=>Re+He.amount,0);return T.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[T.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Student List"}),T.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",le.length," of ",s.length," students"]})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto",children:[T.jsxs("div",{className:"relative w-full sm:w-64",children:[T.jsx("input",{type:"text",placeholder:"Search by name, roll, or phone...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",value:u,onChange:x=>c(x.target.value)}),u&&T.jsx("button",{onClick:()=>c(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]}),T.jsx("button",{onClick:be,disabled:m.size===0,className:"w-full sm:w-auto px-4 py-2 bg-indigo-600 text-white rounded-md disabled:bg-indigo-300 hover:bg-indigo-700 transition-colors",children:"Create Batch"}),T.jsx("button",{onClick:()=>A(!0),className:"w-full sm:w-auto px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Export Data"})]})]}),T.jsxs("div",{className:"overflow-x-auto",children:[T.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[T.jsx("thead",{className:"bg-gray-50",children:T.jsxs("tr",{children:[T.jsx("th",{scope:"col",className:"p-4",children:T.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500",onChange:Ie,checked:m.size>0&&m.size===le.length})}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roll No"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount Paid"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dues"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),T.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:le.map(x=>{const Re=Z===x.id,He=ye.useMemo(()=>[...x.payments||[]].sort((H,ae)=>{const ie=new Date(H.date).getTime(),pe=new Date(ae.date).getTime();return se==="desc"?pe-ie:ie-pe}),[x.payments,se]);return T.jsxs($T.Fragment,{children:[T.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>Y(Re?null:x.id),children:[T.jsx("td",{className:"p-4",onClick:H=>H.stopPropagation(),children:T.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500",checked:m.has(x.id),onChange:()=>we(x.id)})}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x["Roll No"]}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x.Name}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.Phone}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:I(j(x))}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:T.jsx(V,{student:x})}),T.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",onClick:H=>H.stopPropagation(),children:[T.jsx("button",{onClick:()=>e(x),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),T.jsx("button",{onClick:()=>r(x),className:"ml-4 text-red-600 hover:text-red-900",children:"Delete"})]})]}),Re&&T.jsx("tr",{className:"bg-gray-50",children:T.jsx("td",{colSpan:7,className:"p-4",children:T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[T.jsx(O,{label:"Roll No",value:x["Roll No"]}),T.jsx(O,{label:"Gender",value:x.Gender}),T.jsx(O,{label:"Batch",value:x.Batch}),T.jsx(O,{label:"Payment Mode",value:x.Mode}),T.jsx(O,{label:"Address",value:x.Address}),T.jsx(O,{label:"Father's Name",value:x.Father}),T.jsx(O,{label:"Mother's Name",value:x.Mother}),T.jsx(O,{label:"Emergency Number",value:x["Emergency Number"]}),T.jsx(O,{label:"Total Fees",value:I(x["Total Fees"])}),T.jsx("div",{className:"col-span-full",children:T.jsx(O,{label:"Remarks",value:x.Remarks})})]}),T.jsx("div",{className:"pt-4 mt-4 border-t border-gray-200",children:T.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-inner",children:[T.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-3 gap-2",children:[T.jsx("h4",{className:"text-md font-semibold text-gray-700",children:"Payment History"}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsxs("p",{className:"text-xs font-medium text-gray-600",children:["Total Paid: ",T.jsx("span",{className:"font-bold text-green-700",children:I(j(x))})]}),T.jsxs("p",{className:"text-xs font-medium text-gray-600",children:["Fees Remaining: ",T.jsx("span",{className:"font-bold text-red-700",children:I(Math.max(0,x["Total Fees"]-j(x)))})]}),T.jsx("button",{onClick:()=>o(x),className:"px-3 py-1 text-xs font-medium text-white bg-indigo-600 rounded-full hover:bg-indigo-700",children:"Add Payment"})]})]}),He.length>0?T.jsxs("table",{className:"min-w-full text-sm",children:[T.jsx("thead",{className:"bg-gray-100",children:T.jsxs("tr",{children:[T.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:T.jsxs("button",{onClick:N,className:"flex items-center gap-1 hover:text-gray-700",children:["Date",T.jsx("span",{className:"text-indigo-600",children:se==="desc"?"↓":"↑"})]})}),T.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Amount"}),T.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Method"}),T.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Remarks"})]})}),T.jsx("tbody",{className:"divide-y divide-gray-100",children:He.map(H=>T.jsxs("tr",{children:[T.jsx("td",{className:"px-4 py-2",children:H.date}),T.jsx("td",{className:"px-4 py-2",children:I(H.amount)}),T.jsx("td",{className:"px-4 py-2",children:H.method}),T.jsx("td",{className:"px-4 py-2",children:H.remarks})]},H.id))})]}):T.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:"No payments recorded for this student."})]})})]})})})]},`${x.id}-${(x.payments||[]).length}`)})})]}),le.length===0&&T.jsx("p",{className:"text-center py-4 text-gray-500",children:"No students found."})]}),p&&T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-center",children:T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[T.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Create New Batch"}),T.jsx("input",{type:"text",placeholder:"Enter batch name",value:P,onChange:x=>$(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),T.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[m.size," student(s) selected."]}),T.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[T.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),T.jsx("button",{onClick:R,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Create"})]})]})}),b&&T.jsx(J1,{students:le,onClose:()=>A(!1)})]})},ex=({student:s,onClose:e,onSave:t})=>{const[r,o]=ye.useState(s);ye.useEffect(()=>{o(s)},[s]);const u=E=>{const{name:b,value:A,type:P}=E.target;if(P==="checkbox"){const{checked:Z}=E.target;o(Y=>({...Y,[b]:Z}));return}const $=b==="Total Fees";o(Z=>({...Z,[b]:P==="number"&&$?parseFloat(A)||0:A}))},c=E=>{E.preventDefault(),t(r)},m=ye.useMemo(()=>(r.payments||[]).reduce((E,b)=>E+b.amount,0),[r.payments]),g=ye.useMemo(()=>(r["Total Fees"]||0)-m,[r,m]),p=E=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(E);return T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:T.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-3xl max-h-full overflow-y-auto",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Edit Student Profile"}),T.jsxs("form",{onSubmit:c,className:"space-y-6",children:[T.jsxs("fieldset",{children:[T.jsx("legend",{className:"text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4",children:"Personal Details"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Roll No"}),T.jsx("input",{type:"text",name:"Roll No",value:r["Roll No"],onChange:u,className:"mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm focus:outline-none sm:text-sm",readOnly:!0})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),T.jsx("input",{type:"text",name:"Name",value:r.Name,onChange:u,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),T.jsxs("select",{name:"Gender",value:r.Gender,onChange:u,className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[T.jsx("option",{children:"Male"}),T.jsx("option",{children:"Female"}),T.jsx("option",{children:"Other"})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Father"}),T.jsx("input",{type:"text",name:"Father",value:r.Father||"",onChange:u,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mother"}),T.jsx("input",{type:"text",name:"Mother",value:r.Mother||"",onChange:u,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),T.jsx("input",{type:"tel",name:"Phone",value:r.Phone,onChange:u,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Emergency Number"}),T.jsx("input",{type:"tel",name:"Emergency Number",value:r["Emergency Number"]||"",onChange:u,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Batch"}),T.jsx("input",{type:"text",name:"Batch",value:r.Batch,onChange:u,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),T.jsx("input",{type:"text",name:"Address",value:r.Address||"",onChange:u,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]})]}),T.jsxs("fieldset",{children:[T.jsx("legend",{className:"text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4",children:"Payment Details"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Fees"}),T.jsx("input",{type:"number",name:"Total Fees",value:r["Total Fees"]||"",onChange:u,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 50000"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Mode"}),T.jsxs("select",{name:"Mode",value:r.Mode||"",onChange:u,className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[T.jsx("option",{value:"",children:"Not Specified"}),T.jsx("option",{children:"Monthly"}),T.jsx("option",{children:"One Time"})]})]}),T.jsxs("div",{className:"md:col-span-2",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Paid"}),T.jsx("div",{className:"mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm sm:text-sm",children:p(m)})]}),T.jsx("div",{className:"md:col-span-2",children:T.jsxs("div",{className:"p-3 bg-gray-50 rounded-md text-center",children:[T.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Remaining Fees: "}),T.jsx("span",{className:`font-bold ${g>0?"text-red-600":"text-green-600"}`,children:p(g)})]})}),T.jsxs("div",{className:"flex items-center gap-2 mt-2 md:col-span-2",children:[T.jsx("input",{id:"full-paid",name:"Full Paid",type:"checkbox",checked:r["Full Paid"]??!1,onChange:u,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"full-paid",className:"text-sm font-medium text-gray-700",children:"Mark as Full Paid"}),T.jsx("p",{className:"text-xs text-gray-500",children:"Overrides calculated status. Use for discounts or scholarships."})]})]})]}),T.jsxs("div",{className:"mt-4",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Student Remarks"}),T.jsx("textarea",{name:"Remarks",value:r.Remarks||"",onChange:u,rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Add any general remarks for the student here."})]})]}),T.jsxs("fieldset",{className:"mt-6",children:[T.jsx("legend",{className:"text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4",children:"Transaction History"}),T.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-md bg-gray-50",children:(r.payments||[]).length>0?T.jsxs("table",{className:"min-w-full text-sm",children:[T.jsx("thead",{className:"bg-gray-100 sticky top-0",children:T.jsxs("tr",{children:[T.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:"Date"}),T.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:"Amount"}),T.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:"Method"}),T.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:"Remarks"})]})}),T.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:[...r.payments].sort((E,b)=>new Date(b.date).getTime()-new Date(E.date).getTime()).map(E=>T.jsxs("tr",{children:[T.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:E.date}),T.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:p(E.amount)}),T.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:E.method}),T.jsx("td",{className:"px-4 py-2",children:E.remarks})]},E.id))})]}):T.jsx("p",{className:"text-center text-gray-500 py-6",children:"No payment history found."})})]}),T.jsxs("div",{className:"flex justify-end gap-4 pt-8 border-t mt-8",children:[T.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),T.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save Changes"})]})]})]})})},cs=({title:s,value:e})=>T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",children:[T.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:s}),T.jsx("p",{className:"mt-2 text-3xl font-semibold text-gray-900",children:e})]}),tx=({batches:s,students:e,onDeleteBatch:t,onAddWarden:r,onRemoveWarden:o,onAssignStudents:u})=>{const[c,m]=ye.useState(null),[g,p]=ye.useState(null),[E,b]=ye.useState(!1),[A,P]=ye.useState(null),[$,Z]=ye.useState(""),[Y,se]=ye.useState(!1),[me,le]=ye.useState(null),[we,Ie]=ye.useState(new Set),be=ye.useMemo(()=>new Map(e.map(ie=>[ie.id,ie])),[e]),R=ie=>be.get(ie),I=ie=>{m(pe=>pe===ie?null:ie)},N=ie=>p(ie),O=()=>{g&&(t(g.id),p(null))},V=(ie,pe)=>{P({batch:ie,gender:pe}),Z(""),b(!0)},j=()=>{$&&A&&r(A.batch.id,$),b(!1),P(null)},x=(ie,pe)=>{le({batch:ie,warden:pe}),Ie(new Set(pe.assignedStudentIds)),se(!0)},Re=ie=>{Ie(pe=>{const Ne=new Set(pe);return Ne.has(ie)?Ne.delete(ie):Ne.add(ie),Ne})},He=()=>{me&&u(me.batch.id,me.warden.wardenStudentId,Array.from(we)),se(!1),le(null)},H=()=>{if(!E||!A)return null;const{batch:ie,gender:pe}=A,Ne=new Set(ie.wardens.map(X=>X.wardenStudentId)),D=ie.studentIds.map(X=>R(X)).filter(X=>!!(X&&X.Gender===pe&&!Ne.has(X.id)));return T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:T.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[T.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Select ",pe," Warden for ",ie.name]}),T.jsxs("select",{value:$,onChange:X=>Z(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500",children:[T.jsx("option",{value:"",children:"-- Select a Student --"}),D.map(X=>T.jsxs("option",{value:X.id,children:[X.Name," (Roll: ",X["Roll No"],")"]},X.id))]}),D.length===0&&T.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["No eligible ",pe.toLowerCase()," students available in this batch."]}),T.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[T.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),T.jsx("button",{onClick:j,disabled:!$,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-300",children:"Add Warden"})]})]})})},ae=()=>{if(!Y||!me)return null;const{batch:ie,warden:pe}=me,Ne=R(pe.wardenStudentId),D=new Set(ie.wardens.map(Q=>Q.wardenStudentId)),X=new Set(ie.wardens.flatMap(Q=>Q.wardenStudentId===pe.wardenStudentId?[]:Q.assignedStudentIds)),oe=ie.studentIds.map(Q=>R(Q)).filter(Q=>!!(Q&&!D.has(Q.id)&&!X.has(Q.id)));return T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:T.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[T.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Assign Students to ",Ne==null?void 0:Ne.Name]}),T.jsxs("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-md p-2 space-y-2",children:[oe.map(Q=>T.jsxs("div",{className:"flex items-center",children:[T.jsx("input",{type:"checkbox",id:`student-${Q.id}`,checked:we.has(Q.id),onChange:()=>Re(Q.id),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),T.jsxs("label",{htmlFor:`student-${Q.id}`,className:"ml-3 text-sm text-gray-700",children:[Q.Name," (Roll: ",Q["Roll No"],")"]})]},Q.id)),oe.length===0&&T.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No students available for assignment."})]}),T.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[we.size," student(s) selected."]}),T.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[T.jsx("button",{onClick:()=>se(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),T.jsx("button",{onClick:He,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save Assignments"})]})]})})};return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[T.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Batch Management"}),s.length===0?T.jsx("p",{className:"text-gray-500",children:"No batches created yet. Go to the Students tab to select students and create a batch."}):T.jsx("div",{className:"space-y-4",children:s.map(ie=>T.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[T.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer hover:bg-gray-50",onClick:()=>I(ie.id),children:[T.jsxs("div",{children:[T.jsx("h3",{className:"font-semibold text-lg text-indigo-700",children:ie.name}),T.jsxs("p",{className:"text-sm text-gray-500",children:[ie.studentIds.length," members"]})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("button",{onClick:pe=>{pe.stopPropagation(),N(ie)},className:"text-red-500 hover:text-red-700 font-medium text-sm",children:"Delete"}),T.jsx("svg",{className:`w-5 h-5 text-gray-500 transform transition-transform ${c===ie.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})]}),c===ie.id&&T.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-6",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"text-md font-medium text-gray-600 mb-2",children:"Members:"}),T.jsx("ul",{className:"divide-y divide-gray-100 max-h-40 overflow-y-auto",children:ie.studentIds.map(pe=>R(pe)).filter(Boolean).map(pe=>T.jsxs("li",{className:"py-2 flex justify-between items-center",children:[T.jsx("span",{children:pe.Name}),T.jsxs("span",{className:"text-sm text-gray-500",children:["Roll: ",pe["Roll No"]]})]},pe.id))})]}),T.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[T.jsxs("div",{className:"flex justify-between items-center mb-3",children:[T.jsx("h4",{className:"text-md font-semibold text-gray-700",children:"Warden Management"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:()=>V(ie,"Female"),className:"px-3 py-1 text-xs font-medium text-pink-700 bg-pink-100 rounded-full hover:bg-pink-200",children:"Add Girl Warden"}),T.jsx("button",{onClick:()=>V(ie,"Male"),className:"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-full hover:bg-blue-200",children:"Add Boy Warden"})]})]}),T.jsxs("div",{className:"space-y-3",children:[ie.wardens.map(pe=>{const Ne=R(pe.wardenStudentId);return Ne?T.jsxs("div",{className:"p-3 bg-gray-50 rounded-md",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsxs("p",{className:"font-semibold text-gray-800",children:[Ne.Name," ",T.jsx("span",{className:"text-xs text-gray-500",children:"(Warden)"})]}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:()=>x(ie,pe),className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Assign Students"}),T.jsx("button",{onClick:()=>o(ie.id,pe.wardenStudentId),className:"text-sm text-red-500 hover:text-red-700",children:"Remove"})]})]}),T.jsxs("ul",{className:"mt-2 pl-4 text-sm text-gray-600 list-disc",children:[pe.assignedStudentIds.map(D=>R(D)).filter(Boolean).map(D=>T.jsx("li",{children:D.Name},D.id)),pe.assignedStudentIds.length===0&&T.jsx("li",{className:"list-none text-xs text-gray-400",children:"No students assigned."})]})]},pe.wardenStudentId):null}),ie.wardens.length===0&&T.jsx("p",{className:"text-sm text-gray-400",children:"No wardens assigned to this batch."})]})]})]})]},ie.id))})]}),g&&T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[T.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Deletion"}),T.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:['Are you sure you want to delete the batch "',g.name,'"? This will also delete all ',g.studentIds.length," students in this batch. This action cannot be undone."]}),T.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[T.jsx("button",{onClick:()=>p(null),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),T.jsx("button",{onClick:O,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})}),E&&T.jsx(H,{}),Y&&T.jsx(ae,{})]})},nx=({student:s,onClose:e,onSave:t})=>{const[r,o]=ye.useState(""),[u,c]=ye.useState("Online"),[m,g]=ye.useState(new Date().toISOString().slice(0,10)),[p,E]=ye.useState(""),b=ye.useMemo(()=>(s.payments||[]).reduce((Y,se)=>Y+se.amount,0),[s.payments]),A=ye.useMemo(()=>s["Total Fees"]-b,[s,b]),P=Y=>{const se=Y.target.value;/^\d*\.?\d*$/.test(se)&&o(se)},$=Y=>{Y.preventDefault();const se=parseFloat(r);if(!se||se<=0){alert("Please enter a valid positive amount.");return}if(!m||new Date(m).toString()==="Invalid Date"){alert("Please select a valid date.");return}const me={id:`payment-${s.id}-${Date.now()}`,amount:se,method:u,date:m,remarks:p};t(s,me)},Z=Y=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(Y);return T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-2xl w-full max-w-md",children:[T.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Record Payment"}),T.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["For: ",T.jsx("span",{className:"font-semibold",children:s.Name})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 bg-gray-50 p-4 rounded-md",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-xs text-gray-500",children:"Total Fees"}),T.jsx("p",{className:"font-semibold",children:Z(s["Total Fees"])})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-xs text-gray-500",children:"Fees Remaining"}),T.jsx("p",{className:`font-semibold ${A>0?"text-red-600":"text-green-600"}`,children:Z(A)})]})]}),T.jsxs("form",{onSubmit:$,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),T.jsx("input",{type:"text",value:r,onChange:P,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter amount being paid",required:!0,pattern:"^\\d*\\.?\\d*$"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),T.jsxs("select",{value:u,onChange:Y=>c(Y.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[T.jsx("option",{children:"Online"}),T.jsx("option",{children:"Cash"}),T.jsx("option",{children:"Card"}),T.jsx("option",{children:"UPI"}),T.jsx("option",{children:"Other"})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Date"}),T.jsx("input",{type:"date",value:m,onChange:Y=>g(Y.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks (Optional)"}),T.jsx("textarea",{value:p,onChange:Y=>E(Y.target.value),rows:2,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Transaction ID, partial payment"})]}),T.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[T.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),T.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save Payment"})]})]})]})})},ix=({transactions:s})=>{const[e,t]=ye.useState(""),r=ye.useMemo(()=>{if(!e)return s;const u=e.toLowerCase();return s.filter(c=>c.studentName.toLowerCase().includes(u)||c.studentRollNo.toString().toLowerCase().includes(u)||c.studentId.toLowerCase().includes(u))},[s,e]),o=u=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(u);return T.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[T.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[T.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Payment History"}),T.jsx("input",{type:"text",placeholder:"Search by name, roll, or ID...",className:"w-full sm:w-64 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",value:e,onChange:u=>t(u.target.value)})]}),T.jsxs("div",{className:"overflow-x-auto",children:[T.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[T.jsx("thead",{className:"bg-gray-50",children:T.jsxs("tr",{children:[T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roll No"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),T.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(u=>T.jsxs("tr",{children:[T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.date}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.studentName}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.studentRollNo}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.studentId}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:o(u.amount)}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.method}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.remarks})]},u.id))})]}),r.length===0&&T.jsx("p",{className:"text-center py-8 text-gray-500",children:s.length===0?"No payments have been recorded yet.":"No matching payments found."})]})]})},rx=()=>{};var uE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},sx=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],c=s[t++],m=s[t++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],c=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},JT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,E=u>>2,b=(u&3)<<4|m>>4;let A=(m&15)<<2|p>>6,P=p&63;g||(P=64,c||(A=64)),r.push(t[E],t[b],t[A],t[P])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(ZT(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):sx(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const p=o<s.length?t[s.charAt(o)]:64;++o;const b=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||b==null)throw new ax;const A=u<<2|m>>4;if(r.push(A),p!==64){const P=m<<4&240|p>>2;if(r.push(P),b!==64){const $=p<<6&192|b;r.push($)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class ax extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ox=function(s){const e=ZT(s);return JT.encodeByteArray(e,!0)},Tf=function(s){return ox(s).replace(/\./g,"")},WT=function(s){try{return JT.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bf(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!lx(t)||(s[t]=bf(s[t],e[t]));return s}function lx(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=()=>mp().__FIREBASE_DEFAULTS__,cx=()=>{if(typeof process>"u"||typeof uE>"u")return;const s=uE.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},hx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&WT(s[1]);return e&&JSON.parse(e)},eb=()=>{try{return rx()||ux()||cx()||hx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},gp=()=>{var s;return(s=eb())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dx(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Tf(JSON.stringify(t)),Tf(JSON.stringify(c)),""].join(".")}const ju={};function gx(){const s={prod:[],emulator:[]};for(const e of Object.keys(ju))ju[e]?s.emulator.push(e):s.prod.push(e);return s}function px(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let cE=!1;function yx(s,e){if(typeof window>"u"||typeof document>"u"||!pp(window.location.host)||ju[s]===e||ju[s]||cE)return;ju[s]=e;function t(A){return`__firebase__banner__${A}`}const r="__firebase__banner",u=gx().prod.length>0;function c(){const A=document.getElementById(r);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,P){A.setAttribute("width","24"),A.setAttribute("id",P),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{cE=!0,c()},A}function E(A,P){A.setAttribute("id",P),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=px(r),P=t("text"),$=document.getElementById(P)||document.createElement("span"),Z=t("learnmore"),Y=document.getElementById(Z)||document.createElement("a"),se=t("preprendIcon"),me=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const le=A.element;m(le),E(Y,Z);const we=p();g(me,se),le.append(me,$,Y,we),document.body.appendChild(le)}u?($.innerText="Preview backend disconnected.",me.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(me.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tb(){var e;const s=(e=eb())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _x(){return typeof window<"u"||nb()}function nb(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ib(){return!tb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rb(){return!tb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function sb(){try{return typeof indexedDB=="object"}catch{return!1}}function vx(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="FirebaseError";class Pa extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Ex,Object.setPrototypeOf(this,Pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uf.prototype.create)}}class Uf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?Tx(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new Pa(o,m,r)}}function Tx(s,e){return s.replace(bx,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const bx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function qo(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const u=s[o],c=e[o];if(fE(u)&&fE(c)){if(!qo(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function fE(s){return s!==null&&typeof s=="object"}function Sx(s,e){const t=new wx(s,e);return t.subscribe.bind(t)}class wx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Ax(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=_g),o.error===void 0&&(o.error=_g),o.complete===void 0&&(o.complete=_g);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ax(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function _g(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(s){return s&&s._delegate?s._delegate:s}class Aa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new fx;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rx(e))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=da){return this.instances.has(e)}getOptions(e=da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ix(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=da){return this.component?this.component.multipleInstances?e:da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ix(s){return s===da?void 0:s}function Rx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp=[];var Ge;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ge||(Ge={}));const ob={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},Nx=Ge.INFO,Cx={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},Dx=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=Cx[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _p{constructor(e){this.name=e,this._logLevel=Nx,this._logHandler=Dx,this._userLogHandler=null,yp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ob[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}function Vx(s){yp.forEach(e=>{e.setLogLevel(s)})}function Mx(s,e){for(const t of yp){let r=null;e&&e.level&&(r=ob[e.level]),s===null?t.userLogHandler=null:t.userLogHandler=(o,u,...c)=>{const m=c.map(g=>{if(g==null)return null;if(typeof g=="string")return g;if(typeof g=="number"||typeof g=="boolean")return g.toString();if(g instanceof Error)return g.message;try{return JSON.stringify(g)}catch{return null}}).filter(g=>g).join(" ");u>=(r??o.logLevel)&&s({level:Ge[u].toLowerCase(),message:m,args:c,type:o.name})}}}const Ox=(s,e)=>e.some(t=>s instanceof t);let dE,mE;function Px(){return dE||(dE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jx(){return mE||(mE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lb=new WeakMap,Vg=new WeakMap,ub=new WeakMap,vg=new WeakMap,vp=new WeakMap;function zx(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{t(ys(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&lb.set(t,s)}).catch(()=>{}),vp.set(e,s),e}function Lx(s){if(Vg.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});Vg.set(s,e)}let Mg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Vg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||ub.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ys(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function kx(s){Mg=s(Mg)}function Bx(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Eg(this),e,...t);return ub.set(r,e.sort?e.sort():[e]),ys(r)}:jx().includes(s)?function(...e){return s.apply(Eg(this),e),ys(lb.get(this))}:function(...e){return ys(s.apply(Eg(this),e))}}function Ux(s){return typeof s=="function"?Bx(s):(s instanceof IDBTransaction&&Lx(s),Ox(s,Px())?new Proxy(s,Mg):s)}function ys(s){if(s instanceof IDBRequest)return zx(s);if(vg.has(s))return vg.get(s);const e=Ux(s);return e!==s&&(vg.set(s,e),vp.set(e,s)),e}const Eg=s=>vp.get(s);function qx(s,e,{blocked:t,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,e),m=ys(c);return r&&c.addEventListener("upgradeneeded",g=>{r(ys(c.result),g.oldVersion,g.newVersion,ys(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const Fx=["get","getKey","getAll","getAllKeys","count"],Gx=["put","add","delete","clear"],Tg=new Map;function gE(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Tg.get(e))return Tg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=Gx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Fx.includes(t)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return Tg.set(e,u),u}kx(s=>({...s,get:(e,t,r)=>gE(e,t)||s.get(e,t,r),has:(e,t)=>!!gE(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Qx(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Qx(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wf="@firebase/app",Og="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new _p("@firebase/app"),Kx="@firebase/app-compat",Yx="@firebase/analytics-compat",Xx="@firebase/analytics",$x="@firebase/app-check-compat",Zx="@firebase/app-check",Jx="@firebase/auth",Wx="@firebase/auth-compat",eI="@firebase/database",tI="@firebase/data-connect",nI="@firebase/database-compat",iI="@firebase/functions",rI="@firebase/functions-compat",sI="@firebase/installations",aI="@firebase/installations-compat",oI="@firebase/messaging",lI="@firebase/messaging-compat",uI="@firebase/performance",cI="@firebase/performance-compat",hI="@firebase/remote-config",fI="@firebase/remote-config-compat",dI="@firebase/storage",mI="@firebase/storage-compat",gI="@firebase/firestore",pI="@firebase/ai",yI="@firebase/firestore-compat",_I="firebase",vI="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="[DEFAULT]",EI={[wf]:"fire-core",[Kx]:"fire-core-compat",[Xx]:"fire-analytics",[Yx]:"fire-analytics-compat",[Zx]:"fire-app-check",[$x]:"fire-app-check-compat",[Jx]:"fire-auth",[Wx]:"fire-auth-compat",[eI]:"fire-rtdb",[tI]:"fire-data-connect",[nI]:"fire-rtdb-compat",[iI]:"fire-fn",[rI]:"fire-fn-compat",[sI]:"fire-iid",[aI]:"fire-iid-compat",[oI]:"fire-fcm",[lI]:"fire-fcm-compat",[uI]:"fire-perf",[cI]:"fire-perf-compat",[hI]:"fire-rc",[fI]:"fire-rc-compat",[dI]:"fire-gcs",[mI]:"fire-gcs-compat",[gI]:"fire-fst",[yI]:"fire-fst-compat",[pI]:"fire-vertex","fire-js":"fire-js",[_I]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new Map,Fo=new Map,Go=new Map;function Ku(s,e){try{s.container.addComponent(e)}catch(t){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function cb(s,e){s.container.addOrOverwriteComponent(e)}function Ho(s){const e=s.name;if(Go.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;Go.set(e,s);for(const t of bs.values())Ku(t,s);for(const t of Fo.values())Ku(t,s);return!0}function hb(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function TI(s,e,t=Ts){hb(s,e).clearInstance(t)}function Ep(s){return s.options!==void 0}function fb(s){return Ep(s)?!1:"authIdToken"in s||"appCheckToken"in s||"releaseOnDeref"in s||"automaticDataCollectionEnabled"in s}function db(s){return s==null?!1:s.settings!==void 0}function bI(){Go.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fn=new Uf("app","Firebase",SI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mb=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(s,e){const t=WT(s.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const o=JSON.parse(t).exp*1e3,u=new Date().getTime();o-u<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class wI extends mb{constructor(e,t,r,o){const u=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,c={name:r,automaticDataCollectionEnabled:u};if(e.apiKey!==void 0)super(e,c,o);else{const m=e;super(m.options,c,o)}this._serverConfig={automaticDataCollectionEnabled:u,...t},this._serverConfig.authIdToken&&pE(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&pE(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Sr(wf,Og,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Sp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Fn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=vI;function bp(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:Ts,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Fn.create("bad-app-name",{appName:String(o)});if(t||(t=gp()),!t)throw Fn.create("no-options");const u=bs.get(o);if(u){if(qo(t,u.options)&&qo(r,u.config))return u;throw Fn.create("duplicate-app",{appName:o})}const c=new ab(o);for(const g of Go.values())c.addComponent(g);const m=new mb(t,r,c);return bs.set(o,m),m}function AI(s,e={}){if(_x()&&!nb())throw Fn.create("invalid-server-app-environment");let t,r=e||{};if(s&&(Ep(s)?t=s.options:fb(s)?r=s:t=s),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=gp()),!t)throw Fn.create("no-options");const o={...r,...t};o.releaseOnDeref!==void 0&&delete o.releaseOnDeref;const u=E=>[...E].reduce((b,A)=>Math.imul(31,b)+A.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Fn.create("finalization-registry-not-supported",{});const c=""+u(JSON.stringify(o)),m=Fo.get(c);if(m)return m.incRefCount(r.releaseOnDeref),m;const g=new ab(c);for(const E of Go.values())g.addComponent(E);const p=new wI(t,r,c,g);return Fo.set(c,p),p}function xI(s=Ts){const e=bs.get(s);if(!e&&s===Ts&&gp())return bp();if(!e)throw Fn.create("no-app",{appName:s});return e}function II(){return Array.from(bs.values())}async function Sp(s){let e=!1;const t=s.name;bs.has(t)?(e=!0,bs.delete(t)):Fo.has(t)&&s.decRefCount()<=0&&(Fo.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function Sr(s,e,t){let r=EI[s]??s;t&&(r+=`-${t}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(c.join(" "));return}Ho(new Aa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function gb(s,e){if(s!==null&&typeof s!="function")throw Fn.create("invalid-log-argument");Mx(s,e)}function pb(s){Vx(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="firebase-heartbeat-database",NI=1,Yu="firebase-heartbeat-store";let bg=null;function yb(){return bg||(bg=qx(RI,NI,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Yu)}catch(t){console.warn(t)}}}}).catch(s=>{throw Fn.create("idb-open",{originalErrorMessage:s.message})})),bg}async function CI(s){try{const t=(await yb()).transaction(Yu),r=await t.objectStore(Yu).get(_b(s));return await t.done,r}catch(e){if(e instanceof Pa)wr.warn(e.message);else{const t=Fn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(t.message)}}}async function yE(s,e){try{const r=(await yb()).transaction(Yu,"readwrite");await r.objectStore(Yu).put(e,_b(s)),await r.done}catch(t){if(t instanceof Pa)wr.warn(t.message);else{const r=Fn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});wr.warn(r.message)}}}function _b(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=1024,VI=30;class MI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new PI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=_E();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>VI){const c=jI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=_E(),{heartbeatsToSend:r,unsentEntries:o}=OI(this._heartbeatsCache.heartbeats),u=Tf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return wr.warn(t),""}}}function _E(){return new Date().toISOString().substring(0,10)}function OI(s,e=DI){const t=[];let r=s.slice();for(const o of s){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),vE(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),vE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class PI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sb()?vx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await CI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function vE(s){return Tf(JSON.stringify({version:2,heartbeats:s})).length}function jI(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(s){Ho(new Aa("platform-logger",e=>new Hx(e),"PRIVATE")),Ho(new Aa("heartbeat",e=>new MI(e),"PRIVATE")),Sr(wf,Og,s),Sr(wf,Og,"esm2020"),Sr("fire-js","")}zI("");const LI=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Pa,SDK_VERSION:Tp,_DEFAULT_ENTRY_NAME:Ts,_addComponent:Ku,_addOrOverwriteComponent:cb,_apps:bs,_clearComponents:bI,_components:Go,_getProvider:hb,_isFirebaseApp:Ep,_isFirebaseServerApp:db,_isFirebaseServerAppSettings:fb,_registerComponent:Ho,_removeServiceInstance:TI,_serverApps:Fo,deleteApp:Sp,getApp:xI,getApps:II,initializeApp:bp,initializeServerApp:AI,onLog:gb,registerVersion:Sr,setLogLevel:pb},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,t){this._delegate=e,this.firebase=t,Ku(e,new Aa("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Sp(this._delegate)))}_getService(e,t=Ts){var o;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((o=r.getComponent())==null?void 0:o.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ts){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Ku(this._delegate,e)}_addOrOverwriteComponent(e){cb(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},EE=new Uf("app-compat","Firebase",BI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(s){const e={},t={__esModule:!0,initializeApp:u,app:o,registerVersion:Sr,setLogLevel:pb,onLog:gb,apps:null,SDK_VERSION:Tp,INTERNAL:{registerComponent:m,removeApp:r,useAsService:g,modularAPIs:LI}};t.default=t,Object.defineProperty(t,"apps",{get:c});function r(p){delete e[p]}function o(p){if(p=p||Ts,!hE(e,p))throw EE.create("no-app",{appName:p});return e[p]}o.App=s;function u(p,E={}){const b=bp(p,E);if(hE(e,b.name))return e[b.name];const A=new s(b,t);return e[b.name]=A,A}function c(){return Object.keys(e).map(p=>e[p])}function m(p){const E=p.name,b=E.replace("-compat","");if(Ho(p)&&p.type==="PUBLIC"){const A=(P=o())=>{if(typeof P[b]!="function")throw EE.create("invalid-app-argument",{appName:E});return P[b]()};p.serviceProps!==void 0&&bf(A,p.serviceProps),t[b]=A,s.prototype[b]=function(...P){return this._getService.bind(this,E).apply(this,p.multipleInstances?P:[])}}return p.type==="PUBLIC"?t[b]:null}function g(p,E){return E==="serverAuth"?null:E}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(){const s=UI(kI);s.INTERNAL={...s.INTERNAL,createFirebaseNamespace:vb,extendNamespace:e,createSubscribe:Sx,ErrorFactory:Uf,deepExtend:bf};function e(t){bf(s,t)}return s}const qI=vb();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=new _p("@firebase/app-compat"),FI="@firebase/app-compat",GI="0.5.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(s){Sr(FI,GI,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const s=mp();if(s.firebase!==void 0){TE.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=s.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&TE.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Xu=qI;HI();var QI="firebase",KI="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xu.registerVersion(QI,KI,"app-compat");var bE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,Eb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function N(){}N.prototype=I.prototype,R.F=I.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(O,V,j){for(var x=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)x[Re-2]=arguments[Re];return I.prototype[V].apply(O,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,I,N){N||(N=0);const O=Array(16);if(typeof I=="string")for(var V=0;V<16;++V)O[V]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(V=0;V<16;++V)O[V]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=R.g[0],N=R.g[1],V=R.g[2];let j=R.g[3],x;x=I+(j^N&(V^j))+O[0]+3614090360&4294967295,I=N+(x<<7&4294967295|x>>>25),x=j+(V^I&(N^V))+O[1]+3905402710&4294967295,j=I+(x<<12&4294967295|x>>>20),x=V+(N^j&(I^N))+O[2]+606105819&4294967295,V=j+(x<<17&4294967295|x>>>15),x=N+(I^V&(j^I))+O[3]+3250441966&4294967295,N=V+(x<<22&4294967295|x>>>10),x=I+(j^N&(V^j))+O[4]+4118548399&4294967295,I=N+(x<<7&4294967295|x>>>25),x=j+(V^I&(N^V))+O[5]+1200080426&4294967295,j=I+(x<<12&4294967295|x>>>20),x=V+(N^j&(I^N))+O[6]+2821735955&4294967295,V=j+(x<<17&4294967295|x>>>15),x=N+(I^V&(j^I))+O[7]+4249261313&4294967295,N=V+(x<<22&4294967295|x>>>10),x=I+(j^N&(V^j))+O[8]+1770035416&4294967295,I=N+(x<<7&4294967295|x>>>25),x=j+(V^I&(N^V))+O[9]+2336552879&4294967295,j=I+(x<<12&4294967295|x>>>20),x=V+(N^j&(I^N))+O[10]+4294925233&4294967295,V=j+(x<<17&4294967295|x>>>15),x=N+(I^V&(j^I))+O[11]+2304563134&4294967295,N=V+(x<<22&4294967295|x>>>10),x=I+(j^N&(V^j))+O[12]+1804603682&4294967295,I=N+(x<<7&4294967295|x>>>25),x=j+(V^I&(N^V))+O[13]+4254626195&4294967295,j=I+(x<<12&4294967295|x>>>20),x=V+(N^j&(I^N))+O[14]+2792965006&4294967295,V=j+(x<<17&4294967295|x>>>15),x=N+(I^V&(j^I))+O[15]+1236535329&4294967295,N=V+(x<<22&4294967295|x>>>10),x=I+(V^j&(N^V))+O[1]+4129170786&4294967295,I=N+(x<<5&4294967295|x>>>27),x=j+(N^V&(I^N))+O[6]+3225465664&4294967295,j=I+(x<<9&4294967295|x>>>23),x=V+(I^N&(j^I))+O[11]+643717713&4294967295,V=j+(x<<14&4294967295|x>>>18),x=N+(j^I&(V^j))+O[0]+3921069994&4294967295,N=V+(x<<20&4294967295|x>>>12),x=I+(V^j&(N^V))+O[5]+3593408605&4294967295,I=N+(x<<5&4294967295|x>>>27),x=j+(N^V&(I^N))+O[10]+38016083&4294967295,j=I+(x<<9&4294967295|x>>>23),x=V+(I^N&(j^I))+O[15]+3634488961&4294967295,V=j+(x<<14&4294967295|x>>>18),x=N+(j^I&(V^j))+O[4]+3889429448&4294967295,N=V+(x<<20&4294967295|x>>>12),x=I+(V^j&(N^V))+O[9]+568446438&4294967295,I=N+(x<<5&4294967295|x>>>27),x=j+(N^V&(I^N))+O[14]+3275163606&4294967295,j=I+(x<<9&4294967295|x>>>23),x=V+(I^N&(j^I))+O[3]+4107603335&4294967295,V=j+(x<<14&4294967295|x>>>18),x=N+(j^I&(V^j))+O[8]+1163531501&4294967295,N=V+(x<<20&4294967295|x>>>12),x=I+(V^j&(N^V))+O[13]+2850285829&4294967295,I=N+(x<<5&4294967295|x>>>27),x=j+(N^V&(I^N))+O[2]+4243563512&4294967295,j=I+(x<<9&4294967295|x>>>23),x=V+(I^N&(j^I))+O[7]+1735328473&4294967295,V=j+(x<<14&4294967295|x>>>18),x=N+(j^I&(V^j))+O[12]+2368359562&4294967295,N=V+(x<<20&4294967295|x>>>12),x=I+(N^V^j)+O[5]+4294588738&4294967295,I=N+(x<<4&4294967295|x>>>28),x=j+(I^N^V)+O[8]+2272392833&4294967295,j=I+(x<<11&4294967295|x>>>21),x=V+(j^I^N)+O[11]+1839030562&4294967295,V=j+(x<<16&4294967295|x>>>16),x=N+(V^j^I)+O[14]+4259657740&4294967295,N=V+(x<<23&4294967295|x>>>9),x=I+(N^V^j)+O[1]+2763975236&4294967295,I=N+(x<<4&4294967295|x>>>28),x=j+(I^N^V)+O[4]+1272893353&4294967295,j=I+(x<<11&4294967295|x>>>21),x=V+(j^I^N)+O[7]+4139469664&4294967295,V=j+(x<<16&4294967295|x>>>16),x=N+(V^j^I)+O[10]+3200236656&4294967295,N=V+(x<<23&4294967295|x>>>9),x=I+(N^V^j)+O[13]+681279174&4294967295,I=N+(x<<4&4294967295|x>>>28),x=j+(I^N^V)+O[0]+3936430074&4294967295,j=I+(x<<11&4294967295|x>>>21),x=V+(j^I^N)+O[3]+3572445317&4294967295,V=j+(x<<16&4294967295|x>>>16),x=N+(V^j^I)+O[6]+76029189&4294967295,N=V+(x<<23&4294967295|x>>>9),x=I+(N^V^j)+O[9]+3654602809&4294967295,I=N+(x<<4&4294967295|x>>>28),x=j+(I^N^V)+O[12]+3873151461&4294967295,j=I+(x<<11&4294967295|x>>>21),x=V+(j^I^N)+O[15]+530742520&4294967295,V=j+(x<<16&4294967295|x>>>16),x=N+(V^j^I)+O[2]+3299628645&4294967295,N=V+(x<<23&4294967295|x>>>9),x=I+(V^(N|~j))+O[0]+4096336452&4294967295,I=N+(x<<6&4294967295|x>>>26),x=j+(N^(I|~V))+O[7]+1126891415&4294967295,j=I+(x<<10&4294967295|x>>>22),x=V+(I^(j|~N))+O[14]+2878612391&4294967295,V=j+(x<<15&4294967295|x>>>17),x=N+(j^(V|~I))+O[5]+4237533241&4294967295,N=V+(x<<21&4294967295|x>>>11),x=I+(V^(N|~j))+O[12]+1700485571&4294967295,I=N+(x<<6&4294967295|x>>>26),x=j+(N^(I|~V))+O[3]+2399980690&4294967295,j=I+(x<<10&4294967295|x>>>22),x=V+(I^(j|~N))+O[10]+4293915773&4294967295,V=j+(x<<15&4294967295|x>>>17),x=N+(j^(V|~I))+O[1]+2240044497&4294967295,N=V+(x<<21&4294967295|x>>>11),x=I+(V^(N|~j))+O[8]+1873313359&4294967295,I=N+(x<<6&4294967295|x>>>26),x=j+(N^(I|~V))+O[15]+4264355552&4294967295,j=I+(x<<10&4294967295|x>>>22),x=V+(I^(j|~N))+O[6]+2734768916&4294967295,V=j+(x<<15&4294967295|x>>>17),x=N+(j^(V|~I))+O[13]+1309151649&4294967295,N=V+(x<<21&4294967295|x>>>11),x=I+(V^(N|~j))+O[4]+4149444226&4294967295,I=N+(x<<6&4294967295|x>>>26),x=j+(N^(I|~V))+O[11]+3174756917&4294967295,j=I+(x<<10&4294967295|x>>>22),x=V+(I^(j|~N))+O[2]+718787259&4294967295,V=j+(x<<15&4294967295|x>>>17),x=N+(j^(V|~I))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(V+(x<<21&4294967295|x>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+j&4294967295}r.prototype.v=function(R,I){I===void 0&&(I=R.length);const N=I-this.blockSize,O=this.C;let V=this.h,j=0;for(;j<I;){if(V==0)for(;j<=N;)o(this,R,j),j+=this.blockSize;if(typeof R=="string"){for(;j<I;)if(O[V++]=R.charCodeAt(j++),V==this.blockSize){o(this,O),V=0;break}}else for(;j<I;)if(O[V++]=R[j++],V==this.blockSize){o(this,O),V=0;break}}this.h=V,this.o+=I},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)R[I++]=this.g[N]>>>O&255;return R};function u(R,I){var N=m;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=I(R)}function c(R,I){this.h=I;const N=[];let O=!0;for(let V=R.length-1;V>=0;V--){const j=R[V]|0;O&&j==I||(N[V]=j,O=!1)}this.g=N}var m={};function g(R){return-128<=R&&R<128?u(R,function(I){return new c([I|0],I<0?-1:0)}):new c([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return b;if(R<0)return Y(p(-R));const I=[];let N=1;for(let O=0;R>=N;O++)I[O]=R/N|0,N*=4294967296;return new c(I,0)}function E(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return Y(E(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(I,8));let O=b;for(let j=0;j<R.length;j+=8){var V=Math.min(8,R.length-j);const x=parseInt(R.substring(j,j+V),I);V<8?(V=p(Math.pow(I,V)),O=O.j(V).add(p(x))):(O=O.j(N),O=O.add(p(x)))}return O}var b=g(0),A=g(1),P=g(16777216);s=c.prototype,s.m=function(){if(Z(this))return-Y(this).m();let R=0,I=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);R+=(O>=0?O:4294967296+O)*I,I*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if($(this))return"0";if(Z(this))return"-"+Y(this).toString(R);const I=p(Math.pow(R,6));var N=this;let O="";for(;;){const V=we(N,I).g;N=se(N,V.j(I));let j=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=V,$(N))return j+O;for(;j.length<6;)j="0"+j;O=j+O}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function $(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function Z(R){return R.h==-1}s.l=function(R){return R=se(this,R),Z(R)?-1:$(R)?0:1};function Y(R){const I=R.g.length,N=[];for(let O=0;O<I;O++)N[O]=~R.g[O];return new c(N,~R.h).add(A)}s.abs=function(){return Z(this)?Y(this):this},s.add=function(R){const I=Math.max(this.g.length,R.g.length),N=[];let O=0;for(let V=0;V<=I;V++){let j=O+(this.i(V)&65535)+(R.i(V)&65535),x=(j>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);O=x>>>16,j&=65535,x&=65535,N[V]=x<<16|j}return new c(N,N[N.length-1]&-2147483648?-1:0)};function se(R,I){return R.add(Y(I))}s.j=function(R){if($(this)||$(R))return b;if(Z(this))return Z(R)?Y(this).j(Y(R)):Y(Y(this).j(R));if(Z(R))return Y(this.j(Y(R)));if(this.l(P)<0&&R.l(P)<0)return p(this.m()*R.m());const I=this.g.length+R.g.length,N=[];for(var O=0;O<2*I;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let V=0;V<R.g.length;V++){const j=this.i(O)>>>16,x=this.i(O)&65535,Re=R.i(V)>>>16,He=R.i(V)&65535;N[2*O+2*V]+=x*He,me(N,2*O+2*V),N[2*O+2*V+1]+=j*He,me(N,2*O+2*V+1),N[2*O+2*V+1]+=x*Re,me(N,2*O+2*V+1),N[2*O+2*V+2]+=j*Re,me(N,2*O+2*V+2)}for(R=0;R<I;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=I;R<2*I;R++)N[R]=0;return new c(N,0)};function me(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function le(R,I){this.g=R,this.h=I}function we(R,I){if($(I))throw Error("division by zero");if($(R))return new le(b,b);if(Z(R))return I=we(Y(R),I),new le(Y(I.g),Y(I.h));if(Z(I))return I=we(R,Y(I)),new le(Y(I.g),I.h);if(R.g.length>30){if(Z(R)||Z(I))throw Error("slowDivide_ only works with positive integers.");for(var N=A,O=I;O.l(R)<=0;)N=Ie(N),O=Ie(O);var V=be(N,1),j=be(O,1);for(O=be(O,2),N=be(N,2);!$(O);){var x=j.add(O);x.l(R)<=0&&(V=V.add(N),j=x),O=be(O,1),N=be(N,1)}return I=se(R,V.j(I)),new le(V,I)}for(V=b;R.l(I)>=0;){for(N=Math.max(1,Math.floor(R.m()/I.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),j=p(N),x=j.j(I);Z(x)||x.l(R)>0;)N-=O,j=p(N),x=j.j(I);$(j)&&(j=A),V=V.add(j),R=se(R,x)}return new le(V,R)}s.B=function(R){return we(this,R).h},s.and=function(R){const I=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)&R.i(O);return new c(N,this.h&R.h)},s.or=function(R){const I=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)|R.i(O);return new c(N,this.h|R.h)},s.xor=function(R){const I=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)^R.i(O);return new c(N,this.h^R.h)};function Ie(R){const I=R.g.length+1,N=[];for(let O=0;O<I;O++)N[O]=R.i(O)<<1|R.i(O-1)>>>31;return new c(N,R.h)}function be(R,I){const N=I>>5;I%=32;const O=R.g.length-N,V=[];for(let j=0;j<O;j++)V[j]=I>0?R.i(j+N)>>>I|R.i(j+N+1)<<32-I:R.i(j+N);return new c(V,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Eb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=E,_s=c}).apply(typeof bE<"u"?bE:typeof self<"u"?self:typeof window<"u"?window:{});var nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tb,Du,bb,cf,Pg,Sb,wb,Ab;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof nf=="object"&&nf];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var v=r;h=h.split(".");for(var w=0;w<h.length-1;w++){var k=h[w];if(!(k in v))break e;v=v[k]}h=h[h.length-1],w=v[h],y=y(w),y!=w&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&v.push([w,y[w]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function E(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function b(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(w,k,G){for(var ce=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ce[Me-2]=arguments[Me];return y.prototype[k].apply(w,ce)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function P(h){const y=h.length;if(y>0){const v=Array(y);for(let w=0;w<y;w++)v[w]=h[w];return v}return[]}function $(h,y){for(let w=1;w<arguments.length;w++){const k=arguments[w];var v=typeof k;if(v=v!="object"?v:k?Array.isArray(k)?"array":v:"null",v=="array"||v=="object"&&typeof k.length=="number"){v=h.length||0;const G=k.length||0;h.length=v+G;for(let ce=0;ce<G;ce++)h[v+ce]=k[ce]}else h.push(k)}}class Z{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Y(h){c.setTimeout(()=>{throw h},0)}function se(){var h=R;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class me{constructor(){this.h=this.g=null}add(y,v){const w=le.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var le=new Z(()=>new we,h=>h.reset());class we{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,be=!1,R=new me,I=()=>{const h=Promise.resolve(void 0);Ie=()=>{h.then(N)}};function N(){for(var h;h=se();){try{h.h.call(h.g)}catch(v){Y(v)}var y=le;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}be=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function Re(h,y){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}b(Re,V),Re.prototype.init=function(h,y){const v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Re.Z.h.call(this)},Re.prototype.h=function(){Re.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),H=0;function ae(h,y,v,w,k){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=k,this.key=++H,this.da=this.fa=!1}function ie(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function pe(h,y,v){for(const w in h)y.call(v,h[w],w,h)}function Ne(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function D(h){const y={};for(const v in h)y[v]=h[v];return y}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,y){let v,w;for(let k=1;k<arguments.length;k++){w=arguments[k];for(v in w)h[v]=w[v];for(let G=0;G<X.length;G++)v=X[G],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function Q(h){this.src=h,this.g={},this.h=0}Q.prototype.add=function(h,y,v,w,k){const G=h.toString();h=this.g[G],h||(h=this.g[G]=[],this.h++);const ce=fe(h,y,w,k);return ce>-1?(y=h[ce],v||(y.fa=!1)):(y=new ae(y,this.src,G,!!w,k),y.fa=v,h.push(y)),y};function re(h,y){const v=y.type;if(v in h.g){var w=h.g[v],k=Array.prototype.indexOf.call(w,y,void 0),G;(G=k>=0)&&Array.prototype.splice.call(w,k,1),G&&(ie(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function fe(h,y,v,w){for(let k=0;k<h.length;++k){const G=h[k];if(!G.da&&G.listener==y&&G.capture==!!v&&G.ha==w)return k}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),xe={};function De(h,y,v,w,k){if(Array.isArray(y)){for(let G=0;G<y.length;G++)De(h,y[G],v,w,k);return null}return v=Tl(v),h&&h[He]?h.J(y,v,m(w)?!!w.capture:!1,k):ut(h,y,v,!1,w,k)}function ut(h,y,v,w,k,G){if(!y)throw Error("Invalid event type");const ce=m(k)?!!k.capture:!!k;let Me=js(h);if(Me||(h[ue]=Me=new Q(h)),v=Me.add(y,v,w,ce,G),v.proxy)return v;if(w=Dn(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)j||(k=ce),k===void 0&&(k=!1),h.addEventListener(y.toString(),w,k);else if(h.attachEvent)h.attachEvent(Vn(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Dn(){function h(v){return y.call(h.src,h.listener,v)}const y=nr;return h}function Hn(h,y,v,w,k){if(Array.isArray(y))for(var G=0;G<y.length;G++)Hn(h,y[G],v,w,k);else w=m(w)?!!w.capture:!!w,v=Tl(v),h&&h[He]?(h=h.i,G=String(y).toString(),G in h.g&&(y=h.g[G],v=fe(y,v,w,k),v>-1&&(ie(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[G],h.h--)))):h&&(h=js(h))&&(y=h.g[y.toString()],h=-1,y&&(h=fe(y,v,w,k)),(v=h>-1?y[h]:null)&&wi(v))}function wi(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[He])re(y.i,h);else{var v=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(v,w,h.capture):y.detachEvent?y.detachEvent(Vn(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=js(y))?(re(v,h),v.h==0&&(v.src=null,y[ue]=null)):ie(h)}}}function Vn(h){return h in xe?xe[h]:xe[h]="on"+h}function nr(h,y){if(h.da)h=!0;else{y=new Re(y,this);const v=h.listener,w=h.ha||h.src;h.fa&&wi(h),h=v.call(w,y)}return h}function js(h){return h=h[ue],h instanceof Q?h:null}var El="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tl(h){return typeof h=="function"?h:(h[El]||(h[El]=function(y){return h.handleEvent(y)}),h[El])}function Dt(){O.call(this),this.i=new Q(this),this.M=this,this.G=null}b(Dt,O),Dt.prototype[He]=!0,Dt.prototype.removeEventListener=function(h,y,v,w){Hn(this,h,y,v,w)};function Ft(h,y){var v,w=h.G;if(w)for(v=[];w;w=w.G)v.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new V(y,h);else if(y instanceof V)y.target=y.target||h;else{var k=y;y=new V(w,h),oe(y,k)}k=!0;let G,ce;if(v)for(ce=v.length-1;ce>=0;ce--)G=y.g=v[ce],k=Dr(G,w,!0,y)&&k;if(G=y.g=h,k=Dr(G,w,!0,y)&&k,k=Dr(G,w,!1,y)&&k,v)for(ce=0;ce<v.length;ce++)G=y.g=v[ce],k=Dr(G,w,!1,y)&&k}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let w=0;w<v.length;w++)ie(v[w]);delete h.g[y],h.h--}}this.G=null},Dt.prototype.J=function(h,y,v,w){return this.i.add(String(h),y,!1,v,w)},Dt.prototype.K=function(h,y,v,w){return this.i.add(String(h),y,!0,v,w)};function Dr(h,y,v,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let k=!0;for(let G=0;G<y.length;++G){const ce=y[G];if(ce&&!ce.da&&ce.capture==v){const Me=ce.listener,xt=ce.ha||ce.src;ce.fa&&re(h.i,ce),k=Me.call(xt,w)!==!1&&k}}return k&&!w.defaultPrevented}function md(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Ic(h){h.g=md(()=>{h.g=null,h.i&&(h.i=!1,Ic(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class mn extends O{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ic(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zs(h){O.call(this),this.h=h,this.g={}}b(zs,O);var bl=[];function Sl(h){pe(h.g,function(y,v){this.g.hasOwnProperty(v)&&wi(y)},h),h.g={}}zs.prototype.N=function(){zs.Z.N.call(this),Sl(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vr=c.JSON.stringify,gd=c.JSON.parse,Rc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Nc(){}function Cc(){}var oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){V.call(this,"d")}b(Zt,V);function Qn(){V.call(this,"c")}b(Qn,V);var At={},Dc=null;function Ba(){return Dc=Dc||new Dt}At.Ia="serverreachability";function Vc(h){V.call(this,At.Ia,h)}b(Vc,V);function Ai(h){const y=Ba();Ft(y,new Vc(y))}At.STAT_EVENT="statevent";function Ls(h,y){V.call(this,At.STAT_EVENT,h),this.stat=y}b(Ls,V);function Vt(h){const y=Ba();Ft(y,new Ls(y,h))}At.Ja="timingevent";function xi(h,y){V.call(this,At.Ja,h),this.size=y}b(xi,V);function Ii(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function li(){this.g=!0}li.prototype.ua=function(){this.g=!1};function pd(h,y,v,w,k,G){h.info(function(){if(h.g)if(G){var ce="",Me=G.split("&");for(let $e=0;$e<Me.length;$e++){var xt=Me[$e].split("=");if(xt.length>1){const gt=xt[0];xt=xt[1];const $n=gt.split("_");ce=$n.length>=2&&$n[1]=="type"?ce+(gt+"="+xt+"&"):ce+(gt+"=redacted&")}}}else ce=null;else ce=G;return"XMLHTTP REQ ("+w+") [attempt "+k+"]: "+y+`
`+v+`
`+ce})}function Mc(h,y,v,w,k,G,ce){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+k+"]: "+y+`
`+v+`
`+G+" "+ce})}function Ri(h,y,v,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+yd(h,v)+(w?" "+w:"")})}function ks(h,y){h.info(function(){return"TIMEOUT: "+y})}li.prototype.info=function(){};function yd(h,y){if(!h.g)return y;if(!y)return null;try{const G=JSON.parse(y);if(G){for(h=0;h<G.length;h++)if(Array.isArray(G[h])){var v=G[h];if(!(v.length<2)){var w=v[1];if(Array.isArray(w)&&!(w.length<1)){var k=w[0];if(k!="noop"&&k!="stop"&&k!="close")for(let ce=1;ce<w.length;ce++)w[ce]=""}}}}return Vr(G)}catch{return y}}var Bs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Al;function Us(){}b(Us,Nc),Us.prototype.g=function(){return new XMLHttpRequest},Al=new Us;function ir(h){return encodeURIComponent(String(h))}function Oc(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function ui(h,y,v,w){this.j=h,this.i=y,this.l=v,this.S=w||1,this.V=new zs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ci}function ci(){this.i=null,this.g="",this.h=!1}var Mt={},Qt={};function Ni(h,y,v){h.M=1,h.A=qs(Pt(y)),h.u=v,h.R=!0,Ua(h,null)}function Ua(h,y){h.F=Date.now(),Ci(h),h.B=Pt(h.A);var v=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),Ha(v.i,"t",w),h.C=0,v=h.j.L,h.h=new ci,h.g=Xc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new mn(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,w=h.ba;var k="readystatechange";Array.isArray(k)||(k&&(bl[0]=k.toString()),k=bl);for(let G=0;G<k.length;G++){const ce=De(v,k[G],w||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=h.J?D(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Ai(),pd(h.i,h.v,h.B,h.l,h.S,h.u)}ui.prototype.ba=function(h){h=h.target;const y=this.O;y&&di(h)==3?y.j():this.Y(h)},ui.prototype.Y=function(h){try{if(h==this.g)e:{const Me=di(this.g),xt=this.g.ya(),$e=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Me!=4||xt==7||(xt==8||$e<=0?Ai(3):Ai(2)),Di(this);var y=this.g.ca();this.X=y;var v=_d(this);if(this.o=y==200,Mc(this.i,this.v,this.B,this.l,this.S,Me,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,k=this.g;if((w=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(w)){var G=w;break t}}G=null}if(h=G)Ri(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vi(this,h);else{this.o=!1,this.m=3,Vt(12),Mn(this),Kn(this);break e}}if(this.R){h=!0;let gt;for(;!this.K&&this.C<v.length;)if(gt=jc(this,v),gt==Qt){Me==4&&(this.m=4,Vt(14),h=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Mt){this.m=4,Vt(15),Ri(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else Ri(this.i,this.l,gt,null),Vi(this,gt);if(Pc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||v.length!=0||this.h.h||(this.m=1,Vt(16),h=!1),this.o=this.o&&h,!h)Ri(this.i,this.l,v,"[Invalid Chunked Response]"),Mn(this),Kn(this);else if(v.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Bl(ce),ce.P=!0,Vt(11))}}else Ri(this.i,this.l,v,null),Vi(this,v);Me==4&&Mn(this),this.o&&!this.K&&(Me==4?Hc(this.j,this):(this.o=!1,Ci(this)))}else sr(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),Mn(this),Kn(this)}}}catch{}finally{}};function _d(h){if(!Pc(h))return h.g.la();const y=Jt(h.g);if(y==="")return"";let v="";const w=y.length,k=di(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Mn(h),Kn(h),"";h.h.i=new c.TextDecoder}for(let G=0;G<w;G++)h.h.h=!0,v+=h.h.i.decode(y[G],{stream:!(k&&G==w-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function Pc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function jc(h,y){var v=h.C,w=y.indexOf(`
`,v);return w==-1?Qt:(v=Number(y.substring(v,w)),isNaN(v)?Mt:(w+=1,w+v>y.length?Qt:(y=y.slice(w,w+v),h.C=w+v,y)))}ui.prototype.cancel=function(){this.K=!0,Mn(this)};function Ci(h){h.T=Date.now()+h.H,qa(h,h.H)}function qa(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ii(p(h.aa,h),y)}function Di(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ui.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ks(this.i,this.B),this.M!=2&&(Ai(),Vt(17)),Mn(this),this.m=2,Kn(this)):qa(this,this.T-h)};function Kn(h){h.j.I==0||h.K||Hc(h.j,h)}function Mn(h){Di(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Sl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Vi(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Oi(v.h,h))){if(!h.L&&Oi(v.h,h)&&v.I==3){try{var w=v.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var k=w;if(k[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)$a(v),Br(v);else break e;Xs(v),Vt(18)}}else v.xa=k[1],0<v.xa-v.K&&k[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Ii(p(v.Va,v),6e3));Mi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Bi(v,11)}else if((h.L||v.g==h)&&$a(v),!x(y))for(k=v.Ba.g.parse(y),y=0;y<k.length;y++){let $e=k[y];const gt=$e[0];if(!(gt<=v.K))if(v.K=gt,$e=$e[1],v.I==2)if($e[0]=="c"){v.M=$e[1],v.ba=$e[2];const $n=$e[3];$n!=null&&(v.ka=$n,v.j.info("VER="+v.ka));const Ui=$e[4];Ui!=null&&(v.za=Ui,v.j.info("SVER="+v.za));const mi=$e[5];mi!=null&&typeof mi=="number"&&mi>0&&(w=1.5*mi,v.O=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const gi=h.g;if(gi){const $s=gi.g?gi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($s){var G=w.h;G.g||$s.indexOf("spdy")==-1&&$s.indexOf("quic")==-1&&$s.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Rl(G,G.h),G.h=null))}if(w.G){const Za=gi.g?gi.g.getResponseHeader("X-HTTP-Session-Id"):null;Za&&(w.wa=Za,We(w.J,w.G,Za))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),w=v;var ce=h;if(w.na=Yc(w,w.L?w.ba:null,w.W),ce.L){Nl(w.h,ce);var Me=ce,xt=w.O;xt&&(Me.H=xt),Me.D&&(Di(Me),Ci(Me)),w.g=ce}else Fc(w);v.i.length>0&&ki(v)}else $e[0]!="stop"&&$e[0]!="close"||Bi(v,7);else v.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Bi(v,7):Ll(v):$e[0]!="noop"&&v.l&&v.l.qa($e),v.A=0)}}Ai(4)}catch{}}var Ot=class{constructor(h,y){this.g=h,this.map=y}};function xl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Il(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Mi(h){return h.h?1:h.g?h.g.size:0}function Oi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Rl(h,y){h.g?h.g.add(y):h.h=y}function Nl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}xl.prototype.cancel=function(){if(this.i=Cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Cl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return P(h.i)}var zc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fa(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const w=h[v].indexOf("=");let k,G=null;w>=0?(k=h[v].substring(0,w),G=h[v].substring(w+1)):k=h[v],y(k,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function On(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof On?(this.l=h.l,Kt(this,h.j),this.o=h.o,this.g=h.g,Mr(this,h.u),this.h=h.h,Dl(this,Uc(h.i)),this.m=h.m):h&&(y=String(h).match(zc))?(this.l=!1,Kt(this,y[1]||"",!0),this.o=Pi(y[2]||""),this.g=Pi(y[3]||"",!0),Mr(this,y[4]),this.h=Pi(y[5]||"",!0),Dl(this,y[6]||"",!0),this.m=Pi(y[7]||"")):(this.l=!1,this.i=new Pr(null,this.l))}On.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Fs(y,Ga,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Fs(y,Ga,!0),"@"),h.push(ir(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Fs(v,v.charAt(0)=="/"?Vl:Lc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Fs(v,kc)),h.join("")},On.prototype.resolve=function(h){const y=Pt(this);let v=!!h.j;v?Kt(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var w=h.h;if(v)Mr(y,h.u);else if(v=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var k=y.h.lastIndexOf("/");k!=-1&&(w=y.h.slice(0,k+1)+w)}if(k=w,k==".."||k==".")w="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){w=k.lastIndexOf("/",0)==0,k=k.split("/");const G=[];for(let ce=0;ce<k.length;){const Me=k[ce++];Me=="."?w&&ce==k.length&&G.push(""):Me==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),w&&ce==k.length&&G.push("")):(G.push(Me),w=!0)}w=G.join("/")}else w=k}return v?y.h=w:v=h.i.toString()!=="",v?Dl(y,Uc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function Pt(h){return new On(h)}function Kt(h,y,v){h.j=v?Pi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Mr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Dl(h,y,v){y instanceof Pr?(h.i=y,Qa(h.i,h.l)):(v||(y=Fs(y,Or)),h.i=new Pr(y,h.l))}function We(h,y,v){h.i.set(y,v)}function qs(h){return We(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Pi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Fs(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Tn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Tn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ga=/[#\/\?@]/g,Lc=/[#\?:]/g,Vl=/[#\?]/g,Or=/[#\?@]/g,kc=/#/g;function Pr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function bn(h){h.g||(h.g=new Map,h.h=0,h.i&&Fa(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Pr.prototype,s.add=function(h,y){bn(this),this.i=null,h=jr(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Bc(h,y){bn(h),y=jr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Ml(h,y){return bn(h),y=jr(h,y),h.g.has(y)}s.forEach=function(h,y){bn(this),this.g.forEach(function(v,w){v.forEach(function(k){h.call(y,k,w,this)},this)},this)};function Ol(h,y){bn(h);let v=[];if(typeof y=="string")Ml(h,y)&&(v=v.concat(h.g.get(jr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return bn(this),this.i=null,h=jr(this,h),Ml(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Ol(this,h),h.length>0?String(h[0]):y):y};function Ha(h,y,v){Bc(h,y),v.length>0&&(h.i=null,h.g.set(jr(h,y),P(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var v=y[w];const k=ir(v);v=Ol(this,v);for(let G=0;G<v.length;G++){let ce=k;v[G]!==""&&(ce+="="+ir(v[G])),h.push(ce)}}return this.i=h.join("&")};function Uc(h){const y=new Pr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function jr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Qa(h,y){y&&!h.j&&(bn(h),h.i=null,h.g.forEach(function(v,w){const k=w.toLowerCase();w!=k&&(Bc(this,w),Ha(this,k,v))},h)),h.j=y}function hi(h,y){const v=new li;if(c.Image){const w=new Image;w.onload=E(Yn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=E(Yn,v,"TestLoadImage: error",!1,y,w),w.onabort=E(Yn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=E(Yn,v,"TestLoadImage: timeout",!1,y,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function Pl(h,y){const v=new li,w=new AbortController,k=setTimeout(()=>{w.abort(),Yn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(G=>{clearTimeout(k),G.ok?Yn(v,"TestPingServer: ok",!0,y):Yn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(k),Yn(v,"TestPingServer: error",!1,y)})}function Yn(h,y,v,w,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),w(v)}catch{}}function zr(){this.g=new Rc}function ji(h){this.i=h.Sb||null,this.h=h.ab||!1}b(ji,Nc),ji.prototype.g=function(){return new Gs(this.i,this.h)};function Gs(h,y){Dt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Gs,Dt),s=Gs.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,fi(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Lr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ka(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ka(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Lr(this):fi(this),this.readyState==3&&Ka(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Lr(this))},s.Na=function(h){this.g&&(this.response=h,Lr(this))},s.ga=function(){this.g&&Lr(this)};function Lr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,fi(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function fi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Gs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Xn(h){let y="";return pe(h,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function Hs(h,y,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Xn(v),typeof h=="string"?v!=null&&ir(v):We(h,y,v))}function rt(h){Dt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(rt,Dt);var zi=/^https?$/i,jl=["POST","PUT"];s=rt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Al.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(G){Qs(this,G);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var k in w)v.set(k,w[k]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const G of w.keys())v.set(G,w.get(G));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),k=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(jl,y,void 0)>=0)||w||k||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ce]of v)this.g.setRequestHeader(G,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(G){Qs(this,G)}};function Qs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,zl(h),rr(h)}function zl(h){h.A||(h.A=!0,Ft(h,"complete"),Ft(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ft(this,"complete"),Ft(this,"abort"),rr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rr(this,!0)),rt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ks(this):this.Xa())},s.Xa=function(){Ks(this)};function Ks(h){if(h.h&&typeof u<"u"){if(h.v&&di(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ft(h,"readystatechange"),di(h)==4){h.h=!1;try{const G=h.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var w;if(w=G===0){let ce=String(h.D).match(zc)[1]||null;!ce&&c.self&&c.self.location&&(ce=c.self.location.protocol.slice(0,-1)),w=!zi.test(ce?ce.toLowerCase():"")}v=w}if(v)Ft(h,"complete"),Ft(h,"success");else{h.o=6;try{var k=di(h)>2?h.g.statusText:""}catch{k=""}h.l=k+" ["+h.ca()+"]",zl(h)}}finally{rr(h)}}}}function rr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Ft(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function di(h){return h.g?h.g.readyState:0}s.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),gd(y)}};function Jt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function sr(h){const y={};h=(h.g&&di(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(x(h[w]))continue;var v=Oc(h[w]);const k=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=y[k]||[];y[k]=G,G.push(v)}Ne(y,function(w){return w.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function kr(h){this.za=0,this.i=[],this.j=new li,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Li("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Li("baseRetryDelayMs",5e3,h),this.Za=Li("retryDelaySeedMs",1e4,h),this.Ta=Li("forwardChannelMaxRetries",2,h),this.va=Li("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new xl(h&&h.concurrentRequestLimit),this.Ba=new zr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=kr.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,w){Vt(0),this.W=h,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.J=Yc(this,null,this.W),ki(this)};function Ll(h){if(Ya(h),h.I==3){var y=h.V++,v=Pt(h.J);if(We(v,"SID",h.M),We(v,"RID",y),We(v,"TYPE","terminate"),Ys(h,v),y=new ui(h,h.j,y),y.M=2,y.A=qs(Pt(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Xc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ci(y)}Kc(h)}function Br(h){h.g&&(Bl(h),h.g.cancel(),h.g=null)}function Ya(h){Br(h),h.v&&(c.clearTimeout(h.v),h.v=null),$a(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ki(h){if(!Il(h.h)&&!h.m){h.m=!0;var y=h.Ea;Ie||I(),be||(Ie(),be=!0),R.add(y,h),h.D=0}}function Xa(h,y){return Mi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ii(p(h.Ea,h,y),Qc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const k=new ui(this,this.j,h);let G=this.o;if(this.U&&(G?(G=D(G),oe(G,this.U)):G=this.U),this.u!==null||this.R||(k.J=G,G=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=qc(this,k,y),v=Pt(this.J),We(v,"RID",h),We(v,"CVER",22),this.G&&We(v,"X-HTTP-Session-Id",this.G),Ys(this,v),G&&(this.R?y="headers="+ir(Xn(G))+"&"+y:this.u&&Hs(v,this.u,G)),Rl(this.h,k),this.Ra&&We(v,"TYPE","init"),this.S?(We(v,"$req",y),We(v,"SID","null"),k.U=!0,Ni(k,v,null)):Ni(k,v,y),this.I=2}}else this.I==3&&(h?kl(this,h):this.i.length==0||Il(this.h)||kl(this))};function kl(h,y){var v;y?v=y.l:v=h.V++;const w=Pt(h.J);We(w,"SID",h.M),We(w,"RID",v),We(w,"AID",h.K),Ys(h,w),h.u&&h.o&&Hs(w,h.u,h.o),v=new ui(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=qc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Rl(h.h,v),Ni(v,w,y)}function Ys(h,y){h.H&&pe(h.H,function(v,w){We(y,w,v)}),h.l&&pe({},function(v,w){We(y,w,v)})}function qc(h,y,v){v=Math.min(h.i.length,v);const w=h.l?p(h.l.Ka,h.l,h):null;e:{var k=h.i;let Me=-1;for(;;){const xt=["count="+v];Me==-1?v>0?(Me=k[0].g,xt.push("ofs="+Me)):Me=0:xt.push("ofs="+Me);let $e=!0;for(let gt=0;gt<v;gt++){var G=k[gt].g;const $n=k[gt].map;if(G-=Me,G<0)Me=Math.max(0,k[gt].g-100),$e=!1;else try{G="req"+G+"_"||"";try{var ce=$n instanceof Map?$n:Object.entries($n);for(const[Ui,mi]of ce){let gi=mi;m(mi)&&(gi=Vr(mi)),xt.push(G+Ui+"="+encodeURIComponent(gi))}}catch(Ui){throw xt.push(G+"type="+encodeURIComponent("_badmap")),Ui}}catch{w&&w($n)}}if($e){ce=xt.join("&");break e}}ce=void 0}return h=h.i.splice(0,v),y.G=h,ce}function Fc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Ie||I(),be||(Ie(),be=!0),R.add(y,h),h.A=0}}function Xs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ii(p(h.Da,h),Qc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Gc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ii(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),Br(this),Gc(this))};function Bl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Gc(h){h.g=new ui(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Pt(h.na);We(y,"RID","rpc"),We(y,"SID",h.M),We(y,"AID",h.K),We(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&We(y,"TO",h.ia),We(y,"TYPE","xmlhttp"),Ys(h,y),h.u&&h.o&&Hs(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=qs(Pt(y)),v.u=null,v.R=!0,Ua(v,h)}s.Va=function(){this.C!=null&&(this.C=null,Br(this),Xs(this),Vt(19))};function $a(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Hc(h,y){var v=null;if(h.g==y){$a(h),Bl(h),h.g=null;var w=2}else if(Oi(h.h,y))v=y.G,Nl(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var k=h.D;w=Ba(),Ft(w,new xi(w,v)),ki(h)}else Fc(h);else if(k=y.m,k==3||k==0&&y.X>0||!(w==1&&Xa(h,y)||w==2&&Xs(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),k){case 1:Bi(h,5);break;case 4:Bi(h,10);break;case 3:Bi(h,6);break;default:Bi(h,2)}}}function Qc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Bi(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),w=h.Ua;const k=!w;w=new On(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Kt(w,"https"),qs(w),k?hi(w.toString(),v):Pl(w.toString(),v)}else Vt(2);h.I=0,h.l&&h.l.pa(y),Kc(h),Ya(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Kc(h){if(h.I=0,h.ja=[],h.l){const y=Cl(h.h);(y.length!=0||h.i.length!=0)&&($(h.ja,y),$(h.ja,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.oa()}}function Yc(h,y,v){var w=v instanceof On?Pt(v):new On(v);if(w.g!="")y&&(w.g=y+"."+w.g),Mr(w,w.u);else{var k=c.location;w=k.protocol,y=y?y+"."+k.hostname:k.hostname,k=+k.port;const G=new On(null);w&&Kt(G,w),y&&(G.g=y),k&&Mr(G,k),v&&(G.h=v),w=G}return v=h.G,y=h.wa,v&&y&&We(w,v,y),We(w,"VER",h.ka),Ys(h,w),w}function Xc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new rt(new ji({ab:v})):new rt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function $c(){}s=$c.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ur(){}Ur.prototype.g=function(h,y){return new gn(h,y)};function gn(h,y){Dt.call(this),this.g=new kr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!x(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ar(this)}b(gn,Dt),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Ll(this.g)},gn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Vr(h),h=v);y.i.push(new Ot(y.Ya++,h)),y.I==3&&ki(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,Ll(this.g),delete this.g,gn.Z.N.call(this)};function Zc(h){Zt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}b(Zc,Zt);function Jc(){Qn.call(this),this.status=1}b(Jc,Qn);function ar(h){this.g=h}b(ar,$c),ar.prototype.ra=function(){Ft(this.g,"a")},ar.prototype.qa=function(h){Ft(this.g,new Zc(h))},ar.prototype.pa=function(h){Ft(this.g,new Jc)},ar.prototype.oa=function(){Ft(this.g,"b")},Ur.prototype.createWebChannel=Ur.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Ab=function(){return new Ur},wb=function(){return Ba()},Sb=At,Pg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bs.NO_ERROR=0,Bs.TIMEOUT=8,Bs.HTTP_ERROR=6,cf=Bs,wl.COMPLETE="complete",bb=wl,Cc.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,Du=Cc,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,Tb=rt}).apply(typeof nf<"u"?nf:typeof self<"u"?self:typeof window<"u"?window:{});const SE="@firebase/firestore",wE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new _p("@firebase/firestore");function Oo(){return Ss.logLevel}function YI(s){Ss.setLogLevel(s)}function ne(s,...e){if(Ss.logLevel<=Ge.DEBUG){const t=e.map(wp);Ss.debug(`Firestore (${hl}): ${s}`,...t)}}function Nt(s,...e){if(Ss.logLevel<=Ge.ERROR){const t=e.map(wp);Ss.error(`Firestore (${hl}): ${s}`,...t)}}function er(s,...e){if(Ss.logLevel<=Ge.WARN){const t=e.map(wp);Ss.warn(`Firestore (${hl}): ${s}`,...t)}}function wp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,xb(s,r,t)}function xb(s,e,t){let r=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Nt(r),new Error(r)}function ve(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||xb(e,o,r)}function XI(s,e){s||ge(57014,e)}function de(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Pa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $I{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($t.UNAUTHENTICATED)))}shutdown(){}}class ZI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class JI{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let u=new on;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new on,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new on)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new Ib(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class WI{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class eR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new WI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,db(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);const r=u=>{u.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ne("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new AE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=nR(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%62))}return r}}function Ce(s,e){return s<e?-1:s>e?1:0}function jg(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return Sg(o)===Sg(u)?Ce(o,u):Sg(o)?1:-1}return Ce(s.length,e.length)}const iR=55296,rR=57343;function Sg(s){const e=s.charCodeAt(0);return e>=iR&&e<=rR}function Qo(s,e,t){return s.length===e.length&&s.every(((r,o)=>t(r,e[o])))}function Rb(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="__name__";class Ki{constructor(e,t,r){t===void 0?t=0:t>e.length&&ge(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ge(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ki.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ki?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=Ki.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Ce(e.length,t.length)}static compareSegments(e,t){const r=Ki.isNumericId(e),o=Ki.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Ki.extractNumericId(e).compare(Ki.extractNumericId(t)):jg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class ke extends Ki{construct(e,t,r){return new ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new ke(t)}static emptyPath(){return new ke([])}}const sR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Ki{construct(e,t,r){return new _t(e,t,r)}static isValidIdentifier(e){return sR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xE}static keyField(){return new _t([xE])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(r.length===0)throw new te(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new te(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new te(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new te(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(t)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(ke.fromString(e))}static fromName(e){return new he(ke.fromString(e).popFirst(5))}static empty(){return new he(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(s,e,t){if(!t)throw new te(F.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Nb(s,e,t,r){if(e===!0&&r===!0)throw new te(F.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function IE(s){if(!he.isDocumentKey(s))throw new te(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function RE(s){if(he.isDocumentKey(s))throw new te(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Cb(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function qf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ge(12329,{type:typeof s})}function Ke(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new te(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qf(s);throw new te(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function Db(s,e){if(e<=0)throw new te(F.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(s,e){const t={typeString:s};return e&&(t.value=e),t}function dc(s,e){if(!Cb(s))throw new te(F.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${r}' field to equal '${u.value}'`;break}}if(t)throw new te(F.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=-62135596800,CE=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*CE);return new Je(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<NE)throw new te(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CE}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dc(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-NE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:Ut("string",Je._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Je(0,0))}static max(){return new Te(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=-1;class Af{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function zg(s){return s.fields.find((e=>e.kind===2))}function ma(s){return s.fields.filter((e=>e.kind!==2))}Af.UNKNOWN_ID=-1;class hf{constructor(e,t){this.fieldPath=e,this.kind=t}}class $u{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $u(0,Gn.min())}}function Vb(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(r===1e9?new Je(t+1,0):new Je(t,r));return new Gn(o,he.empty(),e)}function Mb(s){return new Gn(s.readTime,s.key,Ko)}class Gn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Gn(Te.min(),he.empty(),Ko)}static max(){return new Gn(Te.max(),he.empty(),Ko)}}function Ip(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(s.documentKey,e.documentKey),t!==0?t:Ce(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ds(s){if(s.code!==F.FAILED_PRECONDITION||s.message!==Ob)throw s;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):L.reject(t)}static resolve(e){return new L(((t,r)=>{t(e)}))}static reject(e){return new L(((t,r)=>{r(e)}))}static waitFor(e){return new L(((t,r)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&t()}),(g=>r(g)))})),c=!0,u===o&&t()}))}static or(e){let t=L.resolve(!1);for(const r of e)t=t.next((o=>o?L.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,u)=>{r.push(t.call(this,o,u))})),this.waitFor(r)}static mapArray(e,t){return new L(((r,o)=>{const u=e.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;t(e[p]).next((E=>{c[p]=E,++m,m===u&&r(c)}),(E=>o(E)))}}))}static doWhile(e,t){return new L(((r,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="SimpleDb";class Ff{static open(e,t,r,o){try{return new Ff(t,e.transaction(o,r))}catch(u){throw new zu(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new on,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new zu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Rp(r.target.error);this.S.reject(new zu(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ne(qn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new oR(t)}}class Zi{static delete(e){return ne(qn,"Removing database:",e),pa(mp().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!sb())return!1;if(Zi.F())return!0;const e=Sf(),t=Zi.M(e),r=0<t&&t<10,o=jb(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Zi.M(Sf())===12.2&&Nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ne(qn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;t(c)},o.onblocked=()=>{r(new zu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new te(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new te(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new zu(e,c))},o.onupgradeneeded=u=>{ne(qn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{ne(qn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const m=Ff.open(this.db,e,u?"readonly":"readwrite",r),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),L.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(ne(qn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function jb(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class aR{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return pa(this.U.delete())}}class zu extends te{constructor(e,t){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vs(s){return s.name==="IndexedDbTransactionError"}class oR{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ne(qn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ne(qn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pa(r)}add(e){return ne(qn,"ADD",this.store.name,e,e),pa(this.store.add(e))}get(e){return pa(this.store.get(e)).next((t=>(t===void 0&&(t=null),ne(qn,"GET",this.store.name,e,t),t)))}delete(e){return ne(qn,"DELETE",this.store.name,e),pa(this.store.delete(e))}count(){return ne(qn,"COUNT",this.store.name),pa(this.store.count())}J(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new L(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(r),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new L(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Z(e,t){ne(qn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,((u,c,m)=>m.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}te(e){const t=this.cursor({});return new L(((r,o)=>{t.onerror=u=>{const c=Rp(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}H(e,t){const r=[];return new L(((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new aR(m),p=t(m.primaryKey,m.value,g);if(p instanceof L){const E=p.catch((b=>(g.done(),L.reject(b))));r.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>L.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pa(s){return new L(((e,t)=>{s.onsuccess=r=>{const o=r.target.result;e(o)},s.onerror=r=>{const o=Rp(r.target.error);t(o)}}))}let DE=!1;function Rp(s){const e=Zi.M(Sf());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DE||(DE=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Lu="IndexBackfiller";class lR{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ne(Lu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ne(Lu,`Documents written: ${t}`)}catch(t){Vs(t)?ne(Lu,"Ignoring IndexedDB error during index backfill: ",t):await Ds(t)}await this.re(6e4)}))}}class uR{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let o=t,u=!0;return L.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return ne(Lu,`Processing collection: ${c}`),this.oe(e,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>t-o))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(o,u))).next((m=>(ne(Lu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((o,u)=>{const c=Mb(u);Ip(c,r)>0&&(r=c)})),new Gn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=-1;function mc(s){return s==null}function Zu(s){return s===0&&1/s==-1/0}function zb(s){return typeof s=="number"&&Number.isInteger(s)&&!Zu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="";function dn(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=VE(e)),e=cR(s.get(t),e);return VE(e)}function cR(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case xf:t+="";break;default:t+=u}}return t}function VE(s){return s+xf+""}function Xi(s){const e=s.length;if(ve(e>=2,64408,{path:s}),e===2)return ve(s.charAt(0)===xf&&s.charAt(1)==="",56145,{path:s}),ke.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=s.indexOf(xf,u);switch((c<0||c>t)&&ge(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:ge(61167,{path:s})}u=c+2}return new ke(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="remoteDocuments",gc="owner",Ro="owner",Ju="mutationQueues",hR="userId",Ti="mutations",ME="batchId",Ta="userMutationsIndex",OE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(s,e){return[s,dn(e)]}function Lb(s,e,t){return[s,dn(e),t]}const fR={},Yo="documentMutations",If="remoteDocumentsV14",dR=["prefixPath","collectionGroup","readTime","documentId"],df="documentKeyIndex",mR=["prefixPath","collectionGroup","documentId"],kb="collectionGroupIndex",gR=["collectionGroup","readTime","prefixPath","documentId"],Wu="remoteDocumentGlobal",Lg="remoteDocumentGlobalKey",Xo="targets",Bb="queryTargetsIndex",pR=["canonicalId","targetId"],$o="targetDocuments",yR=["targetId","path"],Np="documentTargetsIndex",_R=["path","targetId"],Rf="targetGlobalKey",wa="targetGlobal",ec="collectionParents",vR=["collectionId","parent"],Zo="clientMetadata",ER="clientId",Gf="bundles",TR="bundleId",Hf="namedQueries",bR="name",Cp="indexConfiguration",SR="indexId",kg="collectionGroupIndex",wR="collectionGroup",ku="indexState",AR=["indexId","uid"],Ub="sequenceNumberIndex",xR=["uid","sequenceNumber"],Bu="indexEntries",IR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qb="documentKeyIndex",RR=["indexId","uid","orderedDocumentKey"],Qf="documentOverlays",NR=["userId","collectionPath","documentId"],Bg="collectionPathOverlayIndex",CR=["userId","collectionPath","largestBatchId"],Fb="collectionGroupOverlayIndex",DR=["userId","collectionGroup","largestBatchId"],Dp="globals",VR="name",Gb=[Ju,Ti,Yo,ga,Xo,gc,wa,$o,Zo,Wu,ec,Gf,Hf],MR=[...Gb,Qf],Hb=[Ju,Ti,Yo,If,Xo,gc,wa,$o,Zo,Wu,ec,Gf,Hf,Qf],Qb=Hb,Vp=[...Qb,Cp,ku,Bu],OR=Vp,Kb=[...Vp,Dp],PR=Kb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends Pb{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Ht(s,e){const t=de(s);return Zi.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Ms(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Yb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rf(this.root,e,this.comparator,!1)}getReverseIterator(){return new rf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rf(this.root,e,this.comparator,!0)}}class rf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??sn.RED,this.left=o??sn.EMPTY,this.right=u??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new sn(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,t,r,o,u){return this}insert(e,t,r){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jE(this.data.getIterator())}getIteratorFrom(e){return new jE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new it(this.comparator);return t.data=e,t}}class jE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function No(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new Nn([])}unionWith(e){let t=new it(_t.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Xb("Invalid base64 string: "+u):u}})(e);return new St(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new St(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const zR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(s){if(ve(!!s,39018),typeof s=="string"){let e=0;const t=zR.exec(s);if(ve(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(s.seconds),nanos:yt(s.nanos)}}function yt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function xr(s){return typeof s=="string"?St.fromBase64String(s):St.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="server_timestamp",Zb="__type__",Jb="__previous_value__",Wb="__local_write_time__";function Kf(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[Zb])==null?void 0:r.stringValue)===$b}function Yf(s){const e=s.mapValue.fields[Jb];return Kf(e)?Yf(e):e}function tc(s){const e=Ar(s.mapValue.fields[Wb].timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t,r,o,u,c,m,g,p,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const qg="(default)";class ws{constructor(e,t){this.projectId=e,this.database=t||qg}static empty(){return new ws("","")}get isDefaultDatabase(){return this.database===qg}isEqual(e){return e instanceof ws&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="__type__",eS="__max__",gs={mapValue:{fields:{__type__:{stringValue:eS}}}},Op="__vector__",Jo="value",mf={nullValue:"NULL_VALUE"};function As(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Kf(s)?4:tS(s)?9007199254740991:Xf(s)?10:11:ge(28295,{value:s})}function tr(s,e){if(s===e)return!0;const t=As(s);if(t!==As(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return tc(s).isEqual(tc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=Ar(o.timestampValue),m=Ar(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return xr(o.bytesValue).isEqual(xr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return yt(o.geoPointValue.latitude)===yt(u.geoPointValue.latitude)&&yt(o.geoPointValue.longitude)===yt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return yt(o.integerValue)===yt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=yt(o.doubleValue),m=yt(u.doubleValue);return c===m?Zu(c)===Zu(m):isNaN(c)&&isNaN(m)}return!1})(s,e);case 9:return Qo(s.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(PE(c)!==PE(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!tr(c[g],m[g])))return!1;return!0})(s,e);default:return ge(52216,{left:s})}}function nc(s,e){return(s.values||[]).find((t=>tr(t,e)))!==void 0}function xs(s,e){if(s===e)return 0;const t=As(s),r=As(e);if(t!==r)return Ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(s.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=yt(u.integerValue||u.doubleValue),g=yt(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return zE(s.timestampValue,e.timestampValue);case 4:return zE(tc(s),tc(e));case 5:return jg(s.stringValue,e.stringValue);case 6:return(function(u,c){const m=xr(u),g=xr(c);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=Ce(m[p],g[p]);if(E!==0)return E}return Ce(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=Ce(yt(u.latitude),yt(c.latitude));return m!==0?m:Ce(yt(u.longitude),yt(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return LE(s.arrayValue,e.arrayValue);case 10:return(function(u,c){var A,P,$,Z;const m=u.fields||{},g=c.fields||{},p=(A=m[Jo])==null?void 0:A.arrayValue,E=(P=g[Jo])==null?void 0:P.arrayValue,b=Ce((($=p==null?void 0:p.values)==null?void 0:$.length)||0,((Z=E==null?void 0:E.values)==null?void 0:Z.length)||0);return b!==0?b:LE(p,E)})(s.mapValue,e.mapValue);case 11:return(function(u,c){if(u===gs.mapValue&&c===gs.mapValue)return 0;if(u===gs.mapValue)return 1;if(c===gs.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let b=0;b<g.length&&b<E.length;++b){const A=jg(g[b],E[b]);if(A!==0)return A;const P=xs(m[g[b]],p[E[b]]);if(P!==0)return P}return Ce(g.length,E.length)})(s.mapValue,e.mapValue);default:throw ge(23264,{he:t})}}function zE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ce(s,e);const t=Ar(s),r=Ar(e),o=Ce(t.seconds,r.seconds);return o!==0?o:Ce(t.nanos,r.nanos)}function LE(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const u=xs(t[o],r[o]);if(u)return u}return Ce(t.length,r.length)}function Wo(s){return Fg(s)}function Fg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=Ar(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return xr(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return he.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",o=!0;for(const u of t.values||[])o?o=!1:r+=",",r+=Fg(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${Fg(t.fields[c])}`;return o+"}"})(s.mapValue):ge(61005,{value:s})}function gf(s){switch(As(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yf(s);return e?16+gf(e):16;case 5:return 2*s.stringValue.length;case 6:return xr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+gf(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Ms(r.fields,((u,c)=>{o+=u.length+gf(c)})),o})(s.mapValue);default:throw ge(13486,{value:s})}}function xa(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Gg(s){return!!s&&"integerValue"in s}function ic(s){return!!s&&"arrayValue"in s}function kE(s){return!!s&&"nullValue"in s}function BE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function pf(s){return!!s&&"mapValue"in s}function Xf(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[Mp])==null?void 0:r.stringValue)===Op}function Uu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ms(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Uu(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uu(s.arrayValue.values[t]);return e}return{...s}}function tS(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===eS}const nS={mapValue:{fields:{[Mp]:{stringValue:Op},[Jo]:{arrayValue:{}}}}};function kR(s){return"nullValue"in s?mf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?xa(ws.empty(),he.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Xf(s)?nS:{mapValue:{}}:ge(35942,{value:s})}function BR(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?xa(ws.empty(),he.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?nS:"mapValue"in s?Xf(s)?{mapValue:{}}:gs:ge(61959,{value:s})}function UE(s,e){const t=xs(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function qE(s,e){const t=xs(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uu(t)}setAll(e){let t=_t.emptyPath(),r={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=m.popLast()}c?r[m.lastSegment()]=Uu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());pf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];pf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ms(t,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new an(Uu(this.value))}}function iS(s){const e=[];return Ms(s.fields,((t,r)=>{const o=new _t([t]);if(pf(r)){const u=iS(r.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t,r,o,u,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new mt(e,0,Te.min(),Te.min(),Te.min(),an.empty(),0)}static newFoundDocument(e,t,r,o){return new mt(e,1,t,Te.min(),r,o,0)}static newNoDocument(e,t){return new mt(e,2,t,Te.min(),Te.min(),an.empty(),0)}static newUnknownDocument(e,t){return new mt(e,3,t,Te.min(),Te.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t){this.position=e,this.inclusive=t}}function FE(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],c=s.position[o];if(u.field.isKeyField()?r=he.comparator(he.fromName(c.referenceValue),t.key):r=xs(c,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function GE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!tr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t="asc"){this.field=e,this.dir=t}}function UR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{}class qe extends rS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new qR(e,t,r):t==="array-contains"?new HR(e,r):t==="in"?new cS(e,r):t==="not-in"?new QR(e,r):t==="array-contains-any"?new KR(e,r):new qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new FR(e,r):new GR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xs(t,this.value)):t!==null&&As(this.value)===As(t)&&this.matchesComparison(xs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nt extends rS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new nt(e,t)}matches(e){return el(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function el(s){return s.op==="and"}function Hg(s){return s.op==="or"}function Pp(s){return sS(s)&&el(s)}function sS(s){for(const e of s.filters)if(e instanceof nt)return!1;return!0}function Qg(s){if(s instanceof qe)return s.field.canonicalString()+s.op.toString()+Wo(s.value);if(Pp(s))return s.filters.map((e=>Qg(e))).join(",");{const e=s.filters.map((t=>Qg(t))).join(",");return`${s.op}(${e})`}}function aS(s,e){return s instanceof qe?(function(r,o){return o instanceof qe&&r.op===o.op&&r.field.isEqual(o.field)&&tr(r.value,o.value)})(s,e):s instanceof nt?(function(r,o){return o instanceof nt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&aS(c,o.filters[m])),!0):!1})(s,e):void ge(19439)}function oS(s,e){const t=s.filters.concat(e);return nt.create(t,s.op)}function lS(s){return s instanceof qe?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wo(t.value)}`})(s):s instanceof nt?(function(t){return t.op.toString()+" {"+t.getFilters().map(lS).join(" ,")+"}"})(s):"Filter"}class qR extends qe{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class FR extends qe{constructor(e,t){super(e,"in",t),this.keys=uS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class GR extends qe{constructor(e,t){super(e,"not-in",t),this.keys=uS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function uS(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>he.fromName(r.referenceValue)))}class HR extends qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ic(t)&&nc(t.arrayValue,this.value)}}class cS extends qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nc(this.value.arrayValue,t)}}class QR extends qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nc(this.value.arrayValue,t)}}class KR extends qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ic(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>nc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t=null,r=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function Kg(s,e=null,t=[],r=[],o=null,u=null,c=null){return new YR(s,e,t,r,o,u,c)}function Ia(s){const e=de(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Qg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),mc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Wo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Wo(r))).join(",")),e.Te=t}return e.Te}function pc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!UR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!aS(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!GE(s.startAt,e.startAt)&&GE(s.endAt,e.endAt)}function Nf(s){return he.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Cf(s,e){return s.filters.filter((t=>t instanceof qe&&t.field.isEqual(e)))}function HE(s,e,t){let r=mf,o=!0;for(const u of Cf(s,e)){let c=mf,m=!0;switch(u.op){case"<":case"<=":c=kR(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=mf}UE({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];UE({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function QE(s,e,t){let r=gs,o=!0;for(const u of Cf(s,e)){let c=gs,m=!0;switch(u.op){case">=":case">":c=BR(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=gs}qE({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];qE({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,t=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hS(s,e,t,r,o,u,c,m){return new Ir(s,e,t,r,o,u,c,m)}function fl(s){return new Ir(s)}function KE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function jp(s){return s.collectionGroup!==null}function Bo(s){const e=de(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new it(_t.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new rc(u,r))})),t.has(_t.keyField().canonicalString())||e.Ie.push(new rc(_t.keyField(),r))}return e.Ie}function vn(s){const e=de(s);return e.Ee||(e.Ee=XR(e,Bo(s))),e.Ee}function XR(s,e){if(s.limitType==="F")return Kg(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new rc(o.field,u)}));const t=s.endAt?new Is(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Is(s.startAt.position,s.startAt.inclusive):null;return Kg(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function Yg(s,e){const t=s.filters.concat([e]);return new Ir(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Df(s,e,t){return new Ir(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function yc(s,e){return pc(vn(s),vn(e))&&s.limitType===e.limitType}function fS(s){return`${Ia(vn(s))}|lt:${s.limitType}`}function Po(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>lS(o))).join(", ")}]`),mc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>Wo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>Wo(o))).join(",")),`Target(${r})`})(vn(s))}; limitType=${s.limitType})`}function _c(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):he.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of Bo(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const p=FE(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,Bo(r),o)||r.endAt&&!(function(c,m,g){const p=FE(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,Bo(r),o))})(s,e)}function dS(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function mS(s){return(e,t)=>{let r=!1;for(const o of Bo(s)){const u=$R(o,e,t);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function $R(s,e,t){const r=s.field.isKeyField()?he.comparator(e.key,t.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?xs(g,p):ge(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,((t,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return Yb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new ht(he.comparator);function Cn(){return ZR}const gS=new ht(he.comparator);function Vu(...s){let e=gS;for(const t of s)e=e.insert(t.key,t);return e}function pS(s){let e=gS;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function $i(){return qu()}function yS(){return qu()}function qu(){return new Rr((s=>s.toString()),((s,e)=>s.isEqual(e)))}const JR=new ht(he.comparator),WR=new it(he.comparator);function Pe(...s){let e=WR;for(const t of s)e=e.add(t);return e}const e2=new it(Ce);function zp(){return e2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zu(e)?"-0":e}}function _S(s){return{integerValue:""+s}}function vS(s,e){return zb(e)?_S(e):Lp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this._=void 0}}function t2(s,e,t){return s instanceof tl?(function(o,u){const c={fields:{[Zb]:{stringValue:$b},[Wb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Kf(u)&&(u=Yf(u)),u&&(c.fields[Jb]=u),{mapValue:c}})(t,e):s instanceof Ra?TS(s,e):s instanceof Na?bS(s,e):(function(o,u){const c=ES(o,u),m=YE(c)+YE(o.Ae);return Gg(c)&&Gg(o.Ae)?_S(m):Lp(o.serializer,m)})(s,e)}function n2(s,e,t){return s instanceof Ra?TS(s,e):s instanceof Na?bS(s,e):t}function ES(s,e){return s instanceof nl?(function(r){return Gg(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class tl extends $f{}class Ra extends $f{constructor(e){super(),this.elements=e}}function TS(s,e){const t=SS(e);for(const r of s.elements)t.some((o=>tr(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Na extends $f{constructor(e){super(),this.elements=e}}function bS(s,e){let t=SS(e);for(const r of s.elements)t=t.filter((o=>!tr(o,r)));return{arrayValue:{values:t}}}class nl extends $f{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function YE(s){return yt(s.integerValue||s.doubleValue)}function SS(s){return ic(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t){this.field=e,this.transform=t}}function i2(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof Ra&&o instanceof Ra||r instanceof Na&&o instanceof Na?Qo(r.elements,o.elements,tr):r instanceof nl&&o instanceof nl?tr(r.Ae,o.Ae):r instanceof tl&&o instanceof tl})(s.transform,e.transform)}class r2{constructor(e,t){this.version=e,this.transformResults=t}}class vt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Zf{}function wS(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new ml(s.key,vt.none()):new dl(s.key,s.data,vt.none());{const t=s.data,r=an.empty();let o=new it(_t.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new Nr(s.key,r,new Nn(o.toArray()),vt.none())}}function s2(s,e,t){s instanceof dl?(function(o,u,c){const m=o.value.clone(),g=$E(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,e,t):s instanceof Nr?(function(o,u,c){if(!yf(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=$E(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(AS(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Fu(s,e,t,r){return s instanceof dl?(function(u,c,m,g){if(!yf(u.precondition,c))return m;const p=u.value.clone(),E=ZE(u.fieldTransforms,g,c);return p.setAll(E),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,e,t,r):s instanceof Nr?(function(u,c,m,g){if(!yf(u.precondition,c))return m;const p=ZE(u.fieldTransforms,g,c),E=c.data;return E.setAll(AS(u)),E.setAll(p),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((b=>b.field)))})(s,e,t,r):(function(u,c,m){return yf(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,e,t)}function a2(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=ES(r.transform,o||null);u!=null&&(t===null&&(t=an.empty()),t.set(r.field,u))}return t||null}function XE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Qo(r,o,((u,c)=>i2(u,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class dl extends Zf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Nr extends Zf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function AS(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function $E(s,e,t){const r=new Map;ve(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],c=u.transform,m=e.data.field(u.field);r.set(u.field,n2(c,m,t[o]))}return r}function ZE(s,e,t){const r=new Map;for(const o of s){const u=o.transform,c=t.data.field(o.field);r.set(o.field,t2(u,c,e))}return r}class ml extends Zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kp extends Zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&s2(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yS();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const g=wS(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(Te.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,((t,r)=>XE(t,r)))&&Qo(this.baseMutations,e.baseMutations,((t,r)=>XE(t,r)))}}class Up{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return JR})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new Up(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Qe;function xS(s){switch(s){case F.OK:return ge(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ge(15467,{code:s})}}function IS(s){if(s===void 0)return Nt("GRPC error has no .code"),F.UNKNOWN;switch(s){case Bt.OK:return F.OK;case Bt.CANCELLED:return F.CANCELLED;case Bt.UNKNOWN:return F.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return F.INTERNAL;case Bt.UNAVAILABLE:return F.UNAVAILABLE;case Bt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Bt.NOT_FOUND:return F.NOT_FOUND;case Bt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Bt.ABORTED:return F.ABORTED;case Bt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Bt.DATA_LOSS:return F.DATA_LOSS;default:return ge(39323,{code:s})}}(Qe=Bt||(Bt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new _s([4294967295,4294967295],0);function JE(s){const e=RS().encode(s),t=new Eb;return t.update(e),new Uint8Array(t.digest())}function WE(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new _s([t,r],0),new _s([o,u],0)]}class Fp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mu(`Invalid padding: ${t}`);if(r<0)throw new Mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_s.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(_s.fromNumber(r)));return o.compare(l2)===1&&(o=new _s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=JE(e),[r,o]=WE(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new Fp(u,o,t);return r.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=JE(e),[r,o]=WE(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ec(Te.min(),o,new ht(Ce),Cn(),Pe())}}class Tc{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Tc(r,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class NS{constructor(e,t){this.targetId=e,this.Ce=t}}class CS{constructor(e,t,r=St.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class eT{constructor(){this.ve=0,this.Fe=tT(),this.Me=St.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),t=Pe(),r=Pe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ge(38017,{changeType:u})}})),new Tc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=tT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class u2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cn(),this.Je=sf(),this.He=sf(),this.Ye=new ht(Ce)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Nf(u))if(r===0){const c=new he(u.path);this.et(t,c,mt.newNoDocument(c,Te.min()))}else ve(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=t;let c,m;try{c=xr(r).toUint8Array()}catch(g){if(g instanceof Xb)return er("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Fp(c,o,u)}catch(g){return er(g instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Nf(m.target)){const g=new he(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,mt.newNoDocument(g,e))}u.Be&&(t.set(c,u.ke()),u.qe())}}));let r=Pe();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new Ec(e,t,this.Ye,this.je,r);return this.je=Cn(),this.Je=sf(),this.He=sf(),this.Ye=new ht(Ce),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new eT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new it(Ce),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new it(Ce),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function sf(){return new ht(he.comparator)}function tT(){return new ht(he.comparator)}const c2={asc:"ASCENDING",desc:"DESCENDING"},h2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f2={and:"AND",or:"OR"};class d2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xg(s,e){return s.useProto3Json||mc(e)?e:{value:e}}function il(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DS(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function m2(s,e){return il(s,e.toTimestamp())}function Ct(s){return ve(!!s,49232),Te.fromTimestamp((function(t){const r=Ar(t);return new Je(r.seconds,r.nanos)})(s))}function Gp(s,e){return $g(s,e).canonicalString()}function $g(s,e){const t=(function(o){return new ke(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function VS(s){const e=ke.fromString(s);return ve(qS(e),10190,{key:e.toString()}),e}function sc(s,e){return Gp(s.databaseId,e.path)}function Ji(s,e){const t=VS(e);if(t.get(1)!==s.databaseId.projectId)throw new te(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new te(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new he(PS(t))}function MS(s,e){return Gp(s.databaseId,e)}function OS(s){const e=VS(s);return e.length===4?ke.emptyPath():PS(e)}function Zg(s){return new ke(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function PS(s){return ve(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function nT(s,e,t){return{name:sc(s,e),fields:t.value.mapValue.fields}}function jS(s,e,t){const r=Ji(s,e.name),o=Ct(e.updateTime),u=e.createTime?Ct(e.createTime):Te.min(),c=new an({mapValue:{fields:e.fields}}),m=mt.newFoundDocument(r,o,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function g2(s,e){return"found"in e?(function(r,o){ve(!!o.found,43571),o.found.name,o.found.updateTime;const u=Ji(r,o.found.name),c=Ct(o.found.updateTime),m=o.found.createTime?Ct(o.found.createTime):Te.min(),g=new an({mapValue:{fields:o.found.fields}});return mt.newFoundDocument(u,c,m,g)})(s,e):"missing"in e?(function(r,o){ve(!!o.missing,3894),ve(!!o.readTime,22933);const u=Ji(r,o.missing),c=Ct(o.readTime);return mt.newNoDocument(u,c)})(s,e):ge(7234,{result:e})}function p2(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ge(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(ve(E===void 0||typeof E=="string",58123),St.fromBase64String(E||"")):(ve(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),St.fromUint8Array(E||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const E=p.code===void 0?F.UNKNOWN:IS(p.code);return new te(E,p.message||"")})(c);t=new CS(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Ji(s,r.document.name),u=Ct(r.document.updateTime),c=r.document.createTime?Ct(r.document.createTime):Te.min(),m=new an({mapValue:{fields:r.document.fields}}),g=mt.newFoundDocument(o,u,c,m),p=r.targetIds||[],E=r.removedTargetIds||[];t=new _f(p,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Ji(s,r.document),u=r.readTime?Ct(r.readTime):Te.min(),c=mt.newNoDocument(o,u),m=r.removedTargetIds||[];t=new _f([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Ji(s,r.document),u=r.removedTargetIds||[];t=new _f([],u,o,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new o2(o,u),m=r.targetId;t=new NS(m,c)}}return t}function ac(s,e){let t;if(e instanceof dl)t={update:nT(s,e.key,e.value)};else if(e instanceof ml)t={delete:sc(s,e.key)};else if(e instanceof Nr)t={update:nT(s,e.key,e.data),updateMask:b2(e.fieldMask)};else{if(!(e instanceof kp))return ge(16599,{Vt:e.type});t={verify:sc(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof tl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ra)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Na)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof nl)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw ge(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:m2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ge(27497)})(s,e.precondition)),t}function Jg(s,e){const t=e.currentDocument?(function(u){return u.updateTime!==void 0?vt.updateTime(Ct(u.updateTime)):u.exists!==void 0?vt.exists(u.exists):vt.none()})(e.currentDocument):vt.none(),r=e.updateTransforms?e.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)ve(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new tl;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new Ra(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new Na(E)}else"increment"in m?g=new nl(c,m.increment):ge(16584,{proto:m});const p=_t.fromServerFormat(m.fieldPath);return new vc(p,g)})(s,o))):[];if(e.update){e.update.name;const o=Ji(s,e.update.name),u=new an({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new Nn(p.map((E=>_t.fromServerFormat(E))))})(e.updateMask);return new Nr(o,u,c,t,r)}return new dl(o,u,t,r)}if(e.delete){const o=Ji(s,e.delete);return new ml(o,t)}if(e.verify){const o=Ji(s,e.verify);return new kp(o,t)}return ge(1463,{proto:e})}function y2(s,e){return s&&s.length>0?(ve(e!==void 0,14353),s.map((t=>(function(o,u){let c=o.updateTime?Ct(o.updateTime):Ct(u);return c.isEqual(Te.min())&&(c=Ct(u)),new r2(c,o.transformResults||[])})(t,e)))):[]}function zS(s,e){return{documents:[MS(s,e.path)]}}function LS(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=MS(s,o);const u=(function(p){if(p.length!==0)return US(nt.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((E=>(function(A){return{field:jo(A.field),direction:v2(A.dir)}})(E)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=Xg(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function kS(s){let e=OS(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ve(r===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=(function(b){const A=BS(b);return A instanceof nt&&Pp(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((A=>(function($){return new rc(zo($.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let A;return A=typeof b=="object"?b.value:b,mc(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(b){const A=!!b.before,P=b.values||[];return new Is(P,A)})(t.startAt));let p=null;return t.endAt&&(p=(function(b){const A=!b.before,P=b.values||[];return new Is(P,A)})(t.endAt)),hS(e,o,c,u,m,"F",g,p)}function _2(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BS(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=zo(t.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=zo(t.unaryFilter.field);return qe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=zo(t.unaryFilter.field);return qe.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=zo(t.unaryFilter.field);return qe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(s):s.fieldFilter!==void 0?(function(t){return qe.create(zo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return nt.create(t.compositeFilter.filters.map((r=>BS(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(t.compositeFilter.op))})(s):ge(30097,{filter:s})}function v2(s){return c2[s]}function E2(s){return h2[s]}function T2(s){return f2[s]}function jo(s){return{fieldPath:s.canonicalString()}}function zo(s){return _t.fromServerFormat(s.fieldPath)}function US(s){return s instanceof qe?(function(t){if(t.op==="=="){if(BE(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NAN"}};if(kE(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BE(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NAN"}};if(kE(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(t.field),op:E2(t.op),value:t.value}}})(s):s instanceof nt?(function(t){const r=t.getFilters().map((o=>US(o)));return r.length===1?r[0]:{compositeFilter:{op:T2(t.op),filters:r}}})(s):ge(54877,{filter:s})}function b2(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function qS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t,r,o,u=Te.min(),c=Te.min(),m=St.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.yt=e}}function S2(s,e){let t;if(e.document)t=jS(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=he.fromSegments(e.noDocument.path),o=Da(e.noDocument.readTime);t=mt.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge(56709);{const r=he.fromSegments(e.unknownDocument.path),o=Da(e.unknownDocument.version);t=mt.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime((function(o){const u=new Je(o[0],o[1]);return Te.fromTimestamp(u)})(e.readTime)),t}function iT(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(u,c){return{name:sc(u,c.key),fields:c.data.value.mapValue.fields,updateTime:il(u,c.version.toTimestamp()),createTime:il(u,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ca(e.version)};else{if(!e.isUnknownDocument())return ge(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Ca(e.version)}}return r}function Vf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Ca(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Da(s){const e=new Je(s.seconds,s.nanoseconds);return Te.fromTimestamp(e)}function ya(s,e){const t=(e.baseMutations||[]).map((u=>Jg(s.yt,u)));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const m=e.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const r=e.mutations.map((u=>Jg(s.yt,u))),o=Je.fromMillis(e.localWriteTimeMs);return new Bp(e.batchId,o,t,r)}function Ou(s){const e=Da(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Da(s.lastLimboFreeSnapshotVersion):Te.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return ve(c===1,1966,{count:c}),vn(fl(OS(u.documents[0])))})(s.query):(function(u){return vn(kS(u))})(s.query),new br(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,St.fromBase64String(s.resumeToken))}function GS(s,e){const t=Ca(e.snapshotVersion),r=Ca(e.lastLimboFreeSnapshotVersion);let o;o=Nf(e.target)?zS(s.yt,e.target):LS(s.yt,e.target).ft;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ia(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Hp(s){const e=kS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Df(e,e.limit,"L"):e}function wg(s,e){return new qp(e.largestBatchId,Jg(s.yt,e.overlayMutation))}function rT(s,e){const t=e.path.lastSegment();return[s,dn(e.path.popLast()),t]}function sT(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:Ca(r.readTime),documentKey:dn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{getBundleMetadata(e,t){return aT(e).get(t).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:Da(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(e,t){return aT(e).put((function(o){return{bundleId:o.id,createTime:Ca(Ct(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return oT(e).get(t).next((r=>{if(r)return(function(u){return{name:u.name,query:Hp(u.bundledQuery),readTime:Da(u.readTime)}})(r)}))}saveNamedQuery(e,t){return oT(e).put((function(o){return{name:o.name,readTime:Ca(Ct(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function aT(s){return Ht(s,Gf)}function oT(s){return Ht(s,Hf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Jf(e,r)}getOverlay(e,t){return Au(e).get(rT(this.userId,t)).next((r=>r?wg(this.serializer,r):null))}getOverlays(e,t){const r=$i();return L.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){const o=[];return r.forEach(((u,c)=>{const m=new qp(t,c);o.push(this.St(e,m))})),L.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach((c=>o.add(dn(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Au(e).Z(Bg,m))})),L.waitFor(u)}getOverlaysForCollection(e,t,r){const o=$i(),u=dn(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Au(e).J(Bg,c).next((m=>{for(const g of m){const p=wg(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(e,t,r,o){const u=$i();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Au(e).ee({index:Fb,range:m},((g,p,E)=>{const b=wg(this.serializer,p);u.size()<o||b.largestBatchId===c?(u.set(b.getKey(),b),c=b.largestBatchId):E.done()})).next((()=>u))}St(e,t){return Au(e).put((function(o,u,c){const[m,g,p]=rT(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:ac(o.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Au(s){return Ht(s,Qf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{bt(e){return Ht(e,Dp)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?St.fromUint8Array(r):St.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(yt(e.integerValue));else if("doubleValue"in e){const r=yt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Zu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ar(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(xr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?tS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Xf(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ge(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const o of Object.keys(r))this.Ot(o,t),this.Ct(r[o],t)}kt(e,t){var c,m;const r=e.fields||{};this.Ft(t,53);const o=Jo,u=((m=(c=r[o].arrayValue)==null?void 0:c.values)==null?void 0:m.length)||0;this.Ft(t,15),t.Mt(yt(u)),this.Ot(o,t),this.Ct(r[o],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const o of r)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),he.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}_a.Kt=new _a;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=255;function x2(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function lT(s){const e=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=x2(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(e/8)}class I2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(e){const t=this.en(e),r=lT(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),r=lT(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(Co),this.sn(255)}_n(){this.an(Co),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Co?(this.sn(Co),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Co?(this.an(Co),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class R2{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class N2{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class xu{constructor(){this.cn=new I2,this.ln=new R2(this.cn),this.hn=new N2(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t,r,o){this.Tn=e,this.In=t,this.En=r,this.dn=o}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new va(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:vf(this.En),directionalValue:vf(this.dn),orderedDocumentKey:vf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const o=this.Rn(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function hs(s,e){let t=s.Tn-e.Tn;return t!==0?t:(t=uT(s.En,e.En),t!==0?t:(t=uT(s.dn,e.dn),t!==0?t:he.comparator(s.In,e.In)))}function uT(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function vf(s){return rb()?(function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r})(s):s}function cT(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(s)}class hT{constructor(e){this.mn=new it(((t,r)=>_t.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ve(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=zg(e);if(t!==void 0&&!this.wn(t))return!1;const r=ma(e);let o=new Set,u=0,c=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let e=new it(_t.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new hf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new hf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new hf(r.field,r.dir==="asc"?0:1)));return new Af(Af.UNKNOWN_ID,this.collectionId,t,$u.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(s){var t,r;if(ve(s instanceof qe||s instanceof nt,20012),s instanceof qe){if(s instanceof cS){const o=((r=(t=s.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((u=>qe.create(s.field,"==",u))))||[];return nt.create(o,"or")}return s}const e=s.filters.map((o=>HS(o)));return nt.create(e,s.op)}function C2(s){if(s.getFilters().length===0)return[];const e=tp(HS(s));return ve(QS(e),7391),Wg(e)||ep(e)?[e]:e.getFilters()}function Wg(s){return s instanceof qe}function ep(s){return s instanceof nt&&Pp(s)}function QS(s){return Wg(s)||ep(s)||(function(t){if(t instanceof nt&&Hg(t)){for(const r of t.getFilters())if(!Wg(r)&&!ep(r))return!1;return!0}return!1})(s)}function tp(s){if(ve(s instanceof qe||s instanceof nt,34018),s instanceof qe)return s;if(s.filters.length===1)return tp(s.filters[0]);const e=s.filters.map((r=>tp(r)));let t=nt.create(e,s.op);return t=Mf(t),QS(t)?t:(ve(t instanceof nt,64498),ve(el(t),40251),ve(t.filters.length>1,57927),t.filters.reduce(((r,o)=>Qp(r,o))))}function Qp(s,e){let t;return ve(s instanceof qe||s instanceof nt,38388),ve(e instanceof qe||e instanceof nt,25473),t=s instanceof qe?e instanceof qe?(function(o,u){return nt.create([o,u],"and")})(s,e):fT(s,e):e instanceof qe?fT(e,s):(function(o,u){if(ve(o.filters.length>0&&u.filters.length>0,48005),el(o)&&el(u))return oS(o,u.getFilters());const c=Hg(o)?o:u,m=Hg(o)?u:o,g=c.filters.map((p=>Qp(p,m)));return nt.create(g,"or")})(s,e),Mf(t)}function fT(s,e){if(el(e))return oS(e,s.getFilters());{const t=e.filters.map((r=>Qp(s,r)));return nt.create(t,"or")}}function Mf(s){if(ve(s instanceof qe||s instanceof nt,11850),s instanceof qe)return s;const e=s.getFilters();if(e.length===1)return Mf(e[0]);if(sS(s))return s;const t=e.map((o=>Mf(o))),r=[];return t.forEach((o=>{o instanceof qe?r.push(o):o instanceof nt&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:nt.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.Cn=new Kp}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Gn.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Gn.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class Kp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new it(ke.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new it(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="IndexedDbIndexManager",af=new Uint8Array(0);class V2{constructor(e,t){this.databaseId=t,this.vn=new Kp,this.Fn=new Rr((r=>Ia(r)),((r,o)=>pc(r,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const u={collectionId:r,parent:dn(o)};return mT(e).put(u)}return L.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Rb(t),""],!1,!0);return mT(e).J(o).next((u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Xi(c.parent))}return r}))}addFieldIndex(e,t){const r=Iu(e),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete o.indexId;const u=r.add(o);if(t.indexState){const c=Vo(e);return u.next((m=>{c.put(sT(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return u.next()}deleteFieldIndex(e,t){const r=Iu(e),o=Vo(e),u=Do(e);return r.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Iu(e),r=Do(e),o=Vo(e);return t.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(e,t){return L.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((o=>{if(o===0||o===1){const u=new hT(r).Dn();if(u!=null)return this.addFieldIndex(e,u)}}))))}getDocumentsMatchingTarget(e,t){const r=Do(e);let o=!0;const u=new Map;return L.forEach(this.Mn(t),(c=>this.xn(e,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=Pe();const m=[];return L.forEach(u,((g,p)=>{ne(dT,`Using index ${(function(le){return`id=${le.indexId}|cg=${le.collectionGroup}|f=${le.fields.map((we=>`${we.fieldPath}:${we.kind}`)).join(",")}`})(g)} to execute ${Ia(t)}`);const E=(function(le,we){const Ie=zg(we);if(Ie===void 0)return null;for(const be of Cf(le,Ie.fieldPath))switch(be.op){case"array-contains-any":return be.value.arrayValue.values||[];case"array-contains":return[be.value]}return null})(p,g),b=(function(le,we){const Ie=new Map;for(const be of ma(we))for(const R of Cf(le,be.fieldPath))switch(R.op){case"==":case"in":Ie.set(be.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return Ie.set(be.fieldPath.canonicalString(),R.value),Array.from(Ie.values())}return null})(p,g),A=(function(le,we){const Ie=[];let be=!0;for(const R of ma(we)){const I=R.kind===0?HE(le,R.fieldPath,le.startAt):QE(le,R.fieldPath,le.startAt);Ie.push(I.value),be&&(be=I.inclusive)}return new Is(Ie,be)})(p,g),P=(function(le,we){const Ie=[];let be=!0;for(const R of ma(we)){const I=R.kind===0?QE(le,R.fieldPath,le.endAt):HE(le,R.fieldPath,le.endAt);Ie.push(I.value),be&&(be=I.inclusive)}return new Is(Ie,be)})(p,g),$=this.On(g,p,A),Z=this.On(g,p,P),Y=this.Nn(g,p,b),se=this.Bn(g.indexId,E,$,A.inclusive,Z,P.inclusive,Y);return L.forEach(se,(me=>r.Y(me,t.limit).next((le=>{le.forEach((we=>{const Ie=he.fromSegments(we.documentKey);c.has(Ie)||(c=c.add(Ie),m.push(Ie))}))}))))})).next((()=>m))}return L.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=C2(nt.create(e.filters,"and")).map((r=>Kg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,o,u,c,m){const g=(t!=null?t.length:1)*Math.max(r.length,u.length),p=g/(t!=null?t.length:1),E=[];for(let b=0;b<g;++b){const A=t?this.Ln(t[b/p]):af,P=this.kn(e,A,r[b%p],o),$=this.qn(e,A,u[b%p],c),Z=m.map((Y=>this.kn(e,A,Y,!0)));E.push(...this.createRange(P,$,Z))}return E}kn(e,t,r,o){const u=new va(e,he.empty(),t,r);return o?u:u.An()}qn(e,t,r,o){const u=new va(e,he.empty(),t,r);return o?u.An():u}xn(e,t){const r=new hT(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((u=>{let c=null;for(const m of u)r.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(e,t){let r=2;const o=this.Mn(t);return L.forEach(o,(u=>this.xn(e,u).next((c=>{c?r!==0&&c.fields.length<(function(g){let p=new it(_t.comparator),E=!1;for(const b of g.filters)for(const A of b.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?E=!0:p=p.add(A.field));for(const b of g.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(E?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&r===2?1:r))}Qn(e,t){const r=new xu;for(const o of ma(e)){const u=t.data.field(o.fieldPath);if(u==null)return null;const c=r.Pn(o.kind);_a.Kt.Dt(u,c)}return r.un()}Ln(e){const t=new xu;return _a.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new xu;return _a.Kt.Dt(xa(this.databaseId,t),r.Pn((function(u){const c=ma(u);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let o=[];o.push(new xu);let u=0;for(const c of ma(e)){const m=r[u++];for(const g of o)if(this.Un(t,c.fieldPath)&&ic(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);_a.Kt.Dt(m,p)}}return this.Wn(o)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const g=new xu;g.seed(m.un()),_a.Kt.Dt(c,g.Pn(t.kind)),u.push(g)}return u}Un(e,t){return!!e.filters.find((r=>r instanceof qe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Iu(e),o=Vo(e);return(t?r.J(kg,IDBKeyRange.bound(t,t)):r.J()).next((u=>{const c=[];return L.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(E,b){const A=b?new $u(b.sequenceNumber,new Gn(Da(b.readTime),new he(Xi(b.documentKey)),b.largestBatchId)):$u.empty(),P=E.fields.map((([$,Z])=>new hf(_t.fromServerFormat($),Z)));return new Af(E.indexId,E.collectionGroup,P,A)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:Ce(r.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const o=Iu(e),u=Vo(e);return this.Gn(e).next((c=>o.J(kg,IDBKeyRange.bound(t,t)).next((m=>L.forEach(m,(g=>u.put(sT(g.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return L.forEach(t,((o,u)=>{const c=r.get(o.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),L.forEach(m,(g=>this.zn(e,o,g).next((p=>{const E=this.jn(u,g);return p.isEqual(E)?L.resolve():this.Jn(e,u,g,p,E)})))))))}))}Hn(e,t,r,o){return Do(e).put(o.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,o){return Do(e).delete(o.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const o=Do(e);let u=new it(hs);return o.ee({index:qb,range:IDBKeyRange.only([r.indexId,this.uid,vf(this.$n(r,t))])},((c,m)=>{u=u.add(new va(r.indexId,t,cT(m.arrayValue),cT(m.directionalValue)))})).next((()=>u))}jn(e,t){let r=new it(hs);const o=this.Qn(t,e);if(o==null)return r;const u=zg(t);if(u!=null){const c=e.data.field(u.fieldPath);if(ic(c))for(const m of c.arrayValue.values||[])r=r.add(new va(t.indexId,e.key,this.Ln(m),o))}else r=r.add(new va(t.indexId,e.key,af,o));return r}Jn(e,t,r,o,u){ne(dT,"Updating index entries for document '%s'",t.key);const c=[];return(function(g,p,E,b,A){const P=g.getIterator(),$=p.getIterator();let Z=No(P),Y=No($);for(;Z||Y;){let se=!1,me=!1;if(Z&&Y){const le=E(Z,Y);le<0?me=!0:le>0&&(se=!0)}else Z!=null?me=!0:se=!0;se?(b(Y),Y=No($)):me?(A(Z),Z=No(P)):(Z=No(P),Y=No($))}})(o,u,hs,(m=>{c.push(this.Hn(e,t,r,m))}),(m=>{c.push(this.Yn(e,t,r,m))})),L.waitFor(c)}Gn(e){let t=1;return Vo(e).ee({index:Ub,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,m)=>hs(c,m))).filter(((c,m,g)=>!m||hs(c,g[m-1])!==0));const o=[];o.push(e);for(const c of r){const m=hs(c,e),g=hs(c,t);if(m===0)o[0]=e.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,af,he.empty()),g=o[c+1].Vn(this.uid,af,he.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(e,t){return hs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gT)}getMinOffset(e,t){return L.mapArray(this.Mn(t),(r=>this.xn(e,r).next((o=>o||ge(44426))))).next(gT)}}function mT(s){return Ht(s,ec)}function Do(s){return Ht(s,Bu)}function Iu(s){return Ht(s,Cp)}function Vo(s){return Ht(s,ku)}function gT(s){ve(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;Ip(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Gn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KS=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(s,e,t){const r=s.store(Ti),o=s.store(Yo),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const g=r.ee({range:c},((E,b,A)=>(m++,A.delete())));u.push(g.next((()=>{ve(m===1,47070,{batchId:t.batchId})})));const p=[];for(const E of t.mutations){const b=Lb(e,E.key.path,t.batchId);u.push(o.delete(b)),p.push(E.key)}return L.waitFor(u).next((()=>p))}function Of(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw ge(14731);e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(KS,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);class Wf{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(e,t,r,o){ve(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new Wf(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fs(e).ee({index:Ta,range:r},((o,u,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,o){const u=Lo(e),c=fs(e);return c.add({}).next((m=>{ve(typeof m=="number",49019);const g=new Bp(m,t,r,o),p=(function(P,$,Z){const Y=Z.baseMutations.map((me=>ac(P.yt,me))),se=Z.mutations.map((me=>ac(P.yt,me)));return{userId:$,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:Y,mutations:se}})(this.serializer,this.userId,g),E=[];let b=new it(((A,P)=>Ce(A.canonicalString(),P.canonicalString())));for(const A of o){const P=Lb(this.userId,A.key.path,m);b=b.add(A.key.path.popLast()),E.push(c.put(p)),E.push(u.put(P,fR))}return b.forEach((A=>{E.push(this.indexManager.addToCollectionParentIndex(e,A))})),e.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),L.waitFor(E).next((()=>g))}))}lookupMutationBatch(e,t){return fs(e).get(t).next((r=>r?(ve(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ya(this.serializer,r)):null))}er(e,t){return this.Xn[t]?L.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const o=r.keys();return this.Xn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return fs(e).ee({index:Ta,range:o},((c,m,g)=>{m.userId===this.userId&&(ve(m.batchId>=r,47524,{tr:r}),u=ya(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=vs;return fs(e).ee({index:Ta,range:t,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,vs],[this.userId,Number.POSITIVE_INFINITY]);return fs(e).J(Ta,t).next((r=>r.map((o=>ya(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ff(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Lo(e).ee({range:o},((c,m,g)=>{const[p,E,b]=c,A=Xi(E);if(p===this.userId&&t.path.isEqual(A))return fs(e).get(b).next((P=>{if(!P)throw ge(61480,{nr:c,batchId:b});ve(P.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:P.userId,batchId:b}),u.push(ya(this.serializer,P))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new it(Ce);const o=[];return t.forEach((u=>{const c=ff(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Lo(e).ee({range:m},((p,E,b)=>{const[A,P,$]=p,Z=Xi(P);A===this.userId&&u.path.isEqual(Z)?r=r.add($):b.done()}));o.push(g)})),L.waitFor(o).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=ff(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new it(Ce);return Lo(e).ee({range:c},((g,p,E)=>{const[b,A,P]=g,$=Xi(A);b===this.userId&&r.isPrefixOf($)?$.length===o&&(m=m.add(P)):E.done()})).next((()=>this.rr(e,m)))}rr(e,t){const r=[],o=[];return t.forEach((u=>{o.push(fs(e).get(u).next((c=>{if(c===null)throw ge(35274,{batchId:u});ve(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(ya(this.serializer,c))})))})),L.waitFor(o).next((()=>r))}removeMutationBatch(e,t){return YS(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),L.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return L.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Lo(e).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const g=Xi(u[1]);o.push(g)}else m.done()})).next((()=>{ve(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(e,t){return XS(e,this.userId,t)}_r(e){return $S(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:vs,lastStreamToken:""}))}}function XS(s,e,t){const r=ff(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Lo(s).ee({range:u,X:!0},((m,g,p)=>{const[E,b,A]=m;E===e&&b===o&&(c=!0),p.done()})).next((()=>c))}function fs(s){return Ht(s,Ti)}function Lo(s){return Ht(s,Yo)}function $S(s){return Ht(s,Ju)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Va(0)}static cr(){return new Va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Va(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Te.fromTimestamp(new Je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.hr(e,o))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Mo(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(ve(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let o=0;const u=[];return Mo(e).ee(((c,m)=>{const g=Ou(m);g.sequenceNumber<=t&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(e,g)))})).next((()=>L.waitFor(u))).next((()=>o))}forEachTarget(e,t){return Mo(e).ee(((r,o)=>{const u=Ou(o);t(u)}))}lr(e){return yT(e).get(Rf).next((t=>(ve(t!==null,2888),t)))}hr(e,t){return yT(e).put(Rf,t)}Pr(e,t){return Mo(e).put(GS(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ia(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Mo(e).ee({range:o,index:Bb},((c,m,g)=>{const p=Ou(m);pc(t,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(e,t,r){const o=[],u=ms(e);return t.forEach((c=>{const m=dn(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,c))})),L.waitFor(o)}removeMatchingKeys(e,t,r){const o=ms(e);return L.forEach(t,(u=>{const c=dn(u.path);return L.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])}))}removeMatchingKeysForTargetId(e,t){const r=ms(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ms(e);let u=Pe();return o.ee({range:r,X:!0},((c,m,g)=>{const p=Xi(c[1]),E=new he(p);u=u.add(E)})).next((()=>u))}containsKey(e,t){const r=dn(t.path),o=IDBKeyRange.bound([r],[Rb(r)],!1,!0);let u=0;return ms(e).ee({index:Np,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(e,t){return Mo(e).get(t).next((r=>r?Ou(r):null))}}function Mo(s){return Ht(s,Xo)}function yT(s){return Ht(s,wa)}function ms(s){return Ht(s,$o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="LruGarbageCollector",O2=1048576;function vT([s,e],[t,r]){const o=Ce(s,t);return o===0?Ce(e,r):o}class P2{constructor(e){this.Ir=e,this.buffer=new it(vT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(_T,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vs(t)?ne(_T,"Ignoring IndexedDB error during garbage collection: ",t):await Ds(t)}await this.Vr(3e5)}))}}class j2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(Rn.ce);const r=new P2(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(pT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,u,c,m,g,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,c=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(r=b,m=Date.now(),this.removeTargets(e,r,t)))).next((b=>(u=b,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(p=Date.now(),Oo()<=Ge.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b}))))}}function JS(s,e){return new j2(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,t){this.db=e,this.garbageCollector=JS(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,o)=>t(o)))}addReference(e,t,r){return of(e,r)}removeReference(e,t,r){return of(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return of(e,t)}br(e,t){return(function(o,u){let c=!1;return $S(o).te((m=>XS(o,m,u).next((g=>(g&&(c=!0),L.resolve(!g)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(e,((c,m)=>{if(m<=t){const g=this.br(e,c).next((p=>{if(!p)return u++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Te.min()),ms(e).delete((function(b){return[0,dn(b.path)]})(c)))))}));o.push(g)}})).next((()=>L.waitFor(o))).next((()=>r.apply(e))).next((()=>u))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return of(e,t)}Sr(e,t){const r=ms(e);let o,u=Rn.ce;return r.ee({index:Np},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==Rn.ce&&t(new he(Xi(o)),u),u=p,o=g):u=Rn.ce})).next((()=>{u!==Rn.ce&&t(new he(Xi(o)),u)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function of(s,e){return ms(s).put((function(r,o){return{targetId:0,path:dn(r.path),sequenceNumber:o}})(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.changes=new Rr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fa(e).put(r)}removeEntry(e,t,r){return fa(e).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Vf(c),m[m.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=mt.newInvalidDocument(t);return fa(e).ee({index:df,range:IDBKeyRange.only(Ru(t))},((o,u)=>{r=this.Cr(t,u)})).next((()=>r))}vr(e,t){let r={size:0,document:mt.newInvalidDocument(t)};return fa(e).ee({index:df,range:IDBKeyRange.only(Ru(t))},((o,u)=>{r={document:this.Cr(t,u),size:Of(u)}})).next((()=>r))}getEntries(e,t){let r=Cn();return this.Fr(e,t,((o,u)=>{const c=this.Cr(o,u);r=r.insert(o,c)})).next((()=>r))}Mr(e,t){let r=Cn(),o=new ht(he.comparator);return this.Fr(e,t,((u,c)=>{const m=this.Cr(u,c);r=r.insert(u,m),o=o.insert(u,Of(c))})).next((()=>({documents:r,Or:o})))}Fr(e,t,r){if(t.isEmpty())return L.resolve();let o=new it(bT);t.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(Ru(o.first()),Ru(o.last())),c=o.getIterator();let m=c.getNext();return fa(e).ee({index:df,range:u},((g,p,E)=>{const b=he.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&bT(m,b)<0;)r(m,null),m=c.getNext();m&&m.isEqual(b)&&(r(m,p),m=c.hasNext()?c.getNext():null),m?E.j(Ru(m)):E.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,o,u){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),Vf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fa(e).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u==null||u.incrementDocumentReadCount(p.length);let E=Cn();for(const b of p){const A=this.Cr(he.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);A.isFoundDocument()&&(_c(t,A)||o.has(A.key))&&(E=E.insert(A.key,A))}return E}))}getAllFromCollectionGroup(e,t,r,o){let u=Cn();const c=TT(t,r),m=TT(t,Gn.max());return fa(e).ee({index:kb,range:IDBKeyRange.bound(c,m,!0)},((g,p,E)=>{const b=this.Cr(he.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(b.key,b),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(e){return new k2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return ET(e).get(Lg).next((t=>(ve(!!t,20021),t)))}Dr(e,t){return ET(e).put(Lg,t)}Cr(e,t){if(t){const r=S2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Te.min())))return r}return mt.newInvalidDocument(e)}}function ew(s){return new L2(s)}class k2 extends WS{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Rr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(e){const t=[];let r=0,o=new it(((u,c)=>Ce(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(t.push(this.Nr.removeEntry(e,u,m.readTime)),c.isValidDocument()){const g=iT(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=Of(g);r+=p-m.size,t.push(this.Nr.addEntry(e,u,g))}else if(r-=m.size,this.trackRemovals){const g=iT(this.Nr.serializer,c.convertToNoDocument(Te.min()));t.push(this.Nr.addEntry(e,u,g))}})),o.forEach((u=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,u))})),t.push(this.Nr.updateMetadata(e,r)),L.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function ET(s){return Ht(s,Wu)}function fa(s){return Ht(s,If)}function Ru(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TT(s,e){const t=e.documentKey.path.toArray();return[s,Vf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bT(s,e){const t=s.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ce(t[u],r[u]),o)return o;return o=Ce(t.length,r.length),o||(o=Ce(t[t.length-2],r[r.length-2]),o||Ce(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Fu(r.mutation,o,Nn.empty(),Je.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Pe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Pe()){const o=$i();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((u=>{let c=Vu();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=$i();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Pe())))}populateOverlays(e,t,r){const o=[];return r.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,r,o){let u=Cn();const c=qu(),m=(function(){return qu()})();return t.forEach(((g,p)=>{const E=r.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof Nr)?u=u.insert(p.key,p):E!==void 0?(c.set(p.key,E.mutation.getFieldMask()),Fu(E.mutation,p,E.mutation.getFieldMask(),Je.now())):c.set(p.key,Nn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,E)=>c.set(p,E))),t.forEach(((p,E)=>m.set(p,new B2(E,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=qu();let o=new ht(((c,m)=>c-m)),u=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let E=r.get(g)||Nn.empty();E=m.applyToLocalView(p,E),r.set(g,E);const b=(o.get(m.batchId)||Pe()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,b=yS();E.forEach((A=>{if(!u.has(A)){const P=wS(t.get(A),r.get(A));P!==null&&b.set(A,P),u=u.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,b))}return L.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return he.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):L.resolve($i());let m=Ko,g=u;return c.next((p=>L.forEach(p,((E,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(E)?L.resolve():this.remoteDocumentCache.getEntry(e,E).next((A=>{g=g.insert(E,A)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,Pe()))).next((E=>({batchId:m,changes:pS(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next((r=>{let o=Vu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const u=t.collectionGroup;let c=Vu();return this.indexManager.getCollectionParents(e,u).next((m=>L.forEach(m,(g=>{const p=(function(b,A){return new Ir(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((E=>{E.forEach(((b,A)=>{c=c.insert(b,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,o)))).next((c=>{u.forEach(((g,p)=>{const E=p.getKey();c.get(E)===null&&(c=c.insert(E,mt.newInvalidDocument(E)))}));let m=Vu();return c.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&Fu(E.mutation,p,Nn.empty(),Je.now()),_c(t,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return L.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ct(o.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:Hp(o.bundledQuery),readTime:Ct(o.readTime)}})(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.overlays=new ht(he.comparator),this.qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$i();return L.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,u)=>{this.St(e,t,u)})),L.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){const o=$i(),u=t.length+1,c=new he(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return L.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new ht(((p,E)=>p-E));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let E=u.get(p.largestBatchId);E===null&&(E=$i(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=$i(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return L.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new qp(t,r));let u=this.qr.get(t);u===void 0&&(u=Pe(),this.qr.set(t,u)),this.qr.set(t,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(){this.Qr=new it(Xt.$r),this.Ur=new it(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Xt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new he(new ke([])),r=new Xt(t,e),o=new Xt(t,e+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new he(new ke([])),r=new Xt(t,e),o=new Xt(t,e+1);let u=Pe();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new Xt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return he.comparator(e.key,t.key)||Ce(e.Yr,t.Yr)}static Kr(e,t){return Ce(e.Yr,t.Yr)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new it(Xt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Bp(u,t,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Xt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return L.resolve(c)}lookupMutationBatch(e,t){return L.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),u=o<0?0:o;return L.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?vs:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Xt(t,0),o=new Xt(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),L.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new it(Ce);return t.forEach((o=>{const u=new Xt(o,0),c=new Xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;he.isDocumentKey(u)||(u=u.child(""));const c=new Xt(new he(u),0);let m=new it(Ce);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),L.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ve(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(t.mutations,(o=>{const u=new Xt(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Xt(t,0),o=this.Zr.firstAfterOrEqual(r);return L.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.ri=e,this.docs=(function(){return new ht(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(t))}getEntries(e,t){let r=Cn();return t.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():mt.newInvalidDocument(o))})),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Cn();const c=t.path,m=new he(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Ip(Mb(E),r)<=0||(o.has(E.key)||_c(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return L.resolve(u)}getAllFromCollectionGroup(e,t,r,o){ge(9500)}ii(e,t){return L.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Q2(this)}getSize(e){return L.resolve(this.size)}}class Q2 extends WS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),L.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.persistence=e,this.si=new Rr((t=>Ia(t)),pc),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Yp,this.targetCount=0,this.ai=Va.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),L.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Va(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Pr(t),L.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),L.waitFor(u).next((()=>o))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),L.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t){this.ui={},this.overlays={},this.ci=new Rn(0),this.li=!1,this.li=!0,this.hi=new F2,this.referenceDelegate=e(this),this.Pi=new K2(this),this.indexManager=new D2,this.remoteDocumentCache=(function(o){return new H2(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new FS(t),this.Ii=new U2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new q2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new G2(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);const o=new Y2(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return L.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class Y2 extends Pb{constructor(e){super(),this.currentSequenceNumber=e}}class ed{constructor(e){this.persistence=e,this.Ri=new Yp,this.Vi=null}static mi(e){return new ed(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,(r=>{const o=he.fromPath(r);return this.gi(e,o).next((u=>{u||t.removeEntry(o,Te.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return L.or([()=>L.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Pf{constructor(e,t){this.persistence=e,this.pi=new Rr((r=>dn(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=JS(this,t)}static mi(e,t){return new Pf(e,t)}Ei(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return L.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?L.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((m=>{m||(r++,u.removeEntry(c,Te.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gf(e.data.value)),t}br(e,t,r){return L.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return L.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.serializer=e}k(e,t,r,o){const u=new Ff("createOrUpgrade",t);r<1&&o>=1&&((function(g){g.createObjectStore(gc)})(e),(function(g){g.createObjectStore(Ju,{keyPath:hR}),g.createObjectStore(Ti,{keyPath:ME,autoIncrement:!0}).createIndex(Ta,OE,{unique:!0}),g.createObjectStore(Yo)})(e),ST(e),(function(g){g.createObjectStore(ga)})(e));let c=L.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore($o),g.deleteObjectStore(Xo),g.deleteObjectStore(wa)})(e),ST(e)),c=c.next((()=>(function(g){const p=g.store(wa),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return p.put(Rf,E)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(g,p){return p.store(Ti).J().next((b=>{g.deleteObjectStore(Ti),g.createObjectStore(Ti,{keyPath:ME,autoIncrement:!0}).createIndex(Ta,OE,{unique:!0});const A=p.store(Ti),P=b.map(($=>A.put($)));return L.waitFor(P)}))})(e,u)))),c=c.next((()=>{(function(g){g.createObjectStore(Zo,{keyPath:ER})})(e)}))),r<5&&o>=5&&(c=c.next((()=>this.yi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(Wu)})(e),this.wi(u))))),r<7&&o>=7&&(c=c.next((()=>this.Si(u)))),r<8&&o>=8&&(c=c.next((()=>this.bi(e,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&o>=10&&(c=c.next((()=>this.Di(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Gf,{keyPath:TR})})(e),(function(g){g.createObjectStore(Hf,{keyPath:bR})})(e)}))),r<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(Qf,{keyPath:NR});p.createIndex(Bg,CR,{unique:!1}),p.createIndex(Fb,DR,{unique:!1})})(e)}))),r<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(If,{keyPath:dR});p.createIndex(df,mR),p.createIndex(kb,gR)})(e))).next((()=>this.Ci(e,u))).next((()=>e.deleteObjectStore(ga)))),r<14&&o>=14&&(c=c.next((()=>this.Fi(e,u)))),r<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(Cp,{keyPath:SR,autoIncrement:!0}).createIndex(kg,wR,{unique:!1}),g.createObjectStore(ku,{keyPath:AR}).createIndex(Ub,xR,{unique:!1}),g.createObjectStore(Bu,{keyPath:IR}).createIndex(qb,RR,{unique:!1})})(e)))),r<16&&o>=16&&(c=c.next((()=>{t.objectStore(ku).clear()})).next((()=>{t.objectStore(Bu).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(Dp,{keyPath:VR})})(e)}))),r<18&&o>=18&&rb()&&(c=c.next((()=>{t.objectStore(ku).clear()})).next((()=>{t.objectStore(Bu).clear()}))),c}wi(e){let t=0;return e.store(ga).ee(((r,o)=>{t+=Of(o)})).next((()=>{const r={byteSize:t};return e.store(Wu).put(Lg,r)}))}yi(e){const t=e.store(Ju),r=e.store(Ti);return t.J().next((o=>L.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,vs],[u.userId,u.lastAcknowledgedBatchId]);return r.J(Ta,c).next((m=>L.forEach(m,(g=>{ve(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=ya(this.serializer,g);return YS(e,u.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store($o),r=e.store(ga);return e.store(wa).get(Rf).next((o=>{const u=[];return r.ee(((c,m)=>{const g=new ke(c),p=(function(b){return[0,dn(b)]})(g);u.push(t.get(p).next((E=>E?L.resolve():(b=>t.put({targetId:0,path:dn(b),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>L.waitFor(u)))}))}bi(e,t){e.createObjectStore(ec,{keyPath:vR});const r=t.store(ec),o=new Kp,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return r.put({collectionId:m,parent:dn(g)})}};return t.store(ga).ee({X:!0},((c,m)=>{const g=new ke(c);return u(g.popLast())})).next((()=>t.store(Yo).ee({X:!0},(([c,m,g],p)=>{const E=Xi(m);return u(E.popLast())}))))}Di(e){const t=e.store(Xo);return t.ee(((r,o)=>{const u=Ou(o),c=GS(this.serializer,u);return t.put(c)}))}Ci(e,t){const r=t.store(ga),o=[];return r.ee(((u,c)=>{const m=t.store(If),g=(function(b){return b.document?new he(ke.fromString(b.document.name).popFirst(5)):b.noDocument?he.fromSegments(b.noDocument.path):b.unknownDocument?he.fromSegments(b.unknownDocument.path):ge(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>L.waitFor(o)))}Fi(e,t){const r=t.store(Ti),o=ew(this.serializer),u=new Xp(ed.mi,this.serializer.yt);return r.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??Pe();ya(this.serializer,g).keys().forEach((E=>p=p.add(E))),m.set(g.userId,p)})),L.forEach(m,((g,p)=>{const E=new $t(p),b=Jf.wt(this.serializer,E),A=u.getIndexManager(E),P=Wf.wt(E,this.serializer,A,u.referenceDelegate);return new tw(o,P,b,A).recalculateAndSaveOverlaysForDocumentKeys(new Ug(t,Rn.ce),g).next()}))}))}}function ST(s){s.createObjectStore($o,{keyPath:yR}).createIndex(Np,_R,{unique:!0}),s.createObjectStore(Xo,{keyPath:"targetId"}).createIndex(Bb,pR,{unique:!0}),s.createObjectStore(wa)}const ds="IndexedDbPersistence",Ag=18e5,xg=5e3,Ig="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nw="main";class $p{constructor(e,t,r,o,u,c,m,g,p,E,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=E,this.Ni=b,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=A=>Promise.resolve(),!$p.v())throw new te(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new z2(this,o),this.$i=t+nw,this.serializer=new FS(g),this.Ui=new Zi(this.$i,this.Ni,new X2(this.serializer)),this.hi=new A2,this.Pi=new M2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ew(this.serializer),this.Ii=new w2,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&Nt(ds,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te(F.FAILED_PRECONDITION,Ig);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Rn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>lf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Vs(e))return ne(ds,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne(ds,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Nu(e).get(Ro).next((t=>L.resolve(this.es(t))))}ts(e){return lf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ag)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Ht(t,Zo);return r.J().next((o=>{const u=this.ss(o,Ag),c=o.filter((m=>u.indexOf(m)===-1));return L.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Nu(e).get(Ro).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,xg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new te(F.FAILED_PRECONDITION,Ig);return!1}}return!(!this.networkEnabled||!this.inForeground)||lf(e).J().next((r=>this.ss(r,xg).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ne(ds,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[gc,Zo],(e=>{const t=new Ug(e,Rn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>lf(e).J().next((t=>this.ss(t,Ag).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Wf.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new V2(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Jf.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){ne(ds,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?PR:g===17?Kb:g===16?OR:g===15?Vp:g===14?Qb:g===13?Hb:g===12?MR:g===11?Gb:void ge(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,o,u,(m=>(c=new Ug(m,this.ci?this.ci.next():Rn.ce),t==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw Nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new te(F.FAILED_PRECONDITION,Ob);return r(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(e){return Nu(e).get(Ro).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,xg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new te(F.FAILED_PRECONDITION,Ig)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nu(e).put(Ro,t)}static v(){return Zi.v()}Zi(e){const t=Nu(e);return t.get(Ro).next((r=>this.es(r)?(ne(ds,"Releasing primary lease."),t.delete(Ro)):L.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Nt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;ib()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return ne(ds,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nt(ds,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Nt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nu(s){return Ht(s,gc)}function lf(s){return Ht(s,Zo)}function Zp(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=Pe(),o=Pe();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Jp(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ib()?8:jb(Sf())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const u={result:null};return this.ys(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(e,t,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new $2;return this.Ss(e,t,c).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>u.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(Oo()<=Ge.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Oo()<=Ge.DEBUG&&ne("QueryEngine","Query:",Po(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Oo()<=Ge.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(t))):L.resolve())}ys(e,t){if(KE(t))return L.resolve(null);let r=vn(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Df(t,null,"F"),r=vn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const c=Pe(...u);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,Df(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,r,o){return KE(t)||o.isEqual(Te.min())?L.resolve(null):this.ps.getDocuments(e,r).next((u=>{const c=this.Ds(t,u);return this.Cs(t,c,r,o)?L.resolve(null):(Oo()<=Ge.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Po(t)),this.vs(e,c,t,Vb(o,Ko)).next((m=>m)))}))}Ds(e,t){let r=new it(mS(e));return t.forEach(((o,u)=>{_c(e,u)&&(r=r.add(u))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,r){return Oo()<=Ge.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Po(t)),this.ps.getDocumentsMatchingQuery(e,t,Gn.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="LocalStore",Z2=3e8;class J2{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ht(Ce),this.xs=new Rr((u=>Ia(u)),pc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function rw(s,e,t,r){return new J2(s,e,t,r)}async function sw(s,e){const t=de(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=Pe();for(const p of o){c.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function W2(s,e){const t=de(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const b=p.batch,A=b.keys();let P=L.resolve();return A.forEach(($=>{P=P.next((()=>E.getEntry(g,$))).next((Z=>{const Y=p.docVersions.get($);ve(Y!==null,48541),Z.version.compareTo(Y)<0&&(b.applyToRemoteDocument(Z,p),Z.isValidDocument()&&(Z.setReadTime(p.commitVersion),E.addEntry(Z)))}))})),P.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,r,e,u).next((()=>u.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Pe();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function aw(s){const e=de(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function eN(s,e){const t=de(s),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((E,b)=>{const A=o.get(b);if(!A)return;m.push(t.Pi.removeMatchingKeys(u,E.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(u,E.addedDocuments,b))));let P=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?P=P.withResumeToken(St.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,r)),o=o.insert(b,P),(function(Z,Y,se){return Z.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=Z2?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(A,P,E)&&m.push(t.Pi.updateTargetData(u,P))}));let g=Cn(),p=Pe();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(ow(u,c,e.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!r.isEqual(Te.min())){const E=t.Pi.getLastRemoteSnapshotVersion(u).next((b=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return L.waitFor(m).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(t.Ms=o,u)))}function ow(s,e,t){let r=Pe(),o=Pe();return t.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let c=Cn();return t.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Te.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):ne(Wp,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function tN(s,e){const t=de(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=vs),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function rl(s,e){const t=de(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((u=>u?(o=u,L.resolve(o)):t.Pi.allocateTargetId(r).next((c=>(o=new br(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function sl(s,e,t){const r=de(s),o=r.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Vs(c))throw c;ne(Wp,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function jf(s,e,t){const r=de(s);let o=Te.min(),u=Pe();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,E){const b=de(g),A=b.xs.get(E);return A!==void 0?L.resolve(b.Ms.get(A)):b.Pi.getTargetData(p,E)})(r,c,vn(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?o:Te.min(),t?u:Pe()))).next((m=>(cw(r,dS(e),m),{documents:m,Qs:u})))))}function lw(s,e){const t=de(s),r=de(t.Pi),o=t.Ms.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",(u=>r.At(u,e).next((c=>c?c.target:null))))}function uw(s,e){const t=de(s),r=t.Os.get(e)||Te.min();return t.persistence.runTransaction("Get new document changes","readonly",(o=>t.Ns.getAllFromCollectionGroup(o,e,Vb(r,Ko),Number.MAX_SAFE_INTEGER))).then((o=>(cw(t,e,o),o)))}function cw(s,e,t){let r=s.Os.get(e)||Te.min();t.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}async function nN(s,e,t,r){const o=de(s);let u=Pe(),c=Cn();for(const p of t){const E=e.$s(p.metadata.name);p.document&&(u=u.add(E));const b=e.Us(p);b.setReadTime(e.Ks(p.metadata.readTime)),c=c.insert(E,b)}const m=o.Ns.newChangeBuffer({trackRemovals:!0}),g=await rl(o,(function(E){return vn(fl(ke.fromString(`__bundle__/docs/${E}`)))})(r));return o.persistence.runTransaction("Apply bundle documents","readwrite",(p=>ow(p,m,c).next((E=>(m.apply(p),E))).next((E=>o.Pi.removeMatchingKeysForTargetId(p,g.targetId).next((()=>o.Pi.addMatchingKeys(p,u,g.targetId))).next((()=>o.localDocuments.getLocalViewOfDocuments(p,E.ks,E.qs))).next((()=>E.ks))))))}async function iN(s,e,t=Pe()){const r=await rl(s,vn(Hp(e.bundledQuery))),o=de(s);return o.persistence.runTransaction("Save named query","readwrite",(u=>{const c=Ct(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.Ii.saveNamedQuery(u,e);const m=r.withResumeToken(St.EMPTY_BYTE_STRING,c);return o.Ms=o.Ms.insert(m.targetId,m),o.Pi.updateTargetData(u,m).next((()=>o.Pi.removeMatchingKeysForTargetId(u,r.targetId))).next((()=>o.Pi.addMatchingKeys(u,t,r.targetId))).next((()=>o.Ii.saveNamedQuery(u,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="firestore_clients";function wT(s,e){return`${hw}_${s}_${e}`}const fw="firestore_mutations";function AT(s,e,t){let r=`${fw}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const dw="firestore_targets";function Rg(s,e){return`${dw}_${s}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="SharedClientState";class zf{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ws(e,t,r){const o=JSON.parse(r);let u,c=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return c&&o.error&&(c=typeof o.error.message=="string"&&typeof o.error.code=="string",c&&(u=new te(o.error.code,o.error.message))),c?new zf(e,t,o.state,u):(Nt(Yi,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let o,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new te(r.error.code,r.error.message))),u?new Gu(e,r.state,o):(Nt(Yi,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=zp();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=zb(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new Lf(e,u):(Nt(Yi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class ey{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new ey(t.clientId,t.onlineState):(Nt(Yi,`Failed to parse online state: ${e}`),null)}}class np{constructor(){this.activeTargetIds=zp()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ng{constructor(e,t,r,o,u){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ht(Ce),this.started=!1,this.Xs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.eo=wT(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new np),this.ro=new RegExp(`^${hw}_${c}_([^_]*)$`),this.io=new RegExp(`^${fw}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${dw}_${c}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const o=this.getItem(wT(this.persistenceKey,r));if(o){const u=Lf.Ws(r,o);u&&(this.Zs=this.Zs.insert(u.clientId,u))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Rg(this.persistenceKey,e));if(o){const u=Gu.Ws(e,o);u&&(r=u.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((o=>{this.Po(o)})),this.currentUser=e,r.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ne(Yi,"READ",e,t),t}setItem(e,t){ne(Yi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ne(Yi,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ne(Yi,"EVENT",t.key,t.newValue),t.key===this.eo)return void Nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(u){let c=Rn.ce;if(u!=null)try{const m=JSON.parse(u);ve(typeof m=="number",30636,{So:u}),c=m}catch(m){Nt(Yi,"Failed to read sequence number from WebStorage",m)}return c})(t.newValue);r!==Rn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((o=>this.syncEngine.Do(o))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const o=new zf(this.currentUser,e,t,r),u=AT(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Gs())}Po(e){const t=AT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const o=Rg(this.persistenceKey,e),u=new Gu(e,t,r);this.setItem(o,u.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return Lf.Ws(r,t)}fo(e,t){const r=this.io.exec(e),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return zf.Ws(new $t(u),o,t)}yo(e,t){const r=this.so.exec(e),o=Number(r[1]);return Gu.Ws(o,t)}uo(e){return ey.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ne(Yi,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),o=this.lo(this.Zs),u=this.lo(r),c=[],m=[];return u.forEach((g=>{o.has(g)||c.push(g)})),o.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Fo(c,m).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=zp();return e.forEach(((r,o)=>{t=t.unionWith(o.activeTargetIds)})),t}}class mw{constructor(){this.Mo=new np,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new np,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="ConnectivityMonitor";class IT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(xT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(xT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf=null;function ip(){return uf===null?uf=(function(){return 268435456+Math.round(2147483648*Math.random())})():uf++,"0x"+uf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="RestConnection",sN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===qg?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,u){const c=ip(),m=this.zo(e,t.toUriEncodedString());ne(Cg,`Sending RPC '${e}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=pp(p);return this.Jo(e,m,g,r,E).then((b=>(ne(Cg,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw er(Cg,`RPC '${e}' ${c} failed with error: `,b,"url: ",m,"request:",r),b}))}Ho(e,t,r,o,u,c){return this.Go(e,t,r,o,u)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const r=sN[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class lN extends aN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,u){const c=ip();return new Promise(((m,g)=>{const p=new Tb;p.setWithCredentials(!0),p.listenOnce(bb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case cf.NO_ERROR:const b=p.getResponseJson();ne(cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),m(b);break;case cf.TIMEOUT:ne(cn,`RPC '${e}' ${c} timed out`),g(new te(F.DEADLINE_EXCEEDED,"Request time out"));break;case cf.HTTP_ERROR:const A=p.getStatus();if(ne(cn,`RPC '${e}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let P=p.getResponseJson();Array.isArray(P)&&(P=P[0]);const $=P==null?void 0:P.error;if($&&$.status&&$.message){const Z=(function(se){const me=se.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(me)>=0?me:F.UNKNOWN})($.status);g(new te(Z,$.message))}else g(new te(F.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new te(F.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ne(cn,`RPC '${e}' ${c} completed.`)}}));const E=JSON.stringify(o);ne(cn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",E,r,15)}))}T_(e,t,r){const o=ip(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Ab(),m=wb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const E=u.join("");ne(cn,`Creating RPC '${e}' stream ${o}: ${E}`,g);const b=c.createWebChannel(E,g);this.I_(b);let A=!1,P=!1;const $=new oN({Yo:Y=>{P?ne(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,Y):(A||(ne(cn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),ne(cn,`RPC '${e}' stream ${o} sending:`,Y),b.send(Y))},Zo:()=>b.close()}),Z=(Y,se,me)=>{Y.listen(se,(le=>{try{me(le)}catch(we){setTimeout((()=>{throw we}),0)}}))};return Z(b,Du.EventType.OPEN,(()=>{P||(ne(cn,`RPC '${e}' stream ${o} transport opened.`),$.o_())})),Z(b,Du.EventType.CLOSE,(()=>{P||(P=!0,ne(cn,`RPC '${e}' stream ${o} transport closed`),$.a_(),this.E_(b))})),Z(b,Du.EventType.ERROR,(Y=>{P||(P=!0,er(cn,`RPC '${e}' stream ${o} transport errored. Name:`,Y.name,"Message:",Y.message),$.a_(new te(F.UNAVAILABLE,"The operation could not be completed")))})),Z(b,Du.EventType.MESSAGE,(Y=>{var se;if(!P){const me=Y.data[0];ve(!!me,16349);const le=me,we=(le==null?void 0:le.error)||((se=le[0])==null?void 0:se.error);if(we){ne(cn,`RPC '${e}' stream ${o} received error:`,we);const Ie=we.status;let be=(function(N){const O=Bt[N];if(O!==void 0)return IS(O)})(Ie),R=we.message;be===void 0&&(be=F.INTERNAL,R="Unknown error status: "+Ie+" with message "+we.message),P=!0,$.a_(new te(be,R)),b.close()}else ne(cn,`RPC '${e}' stream ${o} received:`,me),$.u_(me)}})),Z(m,Sb.STAT_EVENT,(Y=>{Y.stat===Pg.PROXY?ne(cn,`RPC '${e}' stream ${o} detected buffering proxy`):Y.stat===Pg.NOPROXY&&ne(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(){return typeof window<"u"?window:null}function Ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(s){return new d2(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="PersistentStream";class pw{constructor(e,t,r,o,u,c,m,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ty(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(Nt(t.toString()),Nt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new te(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ne(RT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ne(RT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uN extends pw{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=p2(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Te.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Te.min():c.readTime?Ct(c.readTime):Te.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Zg(this.serializer),t.addTarget=(function(u,c){let m;const g=c.target;if(m=Nf(g)?{documents:zS(u,g)}:{query:LS(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=DS(u,c.resumeToken);const p=Xg(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(Te.min())>0){m.readTime=il(u,c.snapshotVersion.toTimestamp());const p=Xg(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const r=_2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Zg(this.serializer),t.removeTarget=e,this.q_(t)}}class cN extends pw{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=y2(e.writeResults,e.commitTime),r=Ct(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Zg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>ac(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{}class fN extends hN{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new te(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(e,$g(t,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new te(F.UNKNOWN,u.toString())}))}Ho(e,t,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,$g(t,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new te(F.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class dN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Nt(t),this.aa=!1):ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="RemoteStore";class mN{constructor(e,t,r,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Os(this)&&(ne(Ma,"Restarting streams for network reachability change."),await(async function(g){const p=de(g);p.Ea.add(4),await gl(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Sc(p)})(this))}))})),this.Ra=new dN(r,o)}}async function Sc(s){if(Os(s))for(const e of s.da)await e(!0)}async function gl(s){for(const e of s.da)await e(!1)}function td(s,e){const t=de(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ry(t)?iy(t):yl(t).O_()&&ny(t,e))}function al(s,e){const t=de(s),r=yl(t);t.Ia.delete(e),r.O_()&&yw(t,e),t.Ia.size===0&&(r.O_()?r.L_():Os(t)&&t.Ra.set("Unknown"))}function ny(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yl(s).Y_(e)}function yw(s,e){s.Va.Ue(e),yl(s).Z_(e)}function iy(s){s.Va=new u2({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),yl(s).start(),s.Ra.ua()}function ry(s){return Os(s)&&!yl(s).x_()&&s.Ia.size>0}function Os(s){return de(s).Ea.size===0}function _w(s){s.Va=void 0}async function gN(s){s.Ra.set("Online")}async function pN(s){s.Ia.forEach(((e,t)=>{ny(s,e)}))}async function yN(s,e){_w(s),ry(s)?(s.Ra.ha(e),iy(s)):s.Ra.set("Unknown")}async function _N(s,e,t){if(s.Ra.set("Online"),e instanceof CS&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(r){ne(Ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kf(s,r)}else if(e instanceof _f?s.Va.Ze(e):e instanceof NS?s.Va.st(e):s.Va.tt(e),!t.isEqual(Te.min()))try{const r=await aw(s.localStore);t.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(St.EMPTY_BYTE_STRING,E.snapshotVersion)),yw(u,g);const b=new br(E.target,g,p,E.sequenceNumber);ny(u,b)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(r){ne(Ma,"Failed to raise snapshot:",r),await kf(s,r)}}async function kf(s,e,t){if(!Vs(e))throw e;s.Ea.add(1),await gl(s),s.Ra.set("Offline"),t||(t=()=>aw(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ne(Ma,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await Sc(s)}))}function vw(s,e){return e().catch((t=>kf(s,t,e)))}async function pl(s){const e=de(s),t=Rs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vs;for(;vN(e);)try{const o=await tN(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,EN(e,o)}catch(o){await kf(e,o)}Ew(e)&&Tw(e)}function vN(s){return Os(s)&&s.Ta.length<10}function EN(s,e){s.Ta.push(e);const t=Rs(s);t.O_()&&t.X_&&t.ea(e.mutations)}function Ew(s){return Os(s)&&!Rs(s).x_()&&s.Ta.length>0}function Tw(s){Rs(s).start()}async function TN(s){Rs(s).ra()}async function bN(s){const e=Rs(s);for(const t of s.Ta)e.ea(t.mutations)}async function SN(s,e,t){const r=s.Ta.shift(),o=Up.from(r,e,t);await vw(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await pl(s)}async function wN(s,e){e&&Rs(s).X_&&await(async function(r,o){if((function(c){return xS(c)&&c!==F.ABORTED})(o.code)){const u=r.Ta.shift();Rs(r).B_(),await vw(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await pl(r)}})(s,e),Ew(s)&&Tw(s)}async function NT(s,e){const t=de(s);t.asyncQueue.verifyOperationInProgress(),ne(Ma,"RemoteStore received new credentials");const r=Os(t);t.Ea.add(3),await gl(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Sc(t)}async function rp(s,e){const t=de(s);e?(t.Ea.delete(2),await Sc(t)):e||(t.Ea.add(2),await gl(t),t.Ra.set("Unknown"))}function yl(s){return s.ma||(s.ma=(function(t,r,o){const u=de(t);return u.sa(),new uN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:gN.bind(null,s),t_:pN.bind(null,s),r_:yN.bind(null,s),H_:_N.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),ry(s)?iy(s):s.Ra.set("Unknown")):(await s.ma.stop(),_w(s))}))),s.ma}function Rs(s){return s.fa||(s.fa=(function(t,r,o){const u=de(t);return u.sa(),new cN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:TN.bind(null,s),r_:wN.bind(null,s),ta:bN.bind(null,s),na:SN.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await pl(s)):(await s.fa.stop(),s.Ta.length>0&&(ne(Ma,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new on,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,m=new sy(e,t,c,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _l(s,e){if(Nt("AsyncQueue",`${e}: ${s}`),Vs(s))return new te(F.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=Vu(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Uo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.ga=new ht(he.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ol{constructor(e,t,r,o,u,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,u){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new ol(e,t,Uo.emptySet(t),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class xN{constructor(){this.queries=DT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=de(t),u=o.queries;o.queries=DT(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new te(F.ABORTED,"Firestore shutting down"))}}function DT(){return new Rr((s=>fS(s)),yc)}async function ay(s,e){const t=de(s);let r=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new AN,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=_l(c,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&ly(t)}async function oy(s,e){const t=de(s),r=e.query;let o=3;const u=t.queries.get(r);if(u){const c=u.Sa.indexOf(e);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function IN(s,e){const t=de(s);let r=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&ly(t)}function RN(s,e,t){const r=de(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);r.queries.delete(e)}function ly(s){s.Ca.forEach((e=>{e.next()}))}var sp,VT;(VT=sp||(sp={})).Ma="default",VT.Cache="cache";class uy{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new ol(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sp.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.serializer=e}$s(e){return Ji(this.serializer,e)}Us(e){return e.metadata.exists?jS(this.serializer,e.document,!1):mt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Ct(e)}}class CN{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=bw(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const r=ke.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new MT(this.serializer);for(const o of e)if(o.metadata.queries){const u=r.$s(o.metadata.name);for(const c of o.metadata.queries){const m=(t.get(c)||Pe()).add(u);t.set(c,m)}}return t}async ja(e){const t=await nN(e,new MT(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const o of this.Ka)await iN(e,o,r.get(o.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function bw(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.key=e}}class ww{constructor(e){this.key=e}}class Aw{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=mS(e),this.tu=new Uo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new CT,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,b)=>{const A=o.get(E),P=_c(this.query,b)?b:null,$=!!A&&this.mutatedKeys.has(A.key),Z=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let Y=!1;A&&P?A.data.isEqual(P.data)?$!==Z&&(r.track({type:3,doc:P}),Y=!0):this.su(A,P)||(r.track({type:2,doc:P}),Y=!0,(g&&this.eu(P,g)>0||p&&this.eu(P,p)<0)&&(m=!0)):!A&&P?(r.track({type:0,doc:P}),Y=!0):A&&!P&&(r.track({type:1,doc:A}),Y=!0,(g||p)&&(m=!0)),Y&&(P?(c=c.add(P),u=Z?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((E,b)=>(function(P,$){const Z=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:Y})}};return Z(P)-Z($)})(E.type,b.type)||this.eu(E.doc,b.doc))),this.ou(r),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new ol(this.query,e.tu,u,c,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new CT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new ww(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new Sw(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Pe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ps="SyncEngine";class DN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class VN{constructor(e){this.key=e,this.hu=!1}}class MN{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Rr((m=>fS(m)),yc),this.Iu=new Map,this.Eu=new Set,this.du=new ht(he.comparator),this.Au=new Map,this.Ru=new Yp,this.Vu={},this.mu=new Map,this.fu=Va.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ON(s,e,t=!0){const r=nd(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await xw(r,e,t,!0),o}async function PN(s,e){const t=nd(s);await xw(t,e,!0,!1)}async function xw(s,e,t,r){const o=await rl(s.localStore,vn(e)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,t);let m;return r&&(m=await cy(s,e,u,c==="current",o.resumeToken)),s.isPrimaryClient&&t&&td(s.remoteStore,o),m}async function cy(s,e,t,r,o){s.pu=(b,A,P)=>(async function(Z,Y,se,me){let le=Y.view.ru(se);le.Cs&&(le=await jf(Z.localStore,Y.query,!1).then((({documents:R})=>Y.view.ru(R,le))));const we=me&&me.targetChanges.get(Y.targetId),Ie=me&&me.targetMismatches.get(Y.targetId)!=null,be=Y.view.applyChanges(le,Z.isPrimaryClient,we,Ie);return ap(Z,Y.targetId,be.au),be.snapshot})(s,b,A,P);const u=await jf(s.localStore,e,!0),c=new Aw(e,u.Qs),m=c.ru(u.documents),g=Tc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),p=c.applyChanges(m,s.isPrimaryClient,g);ap(s,t,p.au);const E=new DN(e,t,c);return s.Tu.set(e,E),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function jN(s,e,t){const r=de(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!yc(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await sl(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&al(r.remoteStore,o.targetId),ll(r,o.targetId)})).catch(Ds)):(ll(r,o.targetId),await sl(r.localStore,o.targetId,!0))}async function zN(s,e){const t=de(s),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),al(t.remoteStore,r.targetId))}async function LN(s,e,t){const r=my(s);try{const o=await(function(c,m){const g=de(c),p=Je.now(),E=m.reduce(((P,$)=>P.add($.key)),Pe());let b,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let $=Cn(),Z=Pe();return g.Ns.getEntries(P,E).next((Y=>{$=Y,$.forEach(((se,me)=>{me.isValidDocument()||(Z=Z.add(se))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,$))).next((Y=>{b=Y;const se=[];for(const me of m){const le=a2(me,b.get(me.key).overlayedDocument);le!=null&&se.push(new Nr(me.key,le,iS(le.value.mapValue),vt.exists(!0)))}return g.mutationQueue.addMutationBatch(P,p,se,m)})).next((Y=>{A=Y;const se=Y.applyToLocalDocumentSet(b,Z);return g.documentOverlayCache.saveOverlays(P,Y.batchId,se)}))})).then((()=>({batchId:A.batchId,changes:pS(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new ht(Ce)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(r,o.batchId,t),await Cr(r,o.changes),await pl(r.remoteStore)}catch(o){const u=_l(o,"Failed to persist write");t.reject(u)}}async function Iw(s,e){const t=de(s);try{const r=await eN(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(ve(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?ve(c.hu,14607):o.removedDocuments.size>0&&(ve(c.hu,42227),c.hu=!1))})),await Cr(t,r,e)}catch(r){await Ds(r)}}function OT(s,e,t){const r=de(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=de(c);g.onlineState=m;let p=!1;g.queries.forEach(((E,b)=>{for(const A of b.Sa)A.va(m)&&(p=!0)})),p&&ly(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kN(s,e,t){const r=de(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),u=o&&o.key;if(u){let c=new ht(he.comparator);c=c.insert(u,mt.newNoDocument(u,Te.min()));const m=Pe().add(u),g=new Ec(Te.min(),new Map,new ht(Ce),c,m);await Iw(r,g),r.du=r.du.remove(u),r.Au.delete(e),dy(r)}else await sl(r.localStore,e,!1).then((()=>ll(r,e,t))).catch(Ds)}async function BN(s,e){const t=de(s),r=e.batch.batchId;try{const o=await W2(t.localStore,e);fy(t,r,null),hy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Cr(t,o)}catch(o){await Ds(o)}}async function UN(s,e,t){const r=de(s);try{const o=await(function(c,m){const g=de(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((b=>(ve(b!==null,37113),E=b.keys(),g.mutationQueue.removeMutationBatch(p,b)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(r.localStore,e);fy(r,e,t),hy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Cr(r,o)}catch(o){await Ds(o)}}async function qN(s,e){const t=de(s);Os(t.remoteStore)||ne(Ps,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(c){const m=de(c);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(g=>m.mutationQueue.getHighestUnacknowledgedBatchId(g)))})(t.localStore);if(r===vs)return void e.resolve();const o=t.mu.get(r)||[];o.push(e),t.mu.set(r,o)}catch(r){const o=_l(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}function hy(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function fy(s,e,t){const r=de(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function ll(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||Rw(s,r)}))}function Rw(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(al(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),dy(s))}function ap(s,e,t){for(const r of t)r instanceof Sw?(s.Ru.addReference(r.key,e),FN(s,r)):r instanceof ww?(ne(Ps,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||Rw(s,r.key)):ge(19791,{wu:r})}function FN(s,e){const t=e.key,r=t.path.canonicalString();s.du.get(t)||s.Eu.has(r)||(ne(Ps,"New document in limbo: "+t),s.Eu.add(r),dy(s))}function dy(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new he(ke.fromString(e)),r=s.fu.next();s.Au.set(r,new VN(t)),s.du=s.du.insert(t,r),td(s.remoteStore,new br(vn(fl(t.path)),r,"TargetPurposeLimboResolution",Rn.ce))}}async function Cr(s,e,t){const r=de(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,e,t).then((p=>{var E;if((p||t)&&r.isPrimaryClient){const b=p?!p.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:E.current;r.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(p){o.push(p);const b=Jp.As(g.targetId,p);u.push(b)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,p){const E=de(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>L.forEach(p,(A=>L.forEach(A.Es,(P=>E.persistence.referenceDelegate.addReference(b,A.targetId,P))).next((()=>L.forEach(A.ds,(P=>E.persistence.referenceDelegate.removeReference(b,A.targetId,P)))))))))}catch(b){if(!Vs(b))throw b;ne(Wp,"Failed to update sequence numbers: "+b)}for(const b of p){const A=b.targetId;if(!b.fromCache){const P=E.Ms.get(A),$=P.snapshotVersion,Z=P.withLastLimboFreeSnapshotVersion($);E.Ms=E.Ms.insert(A,Z)}}})(r.localStore,u))}async function GN(s,e){const t=de(s);if(!t.currentUser.isEqual(e)){ne(Ps,"User change. New user:",e.toKey());const r=await sw(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new te(F.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cr(t,r.Ls)}}function HN(s,e){const t=de(s),r=t.Au.get(e);if(r&&r.hu)return Pe().add(r.key);{let o=Pe();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}async function QN(s,e){const t=de(s),r=await jf(t.localStore,e.query,!0),o=e.view.cu(r);return t.isPrimaryClient&&ap(t,e.targetId,o.au),o}async function KN(s,e){const t=de(s);return uw(t.localStore,e).then((r=>Cr(t,r)))}async function YN(s,e,t,r){const o=de(s),u=await(function(m,g){const p=de(m),E=de(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(b=>E.er(b,g).next((A=>A?p.localDocuments.getDocuments(b,A):L.resolve(null)))))})(o.localStore,e);u!==null?(t==="pending"?await pl(o.remoteStore):t==="acknowledged"||t==="rejected"?(fy(o,e,r||null),hy(o,e),(function(m,g){de(de(m).mutationQueue).ir(g)})(o.localStore,e)):ge(6720,"Unknown batchState",{Su:t}),await Cr(o,u)):ne(Ps,"Cannot apply mutation batch with id: "+e)}async function XN(s,e){const t=de(s);if(nd(t),my(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),o=await PT(t,r.toArray());t.gu=!0,await rp(t.remoteStore,!0);for(const u of o)td(t.remoteStore,u)}else if(e===!1&&t.gu!==!1){const r=[];let o=Promise.resolve();t.Iu.forEach(((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then((()=>(ll(t,c),sl(t.localStore,c,!0)))),al(t.remoteStore,c)})),await o,await PT(t,r),(function(c){const m=de(c);m.Au.forEach(((g,p)=>{al(m.remoteStore,p)})),m.Ru.Jr(),m.Au=new Map,m.du=new ht(he.comparator)})(t),t.gu=!1,await rp(t.remoteStore,!1)}}async function PT(s,e,t){const r=de(s),o=[],u=[];for(const c of e){let m;const g=r.Iu.get(c);if(g&&g.length!==0){m=await rl(r.localStore,vn(g[0]));for(const p of g){const E=r.Tu.get(p),b=await QN(r,E);b.snapshot&&u.push(b.snapshot)}}else{const p=await lw(r.localStore,c);m=await rl(r.localStore,p),await cy(r,Nw(p),c,!1,m.resumeToken)}o.push(m)}return r.Pu.H_(u),o}function Nw(s){return hS(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function $N(s){return(function(t){return de(de(t).persistence).Ts()})(de(s).localStore)}async function ZN(s,e,t,r){const o=de(s);if(o.gu)return void ne(Ps,"Ignoring unexpected query state notification.");const u=o.Iu.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=await uw(o.localStore,dS(u[0])),m=Ec.createSynthesizedRemoteEventForCurrentChange(e,t==="current",St.EMPTY_BYTE_STRING);await Cr(o,c,m);break}case"rejected":await sl(o.localStore,e,!0),ll(o,e,r);break;default:ge(64155,t)}}async function JN(s,e,t){const r=nd(s);if(r.gu){for(const o of e){if(r.Iu.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){ne(Ps,"Adding an already active target "+o);continue}const u=await lw(r.localStore,o),c=await rl(r.localStore,u);await cy(r,Nw(u),c.targetId,!1,c.resumeToken),td(r.remoteStore,c)}for(const o of t)r.Iu.has(o)&&await sl(r.localStore,o,!1).then((()=>{al(r.remoteStore,o),ll(r,o)})).catch(Ds)}}function nd(s){const e=de(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Iw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kN.bind(null,e),e.Pu.H_=IN.bind(null,e.eventManager),e.Pu.yu=RN.bind(null,e.eventManager),e}function my(s){const e=de(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UN.bind(null,e),e}function WN(s,e,t){const r=de(s);(async function(u,c,m){try{const g=await c.getMetadata();if(await(function(P,$){const Z=de(P),Y=Ct($.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",(se=>Z.Ii.getBundleMetadata(se,$.id))).then((se=>!!se&&se.createTime.compareTo(Y)>=0))})(u.localStore,g))return await c.close(),m._completeWith((function(P){return{taskState:"Success",documentsLoaded:P.totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}})(g)),Promise.resolve(new Set);m._updateProgress(bw(g));const p=new CN(g,c.serializer);let E=await c.bu();for(;E;){const A=await p.Ga(E);A&&m._updateProgress(A),E=await c.bu()}const b=await p.ja(u.localStore);return await Cr(u,b.Ha,void 0),await(function(P,$){const Z=de(P);return Z.persistence.runTransaction("Save bundle","readwrite",(Y=>Z.Ii.saveBundleMetadata(Y,$)))})(u.localStore,g),m._completeWith(b.progress),Promise.resolve(b.Ja)}catch(g){return er(Ps,`Loading bundle failed with ${g}`),m._failWith(g),Promise.resolve(new Set)}})(r,e,t).then((o=>{r.sharedClientState.notifyBundleLoaded(o)}))}class oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return rw(this.persistence,new iw,e.initialUser,this.serializer)}Cu(e){return new Xp(ed.mi,this.serializer)}Du(e){return new mw}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oc.provider={build:()=>new oc};class eC extends oc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ve(this.persistence.referenceDelegate instanceof Pf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZS(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new Xp((r=>Pf.mi(r,t)),this.serializer)}}class Cw extends oc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await my(this.xu.syncEngine),await pl(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return rw(this.persistence,new iw,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new ZS(r,e.asyncQueue,t)}Mu(e,t){const r=new uR(t,this.persistence);return new lR(e.asyncQueue,r)}Cu(e){const t=Zp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new $p(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,gw(),Ef(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new mw}}class tC extends Cw{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Ng&&(this.sharedClientState.syncEngine={Co:YN.bind(null,t),vo:ZN.bind(null,t),Fo:JN.bind(null,t),Ts:$N.bind(null,t),Do:KN.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await XN(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=gw();if(!Ng.v(t))throw new te(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Zp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ng(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class lc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GN.bind(null,this.syncEngine),await rp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xN})()}createDatastore(e){const t=bc(e.databaseInfo.databaseId),r=(function(u){return new lN(u)})(e.databaseInfo);return(function(u,c,m,g){return new fN(u,c,m,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,u,c,m){return new mN(r,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>OT(this.syncEngine,t,0)),(function(){return IT.v()?new IT:new rN})())}createSyncEngine(e,t){return(function(o,u,c,m,g,p,E){const b=new MN(o,u,c,m,g,p);return E&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const u=de(o);ne(Ma,"RemoteStore shutting down."),u.Ea.add(5),await gl(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}lc.provider={build:()=>new lc};function jT(s,e=10240){let t=0;return{async read(){if(t<s.byteLength){const r={value:s.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Nt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new on,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.Qu(`length string (${t}) is not valid number`);const o=await this.$u(r);return new NN(JSON.parse(o),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new te(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,u){const c=de(o),m={documents:u.map((b=>sc(c.serializer,b)))},g=await c.Ho("BatchGetDocuments",c.serializer.databaseId,ke.emptyPath(),m,u.length),p=new Map;g.forEach((b=>{const A=g2(c.serializer,b);p.set(A.key.toString(),A)}));const E=[];return u.forEach((b=>{const A=p.get(b.toString());ve(!!A,55234,{key:b}),E.push(A)})),E})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ml(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const o=he.fromPath(r);this.mutations.push(new kp(o,this.precondition(o)))})),await(async function(r,o){const u=de(r),c={writes:o.map((m=>ac(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,ke.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ge(50498,{Gu:e.constructor.name});t=Te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new te(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Te.min())?vt.exists(!1):vt.updateTime(t):vt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Te.min()))throw new te(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vt.updateTime(t)}return vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.zu=r.maxAttempts,this.M_=new ty(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new iC(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((o=>{this.Yu(o)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!mc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!xS(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="FirestoreClient";class sC{constructor(e,t,r,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=$t.UNAUTHENTICATED,this.clientId=Ap.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{ne(Ns,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ne(Ns,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new on;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=_l(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Dg(s,e){s.asyncQueue.verifyOperationInProgress(),ne(Ns,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await sw(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function zT(s,e){s.asyncQueue.verifyOperationInProgress();const t=await gy(s);ne(Ns,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>NT(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>NT(e.remoteStore,o))),s._onlineComponents=e}async function gy(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ne(Ns,"Using user provided OfflineComponentProvider");try{await Dg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===F.FAILED_PRECONDITION||o.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;er("Error using user provided cache. Falling back to memory cache: "+t),await Dg(s,new oc)}}else ne(Ns,"Using default OfflineComponentProvider"),await Dg(s,new eC(void 0));return s._offlineComponents}async function rd(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ne(Ns,"Using user provided OnlineComponentProvider"),await zT(s,s._uninitializedComponentsProvider._online)):(ne(Ns,"Using default OnlineComponentProvider"),await zT(s,new lc))),s._onlineComponents}function Dw(s){return gy(s).then((e=>e.persistence))}function py(s){return gy(s).then((e=>e.localStore))}function Vw(s){return rd(s).then((e=>e.remoteStore))}function yy(s){return rd(s).then((e=>e.syncEngine))}function aC(s){return rd(s).then((e=>e.datastore))}async function ul(s){const e=await rd(s),t=e.eventManager;return t.onListen=ON.bind(null,e.syncEngine),t.onUnlisten=jN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zN.bind(null,e.syncEngine),t}function oC(s){return s.asyncQueue.enqueue((async()=>{const e=await Dw(s),t=await Vw(s);return e.setNetworkEnabled(!0),(function(o){const u=de(o);return u.Ea.delete(0),Sc(u)})(t)}))}function lC(s){return s.asyncQueue.enqueue((async()=>{const e=await Dw(s),t=await Vw(s);return e.setNetworkEnabled(!1),(async function(o){const u=de(o);u.Ea.add(0),await gl(u),u.Ra.set("Offline")})(t)}))}function uC(s,e){const t=new on;return s.asyncQueue.enqueueAndForget((async()=>(async function(o,u,c){try{const m=await(function(p,E){const b=de(p);return b.persistence.runTransaction("read document","readonly",(A=>b.localDocuments.getDocument(A,E)))})(o,u);m.isFoundDocument()?c.resolve(m):m.isNoDocument()?c.resolve(null):c.reject(new te(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const g=_l(m,`Failed to get document '${u} from cache`);c.reject(g)}})(await py(s),e,t))),t.promise}function Mw(s,e,t={}){const r=new on;return s.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new id({next:A=>{E.Nu(),c.enqueueAndForget((()=>oy(u,b)));const P=A.docs.has(m);!P&&A.fromCache?p.reject(new te(F.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&A.fromCache&&g&&g.source==="server"?p.reject(new te(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),b=new uy(fl(m.path),E,{includeMetadataChanges:!0,qa:!0});return ay(u,b)})(await ul(s),s.asyncQueue,e,t,r))),r.promise}function cC(s,e){const t=new on;return s.asyncQueue.enqueueAndForget((async()=>(async function(o,u,c){try{const m=await jf(o,u,!0),g=new Aw(u,m.Qs),p=g.ru(m.documents),E=g.applyChanges(p,!1);c.resolve(E.snapshot)}catch(m){const g=_l(m,`Failed to execute query '${u} against cache`);c.reject(g)}})(await py(s),e,t))),t.promise}function Ow(s,e,t={}){const r=new on;return s.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new id({next:A=>{E.Nu(),c.enqueueAndForget((()=>oy(u,b))),A.fromCache&&g.source==="server"?p.reject(new te(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),b=new uy(m,E,{includeMetadataChanges:!0,qa:!0});return ay(u,b)})(await ul(s),s.asyncQueue,e,t,r))),r.promise}function hC(s,e){const t=new id(e);return s.asyncQueue.enqueueAndForget((async()=>(function(o,u){de(o).Ca.add(u),u.next()})(await ul(s),t))),()=>{t.Nu(),s.asyncQueue.enqueueAndForget((async()=>(function(o,u){de(o).Ca.delete(u)})(await ul(s),t)))}}function fC(s,e,t,r){const o=(function(c,m){let g;return g=typeof c=="string"?RS().encode(c):c,(function(E,b){return new nC(E,b)})((function(E,b){if(E instanceof Uint8Array)return jT(E,b);if(E instanceof ArrayBuffer)return jT(new Uint8Array(E),b);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(g),m)})(t,bc(e));s.asyncQueue.enqueueAndForget((async()=>{WN(await yy(s),o,r)}))}function dC(s,e){return s.asyncQueue.enqueue((async()=>(function(r,o){const u=de(r);return u.persistence.runTransaction("Get named query","readonly",(c=>u.Ii.getNamedQuery(c,o)))})(await py(s),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="firestore.googleapis.com",kT=!0;class BT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jw,this.ssl=kT}else this.host=e.host,this.ssl=e.ssl??kT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<O2)throw new te(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Nb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pw(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new te(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new te(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new te(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wc{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $I;switch(r.type){case"firstParty":return new eR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=LT.get(t);r&&(ne("ComponentProvider","Removing Datastore"),LT.delete(t),r.terminate())})(this),Promise.resolve()}}function mC(s,e,t,r={}){var p;s=Ke(s,wc);const o=pp(e),u=s._getSettings(),c={...u,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;o&&(dx(`https://${m}`),yx("Firestore",!0)),u.host!==jw&&u.host!==m&&er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!qo(g,c)&&(s._setSettings(g),r.mockUserToken)){let E,b;if(typeof r.mockUserToken=="string")E=r.mockUserToken,b=$t.MOCK_USER;else{E=mx(r.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new te(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new $t(A)}s._authCredentials=new ZI(new Ib(E,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let En=class zw{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zw(this.firestore,e,this._query)}},ct=class Pu{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pu(this.firestore,e,this._key)}toJSON(){return{type:Pu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(dc(t,Pu._jsonSchema))return new Pu(e,r||null,new he(ke.fromString(t.referencePath)))}};ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:Ut("string",ct._jsonSchemaVersion),referencePath:Ut("string")};let Es=class Lw extends En{constructor(e,t,r){super(e,t,fl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new he(e))}withConverter(e){return new Lw(this.firestore,e,this._path)}};function Ei(s,e,...t){if(s=qt(s),xp("collection","path",e),s instanceof wc){const r=ke.fromString(e,...t);return RE(r),new Es(s,null,r)}{if(!(s instanceof ct||s instanceof Es))throw new te(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ke.fromString(e,...t));return RE(r),new Es(s.firestore,null,r)}}function gC(s,e){if(s=Ke(s,wc),xp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new te(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new En(s,null,(function(r){return new Ir(ke.emptyPath(),r)})(e))}function rn(s,e,...t){if(s=qt(s),arguments.length===1&&(e=Ap.newId()),xp("doc","path",e),s instanceof wc){const r=ke.fromString(e,...t);return IE(r),new ct(s,null,new he(r))}{if(!(s instanceof ct||s instanceof Es))throw new te(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ke.fromString(e,...t));return IE(r),new ct(s.firestore,s instanceof Es?s.converter:null,new he(r))}}function kw(s,e){return s=qt(s),e=qt(e),(s instanceof ct||s instanceof Es)&&(e instanceof ct||e instanceof Es)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function Bw(s,e){return s=qt(s),e=qt(e),s instanceof En&&e instanceof En&&s.firestore===e.firestore&&yc(s._query,e._query)&&s.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="AsyncQueue";class qT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ty(this,"async_queue_retry"),this._c=()=>{const r=Ef();r&&ne(UT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ef();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ef();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new on;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vs(e))throw e;ne(UT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Nt("INTERNAL UNHANDLED ERROR: ",FT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=sy.createAndSchedule(this,e,t,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ge(47125,{Pc:FT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function FT(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(s){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class pC{constructor(){this._progressObserver={},this._taskCompletionResolver=new on,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=-1;let wt=class extends wc{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new qT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qT(e),this._firestoreClient=void 0,await e}}};function ln(s){if(s._terminated)throw new te(F.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Uw(s),s._firestoreClient}function Uw(s){var r,o,u;const e=s._freezeSettings(),t=(function(m,g,p,E){return new LR(m,g,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Pw(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new sC(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}function _C(s,e){er("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return qw(s,lc.provider,{build:r=>new Cw(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function vC(s){er("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();qw(s,lc.provider,{build:t=>new tC(t,e.cacheSizeBytes)})}function qw(s,e,t){if((s=Ke(s,wt))._firestoreClient||s._terminated)throw new te(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new te(F.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},Uw(s)}function EC(s){if(s._initialized&&!s._terminated)throw new te(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new on;return s._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Zi.v())return Promise.resolve();const o=r+nw;await Zi.delete(o)})(Zp(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function TC(s){return(function(t){const r=new on;return t.asyncQueue.enqueueAndForget((async()=>qN(await yy(t),r))),r.promise})(ln(s=Ke(s,wt)))}function bC(s){return oC(ln(s=Ke(s,wt)))}function SC(s){return lC(ln(s=Ke(s,wt)))}function wC(s,e){const t=ln(s=Ke(s,wt)),r=new pC;return fC(t,s._databaseId,e,r),r}function AC(s,e){return dC(ln(s=Ke(s,wt)),e).then((t=>t?new En(s,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fn(St.fromBase64String(e))}catch(t){throw new te(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fn(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dc(e,fn._jsonSchema))return fn.fromBase64String(e.bytes)}}fn._jsonSchemaVersion="firestore/bytes/1.0",fn._jsonSchema={type:Ut("string",fn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bi._jsonSchemaVersion}}static fromJSON(e){if(dc(e,bi._jsonSchema))return new bi(e.latitude,e.longitude)}}bi._jsonSchemaVersion="firestore/geoPoint/1.0",bi._jsonSchema={type:Ut("string",bi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dc(e,Wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Wi(e.vectorValues);throw new te(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:Ut("string",Wi._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=/^__.*__$/;class IC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Nr(e,this.data,this.fieldMask,t,this.fieldTransforms):new dl(e,this.data,t,this.fieldTransforms)}}class Fw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Nr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gw(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:s})}}class sd{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Gw(this.Ac)&&xC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class RC{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||bc(e)}Cc(e,t,r,o=!1){return new sd({Ac:e,methodName:t,Dc:r,path:_t.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function za(s){const e=s._freezeSettings(),t=bc(s._databaseId);return new RC(s._databaseId,!!e.ignoreUndefinedProperties,t)}function ad(s,e,t,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,e,t,o);wy("Data must be an object, but it was:",c,r);const m=Kw(r,c);let g,p;if(u.merge)g=new Nn(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const b of u.mergeFields){const A=lp(e,b,t);if(!c.contains(A))throw new te(F.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Xw(E,A)||E.push(A)}g=new Nn(E),p=c.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,p=c.fieldTransforms;return new IC(new an(m),g,p)}class Ac extends ja{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ac}}function Hw(s,e,t){return new sd({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _y extends ja{_toFieldTransform(e){return new vc(e.path,new tl)}isEqual(e){return e instanceof _y}}class vy extends ja{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Hw(this,e,!0),r=this.vc.map((u=>La(u,t))),o=new Ra(r);return new vc(e.path,o)}isEqual(e){return e instanceof vy&&qo(this.vc,e.vc)}}class Ey extends ja{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Hw(this,e,!0),r=this.vc.map((u=>La(u,t))),o=new Na(r);return new vc(e.path,o)}isEqual(e){return e instanceof Ey&&qo(this.vc,e.vc)}}class Ty extends ja{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new nl(e.serializer,vS(e.serializer,this.Fc));return new vc(e.path,t)}isEqual(e){return e instanceof Ty&&this.Fc===e.Fc}}function by(s,e,t,r){const o=s.Cc(1,e,t);wy("Data must be an object, but it was:",o,r);const u=[],c=an.empty();Ms(r,((g,p)=>{const E=Ay(e,g,t);p=qt(p);const b=o.yc(E);if(p instanceof Ac)u.push(E);else{const A=La(p,b);A!=null&&(u.push(E),c.set(E,A))}}));const m=new Nn(u);return new Fw(c,m,o.fieldTransforms)}function Sy(s,e,t,r,o,u){const c=s.Cc(1,e,t),m=[lp(e,r,t)],g=[o];if(u.length%2!=0)throw new te(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(lp(e,u[A])),g.push(u[A+1]);const p=[],E=an.empty();for(let A=m.length-1;A>=0;--A)if(!Xw(p,m[A])){const P=m[A];let $=g[A];$=qt($);const Z=c.yc(P);if($ instanceof Ac)p.push(P);else{const Y=La($,Z);Y!=null&&(p.push(P),E.set(P,Y))}}const b=new Nn(p);return new Fw(E,b,c.fieldTransforms)}function Qw(s,e,t,r=!1){return La(t,s.Cc(r?4:3,e))}function La(s,e){if(Yw(s=qt(s)))return wy("Unsupported field value:",e,s),Kw(s,e);if(s instanceof ja)return(function(r,o){if(!Gw(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=La(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vS(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Je.fromDate(r);return{timestampValue:il(o.serializer,u)}}if(r instanceof Je){const u=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:il(o.serializer,u)}}if(r instanceof bi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fn)return{bytesValue:DS(o.serializer,r._byteString)};if(r instanceof ct){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Gp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Wi)return(function(c,m){return{mapValue:{fields:{[Mp]:{stringValue:Op},[Jo]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Lp(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${qf(r)}`)})(s,e)}function Kw(s,e){const t={};return Yb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(s,((r,o)=>{const u=La(o,e.mc(r));u!=null&&(t[r]=u)})),{mapValue:{fields:t}}}function Yw(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Je||s instanceof bi||s instanceof fn||s instanceof ct||s instanceof ja||s instanceof Wi)}function wy(s,e,t){if(!Yw(t)||!Cb(t)){const r=qf(t);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function lp(s,e,t){if((e=qt(e))instanceof Cs)return e._internalPath;if(typeof e=="string")return Ay(s,e);throw Bf("Field path arguments must be of type string or ",s,!1,void 0,t)}const NC=new RegExp("[~\\*/\\[\\]]");function Ay(s,e,t){if(e.search(NC)>=0)throw Bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Cs(...e.split("."))._internalPath}catch{throw Bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Bf(s,e,t,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new te(F.INVALID_ARGUMENT,m+s+g)}function Xw(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(od("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class CC extends uc{data(){return super.data()}}function od(s,e){return typeof e=="string"?Ay(s,e):e instanceof Cs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new te(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xy{}class xc extends xy{}function Qi(s,e,...t){let r=[];e instanceof xy&&r.push(e),r=r.concat(t),(function(u){const c=u.filter((g=>g instanceof Iy)).length,m=u.filter((g=>g instanceof ld)).length;if(c>1||c>0&&m>0)throw new te(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class ld extends xc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ld(e,t,r)}_apply(e){const t=this._parse(e);return Jw(e._query,t),new En(e.firestore,e.converter,Yg(e._query,t))}_parse(e){const t=za(e.firestore);return(function(u,c,m,g,p,E,b){let A;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new te(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){HT(b,E);const $=[];for(const Z of b)$.push(GT(g,u,Z));A={arrayValue:{values:$}}}else A=GT(g,u,b)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||HT(b,E),A=Qw(m,c,b,E==="in"||E==="not-in");return qe.create(p,E,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function up(s,e,t){const r=e,o=od("where",s);return ld._create(o,r,t)}class Iy extends xy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Iy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:nt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const g of m)Jw(c,g),c=Yg(c,g)})(e._query,t),new En(e.firestore,e.converter,Yg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ry extends xc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ry(e,t)}_apply(e){const t=(function(o,u,c){if(o.startAt!==null)throw new te(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new te(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rc(u,c)})(e._query,this._field,this._direction);return new En(e.firestore,e.converter,(function(o,u){const c=o.explicitOrderBy.concat([u]);return new Ir(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function DC(s,e="asc"){const t=e,r=od("orderBy",s);return Ry._create(r,t)}class ud extends xc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ud(e,t,r)}_apply(e){return new En(e.firestore,e.converter,Df(e._query,this._limit,this._limitType))}}function VC(s){return Db("limit",s),ud._create("limit",s,"F")}function MC(s){return Db("limitToLast",s),ud._create("limitToLast",s,"L")}class cd extends xc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new cd(e,t,r)}_apply(e){const t=Zw(e,this.type,this._docOrFields,this._inclusive);return new En(e.firestore,e.converter,(function(o,u){return new Ir(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)})(e._query,t))}}function OC(...s){return cd._create("startAt",s,!0)}function PC(...s){return cd._create("startAfter",s,!1)}class hd extends xc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new hd(e,t,r)}_apply(e){const t=Zw(e,this.type,this._docOrFields,this._inclusive);return new En(e.firestore,e.converter,(function(o,u){return new Ir(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)})(e._query,t))}}function jC(...s){return hd._create("endBefore",s,!1)}function zC(...s){return hd._create("endAt",s,!0)}function Zw(s,e,t,r){if(t[0]=qt(t[0]),t[0]instanceof uc)return(function(u,c,m,g,p){if(!g)throw new te(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const E=[];for(const b of Bo(u))if(b.field.isKeyField())E.push(xa(c,g.key));else{const A=g.data.field(b.field);if(Kf(A))throw new te(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const P=b.field.canonicalString();throw new te(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}E.push(A)}return new Is(E,p)})(s._query,s.firestore._databaseId,e,t[0]._document,r);{const o=za(s.firestore);return(function(c,m,g,p,E,b){const A=c.explicitOrderBy;if(E.length>A.length)throw new te(F.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let $=0;$<E.length;$++){const Z=E[$];if(A[$].field.isKeyField()){if(typeof Z!="string")throw new te(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof Z}`);if(!jp(c)&&Z.indexOf("/")!==-1)throw new te(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${Z}' contains a slash.`);const Y=c.path.child(ke.fromString(Z));if(!he.isDocumentKey(Y))throw new te(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Y}' is not because it contains an odd number of segments.`);const se=new he(Y);P.push(xa(m,se))}else{const Y=Qw(g,p,Z);P.push(Y)}}return new Is(P,b)})(s._query,s.firestore._databaseId,o,e,t,r)}}function GT(s,e,t){if(typeof(t=qt(t))=="string"){if(t==="")throw new te(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jp(e)&&t.indexOf("/")!==-1)throw new te(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ke.fromString(t));if(!he.isDocumentKey(r))throw new te(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xa(s,new he(r))}if(t instanceof ct)return xa(s,t._key);throw new te(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(t)}.`)}function HT(s,e){if(!Array.isArray(s)||s.length===0)throw new te(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Jw(s,e){const t=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new te(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Ny{convertValue(e,t="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ms(e,((o,u)=>{r[o]=this.convertValue(u,t)})),r}convertVectorValue(e){var r,o,u;const t=(u=(o=(r=e.fields)==null?void 0:r[Jo].arrayValue)==null?void 0:o.values)==null?void 0:u.map((c=>yt(c.doubleValue)));return new Wi(t)}convertGeoPoint(e){return new bi(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tc(e));default:return null}}convertTimestamp(e){const t=Ar(e);return new Je(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ke.fromString(e);ve(qS(r),9688,{name:e});const o=new ws(r.get(1),r.get(3)),u=new he(r.popFirst(5));return o.isEqual(t)||Nt(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class LC extends Ny{constructor(e){super(),this.firestore=e}convertBytes(e){return new fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}}class ba{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ai=class Ww extends uc{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(od("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ww._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ai._jsonSchemaVersion="firestore/documentSnapshot/1.0",ai._jsonSchema={type:Ut("string",ai._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};let Hu=class extends ai{data(e={}){return super.data(e)}},Si=class eA{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ba(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Hu(this._firestore,this._userDataWriter,r.key,r,new ba(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new Hu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ba(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Hu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ba(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:kC(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eA._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ap.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function kC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:s})}}function tA(s,e){return s instanceof ai&&e instanceof ai?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(s._document===null?e._document===null:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof Si&&e instanceof Si&&s._firestore===e._firestore&&Bw(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(s){s=Ke(s,ct);const e=Ke(s.firestore,wt);return Mw(ln(e),s._key).then((t=>Cy(e,s,t)))}Si._jsonSchemaVersion="firestore/querySnapshot/1.0",Si._jsonSchema={type:Ut("string",Si._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class ka extends Ny{constructor(e){super(),this.firestore=e}convertBytes(e){return new fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}}function UC(s){s=Ke(s,ct);const e=Ke(s.firestore,wt),t=ln(e),r=new ka(e);return uC(t,s._key).then((o=>new ai(e,r,s._key,o,new ba(o!==null&&o.hasLocalMutations,!0),s.converter)))}function qC(s){s=Ke(s,ct);const e=Ke(s.firestore,wt);return Mw(ln(e),s._key,{source:"server"}).then((t=>Cy(e,s,t)))}function cp(s){s=Ke(s,En);const e=Ke(s.firestore,wt),t=ln(e),r=new ka(e);return $w(s._query),Ow(t,s._query).then((o=>new Si(e,r,s,o)))}function FC(s){s=Ke(s,En);const e=Ke(s.firestore,wt),t=ln(e),r=new ka(e);return cC(t,s._query).then((o=>new Si(e,r,s,o)))}function GC(s){s=Ke(s,En);const e=Ke(s.firestore,wt),t=ln(e),r=new ka(e);return Ow(t,s._query,{source:"server"}).then((o=>new Si(e,r,s,o)))}function QT(s,e,t){s=Ke(s,ct);const r=Ke(s.firestore,wt),o=fd(s.converter,e,t);return vl(r,[ad(za(r),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,vt.none())])}function ko(s,e,t,...r){s=Ke(s,ct);const o=Ke(s.firestore,wt),u=za(o);let c;return c=typeof(e=qt(e))=="string"||e instanceof Cs?Sy(u,"updateDoc",s._key,e,t,r):by(u,"updateDoc",s._key,e),vl(o,[c.toMutation(s._key,vt.exists(!0))])}function HC(s){return vl(Ke(s.firestore,wt),[new ml(s._key,vt.none())])}function QC(s,e){const t=Ke(s.firestore,wt),r=rn(s),o=fd(s.converter,e);return vl(t,[ad(za(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,vt.exists(!1))]).then((()=>r))}function Qu(s,...e){var g,p,E;s=qt(s);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||op(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(op(e[r])){const b=e[r];e[r]=(g=b.next)==null?void 0:g.bind(b),e[r+1]=(p=b.error)==null?void 0:p.bind(b),e[r+2]=(E=b.complete)==null?void 0:E.bind(b)}let u,c,m;if(s instanceof ct)c=Ke(s.firestore,wt),m=fl(s._key.path),u={next:b=>{e[r]&&e[r](Cy(c,s,b))},error:e[r+1],complete:e[r+2]};else{const b=Ke(s,En);c=Ke(b.firestore,wt),m=b._query;const A=new ka(c);u={next:P=>{e[r]&&e[r](new Si(c,A,b,P))},error:e[r+1],complete:e[r+2]},$w(s._query)}return(function(A,P,$,Z){const Y=new id(Z),se=new uy(P,Y,$);return A.asyncQueue.enqueueAndForget((async()=>ay(await ul(A),se))),()=>{Y.Nu(),A.asyncQueue.enqueueAndForget((async()=>oy(await ul(A),se)))}})(ln(c),m,o,u)}function KC(s,e){return hC(ln(s=Ke(s,wt)),op(e)?e:{next:e})}function vl(s,e){return(function(r,o){const u=new on;return r.asyncQueue.enqueueAndForget((async()=>LN(await yy(r),o,u))),u.promise})(ln(s),e)}function Cy(s,e,t){const r=t.docs.get(e._key),o=new ka(s);return new ai(s,o,e._key,r,new ba(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nA=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=za(e)}set(e,t,r){this._verifyNotCommitted();const o=ps(e,this._firestore),u=fd(o.converter,t,r),c=ad(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(c.toMutation(o._key,vt.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=ps(e,this._firestore);let c;return c=typeof(t=qt(t))=="string"||t instanceof Cs?Sy(this._dataReader,"WriteBatch.update",u._key,t,r,o):by(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ps(e,this._firestore);return this._mutations=this._mutations.concat(new ml(t._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ps(s,e){if((s=qt(s)).firestore!==e)throw new te(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=za(e)}get(e){const t=ps(e,this._firestore),r=new LC(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return ge(24041);const u=o[0];if(u.isFoundDocument())return new uc(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new uc(this._firestore,r,t._key,null,t.converter);throw ge(18433,{doc:u})}))}set(e,t,r){const o=ps(e,this._firestore),u=fd(o.converter,t,r),c=ad(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=ps(e,this._firestore);let c;return c=typeof(t=qt(t))=="string"||t instanceof Cs?Sy(this._dataReader,"Transaction.update",u._key,t,r,o):by(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=ps(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $C=class extends XC{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ps(e,this._firestore),r=new ka(this._firestore);return super.get(e).then((o=>new ai(this._firestore,r,t._key,o._document,new ba(!1,!1),t.converter)))}};function ZC(s,e,t){s=Ke(s,wt);const r={...YC,...t};return(function(u){if(u.maxAttempts<1)throw new te(F.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(u,c,m){const g=new on;return u.asyncQueue.enqueueAndForget((async()=>{const p=await aC(u);new rC(u.asyncQueue,p,m,c,g).ju()})),g.promise})(ln(s),(o=>e(new $C(s,o))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(){return new Ac("deleteField")}function WC(){return new _y("serverTimestamp")}function eD(...s){return new vy("arrayUnion",s)}function tD(...s){return new Ey("arrayRemove",s)}function nD(s){return new Ty("increment",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(s){return ln(s=Ke(s,wt)),new nA(s,(e=>vl(s,e)))}(function(e,t=!0){(function(o){hl=o})(Tp),Ho(new Aa("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new wt(new JI(r.getProvider("auth-internal")),new tR(c,r.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new te(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ws(p.options.projectId,E)})(c,o),c);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Sr(SE,wE,e),Sr(SE,wE,"esm2020")})();const iD="@firebase/firestore-compat",rD="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(s,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new te("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(){if(typeof Uint8Array>"u")throw new te("unimplemented","Uint8Arrays are not available in this environment.")}function YT(){if(!jR())throw new te("unimplemented","Blobs are unavailable in Firestore in this environment.")}class cc{constructor(e){this._delegate=e}static fromBase64String(e){return YT(),new cc(fn.fromBase64String(e))}static fromUint8Array(e){return KT(),new cc(fn.fromUint8Array(e))}toBase64(){return YT(),this._delegate.toBase64()}toUint8Array(){return KT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(s){return sD(s,["next","error","complete"])}function sD(s,e){if(typeof s!="object"||s===null)return!1;const t=s;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{enableIndexedDbPersistence(e,t){return _C(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return vC(e._delegate)}clearIndexedDbPersistence(e){return EC(e._delegate)}}class iA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ws||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&er("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){mC(this._delegate,e,t,r)}enableNetwork(){return bC(this._delegate)}disableNetwork(){return SC(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Nb("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return TC(this._delegate)}onSnapshotsInSync(e){return KC(this._delegate,e)}get app(){if(!this._appCompat)throw new te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cl(this,Ei(this._delegate,e))}catch(t){throw _n(t,"collection()","Firestore.collection()")}}doc(e){try{return new si(this,rn(this._delegate,e))}catch(t){throw _n(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new yn(this,gC(this._delegate,e))}catch(t){throw _n(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return ZC(this._delegate,t=>e(new rA(this,t)))}batch(){return ln(this._delegate),new sA(new nA(this._delegate,e=>vl(this._delegate,e)))}loadBundle(e){return wC(this._delegate,e)}namedQuery(e){return AC(this._delegate,e).then(t=>t?new yn(this,t):null)}}class dd extends Ny{constructor(e){super(),this.firestore=e}convertBytes(e){return new cc(new fn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return si.forKey(t,this.firestore,null)}}function oD(s){YI(s)}class rA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new dd(e)}get(e){const t=Sa(e);return this._delegate.get(t).then(r=>new hc(this._firestore,new ai(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Sa(e);return r?(Dy("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Sa(e);return arguments.length===2?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Sa(e);return this._delegate.delete(t),this}}class sA{constructor(e){this._delegate=e}set(e,t,r){const o=Sa(e);return r?(Dy("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Sa(e);return arguments.length===2?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Sa(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Oa{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Hu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Oa.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Oa(e,new dd(e),t),o.set(t,u)),u}}Oa.INSTANCES=new WeakMap;class si{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dd(e)}static forPath(e,t,r){if(e.length%2!==0)throw new te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new si(t,new ct(t._delegate,r,new he(e)))}static forKey(e,t,r){return new si(t,new ct(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new cl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cl(this.firestore,Ei(this._delegate,e))}catch(t){throw _n(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=qt(e),e instanceof ct?kw(this._delegate,e):!1}set(e,t){t=Dy("DocumentReference.set",t);try{return t?QT(this._delegate,e,t):QT(this._delegate,e)}catch(r){throw _n(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?ko(this._delegate,e):ko(this._delegate,e,t,...r)}catch(o){throw _n(o,"updateDoc()","DocumentReference.update()")}}delete(){return HC(this._delegate)}onSnapshot(...e){const t=aA(e),r=oA(e,o=>new hc(this.firestore,new ai(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Qu(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=UC(this._delegate):(e==null?void 0:e.source)==="server"?t=qC(this._delegate):t=BC(this._delegate),t.then(r=>new hc(this.firestore,new ai(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new si(this.firestore,e?this._delegate.withConverter(Oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _n(s,e,t){return s.message=s.message.replace(e,t),s}function aA(s){for(const e of s)if(typeof e=="object"&&!hp(e))return e;return{}}function oA(s,e){var r,o;let t;return hp(s[0])?t=s[0]:hp(s[1])?t=s[1]:typeof s[0]=="function"?t={next:s[0],error:s[1],complete:s[2]}:t={next:s[1],error:s[2],complete:s[3]},{next:u=>{t.next&&t.next(e(u))},error:(r=t.error)==null?void 0:r.bind(t),complete:(o=t.complete)==null?void 0:o.bind(t)}}class hc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new si(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return tA(this._delegate,e._delegate)}}class fc extends hc{data(e){const t=this._delegate.data(e);return this._delegate._converter||XI(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class yn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dd(e)}where(e,t,r){try{return new yn(this.firestore,Qi(this._delegate,up(e,t,r)))}catch(o){throw _n(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new yn(this.firestore,Qi(this._delegate,DC(e,t)))}catch(r){throw _n(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new yn(this.firestore,Qi(this._delegate,VC(e)))}catch(t){throw _n(t,"limit()","Query.limit()")}}limitToLast(e){try{return new yn(this.firestore,Qi(this._delegate,MC(e)))}catch(t){throw _n(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new yn(this.firestore,Qi(this._delegate,OC(...e)))}catch(t){throw _n(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new yn(this.firestore,Qi(this._delegate,PC(...e)))}catch(t){throw _n(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new yn(this.firestore,Qi(this._delegate,jC(...e)))}catch(t){throw _n(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new yn(this.firestore,Qi(this._delegate,zC(...e)))}catch(t){throw _n(t,"endAt()","Query.endAt()")}}isEqual(e){return Bw(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=FC(this._delegate):(e==null?void 0:e.source)==="server"?t=GC(this._delegate):t=cp(this._delegate),t.then(r=>new fp(this.firestore,new Si(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=aA(e),r=oA(e,o=>new fp(this.firestore,new Si(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Qu(this._delegate,t,r)}withConverter(e){return new yn(this.firestore,e?this._delegate.withConverter(Oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class lD{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new fc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new yn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new fc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new lD(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new fc(this._firestore,r))})}isEqual(e){return tA(this._delegate,e._delegate)}}class cl extends yn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new si(this.firestore,e):null}doc(e){try{return e===void 0?new si(this.firestore,rn(this._delegate)):new si(this.firestore,rn(this._delegate,e))}catch(t){throw _n(t,"doc()","CollectionReference.doc()")}}add(e){return QC(this._delegate,e).then(t=>new si(this.firestore,t))}isEqual(e){return kw(this._delegate,e._delegate)}withConverter(e){return new cl(this.firestore,e?this._delegate.withConverter(Oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Sa(s){return Ke(s,ct)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(...e){this._delegate=new Cs(...e)}static documentId(){return new Vy(_t.keyField().canonicalString())}isEqual(e){return e=qt(e),e instanceof Cs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{static serverTimestamp(){const e=WC();return e._methodName="FieldValue.serverTimestamp",new Ea(e)}static delete(){const e=JC();return e._methodName="FieldValue.delete",new Ea(e)}static arrayUnion(...e){const t=eD(...e);return t._methodName="FieldValue.arrayUnion",new Ea(t)}static arrayRemove(...e){const t=tD(...e);return t._methodName="FieldValue.arrayRemove",new Ea(t)}static increment(e){const t=nD(e);return t._methodName="FieldValue.increment",new Ea(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD={Firestore:iA,GeoPoint:bi,Timestamp:Je,Blob:cc,Transaction:rA,WriteBatch:sA,DocumentReference:si,DocumentSnapshot:hc,Query:yn,QueryDocumentSnapshot:fc,QuerySnapshot:fp,CollectionReference:cl,FieldPath:Vy,FieldValue:Ea,setLogLevel:oD,CACHE_SIZE_UNLIMITED:yC};function cD(s,e){s.INTERNAL.registerComponent(new Aa("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps({...uD}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(s){cD(s,(e,t)=>new iA(e,t,new aD)),s.registerVersion(iD,rD)}hD(Xu);const fD={apiKey:"AIzaSyDaR-tiUxTbRZgCBH1Bx2XmLh8q8BId0Zw",authDomain:"gram-8e57c.firebaseapp.com",projectId:"gram-8e57c",storageBucket:"gram-8e57c.firebasestorage.app",messagingSenderId:"912657611967",appId:"1:912657611967:web:adc37d2ea288a14dbd9a0a",measurementId:"G-CX4YX40M85"};Xu.apps.length||Xu.initializeApp(fD);const Et=Xu.firestore(),dD=({message:s,type:e,onClose:t})=>{const r=e==="success"?"bg-green-500":"bg-red-500";return ye.useEffect(()=>{const o=setTimeout(t,4e3);return()=>clearTimeout(o)},[t]),T.jsxs("div",{className:`fixed top-5 right-5 z-50 text-white px-6 py-3 rounded-lg shadow-lg flex items-center ${r}`,children:[T.jsx("p",{children:s}),T.jsx("button",{onClick:t,className:"ml-4 text-xl font-semibold",children:"×"})]})},mD=({onLogout:s})=>{const[e,t]=ye.useState([]),[r,o]=ye.useState([]),[u,c]=ye.useState([]),[m,g]=ye.useState(null),[p,E]=ye.useState(null),[b,A]=ye.useState(null),[P,$]=ye.useState(vi.Dashboard),[Z,Y]=ye.useState(!1),[se,me]=ye.useState(null),[le,we]=ye.useState(!0);ye.useEffect(()=>{we(!0);const Q=Qu(Ei(Et,"students"),ue=>{t(ue.docs.map(xe=>({...xe.data(),id:xe.id}))),we(!1)}),re=Qu(Ei(Et,"batches"),ue=>{o(ue.docs.map(xe=>({...xe.data(),id:xe.id})))}),fe=Qu(Ei(Et,"transactions"),ue=>{c(ue.docs.map(xe=>({...xe.data(),id:xe.id})))});return()=>{Q(),re(),fe()}},[]);const Ie=ye.useCallback(async Q=>{const re=Cu(Et),fe=new Map;Q.forEach((ue,xe)=>{const De=rn(Ei(Et,"students")),ut=De.id,Dn=["yes","true","paid",1].includes(String(ue["Full Paid"]).toLowerCase()),Hn=parseFloat(ue["Amount Paid"])||0,wi=Hn>0?[{id:`payment-${ut}-initial`,amount:Hn,date:ue["Payment Date"]||new Date().toISOString().slice(0,10),method:ue["Payment Method"]||"Other",remarks:"Initial payment from upload"}]:[],Vn={"Roll No":ue["Roll No"]??"N/A",Name:ue.Name??"Unnamed Student",Father:ue.Father??"",Mother:ue.Mother??"",Phone:ue.Phone??"","Emergency Number":ue["Emergency Number"]??"",Gender:ue.Gender??"Other",Batch:ue.Batch||"Unassigned",Address:ue.Address??"","Total Fees":parseFloat(ue["Total Fees"])||0,payments:wi,Remarks:ue.Remarks||"","Full Paid":Dn,Mode:ue.Mode==="Monthly"?"Monthly":ue.Mode==="One Time"?"One Time":void 0};re.set(De,Vn);const nr=Vn.Batch;fe.has(nr)||fe.set(nr,[]),fe.get(nr).push(ut)}),Array.from(fe.entries()).forEach(([ue,xe])=>{const De=rn(Ei(Et,"batches")),ut={name:ue,studentIds:xe,wardens:[]};re.set(De,ut)});try{await re.commit(),me({message:`${Q.length} records loaded & ${fe.size} batches created.`,type:"success",onClose:()=>me(null)}),$(vi.Students)}catch(ue){console.error("Error writing batch to Firestore: ",ue),me({message:"Failed to upload data.",type:"error",onClose:()=>me(null)})}},[]),be=ye.useCallback(async Q=>{const{id:re,...fe}=Q,ue=rn(Et,"students",re);await ko(ue,fe),g(null)},[]),R=ye.useCallback(async(Q,re)=>{const fe=Cu(Et),ue=rn(Et,"students",Q.id),xe=rn(Ei(Et,"transactions")),De={...re,studentId:Q.id,studentName:Q.Name,studentRollNo:Q["Roll No"]};fe.set(xe,De),fe.update(ue,{payments:[...Q.payments||[],re]}),await fe.commit(),A(null)},[]),I=ye.useCallback(async Q=>{if(!p||Q!==p.id)return;const re=Cu(Et),fe=rn(Et,"students",Q);re.delete(fe);const ue=Qi(Ei(Et,"transactions"),up("studentId","==",Q));(await cp(ue)).forEach(ut=>re.delete(ut.ref));const De=r.filter(ut=>ut.studentIds.includes(Q));for(const ut of De){const Dn=ut.studentIds.filter(wi=>wi!==Q),Hn=rn(Et,"batches",ut.id);Dn.length===0?re.delete(Hn):re.update(Hn,{studentIds:Dn})}await re.commit(),E(null)},[p,r]),N=ye.useCallback(async(Q,re)=>{const fe={name:Q,studentIds:re,wardens:[]},ue=rn(Ei(Et,"batches")),xe=Cu(Et);xe.set(ue,fe),await xe.commit()},[]),O=ye.useCallback(async Q=>{const re=r.find(xe=>xe.id===Q);if(!re)return;const fe=Cu(Et),ue=new Set(re.studentIds);for(const xe of ue){fe.delete(rn(Et,"students",xe));const De=Qi(Ei(Et,"transactions"),up("studentId","==",xe));(await cp(De)).forEach(Dn=>fe.delete(Dn.ref))}fe.delete(rn(Et,"batches",Q)),await fe.commit()},[r]),V=ye.useCallback(async(Q,re)=>{const fe=rn(Et,"batches",Q),ue=r.find(De=>De.id===Q);if(!ue||ue.wardens.some(De=>De.wardenStudentId===re))return;const xe={wardenStudentId:re,assignedStudentIds:[]};await ko(fe,{wardens:[...ue.wardens,xe]})},[r]),j=ye.useCallback(async(Q,re)=>{const fe=rn(Et,"batches",Q),ue=r.find(De=>De.id===Q);if(!ue)return;const xe=ue.wardens.filter(De=>De.wardenStudentId!==re);await ko(fe,{wardens:xe})},[r]),x=ye.useCallback(async(Q,re,fe)=>{const ue=rn(Et,"batches",Q),xe=r.find(ut=>ut.id===Q);if(!xe)return;const De=xe.wardens.map(ut=>ut.wardenStudentId===re?{...ut,assignedStudentIds:fe}:ut);await ko(ue,{wardens:De})},[r]),Re=Q=>Q.payments.reduce((re,fe)=>re+fe.amount,0),He=ye.useMemo(()=>e.filter(Q=>{var re;return((re=Q.Gender)==null?void 0:re.toLowerCase())==="female"}).length,[e]),H=ye.useMemo(()=>e.filter(Q=>{var re;return((re=Q.Gender)==null?void 0:re.toLowerCase())==="male"}).length,[e]),ae=ye.useMemo(()=>e.filter(Q=>Q["Full Paid"]||Re(Q)>=Q["Total Fees"]).length,[e]),ie=ye.useMemo(()=>e.reduce((Q,re)=>Q+Re(re),0),[e]),pe=ye.useMemo(()=>e.reduce((Q,re)=>{if(re["Full Paid"])return Q;const fe=re["Total Fees"]-Re(re);return Q+(fe>0?fe:0)},0),[e]),Ne=Q=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(Q),D=()=>{if(le)return T.jsx("div",{className:"flex items-center justify-center h-full",children:T.jsxs("div",{className:"text-center",children:[T.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-600 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),T.jsx("p",{className:"mt-2 text-gray-600",children:"Loading data from database..."})]})});switch(P){case vi.Students:return T.jsx(W1,{students:e,onEditStudent:g,onCreateBatch:N,onDeleteStudent:E,onRecordPayment:A});case vi.Batches:return T.jsx(tx,{batches:r,students:e,onDeleteBatch:O,onAddWarden:V,onRemoveWarden:j,onAssignStudents:x});case vi.Payments:return T.jsx(ix,{transactions:u});case vi.Dashboard:default:return T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Overview"}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[T.jsx(cs,{title:"Total Students",value:e.length.toString()}),T.jsx(cs,{title:"Girls",value:He.toString()}),T.jsx(cs,{title:"Boys",value:H.toString()}),T.jsx(cs,{title:"Total Batches",value:r.length.toString()}),T.jsx(cs,{title:"Fees Collected",value:Ne(ie)}),T.jsx(cs,{title:"Fees Remaining",value:Ne(pe)}),T.jsx(cs,{title:"Full Paid Students",value:ae.toString()}),T.jsx(cs,{title:"Payments Recorded",value:u.length.toString()})]}),T.jsxs("div",{className:"mt-8 p-6 bg-white rounded-lg shadow",children:[T.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Upload Student Data"}),T.jsx("p",{className:"text-gray-600 mb-4",children:"Upload an Excel file to add new students. This will not affect existing data. Recommended columns: 'Roll No', 'Name', 'Father', 'Mother', 'Phone', 'Gender', 'Batch', 'Address', 'Total Fees', 'Amount Paid', 'Full Paid', 'Mode'."}),T.jsx(Z1,{onDataLoaded:Ie})]})]})}},X=Q=>{$(Q),Y(!1)},oe=({currentView:Q,targetView:re,setView:fe,children:ue})=>T.jsx("button",{onClick:()=>fe(re),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 text-left w-full ${Q===re?"bg-indigo-600 text-white":"text-gray-600 hover:bg-gray-200"}`,children:ue});return T.jsxs("div",{className:"flex h-screen bg-gray-100",children:[se&&T.jsx(dD,{...se}),Z&&T.jsx("div",{onClick:()=>Y(!1),className:"fixed inset-0 bg-black opacity-50 z-20 lg:hidden"}),T.jsxs("aside",{className:`w-64 flex-shrink-0 bg-white shadow-md p-4 flex flex-col justify-between fixed inset-y-0 left-0 transform ${Z?"translate-x-0":"-translate-x-full"} lg:relative lg:translate-x-0 transition-transform duration-300 ease-in-out z-30`,children:[T.jsxs("div",{children:[T.jsx("h1",{className:"text-2xl font-bold text-indigo-600 mb-8 px-2",children:"Vidya Gram"}),T.jsxs("nav",{className:"flex flex-col space-y-2",children:[T.jsx(oe,{currentView:P,targetView:vi.Dashboard,setView:X,children:"Dashboard"}),T.jsx(oe,{currentView:P,targetView:vi.Students,setView:X,children:"Students"}),T.jsx(oe,{currentView:P,targetView:vi.Batches,setView:X,children:"Batches"}),T.jsx(oe,{currentView:P,targetView:vi.Payments,setView:X,children:"Payments"})]})]}),T.jsx("button",{onClick:s,className:"w-full px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-md hover:bg-red-600",children:"Logout"})]}),T.jsxs("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto",children:[T.jsx("button",{onClick:()=>Y(!0),className:"lg:hidden p-2 mb-4 text-gray-600 bg-white rounded-md shadow",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})}),D()]}),m&&T.jsx(ex,{student:m,onClose:()=>g(null),onSave:be}),b&&T.jsx(nx,{student:b,onClose:()=>A(null),onSave:R}),p&&T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[T.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Deletion"}),T.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:['Are you sure you want to delete the student "',p.Name,'"? This will also remove them from batches and delete their payment history. This action cannot be undone.']}),T.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[T.jsx("button",{onClick:()=>E(null),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),T.jsx("button",{onClick:()=>I(p.id),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})},gD=()=>{const[s,e]=ye.useState(!1),t=ye.useCallback(()=>{e(!0)},[]),r=ye.useCallback(()=>{e(!1)},[]);return T.jsx("div",{className:"min-h-screen bg-slate-100 font-sans",children:s?T.jsx(mD,{onLogout:r}):T.jsx($1,{onLoginSuccess:t})})},lA=document.getElementById("root");if(!lA)throw new Error("Could not find root element to mount to");const pD=X1.createRoot(lA);pD.render(T.jsx($T.StrictMode,{children:T.jsx(gD,{})}));
