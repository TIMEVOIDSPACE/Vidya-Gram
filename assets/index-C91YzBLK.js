(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function HE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Bg={exports:{}},zu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT;function oR(){if(UT)return zu;UT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var m in a)m!=="key"&&(l[m]=a[m])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return zu.Fragment=e,zu.jsx=t,zu.jsxs=t,zu}var LT;function lR(){return LT||(LT=1,Bg.exports=oR()),Bg.exports}var b=lR(),zg={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function uR(){if(BT)return Ve;BT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function D(V){return V===null||typeof V!="object"?null:(V=S&&V[S]||V["@@iterator"],typeof V=="function"?V:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,U={};function ie(V,Z,ce){this.props=V,this.context=Z,this.refs=U,this.updater=ce||G}ie.prototype.isReactComponent={},ie.prototype.setState=function(V,Z){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Z,"setState")},ie.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function re(){}re.prototype=ie.prototype;function se(V,Z,ce){this.props=V,this.context=Z,this.refs=U,this.updater=ce||G}var ge=se.prototype=new re;ge.constructor=se,z(ge,ie.prototype),ge.isPureReactComponent=!0;var Se=Array.isArray;function Te(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(V,Z,ce){var X=ce.ref;return{$$typeof:r,type:V,key:Z,ref:X!==void 0?X:null,props:ce}}function P(V,Z){return N(V.type,Z,V.props)}function O(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function k(V){var Z={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ce){return Z[ce]})}var x=/\/+/g;function Ne(V,Z){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):Z.toString(36)}function He(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(Te,Te):(V.status="pending",V.then(function(Z){V.status==="pending"&&(V.status="fulfilled",V.value=Z)},function(Z){V.status==="pending"&&(V.status="rejected",V.reason=Z)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Y(V,Z,ce,X,oe){var fe=typeof V;(fe==="undefined"||fe==="boolean")&&(V=null);var ue=!1;if(V===null)ue=!0;else switch(fe){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(V.$$typeof){case r:case e:ue=!0;break;case v:return ue=V._init,Y(ue(V._payload),Z,ce,X,oe)}}if(ue)return oe=oe(V),ue=X===""?"."+Ne(V,0):X,Se(oe)?(ce="",ue!=null&&(ce=ue.replace(x,"$&/")+"/"),Y(oe,Z,ce,"",function(Ye){return Ye})):oe!=null&&(O(oe)&&(oe=P(oe,ce+(oe.key==null||V&&V.key===oe.key?"":(""+oe.key).replace(x,"$&/")+"/")+ue)),Z.push(oe)),1;ue=0;var Ie=X===""?".":X+":";if(Se(V))for(var Ae=0;Ae<V.length;Ae++)X=V[Ae],fe=Ie+Ne(X,Ae),ue+=Y(X,Z,ce,fe,oe);else if(Ae=D(V),typeof Ae=="function")for(V=Ae.call(V),Ae=0;!(X=V.next()).done;)X=X.value,fe=Ie+Ne(X,Ae++),ue+=Y(X,Z,ce,fe,oe);else if(fe==="object"){if(typeof V.then=="function")return Y(He(V),Z,ce,X,oe);throw Z=String(V),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ue}function le(V,Z,ce){if(V==null)return V;var X=[],oe=0;return Y(V,X,"","",function(fe){return Z.call(ce,fe,oe++)}),X}function ae(V){if(V._status===-1){var Z=V._result;Z=Z(),Z.then(function(ce){(V._status===0||V._status===-1)&&(V._status=1,V._result=ce)},function(ce){(V._status===0||V._status===-1)&&(V._status=2,V._result=ce)}),V._status===-1&&(V._status=0,V._result=Z)}if(V._status===1)return V._result.default;throw V._result}var _e=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ce={map:le,forEach:function(V,Z,ce){le(V,function(){Z.apply(this,arguments)},ce)},count:function(V){var Z=0;return le(V,function(){Z++}),Z},toArray:function(V){return le(V,function(Z){return Z})||[]},only:function(V){if(!O(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ve.Activity=E,Ve.Children=Ce,Ve.Component=ie,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=se,Ve.StrictMode=i,Ve.Suspense=g,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(V){return I.H.useMemoCache(V)}},Ve.cache=function(V){return function(){return V.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(V,Z,ce){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var X=z({},V.props),oe=V.key;if(Z!=null)for(fe in Z.key!==void 0&&(oe=""+Z.key),Z)!R.call(Z,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&Z.ref===void 0||(X[fe]=Z[fe]);var fe=arguments.length-2;if(fe===1)X.children=ce;else if(1<fe){for(var ue=Array(fe),Ie=0;Ie<fe;Ie++)ue[Ie]=arguments[Ie+2];X.children=ue}return N(V.type,oe,X)},Ve.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Ve.createElement=function(V,Z,ce){var X,oe={},fe=null;if(Z!=null)for(X in Z.key!==void 0&&(fe=""+Z.key),Z)R.call(Z,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(oe[X]=Z[X]);var ue=arguments.length-2;if(ue===1)oe.children=ce;else if(1<ue){for(var Ie=Array(ue),Ae=0;Ae<ue;Ae++)Ie[Ae]=arguments[Ae+2];oe.children=Ie}if(V&&V.defaultProps)for(X in ue=V.defaultProps,ue)oe[X]===void 0&&(oe[X]=ue[X]);return N(V,fe,oe)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(V){return{$$typeof:m,render:V}},Ve.isValidElement=O,Ve.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:ae}},Ve.memo=function(V,Z){return{$$typeof:p,type:V,compare:Z===void 0?null:Z}},Ve.startTransition=function(V){var Z=I.T,ce={};I.T=ce;try{var X=V(),oe=I.S;oe!==null&&oe(ce,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(Te,_e)}catch(fe){_e(fe)}finally{Z!==null&&ce.types!==null&&(Z.types=ce.types),I.T=Z}},Ve.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ve.use=function(V){return I.H.use(V)},Ve.useActionState=function(V,Z,ce){return I.H.useActionState(V,Z,ce)},Ve.useCallback=function(V,Z){return I.H.useCallback(V,Z)},Ve.useContext=function(V){return I.H.useContext(V)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(V,Z){return I.H.useDeferredValue(V,Z)},Ve.useEffect=function(V,Z){return I.H.useEffect(V,Z)},Ve.useEffectEvent=function(V){return I.H.useEffectEvent(V)},Ve.useId=function(){return I.H.useId()},Ve.useImperativeHandle=function(V,Z,ce){return I.H.useImperativeHandle(V,Z,ce)},Ve.useInsertionEffect=function(V,Z){return I.H.useInsertionEffect(V,Z)},Ve.useLayoutEffect=function(V,Z){return I.H.useLayoutEffect(V,Z)},Ve.useMemo=function(V,Z){return I.H.useMemo(V,Z)},Ve.useOptimistic=function(V,Z){return I.H.useOptimistic(V,Z)},Ve.useReducer=function(V,Z,ce){return I.H.useReducer(V,Z,ce)},Ve.useRef=function(V){return I.H.useRef(V)},Ve.useState=function(V){return I.H.useState(V)},Ve.useSyncExternalStore=function(V,Z,ce){return I.H.useSyncExternalStore(V,Z,ce)},Ve.useTransition=function(){return I.H.useTransition()},Ve.version="19.2.0",Ve}var zT;function Kp(){return zT||(zT=1,zg.exports=uR()),zg.exports}var ye=Kp();const QE=HE(ye);var qg={exports:{}},qu={},Fg={exports:{}},Gg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function cR(){return qT||(qT=1,(function(r){function e(Y,le){var ae=Y.length;Y.push(le);e:for(;0<ae;){var _e=ae-1>>>1,Ce=Y[_e];if(0<a(Ce,le))Y[_e]=le,Y[ae]=Ce,ae=_e;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var le=Y[0],ae=Y.pop();if(ae!==le){Y[0]=ae;e:for(var _e=0,Ce=Y.length,V=Ce>>>1;_e<V;){var Z=2*(_e+1)-1,ce=Y[Z],X=Z+1,oe=Y[X];if(0>a(ce,ae))X<Ce&&0>a(oe,ce)?(Y[_e]=oe,Y[X]=ae,_e=X):(Y[_e]=ce,Y[Z]=ae,_e=Z);else if(X<Ce&&0>a(oe,ae))Y[_e]=oe,Y[X]=ae,_e=X;else break e}}return le}function a(Y,le){var ae=Y.sortIndex-le.sortIndex;return ae!==0?ae:Y.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,m=c.now();r.unstable_now=function(){return c.now()-m}}var g=[],p=[],v=1,E=null,S=3,D=!1,G=!1,z=!1,U=!1,ie=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function ge(Y){for(var le=t(p);le!==null;){if(le.callback===null)i(p);else if(le.startTime<=Y)i(p),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(p)}}function Se(Y){if(z=!1,ge(Y),!G)if(t(g)!==null)G=!0,Te||(Te=!0,k());else{var le=t(p);le!==null&&He(Se,le.startTime-Y)}}var Te=!1,I=-1,R=5,N=-1;function P(){return U?!0:!(r.unstable_now()-N<R)}function O(){if(U=!1,Te){var Y=r.unstable_now();N=Y;var le=!0;try{e:{G=!1,z&&(z=!1,re(I),I=-1),D=!0;var ae=S;try{t:{for(ge(Y),E=t(g);E!==null&&!(E.expirationTime>Y&&P());){var _e=E.callback;if(typeof _e=="function"){E.callback=null,S=E.priorityLevel;var Ce=_e(E.expirationTime<=Y);if(Y=r.unstable_now(),typeof Ce=="function"){E.callback=Ce,ge(Y),le=!0;break t}E===t(g)&&i(g),ge(Y)}else i(g);E=t(g)}if(E!==null)le=!0;else{var V=t(p);V!==null&&He(Se,V.startTime-Y),le=!1}}break e}finally{E=null,S=ae,D=!1}le=void 0}}finally{le?k():Te=!1}}}var k;if(typeof se=="function")k=function(){se(O)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Ne=x.port2;x.port1.onmessage=O,k=function(){Ne.postMessage(null)}}else k=function(){ie(O,0)};function He(Y,le){I=ie(function(){Y(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var ae=S;S=le;try{return Y()}finally{S=ae}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function(Y,le){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ae=S;S=Y;try{return le()}finally{S=ae}},r.unstable_scheduleCallback=function(Y,le,ae){var _e=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?_e+ae:_e):ae=_e,Y){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=ae+Ce,Y={id:v++,callback:le,priorityLevel:Y,startTime:ae,expirationTime:Ce,sortIndex:-1},ae>_e?(Y.sortIndex=ae,e(p,Y),t(g)===null&&Y===t(p)&&(z?(re(I),I=-1):z=!0,He(Se,ae-_e))):(Y.sortIndex=Ce,e(g,Y),G||D||(G=!0,Te||(Te=!0,k()))),Y},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(Y){var le=S;return function(){var ae=S;S=le;try{return Y.apply(this,arguments)}finally{S=ae}}}})(Gg)),Gg}var FT;function hR(){return FT||(FT=1,Fg.exports=cR()),Fg.exports}var Hg={exports:{}},fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function fR(){if(GT)return fn;GT=1;var r=Kp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:g,containerInfo:p,implementation:v}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,fn.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,v)},fn.flushSync=function(g){var p=c.T,v=i.p;try{if(c.T=null,i.p=2,g)return g()}finally{c.T=p,i.p=v,i.d.f()}},fn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},fn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},fn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,D=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:D}):v==="script"&&i.d.X(g,{crossOrigin:E,integrity:S,fetchPriority:D,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},fn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=m(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},fn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin);i.d.L(g,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},fn.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=m(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},fn.requestFormReset=function(g){i.d.r(g)},fn.unstable_batchedUpdates=function(g,p){return g(p)},fn.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},fn.useFormStatus=function(){return c.H.useHostTransitionStatus()},fn.version="19.2.0",fn}var HT;function dR(){if(HT)return Hg.exports;HT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Hg.exports=fR(),Hg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function mR(){if(QT)return qu;QT=1;var r=hR(),e=Kp(),t=dR();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(i(188))}function p(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var d=f.alternate;if(d===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===o)return g(f),n;if(d===u)return g(f),s;d=d.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=d;else{for(var _=!1,w=f.child;w;){if(w===o){_=!0,o=f,u=d;break}if(w===u){_=!0,u=f,o=d;break}w=w.sibling}if(!_){for(w=d.child;w;){if(w===o){_=!0,o=d,u=f;break}if(w===u){_=!0,u=d,o=f;break}w=w.sibling}if(!_)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),se=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var x=Symbol.for("react.client.reference");function Ne(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===x?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case ie:return"Profiler";case U:return"StrictMode";case Se:return"Suspense";case Te:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case G:return"Portal";case se:return n.displayName||"Context";case re:return(n._context.displayName||"Context")+".Consumer";case ge:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return s=n.displayName||null,s!==null?s:Ne(n.type)||"Memo";case R:s=n._payload,n=n._init;try{return Ne(n(s))}catch{}}return null}var He=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},_e=[],Ce=-1;function V(n){return{current:n}}function Z(n){0>Ce||(n.current=_e[Ce],_e[Ce]=null,Ce--)}function ce(n,s){Ce++,_e[Ce]=n.current,n.current=s}var X=V(null),oe=V(null),fe=V(null),ue=V(null);function Ie(n,s){switch(ce(fe,s),ce(oe,n),ce(X,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?oT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=oT(s),n=lT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Z(X),ce(X,n)}function Ae(){Z(X),Z(oe),Z(fe)}function Ye(n){n.memoizedState!==null&&ce(ue,n);var s=X.current,o=lT(s,n.type);s!==o&&(ce(oe,n),ce(X,o))}function _n(n){oe.current===n&&(Z(X),Z(oe)),ue.current===n&&(Z(ue),ju._currentValue=ae)}var hn,Zn;function In(n){if(hn===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);hn=s&&s[1]||"",Zn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hn+n+Zn}var hs=!1;function $r(n,s){if(!n||hs)return"";hs=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch($){var H=$}Reflect.construct(n,[],ee)}else{try{ee.call()}catch($){H=$}n.call(ee.prototype)}}else{try{throw Error()}catch($){H=$}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch($){if($&&H&&typeof $.stack=="string")return[$.stack,H.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=u.DetermineComponentFrameRoot(),_=d[0],w=d[1];if(_&&w){var C=_.split(`
`),F=w.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===F.length)for(u=C.length-1,f=F.length-1;1<=u&&0<=f&&C[u]!==F[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==F[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==F[f]){var J=`
`+C[u].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=u&&0<=f);break}}}finally{hs=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?In(o):""}function Ul(n,s){switch(n.tag){case 26:case 27:case 5:return In(n.type);case 16:return In("Lazy");case 13:return n.child!==s&&s!==null?In("Suspense Fallback"):In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return $r(n.type,!1);case 11:return $r(n.type.render,!1);case 1:return $r(n.type,!0);case 31:return In("Activity");default:return""}}function Ll(n){try{var s="",o=null;do s+=Ul(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Mt=Object.prototype.hasOwnProperty,Ht=r.unstable_scheduleCallback,Fs=r.unstable_cancelCallback,qd=r.unstable_shouldYield,Qc=r.unstable_requestPaint,vn=r.unstable_now,Zr=r.unstable_getCurrentPriorityLevel,Bl=r.unstable_ImmediatePriority,zl=r.unstable_UserBlockingPriority,Gs=r.unstable_NormalPriority,Fd=r.unstable_LowPriority,Kc=r.unstable_IdlePriority,Yc=r.log,Xc=r.unstable_setDisableYieldValue,mi=null,Wt=null;function Jn(n){if(typeof Yc=="function"&&Xc(n),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(mi,n)}catch{}}var It=Math.clz32?Math.clz32:Zc,$c=Math.log,no=Math.LN2;function Zc(n){return n>>>=0,n===0?32:31-($c(n)/no|0)|0}var Vi=256,Jr=262144,Pt=4194304;function Oi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Mi(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var w=u&134217727;return w!==0?(u=w&~d,u!==0?f=Oi(u):(_&=w,_!==0?f=Oi(_):o||(o=w&~n,o!==0&&(f=Oi(o))))):(w=u&~d,w!==0?f=Oi(w):_!==0?f=Oi(_):o||(o=u&~n,o!==0&&(f=Oi(o)))),f===0?0:s!==0&&s!==f&&(s&d)===0&&(d=f&-f,o=s&-s,d>=o||d===32&&(o&4194048)!==0)?s:f}function gi(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Gd(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jc(){var n=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),n}function Pi(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Wr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Hd(n,s,o,u,f,d){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var w=n.entanglements,C=n.expirationTimes,F=n.hiddenUpdates;for(o=_&~o;0<o;){var J=31-It(o),ee=1<<J;w[J]=0,C[J]=-1;var H=F[J];if(H!==null)for(F[J]=null,J=0;J<H.length;J++){var $=H[J];$!==null&&($.lane&=-536870913)}o&=~ee}u!==0&&ea(n,u,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~s))}function ea(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-It(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function ql(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-It(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function Fl(n,s){var o=s&-s;return o=(o&42)!==0?1:ta(o),(o&(n.suspendedLanes|s))!==0?0:o}function ta(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function fs(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Wc(){var n=le.p;return n!==0?n:(n=window.event,n===void 0?32:DT(n.type))}function pi(n,s){var o=le.p;try{return le.p=n,s()}finally{le.p=o}}var yi=Math.random().toString(36).slice(2),kt="__reactFiber$"+yi,Yt="__reactProps$"+yi,ki="__reactContainer$"+yi,io="__reactEvents$"+yi,Qd="__reactListeners$"+yi,eh="__reactHandles$"+yi,th="__reactResources$"+yi,ji="__reactMarker$"+yi;function so(n){delete n[kt],delete n[Yt],delete n[io],delete n[Qd],delete n[eh]}function Ui(n){var s=n[kt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[ki]||o[kt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=gT(n);n!==null;){if(o=n[kt])return o;n=gT(n)}return s}n=o,o=n.parentNode}return null}function Wn(n){if(n=n[kt]||n[ki]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Ln(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Li(n){var s=n[th];return s||(s=n[th]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function jt(n){n[ji]=!0}var Gl=new Set,Hl={};function Bi(n,s){zi(n,s),zi(n+"Capture",s)}function zi(n,s){for(Hl[n]=s,n=0;n<s.length;n++)Gl.add(s[n])}var Ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kl={},Yl={};function nh(n){return Mt.call(Yl,n)?!0:Mt.call(Kl,n)?!1:Ql.test(n)?Yl[n]=!0:(Kl[n]=!0,!1)}function ro(n,s,o){if(nh(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Bn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Ut(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function Xt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Hs(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Xl(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,d=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,d.call(this,_)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function et(n){if(!n._valueTracker){var s=Hs(n)?"checked":"value";n._valueTracker=Xl(n,s,""+n[s])}}function na(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Hs(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function qi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ia=/[\n"\\]/g;function Nn(n){return n.replace(ia,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ao(n,s,o,u,f,d,_,w){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Xt(s)):n.value!==""+Xt(s)&&(n.value=""+Xt(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?$l(n,_,Xt(s)):o!=null?$l(n,_,Xt(o)):u!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+Xt(w):n.removeAttribute("name")}function ih(n,s,o,u,f,d,_,w){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),s!=null||o!=null){if(!(d!=="submit"&&d!=="reset"||s!=null)){et(n);return}o=o!=null?""+Xt(o):"",s=s!=null?""+Xt(s):o,w||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=w?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),et(n)}function $l(n,s,o){s==="number"&&qi(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Qs(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Xt(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function sh(n,s,o){if(s!=null&&(s=""+Xt(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Xt(o):""}function Ks(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(He(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Xt(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),et(n)}function Cn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var rh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zl(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||rh.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Jl(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Zl(n,f,u)}else for(var d in s)s.hasOwnProperty(d)&&Zl(n,d,s[d])}function oo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ah=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ys=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lo(n){return Ys.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function _i(){}var Wl=null;function ei(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Xs=null,Fi=null;function sa(n){var s=Wn(n);if(s&&(n=s.stateNode)){var o=n[Yt]||null;e:switch(n=s.stateNode,s.type){case"input":if(ao(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Nn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[Yt]||null;if(!f)throw Error(i(90));ao(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&na(u)}break e;case"textarea":sh(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Qs(n,!!o.multiple,s,!1)}}}var uo=!1;function $s(n,s,o){if(uo)return n(s,o);uo=!0;try{var u=n(s);return u}finally{if(uo=!1,(Xs!==null||Fi!==null)&&(Wh(),Xs&&(s=Xs,n=Fi,Fi=Xs=null,sa(s),n)))for(s=0;s<n.length;s++)sa(n[s])}}function vi(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Yt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ra=!1;if(ti)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){ra=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{ra=!1}var Gi=null,eu=null,aa=null;function tu(){if(aa)return aa;var n,s=eu,o=s.length,u,f="value"in Gi?Gi.value:Gi.textContent,d=f.length;for(n=0;n<o&&s[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&s[o-u]===f[d-u];u++);return aa=f.slice(n,1<u?1-u:void 0)}function oa(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ds(){return!0}function Ti(){return!1}function en(n){function s(o,u,f,d,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(o=n[w],this[w]=o?o(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ds:Ti,this.isPropagationStopped=Ti,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),s}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hi=en(ms),Zs=E({},ms,{view:0,detail:0}),nu=en(Zs),Js,co,Qi,ho=E({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ws,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Qi&&(Qi&&n.type==="mousemove"?(Js=n.screenX-Qi.screenX,co=n.screenY-Qi.screenY):co=Js=0,Qi=n),Js)},movementY:function(n){return"movementY"in n?n.movementY:co}}),iu=en(ho),la=E({},ho,{dataTransfer:0}),oh=en(la),lh=E({},Zs,{relatedTarget:0}),ua=en(lh),su=E({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),uh=en(su),fo=E({},ms,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ch=en(fo),hh=E({},ms,{data:0}),Ki=en(hh),fh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gh(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=mh[n])?!!s[n]:!1}function Ws(){return gh}var Tn=E({},Zs,{key:function(n){if(n.key){var s=fh[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=oa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?dh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ws,charCode:function(n){return n.type==="keypress"?oa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?oa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ph=en(Tn),yh=E({},ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gs=en(yh),h=E({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ws}),y=en(h),T=E({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=en(T),B=E({},ho,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),K=en(B),he=E({},ms,{newState:0,oldState:0}),Oe=en(he),Nt=[9,13,27,32],Ze=ti&&"CompositionEvent"in window,yt=null;ti&&"documentMode"in document&&(yt=document.documentMode);var ni=ti&&"TextEvent"in window&&!yt,Yi=ti&&(!Ze||yt&&8<yt&&11>=yt),bi=" ",Ei=!1;function ca(n,s){switch(n){case"keyup":return Nt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var go=!1;function Dx(n,s){switch(n){case"compositionend":return mo(s);case"keypress":return s.which!==32?null:(Ei=!0,bi);case"textInput":return n=s.data,n===bi&&Ei?null:n;default:return null}}function Vx(n,s){if(go)return n==="compositionend"||!Ze&&ca(n,s)?(n=tu(),aa=eu=Gi=null,go=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Yi&&s.locale!=="ko"?null:s.data;default:return null}}var Ox={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function __(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Ox[n.type]:s==="textarea"}function v_(n,s,o,u){Xs?Fi?Fi.push(u):Fi=[u]:Xs=u,s=of(s,"onChange"),0<s.length&&(o=new Hi("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var ru=null,au=null;function Mx(n){tT(n,0)}function _h(n){var s=Ln(n);if(na(s))return n}function T_(n,s){if(n==="change")return s}var b_=!1;if(ti){var Kd;if(ti){var Yd="oninput"in document;if(!Yd){var E_=document.createElement("div");E_.setAttribute("oninput","return;"),Yd=typeof E_.oninput=="function"}Kd=Yd}else Kd=!1;b_=Kd&&(!document.documentMode||9<document.documentMode)}function w_(){ru&&(ru.detachEvent("onpropertychange",S_),au=ru=null)}function S_(n){if(n.propertyName==="value"&&_h(au)){var s=[];v_(s,au,n,ei(n)),$s(Mx,s)}}function Px(n,s,o){n==="focusin"?(w_(),ru=s,au=o,ru.attachEvent("onpropertychange",S_)):n==="focusout"&&w_()}function kx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _h(au)}function jx(n,s){if(n==="click")return _h(s)}function Ux(n,s){if(n==="input"||n==="change")return _h(s)}function Lx(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var zn=typeof Object.is=="function"?Object.is:Lx;function ou(n,s){if(zn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Mt.call(s,f)||!zn(n[f],s[f]))return!1}return!0}function A_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function x_(n,s){var o=A_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=A_(o)}}function R_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?R_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function I_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=qi(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=qi(n.document)}return s}function Xd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Bx=ti&&"documentMode"in document&&11>=document.documentMode,po=null,$d=null,lu=null,Zd=!1;function N_(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Zd||po==null||po!==qi(u)||(u=po,"selectionStart"in u&&Xd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),lu&&ou(lu,u)||(lu=u,u=of($d,"onSelect"),0<u.length&&(s=new Hi("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=po)))}function ha(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var yo={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},Jd={},C_={};ti&&(C_=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function fa(n){if(Jd[n])return Jd[n];if(!yo[n])return n;var s=yo[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in C_)return Jd[n]=s[o];return n}var D_=fa("animationend"),V_=fa("animationiteration"),O_=fa("animationstart"),zx=fa("transitionrun"),qx=fa("transitionstart"),Fx=fa("transitioncancel"),M_=fa("transitionend"),P_=new Map,Wd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wd.push("scrollEnd");function wi(n,s){P_.set(n,s),Bi(s,[n])}var vh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ii=[],_o=0,em=0;function Th(){for(var n=_o,s=em=_o=0;s<n;){var o=ii[s];ii[s++]=null;var u=ii[s];ii[s++]=null;var f=ii[s];ii[s++]=null;var d=ii[s];if(ii[s++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}d!==0&&k_(o,f,d)}}function bh(n,s,o,u){ii[_o++]=n,ii[_o++]=s,ii[_o++]=o,ii[_o++]=u,em|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function tm(n,s,o,u){return bh(n,s,o,u),Eh(n)}function da(n,s){return bh(n,null,null,s),Eh(n)}function k_(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,d=n.return;d!==null;)d.childLanes|=o,u=d.alternate,u!==null&&(u.childLanes|=o),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&s!==null&&(f=31-It(o),n=d.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),d):null}function Eh(n){if(50<Cu)throw Cu=0,cg=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var vo={};function Gx(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(n,s,o,u){return new Gx(n,s,o,u)}function nm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ps(n,s){var o=n.alternate;return o===null?(o=qn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function j_(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function wh(n,s,o,u,f,d){var _=0;if(u=n,typeof n=="function")nm(n)&&(_=1);else if(typeof n=="string")_=X1(n,o,X.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=qn(31,o,s,f),n.elementType=N,n.lanes=d,n;case z:return ma(o.children,f,d,s);case U:_=8,f|=24;break;case ie:return n=qn(12,o,s,f|2),n.elementType=ie,n.lanes=d,n;case Se:return n=qn(13,o,s,f),n.elementType=Se,n.lanes=d,n;case Te:return n=qn(19,o,s,f),n.elementType=Te,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case se:_=10;break e;case re:_=9;break e;case ge:_=11;break e;case I:_=14;break e;case R:_=16,u=null;break e}_=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=qn(_,o,s,f),s.elementType=n,s.type=u,s.lanes=d,s}function ma(n,s,o,u){return n=qn(7,n,u,s),n.lanes=o,n}function im(n,s,o){return n=qn(6,n,null,s),n.lanes=o,n}function U_(n){var s=qn(18,null,null,0);return s.stateNode=n,s}function sm(n,s,o){return s=qn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var L_=new WeakMap;function si(n,s){if(typeof n=="object"&&n!==null){var o=L_.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Ll(s)},L_.set(n,s),s)}return{value:n,source:s,stack:Ll(s)}}var To=[],bo=0,Sh=null,uu=0,ri=[],ai=0,er=null,Xi=1,$i="";function ys(n,s){To[bo++]=uu,To[bo++]=Sh,Sh=n,uu=s}function B_(n,s,o){ri[ai++]=Xi,ri[ai++]=$i,ri[ai++]=er,er=n;var u=Xi;n=$i;var f=32-It(u)-1;u&=~(1<<f),o+=1;var d=32-It(s)+f;if(30<d){var _=f-f%5;d=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Xi=1<<32-It(s)+f|o<<f|u,$i=d+n}else Xi=1<<d|o<<f|u,$i=n}function rm(n){n.return!==null&&(ys(n,1),B_(n,1,0))}function am(n){for(;n===Sh;)Sh=To[--bo],To[bo]=null,uu=To[--bo],To[bo]=null;for(;n===er;)er=ri[--ai],ri[ai]=null,$i=ri[--ai],ri[ai]=null,Xi=ri[--ai],ri[ai]=null}function z_(n,s){ri[ai++]=Xi,ri[ai++]=$i,ri[ai++]=er,Xi=s.id,$i=s.overflow,er=n}var tn=null,dt=null,Fe=!1,tr=null,oi=!1,om=Error(i(519));function nr(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cu(si(s,n)),om}function q_(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[kt]=n,s[Yt]=u,o){case"dialog":Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":case"embed":Ue("load",s);break;case"video":case"audio":for(o=0;o<Vu.length;o++)Ue(Vu[o],s);break;case"source":Ue("error",s);break;case"img":case"image":case"link":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"input":Ue("invalid",s),ih(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ue("invalid",s);break;case"textarea":Ue("invalid",s),Ks(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||rT(s.textContent,o)?(u.popover!=null&&(Ue("beforetoggle",s),Ue("toggle",s)),u.onScroll!=null&&Ue("scroll",s),u.onScrollEnd!=null&&Ue("scrollend",s),u.onClick!=null&&(s.onclick=_i),s=!0):s=!1,s||nr(n,!0)}function F_(n){for(tn=n.return;tn;)switch(tn.tag){case 5:case 31:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:tn=tn.return}}function Eo(n){if(n!==tn)return!1;if(!Fe)return F_(n),Fe=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ag(n.type,n.memoizedProps)),o=!o),o&&dt&&nr(n),F_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));dt=mT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));dt=mT(n)}else s===27?(s=dt,pr(n.type)?(n=Cg,Cg=null,dt=n):dt=s):dt=tn?ui(n.stateNode.nextSibling):null;return!0}function ga(){dt=tn=null,Fe=!1}function lm(){var n=tr;return n!==null&&(Mn===null?Mn=n:Mn.push.apply(Mn,n),tr=null),n}function cu(n){tr===null?tr=[n]:tr.push(n)}var um=V(null),pa=null,_s=null;function ir(n,s,o){ce(um,s._currentValue),s._currentValue=o}function vs(n){n._currentValue=um.current,Z(um)}function cm(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function hm(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var w=d;d=f;for(var C=0;C<s.length;C++)if(w.context===s[C]){d.lanes|=o,w=d.alternate,w!==null&&(w.lanes|=o),cm(d.return,o,n),u||(_=null);break e}d=w.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=o,d=_.alternate,d!==null&&(d.lanes|=o),cm(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function wo(n,s,o,u){n=null;for(var f=s,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var w=f.type;zn(f.pendingProps.value,_.value)||(n!==null?n.push(w):n=[w])}}else if(f===ue.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(ju):n=[ju])}f=f.return}n!==null&&hm(s,n,o,u),s.flags|=262144}function Ah(n){for(n=n.firstContext;n!==null;){if(!zn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ya(n){pa=n,_s=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nn(n){return G_(pa,n)}function xh(n,s){return pa===null&&ya(n),G_(n,s)}function G_(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},_s===null){if(n===null)throw Error(i(308));_s=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else _s=_s.next=s;return o}var Hx=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},Qx=r.unstable_scheduleCallback,Kx=r.unstable_NormalPriority,Lt={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fm(){return{controller:new Hx,data:new Map,refCount:0}}function hu(n){n.refCount--,n.refCount===0&&Qx(Kx,function(){n.controller.abort()})}var fu=null,dm=0,So=0,Ao=null;function Yx(n,s){if(fu===null){var o=fu=[];dm=0,So=pg(),Ao={status:"pending",value:void 0,then:function(u){o.push(u)}}}return dm++,s.then(H_,H_),s}function H_(){if(--dm===0&&fu!==null){Ao!==null&&(Ao.status="fulfilled");var n=fu;fu=null,So=0,Ao=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Xx(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Q_=Y.S;Y.S=function(n,s){Nv=vn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Yx(n,s),Q_!==null&&Q_(n,s)};var _a=V(null);function mm(){var n=_a.current;return n!==null?n:ct.pooledCache}function Rh(n,s){s===null?ce(_a,_a.current):ce(_a,s.pool)}function K_(){var n=mm();return n===null?null:{parent:Lt._currentValue,pool:n}}var xo=Error(i(460)),gm=Error(i(474)),Ih=Error(i(542)),Nh={then:function(){}};function Y_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function X_(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(_i,_i),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Z_(n),n;default:if(typeof s.status=="string")s.then(_i,_i);else{if(n=ct,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Z_(n),n}throw Ta=s,xo}}function va(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ta=o,xo):o}}var Ta=null;function $_(){if(Ta===null)throw Error(i(459));var n=Ta;return Ta=null,n}function Z_(n){if(n===xo||n===Ih)throw Error(i(483))}var Ro=null,du=0;function Ch(n){var s=du;return du+=1,Ro===null&&(Ro=[]),X_(Ro,n,s)}function mu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Dh(n,s){throw s.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function J_(n){function s(j,M){if(n){var q=j.deletions;q===null?(j.deletions=[M],j.flags|=16):q.push(M)}}function o(j,M){if(!n)return null;for(;M!==null;)s(j,M),M=M.sibling;return null}function u(j){for(var M=new Map;j!==null;)j.key!==null?M.set(j.key,j):M.set(j.index,j),j=j.sibling;return M}function f(j,M){return j=ps(j,M),j.index=0,j.sibling=null,j}function d(j,M,q){return j.index=q,n?(q=j.alternate,q!==null?(q=q.index,q<M?(j.flags|=67108866,M):q):(j.flags|=67108866,M)):(j.flags|=1048576,M)}function _(j){return n&&j.alternate===null&&(j.flags|=67108866),j}function w(j,M,q,W){return M===null||M.tag!==6?(M=im(q,j.mode,W),M.return=j,M):(M=f(M,q),M.return=j,M)}function C(j,M,q,W){var xe=q.type;return xe===z?J(j,M,q.props.children,W,q.key):M!==null&&(M.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&va(xe)===M.type)?(M=f(M,q.props),mu(M,q),M.return=j,M):(M=wh(q.type,q.key,q.props,null,j.mode,W),mu(M,q),M.return=j,M)}function F(j,M,q,W){return M===null||M.tag!==4||M.stateNode.containerInfo!==q.containerInfo||M.stateNode.implementation!==q.implementation?(M=sm(q,j.mode,W),M.return=j,M):(M=f(M,q.children||[]),M.return=j,M)}function J(j,M,q,W,xe){return M===null||M.tag!==7?(M=ma(q,j.mode,W,xe),M.return=j,M):(M=f(M,q),M.return=j,M)}function ee(j,M,q){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=im(""+M,j.mode,q),M.return=j,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case D:return q=wh(M.type,M.key,M.props,null,j.mode,q),mu(q,M),q.return=j,q;case G:return M=sm(M,j.mode,q),M.return=j,M;case R:return M=va(M),ee(j,M,q)}if(He(M)||k(M))return M=ma(M,j.mode,q,null),M.return=j,M;if(typeof M.then=="function")return ee(j,Ch(M),q);if(M.$$typeof===se)return ee(j,xh(j,M),q);Dh(j,M)}return null}function H(j,M,q,W){var xe=M!==null?M.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return xe!==null?null:w(j,M,""+q,W);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case D:return q.key===xe?C(j,M,q,W):null;case G:return q.key===xe?F(j,M,q,W):null;case R:return q=va(q),H(j,M,q,W)}if(He(q)||k(q))return xe!==null?null:J(j,M,q,W,null);if(typeof q.then=="function")return H(j,M,Ch(q),W);if(q.$$typeof===se)return H(j,M,xh(j,q),W);Dh(j,q)}return null}function $(j,M,q,W,xe){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return j=j.get(q)||null,w(M,j,""+W,xe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case D:return j=j.get(W.key===null?q:W.key)||null,C(M,j,W,xe);case G:return j=j.get(W.key===null?q:W.key)||null,F(M,j,W,xe);case R:return W=va(W),$(j,M,q,W,xe)}if(He(W)||k(W))return j=j.get(q)||null,J(M,j,W,xe,null);if(typeof W.then=="function")return $(j,M,q,Ch(W),xe);if(W.$$typeof===se)return $(j,M,q,xh(M,W),xe);Dh(M,W)}return null}function ve(j,M,q,W){for(var xe=null,Xe=null,Ee=M,ke=M=0,ze=null;Ee!==null&&ke<q.length;ke++){Ee.index>ke?(ze=Ee,Ee=null):ze=Ee.sibling;var $e=H(j,Ee,q[ke],W);if($e===null){Ee===null&&(Ee=ze);break}n&&Ee&&$e.alternate===null&&s(j,Ee),M=d($e,M,ke),Xe===null?xe=$e:Xe.sibling=$e,Xe=$e,Ee=ze}if(ke===q.length)return o(j,Ee),Fe&&ys(j,ke),xe;if(Ee===null){for(;ke<q.length;ke++)Ee=ee(j,q[ke],W),Ee!==null&&(M=d(Ee,M,ke),Xe===null?xe=Ee:Xe.sibling=Ee,Xe=Ee);return Fe&&ys(j,ke),xe}for(Ee=u(Ee);ke<q.length;ke++)ze=$(Ee,j,ke,q[ke],W),ze!==null&&(n&&ze.alternate!==null&&Ee.delete(ze.key===null?ke:ze.key),M=d(ze,M,ke),Xe===null?xe=ze:Xe.sibling=ze,Xe=ze);return n&&Ee.forEach(function(br){return s(j,br)}),Fe&&ys(j,ke),xe}function Re(j,M,q,W){if(q==null)throw Error(i(151));for(var xe=null,Xe=null,Ee=M,ke=M=0,ze=null,$e=q.next();Ee!==null&&!$e.done;ke++,$e=q.next()){Ee.index>ke?(ze=Ee,Ee=null):ze=Ee.sibling;var br=H(j,Ee,$e.value,W);if(br===null){Ee===null&&(Ee=ze);break}n&&Ee&&br.alternate===null&&s(j,Ee),M=d(br,M,ke),Xe===null?xe=br:Xe.sibling=br,Xe=br,Ee=ze}if($e.done)return o(j,Ee),Fe&&ys(j,ke),xe;if(Ee===null){for(;!$e.done;ke++,$e=q.next())$e=ee(j,$e.value,W),$e!==null&&(M=d($e,M,ke),Xe===null?xe=$e:Xe.sibling=$e,Xe=$e);return Fe&&ys(j,ke),xe}for(Ee=u(Ee);!$e.done;ke++,$e=q.next())$e=$(Ee,j,ke,$e.value,W),$e!==null&&(n&&$e.alternate!==null&&Ee.delete($e.key===null?ke:$e.key),M=d($e,M,ke),Xe===null?xe=$e:Xe.sibling=$e,Xe=$e);return n&&Ee.forEach(function(aR){return s(j,aR)}),Fe&&ys(j,ke),xe}function lt(j,M,q,W){if(typeof q=="object"&&q!==null&&q.type===z&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case D:e:{for(var xe=q.key;M!==null;){if(M.key===xe){if(xe=q.type,xe===z){if(M.tag===7){o(j,M.sibling),W=f(M,q.props.children),W.return=j,j=W;break e}}else if(M.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&va(xe)===M.type){o(j,M.sibling),W=f(M,q.props),mu(W,q),W.return=j,j=W;break e}o(j,M);break}else s(j,M);M=M.sibling}q.type===z?(W=ma(q.props.children,j.mode,W,q.key),W.return=j,j=W):(W=wh(q.type,q.key,q.props,null,j.mode,W),mu(W,q),W.return=j,j=W)}return _(j);case G:e:{for(xe=q.key;M!==null;){if(M.key===xe)if(M.tag===4&&M.stateNode.containerInfo===q.containerInfo&&M.stateNode.implementation===q.implementation){o(j,M.sibling),W=f(M,q.children||[]),W.return=j,j=W;break e}else{o(j,M);break}else s(j,M);M=M.sibling}W=sm(q,j.mode,W),W.return=j,j=W}return _(j);case R:return q=va(q),lt(j,M,q,W)}if(He(q))return ve(j,M,q,W);if(k(q)){if(xe=k(q),typeof xe!="function")throw Error(i(150));return q=xe.call(q),Re(j,M,q,W)}if(typeof q.then=="function")return lt(j,M,Ch(q),W);if(q.$$typeof===se)return lt(j,M,xh(j,q),W);Dh(j,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,M!==null&&M.tag===6?(o(j,M.sibling),W=f(M,q),W.return=j,j=W):(o(j,M),W=im(q,j.mode,W),W.return=j,j=W),_(j)):o(j,M)}return function(j,M,q,W){try{du=0;var xe=lt(j,M,q,W);return Ro=null,xe}catch(Ee){if(Ee===xo||Ee===Ih)throw Ee;var Xe=qn(29,Ee,null,j.mode);return Xe.lanes=W,Xe.return=j,Xe}finally{}}}var ba=J_(!0),W_=J_(!1),sr=!1;function pm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ym(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function rr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ar(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Je&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Eh(n),k_(n,null,o),s}return bh(n,u,s,o),Eh(n)}function gu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,ql(n,o)}}function _m(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,o=o.next}while(o!==null);d===null?f=d=s:d=d.next=s}else f=d=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var vm=!1;function pu(){if(vm){var n=Ao;if(n!==null)throw n}}function yu(n,s,o,u){vm=!1;var f=n.updateQueue;sr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var C=w,F=C.next;C.next=null,_===null?d=F:_.next=F,_=C;var J=n.alternate;J!==null&&(J=J.updateQueue,w=J.lastBaseUpdate,w!==_&&(w===null?J.firstBaseUpdate=F:w.next=F,J.lastBaseUpdate=C))}if(d!==null){var ee=f.baseState;_=0,J=F=C=null,w=d;do{var H=w.lane&-536870913,$=H!==w.lane;if($?(Be&H)===H:(u&H)===H){H!==0&&H===So&&(vm=!0),J!==null&&(J=J.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ve=n,Re=w;H=s;var lt=o;switch(Re.tag){case 1:if(ve=Re.payload,typeof ve=="function"){ee=ve.call(lt,ee,H);break e}ee=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Re.payload,H=typeof ve=="function"?ve.call(lt,ee,H):ve,H==null)break e;ee=E({},ee,H);break e;case 2:sr=!0}}H=w.callback,H!==null&&(n.flags|=64,$&&(n.flags|=8192),$=f.callbacks,$===null?f.callbacks=[H]:$.push(H))}else $={lane:H,tag:w.tag,payload:w.payload,callback:w.callback,next:null},J===null?(F=J=$,C=ee):J=J.next=$,_|=H;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;$=w,w=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);J===null&&(C=ee),f.baseState=C,f.firstBaseUpdate=F,f.lastBaseUpdate=J,d===null&&(f.shared.lanes=0),hr|=_,n.lanes=_,n.memoizedState=ee}}function e0(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function t0(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)e0(o[n],s)}var Io=V(null),Vh=V(0);function n0(n,s){n=Is,ce(Vh,n),ce(Io,s),Is=n|s.baseLanes}function Tm(){ce(Vh,Is),ce(Io,Io.current)}function bm(){Is=Vh.current,Z(Io),Z(Vh)}var Fn=V(null),li=null;function or(n){var s=n.alternate;ce(Ct,Ct.current&1),ce(Fn,n),li===null&&(s===null||Io.current!==null||s.memoizedState!==null)&&(li=n)}function Em(n){ce(Ct,Ct.current),ce(Fn,n),li===null&&(li=n)}function i0(n){n.tag===22?(ce(Ct,Ct.current),ce(Fn,n),li===null&&(li=n)):lr()}function lr(){ce(Ct,Ct.current),ce(Fn,Fn.current)}function Gn(n){Z(Fn),li===n&&(li=null),Z(Ct)}var Ct=V(0);function Oh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Ig(o)||Ng(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ts=0,Me=null,at=null,Bt=null,Mh=!1,No=!1,Ea=!1,Ph=0,_u=0,Co=null,$x=0;function St(){throw Error(i(321))}function wm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!zn(n[o],s[o]))return!1;return!0}function Sm(n,s,o,u,f,d){return Ts=d,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Y.H=n===null||n.memoizedState===null?B0:Lm,Ea=!1,d=o(u,f),Ea=!1,No&&(d=r0(s,o,u,f)),s0(n),d}function s0(n){Y.H=bu;var s=at!==null&&at.next!==null;if(Ts=0,Bt=at=Me=null,Mh=!1,_u=0,Co=null,s)throw Error(i(300));n===null||zt||(n=n.dependencies,n!==null&&Ah(n)&&(zt=!0))}function r0(n,s,o,u){Me=n;var f=0;do{if(No&&(Co=null),_u=0,No=!1,25<=f)throw Error(i(301));if(f+=1,Bt=at=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Y.H=z0,d=s(o,u)}while(No);return d}function Zx(){var n=Y.H,s=n.useState()[0];return s=typeof s.then=="function"?vu(s):s,n=n.useState()[0],(at!==null?at.memoizedState:null)!==n&&(Me.flags|=1024),s}function Am(){var n=Ph!==0;return Ph=0,n}function xm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Rm(n){if(Mh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Mh=!1}Ts=0,Bt=at=Me=null,No=!1,_u=Ph=0,Co=null}function bn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Me.memoizedState=Bt=n:Bt=Bt.next=n,Bt}function Dt(){if(at===null){var n=Me.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var s=Bt===null?Me.memoizedState:Bt.next;if(s!==null)Bt=s,at=n;else{if(n===null)throw Me.alternate===null?Error(i(467)):Error(i(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Bt===null?Me.memoizedState=Bt=n:Bt=Bt.next=n}return Bt}function kh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vu(n){var s=_u;return _u+=1,Co===null&&(Co=[]),n=X_(Co,n,s),s=Me,(Bt===null?s.memoizedState:Bt.next)===null&&(s=s.alternate,Y.H=s===null||s.memoizedState===null?B0:Lm),n}function jh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return vu(n);if(n.$$typeof===se)return nn(n)}throw Error(i(438,String(n)))}function Im(n){var s=null,o=Me.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=kh(),Me.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=P;return s.index++,o}function bs(n,s){return typeof s=="function"?s(n):s}function Uh(n){var s=Dt();return Nm(s,at,n)}function Nm(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,d=u.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}s.baseQueue=f=d,u.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{s=f.next;var w=_=null,C=null,F=s,J=!1;do{var ee=F.lane&-536870913;if(ee!==F.lane?(Be&ee)===ee:(Ts&ee)===ee){var H=F.revertLane;if(H===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ee===So&&(J=!0);else if((Ts&H)===H){F=F.next,H===So&&(J=!0);continue}else ee={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},C===null?(w=C=ee,_=d):C=C.next=ee,Me.lanes|=H,hr|=H;ee=F.action,Ea&&o(d,ee),d=F.hasEagerState?F.eagerState:o(d,ee)}else H={lane:ee,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},C===null?(w=C=H,_=d):C=C.next=H,Me.lanes|=ee,hr|=ee;F=F.next}while(F!==null&&F!==s);if(C===null?_=d:C.next=w,!zn(d,n.memoizedState)&&(zt=!0,J&&(o=Ao,o!==null)))throw o;n.memoizedState=d,n.baseState=_,n.baseQueue=C,u.lastRenderedState=d}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Cm(n){var s=Dt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,d=s.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);zn(d,s.memoizedState)||(zt=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),o.lastRenderedState=d}return[d,u]}function a0(n,s,o){var u=Me,f=Dt(),d=Fe;if(d){if(o===void 0)throw Error(i(407));o=o()}else o=s();var _=!zn((at||f).memoizedState,o);if(_&&(f.memoizedState=o,zt=!0),f=f.queue,Om(u0.bind(null,u,f,n),[n]),f.getSnapshot!==s||_||Bt!==null&&Bt.memoizedState.tag&1){if(u.flags|=2048,Do(9,{destroy:void 0},l0.bind(null,u,f,o,s),null),ct===null)throw Error(i(349));d||(Ts&127)!==0||o0(u,s,o)}return o}function o0(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Me.updateQueue,s===null?(s=kh(),Me.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function l0(n,s,o,u){s.value=o,s.getSnapshot=u,c0(s)&&h0(n)}function u0(n,s,o){return o(function(){c0(s)&&h0(n)})}function c0(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!zn(n,o)}catch{return!0}}function h0(n){var s=da(n,2);s!==null&&Pn(s,n,2)}function Dm(n){var s=bn();if(typeof n=="function"){var o=n;if(n=o(),Ea){Jn(!0);try{o()}finally{Jn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:n},s}function f0(n,s,o,u){return n.baseState=o,Nm(n,at,typeof u=="function"?u:bs)}function Jx(n,s,o,u,f){if(zh(n))throw Error(i(485));if(n=s.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};Y.T!==null?o(!0):d.isTransition=!1,u(d),o=s.pending,o===null?(d.next=s.pending=d,d0(s,d)):(d.next=o.next,s.pending=o.next=d)}}function d0(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var d=Y.T,_={};Y.T=_;try{var w=o(f,u),C=Y.S;C!==null&&C(_,w),m0(n,s,w)}catch(F){Vm(n,s,F)}finally{d!==null&&_.types!==null&&(d.types=_.types),Y.T=d}}else try{d=o(f,u),m0(n,s,d)}catch(F){Vm(n,s,F)}}function m0(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){g0(n,s,u)},function(u){return Vm(n,s,u)}):g0(n,s,o)}function g0(n,s,o){s.status="fulfilled",s.value=o,p0(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,d0(n,o)))}function Vm(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,p0(s),s=s.next;while(s!==u)}n.action=null}function p0(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function y0(n,s){return s}function _0(n,s){if(Fe){var o=ct.formState;if(o!==null){e:{var u=Me;if(Fe){if(dt){t:{for(var f=dt,d=oi;f.nodeType!==8;){if(!d){f=null;break t}if(f=ui(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){dt=ui(f.nextSibling),u=f.data==="F!";break e}}nr(u)}u=!1}u&&(s=o[0])}}return o=bn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y0,lastRenderedState:s},o.queue=u,o=j0.bind(null,Me,u),u.dispatch=o,u=Dm(!1),d=Um.bind(null,Me,!1,u.queue),u=bn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=Jx.bind(null,Me,f,d,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function v0(n){var s=Dt();return T0(s,at,n)}function T0(n,s,o){if(s=Nm(n,s,y0)[0],n=Uh(bs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=vu(s)}catch(_){throw _===xo?Ih:_}else u=s;s=Dt();var f=s.queue,d=f.dispatch;return o!==s.memoizedState&&(Me.flags|=2048,Do(9,{destroy:void 0},Wx.bind(null,f,o),null)),[u,d,n]}function Wx(n,s){n.action=s}function b0(n){var s=Dt(),o=at;if(o!==null)return T0(s,o,n);Dt(),s=s.memoizedState,o=Dt();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function Do(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Me.updateQueue,s===null&&(s=kh(),Me.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function E0(){return Dt().memoizedState}function Lh(n,s,o,u){var f=bn();Me.flags|=n,f.memoizedState=Do(1|s,{destroy:void 0},o,u===void 0?null:u)}function Bh(n,s,o,u){var f=Dt();u=u===void 0?null:u;var d=f.memoizedState.inst;at!==null&&u!==null&&wm(u,at.memoizedState.deps)?f.memoizedState=Do(s,d,o,u):(Me.flags|=n,f.memoizedState=Do(1|s,d,o,u))}function w0(n,s){Lh(8390656,8,n,s)}function Om(n,s){Bh(2048,8,n,s)}function e1(n){Me.flags|=4;var s=Me.updateQueue;if(s===null)s=kh(),Me.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function S0(n){var s=Dt().memoizedState;return e1({ref:s,nextImpl:n}),function(){if((Je&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function A0(n,s){return Bh(4,2,n,s)}function x0(n,s){return Bh(4,4,n,s)}function R0(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function I0(n,s,o){o=o!=null?o.concat([n]):null,Bh(4,4,R0.bind(null,s,n),o)}function Mm(){}function N0(n,s){var o=Dt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&wm(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function C0(n,s){var o=Dt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&wm(s,u[1]))return u[0];if(u=n(),Ea){Jn(!0);try{n()}finally{Jn(!1)}}return o.memoizedState=[u,s],u}function Pm(n,s,o){return o===void 0||(Ts&1073741824)!==0&&(Be&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=Dv(),Me.lanes|=n,hr|=n,o)}function D0(n,s,o,u){return zn(o,s)?o:Io.current!==null?(n=Pm(n,o,u),zn(n,s)||(zt=!0),n):(Ts&42)===0||(Ts&1073741824)!==0&&(Be&261930)===0?(zt=!0,n.memoizedState=o):(n=Dv(),Me.lanes|=n,hr|=n,s)}function V0(n,s,o,u,f){var d=le.p;le.p=d!==0&&8>d?d:8;var _=Y.T,w={};Y.T=w,Um(n,!1,s,o);try{var C=f(),F=Y.S;if(F!==null&&F(w,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var J=Xx(C,u);Tu(n,s,J,Kn(n))}else Tu(n,s,u,Kn(n))}catch(ee){Tu(n,s,{then:function(){},status:"rejected",reason:ee},Kn())}finally{le.p=d,_!==null&&w.types!==null&&(_.types=w.types),Y.T=_}}function t1(){}function km(n,s,o,u){if(n.tag!==5)throw Error(i(476));var f=O0(n).queue;V0(n,f,s,ae,o===null?t1:function(){return M0(n),o(u)})}function O0(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:ae},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function M0(n){var s=O0(n);s.next===null&&(s=n.alternate.memoizedState),Tu(n,s.next.queue,{},Kn())}function jm(){return nn(ju)}function P0(){return Dt().memoizedState}function k0(){return Dt().memoizedState}function n1(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Kn();n=rr(o);var u=ar(s,n,o);u!==null&&(Pn(u,s,o),gu(u,s,o)),s={cache:fm()},n.payload=s;return}s=s.return}}function i1(n,s,o){var u=Kn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},zh(n)?U0(s,o):(o=tm(n,s,o,u),o!==null&&(Pn(o,n,u),L0(o,s,u)))}function j0(n,s,o){var u=Kn();Tu(n,s,o,u)}function Tu(n,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(zh(n))U0(s,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var _=s.lastRenderedState,w=d(_,o);if(f.hasEagerState=!0,f.eagerState=w,zn(w,_))return bh(n,s,f,0),ct===null&&Th(),!1}catch{}finally{}if(o=tm(n,s,f,u),o!==null)return Pn(o,n,u),L0(o,s,u),!0}return!1}function Um(n,s,o,u){if(u={lane:2,revertLane:pg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},zh(n)){if(s)throw Error(i(479))}else s=tm(n,o,u,2),s!==null&&Pn(s,n,2)}function zh(n){var s=n.alternate;return n===Me||s!==null&&s===Me}function U0(n,s){No=Mh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function L0(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,ql(n,o)}}var bu={readContext:nn,use:jh,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};bu.useEffectEvent=St;var B0={readContext:nn,use:jh,useCallback:function(n,s){return bn().memoizedState=[n,s===void 0?null:s],n},useContext:nn,useEffect:w0,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Lh(4194308,4,R0.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Lh(4194308,4,n,s)},useInsertionEffect:function(n,s){Lh(4,2,n,s)},useMemo:function(n,s){var o=bn();s=s===void 0?null:s;var u=n();if(Ea){Jn(!0);try{n()}finally{Jn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=bn();if(o!==void 0){var f=o(s);if(Ea){Jn(!0);try{o(s)}finally{Jn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=i1.bind(null,Me,n),[u.memoizedState,n]},useRef:function(n){var s=bn();return n={current:n},s.memoizedState=n},useState:function(n){n=Dm(n);var s=n.queue,o=j0.bind(null,Me,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Mm,useDeferredValue:function(n,s){var o=bn();return Pm(o,n,s)},useTransition:function(){var n=Dm(!1);return n=V0.bind(null,Me,n.queue,!0,!1),bn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Me,f=bn();if(Fe){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ct===null)throw Error(i(349));(Be&127)!==0||o0(u,s,o)}f.memoizedState=o;var d={value:o,getSnapshot:s};return f.queue=d,w0(u0.bind(null,u,d,n),[n]),u.flags|=2048,Do(9,{destroy:void 0},l0.bind(null,u,d,o,s),null),o},useId:function(){var n=bn(),s=ct.identifierPrefix;if(Fe){var o=$i,u=Xi;o=(u&~(1<<32-It(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Ph++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=$x++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:jm,useFormState:_0,useActionState:_0,useOptimistic:function(n){var s=bn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Um.bind(null,Me,!0,o),o.dispatch=s,[n,s]},useMemoCache:Im,useCacheRefresh:function(){return bn().memoizedState=n1.bind(null,Me)},useEffectEvent:function(n){var s=bn(),o={impl:n};return s.memoizedState=o,function(){if((Je&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Lm={readContext:nn,use:jh,useCallback:N0,useContext:nn,useEffect:Om,useImperativeHandle:I0,useInsertionEffect:A0,useLayoutEffect:x0,useMemo:C0,useReducer:Uh,useRef:E0,useState:function(){return Uh(bs)},useDebugValue:Mm,useDeferredValue:function(n,s){var o=Dt();return D0(o,at.memoizedState,n,s)},useTransition:function(){var n=Uh(bs)[0],s=Dt().memoizedState;return[typeof n=="boolean"?n:vu(n),s]},useSyncExternalStore:a0,useId:P0,useHostTransitionStatus:jm,useFormState:v0,useActionState:v0,useOptimistic:function(n,s){var o=Dt();return f0(o,at,n,s)},useMemoCache:Im,useCacheRefresh:k0};Lm.useEffectEvent=S0;var z0={readContext:nn,use:jh,useCallback:N0,useContext:nn,useEffect:Om,useImperativeHandle:I0,useInsertionEffect:A0,useLayoutEffect:x0,useMemo:C0,useReducer:Cm,useRef:E0,useState:function(){return Cm(bs)},useDebugValue:Mm,useDeferredValue:function(n,s){var o=Dt();return at===null?Pm(o,n,s):D0(o,at.memoizedState,n,s)},useTransition:function(){var n=Cm(bs)[0],s=Dt().memoizedState;return[typeof n=="boolean"?n:vu(n),s]},useSyncExternalStore:a0,useId:P0,useHostTransitionStatus:jm,useFormState:b0,useActionState:b0,useOptimistic:function(n,s){var o=Dt();return at!==null?f0(o,at,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Im,useCacheRefresh:k0};z0.useEffectEvent=S0;function Bm(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:E({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var zm={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Kn(),f=rr(u);f.payload=s,o!=null&&(f.callback=o),s=ar(n,f,u),s!==null&&(Pn(s,n,u),gu(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Kn(),f=rr(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=ar(n,f,u),s!==null&&(Pn(s,n,u),gu(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Kn(),u=rr(o);u.tag=2,s!=null&&(u.callback=s),s=ar(n,u,o),s!==null&&(Pn(s,n,o),gu(s,n,o))}};function q0(n,s,o,u,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,d,_):s.prototype&&s.prototype.isPureReactComponent?!ou(o,u)||!ou(f,d):!0}function F0(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&zm.enqueueReplaceState(s,s.state,null)}function wa(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function G0(n){vh(n)}function H0(n){console.error(n)}function Q0(n){vh(n)}function qh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function K0(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function qm(n,s,o){return o=rr(o),o.tag=3,o.payload={element:null},o.callback=function(){qh(n,s)},o}function Y0(n){return n=rr(n),n.tag=3,n}function X0(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var d=u.value;n.payload=function(){return f(d)},n.callback=function(){K0(s,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){K0(s,o,u),typeof f!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function s1(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&wo(s,o,f,!0),o=Fn.current,o!==null){switch(o.tag){case 31:case 13:return li===null?ef():o.alternate===null&&At===0&&(At=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Nh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),dg(n,u,f)),!1;case 22:return o.flags|=65536,u===Nh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),dg(n,u,f)),!1}throw Error(i(435,o.tag))}return dg(n,u,f),ef(),!1}if(Fe)return s=Fn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==om&&(n=Error(i(422),{cause:u}),cu(si(n,o)))):(u!==om&&(s=Error(i(423),{cause:u}),cu(si(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=si(u,o),f=qm(n.stateNode,u,f),_m(n,f),At!==4&&(At=2)),!1;var d=Error(i(520),{cause:u});if(d=si(d,o),Nu===null?Nu=[d]:Nu.push(d),At!==4&&(At=2),s===null)return!0;u=si(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=qm(o.stateNode,u,n),_m(o,n),!1;case 1:if(s=o.type,d=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(fr===null||!fr.has(d))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Y0(f),X0(f,n,o,u),_m(o,f),!1}o=o.return}while(o!==null);return!1}var Fm=Error(i(461)),zt=!1;function sn(n,s,o,u){s.child=n===null?W_(s,null,o,u):ba(s,n.child,o,u)}function $0(n,s,o,u,f){o=o.render;var d=s.ref;if("ref"in u){var _={};for(var w in u)w!=="ref"&&(_[w]=u[w])}else _=u;return ya(s),u=Sm(n,s,o,_,d,f),w=Am(),n!==null&&!zt?(xm(n,s,f),Es(n,s,f)):(Fe&&w&&rm(s),s.flags|=1,sn(n,s,u,f),s.child)}function Z0(n,s,o,u,f){if(n===null){var d=o.type;return typeof d=="function"&&!nm(d)&&d.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=d,J0(n,s,d,u,f)):(n=wh(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(d=n.child,!Zm(n,f)){var _=d.memoizedProps;if(o=o.compare,o=o!==null?o:ou,o(_,u)&&n.ref===s.ref)return Es(n,s,f)}return s.flags|=1,n=ps(d,u),n.ref=s.ref,n.return=s,s.child=n}function J0(n,s,o,u,f){if(n!==null){var d=n.memoizedProps;if(ou(d,u)&&n.ref===s.ref)if(zt=!1,s.pendingProps=u=d,Zm(n,f))(n.flags&131072)!==0&&(zt=!0);else return s.lanes=n.lanes,Es(n,s,f)}return Gm(n,s,o,u,f)}function W0(n,s,o,u){var f=u.children,d=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(d=d!==null?d.baseLanes|o:o,n!==null){for(u=s.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~d}else u=0,s.child=null;return ev(n,s,d,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Rh(s,d!==null?d.cachePool:null),d!==null?n0(s,d):Tm(),i0(s);else return u=s.lanes=536870912,ev(n,s,d!==null?d.baseLanes|o:o,o,u)}else d!==null?(Rh(s,d.cachePool),n0(s,d),lr(),s.memoizedState=null):(n!==null&&Rh(s,null),Tm(),lr());return sn(n,s,f,o),s.child}function Eu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ev(n,s,o,u,f){var d=mm();return d=d===null?null:{parent:Lt._currentValue,pool:d},s.memoizedState={baseLanes:o,cachePool:d},n!==null&&Rh(s,null),Tm(),i0(s),n!==null&&wo(n,s,u,!0),s.childLanes=f,null}function Fh(n,s){return s=Hh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function tv(n,s,o){return ba(s,n.child,null,o),n=Fh(s,s.pendingProps),n.flags|=2,Gn(s),s.memoizedState=null,n}function r1(n,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Fe){if(u.mode==="hidden")return n=Fh(s,u),s.lanes=536870912,Eu(null,n);if(Em(s),(n=dt)?(n=dT(n,oi),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:er!==null?{id:Xi,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},o=U_(n),o.return=s,s.child=o,tn=s,dt=null)):n=null,n===null)throw nr(s);return s.lanes=536870912,null}return Fh(s,u)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Em(s),f)if(s.flags&256)s.flags&=-257,s=tv(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(zt||wo(n,s,o,!1),f=(o&n.childLanes)!==0,zt||f){if(u=ct,u!==null&&(_=Fl(u,o),_!==0&&_!==d.retryLane))throw d.retryLane=_,da(n,_),Pn(u,n,_),Fm;ef(),s=tv(n,s,o)}else n=d.treeContext,dt=ui(_.nextSibling),tn=s,Fe=!0,tr=null,oi=!1,n!==null&&z_(s,n),s=Fh(s,u),s.flags|=4096;return s}return n=ps(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Gh(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Gm(n,s,o,u,f){return ya(s),o=Sm(n,s,o,u,void 0,f),u=Am(),n!==null&&!zt?(xm(n,s,f),Es(n,s,f)):(Fe&&u&&rm(s),s.flags|=1,sn(n,s,o,f),s.child)}function nv(n,s,o,u,f,d){return ya(s),s.updateQueue=null,o=r0(s,u,o,f),s0(n),u=Am(),n!==null&&!zt?(xm(n,s,d),Es(n,s,d)):(Fe&&u&&rm(s),s.flags|=1,sn(n,s,o,d),s.child)}function iv(n,s,o,u,f){if(ya(s),s.stateNode===null){var d=vo,_=o.contextType;typeof _=="object"&&_!==null&&(d=nn(_)),d=new o(u,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=zm,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=u,d.state=s.memoizedState,d.refs={},pm(s),_=o.contextType,d.context=typeof _=="object"&&_!==null?nn(_):vo,d.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Bm(s,o,_,u),d.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&zm.enqueueReplaceState(d,d.state,null),yu(s,u,d,f),pu(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){d=s.stateNode;var w=s.memoizedProps,C=wa(o,w);d.props=C;var F=d.context,J=o.contextType;_=vo,typeof J=="object"&&J!==null&&(_=nn(J));var ee=o.getDerivedStateFromProps;J=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,J||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w||F!==_)&&F0(s,d,u,_),sr=!1;var H=s.memoizedState;d.state=H,yu(s,u,d,f),pu(),F=s.memoizedState,w||H!==F||sr?(typeof ee=="function"&&(Bm(s,o,ee,u),F=s.memoizedState),(C=sr||q0(s,o,C,u,H,F,_))?(J||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=F),d.props=u,d.state=F,d.context=_,u=C):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{d=s.stateNode,ym(n,s),_=s.memoizedProps,J=wa(o,_),d.props=J,ee=s.pendingProps,H=d.context,F=o.contextType,C=vo,typeof F=="object"&&F!==null&&(C=nn(F)),w=o.getDerivedStateFromProps,(F=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==ee||H!==C)&&F0(s,d,u,C),sr=!1,H=s.memoizedState,d.state=H,yu(s,u,d,f),pu();var $=s.memoizedState;_!==ee||H!==$||sr||n!==null&&n.dependencies!==null&&Ah(n.dependencies)?(typeof w=="function"&&(Bm(s,o,w,u),$=s.memoizedState),(J=sr||q0(s,o,J,u,H,$,C)||n!==null&&n.dependencies!==null&&Ah(n.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(u,$,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(u,$,C)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=$),d.props=u,d.state=$,d.context=C,u=J):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),u=!1)}return d=u,Gh(n,s),u=(s.flags&128)!==0,d||u?(d=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,n!==null&&u?(s.child=ba(s,n.child,null,f),s.child=ba(s,null,o,f)):sn(n,s,o,f),s.memoizedState=d.state,n=s.child):n=Es(n,s,f),n}function sv(n,s,o,u){return ga(),s.flags|=256,sn(n,s,o,u),s.child}var Hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qm(n){return{baseLanes:n,cachePool:K_()}}function Km(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Qn),n}function rv(n,s,o){var u=s.pendingProps,f=!1,d=(s.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Ct.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(Fe){if(f?or(s):lr(),(n=dt)?(n=dT(n,oi),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:er!==null?{id:Xi,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},o=U_(n),o.return=s,s.child=o,tn=s,dt=null)):n=null,n===null)throw nr(s);return Ng(n)?s.lanes=32:s.lanes=536870912,null}var w=u.children;return u=u.fallback,f?(lr(),f=s.mode,w=Hh({mode:"hidden",children:w},f),u=ma(u,f,o,null),w.return=s,u.return=s,w.sibling=u,s.child=w,u=s.child,u.memoizedState=Qm(o),u.childLanes=Km(n,_,o),s.memoizedState=Hm,Eu(null,u)):(or(s),Ym(s,w))}var C=n.memoizedState;if(C!==null&&(w=C.dehydrated,w!==null)){if(d)s.flags&256?(or(s),s.flags&=-257,s=Xm(n,s,o)):s.memoizedState!==null?(lr(),s.child=n.child,s.flags|=128,s=null):(lr(),w=u.fallback,f=s.mode,u=Hh({mode:"visible",children:u.children},f),w=ma(w,f,o,null),w.flags|=2,u.return=s,w.return=s,u.sibling=w,s.child=u,ba(s,n.child,null,o),u=s.child,u.memoizedState=Qm(o),u.childLanes=Km(n,_,o),s.memoizedState=Hm,s=Eu(null,u));else if(or(s),Ng(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var F=_.dgst;_=F,u=Error(i(419)),u.stack="",u.digest=_,cu({value:u,source:null,stack:null}),s=Xm(n,s,o)}else if(zt||wo(n,s,o,!1),_=(o&n.childLanes)!==0,zt||_){if(_=ct,_!==null&&(u=Fl(_,o),u!==0&&u!==C.retryLane))throw C.retryLane=u,da(n,u),Pn(_,n,u),Fm;Ig(w)||ef(),s=Xm(n,s,o)}else Ig(w)?(s.flags|=192,s.child=n.child,s=null):(n=C.treeContext,dt=ui(w.nextSibling),tn=s,Fe=!0,tr=null,oi=!1,n!==null&&z_(s,n),s=Ym(s,u.children),s.flags|=4096);return s}return f?(lr(),w=u.fallback,f=s.mode,C=n.child,F=C.sibling,u=ps(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,F!==null?w=ps(F,w):(w=ma(w,f,o,null),w.flags|=2),w.return=s,u.return=s,u.sibling=w,s.child=u,Eu(null,u),u=s.child,w=n.child.memoizedState,w===null?w=Qm(o):(f=w.cachePool,f!==null?(C=Lt._currentValue,f=f.parent!==C?{parent:C,pool:C}:f):f=K_(),w={baseLanes:w.baseLanes|o,cachePool:f}),u.memoizedState=w,u.childLanes=Km(n,_,o),s.memoizedState=Hm,Eu(n.child,u)):(or(s),o=n.child,n=o.sibling,o=ps(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=o,s.memoizedState=null,o)}function Ym(n,s){return s=Hh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Hh(n,s){return n=qn(22,n,null,s),n.lanes=0,n}function Xm(n,s,o){return ba(s,n.child,null,o),n=Ym(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function av(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),cm(n.return,s,o)}function $m(n,s,o,u,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:d}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=d)}function ov(n,s,o){var u=s.pendingProps,f=u.revealOrder,d=u.tail;u=u.children;var _=Ct.current,w=(_&2)!==0;if(w?(_=_&1|2,s.flags|=128):_&=1,ce(Ct,_),sn(n,s,u,o),u=Fe?uu:0,!w&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&av(n,o,s);else if(n.tag===19)av(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&Oh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),$m(s,!1,f,o,d,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Oh(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}$m(s,!0,o,null,d,u);break;case"together":$m(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Es(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),hr|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(wo(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=ps(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=ps(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Zm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Ah(n)))}function a1(n,s,o){switch(s.tag){case 3:Ie(s,s.stateNode.containerInfo),ir(s,Lt,n.memoizedState.cache),ga();break;case 27:case 5:Ye(s);break;case 4:Ie(s,s.stateNode.containerInfo);break;case 10:ir(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Em(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(or(s),s.flags|=128,null):(o&s.child.childLanes)!==0?rv(n,s,o):(or(s),n=Es(n,s,o),n!==null?n.sibling:null);or(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(wo(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return ov(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(Ct,Ct.current),u)break;return null;case 22:return s.lanes=0,W0(n,s,o,s.pendingProps);case 24:ir(s,Lt,n.memoizedState.cache)}return Es(n,s,o)}function lv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)zt=!0;else{if(!Zm(n,o)&&(s.flags&128)===0)return zt=!1,a1(n,s,o);zt=(n.flags&131072)!==0}else zt=!1,Fe&&(s.flags&1048576)!==0&&B_(s,uu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=va(s.elementType),s.type=n,typeof n=="function")nm(n)?(u=wa(n,u),s.tag=1,s=iv(null,s,n,u,o)):(s.tag=0,s=Gm(null,s,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===ge){s.tag=11,s=$0(null,s,n,u,o);break e}else if(f===I){s.tag=14,s=Z0(null,s,n,u,o);break e}}throw s=Ne(n)||n,Error(i(306,s,""))}}return s;case 0:return Gm(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=wa(u,s.pendingProps),iv(n,s,u,f,o);case 3:e:{if(Ie(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var d=s.memoizedState;f=d.element,ym(n,s),yu(s,u,null,o);var _=s.memoizedState;if(u=_.cache,ir(s,Lt,u),u!==d.cache&&hm(s,[Lt],o,!0),pu(),u=_.element,d.isDehydrated)if(d={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=sv(n,s,u,o);break e}else if(u!==f){f=si(Error(i(424)),s),cu(f),s=sv(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(dt=ui(n.firstChild),tn=s,Fe=!0,tr=null,oi=!0,o=W_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ga(),u===f){s=Es(n,s,o);break e}sn(n,s,u,o)}s=s.child}return s;case 26:return Gh(n,s),n===null?(o=vT(s.type,null,s.pendingProps,null))?s.memoizedState=o:Fe||(o=s.type,n=s.pendingProps,u=lf(fe.current).createElement(o),u[kt]=s,u[Yt]=n,rn(u,o,n),jt(u),s.stateNode=u):s.memoizedState=vT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ye(s),n===null&&Fe&&(u=s.stateNode=pT(s.type,s.pendingProps,fe.current),tn=s,oi=!0,f=dt,pr(s.type)?(Cg=f,dt=ui(u.firstChild)):dt=f),sn(n,s,s.pendingProps.children,o),Gh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Fe&&((f=u=dt)&&(u=k1(u,s.type,s.pendingProps,oi),u!==null?(s.stateNode=u,tn=s,dt=ui(u.firstChild),oi=!1,f=!0):f=!1),f||nr(s)),Ye(s),f=s.type,d=s.pendingProps,_=n!==null?n.memoizedProps:null,u=d.children,Ag(f,d)?u=null:_!==null&&Ag(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=Sm(n,s,Zx,null,null,o),ju._currentValue=f),Gh(n,s),sn(n,s,u,o),s.child;case 6:return n===null&&Fe&&((n=o=dt)&&(o=j1(o,s.pendingProps,oi),o!==null?(s.stateNode=o,tn=s,dt=null,n=!0):n=!1),n||nr(s)),null;case 13:return rv(n,s,o);case 4:return Ie(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=ba(s,null,u,o):sn(n,s,u,o),s.child;case 11:return $0(n,s,s.type,s.pendingProps,o);case 7:return sn(n,s,s.pendingProps,o),s.child;case 8:return sn(n,s,s.pendingProps.children,o),s.child;case 12:return sn(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,ir(s,s.type,u.value),sn(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ya(s),f=nn(f),u=u(f),s.flags|=1,sn(n,s,u,o),s.child;case 14:return Z0(n,s,s.type,s.pendingProps,o);case 15:return J0(n,s,s.type,s.pendingProps,o);case 19:return ov(n,s,o);case 31:return r1(n,s,o);case 22:return W0(n,s,o,s.pendingProps);case 24:return ya(s),u=nn(Lt),n===null?(f=mm(),f===null&&(f=ct,d=fm(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=o),f=d),s.memoizedState={parent:u,cache:f},pm(s),ir(s,Lt,f)):((n.lanes&o)!==0&&(ym(n,s),yu(s,null,null,o),pu()),f=n.memoizedState,d=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),ir(s,Lt,u)):(u=d.cache,ir(s,Lt,u),u!==f.cache&&hm(s,[Lt],o,!0))),sn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ws(n){n.flags|=4}function Jm(n,s,o,u,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Pv())n.flags|=8192;else throw Ta=Nh,gm}else n.flags&=-16777217}function uv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!ST(s))if(Pv())n.flags|=8192;else throw Ta=Nh,gm}function Qh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Jc():536870912,n.lanes|=s,Po|=s)}function wu(n,s){if(!Fe)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function mt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function o1(n,s,o){var u=s.pendingProps;switch(am(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(s),null;case 1:return mt(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),vs(Lt),Ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Eo(s)?ws(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,lm())),mt(s),null;case 26:var f=s.type,d=s.memoizedState;return n===null?(ws(s),d!==null?(mt(s),uv(s,d)):(mt(s),Jm(s,f,null,u,o))):d?d!==n.memoizedState?(ws(s),mt(s),uv(s,d)):(mt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&ws(s),mt(s),Jm(s,f,n,u,o)),null;case 27:if(_n(s),o=fe.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ws(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return mt(s),null}n=X.current,Eo(s)?q_(s):(n=pT(f,u,o),s.stateNode=n,ws(s))}return mt(s),null;case 5:if(_n(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ws(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return mt(s),null}if(d=X.current,Eo(s))q_(s);else{var _=lf(fe.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?d.multiple=!0:u.size&&(d.size=u.size);break;default:d=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}d[kt]=s,d[Yt]=u;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=d;e:switch(rn(d,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ws(s)}}return mt(s),Jm(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&ws(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=fe.current,Eo(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=tn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[kt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||rT(n.nodeValue,o)),n||nr(s,!0)}else n=lf(n).createTextNode(u),n[kt]=s,s.stateNode=n}return mt(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=Eo(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[kt]=s}else ga(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mt(s),n=!1}else o=lm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Gn(s),s):(Gn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return mt(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Eo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[kt]=s}else ga(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mt(s),f=!1}else f=lm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Gn(s),s):(Gn(s),null)}return Gn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),d=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(d=u.memoizedState.cachePool.pool),d!==f&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Qh(s,s.updateQueue),mt(s),null);case 4:return Ae(),n===null&&Tg(s.stateNode.containerInfo),mt(s),null;case 10:return vs(s.type),mt(s),null;case 19:if(Z(Ct),u=s.memoizedState,u===null)return mt(s),null;if(f=(s.flags&128)!==0,d=u.rendering,d===null)if(f)wu(u,!1);else{if(At!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(d=Oh(n),d!==null){for(s.flags|=128,wu(u,!1),n=d.updateQueue,s.updateQueue=n,Qh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)j_(o,n),o=o.sibling;return ce(Ct,Ct.current&1|2),Fe&&ys(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&vn()>Zh&&(s.flags|=128,f=!0,wu(u,!1),s.lanes=4194304)}else{if(!f)if(n=Oh(d),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Qh(s,n),wu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!Fe)return mt(s),null}else 2*vn()-u.renderingStartTime>Zh&&o!==536870912&&(s.flags|=128,f=!0,wu(u,!1),s.lanes=4194304);u.isBackwards?(d.sibling=s.child,s.child=d):(n=u.last,n!==null?n.sibling=d:s.child=d,u.last=d)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=vn(),n.sibling=null,o=Ct.current,ce(Ct,f?o&1|2:o&1),Fe&&ys(s,u.treeForkCount),n):(mt(s),null);case 22:case 23:return Gn(s),bm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(mt(s),s.subtreeFlags&6&&(s.flags|=8192)):mt(s),o=s.updateQueue,o!==null&&Qh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&Z(_a),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),vs(Lt),mt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function l1(n,s){switch(am(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return vs(Lt),Ae(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return _n(s),null;case 31:if(s.memoizedState!==null){if(Gn(s),s.alternate===null)throw Error(i(340));ga()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Gn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ga()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Z(Ct),null;case 4:return Ae(),null;case 10:return vs(s.type),null;case 22:case 23:return Gn(s),bm(),n!==null&&Z(_a),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return vs(Lt),null;case 25:return null;default:return null}}function cv(n,s){switch(am(s),s.tag){case 3:vs(Lt),Ae();break;case 26:case 27:case 5:_n(s);break;case 4:Ae();break;case 31:s.memoizedState!==null&&Gn(s);break;case 13:Gn(s);break;case 19:Z(Ct);break;case 10:vs(s.type);break;case 22:case 23:Gn(s),bm(),n!==null&&Z(_a);break;case 24:vs(Lt)}}function Su(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var d=o.create,_=o.inst;u=d(),_.destroy=u}o=o.next}while(o!==f)}}catch(w){nt(s,s.return,w)}}function ur(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var d=f.next;u=d;do{if((u.tag&n)===n){var _=u.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,f=s;var C=o,F=w;try{F()}catch(J){nt(f,C,J)}}}u=u.next}while(u!==d)}}catch(J){nt(s,s.return,J)}}function hv(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{t0(s,o)}catch(u){nt(n,n.return,u)}}}function fv(n,s,o){o.props=wa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){nt(n,s,u)}}function Au(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){nt(n,s,f)}}function Zi(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){nt(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){nt(n,s,f)}else o.current=null}function dv(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){nt(n,n.return,f)}}function Wm(n,s,o){try{var u=n.stateNode;C1(u,n.type,o,s),u[Yt]=s}catch(f){nt(n,n.return,f)}}function mv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&pr(n.type)||n.tag===4}function eg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&pr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function tg(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=_i));else if(u!==4&&(u===27&&pr(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(tg(n,s,o),n=n.sibling;n!==null;)tg(n,s,o),n=n.sibling}function Kh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&pr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Kh(n,s,o),n=n.sibling;n!==null;)Kh(n,s,o),n=n.sibling}function gv(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);rn(s,u,o),s[kt]=n,s[Yt]=o}catch(d){nt(n,n.return,d)}}var Ss=!1,qt=!1,ng=!1,pv=typeof WeakSet=="function"?WeakSet:Set,$t=null;function u1(n,s){if(n=n.containerInfo,wg=gf,n=I_(n),Xd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break e}var _=0,w=-1,C=-1,F=0,J=0,ee=n,H=null;t:for(;;){for(var $;ee!==o||f!==0&&ee.nodeType!==3||(w=_+f),ee!==d||u!==0&&ee.nodeType!==3||(C=_+u),ee.nodeType===3&&(_+=ee.nodeValue.length),($=ee.firstChild)!==null;)H=ee,ee=$;for(;;){if(ee===n)break t;if(H===o&&++F===f&&(w=_),H===d&&++J===u&&(C=_),($=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=$}o=w===-1||C===-1?null:{start:w,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(Sg={focusedElem:n,selectionRange:o},gf=!1,$t=s;$t!==null;)if(s=$t,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,$t=n;else for(;$t!==null;){switch(s=$t,d=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,o=s,f=d.memoizedProps,d=d.memoizedState,u=o.stateNode;try{var ve=wa(o.type,f);n=u.getSnapshotBeforeUpdate(ve,d),u.__reactInternalSnapshotBeforeUpdate=n}catch(Re){nt(o,o.return,Re)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Rg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Rg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,$t=n;break}$t=s.return}}function yv(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:xs(n,o),u&4&&Su(5,o);break;case 1:if(xs(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(_){nt(o,o.return,_)}else{var f=wa(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){nt(o,o.return,_)}}u&64&&hv(o),u&512&&Au(o,o.return);break;case 3:if(xs(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{t0(n,s)}catch(_){nt(o,o.return,_)}}break;case 27:s===null&&u&4&&gv(o);case 26:case 5:xs(n,o),s===null&&u&4&&dv(o),u&512&&Au(o,o.return);break;case 12:xs(n,o);break;case 31:xs(n,o),u&4&&Tv(n,o);break;case 13:xs(n,o),u&4&&bv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=_1.bind(null,o),U1(n,o))));break;case 22:if(u=o.memoizedState!==null||Ss,!u){s=s!==null&&s.memoizedState!==null||qt,f=Ss;var d=qt;Ss=u,(qt=s)&&!d?Rs(n,o,(o.subtreeFlags&8772)!==0):xs(n,o),Ss=f,qt=d}break;case 30:break;default:xs(n,o)}}function _v(n){var s=n.alternate;s!==null&&(n.alternate=null,_v(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&so(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var _t=null,Dn=!1;function As(n,s,o){for(o=o.child;o!==null;)vv(n,s,o),o=o.sibling}function vv(n,s,o){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(mi,o)}catch{}switch(o.tag){case 26:qt||Zi(o,s),As(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:qt||Zi(o,s);var u=_t,f=Dn;pr(o.type)&&(_t=o.stateNode,Dn=!1),As(n,s,o),Mu(o.stateNode),_t=u,Dn=f;break;case 5:qt||Zi(o,s);case 6:if(u=_t,f=Dn,_t=null,As(n,s,o),_t=u,Dn=f,_t!==null)if(Dn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(o.stateNode)}catch(d){nt(o,s,d)}else try{_t.removeChild(o.stateNode)}catch(d){nt(o,s,d)}break;case 18:_t!==null&&(Dn?(n=_t,hT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Fo(n)):hT(_t,o.stateNode));break;case 4:u=_t,f=Dn,_t=o.stateNode.containerInfo,Dn=!0,As(n,s,o),_t=u,Dn=f;break;case 0:case 11:case 14:case 15:ur(2,o,s),qt||ur(4,o,s),As(n,s,o);break;case 1:qt||(Zi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&fv(o,s,u)),As(n,s,o);break;case 21:As(n,s,o);break;case 22:qt=(u=qt)||o.memoizedState!==null,As(n,s,o),qt=u;break;default:As(n,s,o)}}function Tv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Fo(n)}catch(o){nt(s,s.return,o)}}}function bv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Fo(n)}catch(o){nt(s,s.return,o)}}function c1(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new pv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new pv),s;default:throw Error(i(435,n.tag))}}function Yh(n,s){var o=c1(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=v1.bind(null,n,u);u.then(f,f)}})}function Vn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],d=n,_=s,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(pr(w.type)){_t=w.stateNode,Dn=!1;break e}break;case 5:_t=w.stateNode,Dn=!1;break e;case 3:case 4:_t=w.stateNode.containerInfo,Dn=!0;break e}w=w.return}if(_t===null)throw Error(i(160));vv(d,_,f),_t=null,Dn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ev(s,n),s=s.sibling}var Si=null;function Ev(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Vn(s,n),On(n),u&4&&(ur(3,n,n.return),Su(3,n),ur(5,n,n.return));break;case 1:Vn(s,n),On(n),u&512&&(qt||o===null||Zi(o,o.return)),u&64&&Ss&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Si;if(Vn(s,n),On(n),u&512&&(qt||o===null||Zi(o,o.return)),u&4){var d=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":d=f.getElementsByTagName("title")[0],(!d||d[ji]||d[kt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(u),f.head.insertBefore(d,f.querySelector("head > title"))),rn(d,u,o),d[kt]=n,jt(d),u=d;break e;case"link":var _=ET("link","href",f).get(u+(o.href||""));if(_){for(var w=0;w<_.length;w++)if(d=_[w],d.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&d.getAttribute("rel")===(o.rel==null?null:o.rel)&&d.getAttribute("title")===(o.title==null?null:o.title)&&d.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(w,1);break t}}d=f.createElement(u),rn(d,u,o),f.head.appendChild(d);break;case"meta":if(_=ET("meta","content",f).get(u+(o.content||""))){for(w=0;w<_.length;w++)if(d=_[w],d.getAttribute("content")===(o.content==null?null:""+o.content)&&d.getAttribute("name")===(o.name==null?null:o.name)&&d.getAttribute("property")===(o.property==null?null:o.property)&&d.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&d.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(w,1);break t}}d=f.createElement(u),rn(d,u,o),f.head.appendChild(d);break;default:throw Error(i(468,u))}d[kt]=n,jt(d),u=d}n.stateNode=u}else wT(f,n.type,n.stateNode);else n.stateNode=bT(f,u,n.memoizedProps);else d!==u?(d===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):d.count--,u===null?wT(f,n.type,n.stateNode):bT(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Wm(n,n.memoizedProps,o.memoizedProps)}break;case 27:Vn(s,n),On(n),u&512&&(qt||o===null||Zi(o,o.return)),o!==null&&u&4&&Wm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Vn(s,n),On(n),u&512&&(qt||o===null||Zi(o,o.return)),n.flags&32){f=n.stateNode;try{Cn(f,"")}catch(ve){nt(n,n.return,ve)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Wm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(ng=!0);break;case 6:if(Vn(s,n),On(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(ve){nt(n,n.return,ve)}}break;case 3:if(hf=null,f=Si,Si=uf(s.containerInfo),Vn(s,n),Si=f,On(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Fo(s.containerInfo)}catch(ve){nt(n,n.return,ve)}ng&&(ng=!1,wv(n));break;case 4:u=Si,Si=uf(n.stateNode.containerInfo),Vn(s,n),On(n),Si=u;break;case 12:Vn(s,n),On(n);break;case 31:Vn(s,n),On(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Yh(n,u)));break;case 13:Vn(s,n),On(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&($h=vn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Yh(n,u)));break;case 22:f=n.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,F=Ss,J=qt;if(Ss=F||f,qt=J||C,Vn(s,n),qt=J,Ss=F,On(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||C||Ss||qt||Sa(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){C=o=s;try{if(d=C.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=C.stateNode;var ee=C.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;w.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(ve){nt(C,C.return,ve)}}}else if(s.tag===6){if(o===null){C=s;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(ve){nt(C,C.return,ve)}}}else if(s.tag===18){if(o===null){C=s;try{var $=C.stateNode;f?fT($,!0):fT(C.stateNode,!1)}catch(ve){nt(C,C.return,ve)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Yh(n,o))));break;case 19:Vn(s,n),On(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Yh(n,u)));break;case 30:break;case 21:break;default:Vn(s,n),On(n)}}function On(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(mv(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,d=eg(n);Kh(n,d,f);break;case 5:var _=o.stateNode;o.flags&32&&(Cn(_,""),o.flags&=-33);var w=eg(n);Kh(n,w,_);break;case 3:case 4:var C=o.stateNode.containerInfo,F=eg(n);tg(n,F,C);break;default:throw Error(i(161))}}catch(J){nt(n,n.return,J)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function wv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;wv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function xs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)yv(n,s.alternate,s),s=s.sibling}function Sa(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ur(4,s,s.return),Sa(s);break;case 1:Zi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&fv(s,s.return,o),Sa(s);break;case 27:Mu(s.stateNode);case 26:case 5:Zi(s,s.return),Sa(s);break;case 22:s.memoizedState===null&&Sa(s);break;case 30:Sa(s);break;default:Sa(s)}n=n.sibling}}function Rs(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,d=s,_=d.flags;switch(d.tag){case 0:case 11:case 15:Rs(f,d,o),Su(4,d);break;case 1:if(Rs(f,d,o),u=d,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){nt(u,u.return,F)}if(u=d,f=u.updateQueue,f!==null){var w=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)e0(C[f],w)}catch(F){nt(u,u.return,F)}}o&&_&64&&hv(d),Au(d,d.return);break;case 27:gv(d);case 26:case 5:Rs(f,d,o),o&&u===null&&_&4&&dv(d),Au(d,d.return);break;case 12:Rs(f,d,o);break;case 31:Rs(f,d,o),o&&_&4&&Tv(f,d);break;case 13:Rs(f,d,o),o&&_&4&&bv(f,d);break;case 22:d.memoizedState===null&&Rs(f,d,o),Au(d,d.return);break;case 30:break;default:Rs(f,d,o)}s=s.sibling}}function ig(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&hu(o))}function sg(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&hu(n))}function Ai(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Sv(n,s,o,u),s=s.sibling}function Sv(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Ai(n,s,o,u),f&2048&&Su(9,s);break;case 1:Ai(n,s,o,u);break;case 3:Ai(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&hu(n)));break;case 12:if(f&2048){Ai(n,s,o,u),n=s.stateNode;try{var d=s.memoizedProps,_=d.id,w=d.onPostCommit;typeof w=="function"&&w(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){nt(s,s.return,C)}}else Ai(n,s,o,u);break;case 31:Ai(n,s,o,u);break;case 13:Ai(n,s,o,u);break;case 23:break;case 22:d=s.stateNode,_=s.alternate,s.memoizedState!==null?d._visibility&2?Ai(n,s,o,u):xu(n,s):d._visibility&2?Ai(n,s,o,u):(d._visibility|=2,Vo(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&ig(_,s);break;case 24:Ai(n,s,o,u),f&2048&&sg(s.alternate,s);break;default:Ai(n,s,o,u)}}function Vo(n,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var d=n,_=s,w=o,C=u,F=_.flags;switch(_.tag){case 0:case 11:case 15:Vo(d,_,w,C,f),Su(8,_);break;case 23:break;case 22:var J=_.stateNode;_.memoizedState!==null?J._visibility&2?Vo(d,_,w,C,f):xu(d,_):(J._visibility|=2,Vo(d,_,w,C,f)),f&&F&2048&&ig(_.alternate,_);break;case 24:Vo(d,_,w,C,f),f&&F&2048&&sg(_.alternate,_);break;default:Vo(d,_,w,C,f)}s=s.sibling}}function xu(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:xu(o,u),f&2048&&ig(u.alternate,u);break;case 24:xu(o,u),f&2048&&sg(u.alternate,u);break;default:xu(o,u)}s=s.sibling}}var Ru=8192;function Oo(n,s,o){if(n.subtreeFlags&Ru)for(n=n.child;n!==null;)Av(n,s,o),n=n.sibling}function Av(n,s,o){switch(n.tag){case 26:Oo(n,s,o),n.flags&Ru&&n.memoizedState!==null&&$1(o,Si,n.memoizedState,n.memoizedProps);break;case 5:Oo(n,s,o);break;case 3:case 4:var u=Si;Si=uf(n.stateNode.containerInfo),Oo(n,s,o),Si=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Ru,Ru=16777216,Oo(n,s,o),Ru=u):Oo(n,s,o));break;default:Oo(n,s,o)}}function xv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Iu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];$t=u,Iv(u,n)}xv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rv(n),n=n.sibling}function Rv(n){switch(n.tag){case 0:case 11:case 15:Iu(n),n.flags&2048&&ur(9,n,n.return);break;case 3:Iu(n);break;case 12:Iu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Xh(n)):Iu(n);break;default:Iu(n)}}function Xh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];$t=u,Iv(u,n)}xv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ur(8,s,s.return),Xh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Xh(s));break;default:Xh(s)}n=n.sibling}}function Iv(n,s){for(;$t!==null;){var o=$t;switch(o.tag){case 0:case 11:case 15:ur(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:hu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,$t=u;else e:for(o=n;$t!==null;){u=$t;var f=u.sibling,d=u.return;if(_v(u),u===o){$t=null;break e}if(f!==null){f.return=d,$t=f;break e}$t=d}}}var h1={getCacheForType:function(n){var s=nn(Lt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return nn(Lt).controller.signal}},f1=typeof WeakMap=="function"?WeakMap:Map,Je=0,ct=null,je=null,Be=0,tt=0,Hn=null,cr=!1,Mo=!1,rg=!1,Is=0,At=0,hr=0,Aa=0,ag=0,Qn=0,Po=0,Nu=null,Mn=null,og=!1,$h=0,Nv=0,Zh=1/0,Jh=null,fr=null,Qt=0,dr=null,ko=null,Ns=0,lg=0,ug=null,Cv=null,Cu=0,cg=null;function Kn(){return(Je&2)!==0&&Be!==0?Be&-Be:Y.T!==null?pg():Wc()}function Dv(){if(Qn===0)if((Be&536870912)===0||Fe){var n=Jr;Jr<<=1,(Jr&3932160)===0&&(Jr=262144),Qn=n}else Qn=536870912;return n=Fn.current,n!==null&&(n.flags|=32),Qn}function Pn(n,s,o){(n===ct&&(tt===2||tt===9)||n.cancelPendingCommit!==null)&&(jo(n,0),mr(n,Be,Qn,!1)),Wr(n,o),((Je&2)===0||n!==ct)&&(n===ct&&((Je&2)===0&&(Aa|=o),At===4&&mr(n,Be,Qn,!1)),Ji(n))}function Vv(n,s,o){if((Je&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||gi(n,s),f=u?g1(n,s):fg(n,s,!0),d=u;do{if(f===0){Mo&&!u&&mr(n,s,0,!1);break}else{if(o=n.current.alternate,d&&!d1(o)){f=fg(n,s,!1),d=!1;continue}if(f===2){if(d=s,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var w=n;f=Nu;var C=w.current.memoizedState.isDehydrated;if(C&&(jo(w,_).flags|=256),_=fg(w,_,!1),_!==2){if(rg&&!C){w.errorRecoveryDisabledLanes|=d,Aa|=d,f=4;break e}d=Mn,Mn=f,d!==null&&(Mn===null?Mn=d:Mn.push.apply(Mn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){jo(n,0),mr(n,s,0,!0);break}e:{switch(u=n,d=f,d){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:mr(u,s,Qn,!cr);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=$h+300-vn(),10<f)){if(mr(u,s,Qn,!cr),Mi(u,0,!0)!==0)break e;Ns=s,u.timeoutHandle=uT(Ov.bind(null,u,o,Mn,Jh,og,s,Qn,Aa,Po,cr,d,"Throttled",-0,0),f);break e}Ov(u,o,Mn,Jh,og,s,Qn,Aa,Po,cr,d,null,-0,0)}}break}while(!0);Ji(n)}function Ov(n,s,o,u,f,d,_,w,C,F,J,ee,H,$){if(n.timeoutHandle=-1,ee=s.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_i},Av(s,d,ee);var ve=(d&62914560)===d?$h-vn():(d&4194048)===d?Nv-vn():0;if(ve=Z1(ee,ve),ve!==null){Ns=d,n.cancelPendingCommit=ve(zv.bind(null,n,s,d,o,u,f,_,w,C,J,ee,null,H,$)),mr(n,d,_,!F);return}}zv(n,s,d,o,u,f,_,w,C)}function d1(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],d=f.getSnapshot;f=f.value;try{if(!zn(d(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function mr(n,s,o,u){s&=~ag,s&=~Aa,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var d=31-It(f),_=1<<d;u[d]=-1,f&=~_}o!==0&&ea(n,o,s)}function Wh(){return(Je&6)===0?(Du(0),!1):!0}function hg(){if(je!==null){if(tt===0)var n=je.return;else n=je,_s=pa=null,Rm(n),Ro=null,du=0,n=je;for(;n!==null;)cv(n.alternate,n),n=n.return;je=null}}function jo(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,O1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Ns=0,hg(),ct=n,je=o=ps(n.current,null),Be=s,tt=0,Hn=null,cr=!1,Mo=gi(n,s),rg=!1,Po=Qn=ag=Aa=hr=At=0,Mn=Nu=null,og=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-It(u),d=1<<f;s|=n[f],u&=~d}return Is=s,Th(),o}function Mv(n,s){Me=null,Y.H=bu,s===xo||s===Ih?(s=$_(),tt=3):s===gm?(s=$_(),tt=4):tt=s===Fm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Hn=s,je===null&&(At=1,qh(n,si(s,n.current)))}function Pv(){var n=Fn.current;return n===null?!0:(Be&4194048)===Be?li===null:(Be&62914560)===Be||(Be&536870912)!==0?n===li:!1}function kv(){var n=Y.H;return Y.H=bu,n===null?bu:n}function jv(){var n=Y.A;return Y.A=h1,n}function ef(){At=4,cr||(Be&4194048)!==Be&&Fn.current!==null||(Mo=!0),(hr&134217727)===0&&(Aa&134217727)===0||ct===null||mr(ct,Be,Qn,!1)}function fg(n,s,o){var u=Je;Je|=2;var f=kv(),d=jv();(ct!==n||Be!==s)&&(Jh=null,jo(n,s)),s=!1;var _=At;e:do try{if(tt!==0&&je!==null){var w=je,C=Hn;switch(tt){case 8:hg(),_=6;break e;case 3:case 2:case 9:case 6:Fn.current===null&&(s=!0);var F=tt;if(tt=0,Hn=null,Uo(n,w,C,F),o&&Mo){_=0;break e}break;default:F=tt,tt=0,Hn=null,Uo(n,w,C,F)}}m1(),_=At;break}catch(J){Mv(n,J)}while(!0);return s&&n.shellSuspendCounter++,_s=pa=null,Je=u,Y.H=f,Y.A=d,je===null&&(ct=null,Be=0,Th()),_}function m1(){for(;je!==null;)Uv(je)}function g1(n,s){var o=Je;Je|=2;var u=kv(),f=jv();ct!==n||Be!==s?(Jh=null,Zh=vn()+500,jo(n,s)):Mo=gi(n,s);e:do try{if(tt!==0&&je!==null){s=je;var d=Hn;t:switch(tt){case 1:tt=0,Hn=null,Uo(n,s,d,1);break;case 2:case 9:if(Y_(d)){tt=0,Hn=null,Lv(s);break}s=function(){tt!==2&&tt!==9||ct!==n||(tt=7),Ji(n)},d.then(s,s);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Y_(d)?(tt=0,Hn=null,Lv(s)):(tt=0,Hn=null,Uo(n,s,d,7));break;case 5:var _=null;switch(je.tag){case 26:_=je.memoizedState;case 5:case 27:var w=je;if(_?ST(_):w.stateNode.complete){tt=0,Hn=null;var C=w.sibling;if(C!==null)je=C;else{var F=w.return;F!==null?(je=F,tf(F)):je=null}break t}}tt=0,Hn=null,Uo(n,s,d,5);break;case 6:tt=0,Hn=null,Uo(n,s,d,6);break;case 8:hg(),At=6;break e;default:throw Error(i(462))}}p1();break}catch(J){Mv(n,J)}while(!0);return _s=pa=null,Y.H=u,Y.A=f,Je=o,je!==null?0:(ct=null,Be=0,Th(),At)}function p1(){for(;je!==null&&!qd();)Uv(je)}function Uv(n){var s=lv(n.alternate,n,Is);n.memoizedProps=n.pendingProps,s===null?tf(n):je=s}function Lv(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=nv(o,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=nv(o,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:Rm(s);default:cv(o,s),s=je=j_(s,Is),s=lv(o,s,Is)}n.memoizedProps=n.pendingProps,s===null?tf(n):je=s}function Uo(n,s,o,u){_s=pa=null,Rm(s),Ro=null,du=0;var f=s.return;try{if(s1(n,f,s,o,Be)){At=1,qh(n,si(o,n.current)),je=null;return}}catch(d){if(f!==null)throw je=f,d;At=1,qh(n,si(o,n.current)),je=null;return}s.flags&32768?(Fe||u===1?n=!0:Mo||(Be&536870912)!==0?n=!1:(cr=n=!0,(u===2||u===9||u===3||u===6)&&(u=Fn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Bv(s,n)):tf(s)}function tf(n){var s=n;do{if((s.flags&32768)!==0){Bv(s,cr);return}n=s.return;var o=o1(s.alternate,s,Is);if(o!==null){je=o;return}if(s=s.sibling,s!==null){je=s;return}je=s=n}while(s!==null);At===0&&(At=5)}function Bv(n,s){do{var o=l1(n.alternate,n);if(o!==null){o.flags&=32767,je=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){je=n;return}je=n=o}while(n!==null);At=6,je=null}function zv(n,s,o,u,f,d,_,w,C){n.cancelPendingCommit=null;do nf();while(Qt!==0);if((Je&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(d=s.lanes|s.childLanes,d|=em,Hd(n,o,d,_,w,C),n===ct&&(je=ct=null,Be=0),ko=s,dr=n,Ns=o,lg=d,ug=f,Cv=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,T1(Gs,function(){return Qv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,f=le.p,le.p=2,_=Je,Je|=4;try{u1(n,s,o)}finally{Je=_,le.p=f,Y.T=u}}Qt=1,qv(),Fv(),Gv()}}function qv(){if(Qt===1){Qt=0;var n=dr,s=ko,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var u=le.p;le.p=2;var f=Je;Je|=4;try{Ev(s,n);var d=Sg,_=I_(n.containerInfo),w=d.focusedElem,C=d.selectionRange;if(_!==w&&w&&w.ownerDocument&&R_(w.ownerDocument.documentElement,w)){if(C!==null&&Xd(w)){var F=C.start,J=C.end;if(J===void 0&&(J=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(J,w.value.length);else{var ee=w.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var $=H.getSelection(),ve=w.textContent.length,Re=Math.min(C.start,ve),lt=C.end===void 0?Re:Math.min(C.end,ve);!$.extend&&Re>lt&&(_=lt,lt=Re,Re=_);var j=x_(w,Re),M=x_(w,lt);if(j&&M&&($.rangeCount!==1||$.anchorNode!==j.node||$.anchorOffset!==j.offset||$.focusNode!==M.node||$.focusOffset!==M.offset)){var q=ee.createRange();q.setStart(j.node,j.offset),$.removeAllRanges(),Re>lt?($.addRange(q),$.extend(M.node,M.offset)):(q.setEnd(M.node,M.offset),$.addRange(q))}}}}for(ee=[],$=w;$=$.parentNode;)$.nodeType===1&&ee.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ee.length;w++){var W=ee[w];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}gf=!!wg,Sg=wg=null}finally{Je=f,le.p=u,Y.T=o}}n.current=s,Qt=2}}function Fv(){if(Qt===2){Qt=0;var n=dr,s=ko,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var u=le.p;le.p=2;var f=Je;Je|=4;try{yv(n,s.alternate,s)}finally{Je=f,le.p=u,Y.T=o}}Qt=3}}function Gv(){if(Qt===4||Qt===3){Qt=0,Qc();var n=dr,s=ko,o=Ns,u=Cv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Qt=5:(Qt=0,ko=dr=null,Hv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(fr=null),fs(o),s=s.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(mi,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Y.T,f=le.p,le.p=2,Y.T=null;try{for(var d=n.onRecoverableError,_=0;_<u.length;_++){var w=u[_];d(w.value,{componentStack:w.stack})}}finally{Y.T=s,le.p=f}}(Ns&3)!==0&&nf(),Ji(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===cg?Cu++:(Cu=0,cg=n):Cu=0,Du(0)}}function Hv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,hu(s)))}function nf(){return qv(),Fv(),Gv(),Qv()}function Qv(){if(Qt!==5)return!1;var n=dr,s=lg;lg=0;var o=fs(Ns),u=Y.T,f=le.p;try{le.p=32>o?32:o,Y.T=null,o=ug,ug=null;var d=dr,_=Ns;if(Qt=0,ko=dr=null,Ns=0,(Je&6)!==0)throw Error(i(331));var w=Je;if(Je|=4,Rv(d.current),Sv(d,d.current,_,o),Je=w,Du(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(mi,d)}catch{}return!0}finally{le.p=f,Y.T=u,Hv(n,s)}}function Kv(n,s,o){s=si(o,s),s=qm(n.stateNode,s,2),n=ar(n,s,2),n!==null&&(Wr(n,2),Ji(n))}function nt(n,s,o){if(n.tag===3)Kv(n,n,o);else for(;s!==null;){if(s.tag===3){Kv(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(fr===null||!fr.has(u))){n=si(o,n),o=Y0(2),u=ar(s,o,2),u!==null&&(X0(o,u,s,n),Wr(u,2),Ji(u));break}}s=s.return}}function dg(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new f1;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(rg=!0,f.add(o),n=y1.bind(null,n,s,o),s.then(n,n))}function y1(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ct===n&&(Be&o)===o&&(At===4||At===3&&(Be&62914560)===Be&&300>vn()-$h?(Je&2)===0&&jo(n,0):ag|=o,Po===Be&&(Po=0)),Ji(n)}function Yv(n,s){s===0&&(s=Jc()),n=da(n,s),n!==null&&(Wr(n,s),Ji(n))}function _1(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),Yv(n,o)}function v1(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Yv(n,o)}function T1(n,s){return Ht(n,s)}var sf=null,Lo=null,mg=!1,rf=!1,gg=!1,gr=0;function Ji(n){n!==Lo&&n.next===null&&(Lo===null?sf=Lo=n:Lo=Lo.next=n),rf=!0,mg||(mg=!0,E1())}function Du(n,s){if(!gg&&rf){gg=!0;do for(var o=!1,u=sf;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var d=0;else{var _=u.suspendedLanes,w=u.pingedLanes;d=(1<<31-It(42|n)+1)-1,d&=f&~(_&~w),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(o=!0,Jv(u,d))}else d=Be,d=Mi(u,u===ct?d:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(d&3)===0||gi(u,d)||(o=!0,Jv(u,d));u=u.next}while(o);gg=!1}}function b1(){Xv()}function Xv(){rf=mg=!1;var n=0;gr!==0&&V1()&&(n=gr);for(var s=vn(),o=null,u=sf;u!==null;){var f=u.next,d=$v(u,s);d===0?(u.next=null,o===null?sf=f:o.next=f,f===null&&(Lo=o)):(o=u,(n!==0||(d&3)!==0)&&(rf=!0)),u=f}Qt!==0&&Qt!==5||Du(n),gr!==0&&(gr=0)}function $v(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-It(d),w=1<<_,C=f[_];C===-1?((w&o)===0||(w&u)!==0)&&(f[_]=Gd(w,s)):C<=s&&(n.expiredLanes|=w),d&=~w}if(s=ct,o=Be,o=Mi(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(tt===2||tt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Fs(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||gi(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Fs(u),fs(o)){case 2:case 8:o=zl;break;case 32:o=Gs;break;case 268435456:o=Kc;break;default:o=Gs}return u=Zv.bind(null,n),o=Ht(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Fs(u),n.callbackPriority=2,n.callbackNode=null,2}function Zv(n,s){if(Qt!==0&&Qt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(nf()&&n.callbackNode!==o)return null;var u=Be;return u=Mi(n,n===ct?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Vv(n,u,s),$v(n,vn()),n.callbackNode!=null&&n.callbackNode===o?Zv.bind(null,n):null)}function Jv(n,s){if(nf())return null;Vv(n,s,!0)}function E1(){M1(function(){(Je&6)!==0?Ht(Bl,b1):Xv()})}function pg(){if(gr===0){var n=So;n===0&&(n=Vi,Vi<<=1,(Vi&261888)===0&&(Vi=256)),gr=n}return gr}function Wv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:lo(""+n)}function eT(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function w1(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var d=Wv((f[Yt]||null).action),_=u.submitter;_&&(s=(s=_[Yt]||null)?Wv(s.formAction):_.getAttribute("formAction"),s!==null&&(d=s,_=null));var w=new Hi("action","action",null,u,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(gr!==0){var C=_?eT(f,_):new FormData(f);km(o,{pending:!0,data:C,method:f.method,action:d},null,C)}}else typeof d=="function"&&(w.preventDefault(),C=_?eT(f,_):new FormData(f),km(o,{pending:!0,data:C,method:f.method,action:d},d,C))},currentTarget:f}]})}}for(var yg=0;yg<Wd.length;yg++){var _g=Wd[yg],S1=_g.toLowerCase(),A1=_g[0].toUpperCase()+_g.slice(1);wi(S1,"on"+A1)}wi(D_,"onAnimationEnd"),wi(V_,"onAnimationIteration"),wi(O_,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(zx,"onTransitionRun"),wi(qx,"onTransitionStart"),wi(Fx,"onTransitionCancel"),wi(M_,"onTransitionEnd"),zi("onMouseEnter",["mouseout","mouseover"]),zi("onMouseLeave",["mouseout","mouseover"]),zi("onPointerEnter",["pointerout","pointerover"]),zi("onPointerLeave",["pointerout","pointerover"]),Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vu));function tT(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var d=void 0;if(s)for(var _=u.length-1;0<=_;_--){var w=u[_],C=w.instance,F=w.currentTarget;if(w=w.listener,C!==d&&f.isPropagationStopped())break e;d=w,f.currentTarget=F;try{d(f)}catch(J){vh(J)}f.currentTarget=null,d=C}else for(_=0;_<u.length;_++){if(w=u[_],C=w.instance,F=w.currentTarget,w=w.listener,C!==d&&f.isPropagationStopped())break e;d=w,f.currentTarget=F;try{d(f)}catch(J){vh(J)}f.currentTarget=null,d=C}}}}function Ue(n,s){var o=s[io];o===void 0&&(o=s[io]=new Set);var u=n+"__bubble";o.has(u)||(nT(s,n,2,!1),o.add(u))}function vg(n,s,o){var u=0;s&&(u|=4),nT(o,n,u,s)}var af="_reactListening"+Math.random().toString(36).slice(2);function Tg(n){if(!n[af]){n[af]=!0,Gl.forEach(function(o){o!=="selectionchange"&&(x1.has(o)||vg(o,!1,n),vg(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[af]||(s[af]=!0,vg("selectionchange",!1,s))}}function nT(n,s,o,u){switch(DT(s)){case 2:var f=eR;break;case 8:f=tR;break;default:f=Pg}o=f.bind(null,s,o,n),f=void 0,!ra||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function bg(n,s,o,u,f){var d=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var w=u.stateNode.containerInfo;if(w===f)break;if(_===4)for(_=u.return;_!==null;){var C=_.tag;if((C===3||C===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;w!==null;){if(_=Ui(w),_===null)return;if(C=_.tag,C===5||C===6||C===26||C===27){u=d=_;continue e}w=w.parentNode}}u=u.return}$s(function(){var F=d,J=ei(o),ee=[];e:{var H=P_.get(n);if(H!==void 0){var $=Hi,ve=n;switch(n){case"keypress":if(oa(o)===0)break e;case"keydown":case"keyup":$=ph;break;case"focusin":ve="focus",$=ua;break;case"focusout":ve="blur",$=ua;break;case"beforeblur":case"afterblur":$=ua;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=y;break;case D_:case V_:case O_:$=uh;break;case M_:$=A;break;case"scroll":case"scrollend":$=nu;break;case"wheel":$=K;break;case"copy":case"cut":case"paste":$=ch;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=gs;break;case"toggle":case"beforetoggle":$=Oe}var Re=(s&4)!==0,lt=!Re&&(n==="scroll"||n==="scrollend"),j=Re?H!==null?H+"Capture":null:H;Re=[];for(var M=F,q;M!==null;){var W=M;if(q=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||q===null||j===null||(W=vi(M,j),W!=null&&Re.push(Ou(M,W,q))),lt)break;M=M.return}0<Re.length&&(H=new $(H,ve,null,o,J),ee.push({event:H,listeners:Re}))}}if((s&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",$=n==="mouseout"||n==="pointerout",H&&o!==Wl&&(ve=o.relatedTarget||o.fromElement)&&(Ui(ve)||ve[ki]))break e;if(($||H)&&(H=J.window===J?J:(H=J.ownerDocument)?H.defaultView||H.parentWindow:window,$?(ve=o.relatedTarget||o.toElement,$=F,ve=ve?Ui(ve):null,ve!==null&&(lt=l(ve),Re=ve.tag,ve!==lt||Re!==5&&Re!==27&&Re!==6)&&(ve=null)):($=null,ve=F),$!==ve)){if(Re=iu,W="onMouseLeave",j="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(Re=gs,W="onPointerLeave",j="onPointerEnter",M="pointer"),lt=$==null?H:Ln($),q=ve==null?H:Ln(ve),H=new Re(W,M+"leave",$,o,J),H.target=lt,H.relatedTarget=q,W=null,Ui(J)===F&&(Re=new Re(j,M+"enter",ve,o,J),Re.target=q,Re.relatedTarget=lt,W=Re),lt=W,$&&ve)t:{for(Re=R1,j=$,M=ve,q=0,W=j;W;W=Re(W))q++;W=0;for(var xe=M;xe;xe=Re(xe))W++;for(;0<q-W;)j=Re(j),q--;for(;0<W-q;)M=Re(M),W--;for(;q--;){if(j===M||M!==null&&j===M.alternate){Re=j;break t}j=Re(j),M=Re(M)}Re=null}else Re=null;$!==null&&iT(ee,H,$,Re,!1),ve!==null&&lt!==null&&iT(ee,lt,ve,Re,!0)}}e:{if(H=F?Ln(F):window,$=H.nodeName&&H.nodeName.toLowerCase(),$==="select"||$==="input"&&H.type==="file")var Xe=T_;else if(__(H))if(b_)Xe=Ux;else{Xe=kx;var Ee=Px}else $=H.nodeName,!$||$.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?F&&oo(F.elementType)&&(Xe=T_):Xe=jx;if(Xe&&(Xe=Xe(n,F))){v_(ee,Xe,o,J);break e}Ee&&Ee(n,H,F),n==="focusout"&&F&&H.type==="number"&&F.memoizedProps.value!=null&&$l(H,"number",H.value)}switch(Ee=F?Ln(F):window,n){case"focusin":(__(Ee)||Ee.contentEditable==="true")&&(po=Ee,$d=F,lu=null);break;case"focusout":lu=$d=po=null;break;case"mousedown":Zd=!0;break;case"contextmenu":case"mouseup":case"dragend":Zd=!1,N_(ee,o,J);break;case"selectionchange":if(Bx)break;case"keydown":case"keyup":N_(ee,o,J)}var ke;if(Ze)e:{switch(n){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else go?ca(n,o)&&(ze="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ze="onCompositionStart");ze&&(Yi&&o.locale!=="ko"&&(go||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&go&&(ke=tu()):(Gi=J,eu="value"in Gi?Gi.value:Gi.textContent,go=!0)),Ee=of(F,ze),0<Ee.length&&(ze=new Ki(ze,n,null,o,J),ee.push({event:ze,listeners:Ee}),ke?ze.data=ke:(ke=mo(o),ke!==null&&(ze.data=ke)))),(ke=ni?Dx(n,o):Vx(n,o))&&(ze=of(F,"onBeforeInput"),0<ze.length&&(Ee=new Ki("onBeforeInput","beforeinput",null,o,J),ee.push({event:Ee,listeners:ze}),Ee.data=ke)),w1(ee,n,F,o,J)}tT(ee,s)})}function Ou(n,s,o){return{instance:n,listener:s,currentTarget:o}}function of(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=vi(n,o),f!=null&&u.unshift(Ou(n,f,d)),f=vi(n,s),f!=null&&u.push(Ou(n,f,d))),n.tag===3)return u;n=n.return}return[]}function R1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function iT(n,s,o,u,f){for(var d=s._reactName,_=[];o!==null&&o!==u;){var w=o,C=w.alternate,F=w.stateNode;if(w=w.tag,C!==null&&C===u)break;w!==5&&w!==26&&w!==27||F===null||(C=F,f?(F=vi(o,d),F!=null&&_.unshift(Ou(o,F,C))):f||(F=vi(o,d),F!=null&&_.push(Ou(o,F,C)))),o=o.return}_.length!==0&&n.push({event:s,listeners:_})}var I1=/\r\n?/g,N1=/\u0000|\uFFFD/g;function sT(n){return(typeof n=="string"?n:""+n).replace(I1,`
`).replace(N1,"")}function rT(n,s){return s=sT(s),sT(n)===s}function ot(n,s,o,u,f,d){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Cn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Cn(n,""+u);break;case"className":Bn(n,"class",u);break;case"tabIndex":Bn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Bn(n,o,u);break;case"style":Jl(n,u,d);break;case"data":if(s!=="object"){Bn(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=lo(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(o==="formAction"?(s!=="input"&&ot(n,s,"name",f.name,f,null),ot(n,s,"formEncType",f.formEncType,f,null),ot(n,s,"formMethod",f.formMethod,f,null),ot(n,s,"formTarget",f.formTarget,f,null)):(ot(n,s,"encType",f.encType,f,null),ot(n,s,"method",f.method,f,null),ot(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=lo(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=_i);break;case"onScroll":u!=null&&Ue("scroll",n);break;case"onScrollEnd":u!=null&&Ue("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=lo(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Ue("beforetoggle",n),Ue("toggle",n),ro(n,"popover",u);break;case"xlinkActuate":Ut(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ut(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ut(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ut(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ut(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ut(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ut(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ut(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ut(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ro(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ah.get(o)||o,ro(n,o,u))}}function Eg(n,s,o,u,f,d){switch(o){case"style":Jl(n,u,d);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Cn(n,u):(typeof u=="number"||typeof u=="bigint")&&Cn(n,""+u);break;case"onScroll":u!=null&&Ue("scroll",n);break;case"onScrollEnd":u!=null&&Ue("scrollend",n);break;case"onClick":u!=null&&(n.onclick=_i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),d=n[Yt]||null,d=d!=null?d[o]:null,typeof d=="function"&&n.removeEventListener(s,d,f),typeof u=="function")){typeof d!="function"&&d!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):ro(n,o,u)}}}function rn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",n),Ue("load",n);var u=!1,f=!1,d;for(d in o)if(o.hasOwnProperty(d)){var _=o[d];if(_!=null)switch(d){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ot(n,s,d,_,o,null)}}f&&ot(n,s,"srcSet",o.srcSet,o,null),u&&ot(n,s,"src",o.src,o,null);return;case"input":Ue("invalid",n);var w=d=_=f=null,C=null,F=null;for(u in o)if(o.hasOwnProperty(u)){var J=o[u];if(J!=null)switch(u){case"name":f=J;break;case"type":_=J;break;case"checked":C=J;break;case"defaultChecked":F=J;break;case"value":d=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:ot(n,s,u,J,o,null)}}ih(n,d,w,C,F,_,f,!1);return;case"select":Ue("invalid",n),u=_=d=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":d=w;break;case"defaultValue":_=w;break;case"multiple":u=w;default:ot(n,s,f,w,o,null)}s=d,o=_,n.multiple=!!u,s!=null?Qs(n,!!u,s,!1):o!=null&&Qs(n,!!u,o,!0);return;case"textarea":Ue("invalid",n),d=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(w=o[_],w!=null))switch(_){case"value":u=w;break;case"defaultValue":f=w;break;case"children":d=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:ot(n,s,_,w,o,null)}Ks(n,u,f,d);return;case"option":for(C in o)if(o.hasOwnProperty(C)&&(u=o[C],u!=null))switch(C){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ot(n,s,C,u,o,null)}return;case"dialog":Ue("beforetoggle",n),Ue("toggle",n),Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":Ue("load",n);break;case"video":case"audio":for(u=0;u<Vu.length;u++)Ue(Vu[u],n);break;case"image":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"embed":case"source":case"link":Ue("error",n),Ue("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ot(n,s,F,u,o,null)}return;default:if(oo(s)){for(J in o)o.hasOwnProperty(J)&&(u=o[J],u!==void 0&&Eg(n,s,J,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&ot(n,s,w,u,o,null))}function C1(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,w=null,C=null,F=null,J=null;for($ in o){var ee=o[$];if(o.hasOwnProperty($)&&ee!=null)switch($){case"checked":break;case"value":break;case"defaultValue":C=ee;default:u.hasOwnProperty($)||ot(n,s,$,null,u,ee)}}for(var H in u){var $=u[H];if(ee=o[H],u.hasOwnProperty(H)&&($!=null||ee!=null))switch(H){case"type":d=$;break;case"name":f=$;break;case"checked":F=$;break;case"defaultChecked":J=$;break;case"value":_=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:$!==ee&&ot(n,s,H,$,u,ee)}}ao(n,_,w,C,F,J,d,f);return;case"select":$=_=w=H=null;for(d in o)if(C=o[d],o.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":$=C;default:u.hasOwnProperty(d)||ot(n,s,d,null,u,C)}for(f in u)if(d=u[f],C=o[f],u.hasOwnProperty(f)&&(d!=null||C!=null))switch(f){case"value":H=d;break;case"defaultValue":w=d;break;case"multiple":_=d;default:d!==C&&ot(n,s,f,d,u,C)}s=w,o=_,u=$,H!=null?Qs(n,!!o,H,!1):!!u!=!!o&&(s!=null?Qs(n,!!o,s,!0):Qs(n,!!o,o?[]:"",!1));return;case"textarea":$=H=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ot(n,s,w,null,u,f)}for(_ in u)if(f=u[_],d=o[_],u.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":H=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==d&&ot(n,s,_,f,u,d)}sh(n,H,$);return;case"option":for(var ve in o)if(H=o[ve],o.hasOwnProperty(ve)&&H!=null&&!u.hasOwnProperty(ve))switch(ve){case"selected":n.selected=!1;break;default:ot(n,s,ve,null,u,H)}for(C in u)if(H=u[C],$=o[C],u.hasOwnProperty(C)&&H!==$&&(H!=null||$!=null))switch(C){case"selected":n.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ot(n,s,C,H,u,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in o)H=o[Re],o.hasOwnProperty(Re)&&H!=null&&!u.hasOwnProperty(Re)&&ot(n,s,Re,null,u,H);for(F in u)if(H=u[F],$=o[F],u.hasOwnProperty(F)&&H!==$&&(H!=null||$!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:ot(n,s,F,H,u,$)}return;default:if(oo(s)){for(var lt in o)H=o[lt],o.hasOwnProperty(lt)&&H!==void 0&&!u.hasOwnProperty(lt)&&Eg(n,s,lt,void 0,u,H);for(J in u)H=u[J],$=o[J],!u.hasOwnProperty(J)||H===$||H===void 0&&$===void 0||Eg(n,s,J,H,u,$);return}}for(var j in o)H=o[j],o.hasOwnProperty(j)&&H!=null&&!u.hasOwnProperty(j)&&ot(n,s,j,null,u,H);for(ee in u)H=u[ee],$=o[ee],!u.hasOwnProperty(ee)||H===$||H==null&&$==null||ot(n,s,ee,H,u,$)}function aT(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function D1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],d=f.transferSize,_=f.initiatorType,w=f.duration;if(d&&w&&aT(_)){for(_=0,w=f.responseEnd,u+=1;u<o.length;u++){var C=o[u],F=C.startTime;if(F>w)break;var J=C.transferSize,ee=C.initiatorType;J&&aT(ee)&&(C=C.responseEnd,_+=J*(C<w?1:(w-F)/(C-F)))}if(--u,s+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var wg=null,Sg=null;function lf(n){return n.nodeType===9?n:n.ownerDocument}function oT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Ag(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var xg=null;function V1(){var n=window.event;return n&&n.type==="popstate"?n===xg?!1:(xg=n,!0):(xg=null,!1)}var uT=typeof setTimeout=="function"?setTimeout:void 0,O1=typeof clearTimeout=="function"?clearTimeout:void 0,cT=typeof Promise=="function"?Promise:void 0,M1=typeof queueMicrotask=="function"?queueMicrotask:typeof cT<"u"?function(n){return cT.resolve(null).then(n).catch(P1)}:uT;function P1(n){setTimeout(function(){throw n})}function pr(n){return n==="head"}function hT(n,s){var o=s,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),Fo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Mu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Mu(o);for(var d=o.firstChild;d;){var _=d.nextSibling,w=d.nodeName;d[ji]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&d.rel.toLowerCase()==="stylesheet"||o.removeChild(d),d=_}}else o==="body"&&Mu(n.ownerDocument.body);o=f}while(o);Fo(s)}function fT(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Rg(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Rg(o),so(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function k1(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[ji])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=ui(n.nextSibling),n===null)break}return null}function j1(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ui(n.nextSibling),n===null))return null;return n}function dT(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=ui(n.nextSibling),n===null))return null;return n}function Ig(n){return n.data==="$?"||n.data==="$~"}function Ng(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function U1(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ui(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Cg=null;function mT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return ui(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function gT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function pT(n,s,o){switch(s=lf(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Mu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);so(n)}var ci=new Map,yT=new Set;function uf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Cs=le.d;le.d={f:L1,r:B1,D:z1,C:q1,L:F1,m:G1,X:Q1,S:H1,M:K1};function L1(){var n=Cs.f(),s=Wh();return n||s}function B1(n){var s=Wn(n);s!==null&&s.tag===5&&s.type==="form"?M0(s):Cs.r(n)}var Bo=typeof document>"u"?null:document;function _T(n,s,o){var u=Bo;if(u&&typeof s=="string"&&s){var f=Nn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),yT.has(f)||(yT.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),rn(s,"link",n),jt(s),u.head.appendChild(s)))}}function z1(n){Cs.D(n),_T("dns-prefetch",n,null)}function q1(n,s){Cs.C(n,s),_T("preconnect",n,s)}function F1(n,s,o){Cs.L(n,s,o);var u=Bo;if(u&&n&&s){var f='link[rel="preload"][as="'+Nn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Nn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Nn(o.imageSizes)+'"]')):f+='[href="'+Nn(n)+'"]';var d=f;switch(s){case"style":d=zo(n);break;case"script":d=qo(n)}ci.has(d)||(n=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),ci.set(d,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Pu(d))||s==="script"&&u.querySelector(ku(d))||(s=u.createElement("link"),rn(s,"link",n),jt(s),u.head.appendChild(s)))}}function G1(n,s){Cs.m(n,s);var o=Bo;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Nn(u)+'"][href="'+Nn(n)+'"]',d=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=qo(n)}if(!ci.has(d)&&(n=E({rel:"modulepreload",href:n},s),ci.set(d,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ku(d)))return}u=o.createElement("link"),rn(u,"link",n),jt(u),o.head.appendChild(u)}}}function H1(n,s,o){Cs.S(n,s,o);var u=Bo;if(u&&n){var f=Li(u).hoistableStyles,d=zo(n);s=s||"default";var _=f.get(d);if(!_){var w={loading:0,preload:null};if(_=u.querySelector(Pu(d)))w.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},o),(o=ci.get(d))&&Dg(n,o);var C=_=u.createElement("link");jt(C),rn(C,"link",n),C._p=new Promise(function(F,J){C.onload=F,C.onerror=J}),C.addEventListener("load",function(){w.loading|=1}),C.addEventListener("error",function(){w.loading|=2}),w.loading|=4,cf(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:w},f.set(d,_)}}}function Q1(n,s){Cs.X(n,s);var o=Bo;if(o&&n){var u=Li(o).hoistableScripts,f=qo(n),d=u.get(f);d||(d=o.querySelector(ku(f)),d||(n=E({src:n,async:!0},s),(s=ci.get(f))&&Vg(n,s),d=o.createElement("script"),jt(d),rn(d,"link",n),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},u.set(f,d))}}function K1(n,s){Cs.M(n,s);var o=Bo;if(o&&n){var u=Li(o).hoistableScripts,f=qo(n),d=u.get(f);d||(d=o.querySelector(ku(f)),d||(n=E({src:n,async:!0,type:"module"},s),(s=ci.get(f))&&Vg(n,s),d=o.createElement("script"),jt(d),rn(d,"link",n),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},u.set(f,d))}}function vT(n,s,o,u){var f=(f=fe.current)?uf(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=zo(o.href),o=Li(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=zo(o.href);var d=Li(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(Pu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),ci.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ci.set(n,o),d||Y1(f,n,o,_.state))),s&&u===null)throw Error(i(528,""));return _}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=qo(o),o=Li(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function zo(n){return'href="'+Nn(n)+'"'}function Pu(n){return'link[rel="stylesheet"]['+n+"]"}function TT(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function Y1(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),rn(s,"link",o),jt(s),n.head.appendChild(s))}function qo(n){return'[src="'+Nn(n)+'"]'}function ku(n){return"script[async]"+n}function bT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Nn(o.href)+'"]');if(u)return s.instance=u,jt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),jt(u),rn(u,"style",f),cf(u,o.precedence,n),s.instance=u;case"stylesheet":f=zo(o.href);var d=n.querySelector(Pu(f));if(d)return s.state.loading|=4,s.instance=d,jt(d),d;u=TT(o),(f=ci.get(f))&&Dg(u,f),d=(n.ownerDocument||n).createElement("link"),jt(d);var _=d;return _._p=new Promise(function(w,C){_.onload=w,_.onerror=C}),rn(d,"link",u),s.state.loading|=4,cf(d,o.precedence,n),s.instance=d;case"script":return d=qo(o.src),(f=n.querySelector(ku(d)))?(s.instance=f,jt(f),f):(u=o,(f=ci.get(d))&&(u=E({},o),Vg(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),jt(f),rn(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,cf(u,o.precedence,n));return s.instance}function cf(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,d=f,_=0;_<u.length;_++){var w=u[_];if(w.dataset.precedence===s)d=w;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Dg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Vg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var hf=null;function ET(n,s,o){if(hf===null){var u=new Map,f=hf=new Map;f.set(o,u)}else f=hf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var d=o[f];if(!(d[ji]||d[kt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(s)||"";_=n+_;var w=u.get(_);w?w.push(d):u.set(_,[d])}}return u}function wT(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function X1(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ST(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function $1(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=zo(u.href),d=s.querySelector(Pu(f));if(d){s=d._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=ff.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=d,jt(d);return}d=s.ownerDocument||s,u=TT(u),(f=ci.get(f))&&Dg(u,f),d=d.createElement("link"),jt(d);var _=d;_._p=new Promise(function(w,C){_.onload=w,_.onerror=C}),rn(d,"link",u),o.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=ff.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Og=0;function Z1(n,s){return n.stylesheets&&n.count===0&&mf(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&mf(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+s);0<n.imgBytes&&Og===0&&(Og=62500*D1());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&mf(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>Og?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function ff(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var df=null;function mf(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,df=new Map,s.forEach(J1,n),df=null,ff.call(n))}function J1(n,s){if(!(s.state.loading&4)){var o=df.get(n);if(o)var u=o.get(null);else{o=new Map,df.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=s.instance,_=f.getAttribute("data-precedence"),d=o.get(_)||u,d===u&&o.set(null,f),o.set(_,f),this.count++,u=ff.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var ju={$$typeof:se,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function W1(n,s,o,u,f,d,_,w,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.hiddenUpdates=Pi(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function AT(n,s,o,u,f,d,_,w,C,F,J,ee){return n=new W1(n,s,o,_,C,F,J,ee,w),s=1,d===!0&&(s|=24),d=qn(3,null,null,s),n.current=d,d.stateNode=n,s=fm(),s.refCount++,n.pooledCache=s,s.refCount++,d.memoizedState={element:u,isDehydrated:o,cache:s},pm(d),n}function xT(n){return n?(n=vo,n):vo}function RT(n,s,o,u,f,d){f=xT(f),u.context===null?u.context=f:u.pendingContext=f,u=rr(s),u.payload={element:o},d=d===void 0?null:d,d!==null&&(u.callback=d),o=ar(n,u,s),o!==null&&(Pn(o,n,s),gu(o,n,s))}function IT(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Mg(n,s){IT(n,s),(n=n.alternate)&&IT(n,s)}function NT(n){if(n.tag===13||n.tag===31){var s=da(n,67108864);s!==null&&Pn(s,n,67108864),Mg(n,67108864)}}function CT(n){if(n.tag===13||n.tag===31){var s=Kn();s=ta(s);var o=da(n,s);o!==null&&Pn(o,n,s),Mg(n,s)}}var gf=!0;function eR(n,s,o,u){var f=Y.T;Y.T=null;var d=le.p;try{le.p=2,Pg(n,s,o,u)}finally{le.p=d,Y.T=f}}function tR(n,s,o,u){var f=Y.T;Y.T=null;var d=le.p;try{le.p=8,Pg(n,s,o,u)}finally{le.p=d,Y.T=f}}function Pg(n,s,o,u){if(gf){var f=kg(u);if(f===null)bg(n,s,u,pf,o),VT(n,u);else if(iR(f,n,s,o,u))u.stopPropagation();else if(VT(n,u),s&4&&-1<nR.indexOf(n)){for(;f!==null;){var d=Wn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Oi(d.pendingLanes);if(_!==0){var w=d;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var C=1<<31-It(_);w.entanglements[1]|=C,_&=~C}Ji(d),(Je&6)===0&&(Zh=vn()+500,Du(0))}}break;case 31:case 13:w=da(d,2),w!==null&&Pn(w,d,2),Wh(),Mg(d,2)}if(d=kg(u),d===null&&bg(n,s,u,pf,o),d===f)break;f=d}f!==null&&u.stopPropagation()}else bg(n,s,u,null,o)}}function kg(n){return n=ei(n),jg(n)}var pf=null;function jg(n){if(pf=null,n=Ui(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=m(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return pf=n,null}function DT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zr()){case Bl:return 2;case zl:return 8;case Gs:case Fd:return 32;case Kc:return 268435456;default:return 32}default:return 32}}var Ug=!1,yr=null,_r=null,vr=null,Uu=new Map,Lu=new Map,Tr=[],nR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VT(n,s){switch(n){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":Uu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lu.delete(s.pointerId)}}function Bu(n,s,o,u,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:d,targetContainers:[f]},s!==null&&(s=Wn(s),s!==null&&NT(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function iR(n,s,o,u,f){switch(s){case"focusin":return yr=Bu(yr,n,s,o,u,f),!0;case"dragenter":return _r=Bu(_r,n,s,o,u,f),!0;case"mouseover":return vr=Bu(vr,n,s,o,u,f),!0;case"pointerover":var d=f.pointerId;return Uu.set(d,Bu(Uu.get(d)||null,n,s,o,u,f)),!0;case"gotpointercapture":return d=f.pointerId,Lu.set(d,Bu(Lu.get(d)||null,n,s,o,u,f)),!0}return!1}function OT(n){var s=Ui(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,pi(n.priority,function(){CT(o)});return}}else if(s===31){if(s=m(o),s!==null){n.blockedOn=s,pi(n.priority,function(){CT(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yf(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=kg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Wl=u,o.target.dispatchEvent(u),Wl=null}else return s=Wn(o),s!==null&&NT(s),n.blockedOn=o,!1;s.shift()}return!0}function MT(n,s,o){yf(n)&&o.delete(s)}function sR(){Ug=!1,yr!==null&&yf(yr)&&(yr=null),_r!==null&&yf(_r)&&(_r=null),vr!==null&&yf(vr)&&(vr=null),Uu.forEach(MT),Lu.forEach(MT)}function _f(n,s){n.blockedOn===s&&(n.blockedOn=null,Ug||(Ug=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,sR)))}var vf=null;function PT(n){vf!==n&&(vf=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){vf===n&&(vf=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(jg(u||o)===null)continue;break}var d=Wn(o);d!==null&&(n.splice(s,3),s-=3,km(d,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Fo(n){function s(C){return _f(C,n)}yr!==null&&_f(yr,n),_r!==null&&_f(_r,n),vr!==null&&_f(vr,n),Uu.forEach(s),Lu.forEach(s);for(var o=0;o<Tr.length;o++){var u=Tr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Tr.length&&(o=Tr[0],o.blockedOn===null);)OT(o),o.blockedOn===null&&Tr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],d=o[u+1],_=f[Yt]||null;if(typeof d=="function")_||PT(o);else if(_){var w=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Yt]||null)w=_.formAction;else if(jg(f)!==null)continue}else w=_.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),PT(o)}}}function kT(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Lg(n){this._internalRoot=n}Tf.prototype.render=Lg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Kn();RT(o,u,n,s,null,null)},Tf.prototype.unmount=Lg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;RT(n.current,2,null,n,null,null),Wh(),s[ki]=null}};function Tf(n){this._internalRoot=n}Tf.prototype.unstable_scheduleHydration=function(n){if(n){var s=Wc();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Tr.length&&s!==0&&s<Tr[o].priority;o++);Tr.splice(o,0,n),o===0&&OT(n)}};var jT=e.version;if(jT!=="19.2.0")throw Error(i(527,jT,"19.2.0"));le.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=p(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var rR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{mi=bf.inject(rR),Wt=bf}catch{}}return qu.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",f=G0,d=H0,_=Q0;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=AT(n,1,!1,null,null,o,u,null,f,d,_,kT),n[ki]=s.current,Tg(n),new Lg(s)},qu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,f="",d=G0,_=H0,w=Q0,C=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(d=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(C=o.formState)),s=AT(n,1,!0,s,o??null,u,f,C,d,_,w,kT),s.context=xT(null),o=s.current,u=Kn(),u=ta(u),f=rr(u),f.callback=null,ar(o,f,u),o=u,s.current.lanes=o,Wr(s,o),Ji(s),n[ki]=s.current,Tg(n),new Tf(s)},qu.version="19.2.0",qu}var KT;function gR(){if(KT)return qg.exports;KT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),qg.exports=mR(),qg.exports}var pR=gR();const yR=HE(pR),_R=({onLoginSuccess:r})=>{const[e,t]=ye.useState(""),[i,a]=ye.useState(""),[l,c]=ye.useState(""),m=g=>{g.preventDefault(),e==="admin"&&i==="password"?(c(""),r()):c("Invalid username or password")};return b.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:b.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-white rounded-xl shadow-lg",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-indigo-600",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L9 9.61v5.07a1 1 0 001.527.854l4-2.222a1 1 0 00.473-.854V9.61l3.71-2.06a1 1 0 000-1.84l-7-3zM10 8.39L3.71 5.33l6.29-2.94 6.29 2.94L10 8.39zM11 11.07v2.88l2 1.11v-2.88l-2-1.11z"})}),b.jsx("h1",{className:"mt-4 text-3xl font-bold text-gray-900",children:"Vidya Gram"}),b.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Admin Portal"})]}),b.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),b.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Username (admin)",value:e,onChange:g=>t(g.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password-input",className:"sr-only",children:"Password"}),b.jsx("input",{id:"password-input",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password (password)",value:i,onChange:g=>a(g.target.value)})]})]}),l&&b.jsx("p",{className:"text-sm text-center text-red-500",children:l}),b.jsx("div",{children:b.jsx("button",{type:"submit",className:"relative flex justify-center w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md group hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})})]})]})})};var xi=(r=>(r.Dashboard="DASHBOARD",r.Students="STUDENTS",r.Batches="BATCHES",r.Payments="PAYMENTS",r))(xi||{});const vR=({onDataLoaded:r})=>{const[e,t]=ye.useState(null),[i,a]=ye.useState(!1),[l,c]=ye.useState(null),m=ye.useCallback(p=>{var S;const v=(S=p.target.files)==null?void 0:S[0];if(!v)return;t(v.name),a(!0),c(null);const E=new FileReader;E.onload=D=>{var G;try{const z=(G=D.target)==null?void 0:G.result,U=XLSX.read(z,{type:"binary"}),ie=U.SheetNames[0],re=U.Sheets[ie],se=XLSX.utils.sheet_to_json(re);r(se)}catch(z){console.error("Error parsing Excel file:",z),c("Failed to parse the Excel file. Please check the format.")}finally{a(!1)}},E.onerror=()=>{c("Failed to read the file."),a(!1)},E.readAsBinaryString(v)},[r]),g=()=>{const p=[{"Roll No":101,Name:"Aarav Sharma",Father:"Rajesh Sharma",Mother:"Priya Sharma",Phone:"9876543210","Emergency Number":"9876543211",Gender:"Male",Batch:"A1",Address:"123, Main Street, Delhi","Total Fees":5e4,"Amount Paid":1e4,"Full Paid":"No","Payment Method":"UPI","Payment Date":"2023-08-01",Mode:"Monthly",Remarks:"First installment"}],v=XLSX.utils.json_to_sheet(p),E=XLSX.utils.book_new();XLSX.utils.book_append_sheet(E,v,"Students"),XLSX.writeFile(E,"VidyaGram_Demo_Sheet.xlsx")};return b.jsxs("div",{children:[b.jsx("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:b.jsx("div",{className:"flex items-center justify-center w-full px-6 py-10 border-2 border-gray-300 border-dashed rounded-md",children:b.jsxs("div",{className:"space-y-1 text-center",children:[b.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:b.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),b.jsxs("div",{className:"flex text-sm text-gray-600",children:[b.jsx("span",{className:"text-indigo-600",children:"Upload a file"}),b.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:".xlsx, .xls",onChange:m}),b.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),b.jsx("p",{className:"text-xs text-gray-500",children:"XLSX, XLS up to 10MB"})]})})}),b.jsx("div",{className:"text-center mt-4",children:b.jsx("button",{type:"button",onClick:g,className:"text-sm font-medium text-indigo-600 hover:text-indigo-500 hover:underline",children:"Download Demo Excel Format"})}),i&&b.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Processing file..."}),e&&!i&&b.jsxs("p",{className:"mt-2 text-sm text-green-600",children:["File loaded: ",e]}),l&&b.jsx("p",{className:"mt-2 text-sm text-red-600",children:l})]})},TR=({students:r,onClose:e})=>{const t=["Roll No","Name","Father","Mother","Phone","Emergency Number","Gender","Batch","Address","Total Fees","Total Paid","Fees Remaining","Full Paid","Mode","Remarks","imageUrl"],[i,a]=ye.useState(new Set(t)),l=g=>{a(p=>{const v=new Set(p);return v.has(g)?v.delete(g):v.add(g),v})},c=g=>{a(g?new Set(t):new Set)},m=()=>{if(i.size===0){alert("Please select at least one column to export.");return}const g=S=>(S.payments||[]).reduce((D,G)=>D+G.amount,0),p=r.map(S=>{const D=g(S),G=S["Total Fees"]-D,z={...S,"Total Paid":D,"Fees Remaining":G>0&&!S["Full Paid"]?G:0},U={};return i.forEach(ie=>{U[ie]=z[ie]}),U}),v=XLSX.utils.json_to_sheet(p),E=XLSX.utils.book_new();XLSX.utils.book_append_sheet(E,v,"Students"),XLSX.writeFile(E,`student_data_${new Date().toISOString().slice(0,10)}.xlsx`),e()};return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:b.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[b.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Export Student Data"}),b.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select columns for export."}),b.jsxs("div",{className:"mb-4 flex gap-4",children:[b.jsx("button",{onClick:()=>c(!0),className:"text-sm text-indigo-600 hover:underline",children:"Select All"}),b.jsx("button",{onClick:()=>c(!1),className:"text-sm text-indigo-600 hover:underline",children:"Deselect All"})]}),b.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-60 overflow-y-auto border p-2 rounded-md",children:t.map(g=>b.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[b.jsx("input",{type:"checkbox",checked:i.has(g),onChange:()=>l(g),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),b.jsx("span",{children:g})]},g))}),b.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[b.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),b.jsx("button",{onClick:m,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Export"})]})]})})},bR=({students:r,onEditStudent:e,onCreateBatch:t,onDeleteStudent:i,onRecordPayment:a})=>{const[l,c]=ye.useState(""),[m,g]=ye.useState(new Set),[p,v]=ye.useState(!1),[E,S]=ye.useState(!1),[D,G]=ye.useState(""),[z,U]=ye.useState(null),[ie,re]=ye.useState("desc"),se=ye.useMemo(()=>{if(!l.trim())return r;const x=l.toLowerCase().trim();return r.filter(Ne=>String(Ne.Name??"").toLowerCase().includes(x)||String(Ne["Roll No"]??"").toLowerCase().includes(x)||String(Ne.Phone??"").toLowerCase().includes(x))},[r,l]),ge=x=>{g(Ne=>{const He=new Set(Ne);return He.has(x)?He.delete(x):He.add(x),He})},Se=x=>{x.target.checked?g(new Set(se.map(Ne=>Ne.id))):g(new Set)},Te=()=>{m.size>0?v(!0):alert("Please select students to form a batch.")},I=()=>{D.trim()&&m.size>0&&(t(D,Array.from(m)),G(""),g(new Set),v(!1))},R=x=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(x),N=()=>{re(x=>x==="desc"?"asc":"desc")},P=({label:x,value:Ne})=>b.jsxs("div",{children:[b.jsx("p",{className:"text-xs text-gray-500",children:x}),b.jsx("p",{className:"text-sm font-medium text-gray-800",children:Ne||"N/A"})]}),O=({student:x})=>{const Ne=(x.payments||[]).reduce((le,ae)=>le+ae.amount,0);if(x["Full Paid"]||Ne>=x["Total Fees"])return b.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"PAID"});const Y=x["Total Fees"]-Ne;return b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"font-semibold text-red-600",children:R(Y)}),b.jsx("button",{onClick:le=>{le.stopPropagation(),a(x)},title:"Record Payment",className:"text-blue-500 hover:text-blue-700",children:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[b.jsx("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"}),b.jsx("path",{fillRule:"evenodd",d:"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z",clipRule:"evenodd"})]})})]})},k=x=>(x.payments||[]).reduce((Ne,He)=>Ne+He.amount,0);return b.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Student List"}),b.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",se.length," of ",r.length," students"]})]}),b.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto",children:[b.jsxs("div",{className:"relative w-full sm:w-64",children:[b.jsx("input",{type:"text",placeholder:"Search by name, roll, or phone...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",value:l,onChange:x=>c(x.target.value)}),l&&b.jsx("button",{onClick:()=>c(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]}),b.jsx("button",{onClick:Te,disabled:m.size===0,className:"w-full sm:w-auto px-4 py-2 bg-indigo-600 text-white rounded-md disabled:bg-indigo-300 hover:bg-indigo-700 transition-colors",children:"Create Batch"}),b.jsx("button",{onClick:()=>S(!0),className:"w-full sm:w-auto px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Export Data"})]})]}),b.jsxs("div",{className:"overflow-x-auto",children:[b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{scope:"col",className:"p-4",children:b.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500",onChange:Se,checked:m.size>0&&m.size===se.length})}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roll No"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount Paid"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dues"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:se.map(x=>{const Ne=z===x.id,He=ye.useMemo(()=>[...x.payments||[]].sort((Y,le)=>{const ae=new Date(Y.date).getTime(),_e=new Date(le.date).getTime();return ie==="desc"?_e-ae:ae-_e}),[x.payments,ie]);return b.jsxs(QE.Fragment,{children:[b.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>U(Ne?null:x.id),children:[b.jsx("td",{className:"p-4",onClick:Y=>Y.stopPropagation(),children:b.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500",checked:m.has(x.id),onChange:()=>ge(x.id)})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x["Roll No"]}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x.Name}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.Phone}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:R(k(x))}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:b.jsx(O,{student:x})}),b.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",onClick:Y=>Y.stopPropagation(),children:[b.jsx("button",{onClick:()=>e(x),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),b.jsx("button",{onClick:()=>i(x),className:"ml-4 text-red-600 hover:text-red-900",children:"Delete"})]})]}),Ne&&b.jsx("tr",{className:"bg-gray-50",children:b.jsx("td",{colSpan:7,className:"p-4",children:b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"flex gap-6",children:[b.jsx("div",{className:"flex-shrink-0",children:x.imageUrl?b.jsx("img",{src:x.imageUrl,alt:x.Name,className:"h-24 w-24 rounded-full object-cover shadow-md"}):b.jsx("div",{className:"h-24 w-24 rounded-full bg-gray-200 flex items-center justify-center shadow-md",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})}),b.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 flex-1",children:[b.jsx(P,{label:"Roll No",value:x["Roll No"]}),b.jsx(P,{label:"Gender",value:x.Gender}),b.jsx(P,{label:"Batch",value:x.Batch}),b.jsx(P,{label:"Payment Mode",value:x.Mode}),b.jsx(P,{label:"Address",value:x.Address}),b.jsx(P,{label:"Father's Name",value:x.Father}),b.jsx(P,{label:"Mother's Name",value:x.Mother}),b.jsx(P,{label:"Emergency Number",value:x["Emergency Number"]}),b.jsx(P,{label:"Total Fees",value:R(x["Total Fees"])}),b.jsx("div",{className:"col-span-full",children:b.jsx(P,{label:"Remarks",value:x.Remarks})})]})]}),b.jsx("div",{className:"pt-4 mt-4 border-t border-gray-200",children:b.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-inner",children:[b.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-3 gap-2",children:[b.jsx("h4",{className:"text-md font-semibold text-gray-700",children:"Payment History"}),b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs("p",{className:"text-xs font-medium text-gray-600",children:["Total Paid: ",b.jsx("span",{className:"font-bold text-green-700",children:R(k(x))})]}),b.jsxs("p",{className:"text-xs font-medium text-gray-600",children:["Fees Remaining: ",b.jsx("span",{className:"font-bold text-red-700",children:R(Math.max(0,x["Total Fees"]-k(x)))})]}),b.jsx("button",{onClick:()=>a(x),className:"px-3 py-1 text-xs font-medium text-white bg-indigo-600 rounded-full hover:bg-indigo-700",children:"Add Payment"})]})]}),He.length>0?b.jsxs("table",{className:"min-w-full text-sm",children:[b.jsx("thead",{className:"bg-gray-100",children:b.jsxs("tr",{children:[b.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:b.jsxs("button",{onClick:N,className:"flex items-center gap-1 hover:text-gray-700",children:["Date",b.jsx("span",{className:"text-indigo-600",children:ie==="desc"?"":""})]})}),b.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Amount"}),b.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Method"}),b.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Remarks"})]})}),b.jsx("tbody",{className:"divide-y divide-gray-100",children:He.map(Y=>b.jsxs("tr",{children:[b.jsx("td",{className:"px-4 py-2",children:Y.date}),b.jsx("td",{className:"px-4 py-2",children:R(Y.amount)}),b.jsx("td",{className:"px-4 py-2",children:Y.method}),b.jsx("td",{className:"px-4 py-2",children:Y.remarks})]},Y.id))})]}):b.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:"No payments recorded for this student."})]})})]})})})]},`${x.id}-${(x.payments||[]).length}`)})})]}),se.length===0&&b.jsx("p",{className:"text-center py-4 text-gray-500",children:"No students found."})]}),p&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-center",children:b.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[b.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Create New Batch"}),b.jsx("input",{type:"text",placeholder:"Enter batch name",value:D,onChange:x=>G(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),b.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[m.size," student(s) selected."]}),b.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[b.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),b.jsx("button",{onClick:I,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Create"})]})]})}),E&&b.jsx(TR,{students:se,onClose:()=>S(!1)})]})},ER=({student:r,onClose:e,onSave:t})=>{const[i,a]=ye.useState(r),[l,c]=ye.useState(null),[m,g]=ye.useState(r.imageUrl||null);ye.useEffect(()=>{a(r),g(r.imageUrl||null),c(null)},[r]);const p=z=>{const{name:U,value:ie,type:re}=z.target;if(re==="checkbox"){const{checked:ge}=z.target;a(Se=>({...Se,[U]:ge}));return}const se=U==="Total Fees";a(ge=>({...ge,[U]:re==="number"&&se?parseFloat(ie)||0:ie}))},v=z=>{var ie;const U=(ie=z.target.files)==null?void 0:ie[0];if(U){c(U);const re=new FileReader;re.onloadend=()=>{g(re.result)},re.readAsDataURL(U)}},E=z=>{z.preventDefault(),t(i,l||void 0)},S=ye.useMemo(()=>(i.payments||[]).reduce((z,U)=>z+U.amount,0),[i.payments]),D=ye.useMemo(()=>(i["Total Fees"]||0)-S,[i,S]),G=z=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(z);return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:b.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-4xl max-h-full overflow-y-auto",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Edit Student Profile"}),b.jsxs("form",{onSubmit:E,className:"space-y-6",children:[b.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[b.jsxs("div",{className:"md:w-1/3 space-y-4",children:[b.jsxs("fieldset",{children:[b.jsx("legend",{className:"text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4",children:"Profile Photo"}),b.jsxs("div",{className:"flex flex-col items-center",children:[m?b.jsx("img",{src:m,alt:"Student",className:"h-32 w-32 rounded-full object-cover shadow-lg mb-4"}):b.jsx("div",{className:"h-32 w-32 rounded-full bg-gray-200 flex items-center justify-center shadow-lg mb-4",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),b.jsxs("label",{htmlFor:"photo-upload",className:"cursor-pointer px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:[b.jsx("span",{children:"Change Photo"}),b.jsx("input",{id:"photo-upload",name:"photo-upload",type:"file",className:"sr-only",accept:"image/*",onChange:v})]})]})]}),b.jsxs("div",{className:"text-center md:text-left",children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Roll No"}),b.jsx("input",{type:"text",name:"Roll No",value:i["Roll No"],onChange:p,className:"mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm focus:outline-none sm:text-sm",readOnly:!0})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),b.jsx("input",{type:"text",name:"Name",value:i.Name,onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),b.jsx("div",{className:"md:w-2/3",children:b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),b.jsxs("select",{name:"Gender",value:i.Gender,onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[b.jsx("option",{children:"Male"}),b.jsx("option",{children:"Female"}),b.jsx("option",{children:"Other"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Batch"}),b.jsx("input",{type:"text",name:"Batch",value:i.Batch,onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Father"}),b.jsx("input",{type:"text",name:"Father",value:i.Father||"",onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mother"}),b.jsx("input",{type:"text",name:"Mother",value:i.Mother||"",onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),b.jsx("input",{type:"tel",name:"Phone",value:i.Phone,onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Emergency Number"}),b.jsx("input",{type:"tel",name:"Emergency Number",value:i["Emergency Number"]||"",onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),b.jsxs("div",{className:"md:col-span-2",children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),b.jsx("input",{type:"text",name:"Address",value:i.Address||"",onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]})})]}),b.jsxs("fieldset",{children:[b.jsx("legend",{className:"text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4",children:"Payment Details"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Fees"}),b.jsx("input",{type:"number",name:"Total Fees",value:i["Total Fees"]||"",onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 50000"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Mode"}),b.jsxs("select",{name:"Mode",value:i.Mode||"",onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[b.jsx("option",{value:"",children:"Not Specified"}),b.jsx("option",{children:"Monthly"}),b.jsx("option",{children:"One Time"})]})]}),b.jsxs("div",{className:"md:col-span-2",children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Paid"}),b.jsx("div",{className:"mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm sm:text-sm",children:G(S)})]}),b.jsx("div",{className:"md:col-span-2",children:b.jsxs("div",{className:"p-3 bg-gray-50 rounded-md text-center",children:[b.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Remaining Fees: "}),b.jsx("span",{className:`font-bold ${D>0?"text-red-600":"text-green-600"}`,children:G(D)})]})}),b.jsxs("div",{className:"flex items-center gap-2 mt-2 md:col-span-2",children:[b.jsx("input",{id:"full-paid",name:"Full Paid",type:"checkbox",checked:i["Full Paid"]??!1,onChange:p,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"full-paid",className:"text-sm font-medium text-gray-700",children:"Mark as Full Paid"}),b.jsx("p",{className:"text-xs text-gray-500",children:"Overrides calculated status. Use for discounts or scholarships."})]})]})]}),b.jsxs("div",{className:"mt-4",children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Student Remarks"}),b.jsx("textarea",{name:"Remarks",value:i.Remarks||"",onChange:p,rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Add any general remarks for the student here."})]})]}),b.jsxs("fieldset",{className:"mt-6",children:[b.jsx("legend",{className:"text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4",children:"Transaction History"}),b.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-md bg-gray-50",children:(i.payments||[]).length>0?b.jsxs("table",{className:"min-w-full text-sm",children:[b.jsx("thead",{className:"bg-gray-100 sticky top-0",children:b.jsxs("tr",{children:[b.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:"Date"}),b.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:"Amount"}),b.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:"Method"}),b.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:"Remarks"})]})}),b.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:[...i.payments].sort((z,U)=>new Date(U.date).getTime()-new Date(z.date).getTime()).map(z=>b.jsxs("tr",{children:[b.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:z.date}),b.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:G(z.amount)}),b.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:z.method}),b.jsx("td",{className:"px-4 py-2",children:z.remarks})]},z.id))})]}):b.jsx("p",{className:"text-center text-gray-500 py-6",children:"No payment history found."})})]}),b.jsxs("div",{className:"flex justify-end gap-4 pt-8 border-t mt-8",children:[b.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),b.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save Changes"})]})]})]})})},Er=({title:r,value:e})=>b.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",children:[b.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:r}),b.jsx("p",{className:"mt-2 text-3xl font-semibold text-gray-900",children:e})]}),wR=({batches:r,students:e,onDeleteBatch:t,onAddWarden:i,onRemoveWarden:a,onAssignStudents:l})=>{const[c,m]=ye.useState(null),[g,p]=ye.useState(null),[v,E]=ye.useState(!1),[S,D]=ye.useState(null),[G,z]=ye.useState(""),[U,ie]=ye.useState(!1),[re,se]=ye.useState(null),[ge,Se]=ye.useState(new Set),Te=ye.useMemo(()=>new Map(e.map(ae=>[ae.id,ae])),[e]),I=ae=>Te.get(ae),R=ae=>{m(_e=>_e===ae?null:ae)},N=ae=>p(ae),P=()=>{g&&(t(g.id),p(null))},O=(ae,_e)=>{D({batch:ae,gender:_e}),z(""),E(!0)},k=()=>{G&&S&&i(S.batch.id,G),E(!1),D(null)},x=(ae,_e)=>{se({batch:ae,warden:_e}),Se(new Set(_e.assignedStudentIds)),ie(!0)},Ne=ae=>{Se(_e=>{const Ce=new Set(_e);return Ce.has(ae)?Ce.delete(ae):Ce.add(ae),Ce})},He=()=>{re&&l(re.batch.id,re.warden.wardenStudentId,Array.from(ge)),ie(!1),se(null)},Y=()=>{if(!v||!S)return null;const{batch:ae,gender:_e}=S,Ce=new Set(ae.wardens.map(Z=>Z.wardenStudentId)),V=ae.studentIds.map(Z=>I(Z)).filter(Z=>!!(Z&&Z.Gender===_e&&!Ce.has(Z.id)));return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:b.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[b.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Select ",_e," Warden for ",ae.name]}),b.jsxs("select",{value:G,onChange:Z=>z(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500",children:[b.jsx("option",{value:"",children:"-- Select a Student --"}),V.map(Z=>b.jsxs("option",{value:Z.id,children:[Z.Name," (Roll: ",Z["Roll No"],")"]},Z.id))]}),V.length===0&&b.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["No eligible ",_e.toLowerCase()," students available in this batch."]}),b.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[b.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),b.jsx("button",{onClick:k,disabled:!G,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-300",children:"Add Warden"})]})]})})},le=()=>{if(!U||!re)return null;const{batch:ae,warden:_e}=re,Ce=I(_e.wardenStudentId),V=new Set(ae.wardens.map(X=>X.wardenStudentId)),Z=new Set(ae.wardens.flatMap(X=>X.wardenStudentId===_e.wardenStudentId?[]:X.assignedStudentIds)),ce=ae.studentIds.map(X=>I(X)).filter(X=>!!(X&&!V.has(X.id)&&!Z.has(X.id)));return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:b.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[b.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Assign Students to ",Ce==null?void 0:Ce.Name]}),b.jsxs("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-md p-2 space-y-2",children:[ce.map(X=>b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{type:"checkbox",id:`student-${X.id}`,checked:ge.has(X.id),onChange:()=>Ne(X.id),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),b.jsxs("label",{htmlFor:`student-${X.id}`,className:"ml-3 text-sm text-gray-700",children:[X.Name," (Roll: ",X["Roll No"],")"]})]},X.id)),ce.length===0&&b.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No students available for assignment."})]}),b.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[ge.size," student(s) selected."]}),b.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[b.jsx("button",{onClick:()=>ie(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),b.jsx("button",{onClick:He,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save Assignments"})]})]})})};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[b.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Batch Management"}),r.length===0?b.jsx("p",{className:"text-gray-500",children:"No batches created yet. Go to the Students tab to select students and create a batch."}):b.jsx("div",{className:"space-y-4",children:r.map(ae=>b.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[b.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer hover:bg-gray-50",onClick:()=>R(ae.id),children:[b.jsxs("div",{children:[b.jsx("h3",{className:"font-semibold text-lg text-indigo-700",children:ae.name}),b.jsxs("p",{className:"text-sm text-gray-500",children:[ae.studentIds.length," members"]})]}),b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("button",{onClick:_e=>{_e.stopPropagation(),N(ae)},className:"text-red-500 hover:text-red-700 font-medium text-sm",children:"Delete"}),b.jsx("svg",{className:`w-5 h-5 text-gray-500 transform transition-transform ${c===ae.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})]}),c===ae.id&&b.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-6",children:[b.jsxs("div",{children:[b.jsx("h4",{className:"text-md font-medium text-gray-600 mb-2",children:"Members:"}),b.jsx("ul",{className:"divide-y divide-gray-100 max-h-40 overflow-y-auto",children:ae.studentIds.map(_e=>I(_e)).filter(Boolean).map(_e=>b.jsxs("li",{className:"py-2 flex justify-between items-center",children:[b.jsx("span",{children:_e.Name}),b.jsxs("span",{className:"text-sm text-gray-500",children:["Roll: ",_e["Roll No"]]})]},_e.id))})]}),b.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[b.jsxs("div",{className:"flex justify-between items-center mb-3",children:[b.jsx("h4",{className:"text-md font-semibold text-gray-700",children:"Warden Management"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>O(ae,"Female"),className:"px-3 py-1 text-xs font-medium text-pink-700 bg-pink-100 rounded-full hover:bg-pink-200",children:"Add Girl Warden"}),b.jsx("button",{onClick:()=>O(ae,"Male"),className:"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-full hover:bg-blue-200",children:"Add Boy Warden"})]})]}),b.jsxs("div",{className:"space-y-3",children:[ae.wardens.map(_e=>{const Ce=I(_e.wardenStudentId);return Ce?b.jsxs("div",{className:"p-3 bg-gray-50 rounded-md",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsxs("p",{className:"font-semibold text-gray-800",children:[Ce.Name," ",b.jsx("span",{className:"text-xs text-gray-500",children:"(Warden)"})]}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("button",{onClick:()=>x(ae,_e),className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Assign Students"}),b.jsx("button",{onClick:()=>a(ae.id,_e.wardenStudentId),className:"text-sm text-red-500 hover:text-red-700",children:"Remove"})]})]}),b.jsxs("ul",{className:"mt-2 pl-4 text-sm text-gray-600 list-disc",children:[_e.assignedStudentIds.map(V=>I(V)).filter(Boolean).map(V=>b.jsx("li",{children:V.Name},V.id)),_e.assignedStudentIds.length===0&&b.jsx("li",{className:"list-none text-xs text-gray-400",children:"No students assigned."})]})]},_e.wardenStudentId):null}),ae.wardens.length===0&&b.jsx("p",{className:"text-sm text-gray-400",children:"No wardens assigned to this batch."})]})]})]})]},ae.id))})]}),g&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:b.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[b.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Deletion"}),b.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:['Are you sure you want to delete the batch "',g.name,'"? This will also delete all ',g.studentIds.length," students in this batch. This action cannot be undone."]}),b.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[b.jsx("button",{onClick:()=>p(null),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),b.jsx("button",{onClick:P,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})}),v&&b.jsx(Y,{}),U&&b.jsx(le,{})]})},SR=({student:r,onClose:e,onSave:t})=>{const[i,a]=ye.useState(""),[l,c]=ye.useState("Online"),[m,g]=ye.useState(new Date().toISOString().slice(0,10)),[p,v]=ye.useState(""),E=ye.useMemo(()=>(r.payments||[]).reduce((U,ie)=>U+ie.amount,0),[r.payments]),S=ye.useMemo(()=>r["Total Fees"]-E,[r,E]),D=U=>{const ie=U.target.value;/^\d*\.?\d*$/.test(ie)&&a(ie)},G=U=>{U.preventDefault();const ie=parseFloat(i);if(!ie||ie<=0){alert("Please enter a valid positive amount.");return}if(!m||new Date(m).toString()==="Invalid Date"){alert("Please select a valid date.");return}const re={id:`payment-${r.id}-${Date.now()}`,amount:ie,method:l,date:m,remarks:p};t(r,re)},z=U=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(U);return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:b.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-2xl w-full max-w-md",children:[b.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Record Payment"}),b.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["For: ",b.jsx("span",{className:"font-semibold",children:r.Name})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 bg-gray-50 p-4 rounded-md",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-xs text-gray-500",children:"Total Fees"}),b.jsx("p",{className:"font-semibold",children:z(r["Total Fees"])})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-xs text-gray-500",children:"Fees Remaining"}),b.jsx("p",{className:`font-semibold ${S>0?"text-red-600":"text-green-600"}`,children:z(S)})]})]}),b.jsxs("form",{onSubmit:G,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),b.jsx("input",{type:"text",value:i,onChange:D,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter amount being paid",required:!0,pattern:"^\\d*\\.?\\d*$"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),b.jsxs("select",{value:l,onChange:U=>c(U.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[b.jsx("option",{children:"Online"}),b.jsx("option",{children:"Cash"}),b.jsx("option",{children:"Card"}),b.jsx("option",{children:"UPI"}),b.jsx("option",{children:"Other"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Date"}),b.jsx("input",{type:"date",value:m,onChange:U=>g(U.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks (Optional)"}),b.jsx("textarea",{value:p,onChange:U=>v(U.target.value),rows:2,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Transaction ID, partial payment"})]}),b.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[b.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),b.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save Payment"})]})]})]})})},AR=({transactions:r})=>{const[e,t]=ye.useState(""),i=ye.useMemo(()=>{if(!e)return r;const l=e.toLowerCase();return r.filter(c=>c.studentName.toLowerCase().includes(l)||c.studentRollNo.toString().toLowerCase().includes(l)||c.studentId.toLowerCase().includes(l))},[r,e]),a=l=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(l);return b.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[b.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Payment History"}),b.jsx("input",{type:"text",placeholder:"Search by name, roll, or ID...",className:"w-full sm:w-64 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",value:e,onChange:l=>t(l.target.value)})]}),b.jsxs("div",{className:"overflow-x-auto",children:[b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roll No"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(l=>b.jsxs("tr",{children:[b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.date}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:l.studentName}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.studentRollNo}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.studentId}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:a(l.amount)}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.method}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.remarks})]},l.id))})]}),i.length===0&&b.jsx("p",{className:"text-center py-8 text-gray-500",children:r.length===0?"No payments have been recorded yet.":"No matching payments found."})]})]})},xR=()=>{};var YT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},RR=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],m=r[t++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},YE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,m=c?r[a+1]:0,g=a+2<r.length,p=g?r[a+2]:0,v=l>>2,E=(l&3)<<4|m>>4;let S=(m&15)<<2|p>>6,D=p&63;g||(D=64,c||(S=64)),i.push(t[v],t[E],t[S],t[D])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(KE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):RR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],m=a<r.length?t[r.charAt(a)]:0;++a;const p=a<r.length?t[r.charAt(a)]:64;++a;const E=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||m==null||p==null||E==null)throw new IR;const S=l<<2|m>>4;if(i.push(S),p!==64){const D=m<<4&240|p>>2;if(i.push(D),E!==64){const G=p<<6&192|E;i.push(G)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class IR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NR=function(r){const e=KE(r);return YE.encodeByteArray(e,!0)},Ff=function(r){return NR(r).replace(/\./g,"")},XE=function(r){try{return YE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Gf(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!CR(t)||(r[t]=Gf(r[t],e[t]));return r}function CR(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=()=>Yp().__FIREBASE_DEFAULTS__,VR=()=>{if(typeof process>"u"||typeof YT>"u")return;const r=YT.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},OR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&XE(r[1]);return e&&JSON.parse(e)},$E=()=>{try{return xR()||DR()||VR()||OR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Xp=()=>{var r;return(r=$E())==null?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ZE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Ff(JSON.stringify(t)),Ff(JSON.stringify(c)),""].join(".")}const tc={};function PR(){const r={prod:[],emulator:[]};for(const e of Object.keys(tc))tc[e]?r.emulator.push(e):r.prod.push(e);return r}function kR(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let XT=!1;function WE(r,e){if(typeof window>"u"||typeof document>"u"||!Dc(window.location.host)||tc[r]===e||tc[r]||XT)return;tc[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=PR().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,D){S.setAttribute("width","24"),S.setAttribute("id",D),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{XT=!0,c()},S}function v(S,D){S.setAttribute("id",D),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=kR(i),D=t("text"),G=document.getElementById(D)||document.createElement("span"),z=t("learnmore"),U=document.getElementById(z)||document.createElement("a"),ie=t("preprendIcon"),re=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const se=S.element;m(se),v(U,z);const ge=p();g(re,ie),se.append(re,G,U,ge),document.body.appendChild(se)}l?(G.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ew(){var e;const r=(e=$E())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jR(){return typeof window<"u"||tw()}function tw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function nw(){return!ew()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iw(){return!ew()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function sw(){try{return typeof indexedDB=="object"}catch{return!1}}function UR(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="FirebaseError";class Fr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=LR,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cd.prototype.create)}}class cd{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?BR(l,i):"Error",m=`${this.serviceName}: ${c} (${a}).`;return new Fr(a,m,i)}}function BR(r,e){return r.replace(zR,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const zR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function al(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],c=e[a];if(ZT(l)&&ZT(c)){if(!al(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function ZT(r){return r!==null&&typeof r=="object"}function qR(r,e){const t=new FR(r,e);return t.subscribe.bind(t)}class FR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");GR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Qg),a.error===void 0&&(a.error=Qg),a.complete===void 0&&(a.complete=Qg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GR(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Qg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(r){return r&&r._delegate?r._delegate:r}class Ms{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new MR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KR(e))try{this.getOrInitializeService({instanceIdentifier:Ra})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ra){return this.instances.has(e)}getOptions(e=Ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:QR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ra){return this.component?this.component.multipleInstances?e:Ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QR(r){return r===Ra?void 0:r}function KR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new HR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=[];var Ge;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ge||(Ge={}));const aw={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},YR=Ge.INFO,XR={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},$R=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=XR[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zp{constructor(e){this.name=e,this._logLevel=YR,this._logHandler=$R,this._userLogHandler=null,$p.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}function ZR(r){$p.forEach(e=>{e.setLogLevel(r)})}function JR(r,e){for(const t of $p){let i=null;e&&e.level&&(i=aw[e.level]),r===null?t.userLogHandler=null:t.userLogHandler=(a,l,...c)=>{const m=c.map(g=>{if(g==null)return null;if(typeof g=="string")return g;if(typeof g=="number"||typeof g=="boolean")return g.toString();if(g instanceof Error)return g.message;try{return JSON.stringify(g)}catch{return null}}).filter(g=>g).join(" ");l>=(i??a.logLevel)&&r({level:Ge[l].toLowerCase(),message:m,args:c,type:a.name})}}}const WR=(r,e)=>e.some(t=>r instanceof t);let JT,WT;function eI(){return JT||(JT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tI(){return WT||(WT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ow=new WeakMap,cp=new WeakMap,lw=new WeakMap,Kg=new WeakMap,Jp=new WeakMap;function nI(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(Nr(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&ow.set(t,r)}).catch(()=>{}),Jp.set(e,r),e}function iI(r){if(cp.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});cp.set(r,e)}let hp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return cp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||lw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Nr(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function sI(r){hp=r(hp)}function rI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Yg(this),e,...t);return lw.set(i,e.sort?e.sort():[e]),Nr(i)}:tI().includes(r)?function(...e){return r.apply(Yg(this),e),Nr(ow.get(this))}:function(...e){return Nr(r.apply(Yg(this),e))}}function aI(r){return typeof r=="function"?rI(r):(r instanceof IDBTransaction&&iI(r),WR(r,eI())?new Proxy(r,hp):r)}function Nr(r){if(r instanceof IDBRequest)return nI(r);if(Kg.has(r))return Kg.get(r);const e=aI(r);return e!==r&&(Kg.set(r,e),Jp.set(e,r)),e}const Yg=r=>Jp.get(r);function oI(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),m=Nr(c);return i&&c.addEventListener("upgradeneeded",g=>{i(Nr(c.result),g.oldVersion,g.newVersion,Nr(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const lI=["get","getKey","getAll","getAllKeys","count"],uI=["put","add","delete","clear"],Xg=new Map;function eb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Xg.get(e))return Xg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=uI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||lI.includes(t)))return;const l=async function(c,...m){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return i&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),a&&g.done]))[0]};return Xg.set(e,l),l}sI(r=>({...r,get:(e,t,i)=>eb(e,t)||r.get(e,t,i),has:(e,t)=>!!eb(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function hI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qf="@firebase/app",fp="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new Zp("@firebase/app"),fI="@firebase/app-compat",dI="@firebase/analytics-compat",mI="@firebase/analytics",gI="@firebase/app-check-compat",pI="@firebase/app-check",yI="@firebase/auth",_I="@firebase/auth-compat",vI="@firebase/database",TI="@firebase/data-connect",bI="@firebase/database-compat",EI="@firebase/functions",wI="@firebase/functions-compat",SI="@firebase/installations",AI="@firebase/installations-compat",xI="@firebase/messaging",RI="@firebase/messaging-compat",II="@firebase/performance",NI="@firebase/performance-compat",CI="@firebase/remote-config",DI="@firebase/remote-config-compat",VI="@firebase/storage",OI="@firebase/storage-compat",MI="@firebase/firestore",PI="@firebase/ai",kI="@firebase/firestore-compat",jI="firebase",UI="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]",LI={[Qf]:"fire-core",[fI]:"fire-core-compat",[mI]:"fire-analytics",[dI]:"fire-analytics-compat",[pI]:"fire-app-check",[gI]:"fire-app-check-compat",[yI]:"fire-auth",[_I]:"fire-auth-compat",[vI]:"fire-rtdb",[TI]:"fire-data-connect",[bI]:"fire-rtdb-compat",[EI]:"fire-fn",[wI]:"fire-fn-compat",[SI]:"fire-iid",[AI]:"fire-iid-compat",[xI]:"fire-fcm",[RI]:"fire-fcm-compat",[II]:"fire-perf",[NI]:"fire-perf-compat",[CI]:"fire-rc",[DI]:"fire-rc-compat",[VI]:"fire-gcs",[OI]:"fire-gcs-compat",[MI]:"fire-fst",[kI]:"fire-fst-compat",[PI]:"fire-vertex","fire-js":"fire-js",[jI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new Map,ol=new Map,ll=new Map;function dc(r,e){try{r.container.addComponent(e)}catch(t){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function uw(r,e){r.container.addOrOverwriteComponent(e)}function Ba(r){const e=r.name;if(ll.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;ll.set(e,r);for(const t of Mr.values())dc(t,r);for(const t of ol.values())dc(t,r);return!0}function cw(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function BI(r,e,t=Or){cw(r,e).clearInstance(t)}function Wp(r){return r.options!==void 0}function hw(r){return Wp(r)?!1:"authIdToken"in r||"appCheckToken"in r||"releaseOnDeref"in r||"automaticDataCollectionEnabled"in r}function ey(r){return r==null?!1:r.settings!==void 0}function zI(){ll.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xn=new cd("app","Firebase",qI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fw=class{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(r,e){const t=XE(r.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class FI extends fw{constructor(e,t,i,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,c={name:i,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,c,a);else{const m=e;super(m.options,c,a)}this._serverConfig={automaticDataCollectionEnabled:l,...t},this._serverConfig.authIdToken&&tb(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&tb(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Ni(Qf,fp,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ny(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Xn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=UI;function ty(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Or,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Xn.create("bad-app-name",{appName:String(a)});if(t||(t=Xp()),!t)throw Xn.create("no-options");const l=Mr.get(a);if(l){if(al(t,l.options)&&al(i,l.config))return l;throw Xn.create("duplicate-app",{appName:a})}const c=new rw(a);for(const g of ll.values())c.addComponent(g);const m=new fw(t,i,c);return Mr.set(a,m),m}function GI(r,e={}){if(jR()&&!tw())throw Xn.create("invalid-server-app-environment");let t,i=e||{};if(r&&(Wp(r)?t=r.options:hw(r)?i=r:t=r),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),t||(t=Xp()),!t)throw Xn.create("no-options");const a={...i,...t};a.releaseOnDeref!==void 0&&delete a.releaseOnDeref;const l=v=>[...v].reduce((E,S)=>Math.imul(31,E)+S.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Xn.create("finalization-registry-not-supported",{});const c=""+l(JSON.stringify(a)),m=ol.get(c);if(m)return m.incRefCount(i.releaseOnDeref),m;const g=new rw(c);for(const v of ll.values())g.addComponent(v);const p=new FI(t,i,c,g);return ol.set(c,p),p}function HI(r=Or){const e=Mr.get(r);if(!e&&r===Or&&Xp())return ty();if(!e)throw Xn.create("no-app",{appName:r});return e}function QI(){return Array.from(Mr.values())}async function ny(r){let e=!1;const t=r.name;Mr.has(t)?(e=!0,Mr.delete(t)):ol.has(t)&&r.decRefCount()<=0&&(ol.delete(t),e=!0),e&&(await Promise.all(r.container.getProviders().map(i=>i.delete())),r.isDeleted=!0)}function Ni(r,e,t){let i=LI[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(c.join(" "));return}Ba(new Ms(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function dw(r,e){if(r!==null&&typeof r!="function")throw Xn.create("invalid-log-argument");JR(r,e)}function mw(r){ZR(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="firebase-heartbeat-database",YI=1,mc="firebase-heartbeat-store";let $g=null;function gw(){return $g||($g=oI(KI,YI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(mc)}catch(t){console.warn(t)}}}}).catch(r=>{throw Xn.create("idb-open",{originalErrorMessage:r.message})})),$g}async function XI(r){try{const t=(await gw()).transaction(mc),i=await t.objectStore(mc).get(pw(r));return await t.done,i}catch(e){if(e instanceof Fr)Ps.warn(e.message);else{const t=Xn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(t.message)}}}async function nb(r,e){try{const i=(await gw()).transaction(mc,"readwrite");await i.objectStore(mc).put(e,pw(r)),await i.done}catch(t){if(t instanceof Fr)Ps.warn(t.message);else{const i=Xn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ps.warn(i.message)}}}function pw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=1024,ZI=30;class JI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new e2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ib();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>ZI){const c=t2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ps.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ib(),{heartbeatsToSend:i,unsentEntries:a}=WI(this._heartbeatsCache.heartbeats),l=Ff(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ps.warn(t),""}}}function ib(){return new Date().toISOString().substring(0,10)}function WI(r,e=$I){const t=[];let i=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),sb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),sb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class e2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sw()?UR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await XI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return nb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return nb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sb(r){return Ff(JSON.stringify({version:2,heartbeats:r})).length}function t2(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(r){Ba(new Ms("platform-logger",e=>new cI(e),"PRIVATE")),Ba(new Ms("heartbeat",e=>new JI(e),"PRIVATE")),Ni(Qf,fp,r),Ni(Qf,fp,"esm2020"),Ni("fire-js","")}n2("");const i2=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Fr,SDK_VERSION:hd,_DEFAULT_ENTRY_NAME:Or,_addComponent:dc,_addOrOverwriteComponent:uw,_apps:Mr,_clearComponents:zI,_components:ll,_getProvider:cw,_isFirebaseApp:Wp,_isFirebaseServerApp:ey,_isFirebaseServerAppSettings:hw,_registerComponent:Ba,_removeServiceInstance:BI,_serverApps:ol,deleteApp:ny,getApp:HI,getApps:QI,initializeApp:ty,initializeServerApp:GI,onLog:dw,registerVersion:Ni,setLogLevel:mw},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,t){this._delegate=e,this.firebase=t,dc(e,new Ms("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),ny(this._delegate)))}_getService(e,t=Or){var a;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((a=i.getComponent())==null?void 0:a.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=Or){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){dc(this._delegate,e)}_addOrOverwriteComponent(e){uw(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},rb=new cd("app-compat","Firebase",r2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(r){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:Ni,setLogLevel:mw,onLog:dw,apps:null,SDK_VERSION:hd,INTERNAL:{registerComponent:m,removeApp:i,useAsService:g,modularAPIs:i2}};t.default=t,Object.defineProperty(t,"apps",{get:c});function i(p){delete e[p]}function a(p){if(p=p||Or,!$T(e,p))throw rb.create("no-app",{appName:p});return e[p]}a.App=r;function l(p,v={}){const E=ty(p,v);if($T(e,E.name))return e[E.name];const S=new r(E,t);return e[E.name]=S,S}function c(){return Object.keys(e).map(p=>e[p])}function m(p){const v=p.name,E=v.replace("-compat","");if(Ba(p)&&p.type==="PUBLIC"){const S=(D=a())=>{if(typeof D[E]!="function")throw rb.create("invalid-app-argument",{appName:v});return D[E]()};p.serviceProps!==void 0&&Gf(S,p.serviceProps),t[E]=S,r.prototype[E]=function(...D){return this._getService.bind(this,v).apply(this,p.multipleInstances?D:[])}}return p.type==="PUBLIC"?t[E]:null}function g(p,v){return v==="serverAuth"?null:v}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(){const r=a2(s2);r.INTERNAL={...r.INTERNAL,createFirebaseNamespace:yw,extendNamespace:e,createSubscribe:qR,ErrorFactory:cd,deepExtend:Gf};function e(t){Gf(r,t)}return r}const o2=yw();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Zp("@firebase/app-compat"),l2="@firebase/app-compat",u2="0.5.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(r){Ni(l2,u2,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const r=Yp();if(r.firebase!==void 0){ab.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=r.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ab.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const za=o2;c2();var h2="firebase",f2="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */za.registerVersion(h2,f2,"app-compat");var ob=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cr,_w;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function N(){}N.prototype=R.prototype,I.F=R.prototype,I.prototype=new N,I.prototype.constructor=I,I.D=function(P,O,k){for(var x=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)x[Ne-2]=arguments[Ne];return R.prototype[O].apply(P,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(I,R,N){N||(N=0);const P=Array(16);if(typeof R=="string")for(var O=0;O<16;++O)P[O]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(O=0;O<16;++O)P[O]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=I.g[0],N=I.g[1],O=I.g[2];let k=I.g[3],x;x=R+(k^N&(O^k))+P[0]+3614090360&4294967295,R=N+(x<<7&4294967295|x>>>25),x=k+(O^R&(N^O))+P[1]+3905402710&4294967295,k=R+(x<<12&4294967295|x>>>20),x=O+(N^k&(R^N))+P[2]+606105819&4294967295,O=k+(x<<17&4294967295|x>>>15),x=N+(R^O&(k^R))+P[3]+3250441966&4294967295,N=O+(x<<22&4294967295|x>>>10),x=R+(k^N&(O^k))+P[4]+4118548399&4294967295,R=N+(x<<7&4294967295|x>>>25),x=k+(O^R&(N^O))+P[5]+1200080426&4294967295,k=R+(x<<12&4294967295|x>>>20),x=O+(N^k&(R^N))+P[6]+2821735955&4294967295,O=k+(x<<17&4294967295|x>>>15),x=N+(R^O&(k^R))+P[7]+4249261313&4294967295,N=O+(x<<22&4294967295|x>>>10),x=R+(k^N&(O^k))+P[8]+1770035416&4294967295,R=N+(x<<7&4294967295|x>>>25),x=k+(O^R&(N^O))+P[9]+2336552879&4294967295,k=R+(x<<12&4294967295|x>>>20),x=O+(N^k&(R^N))+P[10]+4294925233&4294967295,O=k+(x<<17&4294967295|x>>>15),x=N+(R^O&(k^R))+P[11]+2304563134&4294967295,N=O+(x<<22&4294967295|x>>>10),x=R+(k^N&(O^k))+P[12]+1804603682&4294967295,R=N+(x<<7&4294967295|x>>>25),x=k+(O^R&(N^O))+P[13]+4254626195&4294967295,k=R+(x<<12&4294967295|x>>>20),x=O+(N^k&(R^N))+P[14]+2792965006&4294967295,O=k+(x<<17&4294967295|x>>>15),x=N+(R^O&(k^R))+P[15]+1236535329&4294967295,N=O+(x<<22&4294967295|x>>>10),x=R+(O^k&(N^O))+P[1]+4129170786&4294967295,R=N+(x<<5&4294967295|x>>>27),x=k+(N^O&(R^N))+P[6]+3225465664&4294967295,k=R+(x<<9&4294967295|x>>>23),x=O+(R^N&(k^R))+P[11]+643717713&4294967295,O=k+(x<<14&4294967295|x>>>18),x=N+(k^R&(O^k))+P[0]+3921069994&4294967295,N=O+(x<<20&4294967295|x>>>12),x=R+(O^k&(N^O))+P[5]+3593408605&4294967295,R=N+(x<<5&4294967295|x>>>27),x=k+(N^O&(R^N))+P[10]+38016083&4294967295,k=R+(x<<9&4294967295|x>>>23),x=O+(R^N&(k^R))+P[15]+3634488961&4294967295,O=k+(x<<14&4294967295|x>>>18),x=N+(k^R&(O^k))+P[4]+3889429448&4294967295,N=O+(x<<20&4294967295|x>>>12),x=R+(O^k&(N^O))+P[9]+568446438&4294967295,R=N+(x<<5&4294967295|x>>>27),x=k+(N^O&(R^N))+P[14]+3275163606&4294967295,k=R+(x<<9&4294967295|x>>>23),x=O+(R^N&(k^R))+P[3]+4107603335&4294967295,O=k+(x<<14&4294967295|x>>>18),x=N+(k^R&(O^k))+P[8]+1163531501&4294967295,N=O+(x<<20&4294967295|x>>>12),x=R+(O^k&(N^O))+P[13]+2850285829&4294967295,R=N+(x<<5&4294967295|x>>>27),x=k+(N^O&(R^N))+P[2]+4243563512&4294967295,k=R+(x<<9&4294967295|x>>>23),x=O+(R^N&(k^R))+P[7]+1735328473&4294967295,O=k+(x<<14&4294967295|x>>>18),x=N+(k^R&(O^k))+P[12]+2368359562&4294967295,N=O+(x<<20&4294967295|x>>>12),x=R+(N^O^k)+P[5]+4294588738&4294967295,R=N+(x<<4&4294967295|x>>>28),x=k+(R^N^O)+P[8]+2272392833&4294967295,k=R+(x<<11&4294967295|x>>>21),x=O+(k^R^N)+P[11]+1839030562&4294967295,O=k+(x<<16&4294967295|x>>>16),x=N+(O^k^R)+P[14]+4259657740&4294967295,N=O+(x<<23&4294967295|x>>>9),x=R+(N^O^k)+P[1]+2763975236&4294967295,R=N+(x<<4&4294967295|x>>>28),x=k+(R^N^O)+P[4]+1272893353&4294967295,k=R+(x<<11&4294967295|x>>>21),x=O+(k^R^N)+P[7]+4139469664&4294967295,O=k+(x<<16&4294967295|x>>>16),x=N+(O^k^R)+P[10]+3200236656&4294967295,N=O+(x<<23&4294967295|x>>>9),x=R+(N^O^k)+P[13]+681279174&4294967295,R=N+(x<<4&4294967295|x>>>28),x=k+(R^N^O)+P[0]+3936430074&4294967295,k=R+(x<<11&4294967295|x>>>21),x=O+(k^R^N)+P[3]+3572445317&4294967295,O=k+(x<<16&4294967295|x>>>16),x=N+(O^k^R)+P[6]+76029189&4294967295,N=O+(x<<23&4294967295|x>>>9),x=R+(N^O^k)+P[9]+3654602809&4294967295,R=N+(x<<4&4294967295|x>>>28),x=k+(R^N^O)+P[12]+3873151461&4294967295,k=R+(x<<11&4294967295|x>>>21),x=O+(k^R^N)+P[15]+530742520&4294967295,O=k+(x<<16&4294967295|x>>>16),x=N+(O^k^R)+P[2]+3299628645&4294967295,N=O+(x<<23&4294967295|x>>>9),x=R+(O^(N|~k))+P[0]+4096336452&4294967295,R=N+(x<<6&4294967295|x>>>26),x=k+(N^(R|~O))+P[7]+1126891415&4294967295,k=R+(x<<10&4294967295|x>>>22),x=O+(R^(k|~N))+P[14]+2878612391&4294967295,O=k+(x<<15&4294967295|x>>>17),x=N+(k^(O|~R))+P[5]+4237533241&4294967295,N=O+(x<<21&4294967295|x>>>11),x=R+(O^(N|~k))+P[12]+1700485571&4294967295,R=N+(x<<6&4294967295|x>>>26),x=k+(N^(R|~O))+P[3]+2399980690&4294967295,k=R+(x<<10&4294967295|x>>>22),x=O+(R^(k|~N))+P[10]+4293915773&4294967295,O=k+(x<<15&4294967295|x>>>17),x=N+(k^(O|~R))+P[1]+2240044497&4294967295,N=O+(x<<21&4294967295|x>>>11),x=R+(O^(N|~k))+P[8]+1873313359&4294967295,R=N+(x<<6&4294967295|x>>>26),x=k+(N^(R|~O))+P[15]+4264355552&4294967295,k=R+(x<<10&4294967295|x>>>22),x=O+(R^(k|~N))+P[6]+2734768916&4294967295,O=k+(x<<15&4294967295|x>>>17),x=N+(k^(O|~R))+P[13]+1309151649&4294967295,N=O+(x<<21&4294967295|x>>>11),x=R+(O^(N|~k))+P[4]+4149444226&4294967295,R=N+(x<<6&4294967295|x>>>26),x=k+(N^(R|~O))+P[11]+3174756917&4294967295,k=R+(x<<10&4294967295|x>>>22),x=O+(R^(k|~N))+P[2]+718787259&4294967295,O=k+(x<<15&4294967295|x>>>17),x=N+(k^(O|~R))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(O+(x<<21&4294967295|x>>>11))&4294967295,I.g[2]=I.g[2]+O&4294967295,I.g[3]=I.g[3]+k&4294967295}i.prototype.v=function(I,R){R===void 0&&(R=I.length);const N=R-this.blockSize,P=this.C;let O=this.h,k=0;for(;k<R;){if(O==0)for(;k<=N;)a(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<R;)if(P[O++]=I.charCodeAt(k++),O==this.blockSize){a(this,P),O=0;break}}else for(;k<R;)if(P[O++]=I[k++],O==this.blockSize){a(this,P),O=0;break}}this.h=O,this.o+=R},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;R=this.o*8;for(var N=I.length-8;N<I.length;++N)I[N]=R&255,R/=256;for(this.v(I),I=Array(16),R=0,N=0;N<4;++N)for(let P=0;P<32;P+=8)I[R++]=this.g[N]>>>P&255;return I};function l(I,R){var N=m;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=R(I)}function c(I,R){this.h=R;const N=[];let P=!0;for(let O=I.length-1;O>=0;O--){const k=I[O]|0;P&&k==R||(N[O]=k,P=!1)}this.g=N}var m={};function g(I){return-128<=I&&I<128?l(I,function(R){return new c([R|0],R<0?-1:0)}):new c([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return E;if(I<0)return U(p(-I));const R=[];let N=1;for(let P=0;I>=N;P++)R[P]=I/N|0,N*=4294967296;return new c(R,0)}function v(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return U(v(I.substring(1),R));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(R,8));let P=E;for(let k=0;k<I.length;k+=8){var O=Math.min(8,I.length-k);const x=parseInt(I.substring(k,k+O),R);O<8?(O=p(Math.pow(R,O)),P=P.j(O).add(p(x))):(P=P.j(N),P=P.add(p(x)))}return P}var E=g(0),S=g(1),D=g(16777216);r=c.prototype,r.m=function(){if(z(this))return-U(this).m();let I=0,R=1;for(let N=0;N<this.g.length;N++){const P=this.i(N);I+=(P>=0?P:4294967296+P)*R,R*=4294967296}return I},r.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(G(this))return"0";if(z(this))return"-"+U(this).toString(I);const R=p(Math.pow(I,6));var N=this;let P="";for(;;){const O=ge(N,R).g;N=ie(N,O.j(R));let k=((N.g.length>0?N.g[0]:N.h)>>>0).toString(I);if(N=O,G(N))return k+P;for(;k.length<6;)k="0"+k;P=k+P}},r.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function G(I){if(I.h!=0)return!1;for(let R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function z(I){return I.h==-1}r.l=function(I){return I=ie(this,I),z(I)?-1:G(I)?0:1};function U(I){const R=I.g.length,N=[];for(let P=0;P<R;P++)N[P]=~I.g[P];return new c(N,~I.h).add(S)}r.abs=function(){return z(this)?U(this):this},r.add=function(I){const R=Math.max(this.g.length,I.g.length),N=[];let P=0;for(let O=0;O<=R;O++){let k=P+(this.i(O)&65535)+(I.i(O)&65535),x=(k>>>16)+(this.i(O)>>>16)+(I.i(O)>>>16);P=x>>>16,k&=65535,x&=65535,N[O]=x<<16|k}return new c(N,N[N.length-1]&-2147483648?-1:0)};function ie(I,R){return I.add(U(R))}r.j=function(I){if(G(this)||G(I))return E;if(z(this))return z(I)?U(this).j(U(I)):U(U(this).j(I));if(z(I))return U(this.j(U(I)));if(this.l(D)<0&&I.l(D)<0)return p(this.m()*I.m());const R=this.g.length+I.g.length,N=[];for(var P=0;P<2*R;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(let O=0;O<I.g.length;O++){const k=this.i(P)>>>16,x=this.i(P)&65535,Ne=I.i(O)>>>16,He=I.i(O)&65535;N[2*P+2*O]+=x*He,re(N,2*P+2*O),N[2*P+2*O+1]+=k*He,re(N,2*P+2*O+1),N[2*P+2*O+1]+=x*Ne,re(N,2*P+2*O+1),N[2*P+2*O+2]+=k*Ne,re(N,2*P+2*O+2)}for(I=0;I<R;I++)N[I]=N[2*I+1]<<16|N[2*I];for(I=R;I<2*R;I++)N[I]=0;return new c(N,0)};function re(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function se(I,R){this.g=I,this.h=R}function ge(I,R){if(G(R))throw Error("division by zero");if(G(I))return new se(E,E);if(z(I))return R=ge(U(I),R),new se(U(R.g),U(R.h));if(z(R))return R=ge(I,U(R)),new se(U(R.g),R.h);if(I.g.length>30){if(z(I)||z(R))throw Error("slowDivide_ only works with positive integers.");for(var N=S,P=R;P.l(I)<=0;)N=Se(N),P=Se(P);var O=Te(N,1),k=Te(P,1);for(P=Te(P,2),N=Te(N,2);!G(P);){var x=k.add(P);x.l(I)<=0&&(O=O.add(N),k=x),P=Te(P,1),N=Te(N,1)}return R=ie(I,O.j(R)),new se(O,R)}for(O=E;I.l(R)>=0;){for(N=Math.max(1,Math.floor(I.m()/R.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),k=p(N),x=k.j(R);z(x)||x.l(I)>0;)N-=P,k=p(N),x=k.j(R);G(k)&&(k=S),O=O.add(k),I=ie(I,x)}return new se(O,I)}r.B=function(I){return ge(this,I).h},r.and=function(I){const R=Math.max(this.g.length,I.g.length),N=[];for(let P=0;P<R;P++)N[P]=this.i(P)&I.i(P);return new c(N,this.h&I.h)},r.or=function(I){const R=Math.max(this.g.length,I.g.length),N=[];for(let P=0;P<R;P++)N[P]=this.i(P)|I.i(P);return new c(N,this.h|I.h)},r.xor=function(I){const R=Math.max(this.g.length,I.g.length),N=[];for(let P=0;P<R;P++)N[P]=this.i(P)^I.i(P);return new c(N,this.h^I.h)};function Se(I){const R=I.g.length+1,N=[];for(let P=0;P<R;P++)N[P]=I.i(P)<<1|I.i(P-1)>>>31;return new c(N,I.h)}function Te(I,R){const N=R>>5;R%=32;const P=I.g.length-N,O=[];for(let k=0;k<P;k++)O[k]=R>0?I.i(k+N)>>>R|I.i(k+N+1)<<32-R:I.i(k+N);return new c(O,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,_w=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,Cr=c}).apply(typeof ob<"u"?ob:typeof self<"u"?self:typeof window<"u"?window:{});var Ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vw,$u,Tw,Vf,dp,bw,Ew,ww;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ef=="object"&&Ef];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var T=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var B=h[A];if(!(B in T))break e;T=T[B]}h=h[h.length-1],A=T[h],y=y(A),y!=A&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var T=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&T.push([A,y[A]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,T){return h.call.apply(h.bind,arguments)}function p(h,y,T){return p=g,p.apply(null,arguments)}function v(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var A=T.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function E(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(A,B,K){for(var he=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)he[Oe-2]=arguments[Oe];return y.prototype[B].apply(A,he)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function D(h){const y=h.length;if(y>0){const T=Array(y);for(let A=0;A<y;A++)T[A]=h[A];return T}return[]}function G(h,y){for(let A=1;A<arguments.length;A++){const B=arguments[A];var T=typeof B;if(T=T!="object"?T:B?Array.isArray(B)?"array":T:"null",T=="array"||T=="object"&&typeof B.length=="number"){T=h.length||0;const K=B.length||0;h.length=T+K;for(let he=0;he<K;he++)h[T+he]=B[he]}else h.push(B)}}class z{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(h){c.setTimeout(()=>{throw h},0)}function ie(){var h=I;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class re{constructor(){this.h=this.g=null}add(y,T){const A=se.get();A.set(y,T),this.h?this.h.next=A:this.g=A,this.h=A}}var se=new z(()=>new ge,h=>h.reset());class ge{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,Te=!1,I=new re,R=()=>{const h=Promise.resolve(void 0);Se=()=>{h.then(N)}};function N(){for(var h;h=ie();){try{h.h.call(h.g)}catch(T){U(T)}var y=se;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Te=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function Ne(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Ne,O),Ne.prototype.init=function(h,y){const T=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),Y=0;function le(h,y,T,A,B){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!A,this.ha=B,this.key=++Y,this.da=this.fa=!1}function ae(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _e(h,y,T){for(const A in h)y.call(T,h[A],A,h)}function Ce(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function V(h){const y={};for(const T in h)y[T]=h[T];return y}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,y){let T,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(T in A)h[T]=A[T];for(let K=0;K<Z.length;K++)T=Z[K],Object.prototype.hasOwnProperty.call(A,T)&&(h[T]=A[T])}}function X(h){this.src=h,this.g={},this.h=0}X.prototype.add=function(h,y,T,A,B){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const he=fe(h,y,A,B);return he>-1?(y=h[he],T||(y.fa=!1)):(y=new le(y,this.src,K,!!A,B),y.fa=T,h.push(y)),y};function oe(h,y){const T=y.type;if(T in h.g){var A=h.g[T],B=Array.prototype.indexOf.call(A,y,void 0),K;(K=B>=0)&&Array.prototype.splice.call(A,B,1),K&&(ae(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function fe(h,y,T,A){for(let B=0;B<h.length;++B){const K=h[B];if(!K.da&&K.listener==y&&K.capture==!!T&&K.ha==A)return B}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),Ie={};function Ae(h,y,T,A,B){if(Array.isArray(y)){for(let K=0;K<y.length;K++)Ae(h,y[K],T,A,B);return null}return T=Ll(T),h&&h[He]?h.J(y,T,m(A)?!!A.capture:!1,B):Ye(h,y,T,!1,A,B)}function Ye(h,y,T,A,B,K){if(!y)throw Error("Invalid event type");const he=m(B)?!!B.capture:!!B;let Oe=$r(h);if(Oe||(h[ue]=Oe=new X(h)),T=Oe.add(y,T,A,he,K),T.proxy)return T;if(A=_n(),T.proxy=A,A.src=h,A.listener=T,h.addEventListener)k||(B=he),B===void 0&&(B=!1),h.addEventListener(y.toString(),A,B);else if(h.attachEvent)h.attachEvent(In(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return T}function _n(){function h(T){return y.call(h.src,h.listener,T)}const y=hs;return h}function hn(h,y,T,A,B){if(Array.isArray(y))for(var K=0;K<y.length;K++)hn(h,y[K],T,A,B);else A=m(A)?!!A.capture:!!A,T=Ll(T),h&&h[He]?(h=h.i,K=String(y).toString(),K in h.g&&(y=h.g[K],T=fe(y,T,A,B),T>-1&&(ae(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[K],h.h--)))):h&&(h=$r(h))&&(y=h.g[y.toString()],h=-1,y&&(h=fe(y,T,A,B)),(T=h>-1?y[h]:null)&&Zn(T))}function Zn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[He])oe(y.i,h);else{var T=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(T,A,h.capture):y.detachEvent?y.detachEvent(In(T),A):y.addListener&&y.removeListener&&y.removeListener(A),(T=$r(y))?(oe(T,h),T.h==0&&(T.src=null,y[ue]=null)):ae(h)}}}function In(h){return h in Ie?Ie[h]:Ie[h]="on"+h}function hs(h,y){if(h.da)h=!0;else{y=new Ne(y,this);const T=h.listener,A=h.ha||h.src;h.fa&&Zn(h),h=T.call(A,y)}return h}function $r(h){return h=h[ue],h instanceof X?h:null}var Ul="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ll(h){return typeof h=="function"?h:(h[Ul]||(h[Ul]=function(y){return h.handleEvent(y)}),h[Ul])}function Mt(){P.call(this),this.i=new X(this),this.M=this,this.G=null}E(Mt,P),Mt.prototype[He]=!0,Mt.prototype.removeEventListener=function(h,y,T,A){hn(this,h,y,T,A)};function Ht(h,y){var T,A=h.G;if(A)for(T=[];A;A=A.G)T.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var B=y;y=new O(A,h),ce(y,B)}B=!0;let K,he;if(T)for(he=T.length-1;he>=0;he--)K=y.g=T[he],B=Fs(K,A,!0,y)&&B;if(K=y.g=h,B=Fs(K,A,!0,y)&&B,B=Fs(K,A,!1,y)&&B,T)for(he=0;he<T.length;he++)K=y.g=T[he],B=Fs(K,A,!1,y)&&B}Mt.prototype.N=function(){if(Mt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let A=0;A<T.length;A++)ae(T[A]);delete h.g[y],h.h--}}this.G=null},Mt.prototype.J=function(h,y,T,A){return this.i.add(String(h),y,!1,T,A)},Mt.prototype.K=function(h,y,T,A){return this.i.add(String(h),y,!0,T,A)};function Fs(h,y,T,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let K=0;K<y.length;++K){const he=y[K];if(he&&!he.da&&he.capture==T){const Oe=he.listener,Nt=he.ha||he.src;he.fa&&oe(h.i,he),B=Oe.call(Nt,A)!==!1&&B}}return B&&!A.defaultPrevented}function qd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Qc(h){h.g=qd(()=>{h.g=null,h.i&&(h.i=!1,Qc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class vn extends P{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Qc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(h){P.call(this),this.h=h,this.g={}}E(Zr,P);var Bl=[];function zl(h){_e(h.g,function(y,T){this.g.hasOwnProperty(T)&&Zn(y)},h),h.g={}}Zr.prototype.N=function(){Zr.Z.N.call(this),zl(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gs=c.JSON.stringify,Fd=c.JSON.parse,Kc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Yc(){}function Xc(){}var mi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){O.call(this,"d")}E(Wt,O);function Jn(){O.call(this,"c")}E(Jn,O);var It={},$c=null;function no(){return $c=$c||new Mt}It.Ia="serverreachability";function Zc(h){O.call(this,It.Ia,h)}E(Zc,O);function Vi(h){const y=no();Ht(y,new Zc(y))}It.STAT_EVENT="statevent";function Jr(h,y){O.call(this,It.STAT_EVENT,h),this.stat=y}E(Jr,O);function Pt(h){const y=no();Ht(y,new Jr(y,h))}It.Ja="timingevent";function Oi(h,y){O.call(this,It.Ja,h),this.size=y}E(Oi,O);function Mi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function gi(){this.g=!0}gi.prototype.ua=function(){this.g=!1};function Gd(h,y,T,A,B,K){h.info(function(){if(h.g)if(K){var he="",Oe=K.split("&");for(let Ze=0;Ze<Oe.length;Ze++){var Nt=Oe[Ze].split("=");if(Nt.length>1){const yt=Nt[0];Nt=Nt[1];const ni=yt.split("_");he=ni.length>=2&&ni[1]=="type"?he+(yt+"="+Nt+"&"):he+(yt+"=redacted&")}}}else he=null;else he=K;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+y+`
`+T+`
`+he})}function Jc(h,y,T,A,B,K,he){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+y+`
`+T+`
`+K+" "+he})}function Pi(h,y,T,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Hd(h,T)+(A?" "+A:"")})}function Wr(h,y){h.info(function(){return"TIMEOUT: "+y})}gi.prototype.info=function(){};function Hd(h,y){if(!h.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var T=K[h];if(!(T.length<2)){var A=T[1];if(Array.isArray(A)&&!(A.length<1)){var B=A[0];if(B!="noop"&&B!="stop"&&B!="close")for(let he=1;he<A.length;he++)A[he]=""}}}}return Gs(K)}catch{return y}}var ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ql={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fl;function ta(){}E(ta,Yc),ta.prototype.g=function(){return new XMLHttpRequest},Fl=new ta;function fs(h){return encodeURIComponent(String(h))}function Wc(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function pi(h,y,T,A){this.j=h,this.i=y,this.l=T,this.S=A||1,this.V=new Zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yi}function yi(){this.i=null,this.g="",this.h=!1}var kt={},Yt={};function ki(h,y,T){h.M=1,h.A=na(Ut(y)),h.u=T,h.R=!0,io(h,null)}function io(h,y){h.F=Date.now(),ji(h),h.B=Ut(h.A);var T=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),oo(T.i,"t",A),h.C=0,T=h.j.L,h.h=new yi,h.g=mh(h.j,T?y:null,!h.u),h.P>0&&(h.O=new vn(p(h.Y,h,h.g),h.P)),y=h.V,T=h.g,A=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(Bl[0]=B.toString()),B=Bl);for(let K=0;K<B.length;K++){const he=Ae(T,B[K],A||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Vi(),Gd(h.i,h.v,h.B,h.l,h.S,h.u)}pi.prototype.ba=function(h){h=h.target;const y=this.O;y&&Ti(h)==3?y.j():this.Y(h)},pi.prototype.Y=function(h){try{if(h==this.g)e:{const Oe=Ti(this.g),Nt=this.g.ya(),Ze=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||en(this.g)))){this.K||Oe!=4||Nt==7||(Nt==8||Ze<=0?Vi(3):Vi(2)),Ui(this);var y=this.g.ca();this.X=y;var T=Qd(this);if(this.o=y==200,Jc(this.i,this.v,this.B,this.l,this.S,Oe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,B=this.g;if((A=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(A)){var K=A;break t}}K=null}if(h=K)Pi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Li(this,h);else{this.o=!1,this.m=3,Pt(12),Ln(this),Wn(this);break e}}if(this.R){h=!0;let yt;for(;!this.K&&this.C<T.length;)if(yt=th(this,T),yt==Yt){Oe==4&&(this.m=4,Pt(14),h=!1),Pi(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==kt){this.m=4,Pt(15),Pi(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Pi(this.i,this.l,yt,null),Li(this,yt);if(eh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||T.length!=0||this.h.h||(this.m=1,Pt(16),h=!1),this.o=this.o&&h,!h)Pi(this.i,this.l,T,"[Invalid Chunked Response]"),Ln(this),Wn(this);else if(T.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),su(he),he.P=!0,Pt(11))}}else Pi(this.i,this.l,T,null),Li(this,T);Oe==4&&Ln(this),this.o&&!this.K&&(Oe==4?ch(this.j,this):(this.o=!1,ji(this)))}else ms(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),Ln(this),Wn(this)}}}catch{}finally{}};function Qd(h){if(!eh(h))return h.g.la();const y=en(h.g);if(y==="")return"";let T="";const A=y.length,B=Ti(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ln(h),Wn(h),"";h.h.i=new c.TextDecoder}for(let K=0;K<A;K++)h.h.h=!0,T+=h.h.i.decode(y[K],{stream:!(B&&K==A-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function eh(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function th(h,y){var T=h.C,A=y.indexOf(`
`,T);return A==-1?Yt:(T=Number(y.substring(T,A)),isNaN(T)?kt:(A+=1,A+T>y.length?Yt:(y=y.slice(A,A+T),h.C=A+T,y)))}pi.prototype.cancel=function(){this.K=!0,Ln(this)};function ji(h){h.T=Date.now()+h.H,so(h,h.H)}function so(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Mi(p(h.aa,h),y)}function Ui(h){h.D&&(c.clearTimeout(h.D),h.D=null)}pi.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Wr(this.i,this.B),this.M!=2&&(Vi(),Pt(17)),Ln(this),this.m=2,Wn(this)):so(this,this.T-h)};function Wn(h){h.j.I==0||h.K||ch(h.j,h)}function Ln(h){Ui(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,zl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Li(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||zi(T.h,h))){if(!h.L&&zi(T.h,h)&&T.I==3){try{var A=T.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)fo(T),Js(T);else break e;ua(T),Pt(18)}}else T.xa=B[1],0<T.xa-T.K&&B[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Mi(p(T.Va,T),6e3));Bi(T.h)<=1&&T.ta&&(T.ta=void 0)}else Ki(T,11)}else if((h.L||T.g==h)&&fo(T),!x(y))for(B=T.Ba.g.parse(y),y=0;y<B.length;y++){let Ze=B[y];const yt=Ze[0];if(!(yt<=T.K))if(T.K=yt,Ze=Ze[1],T.I==2)if(Ze[0]=="c"){T.M=Ze[1],T.ba=Ze[2];const ni=Ze[3];ni!=null&&(T.ka=ni,T.j.info("VER="+T.ka));const Yi=Ze[4];Yi!=null&&(T.za=Yi,T.j.info("SVER="+T.za));const bi=Ze[5];bi!=null&&typeof bi=="number"&&bi>0&&(A=1.5*bi,T.O=A,T.j.info("backChannelRequestTimeoutMs_="+A)),A=T;const Ei=h.g;if(Ei){const ca=Ei.g?Ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ca){var K=A.h;K.g||ca.indexOf("spdy")==-1&&ca.indexOf("quic")==-1&&ca.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ql(K,K.h),K.h=null))}if(A.G){const mo=Ei.g?Ei.g.getResponseHeader("X-HTTP-Session-Id"):null;mo&&(A.wa=mo,et(A.J,A.G,mo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),A=T;var he=h;if(A.na=dh(A,A.L?A.ba:null,A.W),he.L){Kl(A.h,he);var Oe=he,Nt=A.O;Nt&&(Oe.H=Nt),Oe.D&&(Ui(Oe),ji(Oe)),A.g=he}else lh(A);T.i.length>0&&Qi(T)}else Ze[0]!="stop"&&Ze[0]!="close"||Ki(T,7);else T.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Ki(T,7):nu(T):Ze[0]!="noop"&&T.l&&T.l.qa(Ze),T.A=0)}}Vi(4)}catch{}}var jt=class{constructor(h,y){this.g=h,this.map=y}};function Gl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Bi(h){return h.h?1:h.g?h.g.size:0}function zi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ql(h,y){h.g?h.g.add(y):h.h=y}function Kl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Gl.prototype.cancel=function(){if(this.i=Yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Yl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return D(h.i)}var nh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ro(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const A=h[T].indexOf("=");let B,K=null;A>=0?(B=h[T].substring(0,A),K=h[T].substring(A+1)):B=h[T],y(B,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Bn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Bn?(this.l=h.l,Xt(this,h.j),this.o=h.o,this.g=h.g,Hs(this,h.u),this.h=h.h,Xl(this,ah(h.i)),this.m=h.m):h&&(y=String(h).match(nh))?(this.l=!1,Xt(this,y[1]||"",!0),this.o=qi(y[2]||""),this.g=qi(y[3]||"",!0),Hs(this,y[4]),this.h=qi(y[5]||"",!0),Xl(this,y[6]||"",!0),this.m=qi(y[7]||"")):(this.l=!1,this.i=new Ks(null,this.l))}Bn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ia(y,ao,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ia(y,ao,!0),"@"),h.push(fs(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(ia(T,T.charAt(0)=="/"?$l:ih,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",ia(T,sh)),h.join("")},Bn.prototype.resolve=function(h){const y=Ut(this);let T=!!h.j;T?Xt(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var A=h.h;if(T)Hs(y,h.u);else if(T=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var B=y.h.lastIndexOf("/");B!=-1&&(A=y.h.slice(0,B+1)+A)}if(B=A,B==".."||B==".")A="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){A=B.lastIndexOf("/",0)==0,B=B.split("/");const K=[];for(let he=0;he<B.length;){const Oe=B[he++];Oe=="."?A&&he==B.length&&K.push(""):Oe==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),A&&he==B.length&&K.push("")):(K.push(Oe),A=!0)}A=K.join("/")}else A=B}return T?y.h=A:T=h.i.toString()!=="",T?Xl(y,ah(h.i)):T=!!h.m,T&&(y.m=h.m),y};function Ut(h){return new Bn(h)}function Xt(h,y,T){h.j=T?qi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Hs(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Xl(h,y,T){y instanceof Ks?(h.i=y,lo(h.i,h.l)):(T||(y=ia(y,Qs)),h.i=new Ks(y,h.l))}function et(h,y,T){h.i.set(y,T)}function na(h){return et(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function qi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ia(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,Nn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Nn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ao=/[#\/\?@]/g,ih=/[#\?:]/g,$l=/[#\?]/g,Qs=/[#\?@]/g,sh=/#/g;function Ks(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Cn(h){h.g||(h.g=new Map,h.h=0,h.i&&ro(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}r=Ks.prototype,r.add=function(h,y){Cn(this),this.i=null,h=Ys(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function rh(h,y){Cn(h),y=Ys(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Zl(h,y){return Cn(h),y=Ys(h,y),h.g.has(y)}r.forEach=function(h,y){Cn(this),this.g.forEach(function(T,A){T.forEach(function(B){h.call(y,B,A,this)},this)},this)};function Jl(h,y){Cn(h);let T=[];if(typeof y=="string")Zl(h,y)&&(T=T.concat(h.g.get(Ys(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}r.set=function(h,y){return Cn(this),this.i=null,h=Ys(this,h),Zl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=Jl(this,h),h.length>0?String(h[0]):y):y};function oo(h,y,T){rh(h,y),T.length>0&&(h.i=null,h.g.set(Ys(h,y),D(T)),h.h+=T.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var T=y[A];const B=fs(T);T=Jl(this,T);for(let K=0;K<T.length;K++){let he=B;T[K]!==""&&(he+="="+fs(T[K])),h.push(he)}}return this.i=h.join("&")};function ah(h){const y=new Ks;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ys(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function lo(h,y){y&&!h.j&&(Cn(h),h.i=null,h.g.forEach(function(T,A){const B=A.toLowerCase();A!=B&&(rh(this,A),oo(this,B,T))},h)),h.j=y}function _i(h,y){const T=new gi;if(c.Image){const A=new Image;A.onload=v(ei,T,"TestLoadImage: loaded",!0,y,A),A.onerror=v(ei,T,"TestLoadImage: error",!1,y,A),A.onabort=v(ei,T,"TestLoadImage: abort",!1,y,A),A.ontimeout=v(ei,T,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function Wl(h,y){const T=new gi,A=new AbortController,B=setTimeout(()=>{A.abort(),ei(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(K=>{clearTimeout(B),K.ok?ei(T,"TestPingServer: ok",!0,y):ei(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),ei(T,"TestPingServer: error",!1,y)})}function ei(h,y,T,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(T)}catch{}}function Xs(){this.g=new Kc}function Fi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Fi,Yc),Fi.prototype.g=function(){return new sa(this.i,this.h)};function sa(h,y){Mt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(sa,Mt),r=sa.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,vi(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,vi(this)),this.g&&(this.readyState=3,vi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;uo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function uo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?$s(this):vi(this),this.readyState==3&&uo(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,$s(this))},r.Na=function(h){this.g&&(this.response=h,$s(this))},r.ga=function(){this.g&&$s(this)};function $s(h){h.readyState=4,h.l=null,h.j=null,h.B=null,vi(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function vi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ti(h){let y="";return _e(h,function(T,A){y+=A,y+=":",y+=T,y+=`\r
`}),y}function ra(h,y,T){e:{for(A in T){var A=!1;break e}A=!0}A||(T=ti(T),typeof h=="string"?T!=null&&fs(T):et(h,y,T))}function rt(h){Mt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(rt,Mt);var Gi=/^https?$/i,eu=["POST","PUT"];r=rt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,T,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fl.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){aa(this,K);return}if(h=T||"",T=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)T.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())T.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(T.keys()).find(K=>K.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(eu,y,void 0)>=0)||A||B||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,he]of T)this.g.setRequestHeader(K,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){aa(this,K)}};function aa(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,tu(h),ds(h)}function tu(h){h.A||(h.A=!0,Ht(h,"complete"),Ht(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ht(this,"complete"),Ht(this,"abort"),ds(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ds(this,!0)),rt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?oa(this):this.Xa())},r.Xa=function(){oa(this)};function oa(h){if(h.h&&typeof l<"u"){if(h.v&&Ti(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ht(h,"readystatechange"),Ti(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var A;if(A=K===0){let he=String(h.D).match(nh)[1]||null;!he&&c.self&&c.self.location&&(he=c.self.location.protocol.slice(0,-1)),A=!Gi.test(he?he.toLowerCase():"")}T=A}if(T)Ht(h,"complete"),Ht(h,"success");else{h.o=6;try{var B=Ti(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",tu(h)}}finally{ds(h)}}}}function ds(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||Ht(h,"ready");try{T.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Ti(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Ti(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Fd(y)}};function en(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ms(h){const y={};h=(h.g&&Ti(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(x(h[A]))continue;var T=Wc(h[A]);const B=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const K=y[B]||[];y[B]=K,K.push(T)}Ce(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hi(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Zs(h){this.za=0,this.i=[],this.j=new gi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hi("baseRetryDelayMs",5e3,h),this.Za=Hi("retryDelaySeedMs",1e4,h),this.Ta=Hi("forwardChannelMaxRetries",2,h),this.va=Hi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Gl(h&&h.concurrentRequestLimit),this.Ba=new Xs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Zs.prototype,r.ka=8,r.I=1,r.connect=function(h,y,T,A){Pt(0),this.W=h,this.H=y||{},T&&A!==void 0&&(this.H.OSID=T,this.H.OAID=A),this.F=this.X,this.J=dh(this,null,this.W),Qi(this)};function nu(h){if(co(h),h.I==3){var y=h.V++,T=Ut(h.J);if(et(T,"SID",h.M),et(T,"RID",y),et(T,"TYPE","terminate"),la(h,T),y=new pi(h,h.j,y),y.M=2,y.A=na(Ut(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=mh(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ji(y)}fh(h)}function Js(h){h.g&&(su(h),h.g.cancel(),h.g=null)}function co(h){Js(h),h.v&&(c.clearTimeout(h.v),h.v=null),fo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Qi(h){if(!Hl(h.h)&&!h.m){h.m=!0;var y=h.Ea;Se||R(),Te||(Se(),Te=!0),I.add(y,h),h.D=0}}function ho(h,y){return Bi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Mi(p(h.Ea,h,y),hh(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new pi(this,this.j,h);let K=this.o;if(this.U&&(K?(K=V(K),ce(K,this.U)):K=this.U),this.u!==null||this.R||(B.J=K,K=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var A=this.i[T];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=oh(this,B,y),T=Ut(this.J),et(T,"RID",h),et(T,"CVER",22),this.G&&et(T,"X-HTTP-Session-Id",this.G),la(this,T),K&&(this.R?y="headers="+fs(ti(K))+"&"+y:this.u&&ra(T,this.u,K)),Ql(this.h,B),this.Ra&&et(T,"TYPE","init"),this.S?(et(T,"$req",y),et(T,"SID","null"),B.U=!0,ki(B,T,null)):ki(B,T,y),this.I=2}}else this.I==3&&(h?iu(this,h):this.i.length==0||Hl(this.h)||iu(this))};function iu(h,y){var T;y?T=y.l:T=h.V++;const A=Ut(h.J);et(A,"SID",h.M),et(A,"RID",T),et(A,"AID",h.K),la(h,A),h.u&&h.o&&ra(A,h.u,h.o),T=new pi(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=oh(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ql(h.h,T),ki(T,A,y)}function la(h,y){h.H&&_e(h.H,function(T,A){et(y,A,T)}),h.l&&_e({},function(T,A){et(y,A,T)})}function oh(h,y,T){T=Math.min(h.i.length,T);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var B=h.i;let Oe=-1;for(;;){const Nt=["count="+T];Oe==-1?T>0?(Oe=B[0].g,Nt.push("ofs="+Oe)):Oe=0:Nt.push("ofs="+Oe);let Ze=!0;for(let yt=0;yt<T;yt++){var K=B[yt].g;const ni=B[yt].map;if(K-=Oe,K<0)Oe=Math.max(0,B[yt].g-100),Ze=!1;else try{K="req"+K+"_"||"";try{var he=ni instanceof Map?ni:Object.entries(ni);for(const[Yi,bi]of he){let Ei=bi;m(bi)&&(Ei=Gs(bi)),Nt.push(K+Yi+"="+encodeURIComponent(Ei))}}catch(Yi){throw Nt.push(K+"type="+encodeURIComponent("_badmap")),Yi}}catch{A&&A(ni)}}if(Ze){he=Nt.join("&");break e}}he=void 0}return h=h.i.splice(0,T),y.G=h,he}function lh(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Se||R(),Te||(Se(),Te=!0),I.add(y,h),h.A=0}}function ua(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Mi(p(h.Da,h),hh(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,uh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Mi(p(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),Js(this),uh(this))};function su(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function uh(h){h.g=new pi(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ut(h.na);et(y,"RID","rpc"),et(y,"SID",h.M),et(y,"AID",h.K),et(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&et(y,"TO",h.ia),et(y,"TYPE","xmlhttp"),la(h,y),h.u&&h.o&&ra(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=na(Ut(y)),T.u=null,T.R=!0,io(T,h)}r.Va=function(){this.C!=null&&(this.C=null,Js(this),ua(this),Pt(19))};function fo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function ch(h,y){var T=null;if(h.g==y){fo(h),su(h),h.g=null;var A=2}else if(zi(h.h,y))T=y.G,Kl(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;A=no(),Ht(A,new Oi(A,T)),Qi(h)}else lh(h);else if(B=y.m,B==3||B==0&&y.X>0||!(A==1&&ho(h,y)||A==2&&ua(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),B){case 1:Ki(h,5);break;case 4:Ki(h,10);break;case 3:Ki(h,6);break;default:Ki(h,2)}}}function hh(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function Ki(h,y){if(h.j.info("Error code "+y),y==2){var T=p(h.bb,h),A=h.Ua;const B=!A;A=new Bn(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Xt(A,"https"),na(A),B?_i(A.toString(),T):Wl(A.toString(),T)}else Pt(2);h.I=0,h.l&&h.l.pa(y),fh(h),co(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function fh(h){if(h.I=0,h.ja=[],h.l){const y=Yl(h.h);(y.length!=0||h.i.length!=0)&&(G(h.ja,y),G(h.ja,h.i),h.h.i.length=0,D(h.i),h.i.length=0),h.l.oa()}}function dh(h,y,T){var A=T instanceof Bn?Ut(T):new Bn(T);if(A.g!="")y&&(A.g=y+"."+A.g),Hs(A,A.u);else{var B=c.location;A=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const K=new Bn(null);A&&Xt(K,A),y&&(K.g=y),B&&Hs(K,B),T&&(K.h=T),A=K}return T=h.G,y=h.wa,T&&y&&et(A,T,y),et(A,"VER",h.ka),la(h,A),A}function mh(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new rt(new Fi({ab:T})):new rt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function gh(){}r=gh.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ws(){}Ws.prototype.g=function(h,y){return new Tn(h,y)};function Tn(h,y){Mt.call(this),this.g=new Zs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!x(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new gs(this)}E(Tn,Mt),Tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){nu(this.g)},Tn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=Gs(h),h=T);y.i.push(new jt(y.Ya++,h)),y.I==3&&Qi(y)},Tn.prototype.N=function(){this.g.l=null,delete this.j,nu(this.g),delete this.g,Tn.Z.N.call(this)};function ph(h){Wt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(ph,Wt);function yh(){Jn.call(this),this.status=1}E(yh,Jn);function gs(h){this.g=h}E(gs,gh),gs.prototype.ra=function(){Ht(this.g,"a")},gs.prototype.qa=function(h){Ht(this.g,new ph(h))},gs.prototype.pa=function(h){Ht(this.g,new yh)},gs.prototype.oa=function(){Ht(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,ww=function(){return new Ws},Ew=function(){return no()},bw=It,dp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ea.NO_ERROR=0,ea.TIMEOUT=8,ea.HTTP_ERROR=6,Vf=ea,ql.COMPLETE="complete",Tw=ql,Xc.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",Mt.prototype.listen=Mt.prototype.J,$u=Xc,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,vw=rt}).apply(typeof Ef<"u"?Ef:typeof self<"u"?self:typeof window<"u"?window:{});const lb="@firebase/firestore",ub="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Il="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new Zp("@firebase/firestore");function Zo(){return Pr.logLevel}function d2(r){Pr.setLogLevel(r)}function ne(r,...e){if(Pr.logLevel<=Ge.DEBUG){const t=e.map(iy);Pr.debug(`Firestore (${Il}): ${r}`,...t)}}function Vt(r,...e){if(Pr.logLevel<=Ge.ERROR){const t=e.map(iy);Pr.error(`Firestore (${Il}): ${r}`,...t)}}function us(r,...e){if(Pr.logLevel<=Ge.WARN){const t=e.map(iy);Pr.warn(`Firestore (${Il}): ${r}`,...t)}}function iy(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Sw(r,i,t)}function Sw(r,e,t){let i=`FIRESTORE (${Il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Vt(i),new Error(i)}function be(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||Sw(e,a,i)}function m2(r,e){r||pe(57014,e)}function me(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Fr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Jt.UNAUTHENTICATED)))}shutdown(){}}class p2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class y2{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){be(this.o===void 0,42304);let i=this.i;const a=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new un;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new un,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},m=g=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new un)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(be(typeof i.accessToken=="string",31837,{l:i}),new Aw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class _2{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class v2{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new _2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Jt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class cb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ey(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){be(this.o===void 0,3512);const i=l=>{l.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ne("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new cb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new cb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=b2(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function De(r,e){return r<e?-1:r>e?1:0}function mp(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const a=r.charAt(i),l=e.charAt(i);if(a!==l)return Zg(a)===Zg(l)?De(a,l):Zg(a)?1:-1}return De(r.length,e.length)}const E2=55296,w2=57343;function Zg(r){const e=r.charCodeAt(0);return e>=E2&&e<=w2}function ul(r,e,t){return r.length===e.length&&r.every(((i,a)=>t(i,e[a])))}function xw(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="__name__";class es{constructor(e,t,i){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&pe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return es.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=es.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const i=es.isNumericId(e),a=es.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?es.extractNumericId(e).compare(es.extractNumericId(t)):mp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cr.fromString(e.substring(4,e.length-2))}}class Le extends es{construct(e,t,i){return new Le(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new te(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Le(t)}static emptyPath(){return new Le([])}}const S2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends es{construct(e,t,i){return new Tt(e,t,i)}static isValidIdentifier(e){return S2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hb}static keyField(){return new Tt([hb])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new te(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new te(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new te(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,a+=2}else m==="`"?(c=!c,a++):m!=="."||c?(i+=m,a++):(l(),a++)}if(l(),c)throw new te(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(t)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(Le.fromString(e))}static fromName(e){return new de(Le.fromString(e).popFirst(5))}static empty(){return new de(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Le.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(r,e,t){if(!t)throw new te(Q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Rw(r,e,t,i){if(e===!0&&i===!0)throw new te(Q.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function fb(r){if(!de.isDocumentKey(r))throw new te(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function db(r){if(de.isDocumentKey(r))throw new te(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Iw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function fd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":pe(12329,{type:typeof r})}function Ke(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new te(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fd(r);throw new te(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Nw(r,e){if(e<=0)throw new te(Q.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Vc(r,e){if(!Iw(r))throw new te(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new te(Q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=-62135596800,gb=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*gb);return new We(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mb)throw new te(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gb}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vc(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:Gt("string",We._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new We(0,0))}static max(){return new we(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=-1;class Kf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function gp(r){return r.fields.find((e=>e.kind===2))}function Ia(r){return r.fields.filter((e=>e.kind!==2))}Kf.UNKNOWN_ID=-1;class Of{constructor(e,t){this.fieldPath=e,this.kind=t}}class gc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gc(0,$n.min())}}function Cw(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=we.fromTimestamp(i===1e9?new We(t+1,0):new We(t,i));return new $n(a,de.empty(),e)}function Dw(r){return new $n(r.readTime,r.key,cl)}class $n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new $n(we.min(),de.empty(),cl)}static max(){return new $n(we.max(),de.empty(),cl)}}function ay(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(r.documentKey,e.documentKey),t!==0?t:De(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ow{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gr(r){if(r.code!==Q.FAILED_PRECONDITION||r.message!==Vw)throw r;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):L.reject(t)}static resolve(e){return new L(((t,i)=>{t(e)}))}static reject(e){return new L(((t,i)=>{i(e)}))}static waitFor(e){return new L(((t,i)=>{let a=0,l=0,c=!1;e.forEach((m=>{++a,m.next((()=>{++l,c&&l===a&&t()}),(g=>i(g)))})),c=!0,l===a&&t()}))}static or(e){let t=L.resolve(!1);for(const i of e)t=t.next((a=>a?L.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new L(((i,a)=>{const l=e.length,c=new Array(l);let m=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((v=>{c[p]=v,++m,m===l&&i(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new L(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="SimpleDb";class dd{static open(e,t,i,a){try{return new dd(t,e.transaction(a,i))}catch(l){throw new nc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new un,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new nc(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=oy(i.target.error);this.S.reject(new nc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ne(Yn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new x2(t)}}class rs{static delete(e){return ne(Yn,"Removing database:",e),Ca(Yp().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!sw())return!1;if(rs.F())return!0;const e=Hf(),t=rs.M(e),i=0<t&&t<10,a=Mw(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,rs.M(Hf())===12.2&&Vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ne(Yn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new nc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new te(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new te(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new nc(e,c))},a.onupgradeneeded=l=>{ne(Yn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{ne(Yn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const m=dd.open(this.db,e,l?"readonly":"readwrite",i),g=a(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),L.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(ne(Yn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Mw(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class A2{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ca(this.U.delete())}}class nc extends te{constructor(e,t){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hr(r){return r.name==="IndexedDbTransactionError"}class x2{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ne(Yn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ne(Yn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ca(i)}add(e){return ne(Yn,"ADD",this.store.name,e,e),Ca(this.store.add(e))}get(e){return Ca(this.store.get(e)).next((t=>(t===void 0&&(t=null),ne(Yn,"GET",this.store.name,e,t),t)))}delete(e){return ne(Yn,"DELETE",this.store.name,e),Ca(this.store.delete(e))}count(){return ne(Yn,"COUNT",this.store.name),Ca(this.store.count())}J(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new L(((c,m)=>{l.onerror=g=>{m(g.target.error)},l.onsuccess=g=>{c(g.target.result)}}))}{const l=this.cursor(i),c=[];return this.H(l,((m,g)=>{c.push(g)})).next((()=>c))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new L(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}Z(e,t){ne(Yn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,((l,c,m)=>m.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}te(e){const t=this.cursor({});return new L(((i,a)=>{t.onerror=l=>{const c=oy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((m=>{m?c.continue():i()})):i()}}))}H(e,t){const i=[];return new L(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void a();const g=new A2(m),p=t(m.primaryKey,m.value,g);if(p instanceof L){const v=p.catch((E=>(g.done(),L.reject(E))));i.push(v)}g.isDone?a():g.G===null?m.continue():m.continue(g.G)}})).next((()=>L.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ca(r){return new L(((e,t)=>{r.onsuccess=i=>{const a=i.target.result;e(a)},r.onerror=i=>{const a=oy(i.target.error);t(a)}}))}let pb=!1;function oy(r){const e=rs.M(Hf());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const i=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pb||(pb=!0,setTimeout((()=>{throw i}),0)),i}}return r}const ic="IndexBackfiller";class R2{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ne(ic,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ne(ic,`Documents written: ${t}`)}catch(t){Hr(t)?ne(ic,"Ignoring IndexedDB error during index backfill: ",t):await Gr(t)}await this.re(6e4)}))}}class I2{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return L.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return ne(ic,`Processing collection: ${c}`),this.oe(e,c,a).next((m=>{a-=m,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((m=>(ne(ic,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=Dw(l);ay(c,i)>0&&(i=c)})),new $n(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=-1;function Oc(r){return r==null}function pc(r){return r===0&&1/r==-1/0}function Pw(r){return typeof r=="number"&&Number.isInteger(r)&&!pc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="";function yn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=yb(e)),e=N2(r.get(t),e);return yb(e)}function N2(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case Yf:t+="";break;default:t+=l}}return t}function yb(r){return r+Yf+""}function is(r){const e=r.length;if(be(e>=2,64408,{path:r}),e===2)return be(r.charAt(0)===Yf&&r.charAt(1)==="",56145,{path:r}),Le.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=r.indexOf(Yf,l);switch((c<0||c>t)&&pe(50515,{path:r}),r.charAt(c+1)){case"":const m=r.substring(l,c);let g;a.length===0?g=m:(a+=m,g=a,a=""),i.push(g);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:pe(61167,{path:r})}l=c+2}return new Le(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="remoteDocuments",Mc="owner",Go="owner",yc="mutationQueues",C2="userId",Ii="mutations",_b="batchId",Pa="userMutationsIndex",vb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(r,e){return[r,yn(e)]}function kw(r,e,t){return[r,yn(e),t]}const D2={},hl="documentMutations",Xf="remoteDocumentsV14",V2=["prefixPath","collectionGroup","readTime","documentId"],Pf="documentKeyIndex",O2=["prefixPath","collectionGroup","documentId"],jw="collectionGroupIndex",M2=["collectionGroup","readTime","prefixPath","documentId"],_c="remoteDocumentGlobal",pp="remoteDocumentGlobalKey",fl="targets",Uw="queryTargetsIndex",P2=["canonicalId","targetId"],dl="targetDocuments",k2=["targetId","path"],ly="documentTargetsIndex",j2=["path","targetId"],$f="targetGlobalKey",Ua="targetGlobal",vc="collectionParents",U2=["collectionId","parent"],ml="clientMetadata",L2="clientId",md="bundles",B2="bundleId",gd="namedQueries",z2="name",uy="indexConfiguration",q2="indexId",yp="collectionGroupIndex",F2="collectionGroup",sc="indexState",G2=["indexId","uid"],Lw="sequenceNumberIndex",H2=["uid","sequenceNumber"],rc="indexEntries",Q2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bw="documentKeyIndex",K2=["indexId","uid","orderedDocumentKey"],pd="documentOverlays",Y2=["userId","collectionPath","documentId"],_p="collectionPathOverlayIndex",X2=["userId","collectionPath","largestBatchId"],zw="collectionGroupOverlayIndex",$2=["userId","collectionGroup","largestBatchId"],cy="globals",Z2="name",qw=[yc,Ii,hl,Na,fl,Mc,Ua,dl,ml,_c,vc,md,gd],J2=[...qw,pd],Fw=[yc,Ii,hl,Xf,fl,Mc,Ua,dl,ml,_c,vc,md,gd,pd],Gw=Fw,hy=[...Gw,uy,sc,rc],W2=hy,Hw=[...hy,cy],eN=Hw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends Ow{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Kt(r,e){const t=me(r);return rs.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Qr(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Qw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wf(this.root,e,this.comparator,!1)}getReverseIterator(){return new wf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wf(this.root,e,this.comparator,!0)}}class wf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??on.RED,this.left=a??on.EMPTY,this.right=l??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new on(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return on.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bb(this.data.getIterator())}getIteratorFrom(e){return new bb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new st(this.comparator);return t.data=e,t}}class bb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ho(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new jn([])}unionWith(e){let t=new st(Tt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ul(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Kw("Invalid base64 string: "+l):l}})(e);return new xt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const nN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(r){if(be(!!r,39018),typeof r=="string"){let e=0;const t=nN.exec(r);if(be(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vt(r.seconds),nanos:vt(r.nanos)}}function vt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function js(r){return typeof r=="string"?xt.fromBase64String(r):xt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="server_timestamp",Xw="__type__",$w="__previous_value__",Zw="__local_write_time__";function yd(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Xw])==null?void 0:i.stringValue)===Yw}function _d(r){const e=r.mapValue.fields[$w];return yd(e)?_d(e):e}function Tc(r){const e=ks(r.mapValue.fields[Zw].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,t,i,a,l,c,m,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const Tp="(default)";class kr{constructor(e,t){this.projectId=e,this.database=t||Tp}static empty(){return new kr("","")}get isDefaultDatabase(){return this.database===Tp}isEqual(e){return e instanceof kr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="__type__",Jw="__max__",Rr={mapValue:{fields:{__type__:{stringValue:Jw}}}},dy="__vector__",gl="value",kf={nullValue:"NULL_VALUE"};function jr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?yd(r)?4:Ww(r)?9007199254740991:vd(r)?10:11:pe(28295,{value:r})}function cs(r,e){if(r===e)return!0;const t=jr(r);if(t!==jr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Tc(r).isEqual(Tc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ks(a.timestampValue),m=ks(l.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return js(a.bytesValue).isEqual(js(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return vt(a.geoPointValue.latitude)===vt(l.geoPointValue.latitude)&&vt(a.geoPointValue.longitude)===vt(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return vt(a.integerValue)===vt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=vt(a.doubleValue),m=vt(l.doubleValue);return c===m?pc(c)===pc(m):isNaN(c)&&isNaN(m)}return!1})(r,e);case 9:return ul(r.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},m=l.mapValue.fields||{};if(Tb(c)!==Tb(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!cs(c[g],m[g])))return!1;return!0})(r,e);default:return pe(52216,{left:r})}}function bc(r,e){return(r.values||[]).find((t=>cs(t,e)))!==void 0}function Ur(r,e){if(r===e)return 0;const t=jr(r),i=jr(e);if(t!==i)return De(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const m=vt(l.integerValue||l.doubleValue),g=vt(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return Eb(r.timestampValue,e.timestampValue);case 4:return Eb(Tc(r),Tc(e));case 5:return mp(r.stringValue,e.stringValue);case 6:return(function(l,c){const m=js(l),g=js(c);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const m=l.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const v=De(m[p],g[p]);if(v!==0)return v}return De(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const m=De(vt(l.latitude),vt(c.latitude));return m!==0?m:De(vt(l.longitude),vt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return wb(r.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,D,G,z;const m=l.fields||{},g=c.fields||{},p=(S=m[gl])==null?void 0:S.arrayValue,v=(D=g[gl])==null?void 0:D.arrayValue,E=De(((G=p==null?void 0:p.values)==null?void 0:G.length)||0,((z=v==null?void 0:v.values)==null?void 0:z.length)||0);return E!==0?E:wb(p,v)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Rr.mapValue&&c===Rr.mapValue)return 0;if(l===Rr.mapValue)return 1;if(c===Rr.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),p=c.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const S=mp(g[E],v[E]);if(S!==0)return S;const D=Ur(m[g[E]],p[v[E]]);if(D!==0)return D}return De(g.length,v.length)})(r.mapValue,e.mapValue);default:throw pe(23264,{he:t})}}function Eb(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return De(r,e);const t=ks(r),i=ks(e),a=De(t.seconds,i.seconds);return a!==0?a:De(t.nanos,i.nanos)}function wb(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Ur(t[a],i[a]);if(l)return l}return De(t.length,i.length)}function pl(r){return bp(r)}function bp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=ks(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return js(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return de.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=bp(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${bp(t.fields[c])}`;return a+"}"})(r.mapValue):pe(61005,{value:r})}function jf(r){switch(jr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_d(r);return e?16+jf(e):16;case 5:return 2*r.stringValue.length;case 6:return js(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+jf(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return Qr(i.fields,((l,c)=>{a+=l.length+jf(c)})),a})(r.mapValue);default:throw pe(13486,{value:r})}}function qa(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Ep(r){return!!r&&"integerValue"in r}function Ec(r){return!!r&&"arrayValue"in r}function Sb(r){return!!r&&"nullValue"in r}function Ab(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Uf(r){return!!r&&"mapValue"in r}function vd(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[fy])==null?void 0:i.stringValue)===dy}function ac(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Qr(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ac(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ac(r.arrayValue.values[t]);return e}return{...r}}function Ww(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Jw}const eS={mapValue:{fields:{[fy]:{stringValue:dy},[gl]:{arrayValue:{}}}}};function sN(r){return"nullValue"in r?kf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?qa(kr.empty(),de.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?vd(r)?eS:{mapValue:{}}:pe(35942,{value:r})}function rN(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?qa(kr.empty(),de.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?eS:"mapValue"in r?vd(r)?{mapValue:{}}:Rr:pe(61959,{value:r})}function xb(r,e){const t=Ur(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Rb(r,e){const t=Ur(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Uf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(t)}setAll(e){let t=Tt.emptyPath(),i={},a=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,a),i={},a=[],t=m.popLast()}c?i[m.lastSegment()]=ac(c):a.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Uf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Uf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Qr(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new ln(ac(this.value))}}function tS(r){const e=[];return Qr(r.fields,((t,i)=>{const a=new Tt([t]);if(Uf(i)){const l=tS(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t,i,a,l,c,m){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=m}static newInvalidDocument(e){return new gt(e,0,we.min(),we.min(),we.min(),ln.empty(),0)}static newFoundDocument(e,t,i,a){return new gt(e,1,t,we.min(),i,a,0)}static newNoDocument(e,t){return new gt(e,2,t,we.min(),we.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new gt(e,3,t,we.min(),we.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t){this.position=e,this.inclusive=t}}function Ib(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?i=de.comparator(de.fromName(c.referenceValue),t.key):i=Ur(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Nb(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!cs(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t="asc"){this.field=e,this.dir=t}}function aN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{}class qe extends nS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new oN(e,t,i):t==="array-contains"?new cN(e,i):t==="in"?new lS(e,i):t==="not-in"?new hN(e,i):t==="array-contains-any"?new fN(e,i):new qe(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new lN(e,i):new uN(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ur(t,this.value)):t!==null&&jr(this.value)===jr(t)&&this.matchesComparison(Ur(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class it extends nS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new it(e,t)}matches(e){return yl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yl(r){return r.op==="and"}function wp(r){return r.op==="or"}function my(r){return iS(r)&&yl(r)}function iS(r){for(const e of r.filters)if(e instanceof it)return!1;return!0}function Sp(r){if(r instanceof qe)return r.field.canonicalString()+r.op.toString()+pl(r.value);if(my(r))return r.filters.map((e=>Sp(e))).join(",");{const e=r.filters.map((t=>Sp(t))).join(",");return`${r.op}(${e})`}}function sS(r,e){return r instanceof qe?(function(i,a){return a instanceof qe&&i.op===a.op&&i.field.isEqual(a.field)&&cs(i.value,a.value)})(r,e):r instanceof it?(function(i,a){return a instanceof it&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,m)=>l&&sS(c,a.filters[m])),!0):!1})(r,e):void pe(19439)}function rS(r,e){const t=r.filters.concat(e);return it.create(t,r.op)}function aS(r){return r instanceof qe?(function(t){return`${t.field.canonicalString()} ${t.op} ${pl(t.value)}`})(r):r instanceof it?(function(t){return t.op.toString()+" {"+t.getFilters().map(aS).join(" ,")+"}"})(r):"Filter"}class oN extends qe{constructor(e,t,i){super(e,t,i),this.key=de.fromName(i.referenceValue)}matches(e){const t=de.comparator(e.key,this.key);return this.matchesComparison(t)}}class lN extends qe{constructor(e,t){super(e,"in",t),this.keys=oS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class uN extends qe{constructor(e,t){super(e,"not-in",t),this.keys=oS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function oS(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>de.fromName(i.referenceValue)))}class cN extends qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ec(t)&&bc(t.arrayValue,this.value)}}class lS extends qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bc(this.value.arrayValue,t)}}class hN extends qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bc(this.value.arrayValue,t)}}class fN extends qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ec(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>bc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,t=null,i=[],a=[],l=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=m,this.Te=null}}function Ap(r,e=null,t=[],i=[],a=null,l=null,c=null){return new dN(r,e,t,i,a,l,c)}function Fa(r){const e=me(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Sp(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Oc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>pl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>pl(i))).join(",")),e.Te=t}return e.Te}function Pc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!aN(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!sS(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Nb(r.startAt,e.startAt)&&Nb(r.endAt,e.endAt)}function Zf(r){return de.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Jf(r,e){return r.filters.filter((t=>t instanceof qe&&t.field.isEqual(e)))}function Cb(r,e,t){let i=kf,a=!0;for(const l of Jf(r,e)){let c=kf,m=!0;switch(l.op){case"<":case"<=":c=sN(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,m=!1;break;case"!=":case"not-in":c=kf}xb({value:i,inclusive:a},{value:c,inclusive:m})<0&&(i=c,a=m)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];xb({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function Db(r,e,t){let i=Rr,a=!0;for(const l of Jf(r,e)){let c=Rr,m=!0;switch(l.op){case">=":case">":c=rN(l.value),m=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,m=!1;break;case"!=":case"not-in":c=Rr}Rb({value:i,inclusive:a},{value:c,inclusive:m})>0&&(i=c,a=m)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];Rb({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,t=null,i=[],a=[],l=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uS(r,e,t,i,a,l,c,m){return new Us(r,e,t,i,a,l,c,m)}function Nl(r){return new Us(r)}function Vb(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function gy(r){return r.collectionGroup!==null}function il(r){const e=me(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new st(Tt.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new wc(l,i))})),t.has(Tt.keyField().canonicalString())||e.Ie.push(new wc(Tt.keyField(),i))}return e.Ie}function xn(r){const e=me(r);return e.Ee||(e.Ee=mN(e,il(r))),e.Ee}function mN(r,e){if(r.limitType==="F")return Ap(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new wc(a.field,l)}));const t=r.endAt?new Lr(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Lr(r.startAt.position,r.startAt.inclusive):null;return Ap(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function xp(r,e){const t=r.filters.concat([e]);return new Us(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Wf(r,e,t){return new Us(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function kc(r,e){return Pc(xn(r),xn(e))&&r.limitType===e.limitType}function cS(r){return`${Fa(xn(r))}|lt:${r.limitType}`}function Jo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>aS(a))).join(", ")}]`),Oc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>pl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>pl(a))).join(",")),`Target(${i})`})(xn(r))}; limitType=${r.limitType})`}function jc(r,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):de.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,a){for(const l of il(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(i,a){return!(i.startAt&&!(function(c,m,g){const p=Ib(c,m,g);return c.inclusive?p<=0:p<0})(i.startAt,il(i),a)||i.endAt&&!(function(c,m,g){const p=Ib(c,m,g);return c.inclusive?p>=0:p>0})(i.endAt,il(i),a))})(r,e)}function hS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function fS(r){return(e,t)=>{let i=!1;for(const a of il(r)){const l=gN(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function gN(r,e,t){const i=r.field.isKeyField()?de.comparator(e.key,t.key):(function(l,c,m){const g=c.data.field(l),p=m.data.field(l);return g!==null&&p!==null?Ur(g,p):pe(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return pe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Qr(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return Qw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=new ft(de.comparator);function Un(){return pN}const dS=new ft(de.comparator);function Zu(...r){let e=dS;for(const t of r)e=e.insert(t.key,t);return e}function mS(r){let e=dS;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ss(){return oc()}function gS(){return oc()}function oc(){return new Ls((r=>r.toString()),((r,e)=>r.isEqual(e)))}const yN=new ft(de.comparator),_N=new st(de.comparator);function Pe(...r){let e=_N;for(const t of r)e=e.add(t);return e}const vN=new st(De);function py(){return vN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function pS(r){return{integerValue:""+r}}function yS(r,e){return Pw(e)?pS(e):yy(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(){this._=void 0}}function TN(r,e,t){return r instanceof _l?(function(a,l){const c={fields:{[Xw]:{stringValue:Yw},[Zw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&yd(l)&&(l=_d(l)),l&&(c.fields[$w]=l),{mapValue:c}})(t,e):r instanceof Ga?vS(r,e):r instanceof Ha?TS(r,e):(function(a,l){const c=_S(a,l),m=Ob(c)+Ob(a.Ae);return Ep(c)&&Ep(a.Ae)?pS(m):yy(a.serializer,m)})(r,e)}function bN(r,e,t){return r instanceof Ga?vS(r,e):r instanceof Ha?TS(r,e):t}function _S(r,e){return r instanceof vl?(function(i){return Ep(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class _l extends Td{}class Ga extends Td{constructor(e){super(),this.elements=e}}function vS(r,e){const t=bS(e);for(const i of r.elements)t.some((a=>cs(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Ha extends Td{constructor(e){super(),this.elements=e}}function TS(r,e){let t=bS(e);for(const i of r.elements)t=t.filter((a=>!cs(a,i)));return{arrayValue:{values:t}}}class vl extends Td{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ob(r){return vt(r.integerValue||r.doubleValue)}function bS(r){return Ec(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t){this.field=e,this.transform=t}}function EN(r,e){return r.field.isEqual(e.field)&&(function(i,a){return i instanceof Ga&&a instanceof Ga||i instanceof Ha&&a instanceof Ha?ul(i.elements,a.elements,cs):i instanceof vl&&a instanceof vl?cs(i.Ae,a.Ae):i instanceof _l&&a instanceof _l})(r.transform,e.transform)}class wN{constructor(e,t){this.version=e,this.transformResults=t}}class bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class bd{}function ES(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Dl(r.key,bt.none()):new Cl(r.key,r.data,bt.none());{const t=r.data,i=ln.empty();let a=new st(Tt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Bs(r.key,i,new jn(a.toArray()),bt.none())}}function SN(r,e,t){r instanceof Cl?(function(a,l,c){const m=a.value.clone(),g=Pb(a.fieldTransforms,l,c.transformResults);m.setAll(g),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Bs?(function(a,l,c){if(!Lf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const m=Pb(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(wS(a)),g.setAll(m),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(r,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function lc(r,e,t,i){return r instanceof Cl?(function(l,c,m,g){if(!Lf(l.precondition,c))return m;const p=l.value.clone(),v=kb(l.fieldTransforms,g,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(r,e,t,i):r instanceof Bs?(function(l,c,m,g){if(!Lf(l.precondition,c))return m;const p=kb(l.fieldTransforms,g,c),v=c.data;return v.setAll(wS(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,i):(function(l,c,m){return Lf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(r,e,t)}function AN(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=_S(i.transform,a||null);l!=null&&(t===null&&(t=ln.empty()),t.set(i.field,l))}return t||null}function Mb(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&ul(i,a,((l,c)=>EN(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Cl extends bd{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Bs extends bd{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function wS(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Pb(r,e,t){const i=new Map;be(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,m=e.data.field(l.field);i.set(l.field,bN(c,m,t[a]))}return i}function kb(r,e,t){const i=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);i.set(a.field,TN(l,c,e))}return i}class Dl extends bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _y extends bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&SN(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=lc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=lc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=gS();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let m=this.applyToLocalView(c,l.mutatedFields);m=t.has(a.key)?null:m;const g=ES(c,m);g!==null&&i.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(we.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&ul(this.mutations,e.mutations,((t,i)=>Mb(t,i)))&&ul(this.baseMutations,e.baseMutations,((t,i)=>Mb(t,i)))}}class Ty{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){be(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return yN})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Ty(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Qe;function SS(r){switch(r){case Q.OK:return pe(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return pe(15467,{code:r})}}function AS(r){if(r===void 0)return Vt("GRPC error has no .code"),Q.UNKNOWN;switch(r){case Ft.OK:return Q.OK;case Ft.CANCELLED:return Q.CANCELLED;case Ft.UNKNOWN:return Q.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return Q.INTERNAL;case Ft.UNAVAILABLE:return Q.UNAVAILABLE;case Ft.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Ft.NOT_FOUND:return Q.NOT_FOUND;case Ft.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Ft.ABORTED:return Q.ABORTED;case Ft.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Ft.DATA_LOSS:return Q.DATA_LOSS;default:return pe(39323,{code:r})}}(Qe=Ft||(Ft={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=new Cr([4294967295,4294967295],0);function jb(r){const e=xS().encode(r),t=new _w;return t.update(e),new Uint8Array(t.digest())}function Ub(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Cr([t,i],0),new Cr([a,l],0)]}class Ey{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ju(`Invalid padding: ${t}`);if(i<0)throw new Ju(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ju(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ju(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Cr.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Cr.fromNumber(i)));return a.compare(RN)===1&&(a=new Cr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=jb(e),[i,a]=Ub(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ey(l,a,t);return i.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=jb(e),[i,a]=Ub(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Bc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Lc(we.min(),a,new ft(De),Un(),Pe())}}class Bc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Bc(i,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class RS{constructor(e,t){this.targetId=e,this.Ce=t}}class IS{constructor(e,t,i=xt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class Lb{constructor(){this.ve=0,this.Fe=Bb(),this.Me=xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),t=Pe(),i=Pe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:pe(38017,{changeType:l})}})),new Bc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Bb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Un(),this.Je=Sf(),this.He=Sf(),this.Ye=new ft(De)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Zf(l))if(i===0){const c=new de(l.path);this.et(t,c,gt.newNoDocument(c,we.min()))}else be(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,m;try{c=js(i).toUint8Array()}catch(g){if(g instanceof Kw)return us("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Ey(c,a,l)}catch(g){return us(g instanceof Ju?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const m=this.ot(c);if(m){if(l.current&&Zf(m.target)){const g=new de(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,gt.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=Pe();this.He.forEach(((l,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Lc(e,t,this.Ye,this.je,i);return this.je=Un(),this.Je=Sf(),this.He=Sf(),this.Ye=new ft(De),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Lb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new st(De),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new st(De),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Lb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Sf(){return new ft(de.comparator)}function Bb(){return new ft(de.comparator)}const NN={asc:"ASCENDING",desc:"DESCENDING"},CN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DN={and:"AND",or:"OR"};class VN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rp(r,e){return r.useProto3Json||Oc(e)?e:{value:e}}function Tl(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function ON(r,e){return Tl(r,e.toTimestamp())}function Ot(r){return be(!!r,49232),we.fromTimestamp((function(t){const i=ks(t);return new We(i.seconds,i.nanos)})(r))}function wy(r,e){return Ip(r,e).canonicalString()}function Ip(r,e){const t=(function(a){return new Le(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function CS(r){const e=Le.fromString(r);return be(BS(e),10190,{key:e.toString()}),e}function Sc(r,e){return wy(r.databaseId,e.path)}function as(r,e){const t=CS(e);if(t.get(1)!==r.databaseId.projectId)throw new te(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new te(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new de(OS(t))}function DS(r,e){return wy(r.databaseId,e)}function VS(r){const e=CS(r);return e.length===4?Le.emptyPath():OS(e)}function Np(r){return new Le(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function OS(r){return be(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function zb(r,e,t){return{name:Sc(r,e),fields:t.value.mapValue.fields}}function MS(r,e,t){const i=as(r,e.name),a=Ot(e.updateTime),l=e.createTime?Ot(e.createTime):we.min(),c=new ln({mapValue:{fields:e.fields}}),m=gt.newFoundDocument(i,a,l,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function MN(r,e){return"found"in e?(function(i,a){be(!!a.found,43571),a.found.name,a.found.updateTime;const l=as(i,a.found.name),c=Ot(a.found.updateTime),m=a.found.createTime?Ot(a.found.createTime):we.min(),g=new ln({mapValue:{fields:a.found.fields}});return gt.newFoundDocument(l,c,m,g)})(r,e):"missing"in e?(function(i,a){be(!!a.missing,3894),be(!!a.readTime,22933);const l=as(i,a.missing),c=Ot(a.readTime);return gt.newNoDocument(l,c)})(r,e):pe(7234,{result:e})}function PN(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(be(v===void 0||typeof v=="string",58123),xt.fromBase64String(v||"")):(be(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),xt.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const v=p.code===void 0?Q.UNKNOWN:AS(p.code);return new te(v,p.message||"")})(c);t=new IS(i,a,l,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=as(r,i.document.name),l=Ot(i.document.updateTime),c=i.document.createTime?Ot(i.document.createTime):we.min(),m=new ln({mapValue:{fields:i.document.fields}}),g=gt.newFoundDocument(a,l,c,m),p=i.targetIds||[],v=i.removedTargetIds||[];t=new Bf(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=as(r,i.document),l=i.readTime?Ot(i.readTime):we.min(),c=gt.newNoDocument(a,l),m=i.removedTargetIds||[];t=new Bf([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=as(r,i.document),l=i.removedTargetIds||[];t=new Bf([],l,a,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new xN(a,l),m=i.targetId;t=new RS(m,c)}}return t}function Ac(r,e){let t;if(e instanceof Cl)t={update:zb(r,e.key,e.value)};else if(e instanceof Dl)t={delete:Sc(r,e.key)};else if(e instanceof Bs)t={update:zb(r,e.key,e.data),updateMask:zN(e.fieldMask)};else{if(!(e instanceof _y))return pe(16599,{Vt:e.type});t={verify:Sc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const m=c.transform;if(m instanceof _l)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ga)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ha)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof vl)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw pe(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:ON(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:pe(27497)})(r,e.precondition)),t}function Cp(r,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?bt.updateTime(Ot(l.updateTime)):l.exists!==void 0?bt.exists(l.exists):bt.none()})(e.currentDocument):bt.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,m){let g=null;if("setToServerValue"in m)be(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new _l;else if("appendMissingElements"in m){const v=m.appendMissingElements.values||[];g=new Ga(v)}else if("removeAllFromArray"in m){const v=m.removeAllFromArray.values||[];g=new Ha(v)}else"increment"in m?g=new vl(c,m.increment):pe(16584,{proto:m});const p=Tt.fromServerFormat(m.fieldPath);return new Uc(p,g)})(r,a))):[];if(e.update){e.update.name;const a=as(r,e.update.name),l=new ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new jn(p.map((v=>Tt.fromServerFormat(v))))})(e.updateMask);return new Bs(a,l,c,t,i)}return new Cl(a,l,t,i)}if(e.delete){const a=as(r,e.delete);return new Dl(a,t)}if(e.verify){const a=as(r,e.verify);return new _y(a,t)}return pe(1463,{proto:e})}function kN(r,e){return r&&r.length>0?(be(e!==void 0,14353),r.map((t=>(function(a,l){let c=a.updateTime?Ot(a.updateTime):Ot(l);return c.isEqual(we.min())&&(c=Ot(l)),new wN(c,a.transformResults||[])})(t,e)))):[]}function PS(r,e){return{documents:[DS(r,e.path)]}}function kS(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=DS(r,a);const l=(function(p){if(p.length!==0)return LS(it.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((v=>(function(S){return{field:Wo(S.field),direction:UN(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=Rp(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function jS(r){let e=VS(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){be(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=US(E);return S instanceof it&&my(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(G){return new wc(el(G.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(S)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let S;return S=typeof E=="object"?E.value:E,Oc(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(E){const S=!!E.before,D=E.values||[];return new Lr(D,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const S=!E.before,D=E.values||[];return new Lr(D,S)})(t.endAt)),uS(e,a,c,l,m,"F",g,p)}function jN(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function US(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=el(t.unaryFilter.field);return qe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=el(t.unaryFilter.field);return qe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=el(t.unaryFilter.field);return qe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=el(t.unaryFilter.field);return qe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(r):r.fieldFilter!==void 0?(function(t){return qe.create(el(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return it.create(t.compositeFilter.filters.map((i=>US(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(t.compositeFilter.op))})(r):pe(30097,{filter:r})}function UN(r){return NN[r]}function LN(r){return CN[r]}function BN(r){return DN[r]}function Wo(r){return{fieldPath:r.canonicalString()}}function el(r){return Tt.fromServerFormat(r.fieldPath)}function LS(r){return r instanceof qe?(function(t){if(t.op==="=="){if(Ab(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NAN"}};if(Sb(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ab(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NOT_NAN"}};if(Sb(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wo(t.field),op:LN(t.op),value:t.value}}})(r):r instanceof it?(function(t){const i=t.getFilters().map((a=>LS(a)));return i.length===1?i[0]:{compositeFilter:{op:BN(t.op),filters:i}}})(r):pe(54877,{filter:r})}function zN(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function BS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t,i,a,l=we.min(),c=we.min(),m=xt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.yt=e}}function qN(r,e){let t;if(e.document)t=MS(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=de.fromSegments(e.noDocument.path),a=Ka(e.noDocument.readTime);t=gt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe(56709);{const i=de.fromSegments(e.unknownDocument.path),a=Ka(e.unknownDocument.version);t=gt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new We(a[0],a[1]);return we.fromTimestamp(l)})(e.readTime)),t}function qb(r,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ed(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:Sc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Tl(l,c.version.toTimestamp()),createTime:Tl(l,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Qa(e.version)};else{if(!e.isUnknownDocument())return pe(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Qa(e.version)}}return i}function ed(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Qa(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ka(r){const e=new We(r.seconds,r.nanoseconds);return we.fromTimestamp(e)}function Da(r,e){const t=(e.baseMutations||[]).map((l=>Cp(r.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const m=e.mutations[l+1];c.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>Cp(r.yt,l))),a=We.fromMillis(e.localWriteTimeMs);return new vy(e.batchId,a,t,i)}function Wu(r){const e=Ka(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Ka(r.lastLimboFreeSnapshotVersion):we.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const c=l.documents.length;return be(c===1,1966,{count:c}),xn(Nl(VS(l.documents[0])))})(r.query):(function(l){return xn(jS(l))})(r.query),new Vs(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,xt.fromBase64String(r.resumeToken))}function qS(r,e){const t=Qa(e.snapshotVersion),i=Qa(e.lastLimboFreeSnapshotVersion);let a;a=Zf(e.target)?PS(r.yt,e.target):kS(r.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fa(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function Sy(r){const e=jS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Wf(e,e.limit,"L"):e}function Jg(r,e){return new by(e.largestBatchId,Cp(r.yt,e.overlayMutation))}function Fb(r,e){const t=e.path.lastSegment();return[r,yn(e.path.popLast()),t]}function Gb(r,e,t,i){return{indexId:r,uid:e,sequenceNumber:t,readTime:Qa(i.readTime),documentKey:yn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{getBundleMetadata(e,t){return Hb(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:Ka(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return Hb(e).put((function(a){return{bundleId:a.id,createTime:Qa(Ot(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return Qb(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:Sy(l.bundledQuery),readTime:Ka(l.readTime)}})(i)}))}saveNamedQuery(e,t){return Qb(e).put((function(a){return{name:a.name,readTime:Qa(Ot(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function Hb(r){return Kt(r,md)}function Qb(r){return Kt(r,gd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Ed(e,i)}getOverlay(e,t){return Fu(e).get(Fb(this.userId,t)).next((i=>i?Jg(this.serializer,i):null))}getOverlays(e,t){const i=ss();return L.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const m=new by(t,c);a.push(this.St(e,m))})),L.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(yn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(Fu(e).Z(_p,m))})),L.waitFor(l)}getOverlaysForCollection(e,t,i){const a=ss(),l=yn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Fu(e).J(_p,c).next((m=>{for(const g of m){const p=Jg(this.serializer,g);a.set(p.getKey(),p)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=ss();let c;const m=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Fu(e).ee({index:zw,range:m},((g,p,v)=>{const E=Jg(this.serializer,p);l.size()<a||E.largestBatchId===c?(l.set(E.getKey(),E),c=E.largestBatchId):v.done()})).next((()=>l))}St(e,t){return Fu(e).put((function(a,l,c){const[m,g,p]=Fb(l,c.mutation.key);return{userId:l,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Ac(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Fu(r){return Kt(r,pd)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{bt(e){return Kt(e,cy)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t==null?void 0:t.value;return i?xt.fromUint8Array(i):xt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(vt(e.integerValue));else if("doubleValue"in e){const i=vt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),pc(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=ks(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(js(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?Ww(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):vd(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):pe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){var c,m;const i=e.fields||{};this.Ft(t,53);const a=gl,l=((m=(c=i[a].arrayValue)==null?void 0:c.values)==null?void 0:m.length)||0;this.Ft(t,15),t.Mt(vt(l)),this.Ot(a,t),this.Ct(i[a],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),de.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Va.Kt=new Va;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=255;function HN(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function Kb(r){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=HN(255&i[l]);if(a+=c,c!==8)break}return a})(r);return Math.ceil(e/8)}class QN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),i=Kb(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=Kb(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Qo),this.sn(255)}_n(){this.an(Qo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Qo?(this.sn(Qo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Qo?(this.an(Qo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class KN{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class YN{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Gu{constructor(){this.cn=new QN,this.ln=new KN(this.cn),this.hn=new YN(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,t,i,a){this.Tn=e,this.In=t,this.En=i,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new Oa(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:zf(this.En),directionalValue:zf(this.dn),orderedDocumentKey:zf(t),documentKey:i.path.toArray()}}Vn(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function wr(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=Yb(r.En,e.En),t!==0?t:(t=Yb(r.dn,e.dn),t!==0?t:de.comparator(r.In,e.In)))}function Yb(r,e){for(let t=0;t<r.length&&t<e.length;++t){const i=r[t]-e[t];if(i!==0)return i}return r.length-e.length}function zf(r){return iw()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(r):r}function Xb(r){return typeof r!="string"?r:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(r)}class $b{constructor(e){this.mn=new st(((t,i)=>Tt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(be(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=gp(e);if(t!==void 0&&!this.wn(t))return!1;const i=Ia(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.wn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!a.has(m.field.canonicalString())){const g=i[l];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++l}for(;l<i.length;++l){const m=i[l];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let e=new st(Tt.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Of(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Of(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Of(i.field,i.dir==="asc"?0:1)));return new Kf(Kf.UNKNOWN_ID,this.collectionId,t,gc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(r){var t,i;if(be(r instanceof qe||r instanceof it,20012),r instanceof qe){if(r instanceof lS){const a=((i=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:i.map((l=>qe.create(r.field,"==",l))))||[];return it.create(a,"or")}return r}const e=r.filters.map((a=>FS(a)));return it.create(e,r.op)}function XN(r){if(r.getFilters().length===0)return[];const e=Op(FS(r));return be(GS(e),7391),Dp(e)||Vp(e)?[e]:e.getFilters()}function Dp(r){return r instanceof qe}function Vp(r){return r instanceof it&&my(r)}function GS(r){return Dp(r)||Vp(r)||(function(t){if(t instanceof it&&wp(t)){for(const i of t.getFilters())if(!Dp(i)&&!Vp(i))return!1;return!0}return!1})(r)}function Op(r){if(be(r instanceof qe||r instanceof it,34018),r instanceof qe)return r;if(r.filters.length===1)return Op(r.filters[0]);const e=r.filters.map((i=>Op(i)));let t=it.create(e,r.op);return t=td(t),GS(t)?t:(be(t instanceof it,64498),be(yl(t),40251),be(t.filters.length>1,57927),t.filters.reduce(((i,a)=>Ay(i,a))))}function Ay(r,e){let t;return be(r instanceof qe||r instanceof it,38388),be(e instanceof qe||e instanceof it,25473),t=r instanceof qe?e instanceof qe?(function(a,l){return it.create([a,l],"and")})(r,e):Zb(r,e):e instanceof qe?Zb(e,r):(function(a,l){if(be(a.filters.length>0&&l.filters.length>0,48005),yl(a)&&yl(l))return rS(a,l.getFilters());const c=wp(a)?a:l,m=wp(a)?l:a,g=c.filters.map((p=>Ay(p,m)));return it.create(g,"or")})(r,e),td(t)}function Zb(r,e){if(yl(e))return rS(e,r.getFilters());{const t=e.filters.map((i=>Ay(r,i)));return it.create(t,"or")}}function td(r){if(be(r instanceof qe||r instanceof it,11850),r instanceof qe)return r;const e=r.getFilters();if(e.length===1)return td(e[0]);if(iS(r))return r;const t=e.map((a=>td(a))),i=[];return t.forEach((a=>{a instanceof qe?i.push(a):a instanceof it&&(a.op===r.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:it.create(i,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.Cn=new xy}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve($n.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve($n.min())}updateCollectionGroup(e,t,i){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class xy{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new st(Le.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new st(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="IndexedDbIndexManager",Af=new Uint8Array(0);class ZN{constructor(e,t){this.databaseId=t,this.vn=new xy,this.Fn=new Ls((i=>Fa(i)),((i,a)=>Pc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:i,parent:yn(a)};return Wb(e).put(l)}return L.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[xw(t),""],!1,!0);return Wb(e).J(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(is(c.parent))}return i}))}addFieldIndex(e,t){const i=Hu(e),a=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=Yo(e);return l.next((m=>{c.put(Gb(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=Hu(e),a=Yo(e),l=Ko(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Hu(e),i=Ko(e),a=Yo(e);return t.Z().next((()=>i.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return L.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new $b(i).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=Ko(e);let a=!0;const l=new Map;return L.forEach(this.Mn(t),(c=>this.xn(e,c).next((m=>{a&&(a=!!m),l.set(c,m)})))).next((()=>{if(a){let c=Pe();const m=[];return L.forEach(l,((g,p)=>{ne(Jb,`Using index ${(function(se){return`id=${se.indexId}|cg=${se.collectionGroup}|f=${se.fields.map((ge=>`${ge.fieldPath}:${ge.kind}`)).join(",")}`})(g)} to execute ${Fa(t)}`);const v=(function(se,ge){const Se=gp(ge);if(Se===void 0)return null;for(const Te of Jf(se,Se.fieldPath))switch(Te.op){case"array-contains-any":return Te.value.arrayValue.values||[];case"array-contains":return[Te.value]}return null})(p,g),E=(function(se,ge){const Se=new Map;for(const Te of Ia(ge))for(const I of Jf(se,Te.fieldPath))switch(I.op){case"==":case"in":Se.set(Te.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return Se.set(Te.fieldPath.canonicalString(),I.value),Array.from(Se.values())}return null})(p,g),S=(function(se,ge){const Se=[];let Te=!0;for(const I of Ia(ge)){const R=I.kind===0?Cb(se,I.fieldPath,se.startAt):Db(se,I.fieldPath,se.startAt);Se.push(R.value),Te&&(Te=R.inclusive)}return new Lr(Se,Te)})(p,g),D=(function(se,ge){const Se=[];let Te=!0;for(const I of Ia(ge)){const R=I.kind===0?Db(se,I.fieldPath,se.endAt):Cb(se,I.fieldPath,se.endAt);Se.push(R.value),Te&&(Te=R.inclusive)}return new Lr(Se,Te)})(p,g),G=this.On(g,p,S),z=this.On(g,p,D),U=this.Nn(g,p,E),ie=this.Bn(g.indexId,v,G,S.inclusive,z,D.inclusive,U);return L.forEach(ie,(re=>i.Y(re,t.limit).next((se=>{se.forEach((ge=>{const Se=de.fromSegments(ge.documentKey);c.has(Se)||(c=c.add(Se),m.push(Se))}))}))))})).next((()=>m))}return L.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=XN(it.create(e.filters,"and")).map((i=>Ap(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,a,l,c,m){const g=(t!=null?t.length:1)*Math.max(i.length,l.length),p=g/(t!=null?t.length:1),v=[];for(let E=0;E<g;++E){const S=t?this.Ln(t[E/p]):Af,D=this.kn(e,S,i[E%p],a),G=this.qn(e,S,l[E%p],c),z=m.map((U=>this.kn(e,S,U,!0)));v.push(...this.createRange(D,G,z))}return v}kn(e,t,i,a){const l=new Oa(e,de.empty(),t,i);return a?l:l.An()}qn(e,t,i,a){const l=new Oa(e,de.empty(),t,i);return a?l.An():l}xn(e,t){const i=new $b(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const m of l)i.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(e,t){let i=2;const a=this.Mn(t);return L.forEach(a,(l=>this.xn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(g){let p=new st(Tt.comparator),v=!1;for(const E of g.filters)for(const S of E.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?v=!0:p=p.add(S.field));for(const E of g.orderBy)E.field.isKeyField()||(p=p.add(E.field));return p.size+(v?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}Qn(e,t){const i=new Gu;for(const a of Ia(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.Pn(a.kind);Va.Kt.Dt(l,c)}return i.un()}Ln(e){const t=new Gu;return Va.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Gu;return Va.Kt.Dt(qa(this.databaseId,t),i.Pn((function(l){const c=Ia(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let a=[];a.push(new Gu);let l=0;for(const c of Ia(e)){const m=i[l++];for(const g of a)if(this.Un(t,c.fieldPath)&&Ec(m))a=this.Kn(a,c,m);else{const p=g.Pn(c.kind);Va.Kt.Dt(m,p)}}return this.Wn(a)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const m of a){const g=new Gu;g.seed(m.un()),Va.Kt.Dt(c,g.Pn(t.kind)),l.push(g)}return l}Un(e,t){return!!e.filters.find((i=>i instanceof qe&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Hu(e),a=Yo(e);return(t?i.J(yp,IDBKeyRange.bound(t,t)):i.J()).next((l=>{const c=[];return L.forEach(l,(m=>a.get([m.indexId,this.uid]).next((g=>{c.push((function(v,E){const S=E?new gc(E.sequenceNumber,new $n(Ka(E.readTime),new de(is(E.documentKey)),E.largestBatchId)):gc.empty(),D=v.fields.map((([G,z])=>new Of(Tt.fromServerFormat(G),z)));return new Kf(v.indexId,v.collectionGroup,D,S)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:De(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=Hu(e),l=Yo(e);return this.Gn(e).next((c=>a.J(yp,IDBKeyRange.bound(t,t)).next((m=>L.forEach(m,(g=>l.put(Gb(g.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return L.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((m=>(i.set(a.collectionGroup,m),L.forEach(m,(g=>this.zn(e,a,g).next((p=>{const v=this.jn(l,g);return p.isEqual(v)?L.resolve():this.Jn(e,l,g,p,v)})))))))}))}Hn(e,t,i,a){return Ko(e).put(a.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,a){return Ko(e).delete(a.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const a=Ko(e);let l=new st(wr);return a.ee({index:Bw,range:IDBKeyRange.only([i.indexId,this.uid,zf(this.$n(i,t))])},((c,m)=>{l=l.add(new Oa(i.indexId,t,Xb(m.arrayValue),Xb(m.directionalValue)))})).next((()=>l))}jn(e,t){let i=new st(wr);const a=this.Qn(t,e);if(a==null)return i;const l=gp(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Ec(c))for(const m of c.arrayValue.values||[])i=i.add(new Oa(t.indexId,e.key,this.Ln(m),a))}else i=i.add(new Oa(t.indexId,e.key,Af,a));return i}Jn(e,t,i,a,l){ne(Jb,"Updating index entries for document '%s'",t.key);const c=[];return(function(g,p,v,E,S){const D=g.getIterator(),G=p.getIterator();let z=Ho(D),U=Ho(G);for(;z||U;){let ie=!1,re=!1;if(z&&U){const se=v(z,U);se<0?re=!0:se>0&&(ie=!0)}else z!=null?re=!0:ie=!0;ie?(E(U),U=Ho(G)):re?(S(z),z=Ho(D)):(z=Ho(D),U=Ho(G))}})(a,l,wr,(m=>{c.push(this.Hn(e,t,i,m))}),(m=>{c.push(this.Yn(e,t,i,m))})),L.waitFor(c)}Gn(e){let t=1;return Yo(e).ee({index:Lw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,m)=>wr(c,m))).filter(((c,m,g)=>!m||wr(c,g[m-1])!==0));const a=[];a.push(e);for(const c of i){const m=wr(c,e),g=wr(c,t);if(m===0)a[0]=e.An();else if(m>0&&g<0)a.push(c),a.push(c.An());else if(g>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const m=a[c].Vn(this.uid,Af,de.empty()),g=a[c+1].Vn(this.uid,Af,de.empty());l.push(IDBKeyRange.bound(m,g))}return l}Zn(e,t){return wr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(eE)}getMinOffset(e,t){return L.mapArray(this.Mn(t),(i=>this.xn(e,i).next((a=>a||pe(44426))))).next(eE)}}function Wb(r){return Kt(r,vc)}function Ko(r){return Kt(r,rc)}function Hu(r){return Kt(r,uy)}function Yo(r){return Kt(r,sc)}function eE(r){be(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;ay(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new $n(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HS=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(r,e,t){const i=r.store(Ii),a=r.store(hl),l=[],c=IDBKeyRange.only(t.batchId);let m=0;const g=i.ee({range:c},((v,E,S)=>(m++,S.delete())));l.push(g.next((()=>{be(m===1,47070,{batchId:t.batchId})})));const p=[];for(const v of t.mutations){const E=kw(e,v.key.path,t.batchId);l.push(a.delete(E)),p.push(v.key)}return L.waitFor(l).next((()=>p))}function nd(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw pe(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(HS,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);class wd{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Xn={}}static wt(e,t,i,a){be(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new wd(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sr(e).ee({index:Pa,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=tl(e),c=Sr(e);return c.add({}).next((m=>{be(typeof m=="number",49019);const g=new vy(m,t,i,a),p=(function(D,G,z){const U=z.baseMutations.map((re=>Ac(D.yt,re))),ie=z.mutations.map((re=>Ac(D.yt,re)));return{userId:G,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:U,mutations:ie}})(this.serializer,this.userId,g),v=[];let E=new st(((S,D)=>De(S.canonicalString(),D.canonicalString())));for(const S of a){const D=kw(this.userId,S.key.path,m);E=E.add(S.key.path.popLast()),v.push(c.put(p)),v.push(l.put(D,D2))}return E.forEach((S=>{v.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),L.waitFor(v).next((()=>g))}))}lookupMutationBatch(e,t){return Sr(e).get(t).next((i=>i?(be(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),Da(this.serializer,i)):null))}er(e,t){return this.Xn[t]?L.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Sr(e).ee({index:Pa,range:a},((c,m,g)=>{m.userId===this.userId&&(be(m.batchId>=i,47524,{tr:i}),l=Da(this.serializer,m)),g.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Dr;return Sr(e).ee({index:Pa,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Dr],[this.userId,Number.POSITIVE_INFINITY]);return Sr(e).J(Pa,t).next((i=>i.map((a=>Da(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Mf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return tl(e).ee({range:a},((c,m,g)=>{const[p,v,E]=c,S=is(v);if(p===this.userId&&t.path.isEqual(S))return Sr(e).get(E).next((D=>{if(!D)throw pe(61480,{nr:c,batchId:E});be(D.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:D.userId,batchId:E}),l.push(Da(this.serializer,D))}));g.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new st(De);const a=[];return t.forEach((l=>{const c=Mf(this.userId,l.path),m=IDBKeyRange.lowerBound(c),g=tl(e).ee({range:m},((p,v,E)=>{const[S,D,G]=p,z=is(D);S===this.userId&&l.path.isEqual(z)?i=i.add(G):E.done()}));a.push(g)})),L.waitFor(a).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Mf(this.userId,i),c=IDBKeyRange.lowerBound(l);let m=new st(De);return tl(e).ee({range:c},((g,p,v)=>{const[E,S,D]=g,G=is(S);E===this.userId&&i.isPrefixOf(G)?G.length===a&&(m=m.add(D)):v.done()})).next((()=>this.rr(e,m)))}rr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(Sr(e).get(l).next((c=>{if(c===null)throw pe(35274,{batchId:l});be(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(Da(this.serializer,c))})))})),L.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return QS(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),L.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return L.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return tl(e).ee({range:i},((l,c,m)=>{if(l[0]===this.userId){const g=is(l[1]);a.push(g)}else m.done()})).next((()=>{be(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return KS(e,this.userId,t)}_r(e){return YS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Dr,lastStreamToken:""}))}}function KS(r,e,t){const i=Mf(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return tl(r).ee({range:l,X:!0},((m,g,p)=>{const[v,E,S]=m;v===e&&E===a&&(c=!0),p.done()})).next((()=>c))}function Sr(r){return Kt(r,Ii)}function tl(r){return Kt(r,hl)}function YS(r){return Kt(r,yc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ya(0)}static cr(){return new Ya(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Ya(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>we.fromTimestamp(new We(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Xo(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(be(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return Xo(e).ee(((c,m)=>{const g=Wu(m);g.sequenceNumber<=t&&i.get(g.targetId)===null&&(a++,l.push(this.removeTargetData(e,g)))})).next((()=>L.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Xo(e).ee(((i,a)=>{const l=Wu(a);t(l)}))}lr(e){return nE(e).get($f).next((t=>(be(t!==null,2888),t)))}hr(e,t){return nE(e).put($f,t)}Pr(e,t){return Xo(e).put(qS(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Fa(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Xo(e).ee({range:a,index:Uw},((c,m,g)=>{const p=Wu(m);Pc(t,p.target)&&(l=p,g.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=xr(e);return t.forEach((c=>{const m=yn(c.path);a.push(l.put({targetId:i,path:m})),a.push(this.referenceDelegate.addReference(e,i,c))})),L.waitFor(a)}removeMatchingKeys(e,t,i){const a=xr(e);return L.forEach(t,(l=>{const c=yn(l.path);return L.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=xr(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=xr(e);let l=Pe();return a.ee({range:i,X:!0},((c,m,g)=>{const p=is(c[1]),v=new de(p);l=l.add(v)})).next((()=>l))}containsKey(e,t){const i=yn(t.path),a=IDBKeyRange.bound([i],[xw(i)],!1,!0);let l=0;return xr(e).ee({index:ly,X:!0,range:a},(([c,m],g,p)=>{c!==0&&(l++,p.done())})).next((()=>l>0))}At(e,t){return Xo(e).get(t).next((i=>i?Wu(i):null))}}function Xo(r){return Kt(r,fl)}function nE(r){return Kt(r,Ua)}function xr(r){return Kt(r,dl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="LruGarbageCollector",WN=1048576;function sE([r,e],[t,i]){const a=De(r,t);return a===0?De(e,i):a}class eC{constructor(e){this.Ir=e,this.buffer=new st(sE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();sE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class XS{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(iE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hr(t)?ne(iE,"Ignoring IndexedDB error during garbage collection: ",t):await Gr(t)}await this.Vr(3e5)}))}}class tC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(kn.ce);const i=new eC(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(tE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,c,m,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(i=E,m=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(p=Date.now(),Zo()<=Ge.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(m-c)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function $S(r,e){return new tC(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t){this.db=e,this.garbageCollector=$S(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,a)=>t(a)))}addReference(e,t,i){return xf(e,i)}removeReference(e,t,i){return xf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return xf(e,t)}br(e,t){return(function(a,l){let c=!1;return YS(a).te((m=>KS(a,m,l).next((g=>(g&&(c=!0),L.resolve(!g)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,((c,m)=>{if(m<=t){const g=this.br(e,c).next((p=>{if(!p)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,we.min()),xr(e).delete((function(E){return[0,yn(E.path)]})(c)))))}));a.push(g)}})).next((()=>L.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return xf(e,t)}Sr(e,t){const i=xr(e);let a,l=kn.ce;return i.ee({index:ly},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(l!==kn.ce&&t(new de(is(a)),l),l=p,a=g):l=kn.ce})).next((()=>{l!==kn.ce&&t(new de(is(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xf(r,e){return xr(r).put((function(i,a){return{targetId:0,path:yn(i.path),sequenceNumber:a}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(){this.changes=new Ls((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?L.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return xa(e).put(i)}removeEntry(e,t,i){return xa(e).delete((function(l,c){const m=l.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],ed(c),m[m.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=gt.newInvalidDocument(t);return xa(e).ee({index:Pf,range:IDBKeyRange.only(Qu(t))},((a,l)=>{i=this.Cr(t,l)})).next((()=>i))}vr(e,t){let i={size:0,document:gt.newInvalidDocument(t)};return xa(e).ee({index:Pf,range:IDBKeyRange.only(Qu(t))},((a,l)=>{i={document:this.Cr(t,l),size:nd(l)}})).next((()=>i))}getEntries(e,t){let i=Un();return this.Fr(e,t,((a,l)=>{const c=this.Cr(a,l);i=i.insert(a,c)})).next((()=>i))}Mr(e,t){let i=Un(),a=new ft(de.comparator);return this.Fr(e,t,((l,c)=>{const m=this.Cr(l,c);i=i.insert(l,m),a=a.insert(l,nd(c))})).next((()=>({documents:i,Or:a})))}Fr(e,t,i){if(t.isEmpty())return L.resolve();let a=new st(oE);t.forEach((g=>a=a.add(g)));const l=IDBKeyRange.bound(Qu(a.first()),Qu(a.last())),c=a.getIterator();let m=c.getNext();return xa(e).ee({index:Pf,range:l},((g,p,v)=>{const E=de.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&oE(m,E)<0;)i(m,null),m=c.getNext();m&&m.isEqual(E)&&(i(m,p),m=c.hasNext()?c.getNext():null),m?v.j(Qu(m)):v.done()})).next((()=>{for(;m;)i(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),ed(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xa(e).J(IDBKeyRange.bound(m,g,!0)).next((p=>{l==null||l.incrementDocumentReadCount(p.length);let v=Un();for(const E of p){const S=this.Cr(de.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);S.isFoundDocument()&&(jc(t,S)||a.has(S.key))&&(v=v.insert(S.key,S))}return v}))}getAllFromCollectionGroup(e,t,i,a){let l=Un();const c=aE(t,i),m=aE(t,$n.max());return xa(e).ee({index:jw,range:IDBKeyRange.bound(c,m,!0)},((g,p,v)=>{const E=this.Cr(de.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(E.key,E),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new sC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return rE(e).get(pp).next((t=>(be(!!t,20021),t)))}Dr(e,t){return rE(e).put(pp,t)}Cr(e,t){if(t){const i=qN(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(we.min())))return i}return gt.newInvalidDocument(e)}}function JS(r){return new iC(r)}class sC extends ZS{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ls((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new st(((l,c)=>De(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const m=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,m.readTime)),c.isValidDocument()){const g=qb(this.Nr.serializer,c);a=a.add(l.path.popLast());const p=nd(g);i+=p-m.size,t.push(this.Nr.addEntry(e,l,g))}else if(i-=m.size,this.trackRemovals){const g=qb(this.Nr.serializer,c.convertToNoDocument(we.min()));t.push(this.Nr.addEntry(e,l,g))}})),a.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,i)),L.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:a})=>(a.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function rE(r){return Kt(r,_c)}function xa(r){return Kt(r,Xf)}function Qu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aE(r,e){const t=e.documentKey.path.toArray();return[r,ed(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function oE(r,e){const t=r.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=De(t[l],i[l]),a)return a;return a=De(t.length,i.length),a||(a=De(t[t.length-2],i[i.length-2]),a||De(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&lc(i.mutation,a,jn.empty(),We.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Pe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Pe()){const a=ss();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Zu();return l.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=ss();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Pe())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,i,a){let l=Un();const c=oc(),m=(function(){return oc()})();return t.forEach(((g,p)=>{const v=i.get(p.key);a.has(p.key)&&(v===void 0||v.mutation instanceof Bs)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),lc(v.mutation,p,v.mutation.getFieldMask(),We.now())):c.set(p.key,jn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>m.set(p,new rC(v,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=oc();let a=new ft(((c,m)=>c-m)),l=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=i.get(g)||jn.empty();v=m.applyToLocalView(p,v),i.set(g,v);const E=(a.get(m.batchId)||Pe()).add(g);a=a.insert(m.batchId,E)}))})).next((()=>{const c=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,v=g.value,E=gS();v.forEach((S=>{if(!l.has(S)){const D=ES(t.get(S),i.get(S));D!==null&&E.set(S,D),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return L.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(c){return de.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):L.resolve(ss());let m=cl,g=l;return c.next((p=>L.forEach(p,((v,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),l.get(v)?L.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,Pe()))).next((v=>({batchId:m,changes:mS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next((i=>{let a=Zu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Zu();return this.indexManager.getCollectionParents(e,l).next((m=>L.forEach(m,(g=>{const p=(function(E,S){return new Us(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((v=>{v.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((g,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,gt.newInvalidDocument(v)))}));let m=Zu();return c.forEach(((g,p)=>{const v=l.get(g);v!==void 0&&lc(v.mutation,p,jn.empty(),We.now()),jc(t,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return L.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ot(a.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:Sy(a.bundledQuery),readTime:Ot(a.readTime)}})(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.overlays=new ft(de.comparator),this.qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ss();return L.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),L.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),L.resolve()}getOverlaysForCollection(e,t,i){const a=ss(),l=t.length+1,c=new de(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>i&&a.set(g.getKey(),g)}return L.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new ft(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let v=l.get(p.largestBatchId);v===null&&(v=ss(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const m=ss(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>m.set(p,v))),!(m.size()>=a)););return L.resolve(m)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new by(t,i));let l=this.qr.get(t);l===void 0&&(l=Pe(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(){this.Qr=new st(Zt.$r),this.Ur=new st(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Zt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Zt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new de(new Le([])),i=new Zt(t,e),a=new Zt(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new de(new Le([])),i=new Zt(t,e),a=new Zt(t,e+1);let l=Pe();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Zt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Zt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return de.comparator(e.key,t.key)||De(e.Yr,t.Yr)}static Kr(e,t){return De(e.Yr,t.Yr)||de.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new st(Zt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new vy(l,t,i,a);this.mutationQueue.push(c);for(const m of a)this.Zr=this.Zr.add(new Zt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return L.resolve(c)}lookupMutationBatch(e,t){return L.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return L.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Dr:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Zt(t,0),a=new Zt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const m=this.Xr(c.Yr);l.push(m)})),L.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new st(De);return t.forEach((a=>{const l=new Zt(a,0),c=new Zt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(m=>{i=i.add(m.Yr)}))})),L.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;de.isDocumentKey(l)||(l=l.child(""));const c=new Zt(new de(l),0);let m=new st(De);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(m=m.add(g.Yr)),!0)}),c),L.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){be(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return L.forEach(t.mutations,(a=>{const l=new Zt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Zt(t,0),a=this.Zr.firstAfterOrEqual(i);return L.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.ri=e,this.docs=(function(){return new ft(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return L.resolve(i?i.document.mutableCopy():gt.newInvalidDocument(t))}getEntries(e,t){let i=Un();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():gt.newInvalidDocument(a))})),L.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Un();const c=t.path,m=new de(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||ay(Dw(v),i)<=0||(a.has(v.key)||jc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return L.resolve(l)}getAllFromCollectionGroup(e,t,i,a){pe(9500)}ii(e,t){return L.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new hC(this)}getSize(e){return L.resolve(this.size)}}class hC extends ZS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),L.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.persistence=e,this.si=new Ls((t=>Fa(t)),Pc),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new Ry,this.targetCount=0,this.ai=Ya.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),L.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ya(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Pr(t),L.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),L.waitFor(l).next((()=>a))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return L.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),L.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),L.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return L.resolve(i)}containsKey(e,t){return L.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,t){this.ui={},this.overlays={},this.ci=new kn(0),this.li=!1,this.li=!0,this.hi=new lC,this.referenceDelegate=e(this),this.Pi=new fC(this),this.indexManager=new $N,this.remoteDocumentCache=(function(a){return new cC(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new zS(t),this.Ii=new aC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new uC(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ne("MemoryPersistence","Starting transaction:",e);const a=new dC(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return L.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class dC extends Ow{constructor(e){super(),this.currentSequenceNumber=e}}class Sd{constructor(e){this.persistence=e,this.Ri=new Ry,this.Vi=null}static mi(e){return new Sd(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),L.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,(i=>{const a=de.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,we.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return L.or([()=>L.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class id{constructor(e,t){this.persistence=e,this.pi=new Ls((i=>yn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=$S(this,t)}static mi(e,t){return new id(e,t)}Ei(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return L.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?L.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((m=>{m||(i++,l.removeEntry(c,we.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),L.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jf(e.data.value)),t}br(e,t,i){return L.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return L.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.serializer=e}k(e,t,i,a){const l=new dd("createOrUpgrade",t);i<1&&a>=1&&((function(g){g.createObjectStore(Mc)})(e),(function(g){g.createObjectStore(yc,{keyPath:C2}),g.createObjectStore(Ii,{keyPath:_b,autoIncrement:!0}).createIndex(Pa,vb,{unique:!0}),g.createObjectStore(hl)})(e),lE(e),(function(g){g.createObjectStore(Na)})(e));let c=L.resolve();return i<3&&a>=3&&(i!==0&&((function(g){g.deleteObjectStore(dl),g.deleteObjectStore(fl),g.deleteObjectStore(Ua)})(e),lE(e)),c=c.next((()=>(function(g){const p=g.store(Ua),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:we.min().toTimestamp(),targetCount:0};return p.put($f,v)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(g,p){return p.store(Ii).J().next((E=>{g.deleteObjectStore(Ii),g.createObjectStore(Ii,{keyPath:_b,autoIncrement:!0}).createIndex(Pa,vb,{unique:!0});const S=p.store(Ii),D=E.map((G=>S.put(G)));return L.waitFor(D)}))})(e,l)))),c=c.next((()=>{(function(g){g.createObjectStore(ml,{keyPath:L2})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.yi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(g){g.createObjectStore(_c)})(e),this.wi(l))))),i<7&&a>=7&&(c=c.next((()=>this.Si(l)))),i<8&&a>=8&&(c=c.next((()=>this.bi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.Di(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(md,{keyPath:B2})})(e),(function(g){g.createObjectStore(gd,{keyPath:z2})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(pd,{keyPath:Y2});p.createIndex(_p,X2,{unique:!1}),p.createIndex(zw,$2,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(Xf,{keyPath:V2});p.createIndex(Pf,O2),p.createIndex(jw,M2)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(Na)))),i<14&&a>=14&&(c=c.next((()=>this.Fi(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(g){g.createObjectStore(uy,{keyPath:q2,autoIncrement:!0}).createIndex(yp,F2,{unique:!1}),g.createObjectStore(sc,{keyPath:G2}).createIndex(Lw,H2,{unique:!1}),g.createObjectStore(rc,{keyPath:Q2}).createIndex(Bw,K2,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(sc).clear()})).next((()=>{t.objectStore(rc).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(cy,{keyPath:Z2})})(e)}))),i<18&&a>=18&&iw()&&(c=c.next((()=>{t.objectStore(sc).clear()})).next((()=>{t.objectStore(rc).clear()}))),c}wi(e){let t=0;return e.store(Na).ee(((i,a)=>{t+=nd(a)})).next((()=>{const i={byteSize:t};return e.store(_c).put(pp,i)}))}yi(e){const t=e.store(yc),i=e.store(Ii);return t.J().next((a=>L.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Dr],[l.userId,l.lastAcknowledgedBatchId]);return i.J(Pa,c).next((m=>L.forEach(m,(g=>{be(g.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=Da(this.serializer,g);return QS(e,l.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(dl),i=e.store(Na);return e.store(Ua).get($f).next((a=>{const l=[];return i.ee(((c,m)=>{const g=new Le(c),p=(function(E){return[0,yn(E)]})(g);l.push(t.get(p).next((v=>v?L.resolve():(E=>t.put({targetId:0,path:yn(E),sequenceNumber:a.highestListenSequenceNumber}))(g))))})).next((()=>L.waitFor(l)))}))}bi(e,t){e.createObjectStore(vc,{keyPath:U2});const i=t.store(vc),a=new xy,l=c=>{if(a.add(c)){const m=c.lastSegment(),g=c.popLast();return i.put({collectionId:m,parent:yn(g)})}};return t.store(Na).ee({X:!0},((c,m)=>{const g=new Le(c);return l(g.popLast())})).next((()=>t.store(hl).ee({X:!0},(([c,m,g],p)=>{const v=is(m);return l(v.popLast())}))))}Di(e){const t=e.store(fl);return t.ee(((i,a)=>{const l=Wu(a),c=qS(this.serializer,l);return t.put(c)}))}Ci(e,t){const i=t.store(Na),a=[];return i.ee(((l,c)=>{const m=t.store(Xf),g=(function(E){return E.document?new de(Le.fromString(E.document.name).popFirst(5)):E.noDocument?de.fromSegments(E.noDocument.path):E.unknownDocument?de.fromSegments(E.unknownDocument.path):pe(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(m.put(p))})).next((()=>L.waitFor(a)))}Fi(e,t){const i=t.store(Ii),a=JS(this.serializer),l=new Iy(Sd.mi,this.serializer.yt);return i.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??Pe();Da(this.serializer,g).keys().forEach((v=>p=p.add(v))),m.set(g.userId,p)})),L.forEach(m,((g,p)=>{const v=new Jt(p),E=Ed.wt(this.serializer,v),S=l.getIndexManager(v),D=wd.wt(v,this.serializer,S,l.referenceDelegate);return new WS(a,D,E,S).recalculateAndSaveOverlaysForDocumentKeys(new vp(t,kn.ce),g).next()}))}))}}function lE(r){r.createObjectStore(dl,{keyPath:k2}).createIndex(ly,j2,{unique:!0}),r.createObjectStore(fl,{keyPath:"targetId"}).createIndex(Uw,P2,{unique:!0}),r.createObjectStore(Ua)}const Ar="IndexedDbPersistence",Wg=18e5,ep=5e3,tp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",eA="main";class Ny{constructor(e,t,i,a,l,c,m,g,p,v,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=l,this.window=c,this.document=m,this.xi=p,this.Oi=v,this.Ni=E,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=S=>Promise.resolve(),!Ny.v())throw new te(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nC(this,a),this.$i=t+eA,this.serializer=new zS(g),this.Ui=new rs(this.$i,this.Ni,new mC(this.serializer)),this.hi=new GN,this.Pi=new JN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=JS(this.serializer),this.Ii=new FN,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,v===!1&&Vt(Ar,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te(Q.FAILED_PRECONDITION,tp);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new kn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Rf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Hr(e))return ne(Ar,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne(Ar,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Ku(e).get(Go).next((t=>L.resolve(this.es(t))))}ts(e){return Rf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Wg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Kt(t,ml);return i.J().next((a=>{const l=this.ss(a,Wg),c=a.filter((m=>l.indexOf(m)===-1));return L.forEach(c,(m=>i.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Ku(e).get(Go).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,ep)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new te(Q.FAILED_PRECONDITION,tp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rf(e).J().next((i=>this.ss(i,ep).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,m=this.networkEnabled===a.networkEnabled;if(l||c&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ne(Ar,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Mc,ml],(e=>{const t=new vp(e,kn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Rf(e).J().next((t=>this.ss(t,Wg).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return wd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ZN(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Ed.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){ne(Ar,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(g){return g===18?eN:g===17?Hw:g===16?W2:g===15?hy:g===14?Gw:g===13?Fw:g===12?J2:g===11?qw:void pe(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,a,l,(m=>(c=new vp(m,this.ci?this.ci.next():kn.ce),t==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw Vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new te(Q.FAILED_PRECONDITION,Vw);return i(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>i(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(e){return Ku(e).get(Go).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,ep)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new te(Q.FAILED_PRECONDITION,tp)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ku(e).put(Go,t)}static v(){return rs.v()}Zi(e){const t=Ku(e);return t.get(Go).next((i=>this.es(i)?(ne(Ar,"Releasing primary lease."),t.delete(Go)):L.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Vt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;nw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const i=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return ne(Ar,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Vt(Ar,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Vt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ku(r){return Kt(r,Mc)}function Rf(r){return Kt(r,ml)}function Cy(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=Pe(),a=Pe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Dy(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nw()?8:Mw(Hf())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new gC;return this.Ss(e,t,c).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(Zo()<=Ge.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Zo()<=Ge.DEBUG&&ne("QueryEngine","Query:",Jo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(Zo()<=Ge.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(t))):L.resolve())}ys(e,t){if(Vb(t))return L.resolve(null);let i=xn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Wf(t,null,"F"),i=xn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Pe(...l);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,Wf(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,i,a){return Vb(t)||a.isEqual(we.min())?L.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,a)?L.resolve(null):(Zo()<=Ge.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Jo(t)),this.vs(e,c,t,Cw(a,cl)).next((m=>m)))}))}Ds(e,t){let i=new st(fS(e));return t.forEach(((a,l)=>{jc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return Zo()<=Ge.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Jo(t)),this.ps.getDocumentsMatchingQuery(e,t,$n.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="LocalStore",pC=3e8;class yC{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new ft(De),this.xs=new Ls((l=>Fa(l)),Pc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function nA(r,e,t,i){return new yC(r,e,t,i)}async function iA(r,e){const t=me(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],m=[];let g=Pe();for(const p of a){c.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of l){m.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(i,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function _C(r,e){const t=me(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,v){const E=p.batch,S=E.keys();let D=L.resolve();return S.forEach((G=>{D=D.next((()=>v.getEntry(g,G))).next((z=>{const U=p.docVersions.get(G);be(U!==null,48541),z.version.compareTo(U)<0&&(E.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),v.addEntry(z)))}))})),D.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=Pe();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function sA(r){const e=me(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function vC(r,e){const t=me(r),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const m=[];e.targetChanges.forEach(((v,E)=>{const S=a.get(E);if(!S)return;m.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let D=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?D=D.withResumeToken(xt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):v.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(v.resumeToken,i)),a=a.insert(E,D),(function(z,U,ie){return z.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=pC?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(S,D,v)&&m.push(t.Pi.updateTargetData(l,D))}));let g=Un(),p=Pe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),m.push(rA(l,c,e.documentUpdates).next((v=>{g=v.ks,p=v.qs}))),!i.isEqual(we.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));m.push(v)}return L.waitFor(m).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.Ms=a,l)))}function rA(r,e,t){let i=Pe(),a=Pe();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=Un();return t.forEach(((m,g)=>{const p=l.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):ne(Vy,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:a}}))}function TC(r,e){const t=me(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Dr),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function bl(r,e){const t=me(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,L.resolve(a)):t.Pi.allocateTargetId(i).next((c=>(a=new Vs(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function El(r,e,t){const i=me(r),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Hr(c))throw c;ne(Vy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function sd(r,e,t){const i=me(r);let a=we.min(),l=Pe();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,v){const E=me(g),S=E.xs.get(v);return S!==void 0?L.resolve(E.Ms.get(S)):E.Pi.getTargetData(p,v)})(i,c,xn(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?a:we.min(),t?l:Pe()))).next((m=>(lA(i,hS(e),m),{documents:m,Qs:l})))))}function aA(r,e){const t=me(r),i=me(t.Pi),a=t.Ms.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>i.At(l,e).next((c=>c?c.target:null))))}function oA(r,e){const t=me(r),i=t.Os.get(e)||we.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.Ns.getAllFromCollectionGroup(a,e,Cw(i,cl),Number.MAX_SAFE_INTEGER))).then((a=>(lA(t,e,a),a)))}function lA(r,e,t){let i=r.Os.get(e)||we.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}async function bC(r,e,t,i){const a=me(r);let l=Pe(),c=Un();for(const p of t){const v=e.$s(p.metadata.name);p.document&&(l=l.add(v));const E=e.Us(p);E.setReadTime(e.Ks(p.metadata.readTime)),c=c.insert(v,E)}const m=a.Ns.newChangeBuffer({trackRemovals:!0}),g=await bl(a,(function(v){return xn(Nl(Le.fromString(`__bundle__/docs/${v}`)))})(i));return a.persistence.runTransaction("Apply bundle documents","readwrite",(p=>rA(p,m,c).next((v=>(m.apply(p),v))).next((v=>a.Pi.removeMatchingKeysForTargetId(p,g.targetId).next((()=>a.Pi.addMatchingKeys(p,l,g.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(p,v.ks,v.qs))).next((()=>v.ks))))))}async function EC(r,e,t=Pe()){const i=await bl(r,xn(Sy(e.bundledQuery))),a=me(r);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const c=Ot(e.readTime);if(i.snapshotVersion.compareTo(c)>=0)return a.Ii.saveNamedQuery(l,e);const m=i.withResumeToken(xt.EMPTY_BYTE_STRING,c);return a.Ms=a.Ms.insert(m.targetId,m),a.Pi.updateTargetData(l,m).next((()=>a.Pi.removeMatchingKeysForTargetId(l,i.targetId))).next((()=>a.Pi.addMatchingKeys(l,t,i.targetId))).next((()=>a.Ii.saveNamedQuery(l,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="firestore_clients";function uE(r,e){return`${uA}_${r}_${e}`}const cA="firestore_mutations";function cE(r,e,t){let i=`${cA}_${r}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const hA="firestore_targets";function np(r,e){return`${hA}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="SharedClientState";class rd{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static Ws(e,t,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new te(a.error.code,a.error.message))),c?new rd(e,t,a.state,l):(Vt(ts,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uc{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new te(i.error.code,i.error.message))),l?new uc(e,i.state,a):(Vt(ts,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ad{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=py();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=Pw(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new ad(e,l):(Vt(ts,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Oy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Oy(t.clientId,t.onlineState):(Vt(ts,`Failed to parse online state: ${e}`),null)}}class Mp{constructor(){this.activeTargetIds=py()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ip{constructor(e,t,i,a,l){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ft(De),this.started=!1,this.Xs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.eo=uE(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Mp),this.ro=new RegExp(`^${uA}_${c}_([^_]*)$`),this.io=new RegExp(`^${cA}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${hA}_${c}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const a=this.getItem(uE(this.persistenceKey,i));if(a){const l=ad.Ws(i,a);l&&(this.Zs=this.Zs.insert(l.clientId,l))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(np(this.persistenceKey,e));if(a){const l=uc.Ws(e,a);l&&(i=l.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(np(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((a=>{this.Po(a)})),this.currentUser=e,i.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ne(ts,"READ",e,t),t}setItem(e,t){ne(ts,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ne(ts,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ne(ts,"EVENT",t.key,t.newValue),t.key===this.eo)return void Vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(l){let c=kn.ce;if(l!=null)try{const m=JSON.parse(l);be(typeof m=="number",30636,{So:l}),c=m}catch(m){Vt(ts,"Failed to read sequence number from WebStorage",m)}return c})(t.newValue);i!==kn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((a=>this.syncEngine.Do(a))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const a=new rd(this.currentUser,e,t,i),l=cE(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Gs())}Po(e){const t=cE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const a=np(this.persistenceKey,e),l=new uc(e,t,i);this.setItem(a,l.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return ad.Ws(i,t)}fo(e,t){const i=this.io.exec(e),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return rd.Ws(new Jt(l),a,t)}yo(e,t){const i=this.so.exec(e),a=Number(i[1]);return uc.Ws(a,t)}uo(e){return Oy.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ne(ts,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),a=this.lo(this.Zs),l=this.lo(i),c=[],m=[];return l.forEach((g=>{a.has(g)||c.push(g)})),a.forEach((g=>{l.has(g)||m.push(g)})),this.syncEngine.Fo(c,m).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=py();return e.forEach(((i,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class fA{constructor(){this.Mo=new Mp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mp,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="ConnectivityMonitor";class fE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(hE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(hE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If=null;function Pp(){return If===null?If=(function(){return 268435456+Math.round(2147483648*Math.random())})():If++,"0x"+If.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="RestConnection",SC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Tp?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const c=Pp(),m=this.zo(e,t.toUriEncodedString());ne(sp,`Sending RPC '${e}' ${c}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,l);const{host:p}=new URL(m),v=Dc(p);return this.Jo(e,m,g,i,v).then((E=>(ne(sp,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw us(sp,`RPC '${e}' ${c} failed with error: `,E,"url: ",m,"request:",i),E}))}Ho(e,t,i,a,l,c){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Il})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=SC[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class RC extends AC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const c=Pp();return new Promise(((m,g)=>{const p=new vw;p.setWithCredentials(!0),p.listenOnce(Tw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Vf.NO_ERROR:const E=p.getResponseJson();ne(dn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),m(E);break;case Vf.TIMEOUT:ne(dn,`RPC '${e}' ${c} timed out`),g(new te(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Vf.HTTP_ERROR:const S=p.getStatus();if(ne(dn,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let D=p.getResponseJson();Array.isArray(D)&&(D=D[0]);const G=D==null?void 0:D.error;if(G&&G.status&&G.message){const z=(function(ie){const re=ie.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(re)>=0?re:Q.UNKNOWN})(G.status);g(new te(z,G.message))}else g(new te(Q.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new te(Q.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ne(dn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);ne(dn,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",v,i,15)}))}T_(e,t,i){const a=Pp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ww(),m=Ew(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const v=l.join("");ne(dn,`Creating RPC '${e}' stream ${a}: ${v}`,g);const E=c.createWebChannel(v,g);this.I_(E);let S=!1,D=!1;const G=new xC({Yo:U=>{D?ne(dn,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(S||(ne(dn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),S=!0),ne(dn,`RPC '${e}' stream ${a} sending:`,U),E.send(U))},Zo:()=>E.close()}),z=(U,ie,re)=>{U.listen(ie,(se=>{try{re(se)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return z(E,$u.EventType.OPEN,(()=>{D||(ne(dn,`RPC '${e}' stream ${a} transport opened.`),G.o_())})),z(E,$u.EventType.CLOSE,(()=>{D||(D=!0,ne(dn,`RPC '${e}' stream ${a} transport closed`),G.a_(),this.E_(E))})),z(E,$u.EventType.ERROR,(U=>{D||(D=!0,us(dn,`RPC '${e}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),G.a_(new te(Q.UNAVAILABLE,"The operation could not be completed")))})),z(E,$u.EventType.MESSAGE,(U=>{var ie;if(!D){const re=U.data[0];be(!!re,16349);const se=re,ge=(se==null?void 0:se.error)||((ie=se[0])==null?void 0:ie.error);if(ge){ne(dn,`RPC '${e}' stream ${a} received error:`,ge);const Se=ge.status;let Te=(function(N){const P=Ft[N];if(P!==void 0)return AS(P)})(Se),I=ge.message;Te===void 0&&(Te=Q.INTERNAL,I="Unknown error status: "+Se+" with message "+ge.message),D=!0,G.a_(new te(Te,I)),E.close()}else ne(dn,`RPC '${e}' stream ${a} received:`,re),G.u_(re)}})),z(m,bw.STAT_EVENT,(U=>{U.stat===dp.PROXY?ne(dn,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===dp.NOPROXY&&ne(dn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{G.__()}),0),G}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(){return typeof window<"u"?window:null}function qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(r){return new VN(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ne("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="PersistentStream";class mA{constructor(e,t,i,a,l,c,m,g){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new My(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(Vt(t.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new te(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ne(dE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ne(dE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class IC extends mA{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=PN(this.serializer,e),i=(function(l){if(!("targetChange"in l))return we.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?we.min():c.readTime?Ot(c.readTime):we.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Np(this.serializer),t.addTarget=(function(l,c){let m;const g=c.target;if(m=Zf(g)?{documents:PS(l,g)}:{query:kS(l,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=NS(l,c.resumeToken);const p=Rp(l,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(we.min())>0){m.readTime=Tl(l,c.snapshotVersion.toTimestamp());const p=Rp(l,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const i=jN(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Np(this.serializer),t.removeTarget=e,this.q_(t)}}class NC extends mA{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=kN(e.writeResults,e.commitTime),i=Ot(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Np(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Ac(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{}class DC extends CC{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new te(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Ip(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new te(Q.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,Ip(t,i),a,c,m,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new te(Q.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class VC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vt(t),this.aa=!1):ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="RemoteStore";class OC{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Kr(this)&&(ne(Xa,"Restarting streams for network reachability change."),await(async function(g){const p=me(g);p.Ea.add(4),await Vl(p),p.Ra.set("Unknown"),p.Ea.delete(4),await qc(p)})(this))}))})),this.Ra=new VC(i,a)}}async function qc(r){if(Kr(r))for(const e of r.da)await e(!0)}async function Vl(r){for(const e of r.da)await e(!1)}function Ad(r,e){const t=me(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),jy(t)?ky(t):Ml(t).O_()&&Py(t,e))}function wl(r,e){const t=me(r),i=Ml(t);t.Ia.delete(e),i.O_()&&gA(t,e),t.Ia.size===0&&(i.O_()?i.L_():Kr(t)&&t.Ra.set("Unknown"))}function Py(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ml(r).Y_(e)}function gA(r,e){r.Va.Ue(e),Ml(r).Z_(e)}function ky(r){r.Va=new IN({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ml(r).start(),r.Ra.ua()}function jy(r){return Kr(r)&&!Ml(r).x_()&&r.Ia.size>0}function Kr(r){return me(r).Ea.size===0}function pA(r){r.Va=void 0}async function MC(r){r.Ra.set("Online")}async function PC(r){r.Ia.forEach(((e,t)=>{Py(r,e)}))}async function kC(r,e){pA(r),jy(r)?(r.Ra.ha(e),ky(r)):r.Ra.set("Unknown")}async function jC(r,e,t){if(r.Ra.set("Online"),e instanceof IS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const m of l.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,c),a.Ia.delete(m),a.Va.removeTarget(m))})(r,e)}catch(i){ne(Xa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await od(r,i)}else if(e instanceof Bf?r.Va.Ze(e):e instanceof RS?r.Va.st(e):r.Va.tt(e),!t.isEqual(we.min()))try{const i=await sA(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const m=l.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(xt.EMPTY_BYTE_STRING,v.snapshotVersion)),gA(l,g);const E=new Vs(v.target,g,p,v.sequenceNumber);Py(l,E)})),l.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){ne(Xa,"Failed to raise snapshot:",i),await od(r,i)}}async function od(r,e,t){if(!Hr(e))throw e;r.Ea.add(1),await Vl(r),r.Ra.set("Offline"),t||(t=()=>sA(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ne(Xa,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await qc(r)}))}function yA(r,e){return e().catch((t=>od(r,t,e)))}async function Ol(r){const e=me(r),t=Br(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dr;for(;UC(e);)try{const a=await TC(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,LC(e,a)}catch(a){await od(e,a)}_A(e)&&vA(e)}function UC(r){return Kr(r)&&r.Ta.length<10}function LC(r,e){r.Ta.push(e);const t=Br(r);t.O_()&&t.X_&&t.ea(e.mutations)}function _A(r){return Kr(r)&&!Br(r).x_()&&r.Ta.length>0}function vA(r){Br(r).start()}async function BC(r){Br(r).ra()}async function zC(r){const e=Br(r);for(const t of r.Ta)e.ea(t.mutations)}async function qC(r,e,t){const i=r.Ta.shift(),a=Ty.from(i,e,t);await yA(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Ol(r)}async function FC(r,e){e&&Br(r).X_&&await(async function(i,a){if((function(c){return SS(c)&&c!==Q.ABORTED})(a.code)){const l=i.Ta.shift();Br(i).B_(),await yA(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Ol(i)}})(r,e),_A(r)&&vA(r)}async function mE(r,e){const t=me(r);t.asyncQueue.verifyOperationInProgress(),ne(Xa,"RemoteStore received new credentials");const i=Kr(t);t.Ea.add(3),await Vl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qc(t)}async function kp(r,e){const t=me(r);e?(t.Ea.delete(2),await qc(t)):e||(t.Ea.add(2),await Vl(t),t.Ra.set("Unknown"))}function Ml(r){return r.ma||(r.ma=(function(t,i,a){const l=me(t);return l.sa(),new IC(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:MC.bind(null,r),t_:PC.bind(null,r),r_:kC.bind(null,r),H_:jC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),jy(r)?ky(r):r.Ra.set("Unknown")):(await r.ma.stop(),pA(r))}))),r.ma}function Br(r){return r.fa||(r.fa=(function(t,i,a){const l=me(t);return l.sa(),new NC(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:BC.bind(null,r),r_:FC.bind(null,r),ta:zC.bind(null,r),na:qC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Ol(r)):(await r.fa.stop(),r.Ta.length>0&&(ne(Xa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,m=new Uy(e,t,c,a,l);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pl(r,e){if(Vt("AsyncQueue",`${e}: ${r}`),Hr(r))return new te(Q.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{static emptySet(e){return new sl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||de.comparator(t.key,i.key):(t,i)=>de.comparator(t.key,i.key),this.keyedMap=Zu(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new sl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.ga=new ft(de.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Sl{constructor(e,t,i,a,l,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new Sl(e,t,sl.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class HC{constructor(){this.queries=pE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=me(t),l=a.queries;a.queries=pE(),l.forEach(((c,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new te(Q.ABORTED,"Firestore shutting down"))}}function pE(){return new Ls((r=>cS(r)),kc)}async function Ly(r,e){const t=me(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new GC,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const m=Pl(c,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&zy(t)}async function By(r,e){const t=me(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function QC(r,e){const t=me(r);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const m of c.Sa)m.Fa(a)&&(i=!0);c.wa=a}}i&&zy(t)}function KC(r,e,t){const i=me(r),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function zy(r){r.Ca.forEach((e=>{e.next()}))}var jp,yE;(yE=jp||(jp={})).Ma="default",yE.Cache="cache";class qy{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Sl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jp.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.serializer=e}$s(e){return as(this.serializer,e)}Us(e){return e.metadata.exists?MS(this.serializer,e.document,!1):gt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Ot(e)}}class XC{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=TA(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const i=Le.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,i=new _E(this.serializer);for(const a of e)if(a.metadata.queries){const l=i.$s(a.metadata.name);for(const c of a.metadata.queries){const m=(t.get(c)||Pe()).add(l);t.set(c,m)}}return t}async ja(e){const t=await bC(e,new _E(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const a of this.Ka)await EC(e,a,i.get(a.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function TA(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.key=e}}class EA{constructor(e){this.key=e}}class wA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=fS(e),this.tu=new sl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new gE,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,E)=>{const S=a.get(v),D=jc(this.query,E)?E:null,G=!!S&&this.mutatedKeys.has(S.key),z=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let U=!1;S&&D?S.data.isEqual(D.data)?G!==z&&(i.track({type:3,doc:D}),U=!0):this.su(S,D)||(i.track({type:2,doc:D}),U=!0,(g&&this.eu(D,g)>0||p&&this.eu(D,p)<0)&&(m=!0)):!S&&D?(i.track({type:0,doc:D}),U=!0):S&&!D&&(i.track({type:1,doc:S}),U=!0,(g||p)&&(m=!0)),U&&(D?(c=c.add(D),l=z?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:c,iu:i,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(D,G){const z=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:U})}};return z(D)-z(G)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(i),a=a??!1;const m=t&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new Sl(this.query,e.tu,l,c,e.mutatedKeys,g===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new EA(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new bA(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Pe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yr="SyncEngine";class $C{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ZC{constructor(e){this.key=e,this.hu=!1}}class JC{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ls((m=>cS(m)),kc),this.Iu=new Map,this.Eu=new Set,this.du=new ft(de.comparator),this.Au=new Map,this.Ru=new Ry,this.Vu={},this.mu=new Map,this.fu=Ya.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WC(r,e,t=!0){const i=xd(r);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await SA(i,e,t,!0),a}async function eD(r,e){const t=xd(r);await SA(t,e,!0,!1)}async function SA(r,e,t,i){const a=await bl(r.localStore,xn(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let m;return i&&(m=await Fy(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&Ad(r.remoteStore,a),m}async function Fy(r,e,t,i,a){r.pu=(E,S,D)=>(async function(z,U,ie,re){let se=U.view.ru(ie);se.Cs&&(se=await sd(z.localStore,U.query,!1).then((({documents:I})=>U.view.ru(I,se))));const ge=re&&re.targetChanges.get(U.targetId),Se=re&&re.targetMismatches.get(U.targetId)!=null,Te=U.view.applyChanges(se,z.isPrimaryClient,ge,Se);return Up(z,U.targetId,Te.au),Te.snapshot})(r,E,S,D);const l=await sd(r.localStore,e,!0),c=new wA(e,l.Qs),m=c.ru(l.documents),g=Bc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),p=c.applyChanges(m,r.isPrimaryClient,g);Up(r,t,p.au);const v=new $C(e,t,c);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function tD(r,e,t){const i=me(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!kc(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await El(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&wl(i.remoteStore,a.targetId),Al(i,a.targetId)})).catch(Gr)):(Al(i,a.targetId),await El(i.localStore,a.targetId,!0))}async function nD(r,e){const t=me(r),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),wl(t.remoteStore,i.targetId))}async function iD(r,e,t){const i=Ky(r);try{const a=await(function(c,m){const g=me(c),p=We.now(),v=m.reduce(((D,G)=>D.add(G.key)),Pe());let E,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let G=Un(),z=Pe();return g.Ns.getEntries(D,v).next((U=>{G=U,G.forEach(((ie,re)=>{re.isValidDocument()||(z=z.add(ie))}))})).next((()=>g.localDocuments.getOverlayedDocuments(D,G))).next((U=>{E=U;const ie=[];for(const re of m){const se=AN(re,E.get(re.key).overlayedDocument);se!=null&&ie.push(new Bs(re.key,se,tS(se.value.mapValue),bt.exists(!0)))}return g.mutationQueue.addMutationBatch(D,p,ie,m)})).next((U=>{S=U;const ie=U.applyToLocalDocumentSet(E,z);return g.documentOverlayCache.saveOverlays(D,U.batchId,ie)}))})).then((()=>({batchId:S.batchId,changes:mS(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new ft(De)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(i,a.batchId,t),await zs(i,a.changes),await Ol(i.remoteStore)}catch(a){const l=Pl(a,"Failed to persist write");t.reject(l)}}async function AA(r,e){const t=me(r);try{const i=await vC(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(be(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?be(c.hu,14607):a.removedDocuments.size>0&&(be(c.hu,42227),c.hu=!1))})),await zs(t,i,e)}catch(i){await Gr(i)}}function vE(r,e,t){const i=me(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const m=c.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(c,m){const g=me(c);g.onlineState=m;let p=!1;g.queries.forEach(((v,E)=>{for(const S of E.Sa)S.va(m)&&(p=!0)})),p&&zy(g)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function sD(r,e,t){const i=me(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new ft(de.comparator);c=c.insert(l,gt.newNoDocument(l,we.min()));const m=Pe().add(l),g=new Lc(we.min(),new Map,new ft(De),c,m);await AA(i,g),i.du=i.du.remove(l),i.Au.delete(e),Qy(i)}else await El(i.localStore,e,!1).then((()=>Al(i,e,t))).catch(Gr)}async function rD(r,e){const t=me(r),i=e.batch.batchId;try{const a=await _C(t.localStore,e);Hy(t,i,null),Gy(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await zs(t,a)}catch(a){await Gr(a)}}async function aD(r,e,t){const i=me(r);try{const a=await(function(c,m){const g=me(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,m).next((E=>(be(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(i.localStore,e);Hy(i,e,t),Gy(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await zs(i,a)}catch(a){await Gr(a)}}async function oD(r,e){const t=me(r);Kr(t.remoteStore)||ne(Yr,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await(function(c){const m=me(c);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(g=>m.mutationQueue.getHighestUnacknowledgedBatchId(g)))})(t.localStore);if(i===Dr)return void e.resolve();const a=t.mu.get(i)||[];a.push(e),t.mu.set(i,a)}catch(i){const a=Pl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function Gy(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Hy(r,e,t){const i=me(r);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function Al(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||xA(r,i)}))}function xA(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(wl(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Qy(r))}function Up(r,e,t){for(const i of t)i instanceof bA?(r.Ru.addReference(i.key,e),lD(r,i)):i instanceof EA?(ne(Yr,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||xA(r,i.key)):pe(19791,{wu:i})}function lD(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ne(Yr,"New document in limbo: "+t),r.Eu.add(i),Qy(r))}function Qy(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new de(Le.fromString(e)),i=r.fu.next();r.Au.set(i,new ZC(t)),r.du=r.du.insert(t,i),Ad(r.remoteStore,new Vs(xn(Nl(t.path)),i,"TargetPurposeLimboResolution",kn.ce))}}async function zs(r,e,t){const i=me(r),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{c.push(i.pu(g,e,t).then((p=>{var v;if((p||t)&&i.isPrimaryClient){const E=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){a.push(p);const E=Dy.As(g.targetId,p);l.push(E)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(g,p){const v=me(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>L.forEach(p,(S=>L.forEach(S.Es,(D=>v.persistence.referenceDelegate.addReference(E,S.targetId,D))).next((()=>L.forEach(S.ds,(D=>v.persistence.referenceDelegate.removeReference(E,S.targetId,D)))))))))}catch(E){if(!Hr(E))throw E;ne(Vy,"Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const D=v.Ms.get(S),G=D.snapshotVersion,z=D.withLastLimboFreeSnapshotVersion(G);v.Ms=v.Ms.insert(S,z)}}})(i.localStore,l))}async function uD(r,e){const t=me(r);if(!t.currentUser.isEqual(e)){ne(Yr,"User change. New user:",e.toKey());const i=await iA(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new te(Q.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await zs(t,i.Ls)}}function cD(r,e){const t=me(r),i=t.Au.get(e);if(i&&i.hu)return Pe().add(i.key);{let a=Pe();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const m=t.Tu.get(c);a=a.unionWith(m.view.nu)}return a}}async function hD(r,e){const t=me(r),i=await sd(t.localStore,e.query,!0),a=e.view.cu(i);return t.isPrimaryClient&&Up(t,e.targetId,a.au),a}async function fD(r,e){const t=me(r);return oA(t.localStore,e).then((i=>zs(t,i)))}async function dD(r,e,t,i){const a=me(r),l=await(function(m,g){const p=me(m),v=me(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(E=>v.er(E,g).next((S=>S?p.localDocuments.getDocuments(E,S):L.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Ol(a.remoteStore):t==="acknowledged"||t==="rejected"?(Hy(a,e,i||null),Gy(a,e),(function(m,g){me(me(m).mutationQueue).ir(g)})(a.localStore,e)):pe(6720,"Unknown batchState",{Su:t}),await zs(a,l)):ne(Yr,"Cannot apply mutation batch with id: "+e)}async function mD(r,e){const t=me(r);if(xd(t),Ky(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),a=await TE(t,i.toArray());t.gu=!0,await kp(t.remoteStore,!0);for(const l of a)Ad(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const i=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then((()=>(Al(t,c),El(t.localStore,c,!0)))),wl(t.remoteStore,c)})),await a,await TE(t,i),(function(c){const m=me(c);m.Au.forEach(((g,p)=>{wl(m.remoteStore,p)})),m.Ru.Jr(),m.Au=new Map,m.du=new ft(de.comparator)})(t),t.gu=!1,await kp(t.remoteStore,!1)}}async function TE(r,e,t){const i=me(r),a=[],l=[];for(const c of e){let m;const g=i.Iu.get(c);if(g&&g.length!==0){m=await bl(i.localStore,xn(g[0]));for(const p of g){const v=i.Tu.get(p),E=await hD(i,v);E.snapshot&&l.push(E.snapshot)}}else{const p=await aA(i.localStore,c);m=await bl(i.localStore,p),await Fy(i,RA(p),c,!1,m.resumeToken)}a.push(m)}return i.Pu.H_(l),a}function RA(r){return uS(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function gD(r){return(function(t){return me(me(t).persistence).Ts()})(me(r).localStore)}async function pD(r,e,t,i){const a=me(r);if(a.gu)return void ne(Yr,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await oA(a.localStore,hS(l[0])),m=Lc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",xt.EMPTY_BYTE_STRING);await zs(a,c,m);break}case"rejected":await El(a.localStore,e,!0),Al(a,e,i);break;default:pe(64155,t)}}async function yD(r,e,t){const i=xd(r);if(i.gu){for(const a of e){if(i.Iu.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){ne(Yr,"Adding an already active target "+a);continue}const l=await aA(i.localStore,a),c=await bl(i.localStore,l);await Fy(i,RA(l),c.targetId,!1,c.resumeToken),Ad(i.remoteStore,c)}for(const a of t)i.Iu.has(a)&&await El(i.localStore,a,!1).then((()=>{wl(i.remoteStore,a),Al(i,a)})).catch(Gr)}}function xd(r){const e=me(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=AA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sD.bind(null,e),e.Pu.H_=QC.bind(null,e.eventManager),e.Pu.yu=KC.bind(null,e.eventManager),e}function Ky(r){const e=me(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aD.bind(null,e),e}function _D(r,e,t){const i=me(r);(async function(l,c,m){try{const g=await c.getMetadata();if(await(function(D,G){const z=me(D),U=Ot(G.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",(ie=>z.Ii.getBundleMetadata(ie,G.id))).then((ie=>!!ie&&ie.createTime.compareTo(U)>=0))})(l.localStore,g))return await c.close(),m._completeWith((function(D){return{taskState:"Success",documentsLoaded:D.totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}})(g)),Promise.resolve(new Set);m._updateProgress(TA(g));const p=new XC(g,c.serializer);let v=await c.bu();for(;v;){const S=await p.Ga(v);S&&m._updateProgress(S),v=await c.bu()}const E=await p.ja(l.localStore);return await zs(l,E.Ha,void 0),await(function(D,G){const z=me(D);return z.persistence.runTransaction("Save bundle","readwrite",(U=>z.Ii.saveBundleMetadata(U,G)))})(l.localStore,g),m._completeWith(E.progress),Promise.resolve(E.Ja)}catch(g){return us(Yr,`Loading bundle failed with ${g}`),m._failWith(g),Promise.resolve(new Set)}})(i,e,t).then((a=>{i.sharedClientState.notifyBundleLoaded(a)}))}class xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return nA(this.persistence,new tA,e.initialUser,this.serializer)}Cu(e){return new Iy(Sd.mi,this.serializer)}Du(e){return new fA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xc.provider={build:()=>new xc};class vD extends xc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){be(this.persistence.referenceDelegate instanceof id,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new XS(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new Iy((i=>id.mi(i,t)),this.serializer)}}class IA extends xc{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Ky(this.xu.syncEngine),await Ol(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return nA(this.persistence,new tA,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new XS(i,e.asyncQueue,t)}Mu(e,t){const i=new I2(t,this.persistence);return new R2(e.asyncQueue,i)}Cu(e){const t=Cy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new Ny(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,dA(),qf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new fA}}class TD extends IA{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof ip&&(this.sharedClientState.syncEngine={Co:dD.bind(null,t),vo:pD.bind(null,t),Fo:yD.bind(null,t),Ts:gD.bind(null,t),Do:fD.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await mD(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=dA();if(!ip.v(t))throw new te(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Cy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ip(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Rc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uD.bind(null,this.syncEngine),await kp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new HC})()}createDatastore(e){const t=zc(e.databaseInfo.databaseId),i=(function(l){return new RC(l)})(e.databaseInfo);return(function(l,c,m,g){return new DC(l,c,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,m){return new OC(i,a,l,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>vE(this.syncEngine,t,0)),(function(){return fE.v()?new fE:new wC})())}createSyncEngine(e,t){return(function(a,l,c,m,g,p,v){const E=new JC(a,l,c,m,g,p);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=me(a);ne(Xa,"RemoteStore shutting down."),l.Ea.add(5),await Vl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Rc.provider={build:()=>new Rc};function bE(r,e=10240){let t=0;return{async read(){if(t<r.byteLength){const i={value:r.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new un,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Qa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),i=Number(t);isNaN(i)&&this.Qu(`length string (${t}) is not valid number`);const a=await this.$u(i);return new YC(JSON.parse(a),e.length+i)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new te(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const c=me(a),m={documents:l.map((E=>Sc(c.serializer,E)))},g=await c.Ho("BatchGetDocuments",c.serializer.databaseId,Le.emptyPath(),m,l.length),p=new Map;g.forEach((E=>{const S=MN(c.serializer,E);p.set(S.key.toString(),S)}));const v=[];return l.forEach((E=>{const S=p.get(E.toString());be(!!S,55234,{key:E}),v.push(S)})),v})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const a=de.fromPath(i);this.mutations.push(new _y(a,this.precondition(a)))})),await(async function(i,a){const l=me(i),c={writes:a.map((m=>Ac(l.serializer,m)))};await l.Go("Commit",l.serializer.databaseId,Le.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pe(50498,{Gu:e.constructor.name});t=we.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new te(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(we.min())?bt.exists(!1):bt.updateTime(t):bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(we.min()))throw new te(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.zu=i.maxAttempts,this.M_=new My(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new ED(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((a=>{this.Yu(a)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Oc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!SS(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="FirestoreClient";class SD{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Jt.UNAUTHENTICATED,this.clientId=sy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{ne(zr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ne(zr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Pl(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function rp(r,e){r.asyncQueue.verifyOperationInProgress(),ne(zr,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await iA(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function EE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Yy(r);ne(zr,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>mE(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>mE(e.remoteStore,a))),r._onlineComponents=e}async function Yy(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ne(zr,"Using user provided OfflineComponentProvider");try{await rp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Q.FAILED_PRECONDITION||a.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;us("Error using user provided cache. Falling back to memory cache: "+t),await rp(r,new xc)}}else ne(zr,"Using default OfflineComponentProvider"),await rp(r,new vD(void 0));return r._offlineComponents}async function Id(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ne(zr,"Using user provided OnlineComponentProvider"),await EE(r,r._uninitializedComponentsProvider._online)):(ne(zr,"Using default OnlineComponentProvider"),await EE(r,new Rc))),r._onlineComponents}function NA(r){return Yy(r).then((e=>e.persistence))}function Xy(r){return Yy(r).then((e=>e.localStore))}function CA(r){return Id(r).then((e=>e.remoteStore))}function $y(r){return Id(r).then((e=>e.syncEngine))}function AD(r){return Id(r).then((e=>e.datastore))}async function xl(r){const e=await Id(r),t=e.eventManager;return t.onListen=WC.bind(null,e.syncEngine),t.onUnlisten=tD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nD.bind(null,e.syncEngine),t}function xD(r){return r.asyncQueue.enqueue((async()=>{const e=await NA(r),t=await CA(r);return e.setNetworkEnabled(!0),(function(a){const l=me(a);return l.Ea.delete(0),qc(l)})(t)}))}function RD(r){return r.asyncQueue.enqueue((async()=>{const e=await NA(r),t=await CA(r);return e.setNetworkEnabled(!1),(async function(a){const l=me(a);l.Ea.add(0),await Vl(l),l.Ra.set("Offline")})(t)}))}function ID(r,e){const t=new un;return r.asyncQueue.enqueueAndForget((async()=>(async function(a,l,c){try{const m=await(function(p,v){const E=me(p);return E.persistence.runTransaction("read document","readonly",(S=>E.localDocuments.getDocument(S,v)))})(a,l);m.isFoundDocument()?c.resolve(m):m.isNoDocument()?c.resolve(null):c.reject(new te(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const g=Pl(m,`Failed to get document '${l} from cache`);c.reject(g)}})(await Xy(r),e,t))),t.promise}function DA(r,e,t={}){const i=new un;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,m,g,p){const v=new Rd({next:S=>{v.Nu(),c.enqueueAndForget((()=>By(l,E)));const D=S.docs.has(m);!D&&S.fromCache?p.reject(new te(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&S.fromCache&&g&&g.source==="server"?p.reject(new te(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new qy(Nl(m.path),v,{includeMetadataChanges:!0,qa:!0});return Ly(l,E)})(await xl(r),r.asyncQueue,e,t,i))),i.promise}function ND(r,e){const t=new un;return r.asyncQueue.enqueueAndForget((async()=>(async function(a,l,c){try{const m=await sd(a,l,!0),g=new wA(l,m.Qs),p=g.ru(m.documents),v=g.applyChanges(p,!1);c.resolve(v.snapshot)}catch(m){const g=Pl(m,`Failed to execute query '${l} against cache`);c.reject(g)}})(await Xy(r),e,t))),t.promise}function VA(r,e,t={}){const i=new un;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,m,g,p){const v=new Rd({next:S=>{v.Nu(),c.enqueueAndForget((()=>By(l,E))),S.fromCache&&g.source==="server"?p.reject(new te(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new qy(m,v,{includeMetadataChanges:!0,qa:!0});return Ly(l,E)})(await xl(r),r.asyncQueue,e,t,i))),i.promise}function CD(r,e){const t=new Rd(e);return r.asyncQueue.enqueueAndForget((async()=>(function(a,l){me(a).Ca.add(l),l.next()})(await xl(r),t))),()=>{t.Nu(),r.asyncQueue.enqueueAndForget((async()=>(function(a,l){me(a).Ca.delete(l)})(await xl(r),t)))}}function DD(r,e,t,i){const a=(function(c,m){let g;return g=typeof c=="string"?xS().encode(c):c,(function(v,E){return new bD(v,E)})((function(v,E){if(v instanceof Uint8Array)return bE(v,E);if(v instanceof ArrayBuffer)return bE(new Uint8Array(v),E);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(g),m)})(t,zc(e));r.asyncQueue.enqueueAndForget((async()=>{_D(await $y(r),a,i)}))}function VD(r,e){return r.asyncQueue.enqueue((async()=>(function(i,a){const l=me(i);return l.persistence.runTransaction("Get named query","readonly",(c=>l.Ii.getNamedQuery(c,a)))})(await Xy(r),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="firestore.googleapis.com",SE=!0;class AE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MA,this.ssl=SE}else this.host=e.host,this.ssl=e.ssl??SE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WN)throw new te(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OA(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new te(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new te(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new te(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fc{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new g2;switch(i.type){case"firstParty":return new v2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new te(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=wE.get(t);i&&(ne("ComponentProvider","Removing Datastore"),wE.delete(t),i.terminate())})(this),Promise.resolve()}}function OD(r,e,t,i={}){var p;r=Ke(r,Fc);const a=Dc(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;a&&(ZE(`https://${m}`),WE("Firestore",!0)),l.host!==MA&&l.host!==m&&us("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:a,emulatorOptions:i};if(!al(g,c)&&(r._setSettings(g),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=Jt.MOCK_USER;else{v=JE(i.mockUserToken,(p=r._app)==null?void 0:p.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new te(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Jt(S)}r._authCredentials=new p2(new Aw(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rn=class PA{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new PA(this.firestore,e,this._query)}},ht=class ec{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ec(this.firestore,e,this._key)}toJSON(){return{type:ec._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Vc(t,ec._jsonSchema))return new ec(e,i||null,new de(Le.fromString(t.referencePath)))}};ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:Gt("string",ht._jsonSchemaVersion),referencePath:Gt("string")};let Vr=class kA extends Rn{constructor(e,t,i){super(e,t,Nl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new de(e))}withConverter(e){return new kA(this.firestore,e,this._path)}};function Ri(r,e,...t){if(r=ut(r),ry("collection","path",e),r instanceof Fc){const i=Le.fromString(e,...t);return db(i),new Vr(r,null,i)}{if(!(r instanceof ht||r instanceof Vr))throw new te(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Le.fromString(e,...t));return db(i),new Vr(r.firestore,null,i)}}function MD(r,e){if(r=Ke(r,Fc),ry("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new te(Q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rn(r,null,(function(i){return new Us(Le.emptyPath(),i)})(e))}function an(r,e,...t){if(r=ut(r),arguments.length===1&&(e=sy.newId()),ry("doc","path",e),r instanceof Fc){const i=Le.fromString(e,...t);return fb(i),new ht(r,null,new de(i))}{if(!(r instanceof ht||r instanceof Vr))throw new te(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Le.fromString(e,...t));return fb(i),new ht(r.firestore,r instanceof Vr?r.converter:null,new de(i))}}function jA(r,e){return r=ut(r),e=ut(e),(r instanceof ht||r instanceof Vr)&&(e instanceof ht||e instanceof Vr)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function UA(r,e){return r=ut(r),e=ut(e),r instanceof Rn&&e instanceof Rn&&r.firestore===e.firestore&&kc(r._query,e._query)&&r.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="AsyncQueue";class RE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new My(this,"async_queue_retry"),this._c=()=>{const i=qf();i&&ne(xE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=qf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=qf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new un;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hr(e))throw e;ne(xE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Vt("INTERNAL UNHANDLED ERROR: ",IE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Uy.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&pe(47125,{Pc:IE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function IE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}class PD{constructor(){this._progressObserver={},this._taskCompletionResolver=new un,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=-1;let Rt=class extends Fc{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new RE,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RE(e),this._firestoreClient=void 0,await e}}};function cn(r){if(r._terminated)throw new te(Q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||LA(r),r._firestoreClient}function LA(r){var i,a,l;const e=r._freezeSettings(),t=(function(m,g,p,v){return new iN(m,g,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,OA(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new SD(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(r._componentsProvider))}function jD(r,e){us("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return BA(r,Rc.provider,{build:i=>new IA(i,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function UD(r){us("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();BA(r,Rc.provider,{build:t=>new TD(t,e.cacheSizeBytes)})}function BA(r,e,t){if((r=Ke(r,Rt))._firestoreClient||r._terminated)throw new te(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new te(Q.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},LA(r)}function LD(r){if(r._initialized&&!r._terminated)throw new te(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new un;return r._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(i){if(!rs.v())return Promise.resolve();const a=i+eA;await rs.delete(a)})(Cy(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function BD(r){return(function(t){const i=new un;return t.asyncQueue.enqueueAndForget((async()=>oD(await $y(t),i))),i.promise})(cn(r=Ke(r,Rt)))}function zD(r){return xD(cn(r=Ke(r,Rt)))}function qD(r){return RD(cn(r=Ke(r,Rt)))}function FD(r,e){const t=cn(r=Ke(r,Rt)),i=new PD;return DD(t,r._databaseId,e,i),i}function GD(r,e){return VD(cn(r=Ke(r,Rt)),e).then((t=>t?new Rn(r,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gn(xt.fromBase64String(e))}catch(t){throw new te(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gn(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vc(e,gn._jsonSchema))return gn.fromBase64String(e.bytes)}}gn._jsonSchemaVersion="firestore/bytes/1.0",gn._jsonSchema={type:Gt("string",gn._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ci._jsonSchemaVersion}}static fromJSON(e){if(Vc(e,Ci._jsonSchema))return new Ci(e.latitude,e.longitude)}}Ci._jsonSchemaVersion="firestore/geoPoint/1.0",Ci._jsonSchema={type:Gt("string",Ci._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:os._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vc(e,os._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new os(e.vectorValues);throw new te(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}os._jsonSchemaVersion="firestore/vectorValue/1.0",os._jsonSchema={type:Gt("string",os._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=/^__.*__$/;class QD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cl(e,this.data,t,this.fieldTransforms)}}class zA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qA(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:r})}}class Nd{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Nd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ld(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qA(this.Ac)&&HD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class KD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||zc(e)}Cc(e,t,i,a=!1){return new Nd({Ac:e,methodName:t,Dc:i,path:Tt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wa(r){const e=r._freezeSettings(),t=zc(r._databaseId);return new KD(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Cd(r,e,t,i,a,l={}){const c=r.Cc(l.merge||l.mergeFields?2:0,e,t,a);i_("Data must be an object, but it was:",c,i);const m=HA(i,c);let g,p;if(l.merge)g=new jn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=Bp(e,E,t);if(!c.contains(S))throw new te(Q.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);KA(v,S)||v.push(S)}g=new jn(v),p=c.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=c.fieldTransforms;return new QD(new ln(m),g,p)}class Gc extends Ja{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gc}}function FA(r,e,t){return new Nd({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Zy extends Ja{_toFieldTransform(e){return new Uc(e.path,new _l)}isEqual(e){return e instanceof Zy}}class Jy extends Ja{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=FA(this,e,!0),i=this.vc.map((l=>eo(l,t))),a=new Ga(i);return new Uc(e.path,a)}isEqual(e){return e instanceof Jy&&al(this.vc,e.vc)}}class Wy extends Ja{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=FA(this,e,!0),i=this.vc.map((l=>eo(l,t))),a=new Ha(i);return new Uc(e.path,a)}isEqual(e){return e instanceof Wy&&al(this.vc,e.vc)}}class e_ extends Ja{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new vl(e.serializer,yS(e.serializer,this.Fc));return new Uc(e.path,t)}isEqual(e){return e instanceof e_&&this.Fc===e.Fc}}function t_(r,e,t,i){const a=r.Cc(1,e,t);i_("Data must be an object, but it was:",a,i);const l=[],c=ln.empty();Qr(i,((g,p)=>{const v=s_(e,g,t);p=ut(p);const E=a.yc(v);if(p instanceof Gc)l.push(v);else{const S=eo(p,E);S!=null&&(l.push(v),c.set(v,S))}}));const m=new jn(l);return new zA(c,m,a.fieldTransforms)}function n_(r,e,t,i,a,l){const c=r.Cc(1,e,t),m=[Bp(e,i,t)],g=[a];if(l.length%2!=0)throw new te(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)m.push(Bp(e,l[S])),g.push(l[S+1]);const p=[],v=ln.empty();for(let S=m.length-1;S>=0;--S)if(!KA(p,m[S])){const D=m[S];let G=g[S];G=ut(G);const z=c.yc(D);if(G instanceof Gc)p.push(D);else{const U=eo(G,z);U!=null&&(p.push(D),v.set(D,U))}}const E=new jn(p);return new zA(v,E,c.fieldTransforms)}function GA(r,e,t,i=!1){return eo(t,r.Cc(i?4:3,e))}function eo(r,e){if(QA(r=ut(r)))return i_("Unsupported field value:",e,r),HA(r,e);if(r instanceof Ja)return(function(i,a){if(!qA(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const m of i){let g=eo(m,a.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,a){if((i=ut(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return yS(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=We.fromDate(i);return{timestampValue:Tl(a.serializer,l)}}if(i instanceof We){const l=new We(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Tl(a.serializer,l)}}if(i instanceof Ci)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof gn)return{bytesValue:NS(a.serializer,i._byteString)};if(i instanceof ht){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:wy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof os)return(function(c,m){return{mapValue:{fields:{[fy]:{stringValue:dy},[gl]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return yy(m.serializer,p)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${fd(i)}`)})(r,e)}function HA(r,e){const t={};return Qw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qr(r,((i,a)=>{const l=eo(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function QA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof We||r instanceof Ci||r instanceof gn||r instanceof ht||r instanceof Ja||r instanceof os)}function i_(r,e,t){if(!QA(t)||!Iw(t)){const i=fd(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function Bp(r,e,t){if((e=ut(e))instanceof qr)return e._internalPath;if(typeof e=="string")return s_(r,e);throw ld("Field path arguments must be of type string or ",r,!1,void 0,t)}const YD=new RegExp("[~\\*/\\[\\]]");function s_(r,e,t){if(e.search(YD)>=0)throw ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new qr(...e.split("."))._internalPath}catch{throw ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function ld(r,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${i}`),c&&(g+=` in document ${a}`),g+=")"),new te(Q.INVALID_ARGUMENT,m+r+g)}function KA(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class XD extends Ic{data(){return super.data()}}function Dd(r,e){return typeof e=="string"?s_(r,e):e instanceof qr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new te(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r_{}class Hc extends r_{}function Wi(r,e,...t){let i=[];e instanceof r_&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((g=>g instanceof a_)).length,m=l.filter((g=>g instanceof Vd)).length;if(c>1||c>0&&m>0)throw new te(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)r=a._apply(r);return r}class Vd extends Hc{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Vd(e,t,i)}_apply(e){const t=this._parse(e);return $A(e._query,t),new Rn(e.firestore,e.converter,xp(e._query,t))}_parse(e){const t=Wa(e.firestore);return(function(l,c,m,g,p,v,E){let S;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new te(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){CE(E,v);const G=[];for(const z of E)G.push(NE(g,l,z));S={arrayValue:{values:G}}}else S=NE(g,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||CE(E,v),S=GA(m,c,E,v==="in"||v==="not-in");return qe.create(p,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function zp(r,e,t){const i=e,a=Dd("where",r);return Vd._create(a,i,t)}class a_ extends r_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new a_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:it.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const m=l.getFlattenedFilters();for(const g of m)$A(c,g),c=xp(c,g)})(e._query,t),new Rn(e.firestore,e.converter,xp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class o_ extends Hc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new o_(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new te(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new te(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wc(l,c)})(e._query,this._field,this._direction);return new Rn(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Us(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function $D(r,e="asc"){const t=e,i=Dd("orderBy",r);return o_._create(i,t)}class Od extends Hc{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Od(e,t,i)}_apply(e){return new Rn(e.firestore,e.converter,Wf(e._query,this._limit,this._limitType))}}function ZD(r){return Nw("limit",r),Od._create("limit",r,"F")}function JD(r){return Nw("limitToLast",r),Od._create("limitToLast",r,"L")}class Md extends Hc{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Md(e,t,i)}_apply(e){const t=XA(e,this.type,this._docOrFields,this._inclusive);return new Rn(e.firestore,e.converter,(function(a,l){return new Us(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,t))}}function WD(...r){return Md._create("startAt",r,!0)}function eV(...r){return Md._create("startAfter",r,!1)}class Pd extends Hc{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Pd(e,t,i)}_apply(e){const t=XA(e,this.type,this._docOrFields,this._inclusive);return new Rn(e.firestore,e.converter,(function(a,l){return new Us(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)})(e._query,t))}}function tV(...r){return Pd._create("endBefore",r,!1)}function nV(...r){return Pd._create("endAt",r,!0)}function XA(r,e,t,i){if(t[0]=ut(t[0]),t[0]instanceof Ic)return(function(l,c,m,g,p){if(!g)throw new te(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const v=[];for(const E of il(l))if(E.field.isKeyField())v.push(qa(c,g.key));else{const S=g.data.field(E.field);if(yd(S))throw new te(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(S===null){const D=E.field.canonicalString();throw new te(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${D}' (used as the orderBy) does not exist.`)}v.push(S)}return new Lr(v,p)})(r._query,r.firestore._databaseId,e,t[0]._document,i);{const a=Wa(r.firestore);return(function(c,m,g,p,v,E){const S=c.explicitOrderBy;if(v.length>S.length)throw new te(Q.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const D=[];for(let G=0;G<v.length;G++){const z=v[G];if(S[G].field.isKeyField()){if(typeof z!="string")throw new te(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof z}`);if(!gy(c)&&z.indexOf("/")!==-1)throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${z}' contains a slash.`);const U=c.path.child(Le.fromString(z));if(!de.isDocumentKey(U))throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const ie=new de(U);D.push(qa(m,ie))}else{const U=GA(g,p,z);D.push(U)}}return new Lr(D,E)})(r._query,r.firestore._databaseId,a,e,t,i)}}function NE(r,e,t){if(typeof(t=ut(t))=="string"){if(t==="")throw new te(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gy(e)&&t.indexOf("/")!==-1)throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Le.fromString(t));if(!de.isDocumentKey(i))throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return qa(r,new de(i))}if(t instanceof ht)return qa(r,t._key);throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fd(t)}.`)}function CE(r,e){if(!Array.isArray(r)||r.length===0)throw new te(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $A(r,e){const t=(function(a,l){for(const c of a)for(const m of c.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new te(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class l_{convertValue(e,t="none"){switch(jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Qr(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[gl].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>vt(c.doubleValue)));return new os(t)}convertGeoPoint(e){return new Ci(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=_d(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const t=ks(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Le.fromString(e);be(BS(i),9688,{name:e});const a=new kr(i.get(1),i.get(3)),l=new de(i.popFirst(5));return a.isEqual(t)||Vt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class iV extends l_{constructor(e){super(),this.firestore=e}convertBytes(e){return new gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,t)}}class ka{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let di=class ZA extends Ic{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Dd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ZA._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};di._jsonSchemaVersion="firestore/documentSnapshot/1.0",di._jsonSchema={type:Gt("string",di._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};let cc=class extends di{data(e={}){return super.data(e)}},Di=class JA{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ka(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new cc(this._firestore,this._userDataWriter,i.key,i,new ka(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((m=>{const g=new cc(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ka(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new cc(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ka(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,v=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),v=c.indexOf(m.doc.key)),{type:sV(m.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=JA._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function sV(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:r})}}function WA(r,e){return r instanceof di&&e instanceof di?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(r._document===null?e._document===null:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Di&&e instanceof Di&&r._firestore===e._firestore&&UA(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(r){r=Ke(r,ht);const e=Ke(r.firestore,Rt);return DA(cn(e),r._key).then((t=>u_(e,r,t)))}Di._jsonSchemaVersion="firestore/querySnapshot/1.0",Di._jsonSchema={type:Gt("string",Di._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class to extends l_{constructor(e){super(),this.firestore=e}convertBytes(e){return new gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,t)}}function aV(r){r=Ke(r,ht);const e=Ke(r.firestore,Rt),t=cn(e),i=new to(e);return ID(t,r._key).then((a=>new di(e,i,r._key,a,new ka(a!==null&&a.hasLocalMutations,!0),r.converter)))}function oV(r){r=Ke(r,ht);const e=Ke(r.firestore,Rt);return DA(cn(e),r._key,{source:"server"}).then((t=>u_(e,r,t)))}function qp(r){r=Ke(r,Rn);const e=Ke(r.firestore,Rt),t=cn(e),i=new to(e);return YA(r._query),VA(t,r._query).then((a=>new Di(e,i,r,a)))}function lV(r){r=Ke(r,Rn);const e=Ke(r.firestore,Rt),t=cn(e),i=new to(e);return ND(t,r._query).then((a=>new Di(e,i,r,a)))}function uV(r){r=Ke(r,Rn);const e=Ke(r.firestore,Rt),t=cn(e),i=new to(e);return VA(t,r._query,{source:"server"}).then((a=>new Di(e,i,r,a)))}function DE(r,e,t){r=Ke(r,ht);const i=Ke(r.firestore,Rt),a=kd(r.converter,e,t);return kl(i,[Cd(Wa(i),"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,bt.none())])}function nl(r,e,t,...i){r=Ke(r,ht);const a=Ke(r.firestore,Rt),l=Wa(a);let c;return c=typeof(e=ut(e))=="string"||e instanceof qr?n_(l,"updateDoc",r._key,e,t,i):t_(l,"updateDoc",r._key,e),kl(a,[c.toMutation(r._key,bt.exists(!0))])}function cV(r){return kl(Ke(r.firestore,Rt),[new Dl(r._key,bt.none())])}function hV(r,e){const t=Ke(r.firestore,Rt),i=an(r),a=kd(r.converter,e);return kl(t,[Cd(Wa(r.firestore),"addDoc",i._key,a,r.converter!==null,{}).toMutation(i._key,bt.exists(!1))]).then((()=>i))}function hc(r,...e){var g,p,v;r=ut(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Lp(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Lp(e[i])){const E=e[i];e[i]=(g=E.next)==null?void 0:g.bind(E),e[i+1]=(p=E.error)==null?void 0:p.bind(E),e[i+2]=(v=E.complete)==null?void 0:v.bind(E)}let l,c,m;if(r instanceof ht)c=Ke(r.firestore,Rt),m=Nl(r._key.path),l={next:E=>{e[i]&&e[i](u_(c,r,E))},error:e[i+1],complete:e[i+2]};else{const E=Ke(r,Rn);c=Ke(E.firestore,Rt),m=E._query;const S=new to(c);l={next:D=>{e[i]&&e[i](new Di(c,S,E,D))},error:e[i+1],complete:e[i+2]},YA(r._query)}return(function(S,D,G,z){const U=new Rd(z),ie=new qy(D,U,G);return S.asyncQueue.enqueueAndForget((async()=>Ly(await xl(S),ie))),()=>{U.Nu(),S.asyncQueue.enqueueAndForget((async()=>By(await xl(S),ie)))}})(cn(c),m,a,l)}function fV(r,e){return CD(cn(r=Ke(r,Rt)),Lp(e)?e:{next:e})}function kl(r,e){return(function(i,a){const l=new un;return i.asyncQueue.enqueueAndForget((async()=>iD(await $y(i),a,l))),l.promise})(cn(r),e)}function u_(r,e,t){const i=t.docs.get(e._key),a=new to(r);return new di(r,a,e._key,i,new ka(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ex=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wa(e)}set(e,t,i){this._verifyNotCommitted();const a=Ir(e,this._firestore),l=kd(a.converter,t,i),c=Cd(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,bt.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=Ir(e,this._firestore);let c;return c=typeof(t=ut(t))=="string"||t instanceof qr?n_(this._dataReader,"WriteBatch.update",l._key,t,i,a):t_(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ir(e,this._firestore);return this._mutations=this._mutations.concat(new Dl(t._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ir(r,e){if((r=ut(r)).firestore!==e)throw new te(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wa(e)}get(e){const t=Ir(e,this._firestore),i=new iV(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return pe(24041);const l=a[0];if(l.isFoundDocument())return new Ic(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new Ic(this._firestore,i,t._key,null,t.converter);throw pe(18433,{doc:l})}))}set(e,t,i){const a=Ir(e,this._firestore),l=kd(a.converter,t,i),c=Cd(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(e,t,i,...a){const l=Ir(e,this._firestore);let c;return c=typeof(t=ut(t))=="string"||t instanceof qr?n_(this._dataReader,"Transaction.update",l._key,t,i,a):t_(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=Ir(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gV=class extends mV{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ir(e,this._firestore),i=new to(this._firestore);return super.get(e).then((a=>new di(this._firestore,i,t._key,a._document,new ka(!1,!1),t.converter)))}};function pV(r,e,t){r=Ke(r,Rt);const i={...dV,...t};return(function(l){if(l.maxAttempts<1)throw new te(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(l,c,m){const g=new un;return l.asyncQueue.enqueueAndForget((async()=>{const p=await AD(l);new wD(l.asyncQueue,p,m,c,g).ju()})),g.promise})(cn(r),(a=>e(new gV(r,a))),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(){return new Gc("deleteField")}function _V(){return new Zy("serverTimestamp")}function vV(...r){return new Jy("arrayUnion",r)}function TV(...r){return new Wy("arrayRemove",r)}function bV(r){return new e_("increment",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(r){return cn(r=Ke(r,Rt)),new ex(r,(e=>kl(r,e)))}(function(e,t=!0){(function(a){Il=a})(hd),Ba(new Ms("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),m=new Rt(new y2(i.getProvider("auth-internal")),new T2(c,i.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new te(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kr(p.options.projectId,v)})(c,a),c);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Ni(lb,ub,e),Ni(lb,ub,"esm2020")})();const EV="@firebase/firestore-compat",wV="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(r,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new te("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(){if(typeof Uint8Array>"u")throw new te("unimplemented","Uint8Arrays are not available in this environment.")}function OE(){if(!tN())throw new te("unimplemented","Blobs are unavailable in Firestore in this environment.")}let tx=class Fp{constructor(e){this._delegate=e}static fromBase64String(e){return OE(),new Fp(gn.fromBase64String(e))}static fromUint8Array(e){return VE(),new Fp(gn.fromUint8Array(e))}toBase64(){return OE(),this._delegate.toBase64()}toUint8Array(){return VE(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(r){return SV(r,["next","error","complete"])}function SV(r,e){if(typeof r!="object"||r===null)return!1;const t=r;for(const i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{enableIndexedDbPersistence(e,t){return jD(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return UD(e._delegate)}clearIndexedDbPersistence(e){return LD(e._delegate)}}class nx{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof kr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&us("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){OD(this._delegate,e,t,i)}enableNetwork(){return zD(this._delegate)}disableNetwork(){return qD(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Rw("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return BD(this._delegate)}onSnapshotsInSync(e){return fV(this._delegate,e)}get app(){if(!this._appCompat)throw new te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Rl(this,Ri(this._delegate,e))}catch(t){throw Sn(t,"collection()","Firestore.collection()")}}doc(e){try{return new hi(this,an(this._delegate,e))}catch(t){throw Sn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new wn(this,MD(this._delegate,e))}catch(t){throw Sn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return pV(this._delegate,t=>e(new ix(this,t)))}batch(){return cn(this._delegate),new sx(new ex(this._delegate,e=>kl(this._delegate,e)))}loadBundle(e){return FD(this._delegate,e)}namedQuery(e){return GD(this._delegate,e).then(t=>t?new wn(this,t):null)}}class jd extends l_{constructor(e){super(),this.firestore=e}convertBytes(e){return new tx(new gn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return hi.forKey(t,this.firestore,null)}}function xV(r){d2(r)}class ix{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jd(e)}get(e){const t=ja(e);return this._delegate.get(t).then(i=>new Nc(this._firestore,new di(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const a=ja(e);return i?(c_("Transaction.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=ja(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=ja(e);return this._delegate.delete(t),this}}class sx{constructor(e){this._delegate=e}set(e,t,i){const a=ja(e);return i?(c_("WriteBatch.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=ja(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=ja(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $a{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new cc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cc(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=$a.INSTANCES;let a=i.get(e);a||(a=new WeakMap,i.set(e,a));let l=a.get(t);return l||(l=new $a(e,new jd(e),t),a.set(t,l)),l}}$a.INSTANCES=new WeakMap;class hi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jd(e)}static forPath(e,t,i){if(e.length%2!==0)throw new te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new hi(t,new ht(t._delegate,i,new de(e)))}static forKey(e,t,i){return new hi(t,new ht(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Rl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Rl(this.firestore,Ri(this._delegate,e))}catch(t){throw Sn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ut(e),e instanceof ht?jA(this._delegate,e):!1}set(e,t){t=c_("DocumentReference.set",t);try{return t?DE(this._delegate,e,t):DE(this._delegate,e)}catch(i){throw Sn(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?nl(this._delegate,e):nl(this._delegate,e,t,...i)}catch(a){throw Sn(a,"updateDoc()","DocumentReference.update()")}}delete(){return cV(this._delegate)}onSnapshot(...e){const t=rx(e),i=ax(e,a=>new Nc(this.firestore,new di(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return hc(this._delegate,t,i)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=aV(this._delegate):(e==null?void 0:e.source)==="server"?t=oV(this._delegate):t=rV(this._delegate),t.then(i=>new Nc(this.firestore,new di(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new hi(this.firestore,e?this._delegate.withConverter($a.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Sn(r,e,t){return r.message=r.message.replace(e,t),r}function rx(r){for(const e of r)if(typeof e=="object"&&!Gp(e))return e;return{}}function ax(r,e){var i,a;let t;return Gp(r[0])?t=r[0]:Gp(r[1])?t=r[1]:typeof r[0]=="function"?t={next:r[0],error:r[1],complete:r[2]}:t={next:r[1],error:r[2],complete:r[3]},{next:l=>{t.next&&t.next(e(l))},error:(i=t.error)==null?void 0:i.bind(t),complete:(a=t.complete)==null?void 0:a.bind(t)}}class Nc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new hi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return WA(this._delegate,e._delegate)}}class Cc extends Nc{data(e){const t=this._delegate.data(e);return this._delegate._converter||m2(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class wn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jd(e)}where(e,t,i){try{return new wn(this.firestore,Wi(this._delegate,zp(e,t,i)))}catch(a){throw Sn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new wn(this.firestore,Wi(this._delegate,$D(e,t)))}catch(i){throw Sn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new wn(this.firestore,Wi(this._delegate,ZD(e)))}catch(t){throw Sn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new wn(this.firestore,Wi(this._delegate,JD(e)))}catch(t){throw Sn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new wn(this.firestore,Wi(this._delegate,WD(...e)))}catch(t){throw Sn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new wn(this.firestore,Wi(this._delegate,eV(...e)))}catch(t){throw Sn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new wn(this.firestore,Wi(this._delegate,tV(...e)))}catch(t){throw Sn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new wn(this.firestore,Wi(this._delegate,nV(...e)))}catch(t){throw Sn(t,"endAt()","Query.endAt()")}}isEqual(e){return UA(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=lV(this._delegate):(e==null?void 0:e.source)==="server"?t=uV(this._delegate):t=qp(this._delegate),t.then(i=>new Hp(this.firestore,new Di(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=rx(e),i=ax(e,a=>new Hp(this.firestore,new Di(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return hc(this._delegate,t,i)}withConverter(e){return new wn(this.firestore,e?this._delegate.withConverter($a.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class RV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Cc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Hp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new wn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Cc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new RV(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Cc(this._firestore,i))})}isEqual(e){return WA(this._delegate,e._delegate)}}class Rl extends wn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new hi(this.firestore,e):null}doc(e){try{return e===void 0?new hi(this.firestore,an(this._delegate)):new hi(this.firestore,an(this._delegate,e))}catch(t){throw Sn(t,"doc()","CollectionReference.doc()")}}add(e){return hV(this._delegate,e).then(t=>new hi(this.firestore,t))}isEqual(e){return jA(this._delegate,e._delegate)}withConverter(e){return new Rl(this.firestore,e?this._delegate.withConverter($a.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ja(r){return Ke(r,ht)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(...e){this._delegate=new qr(...e)}static documentId(){return new h_(Tt.keyField().canonicalString())}isEqual(e){return e=ut(e),e instanceof qr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{static serverTimestamp(){const e=_V();return e._methodName="FieldValue.serverTimestamp",new Ma(e)}static delete(){const e=yV();return e._methodName="FieldValue.delete",new Ma(e)}static arrayUnion(...e){const t=vV(...e);return t._methodName="FieldValue.arrayUnion",new Ma(t)}static arrayRemove(...e){const t=TV(...e);return t._methodName="FieldValue.arrayRemove",new Ma(t)}static increment(e){const t=bV(e);return t._methodName="FieldValue.increment",new Ma(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV={Firestore:nx,GeoPoint:Ci,Timestamp:We,Blob:tx,Transaction:ix,WriteBatch:sx,DocumentReference:hi,DocumentSnapshot:Nc,Query:wn,QueryDocumentSnapshot:Cc,QuerySnapshot:Hp,CollectionReference:Rl,FieldPath:h_,FieldValue:Ma,setLogLevel:xV,CACHE_SIZE_UNLIMITED:kD};function NV(r,e){r.INTERNAL.registerComponent(new Ms("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(i,a)},"PUBLIC").setServiceProps({...IV}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(r){NV(r,(e,t)=>new nx(e,t,new AV)),r.registerVersion(EV,wV)}CV(za);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="firebasestorage.googleapis.com",lx="storageBucket",DV=120*1e3,VV=600*1e3,OV=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt extends Fr{constructor(e,t,i=0){super(ap(e),`Firebase Storage: ${t} (${ap(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ap(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pt||(pt={}));function ap(r){return"storage/"+r}function f_(){const r="An unknown error occurred, please check the error payload for server response.";return new wt(pt.UNKNOWN,r)}function MV(r){return new wt(pt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function PV(r){return new wt(pt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kV(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new wt(pt.UNAUTHENTICATED,r)}function jV(){return new wt(pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UV(r){return new wt(pt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function ux(){return new wt(pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cx(){return new wt(pt.CANCELED,"User canceled the upload/download.")}function LV(r){return new wt(pt.INVALID_URL,"Invalid URL '"+r+"'.")}function BV(r){return new wt(pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function zV(){return new wt(pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+lx+"' property when initializing the app?")}function hx(){return new wt(pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qV(){return new wt(pt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function FV(){return new wt(pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function GV(r){return new wt(pt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rl(r){return new wt(pt.INVALID_ARGUMENT,r)}function fx(){return new wt(pt.APP_DELETED,"The Firebase app was deleted.")}function dx(r){return new wt(pt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fc(r,e){return new wt(pt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function Xu(r){throw new wt(pt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=pn.makeFromUrl(e,t)}catch{return new pn(e,"")}if(i.path==="")return i;throw BV(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(ge){ge.path.charAt(ge.path.length-1)==="/"&&(ge.path_=ge.path_.slice(0,-1))}const c="(/(.*))?$",m=new RegExp("^gs://"+a+c,"i"),g={bucket:1,path:3};function p(ge){ge.path_=decodeURIComponent(ge.path)}const v="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",D=new RegExp(`^https?://${E}/${v}/b/${a}/o${S}`,"i"),G={bucket:1,path:3},z=t===ox?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",ie=new RegExp(`^https?://${z}/${a}/${U}`,"i"),se=[{regex:m,indices:g,postModify:l},{regex:D,indices:G,postModify:p},{regex:ie,indices:{bucket:1,path:2},postModify:p}];for(let ge=0;ge<se.length;ge++){const Se=se[ge],Te=Se.regex.exec(e);if(Te){const I=Te[Se.indices.bucket];let R=Te[Se.indices.path];R||(R=""),i=new pn(I,R),Se.postModify(i);break}}if(i==null)throw LV(e);return i}}class HV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(r,e,t){let i=1,a=null,l=null,c=!1,m=0;function g(){return m===2}let p=!1;function v(...U){p||(p=!0,e.apply(null,U))}function E(U){a=setTimeout(()=>{a=null,r(D,g())},U)}function S(){l&&clearTimeout(l)}function D(U,...ie){if(p){S();return}if(U){S(),v.call(null,U,...ie);return}if(g()||c){S(),v.call(null,U,...ie);return}i<64&&(i*=2);let se;m===1?(m=2,se=0):se=(i+Math.random())*1e3,E(se)}let G=!1;function z(U){G||(G=!0,S(),!p&&(a!==null?(U||(m=2),clearTimeout(a),E(0)):U||(m=1)))}return E(0),l=setTimeout(()=>{c=!0,z(!0)},t),z}function KV(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(r){return r!==void 0}function XV(r){return typeof r=="function"}function $V(r){return typeof r=="object"&&!Array.isArray(r)}function Ud(r){return typeof r=="string"||r instanceof String}function ME(r){return d_()&&r instanceof Blob}function d_(){return typeof Blob<"u"}function Qp(r,e,t,i){if(i<e)throw rl(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>t)throw rl(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(r,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${r}`}function mx(r){const e=encodeURIComponent;let t="?";for(const i in r)if(r.hasOwnProperty(i)){const a=e(i)+"="+e(r[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var La;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(La||(La={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(r,e){const t=r>=500&&r<600,a=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,t,i,a,l,c,m,g,p,v,E,S=!0,D=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=m,this.errorCallback_=g,this.timeout_=p,this.progressCallback_=v,this.connectionFactory_=E,this.retry=S,this.isUsingEmulator=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((G,z)=>{this.resolve_=G,this.reject_=z,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new Nf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=m=>{const g=m.loaded,p=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,p)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const m=l.getErrorCode()===La.NO_ERROR,g=l.getStatus();if(!m||gx(g,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===La.ABORT;i(!1,new Nf(!1,null,v));return}const p=this.successCodes_.indexOf(g)!==-1;i(!0,new Nf(p,l))})},t=(i,a)=>{const l=this.resolve_,c=this.reject_,m=a.connection;if(a.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());YV(g)?l(g):l()}catch(g){c(g)}else if(m!==null){const g=f_();g.serverResponse=m.getErrorText(),this.errorCallback_?c(this.errorCallback_(m,g)):c(g)}else if(a.canceled){const g=this.appDelete_?fx():cx();c(g)}else{const g=ux();c(g)}};this.canceled_?t(!1,new Nf(!1,null,!0)):this.backoffId_=QV(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&KV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function JV(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function WV(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function e4(r,e){e&&(r["X-Firebase-GMPID"]=e)}function t4(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function n4(r,e,t,i,a,l,c=!0,m=!1){const g=mx(r.urlParams),p=r.url+g,v=Object.assign({},r.headers);return e4(v,e),JV(v,t),WV(v,l),t4(v,i),new ZV(p,r.method,v,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a,c,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function s4(...r){const e=i4();if(e!==void 0){const t=new e;for(let i=0;i<r.length;i++)t.append(r[i]);return t.getBlob()}else{if(d_())return new Blob(r);throw new wt(pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function r4(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(r){if(typeof atob>"u")throw GV("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class op{constructor(e,t){this.data=e,this.contentType=t||null}}function px(r,e){switch(r){case fi.RAW:return new op(yx(e));case fi.BASE64:case fi.BASE64URL:return new op(_x(r,e));case fi.DATA_URL:return new op(l4(e),u4(e))}throw f_()}function yx(r){const e=[];for(let t=0;t<r.length;t++){let i=r.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,c=r.charCodeAt(++t);i=65536|(l&1023)<<10|c&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function o4(r){let e;try{e=decodeURIComponent(r)}catch{throw fc(fi.DATA_URL,"Malformed data URL.")}return yx(e)}function _x(r,e){switch(r){case fi.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw fc(r,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case fi.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw fc(r,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=a4(e)}catch(a){throw a.message.includes("polyfill")?a:fc(r,"Invalid character found")}const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}class vx{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw fc(fi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=c4(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function l4(r){const e=new vx(r);return e.base64?_x(fi.BASE64,e.rest):o4(e.rest)}function u4(r){return new vx(r).contentType}function c4(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t){let i=0,a="";ME(e)?(this.data_=e,i=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(ME(this.data_)){const i=this.data_,a=r4(i,e,t);return a===null?null:new Ds(a)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ds(i,!0)}}static getBlob(...e){if(d_()){const t=e.map(i=>i instanceof Ds?i.data_:i);return new Ds(s4.apply(null,t))}else{const t=e.map(c=>Ud(c)?px(fi.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const a=new Uint8Array(i);let l=0;return t.forEach(c=>{for(let m=0;m<c.length;m++)a[l++]=c[m]}),new Ds(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(r){let e;try{e=JSON.parse(r)}catch{return null}return $V(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function f4(r,e){const t=e.split("/").filter(i=>i.length>0).join("/");return r.length===0?t:r+"/"+t}function Tx(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(r,e){return e}class En{constructor(e,t,i,a){this.server=e,this.local=t||e,this.writable=!!i,this.xform=a||d4}}let Cf=null;function m4(r){return!Ud(r)||r.length<2?r:Tx(r)}function Ld(){if(Cf)return Cf;const r=[];r.push(new En("bucket")),r.push(new En("generation")),r.push(new En("metageneration")),r.push(new En("name","fullPath",!0));function e(l,c){return m4(c)}const t=new En("name");t.xform=e,r.push(t);function i(l,c){return c!==void 0?Number(c):c}const a=new En("size");return a.xform=i,r.push(a),r.push(new En("timeCreated")),r.push(new En("updated")),r.push(new En("md5Hash",null,!0)),r.push(new En("cacheControl",null,!0)),r.push(new En("contentDisposition",null,!0)),r.push(new En("contentEncoding",null,!0)),r.push(new En("contentLanguage",null,!0)),r.push(new En("contentType",null,!0)),r.push(new En("metadata","customMetadata",!0)),Cf=r,Cf}function g4(r,e){function t(){const i=r.bucket,a=r.fullPath,l=new pn(i,a);return e._makeStorageReference(l)}Object.defineProperty(r,"ref",{get:t})}function p4(r,e,t){const i={};i.type="file";const a=t.length;for(let l=0;l<a;l++){const c=t[l];i[c.local]=c.xform(i,e[c.server])}return g4(i,r),i}function bx(r,e,t){const i=m_(e);return i===null?null:p4(r,i,t)}function y4(r,e,t,i){const a=m_(e);if(a===null||!Ud(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(p=>{const v=r.bucket,E=r.fullPath,S="/b/"+c(v)+"/o/"+c(E),D=Xr(S,t,i),G=mx({alt:"media",token:p});return D+G})[0]}function g_(r,e){const t={},i=e.length;for(let a=0;a<i;a++){const l=e[a];l.writable&&(t[l.server]=r[l.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="prefixes",kE="items";function _4(r,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[PE])for(const a of t[PE]){const l=a.replace(/\/$/,""),c=r._makeStorageReference(new pn(e,l));i.prefixes.push(c)}if(t[kE])for(const a of t[kE]){const l=r._makeStorageReference(new pn(e,a.name));i.items.push(l)}return i}function v4(r,e,t){const i=m_(t);return i===null?null:_4(r,e,i)}class qs{constructor(e,t,i,a){this.url=e,this.method=t,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(r){if(!r)throw f_()}function Bd(r,e){function t(i,a){const l=bx(r,a,e);return ls(l!==null),l}return t}function T4(r,e){function t(i,a){const l=v4(r,e,a);return ls(l!==null),l}return t}function b4(r,e){function t(i,a){const l=bx(r,a,e);return ls(l!==null),y4(l,a,r.host,r._protocol)}return t}function jl(r){function e(t,i){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=jV():a=kV():t.getStatus()===402?a=PV(r.bucket):t.getStatus()===403?a=UV(r.path):a=i,a.status=t.getStatus(),a.serverResponse=i.serverResponse,a}return e}function zd(r){const e=jl(r);function t(i,a){let l=e(i,a);return i.getStatus()===404&&(l=MV(r.path)),l.serverResponse=a.serverResponse,l}return t}function Ex(r,e,t){const i=e.fullServerUrl(),a=Xr(i,r.host,r._protocol),l="GET",c=r.maxOperationRetryTime,m=new qs(a,l,Bd(r,t),c);return m.errorHandler=zd(e),m}function E4(r,e,t,i,a){const l={};e.isRoot?l.prefix="":l.prefix=e.path+"/",t.length>0&&(l.delimiter=t),i&&(l.pageToken=i),a&&(l.maxResults=a);const c=e.bucketOnlyServerUrl(),m=Xr(c,r.host,r._protocol),g="GET",p=r.maxOperationRetryTime,v=new qs(m,g,T4(r,e.bucket),p);return v.urlParams=l,v.errorHandler=jl(e),v}function w4(r,e,t){const i=e.fullServerUrl(),a=Xr(i,r.host,r._protocol),l="GET",c=r.maxOperationRetryTime,m=new qs(a,l,b4(r,t),c);return m.errorHandler=zd(e),m}function S4(r,e,t,i){const a=e.fullServerUrl(),l=Xr(a,r.host,r._protocol),c="PATCH",m=g_(t,i),g={"Content-Type":"application/json; charset=utf-8"},p=r.maxOperationRetryTime,v=new qs(l,c,Bd(r,i),p);return v.headers=g,v.body=m,v.errorHandler=zd(e),v}function A4(r,e){const t=e.fullServerUrl(),i=Xr(t,r.host,r._protocol),a="DELETE",l=r.maxOperationRetryTime;function c(g,p){}const m=new qs(i,a,c,l);return m.successCodes=[200,204],m.errorHandler=zd(e),m}function x4(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function wx(r,e,t){const i=Object.assign({},t);return i.fullPath=r.path,i.size=e.size(),i.contentType||(i.contentType=x4(null,e)),i}function R4(r,e,t,i,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function m(){let se="";for(let ge=0;ge<2;ge++)se=se+Math.random().toString().slice(2);return se}const g=m();c["Content-Type"]="multipart/related; boundary="+g;const p=wx(e,i,a),v=g_(p,t),E="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+g+`\r
Content-Type: `+p.contentType+`\r
\r
`,S=`\r
--`+g+"--",D=Ds.getBlob(E,i,S);if(D===null)throw hx();const G={name:p.fullPath},z=Xr(l,r.host,r._protocol),U="POST",ie=r.maxUploadRetryTime,re=new qs(z,U,Bd(r,t),ie);return re.urlParams=G,re.headers=c,re.body=D.uploadData(),re.errorHandler=jl(e),re}class ud{constructor(e,t,i,a){this.current=e,this.total=t,this.finalized=!!i,this.metadata=a||null}}function p_(r,e){let t=null;try{t=r.getResponseHeader("X-Goog-Upload-Status")}catch{ls(!1)}return ls(!!t&&(e||["active"]).indexOf(t)!==-1),t}function I4(r,e,t,i,a){const l=e.bucketOnlyServerUrl(),c=wx(e,i,a),m={name:c.fullPath},g=Xr(l,r.host,r._protocol),p="POST",v={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},E=g_(c,t),S=r.maxUploadRetryTime;function D(z){p_(z);let U;try{U=z.getResponseHeader("X-Goog-Upload-URL")}catch{ls(!1)}return ls(Ud(U)),U}const G=new qs(g,p,D,S);return G.urlParams=m,G.headers=v,G.body=E,G.errorHandler=jl(e),G}function N4(r,e,t,i){const a={"X-Goog-Upload-Command":"query"};function l(p){const v=p_(p,["active","final"]);let E=null;try{E=p.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ls(!1)}E||ls(!1);const S=Number(E);return ls(!isNaN(S)),new ud(S,i.size(),v==="final")}const c="POST",m=r.maxUploadRetryTime,g=new qs(t,c,l,m);return g.headers=a,g.errorHandler=jl(e),g}const jE=256*1024;function C4(r,e,t,i,a,l,c,m){const g=new ud(0,0);if(c?(g.current=c.current,g.total=c.total):(g.current=0,g.total=i.size()),i.size()!==g.total)throw qV();const p=g.total-g.current;let v=p;a>0&&(v=Math.min(v,a));const E=g.current,S=E+v;let D="";v===0?D="finalize":p===v?D="upload, finalize":D="upload";const G={"X-Goog-Upload-Command":D,"X-Goog-Upload-Offset":`${g.current}`},z=i.slice(E,S);if(z===null)throw hx();function U(ge,Se){const Te=p_(ge,["active","final"]),I=g.current+v,R=i.size();let N;return Te==="final"?N=Bd(e,l)(ge,Se):N=null,new ud(I,R,Te==="final",N)}const ie="POST",re=e.maxUploadRetryTime,se=new qs(t,ie,U,re);return se.headers=G,se.body=z.uploadData(),se.progressCallback=m||null,se.errorHandler=jl(r),se}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4={STATE_CHANGED:"state_changed"},An={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lp(r){switch(r){case"running":case"pausing":case"canceling":return An.RUNNING;case"paused":return An.PAUSED;case"success":return An.SUCCESS;case"canceled":return An.CANCELED;case"error":return An.ERROR;default:return An.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,t,i){if(XV(e)||t!=null||i!=null)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(r){return(...e)=>{Promise.resolve().then(()=>r(...e))}}class O4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=La.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=La.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=La.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,a,l){if(this.sent_)throw Xu("cannot .send() more than once");if(Dc(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class M4 extends O4{initXhr(){this.xhr_.responseType="text"}}function ns(){return new M4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=Ld(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(pt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(gx(a.status,[]))if(l)a=ux();else{this.sleepTime=Math.max(this.sleepTime*2,OV),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(pt.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,l)=>{this._resolve=a,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const i=I4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(i,ns,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const a=N4(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(a,ns,t,i);this._request=l,l.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=jE*this._chunkMultiplier,t=new ud(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((a,l)=>{let c;try{c=C4(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){this._error=g,this._transition("error");return}const m=this._ref.storage._makeRequest(c,ns,a,l,!1);this._request=m,m.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){jE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=Ex(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(i,ns,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=R4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(i,ns,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=cx(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=lp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,a){const l=new V4(t||void 0,i||void 0,a||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(lp(this._state)){case An.SUCCESS:$o(this._resolve.bind(null,this.snapshot))();break;case An.CANCELED:case An.ERROR:const t=this._reject;$o(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(lp(this._state)){case An.RUNNING:case An.PAUSED:e.next&&$o(e.next.bind(e,this.snapshot))();break;case An.SUCCESS:e.complete&&$o(e.complete.bind(e))();break;case An.CANCELED:case An.ERROR:e.error&&$o(e.error.bind(e,this._error))();break;default:e.error&&$o(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t){this._service=e,t instanceof pn?this._location=t:this._location=pn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Za(e,t)}get root(){const e=new pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Tx(this._location.path)}get storage(){return this._service}get parent(){const e=h4(this._location.path);if(e===null)return null;const t=new pn(this._location.bucket,e);return new Za(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw dx(e)}}function P4(r,e,t){return r._throwIfRoot("uploadBytesResumable"),new Sx(r,new Ds(e),t)}function k4(r){const e={prefixes:[],items:[]};return Ax(r,e).then(()=>e)}async function Ax(r,e,t){const a=await xx(r,{pageToken:t});e.prefixes.push(...a.prefixes),e.items.push(...a.items),a.nextPageToken!=null&&await Ax(r,e,a.nextPageToken)}function xx(r,e){e!=null&&typeof e.maxResults=="number"&&Qp("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=E4(r.storage,r._location,"/",t.pageToken,t.maxResults);return r.storage.makeRequestWithTokens(i,ns)}function j4(r){r._throwIfRoot("getMetadata");const e=Ex(r.storage,r._location,Ld());return r.storage.makeRequestWithTokens(e,ns)}function U4(r,e){r._throwIfRoot("updateMetadata");const t=S4(r.storage,r._location,e,Ld());return r.storage.makeRequestWithTokens(t,ns)}function L4(r){r._throwIfRoot("getDownloadURL");const e=w4(r.storage,r._location,Ld());return r.storage.makeRequestWithTokens(e,ns).then(t=>{if(t===null)throw FV();return t})}function B4(r){r._throwIfRoot("deleteObject");const e=A4(r.storage,r._location);return r.storage.makeRequestWithTokens(e,ns)}function Rx(r,e){const t=f4(r._location.path,e),i=new pn(r._location.bucket,t);return new Za(r.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(r){return/^[A-Za-z]+:\/\//.test(r)}function q4(r,e){return new Za(r,e)}function Ix(r,e){if(r instanceof y_){const t=r;if(t._bucket==null)throw zV();const i=new Za(t,t._bucket);return e!=null?Ix(i,e):i}else return e!==void 0?Rx(r,e):r}function F4(r,e){if(e&&z4(e)){if(r instanceof y_)return q4(r,e);throw rl("To use ref(service, url), the first argument must be a Storage instance.")}else return Ix(r,e)}function UE(r,e){const t=e==null?void 0:e[lx];return t==null?null:pn.makeFromBucketSpec(t,r)}function G4(r,e,t,i={}){r.host=`${e}:${t}`;const a=Dc(e);a&&(ZE(`https://${r.host}/b`),WE("Storage",!0)),r._isUsingEmulator=!0,r._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(r._overrideAuthToken=typeof l=="string"?l:JE(l,r.app.options.projectId))}class y_{constructor(e,t,i,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=ox,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DV,this._maxUploadRetryTime=VV,this._requests=new Set,a!=null?this._bucket=pn.makeFromBucketSpec(a,this._host):this._bucket=UE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pn.makeFromBucketSpec(this._url,e):this._bucket=UE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ey(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Za(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new HV(fx());{const c=n4(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const LE="@firebase/storage",BE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="storage";function Q4(r,e,t){return r=ut(r),P4(r,e,t)}function K4(r){return r=ut(r),j4(r)}function Y4(r,e){return r=ut(r),U4(r,e)}function X4(r,e){return r=ut(r),xx(r,e)}function $4(r){return r=ut(r),k4(r)}function Z4(r){return r=ut(r),L4(r)}function J4(r){return r=ut(r),B4(r)}function zE(r,e){return r=ut(r),F4(r,e)}function W4(r,e){return Rx(r,e)}function eO(r,e,t,i={}){G4(r,e,t,i)}function tO(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),a=r.getProvider("app-check-internal");return new y_(t,i,a,e,hd)}function nO(){Ba(new Ms(H4,tO,"PUBLIC").setMultipleInstances(!0)),Ni(LE,BE,""),Ni(LE,BE,"esm2020")}nO();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Df(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new Df(i,this,this._ref))},t)}on(e,t,i,a){let l;return t&&(typeof t=="function"?l=c=>t(new Df(c,this,this._ref)):l={next:t.next?c=>t.next(new Df(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,l,i||void 0,a||void 0)}}class FE{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Os(e,this._service))}get items(){return this._delegate.items.map(e=>new Os(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=W4(this._delegate,e);return new Os(t,this.storage)}get root(){return new Os(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Os(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new qE(Q4(this._delegate,e,t),this)}putString(e,t=fi.RAW,i){this._throwIfRoot("putString");const a=px(t,e),l={...i};return l.contentType==null&&a.contentType!=null&&(l.contentType=a.contentType),new qE(new Sx(this._delegate,new Ds(a.data,!0),l),this)}listAll(){return $4(this._delegate).then(e=>new FE(e,this.storage))}list(e){return X4(this._delegate,e||void 0).then(t=>new FE(t,this.storage))}getMetadata(){return K4(this._delegate)}updateMetadata(e){return Y4(this._delegate,e)}getDownloadURL(){return Z4(this._delegate)}delete(){return this._throwIfRoot("delete"),J4(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw dx(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(GE(e))throw rl("ref() expected a child path but got a URL, use refFromURL instead.");return new Os(zE(this._delegate,e),this)}refFromURL(e){if(!GE(e))throw rl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{pn.makeFromUrl(e,this._delegate.host)}catch{throw rl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Os(zE(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){eO(this._delegate,e,t,i)}}function GE(r){return/^[A-Za-z]+:\/\//.test(r)}const iO="@firebase/storage-compat",sO="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="storage-compat";function aO(r,{instanceIdentifier:e}){const t=r.getProvider("app-compat").getImmediate(),i=r.getProvider("storage").getImmediate({identifier:e});return new Nx(t,i)}function oO(r){const e={TaskState:An,TaskEvent:D4,StringFormat:fi,Storage:Nx,Reference:Os};r.INTERNAL.registerComponent(new Ms(rO,aO,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),r.registerVersion(iO,sO)}oO(za);const lO={apiKey:"AIzaSyBWwjWC4Np0ko2cqkpLRxYXTNQr_lJkS6M",authDomain:"gram-d8166.firebaseapp.com",projectId:"gram-d8166",storageBucket:"gram-d8166.firebasestorage.app",messagingSenderId:"124464215211",appId:"1:124464215211:web:996cfead596a09d05f73ee"};za.apps.length||za.initializeApp(lO);const Et=za.firestore(),up=za.storage(),uO=({message:r,type:e,onClose:t})=>{const i=e==="success"?"bg-green-500":"bg-red-500";return ye.useEffect(()=>{const a=setTimeout(t,4e3);return()=>clearTimeout(a)},[t]),b.jsxs("div",{className:`fixed top-5 right-5 z-50 text-white px-6 py-3 rounded-lg shadow-lg flex items-center ${i}`,children:[b.jsx("p",{children:r}),b.jsx("button",{onClick:t,className:"ml-4 text-xl font-semibold",children:""})]})},cO=({onLogout:r})=>{const[e,t]=ye.useState([]),[i,a]=ye.useState([]),[l,c]=ye.useState([]),[m,g]=ye.useState(null),[p,v]=ye.useState(null),[E,S]=ye.useState(null),[D,G]=ye.useState(xi.Dashboard),[z,U]=ye.useState(!1),[ie,re]=ye.useState(null),[se,ge]=ye.useState(!0);ye.useEffect(()=>{ge(!0);const X=hc(Ri(Et,"students"),ue=>{t(ue.docs.map(Ie=>({...Ie.data(),id:Ie.id}))),ge(!1)},ue=>{console.error("Error fetching students: ",ue),re({message:"Error connecting to the database. Check console.",type:"error",onClose:()=>re(null)}),ge(!1)}),oe=hc(Ri(Et,"batches"),ue=>{a(ue.docs.map(Ie=>({...Ie.data(),id:Ie.id})))}),fe=hc(Ri(Et,"transactions"),ue=>{c(ue.docs.map(Ie=>({...Ie.data(),id:Ie.id})))});return()=>{X(),oe(),fe()}},[]);const Se=ye.useCallback(async X=>{const oe=Yu(Et),fe=new Map;X.forEach(ue=>{const Ie=an(Ri(Et,"students")),Ae=Ie.id,Ye=["yes","true","paid",1].includes(String(ue["Full Paid"]).toLowerCase()),_n=parseFloat(ue["Amount Paid"])||0,hn=_n>0?[{id:`payment-${Ae}-initial`,amount:_n,date:ue["Payment Date"]||new Date().toISOString().slice(0,10),method:ue["Payment Method"]||"Other",remarks:"Initial payment from upload"}]:[],Zn={"Roll No":ue["Roll No"]??"N/A",Name:ue.Name??"Unnamed Student",Father:ue.Father??"",Mother:ue.Mother??"",Phone:ue.Phone??"","Emergency Number":ue["Emergency Number"]??"",Gender:ue.Gender??"Other",Batch:ue.Batch||"Unassigned",Address:ue.Address??"","Total Fees":parseFloat(ue["Total Fees"])||0,payments:hn,Remarks:ue.Remarks||"","Full Paid":Ye,imageUrl:ue["Image URL"]||""},In=ue.Mode;(In==="Monthly"||In==="One Time")&&(Zn.Mode=In),oe.set(Ie,Zn);const hs=Zn.Batch;fe.has(hs)||fe.set(hs,[]),fe.get(hs).push(Ae)}),Array.from(fe.entries()).forEach(([ue,Ie])=>{const Ae=an(Ri(Et,"batches")),Ye={name:ue,studentIds:Ie,wardens:[]};oe.set(Ae,Ye)});try{await oe.commit(),re({message:`${X.length} records loaded & ${fe.size} batches created.`,type:"success",onClose:()=>re(null)}),G(xi.Students)}catch(ue){console.error("Error writing batch to Firestore: ",ue),re({message:"Failed to upload data. Check for invalid fields.",type:"error",onClose:()=>re(null)})}},[]),Te=ye.useCallback(async(X,oe)=>{let fe={...X};if(delete fe.id,oe){const Ie={maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0};try{const Ae=await imageCompression(oe,Ie),Ye=up.ref().child(`student-images/${X.id}/${Date.now()}_${oe.name}`);await Ye.put(Ae);const _n=await Ye.getDownloadURL();fe.imageUrl=_n}catch(Ae){console.error("Error uploading image:",Ae),re({message:"Image upload failed.",type:"error",onClose:()=>re(null)})}}const ue=an(Et,"students",X.id);await nl(ue,fe),g(null),re({message:`${fe.Name}'s profile updated.`,type:"success",onClose:()=>re(null)})},[]),I=ye.useCallback(async(X,oe)=>{const fe=Yu(Et),ue=an(Et,"students",X.id),Ie=an(Ri(Et,"transactions")),Ae={...oe,studentId:X.id,studentName:X.Name,studentRollNo:X["Roll No"]};fe.set(Ie,Ae),fe.update(ue,{payments:[...X.payments||[],oe]}),await fe.commit(),S(null)},[]),R=ye.useCallback(async X=>{if(!p||X!==p.id)return;const oe=Yu(Et);try{const fe=an(Et,"students",X);oe.delete(fe);const ue=Wi(Ri(Et,"transactions"),zp("studentId","==",X));(await qp(ue)).forEach(Ye=>oe.delete(Ye.ref));const Ae=i.filter(Ye=>Ye.studentIds.includes(X));for(const Ye of Ae){const _n=Ye.studentIds.filter(Zn=>Zn!==X),hn=an(Et,"batches",Ye.id);_n.length===0?oe.delete(hn):oe.update(hn,{studentIds:_n})}if(await oe.commit(),p.imageUrl)try{await up.refFromURL(p.imageUrl).delete()}catch(Ye){console.error("Could not delete image, it might already be removed:",Ye)}re({message:`Deleted ${p.Name}.`,type:"success",onClose:()=>re(null)})}catch(fe){console.error("Error deleting student:",fe),re({message:"Deletion failed.",type:"error",onClose:()=>re(null)})}finally{v(null)}},[p,i]),N=ye.useCallback(async(X,oe)=>{const fe={name:X,studentIds:oe,wardens:[]},ue=an(Ri(Et,"batches")),Ie=Yu(Et);Ie.set(ue,fe),await Ie.commit()},[]),P=ye.useCallback(async X=>{const oe=i.find(Ae=>Ae.id===X);if(!oe)return;const fe=Yu(Et),ue=new Set(oe.studentIds),Ie=e.filter(Ae=>ue.has(Ae.id));for(const Ae of Ie){fe.delete(an(Et,"students",Ae.id));const Ye=Wi(Ri(Et,"transactions"),zp("studentId","==",Ae.id));if((await qp(Ye)).forEach(hn=>fe.delete(hn.ref)),Ae.imageUrl)try{const hn=up.refFromURL(Ae.imageUrl)}catch(hn){console.warn("Could not find image to delete during batch deletion",hn)}}fe.delete(an(Et,"batches",X)),await fe.commit()},[i,e]),O=ye.useCallback(async(X,oe)=>{const fe=an(Et,"batches",X),ue=i.find(Ae=>Ae.id===X);if(!ue||ue.wardens.some(Ae=>Ae.wardenStudentId===oe))return;const Ie={wardenStudentId:oe,assignedStudentIds:[]};await nl(fe,{wardens:[...ue.wardens,Ie]})},[i]),k=ye.useCallback(async(X,oe)=>{const fe=an(Et,"batches",X),ue=i.find(Ae=>Ae.id===X);if(!ue)return;const Ie=ue.wardens.filter(Ae=>Ae.wardenStudentId!==oe);await nl(fe,{wardens:Ie})},[i]),x=ye.useCallback(async(X,oe,fe)=>{const ue=an(Et,"batches",X),Ie=i.find(Ye=>Ye.id===X);if(!Ie)return;const Ae=Ie.wardens.map(Ye=>Ye.wardenStudentId===oe?{...Ye,assignedStudentIds:fe}:Ye);await nl(ue,{wardens:Ae})},[i]),Ne=X=>(X.payments||[]).reduce((oe,fe)=>oe+fe.amount,0),He=ye.useMemo(()=>e.filter(X=>{var oe;return((oe=X.Gender)==null?void 0:oe.toLowerCase())==="female"}).length,[e]),Y=ye.useMemo(()=>e.filter(X=>{var oe;return((oe=X.Gender)==null?void 0:oe.toLowerCase())==="male"}).length,[e]),le=ye.useMemo(()=>e.filter(X=>X["Full Paid"]||Ne(X)>=X["Total Fees"]).length,[e]),ae=ye.useMemo(()=>e.reduce((X,oe)=>X+Ne(oe),0),[e]),_e=ye.useMemo(()=>e.reduce((X,oe)=>{if(oe["Full Paid"])return X;const fe=oe["Total Fees"]-Ne(oe);return X+(fe>0?fe:0)},0),[e]),Ce=X=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(X),V=()=>{if(se)return b.jsx("div",{className:"flex items-center justify-center h-full",children:b.jsxs("div",{className:"text-center",children:[b.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-600 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b.jsx("p",{className:"mt-2 text-gray-600",children:"Loading data from database..."})]})});switch(D){case xi.Students:return b.jsx(bR,{students:e,onEditStudent:g,onCreateBatch:N,onDeleteStudent:v,onRecordPayment:S});case xi.Batches:return b.jsx(wR,{batches:i,students:e,onDeleteBatch:P,onAddWarden:O,onRemoveWarden:k,onAssignStudents:x});case xi.Payments:return b.jsx(AR,{transactions:l});case xi.Dashboard:default:return b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Overview"}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[b.jsx(Er,{title:"Total Students",value:e.length.toString()}),b.jsx(Er,{title:"Girls",value:He.toString()}),b.jsx(Er,{title:"Boys",value:Y.toString()}),b.jsx(Er,{title:"Total Batches",value:i.length.toString()}),b.jsx(Er,{title:"Fees Collected",value:Ce(ae)}),b.jsx(Er,{title:"Fees Remaining",value:Ce(_e)}),b.jsx(Er,{title:"Full Paid Students",value:le.toString()}),b.jsx(Er,{title:"Payments Recorded",value:l.length.toString()})]}),b.jsxs("div",{className:"mt-8 p-6 bg-white rounded-lg shadow",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Upload Student Data"}),b.jsx("p",{className:"text-gray-600 mb-4",children:"Upload an Excel file to add new students. This will not affect existing data. Recommended columns: 'Roll No', 'Name', 'Father', 'Mother', 'Phone', 'Gender', 'Batch', 'Address', 'Total Fees', 'Amount Paid', 'Full Paid', 'Mode', 'Image URL'."}),b.jsx(vR,{onDataLoaded:Se})]})]})}},Z=X=>{G(X),U(!1)},ce=({currentView:X,targetView:oe,setView:fe,children:ue})=>b.jsx("button",{onClick:()=>fe(oe),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 text-left w-full ${X===oe?"bg-indigo-600 text-white":"text-gray-600 hover:bg-gray-200"}`,children:ue});return b.jsxs("div",{className:"flex h-screen bg-gray-100",children:[ie&&b.jsx(uO,{...ie}),z&&b.jsx("div",{onClick:()=>U(!1),className:"fixed inset-0 bg-black opacity-50 z-20 lg:hidden"}),b.jsxs("aside",{className:`w-64 flex-shrink-0 bg-white shadow-md p-4 flex flex-col justify-between fixed inset-y-0 left-0 transform ${z?"translate-x-0":"-translate-x-full"} lg:relative lg:translate-x-0 transition-transform duration-300 ease-in-out z-30`,children:[b.jsxs("div",{children:[b.jsx("h1",{className:"text-2xl font-bold text-indigo-600 mb-8 px-2",children:"Vidya Gram"}),b.jsxs("nav",{className:"flex flex-col space-y-2",children:[b.jsx(ce,{currentView:D,targetView:xi.Dashboard,setView:Z,children:"Dashboard"}),b.jsx(ce,{currentView:D,targetView:xi.Students,setView:Z,children:"Students"}),b.jsx(ce,{currentView:D,targetView:xi.Batches,setView:Z,children:"Batches"}),b.jsx(ce,{currentView:D,targetView:xi.Payments,setView:Z,children:"Payments"})]})]}),b.jsx("button",{onClick:r,className:"w-full px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-md hover:bg-red-600",children:"Logout"})]}),b.jsxs("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto",children:[b.jsx("button",{onClick:()=>U(!0),className:"lg:hidden p-2 mb-4 text-gray-600 bg-white rounded-md shadow",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})}),V()]}),m&&b.jsx(ER,{student:m,onClose:()=>g(null),onSave:Te}),E&&b.jsx(SR,{student:E,onClose:()=>S(null),onSave:I}),p&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:b.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[b.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Deletion"}),b.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:['Are you sure you want to delete the student "',p.Name,'"? This will also remove them from batches and delete their payment history. This action cannot be undone.']}),b.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[b.jsx("button",{onClick:()=>v(null),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),b.jsx("button",{onClick:()=>R(p.id),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})},hO=()=>{const[r,e]=ye.useState(!1),t=ye.useCallback(()=>{e(!0)},[]),i=ye.useCallback(()=>{e(!1)},[]);return b.jsx("div",{className:"min-h-screen bg-slate-100 font-sans",children:r?b.jsx(cO,{onLogout:i}):b.jsx(_R,{onLoginSuccess:t})})},Cx=document.getElementById("root");if(!Cx)throw new Error("Could not find root element to mount to");const fO=yR.createRoot(Cx);fO.render(b.jsx(QE.StrictMode,{children:b.jsx(hO,{})}));
