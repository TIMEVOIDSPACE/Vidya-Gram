function kp(l,n){for(var s=0;s<n.length;s++){const i=n[s];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in l)){const d=Object.getOwnPropertyDescriptor(i,c);d&&Object.defineProperty(l,c,d.get?d:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();function xc(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function mg(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var n=l.default;if(typeof n=="function"){var s=function i(){return this instanceof i?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(l).forEach(function(i){var c=Object.getOwnPropertyDescriptor(l,i);Object.defineProperty(s,i,c.get?c:{enumerable:!0,get:function(){return l[i]}})}),s}var Vu={exports:{}},Es={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function Np(){if(T0)return Es;T0=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(i,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var m in c)m!=="key"&&(d[m]=c[m])}else d=c;return c=d.ref,{$$typeof:l,type:i,key:f,ref:c!==void 0?c:null,props:d}}return Es.Fragment=n,Es.jsx=s,Es.jsxs=s,Es}var O0;function Tp(){return O0||(O0=1,Vu.exports=Np()),Vu.exports}var h=Tp(),Gu={exports:{}},fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0;function Op(){if(A0)return fe;A0=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),_=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=_&&j[_]||j["@@iterator"],typeof j=="function"?j:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,O={};function R(j,D,J){this.props=j,this.context=D,this.refs=O,this.updater=J||k}R.prototype.isReactComponent={},R.prototype.setState=function(j,D){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,D,"setState")},R.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function z(){}z.prototype=R.prototype;function L(j,D,J){this.props=j,this.context=D,this.refs=O,this.updater=J||k}var I=L.prototype=new z;I.constructor=L,N(I,R.prototype),I.isPureReactComponent=!0;var G=Array.isArray;function Y(){}var K={H:null,A:null,T:null,S:null},de=Object.prototype.hasOwnProperty;function ve(j,D,J){var ee=J.ref;return{$$typeof:l,type:j,key:D,ref:ee!==void 0?ee:null,props:J}}function He(j,D){return ve(j.type,D,j.props)}function Ye(j){return typeof j=="object"&&j!==null&&j.$$typeof===l}function Z(j){var D={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(J){return D[J]})}var F=/\/+/g;function ye(j,D){return typeof j=="object"&&j!==null&&j.key!=null?Z(""+j.key):D.toString(36)}function oe(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(Y,Y):(j.status="pending",j.then(function(D){j.status==="pending"&&(j.status="fulfilled",j.value=D)},function(D){j.status==="pending"&&(j.status="rejected",j.reason=D)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function M(j,D,J,ee,ue){var ge=typeof j;(ge==="undefined"||ge==="boolean")&&(j=null);var Q=!1;if(j===null)Q=!0;else switch(ge){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(j.$$typeof){case l:case n:Q=!0;break;case b:return Q=j._init,M(Q(j._payload),D,J,ee,ue)}}if(Q)return ue=ue(j),Q=ee===""?"."+ye(j,0):ee,G(ue)?(J="",Q!=null&&(J=Q.replace(F,"$&/")+"/"),M(ue,D,J,"",function(Ke){return Ke})):ue!=null&&(Ye(ue)&&(ue=He(ue,J+(ue.key==null||j&&j.key===ue.key?"":(""+ue.key).replace(F,"$&/")+"/")+Q)),D.push(ue)),1;Q=0;var me=ee===""?".":ee+":";if(G(j))for(var ke=0;ke<j.length;ke++)ee=j[ke],ge=me+ye(ee,ke),Q+=M(ee,D,J,ge,ue);else if(ke=x(j),typeof ke=="function")for(j=ke.call(j),ke=0;!(ee=j.next()).done;)ee=ee.value,ge=me+ye(ee,ke++),Q+=M(ee,D,J,ge,ue);else if(ge==="object"){if(typeof j.then=="function")return M(oe(j),D,J,ee,ue);throw D=String(j),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return Q}function P(j,D,J){if(j==null)return j;var ee=[],ue=0;return M(j,ee,"","",function(ge){return D.call(J,ge,ue++)}),ee}function q(j){if(j._status===-1){var D=j._result;D=D(),D.then(function(J){(j._status===0||j._status===-1)&&(j._status=1,j._result=J)},function(J){(j._status===0||j._status===-1)&&(j._status=2,j._result=J)}),j._status===-1&&(j._status=0,j._result=D)}if(j._status===1)return j._result.default;throw j._result}var W=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},ae={map:P,forEach:function(j,D,J){P(j,function(){D.apply(this,arguments)},J)},count:function(j){var D=0;return P(j,function(){D++}),D},toArray:function(j){return P(j,function(D){return D})||[]},only:function(j){if(!Ye(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return fe.Activity=w,fe.Children=ae,fe.Component=R,fe.Fragment=s,fe.Profiler=c,fe.PureComponent=L,fe.StrictMode=i,fe.Suspense=p,fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,fe.__COMPILER_RUNTIME={__proto__:null,c:function(j){return K.H.useMemoCache(j)}},fe.cache=function(j){return function(){return j.apply(null,arguments)}},fe.cacheSignal=function(){return null},fe.cloneElement=function(j,D,J){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ee=N({},j.props),ue=j.key;if(D!=null)for(ge in D.key!==void 0&&(ue=""+D.key),D)!de.call(D,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&D.ref===void 0||(ee[ge]=D[ge]);var ge=arguments.length-2;if(ge===1)ee.children=J;else if(1<ge){for(var Q=Array(ge),me=0;me<ge;me++)Q[me]=arguments[me+2];ee.children=Q}return ve(j.type,ue,ee)},fe.createContext=function(j){return j={$$typeof:f,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:d,_context:j},j},fe.createElement=function(j,D,J){var ee,ue={},ge=null;if(D!=null)for(ee in D.key!==void 0&&(ge=""+D.key),D)de.call(D,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ue[ee]=D[ee]);var Q=arguments.length-2;if(Q===1)ue.children=J;else if(1<Q){for(var me=Array(Q),ke=0;ke<Q;ke++)me[ke]=arguments[ke+2];ue.children=me}if(j&&j.defaultProps)for(ee in Q=j.defaultProps,Q)ue[ee]===void 0&&(ue[ee]=Q[ee]);return ve(j,ge,ue)},fe.createRef=function(){return{current:null}},fe.forwardRef=function(j){return{$$typeof:m,render:j}},fe.isValidElement=Ye,fe.lazy=function(j){return{$$typeof:b,_payload:{_status:-1,_result:j},_init:q}},fe.memo=function(j,D){return{$$typeof:y,type:j,compare:D===void 0?null:D}},fe.startTransition=function(j){var D=K.T,J={};K.T=J;try{var ee=j(),ue=K.S;ue!==null&&ue(J,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Y,W)}catch(ge){W(ge)}finally{D!==null&&J.types!==null&&(D.types=J.types),K.T=D}},fe.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},fe.use=function(j){return K.H.use(j)},fe.useActionState=function(j,D,J){return K.H.useActionState(j,D,J)},fe.useCallback=function(j,D){return K.H.useCallback(j,D)},fe.useContext=function(j){return K.H.useContext(j)},fe.useDebugValue=function(){},fe.useDeferredValue=function(j,D){return K.H.useDeferredValue(j,D)},fe.useEffect=function(j,D){return K.H.useEffect(j,D)},fe.useEffectEvent=function(j){return K.H.useEffectEvent(j)},fe.useId=function(){return K.H.useId()},fe.useImperativeHandle=function(j,D,J){return K.H.useImperativeHandle(j,D,J)},fe.useInsertionEffect=function(j,D){return K.H.useInsertionEffect(j,D)},fe.useLayoutEffect=function(j,D){return K.H.useLayoutEffect(j,D)},fe.useMemo=function(j,D){return K.H.useMemo(j,D)},fe.useOptimistic=function(j,D){return K.H.useOptimistic(j,D)},fe.useReducer=function(j,D,J){return K.H.useReducer(j,D,J)},fe.useRef=function(j){return K.H.useRef(j)},fe.useState=function(j){return K.H.useState(j)},fe.useSyncExternalStore=function(j,D,J){return K.H.useSyncExternalStore(j,D,J)},fe.useTransition=function(){return K.H.useTransition()},fe.version="19.2.0",fe}var C0;function wc(){return C0||(C0=1,Gu.exports=Op()),Gu.exports}var X=wc();const Ap=xc(X);var Pu={exports:{}},ks={},Yu={exports:{}},Ku={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function Cp(){return R0||(R0=1,(function(l){function n(M,P){var q=M.length;M.push(P);e:for(;0<q;){var W=q-1>>>1,ae=M[W];if(0<c(ae,P))M[W]=P,M[q]=ae,q=W;else break e}}function s(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var P=M[0],q=M.pop();if(q!==P){M[0]=q;e:for(var W=0,ae=M.length,j=ae>>>1;W<j;){var D=2*(W+1)-1,J=M[D],ee=D+1,ue=M[ee];if(0>c(J,q))ee<ae&&0>c(ue,J)?(M[W]=ue,M[ee]=q,W=ee):(M[W]=J,M[D]=q,W=D);else if(ee<ae&&0>c(ue,q))M[W]=ue,M[ee]=q,W=ee;else break e}}return P}function c(M,P){var q=M.sortIndex-P.sortIndex;return q!==0?q:M.id-P.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();l.unstable_now=function(){return f.now()-m}}var p=[],y=[],b=1,w=null,_=3,x=!1,k=!1,N=!1,O=!1,R=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function I(M){for(var P=s(y);P!==null;){if(P.callback===null)i(y);else if(P.startTime<=M)i(y),P.sortIndex=P.expirationTime,n(p,P);else break;P=s(y)}}function G(M){if(N=!1,I(M),!k)if(s(p)!==null)k=!0,Y||(Y=!0,Z());else{var P=s(y);P!==null&&oe(G,P.startTime-M)}}var Y=!1,K=-1,de=5,ve=-1;function He(){return O?!0:!(l.unstable_now()-ve<de)}function Ye(){if(O=!1,Y){var M=l.unstable_now();ve=M;var P=!0;try{e:{k=!1,N&&(N=!1,z(K),K=-1),x=!0;var q=_;try{t:{for(I(M),w=s(p);w!==null&&!(w.expirationTime>M&&He());){var W=w.callback;if(typeof W=="function"){w.callback=null,_=w.priorityLevel;var ae=W(w.expirationTime<=M);if(M=l.unstable_now(),typeof ae=="function"){w.callback=ae,I(M),P=!0;break t}w===s(p)&&i(p),I(M)}else i(p);w=s(p)}if(w!==null)P=!0;else{var j=s(y);j!==null&&oe(G,j.startTime-M),P=!1}}break e}finally{w=null,_=q,x=!1}P=void 0}}finally{P?Z():Y=!1}}}var Z;if(typeof L=="function")Z=function(){L(Ye)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ye=F.port2;F.port1.onmessage=Ye,Z=function(){ye.postMessage(null)}}else Z=function(){R(Ye,0)};function oe(M,P){K=R(function(){M(l.unstable_now())},P)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(M){M.callback=null},l.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<M?Math.floor(1e3/M):5},l.unstable_getCurrentPriorityLevel=function(){return _},l.unstable_next=function(M){switch(_){case 1:case 2:case 3:var P=3;break;default:P=_}var q=_;_=P;try{return M()}finally{_=q}},l.unstable_requestPaint=function(){O=!0},l.unstable_runWithPriority=function(M,P){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var q=_;_=M;try{return P()}finally{_=q}},l.unstable_scheduleCallback=function(M,P,q){var W=l.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?W+q:W):q=W,M){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=q+ae,M={id:b++,callback:P,priorityLevel:M,startTime:q,expirationTime:ae,sortIndex:-1},q>W?(M.sortIndex=q,n(y,M),s(p)===null&&M===s(y)&&(N?(z(K),K=-1):N=!0,oe(G,q-W))):(M.sortIndex=ae,n(p,M),k||x||(k=!0,Y||(Y=!0,Z()))),M},l.unstable_shouldYield=He,l.unstable_wrapCallback=function(M){var P=_;return function(){var q=_;_=P;try{return M.apply(this,arguments)}finally{_=q}}}})(Ku)),Ku}var U0;function Rp(){return U0||(U0=1,Yu.exports=Cp()),Yu.exports}var Xu={exports:{}},dt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function Up(){if(D0)return dt;D0=1;var l=wc();function n(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(p,y,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:p,containerInfo:y,implementation:b}}var f=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,dt.createPortal=function(p,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return d(p,y,null,b)},dt.flushSync=function(p){var y=f.T,b=i.p;try{if(f.T=null,i.p=2,p)return p()}finally{f.T=y,i.p=b,i.d.f()}},dt.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(p,y))},dt.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},dt.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var b=y.as,w=m(b,y.crossOrigin),_=typeof y.integrity=="string"?y.integrity:void 0,x=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:_,fetchPriority:x}):b==="script"&&i.d.X(p,{crossOrigin:w,integrity:_,fetchPriority:x,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},dt.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=m(y.as,y.crossOrigin);i.d.M(p,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(p)},dt.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,w=m(b,y.crossOrigin);i.d.L(p,b,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},dt.preloadModule=function(p,y){if(typeof p=="string")if(y){var b=m(y.as,y.crossOrigin);i.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(p)},dt.requestFormReset=function(p){i.d.r(p)},dt.unstable_batchedUpdates=function(p,y){return p(y)},dt.useFormState=function(p,y,b){return f.H.useFormState(p,y,b)},dt.useFormStatus=function(){return f.H.useHostTransitionStatus()},dt.version="19.2.0",dt}var M0;function Dp(){if(M0)return Xu.exports;M0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Xu.exports=Up(),Xu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function Mp(){if(z0)return ks;z0=1;var l=Rp(),n=wc(),s=Dp();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(i(188))}function y(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,r=t;;){var o=a.return;if(o===null)break;var u=o.alternate;if(u===null){if(r=o.return,r!==null){a=r;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===a)return p(o),e;if(u===r)return p(o),t;u=u.sibling}throw Error(i(188))}if(a.return!==r.return)a=o,r=u;else{for(var g=!1,v=o.child;v;){if(v===a){g=!0,a=o,r=u;break}if(v===r){g=!0,r=o,a=u;break}v=v.sibling}if(!g){for(v=u.child;v;){if(v===a){g=!0,a=u,r=o;break}if(v===r){g=!0,r=u,a=o;break}v=v.sibling}if(!g)throw Error(i(189))}}if(a.alternate!==r)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),L=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),ve=Symbol.for("react.activity"),He=Symbol.for("react.memo_cache_sentinel"),Ye=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=Ye&&e[Ye]||e["@@iterator"],typeof e=="function"?e:null)}var F=Symbol.for("react.client.reference");function ye(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===F?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case R:return"Profiler";case O:return"StrictMode";case G:return"Suspense";case Y:return"SuspenseList";case ve:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case L:return e.displayName||"Context";case z:return(e._context.displayName||"Context")+".Consumer";case I:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K:return t=e.displayName||null,t!==null?t:ye(e.type)||"Memo";case de:t=e._payload,e=e._init;try{return ye(e(t))}catch{}}return null}var oe=Array.isArray,M=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},W=[],ae=-1;function j(e){return{current:e}}function D(e){0>ae||(e.current=W[ae],W[ae]=null,ae--)}function J(e,t){ae++,W[ae]=e.current,e.current=t}var ee=j(null),ue=j(null),ge=j(null),Q=j(null);function me(e,t){switch(J(ge,t),J(ue,e),J(ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Zf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Zf(t),e=Ff(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}D(ee),J(ee,e)}function ke(){D(ee),D(ue),D(ge)}function Ke(e){e.memoizedState!==null&&J(Q,e);var t=ee.current,a=Ff(t,e.type);t!==a&&(J(ue,e),J(ee,a))}function vt(e){ue.current===e&&(D(ee),D(ue)),Q.current===e&&(D(Q),ws._currentValue=q)}var Tt,sa;function ct(e){if(Tt===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Tt=t&&t[1]||"",sa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tt+e+sa}var ia=!1;function Ot(e,t){if(!e||ia)return"";ia=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(B){var U=B}Reflect.construct(e,[],V)}else{try{V.call()}catch(B){U=B}e.call(V.prototype)}}else{try{throw Error()}catch(B){U=B}(V=e())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(B){if(B&&U&&typeof B.stack=="string")return[B.stack,U.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=r.DetermineComponentFrameRoot(),g=u[0],v=u[1];if(g&&v){var S=g.split(`
`),C=v.split(`
`);for(o=r=0;r<S.length&&!S[r].includes("DetermineComponentFrameRoot");)r++;for(;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;if(r===S.length||o===C.length)for(r=S.length-1,o=C.length-1;1<=r&&0<=o&&S[r]!==C[o];)o--;for(;1<=r&&0<=o;r--,o--)if(S[r]!==C[o]){if(r!==1||o!==1)do if(r--,o--,0>o||S[r]!==C[o]){var H=`
`+S[r].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=r&&0<=o);break}}}finally{ia=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ct(a):""}function ln(e,t){switch(e.tag){case 26:case 27:case 5:return ct(e.type);case 16:return ct("Lazy");case 13:return e.child!==t&&t!==null?ct("Suspense Fallback"):ct("Suspense");case 19:return ct("SuspenseList");case 0:case 15:return Ot(e.type,!1);case 11:return Ot(e.type.render,!1);case 1:return Ot(e.type,!0);case 31:return ct("Activity");default:return""}}function fa(e){try{var t="",a=null;do t+=ln(e,a),a=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var la=Object.prototype.hasOwnProperty,bt=l.unstable_scheduleCallback,Ht=l.unstable_cancelCallback,_l=l.unstable_shouldYield,qs=l.unstable_requestPaint,ft=l.unstable_now,Hs=l.unstable_getCurrentPriorityLevel,$s=l.unstable_ImmediatePriority,Vs=l.unstable_UserBlockingPriority,Dn=l.unstable_NormalPriority,Sl=l.unstable_LowPriority,Gs=l.unstable_IdlePriority,jl=l.log,El=l.unstable_setDisableYieldValue,on=null,gt=null;function oa(e){if(typeof jl=="function"&&El(e),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(on,e)}catch{}}var mt=Math.clz32?Math.clz32:Tl,kl=Math.log,Nl=Math.LN2;function Tl(e){return e>>>=0,e===0?32:31-(kl(e)/Nl|0)|0}var Mn=256,zn=262144,se=4194304;function je(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xt(e,t,a){var r=e.pendingLanes;if(r===0)return 0;var o=0,u=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var v=r&134217727;return v!==0?(r=v&~u,r!==0?o=je(r):(g&=v,g!==0?o=je(g):a||(a=v&~e,a!==0&&(o=je(a))))):(v=r&~u,v!==0?o=je(v):g!==0?o=je(g):a||(a=r&~e,a!==0&&(o=je(a)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:o}function un(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function fm(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cc(){var e=se;return se<<=1,(se&62914560)===0&&(se=4194304),e}function Ol(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Mr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function gm(e,t,a,r,o,u){var g=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,S=e.expirationTimes,C=e.hiddenUpdates;for(a=g&~a;0<a;){var H=31-mt(a),V=1<<H;v[H]=0,S[H]=-1;var U=C[H];if(U!==null)for(C[H]=null,H=0;H<U.length;H++){var B=U[H];B!==null&&(B.lane&=-536870913)}a&=~V}r!==0&&Rc(e,r,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(g&~t))}function Rc(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-mt(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|a&261930}function Uc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var r=31-mt(a),o=1<<r;o&t|e[r]&t&&(e[r]|=t),a&=~o}}function Dc(e,t){var a=t&-t;return a=(a&42)!==0?1:Al(a),(a&(e.suspendedLanes|t))!==0?0:a}function Al(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Cl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Mc(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:w0(e.type))}function zc(e,t){var a=P.p;try{return P.p=e,t()}finally{P.p=a}}var Ua=Math.random().toString(36).slice(2),rt="__reactFiber$"+Ua,wt="__reactProps$"+Ua,Bn="__reactContainer$"+Ua,Rl="__reactEvents$"+Ua,mm="__reactListeners$"+Ua,ym="__reactHandles$"+Ua,Bc="__reactResources$"+Ua,zr="__reactMarker$"+Ua;function Ul(e){delete e[rt],delete e[wt],delete e[Rl],delete e[mm],delete e[ym]}function Ln(e){var t=e[rt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Bn]||a[rt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=s0(e);e!==null;){if(a=e[rt])return a;e=s0(e)}return t}e=a,a=e.parentNode}return null}function qn(e){if(e=e[rt]||e[Bn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Br(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Hn(e){var t=e[Bc];return t||(t=e[Bc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function at(e){e[zr]=!0}var Lc=new Set,qc={};function cn(e,t){$n(e,t),$n(e+"Capture",t)}function $n(e,t){for(qc[e]=t,e=0;e<t.length;e++)Lc.add(t[e])}var pm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hc={},$c={};function vm(e){return la.call($c,e)?!0:la.call(Hc,e)?!1:pm.test(e)?$c[e]=!0:(Hc[e]=!0,!1)}function Ps(e,t,a){if(vm(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Ys(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function ga(e,t,a,r){if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+r)}}function $t(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bm(e,t,a){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(g){a=""+g,u.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Dl(e){if(!e._valueTracker){var t=Vc(e)?"checked":"value";e._valueTracker=bm(e,t,""+e[t])}}function Gc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return e&&(r=Vc(e)?e.checked?"true":"false":e.value),e=r,e!==a?(t.setValue(e),!0):!1}function Ks(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var xm=/[\n"\\]/g;function Vt(e){return e.replace(xm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ml(e,t,a,r,o,u,g,v){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+$t(t)):e.value!==""+$t(t)&&(e.value=""+$t(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?zl(e,g,$t(t)):a!=null?zl(e,g,$t(a)):r!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+$t(v):e.removeAttribute("name")}function Pc(e,t,a,r,o,u,g,v){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Dl(e);return}a=a!=null?""+$t(a):"",t=t!=null?""+$t(t):a,v||t===e.value||(e.value=t),e.defaultValue=t}r=r??o,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=v?e.checked:!!r,e.defaultChecked=!!r,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Dl(e)}function zl(e,t,a){t==="number"&&Ks(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Vn(e,t,a,r){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&r&&(e[a].defaultSelected=!0)}else{for(a=""+$t(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Yc(e,t,a){if(t!=null&&(t=""+$t(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+$t(a):""}function Kc(e,t,a,r){if(t==null){if(r!=null){if(a!=null)throw Error(i(92));if(oe(r)){if(1<r.length)throw Error(i(93));r=r[0]}a=r}a==null&&(a=""),t=a}a=$t(t),e.defaultValue=a,r=e.textContent,r===a&&r!==""&&r!==null&&(e.value=r),Dl(e)}function Gn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var wm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xc(e,t,a){var r=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,a):typeof a!="number"||a===0||wm.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ic(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var r in a)!a.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&a[o]!==r&&Xc(e,o,r)}else for(var u in t)t.hasOwnProperty(u)&&Xc(e,u,t[u])}function Bl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _m=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xs(e){return Sm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ma(){}var Ll=null;function ql(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pn=null,Yn=null;function Qc(e){var t=qn(e);if(t&&(e=t.stateNode)){var a=e[wt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ml(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Vt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var o=r[wt]||null;if(!o)throw Error(i(90));Ml(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)r=a[t],r.form===e.form&&Gc(r)}break e;case"textarea":Yc(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Vn(e,!!a.multiple,t,!1)}}}var Hl=!1;function Jc(e,t,a){if(Hl)return e(t,a);Hl=!0;try{var r=e(t);return r}finally{if(Hl=!1,(Pn!==null||Yn!==null)&&(Di(),Pn&&(t=Pn,e=Yn,Yn=Pn=null,Qc(t),e)))for(t=0;t<e.length;t++)Qc(e[t])}}function Lr(e,t){var a=e.stateNode;if(a===null)return null;var r=a[wt]||null;if(r===null)return null;a=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$l=!1;if(ya)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){$l=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{$l=!1}var Da=null,Vl=null,Is=null;function Zc(){if(Is)return Is;var e,t=Vl,a=t.length,r,o="value"in Da?Da.value:Da.textContent,u=o.length;for(e=0;e<a&&t[e]===o[e];e++);var g=a-e;for(r=1;r<=g&&t[a-r]===o[u-r];r++);return Is=o.slice(e,1<r?1-r:void 0)}function Qs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Js(){return!0}function Fc(){return!1}function _t(e){function t(a,r,o,u,g){this._reactName=a,this._targetInst=o,this.type=r,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(u):u[v]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Js:Fc,this.isPropagationStopped=Fc,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),t}var dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=_t(dn),Hr=w({},dn,{view:0,detail:0}),jm=_t(Hr),Gl,Pl,$r,Fs=w({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$r&&($r&&e.type==="mousemove"?(Gl=e.screenX-$r.screenX,Pl=e.screenY-$r.screenY):Pl=Gl=0,$r=e),Gl)},movementY:function(e){return"movementY"in e?e.movementY:Pl}}),Wc=_t(Fs),Em=w({},Fs,{dataTransfer:0}),km=_t(Em),Nm=w({},Hr,{relatedTarget:0}),Yl=_t(Nm),Tm=w({},dn,{animationName:0,elapsedTime:0,pseudoElement:0}),Om=_t(Tm),Am=w({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cm=_t(Am),Rm=w({},dn,{data:0}),ed=_t(Rm),Um={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mm[e])?!!t[e]:!1}function Kl(){return zm}var Bm=w({},Hr,{key:function(e){if(e.key){var t=Um[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Dm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kl,charCode:function(e){return e.type==="keypress"?Qs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lm=_t(Bm),qm=w({},Fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),td=_t(qm),Hm=w({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kl}),$m=_t(Hm),Vm=w({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gm=_t(Vm),Pm=w({},Fs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ym=_t(Pm),Km=w({},dn,{newState:0,oldState:0}),Xm=_t(Km),Im=[9,13,27,32],Xl=ya&&"CompositionEvent"in window,Vr=null;ya&&"documentMode"in document&&(Vr=document.documentMode);var Qm=ya&&"TextEvent"in window&&!Vr,ad=ya&&(!Xl||Vr&&8<Vr&&11>=Vr),nd=" ",rd=!1;function sd(e,t){switch(e){case"keyup":return Im.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function id(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kn=!1;function Jm(e,t){switch(e){case"compositionend":return id(t);case"keypress":return t.which!==32?null:(rd=!0,nd);case"textInput":return e=t.data,e===nd&&rd?null:e;default:return null}}function Zm(e,t){if(Kn)return e==="compositionend"||!Xl&&sd(e,t)?(e=Zc(),Is=Vl=Da=null,Kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ad&&t.locale!=="ko"?null:t.data;default:return null}}var Fm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ld(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fm[e.type]:t==="textarea"}function od(e,t,a,r){Pn?Yn?Yn.push(r):Yn=[r]:Pn=r,t=$i(t,"onChange"),0<t.length&&(a=new Zs("onChange","change",null,a,r),e.push({event:a,listeners:t}))}var Gr=null,Pr=null;function Wm(e){Yf(e,0)}function Ws(e){var t=Br(e);if(Gc(t))return e}function ud(e,t){if(e==="change")return t}var cd=!1;if(ya){var Il;if(ya){var Ql="oninput"in document;if(!Ql){var dd=document.createElement("div");dd.setAttribute("oninput","return;"),Ql=typeof dd.oninput=="function"}Il=Ql}else Il=!1;cd=Il&&(!document.documentMode||9<document.documentMode)}function hd(){Gr&&(Gr.detachEvent("onpropertychange",fd),Pr=Gr=null)}function fd(e){if(e.propertyName==="value"&&Ws(Pr)){var t=[];od(t,Pr,e,ql(e)),Jc(Wm,t)}}function ey(e,t,a){e==="focusin"?(hd(),Gr=t,Pr=a,Gr.attachEvent("onpropertychange",fd)):e==="focusout"&&hd()}function ty(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ws(Pr)}function ay(e,t){if(e==="click")return Ws(t)}function ny(e,t){if(e==="input"||e==="change")return Ws(t)}function ry(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:ry;function Yr(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var o=a[r];if(!la.call(t,o)||!At(e[o],t[o]))return!1}return!0}function gd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function md(e,t){var a=gd(e);e=0;for(var r;a;){if(a.nodeType===3){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gd(a)}}function yd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ks(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Ks(e.document)}return t}function Jl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var sy=ya&&"documentMode"in document&&11>=document.documentMode,Xn=null,Zl=null,Kr=null,Fl=!1;function vd(e,t,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Fl||Xn==null||Xn!==Ks(r)||(r=Xn,"selectionStart"in r&&Jl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kr&&Yr(Kr,r)||(Kr=r,r=$i(Zl,"onSelect"),0<r.length&&(t=new Zs("onSelect","select",null,t,a),e.push({event:t,listeners:r}),t.target=Xn)))}function hn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var In={animationend:hn("Animation","AnimationEnd"),animationiteration:hn("Animation","AnimationIteration"),animationstart:hn("Animation","AnimationStart"),transitionrun:hn("Transition","TransitionRun"),transitionstart:hn("Transition","TransitionStart"),transitioncancel:hn("Transition","TransitionCancel"),transitionend:hn("Transition","TransitionEnd")},Wl={},bd={};ya&&(bd=document.createElement("div").style,"AnimationEvent"in window||(delete In.animationend.animation,delete In.animationiteration.animation,delete In.animationstart.animation),"TransitionEvent"in window||delete In.transitionend.transition);function fn(e){if(Wl[e])return Wl[e];if(!In[e])return e;var t=In[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in bd)return Wl[e]=t[a];return e}var xd=fn("animationend"),wd=fn("animationiteration"),_d=fn("animationstart"),iy=fn("transitionrun"),ly=fn("transitionstart"),oy=fn("transitioncancel"),Sd=fn("transitionend"),jd=new Map,eo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");eo.push("scrollEnd");function Ft(e,t){jd.set(e,t),cn(t,[e])}var ei=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Gt=[],Qn=0,to=0;function ti(){for(var e=Qn,t=to=Qn=0;t<e;){var a=Gt[t];Gt[t++]=null;var r=Gt[t];Gt[t++]=null;var o=Gt[t];Gt[t++]=null;var u=Gt[t];if(Gt[t++]=null,r!==null&&o!==null){var g=r.pending;g===null?o.next=o:(o.next=g.next,g.next=o),r.pending=o}u!==0&&Ed(a,o,u)}}function ai(e,t,a,r){Gt[Qn++]=e,Gt[Qn++]=t,Gt[Qn++]=a,Gt[Qn++]=r,to|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function ao(e,t,a,r){return ai(e,t,a,r),ni(e)}function gn(e,t){return ai(e,null,null,t),ni(e)}function Ed(e,t,a){e.lanes|=a;var r=e.alternate;r!==null&&(r.lanes|=a);for(var o=!1,u=e.return;u!==null;)u.childLanes|=a,r=u.alternate,r!==null&&(r.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-mt(a),e=u.hiddenUpdates,r=e[o],r===null?e[o]=[t]:r.push(t),t.lane=a|536870912),u):null}function ni(e){if(50<gs)throw gs=0,hu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Jn={};function uy(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,a,r){return new uy(e,t,a,r)}function no(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pa(e,t){var a=e.alternate;return a===null?(a=Ct(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function kd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ri(e,t,a,r,o,u){var g=0;if(r=e,typeof e=="function")no(e)&&(g=1);else if(typeof e=="string")g=gp(e,a,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ve:return e=Ct(31,a,t,o),e.elementType=ve,e.lanes=u,e;case N:return mn(a.children,o,u,t);case O:g=8,o|=24;break;case R:return e=Ct(12,a,t,o|2),e.elementType=R,e.lanes=u,e;case G:return e=Ct(13,a,t,o),e.elementType=G,e.lanes=u,e;case Y:return e=Ct(19,a,t,o),e.elementType=Y,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:g=10;break e;case z:g=9;break e;case I:g=11;break e;case K:g=14;break e;case de:g=16,r=null;break e}g=29,a=Error(i(130,e===null?"null":typeof e,"")),r=null}return t=Ct(g,a,t,o),t.elementType=e,t.type=r,t.lanes=u,t}function mn(e,t,a,r){return e=Ct(7,e,r,t),e.lanes=a,e}function ro(e,t,a){return e=Ct(6,e,null,t),e.lanes=a,e}function Nd(e){var t=Ct(18,null,null,0);return t.stateNode=e,t}function so(e,t,a){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Td=new WeakMap;function Pt(e,t){if(typeof e=="object"&&e!==null){var a=Td.get(e);return a!==void 0?a:(t={value:e,source:t,stack:fa(t)},Td.set(e,t),t)}return{value:e,source:t,stack:fa(t)}}var Zn=[],Fn=0,si=null,Xr=0,Yt=[],Kt=0,Ma=null,ua=1,ca="";function va(e,t){Zn[Fn++]=Xr,Zn[Fn++]=si,si=e,Xr=t}function Od(e,t,a){Yt[Kt++]=ua,Yt[Kt++]=ca,Yt[Kt++]=Ma,Ma=e;var r=ua;e=ca;var o=32-mt(r)-1;r&=~(1<<o),a+=1;var u=32-mt(t)+o;if(30<u){var g=o-o%5;u=(r&(1<<g)-1).toString(32),r>>=g,o-=g,ua=1<<32-mt(t)+o|a<<o|r,ca=u+e}else ua=1<<u|a<<o|r,ca=e}function io(e){e.return!==null&&(va(e,1),Od(e,1,0))}function lo(e){for(;e===si;)si=Zn[--Fn],Zn[Fn]=null,Xr=Zn[--Fn],Zn[Fn]=null;for(;e===Ma;)Ma=Yt[--Kt],Yt[Kt]=null,ca=Yt[--Kt],Yt[Kt]=null,ua=Yt[--Kt],Yt[Kt]=null}function Ad(e,t){Yt[Kt++]=ua,Yt[Kt++]=ca,Yt[Kt++]=Ma,ua=t.id,ca=t.overflow,Ma=e}var st=null,Le=null,Ee=!1,za=null,Xt=!1,oo=Error(i(519));function Ba(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ir(Pt(t,e)),oo}function Cd(e){var t=e.stateNode,a=e.type,r=e.memoizedProps;switch(t[rt]=e,t[wt]=r,a){case"dialog":we("cancel",t),we("close",t);break;case"iframe":case"object":case"embed":we("load",t);break;case"video":case"audio":for(a=0;a<ys.length;a++)we(ys[a],t);break;case"source":we("error",t);break;case"img":case"image":case"link":we("error",t),we("load",t);break;case"details":we("toggle",t);break;case"input":we("invalid",t),Pc(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":we("invalid",t);break;case"textarea":we("invalid",t),Kc(t,r.value,r.defaultValue,r.children)}a=r.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||r.suppressHydrationWarning===!0||Qf(t.textContent,a)?(r.popover!=null&&(we("beforetoggle",t),we("toggle",t)),r.onScroll!=null&&we("scroll",t),r.onScrollEnd!=null&&we("scrollend",t),r.onClick!=null&&(t.onclick=ma),t=!0):t=!1,t||Ba(e,!0)}function Rd(e){for(st=e.return;st;)switch(st.tag){case 5:case 31:case 13:Xt=!1;return;case 27:case 3:Xt=!0;return;default:st=st.return}}function Wn(e){if(e!==st)return!1;if(!Ee)return Rd(e),Ee=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Nu(e.type,e.memoizedProps)),a=!a),a&&Le&&Ba(e),Rd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Le=r0(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Le=r0(e)}else t===27?(t=Le,Za(e.type)?(e=Ru,Ru=null,Le=e):Le=t):Le=st?Qt(e.stateNode.nextSibling):null;return!0}function yn(){Le=st=null,Ee=!1}function uo(){var e=za;return e!==null&&(kt===null?kt=e:kt.push.apply(kt,e),za=null),e}function Ir(e){za===null?za=[e]:za.push(e)}var co=j(null),pn=null,ba=null;function La(e,t,a){J(co,t._currentValue),t._currentValue=a}function xa(e){e._currentValue=co.current,D(co)}function ho(e,t,a){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===a)break;e=e.return}}function fo(e,t,a,r){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var g=o.child;u=u.firstContext;e:for(;u!==null;){var v=u;u=o;for(var S=0;S<t.length;S++)if(v.context===t[S]){u.lanes|=a,v=u.alternate,v!==null&&(v.lanes|=a),ho(u.return,a,e),r||(g=null);break e}u=v.next}}else if(o.tag===18){if(g=o.return,g===null)throw Error(i(341));g.lanes|=a,u=g.alternate,u!==null&&(u.lanes|=a),ho(g,a,e),g=null}else g=o.child;if(g!==null)g.return=o;else for(g=o;g!==null;){if(g===e){g=null;break}if(o=g.sibling,o!==null){o.return=g.return,g=o;break}g=g.return}o=g}}function er(e,t,a,r){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var g=o.alternate;if(g===null)throw Error(i(387));if(g=g.memoizedProps,g!==null){var v=o.type;At(o.pendingProps.value,g.value)||(e!==null?e.push(v):e=[v])}}else if(o===Q.current){if(g=o.alternate,g===null)throw Error(i(387));g.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(ws):e=[ws])}o=o.return}e!==null&&fo(t,e,a,r),t.flags|=262144}function ii(e){for(e=e.firstContext;e!==null;){if(!At(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function vn(e){pn=e,ba=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function it(e){return Ud(pn,e)}function li(e,t){return pn===null&&vn(e),Ud(e,t)}function Ud(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ba===null){if(e===null)throw Error(i(308));ba=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ba=ba.next=t;return a}var cy=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},dy=l.unstable_scheduleCallback,hy=l.unstable_NormalPriority,Qe={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function go(){return{controller:new cy,data:new Map,refCount:0}}function Qr(e){e.refCount--,e.refCount===0&&dy(hy,function(){e.controller.abort()})}var Jr=null,mo=0,tr=0,ar=null;function fy(e,t){if(Jr===null){var a=Jr=[];mo=0,tr=vu(),ar={status:"pending",value:void 0,then:function(r){a.push(r)}}}return mo++,t.then(Dd,Dd),t}function Dd(){if(--mo===0&&Jr!==null){ar!==null&&(ar.status="fulfilled");var e=Jr;Jr=null,tr=0,ar=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function gy(e,t){var a=[],r={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(r.status="rejected",r.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),r}var Md=M.S;M.S=function(e,t){bf=ft(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&fy(e,t),Md!==null&&Md(e,t)};var bn=j(null);function yo(){var e=bn.current;return e!==null?e:ze.pooledCache}function oi(e,t){t===null?J(bn,bn.current):J(bn,t.pool)}function zd(){var e=yo();return e===null?null:{parent:Qe._currentValue,pool:e}}var nr=Error(i(460)),po=Error(i(474)),ui=Error(i(542)),ci={then:function(){}};function Bd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ld(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ma,ma),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Hd(e),e;default:if(typeof t.status=="string")t.then(ma,ma);else{if(e=ze,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=r}},function(r){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Hd(e),e}throw wn=t,nr}}function xn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(wn=a,nr):a}}var wn=null;function qd(){if(wn===null)throw Error(i(459));var e=wn;return wn=null,e}function Hd(e){if(e===nr||e===ui)throw Error(i(483))}var rr=null,Zr=0;function di(e){var t=Zr;return Zr+=1,rr===null&&(rr=[]),Ld(rr,e,t)}function Fr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function hi(e,t){throw t.$$typeof===_?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function $d(e){function t(T,E){if(e){var A=T.deletions;A===null?(T.deletions=[E],T.flags|=16):A.push(E)}}function a(T,E){if(!e)return null;for(;E!==null;)t(T,E),E=E.sibling;return null}function r(T){for(var E=new Map;T!==null;)T.key!==null?E.set(T.key,T):E.set(T.index,T),T=T.sibling;return E}function o(T,E){return T=pa(T,E),T.index=0,T.sibling=null,T}function u(T,E,A){return T.index=A,e?(A=T.alternate,A!==null?(A=A.index,A<E?(T.flags|=67108866,E):A):(T.flags|=67108866,E)):(T.flags|=1048576,E)}function g(T){return e&&T.alternate===null&&(T.flags|=67108866),T}function v(T,E,A,$){return E===null||E.tag!==6?(E=ro(A,T.mode,$),E.return=T,E):(E=o(E,A),E.return=T,E)}function S(T,E,A,$){var le=A.type;return le===N?H(T,E,A.props.children,$,A.key):E!==null&&(E.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===de&&xn(le)===E.type)?(E=o(E,A.props),Fr(E,A),E.return=T,E):(E=ri(A.type,A.key,A.props,null,T.mode,$),Fr(E,A),E.return=T,E)}function C(T,E,A,$){return E===null||E.tag!==4||E.stateNode.containerInfo!==A.containerInfo||E.stateNode.implementation!==A.implementation?(E=so(A,T.mode,$),E.return=T,E):(E=o(E,A.children||[]),E.return=T,E)}function H(T,E,A,$,le){return E===null||E.tag!==7?(E=mn(A,T.mode,$,le),E.return=T,E):(E=o(E,A),E.return=T,E)}function V(T,E,A){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=ro(""+E,T.mode,A),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case x:return A=ri(E.type,E.key,E.props,null,T.mode,A),Fr(A,E),A.return=T,A;case k:return E=so(E,T.mode,A),E.return=T,E;case de:return E=xn(E),V(T,E,A)}if(oe(E)||Z(E))return E=mn(E,T.mode,A,null),E.return=T,E;if(typeof E.then=="function")return V(T,di(E),A);if(E.$$typeof===L)return V(T,li(T,E),A);hi(T,E)}return null}function U(T,E,A,$){var le=E!==null?E.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return le!==null?null:v(T,E,""+A,$);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case x:return A.key===le?S(T,E,A,$):null;case k:return A.key===le?C(T,E,A,$):null;case de:return A=xn(A),U(T,E,A,$)}if(oe(A)||Z(A))return le!==null?null:H(T,E,A,$,null);if(typeof A.then=="function")return U(T,E,di(A),$);if(A.$$typeof===L)return U(T,E,li(T,A),$);hi(T,A)}return null}function B(T,E,A,$,le){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return T=T.get(A)||null,v(E,T,""+$,le);if(typeof $=="object"&&$!==null){switch($.$$typeof){case x:return T=T.get($.key===null?A:$.key)||null,S(E,T,$,le);case k:return T=T.get($.key===null?A:$.key)||null,C(E,T,$,le);case de:return $=xn($),B(T,E,A,$,le)}if(oe($)||Z($))return T=T.get(A)||null,H(E,T,$,le,null);if(typeof $.then=="function")return B(T,E,A,di($),le);if($.$$typeof===L)return B(T,E,A,li(E,$),le);hi(E,$)}return null}function te(T,E,A,$){for(var le=null,Ne=null,ne=E,be=E=0,Se=null;ne!==null&&be<A.length;be++){ne.index>be?(Se=ne,ne=null):Se=ne.sibling;var Te=U(T,ne,A[be],$);if(Te===null){ne===null&&(ne=Se);break}e&&ne&&Te.alternate===null&&t(T,ne),E=u(Te,E,be),Ne===null?le=Te:Ne.sibling=Te,Ne=Te,ne=Se}if(be===A.length)return a(T,ne),Ee&&va(T,be),le;if(ne===null){for(;be<A.length;be++)ne=V(T,A[be],$),ne!==null&&(E=u(ne,E,be),Ne===null?le=ne:Ne.sibling=ne,Ne=ne);return Ee&&va(T,be),le}for(ne=r(ne);be<A.length;be++)Se=B(ne,T,be,A[be],$),Se!==null&&(e&&Se.alternate!==null&&ne.delete(Se.key===null?be:Se.key),E=u(Se,E,be),Ne===null?le=Se:Ne.sibling=Se,Ne=Se);return e&&ne.forEach(function(an){return t(T,an)}),Ee&&va(T,be),le}function ce(T,E,A,$){if(A==null)throw Error(i(151));for(var le=null,Ne=null,ne=E,be=E=0,Se=null,Te=A.next();ne!==null&&!Te.done;be++,Te=A.next()){ne.index>be?(Se=ne,ne=null):Se=ne.sibling;var an=U(T,ne,Te.value,$);if(an===null){ne===null&&(ne=Se);break}e&&ne&&an.alternate===null&&t(T,ne),E=u(an,E,be),Ne===null?le=an:Ne.sibling=an,Ne=an,ne=Se}if(Te.done)return a(T,ne),Ee&&va(T,be),le;if(ne===null){for(;!Te.done;be++,Te=A.next())Te=V(T,Te.value,$),Te!==null&&(E=u(Te,E,be),Ne===null?le=Te:Ne.sibling=Te,Ne=Te);return Ee&&va(T,be),le}for(ne=r(ne);!Te.done;be++,Te=A.next())Te=B(ne,T,be,Te.value,$),Te!==null&&(e&&Te.alternate!==null&&ne.delete(Te.key===null?be:Te.key),E=u(Te,E,be),Ne===null?le=Te:Ne.sibling=Te,Ne=Te);return e&&ne.forEach(function(Ep){return t(T,Ep)}),Ee&&va(T,be),le}function Me(T,E,A,$){if(typeof A=="object"&&A!==null&&A.type===N&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case x:e:{for(var le=A.key;E!==null;){if(E.key===le){if(le=A.type,le===N){if(E.tag===7){a(T,E.sibling),$=o(E,A.props.children),$.return=T,T=$;break e}}else if(E.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===de&&xn(le)===E.type){a(T,E.sibling),$=o(E,A.props),Fr($,A),$.return=T,T=$;break e}a(T,E);break}else t(T,E);E=E.sibling}A.type===N?($=mn(A.props.children,T.mode,$,A.key),$.return=T,T=$):($=ri(A.type,A.key,A.props,null,T.mode,$),Fr($,A),$.return=T,T=$)}return g(T);case k:e:{for(le=A.key;E!==null;){if(E.key===le)if(E.tag===4&&E.stateNode.containerInfo===A.containerInfo&&E.stateNode.implementation===A.implementation){a(T,E.sibling),$=o(E,A.children||[]),$.return=T,T=$;break e}else{a(T,E);break}else t(T,E);E=E.sibling}$=so(A,T.mode,$),$.return=T,T=$}return g(T);case de:return A=xn(A),Me(T,E,A,$)}if(oe(A))return te(T,E,A,$);if(Z(A)){if(le=Z(A),typeof le!="function")throw Error(i(150));return A=le.call(A),ce(T,E,A,$)}if(typeof A.then=="function")return Me(T,E,di(A),$);if(A.$$typeof===L)return Me(T,E,li(T,A),$);hi(T,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,E!==null&&E.tag===6?(a(T,E.sibling),$=o(E,A),$.return=T,T=$):(a(T,E),$=ro(A,T.mode,$),$.return=T,T=$),g(T)):a(T,E)}return function(T,E,A,$){try{Zr=0;var le=Me(T,E,A,$);return rr=null,le}catch(ne){if(ne===nr||ne===ui)throw ne;var Ne=Ct(29,ne,null,T.mode);return Ne.lanes=$,Ne.return=T,Ne}finally{}}}var _n=$d(!0),Vd=$d(!1),qa=!1;function vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ha(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function $a(e,t,a){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Oe&2)!==0){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=ni(e),Ed(e,null,a),t}return ai(e,r,t,a),ni(e)}function Wr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Uc(e,a)}}function xo(e,t){var a=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var o=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?o=u=g:u=u.next=g,a=a.next}while(a!==null);u===null?o=u=t:u=u.next=t}else o=u=t;a={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:r.shared,callbacks:r.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var wo=!1;function es(){if(wo){var e=ar;if(e!==null)throw e}}function ts(e,t,a,r){wo=!1;var o=e.updateQueue;qa=!1;var u=o.firstBaseUpdate,g=o.lastBaseUpdate,v=o.shared.pending;if(v!==null){o.shared.pending=null;var S=v,C=S.next;S.next=null,g===null?u=C:g.next=C,g=S;var H=e.alternate;H!==null&&(H=H.updateQueue,v=H.lastBaseUpdate,v!==g&&(v===null?H.firstBaseUpdate=C:v.next=C,H.lastBaseUpdate=S))}if(u!==null){var V=o.baseState;g=0,H=C=S=null,v=u;do{var U=v.lane&-536870913,B=U!==v.lane;if(B?(_e&U)===U:(r&U)===U){U!==0&&U===tr&&(wo=!0),H!==null&&(H=H.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var te=e,ce=v;U=t;var Me=a;switch(ce.tag){case 1:if(te=ce.payload,typeof te=="function"){V=te.call(Me,V,U);break e}V=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=ce.payload,U=typeof te=="function"?te.call(Me,V,U):te,U==null)break e;V=w({},V,U);break e;case 2:qa=!0}}U=v.callback,U!==null&&(e.flags|=64,B&&(e.flags|=8192),B=o.callbacks,B===null?o.callbacks=[U]:B.push(U))}else B={lane:U,tag:v.tag,payload:v.payload,callback:v.callback,next:null},H===null?(C=H=B,S=V):H=H.next=B,g|=U;if(v=v.next,v===null){if(v=o.shared.pending,v===null)break;B=v,v=B.next,B.next=null,o.lastBaseUpdate=B,o.shared.pending=null}}while(!0);H===null&&(S=V),o.baseState=S,o.firstBaseUpdate=C,o.lastBaseUpdate=H,u===null&&(o.shared.lanes=0),Ka|=g,e.lanes=g,e.memoizedState=V}}function Gd(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Pd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Gd(a[e],t)}var sr=j(null),fi=j(0);function Yd(e,t){e=Oa,J(fi,e),J(sr,t),Oa=e|t.baseLanes}function _o(){J(fi,Oa),J(sr,sr.current)}function So(){Oa=fi.current,D(sr),D(fi)}var Rt=j(null),It=null;function Va(e){var t=e.alternate;J(Xe,Xe.current&1),J(Rt,e),It===null&&(t===null||sr.current!==null||t.memoizedState!==null)&&(It=e)}function jo(e){J(Xe,Xe.current),J(Rt,e),It===null&&(It=e)}function Kd(e){e.tag===22?(J(Xe,Xe.current),J(Rt,e),It===null&&(It=e)):Ga()}function Ga(){J(Xe,Xe.current),J(Rt,Rt.current)}function Ut(e){D(Rt),It===e&&(It=null),D(Xe)}var Xe=j(0);function gi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Au(a)||Cu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var wa=0,pe=null,Ue=null,Je=null,mi=!1,ir=!1,Sn=!1,yi=0,as=0,lr=null,my=0;function Ge(){throw Error(i(321))}function Eo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!At(e[a],t[a]))return!1;return!0}function ko(e,t,a,r,o,u){return wa=u,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=e===null||e.memoizedState===null?Oh:$o,Sn=!1,u=a(r,o),Sn=!1,ir&&(u=Id(t,a,r,o)),Xd(e),u}function Xd(e){M.H=ss;var t=Ue!==null&&Ue.next!==null;if(wa=0,Je=Ue=pe=null,mi=!1,as=0,lr=null,t)throw Error(i(300));e===null||Ze||(e=e.dependencies,e!==null&&ii(e)&&(Ze=!0))}function Id(e,t,a,r){pe=e;var o=0;do{if(ir&&(lr=null),as=0,ir=!1,25<=o)throw Error(i(301));if(o+=1,Je=Ue=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}M.H=Ah,u=t(a,r)}while(ir);return u}function yy(){var e=M.H,t=e.useState()[0];return t=typeof t.then=="function"?ns(t):t,e=e.useState()[0],(Ue!==null?Ue.memoizedState:null)!==e&&(pe.flags|=1024),t}function No(){var e=yi!==0;return yi=0,e}function To(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Oo(e){if(mi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}mi=!1}wa=0,Je=Ue=pe=null,ir=!1,as=yi=0,lr=null}function yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?pe.memoizedState=Je=e:Je=Je.next=e,Je}function Ie(){if(Ue===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Je===null?pe.memoizedState:Je.next;if(t!==null)Je=t,Ue=e;else{if(e===null)throw pe.alternate===null?Error(i(467)):Error(i(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Je===null?pe.memoizedState=Je=e:Je=Je.next=e}return Je}function pi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ns(e){var t=as;return as+=1,lr===null&&(lr=[]),e=Ld(lr,e,t),t=pe,(Je===null?t.memoizedState:Je.next)===null&&(t=t.alternate,M.H=t===null||t.memoizedState===null?Oh:$o),e}function vi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ns(e);if(e.$$typeof===L)return it(e)}throw Error(i(438,String(e)))}function Ao(e){var t=null,a=pe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var r=pe.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=pi(),pe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),r=0;r<e;r++)a[r]=He;return t.index++,a}function _a(e,t){return typeof t=="function"?t(e):t}function bi(e){var t=Ie();return Co(t,Ue,e)}function Co(e,t,a){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=a;var o=e.baseQueue,u=r.pending;if(u!==null){if(o!==null){var g=o.next;o.next=u.next,u.next=g}t.baseQueue=o=u,r.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var v=g=null,S=null,C=t,H=!1;do{var V=C.lane&-536870913;if(V!==C.lane?(_e&V)===V:(wa&V)===V){var U=C.revertLane;if(U===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),V===tr&&(H=!0);else if((wa&U)===U){C=C.next,U===tr&&(H=!0);continue}else V={lane:0,revertLane:C.revertLane,gesture:null,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null},S===null?(v=S=V,g=u):S=S.next=V,pe.lanes|=U,Ka|=U;V=C.action,Sn&&a(u,V),u=C.hasEagerState?C.eagerState:a(u,V)}else U={lane:V,revertLane:C.revertLane,gesture:C.gesture,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null},S===null?(v=S=U,g=u):S=S.next=U,pe.lanes|=V,Ka|=V;C=C.next}while(C!==null&&C!==t);if(S===null?g=u:S.next=v,!At(u,e.memoizedState)&&(Ze=!0,H&&(a=ar,a!==null)))throw a;e.memoizedState=u,e.baseState=g,e.baseQueue=S,r.lastRenderedState=u}return o===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ro(e){var t=Ie(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var r=a.dispatch,o=a.pending,u=t.memoizedState;if(o!==null){a.pending=null;var g=o=o.next;do u=e(u,g.action),g=g.next;while(g!==o);At(u,t.memoizedState)||(Ze=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,r]}function Qd(e,t,a){var r=pe,o=Ie(),u=Ee;if(u){if(a===void 0)throw Error(i(407));a=a()}else a=t();var g=!At((Ue||o).memoizedState,a);if(g&&(o.memoizedState=a,Ze=!0),o=o.queue,Mo(Fd.bind(null,r,o,e),[e]),o.getSnapshot!==t||g||Je!==null&&Je.memoizedState.tag&1){if(r.flags|=2048,or(9,{destroy:void 0},Zd.bind(null,r,o,a,t),null),ze===null)throw Error(i(349));u||(wa&127)!==0||Jd(r,t,a)}return a}function Jd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=pe.updateQueue,t===null?(t=pi(),pe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Zd(e,t,a,r){t.value=a,t.getSnapshot=r,Wd(t)&&eh(e)}function Fd(e,t,a){return a(function(){Wd(t)&&eh(e)})}function Wd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!At(e,a)}catch{return!0}}function eh(e){var t=gn(e,2);t!==null&&Nt(t,e,2)}function Uo(e){var t=yt();if(typeof e=="function"){var a=e;if(e=a(),Sn){oa(!0);try{a()}finally{oa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t}function th(e,t,a,r){return e.baseState=a,Co(e,Ue,typeof r=="function"?r:_a)}function py(e,t,a,r,o){if(_i(e))throw Error(i(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){u.listeners.push(g)}};M.T!==null?a(!0):u.isTransition=!1,r(u),a=t.pending,a===null?(u.next=t.pending=u,ah(t,u)):(u.next=a.next,t.pending=a.next=u)}}function ah(e,t){var a=t.action,r=t.payload,o=e.state;if(t.isTransition){var u=M.T,g={};M.T=g;try{var v=a(o,r),S=M.S;S!==null&&S(g,v),nh(e,t,v)}catch(C){Do(e,t,C)}finally{u!==null&&g.types!==null&&(u.types=g.types),M.T=u}}else try{u=a(o,r),nh(e,t,u)}catch(C){Do(e,t,C)}}function nh(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(r){rh(e,t,r)},function(r){return Do(e,t,r)}):rh(e,t,a)}function rh(e,t,a){t.status="fulfilled",t.value=a,sh(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,ah(e,a)))}function Do(e,t,a){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=a,sh(t),t=t.next;while(t!==r)}e.action=null}function sh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ih(e,t){return t}function lh(e,t){if(Ee){var a=ze.formState;if(a!==null){e:{var r=pe;if(Ee){if(Le){t:{for(var o=Le,u=Xt;o.nodeType!==8;){if(!u){o=null;break t}if(o=Qt(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){Le=Qt(o.nextSibling),r=o.data==="F!";break e}}Ba(r)}r=!1}r&&(t=a[0])}}return a=yt(),a.memoizedState=a.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ih,lastRenderedState:t},a.queue=r,a=kh.bind(null,pe,r),r.dispatch=a,r=Uo(!1),u=Ho.bind(null,pe,!1,r.queue),r=yt(),o={state:t,dispatch:null,action:e,pending:null},r.queue=o,a=py.bind(null,pe,o,u,a),o.dispatch=a,r.memoizedState=e,[t,a,!1]}function oh(e){var t=Ie();return uh(t,Ue,e)}function uh(e,t,a){if(t=Co(e,t,ih)[0],e=bi(_a)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=ns(t)}catch(g){throw g===nr?ui:g}else r=t;t=Ie();var o=t.queue,u=o.dispatch;return a!==t.memoizedState&&(pe.flags|=2048,or(9,{destroy:void 0},vy.bind(null,o,a),null)),[r,u,e]}function vy(e,t){e.action=t}function ch(e){var t=Ie(),a=Ue;if(a!==null)return uh(t,a,e);Ie(),t=t.memoizedState,a=Ie();var r=a.queue.dispatch;return a.memoizedState=e,[t,r,!1]}function or(e,t,a,r){return e={tag:e,create:a,deps:r,inst:t,next:null},t=pe.updateQueue,t===null&&(t=pi(),pe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,t.lastEffect=e),e}function dh(){return Ie().memoizedState}function xi(e,t,a,r){var o=yt();pe.flags|=e,o.memoizedState=or(1|t,{destroy:void 0},a,r===void 0?null:r)}function wi(e,t,a,r){var o=Ie();r=r===void 0?null:r;var u=o.memoizedState.inst;Ue!==null&&r!==null&&Eo(r,Ue.memoizedState.deps)?o.memoizedState=or(t,u,a,r):(pe.flags|=e,o.memoizedState=or(1|t,u,a,r))}function hh(e,t){xi(8390656,8,e,t)}function Mo(e,t){wi(2048,8,e,t)}function by(e){pe.flags|=4;var t=pe.updateQueue;if(t===null)t=pi(),pe.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function fh(e){var t=Ie().memoizedState;return by({ref:t,nextImpl:e}),function(){if((Oe&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function gh(e,t){return wi(4,2,e,t)}function mh(e,t){return wi(4,4,e,t)}function yh(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ph(e,t,a){a=a!=null?a.concat([e]):null,wi(4,4,yh.bind(null,t,e),a)}function zo(){}function vh(e,t){var a=Ie();t=t===void 0?null:t;var r=a.memoizedState;return t!==null&&Eo(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function bh(e,t){var a=Ie();t=t===void 0?null:t;var r=a.memoizedState;if(t!==null&&Eo(t,r[1]))return r[0];if(r=e(),Sn){oa(!0);try{e()}finally{oa(!1)}}return a.memoizedState=[r,t],r}function Bo(e,t,a){return a===void 0||(wa&1073741824)!==0&&(_e&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=wf(),pe.lanes|=e,Ka|=e,a)}function xh(e,t,a,r){return At(a,t)?a:sr.current!==null?(e=Bo(e,a,r),At(e,t)||(Ze=!0),e):(wa&42)===0||(wa&1073741824)!==0&&(_e&261930)===0?(Ze=!0,e.memoizedState=a):(e=wf(),pe.lanes|=e,Ka|=e,t)}function wh(e,t,a,r,o){var u=P.p;P.p=u!==0&&8>u?u:8;var g=M.T,v={};M.T=v,Ho(e,!1,t,a);try{var S=o(),C=M.S;if(C!==null&&C(v,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var H=gy(S,r);rs(e,t,H,zt(e))}else rs(e,t,r,zt(e))}catch(V){rs(e,t,{then:function(){},status:"rejected",reason:V},zt())}finally{P.p=u,g!==null&&v.types!==null&&(g.types=v.types),M.T=g}}function xy(){}function Lo(e,t,a,r){if(e.tag!==5)throw Error(i(476));var o=_h(e).queue;wh(e,o,t,q,a===null?xy:function(){return Sh(e),a(r)})}function _h(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:q},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Sh(e){var t=_h(e);t.next===null&&(t=e.alternate.memoizedState),rs(e,t.next.queue,{},zt())}function qo(){return it(ws)}function jh(){return Ie().memoizedState}function Eh(){return Ie().memoizedState}function wy(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=zt();e=Ha(a);var r=$a(t,e,a);r!==null&&(Nt(r,t,a),Wr(r,t,a)),t={cache:go()},e.payload=t;return}t=t.return}}function _y(e,t,a){var r=zt();a={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},_i(e)?Nh(t,a):(a=ao(e,t,a,r),a!==null&&(Nt(a,e,r),Th(a,t,r)))}function kh(e,t,a){var r=zt();rs(e,t,a,r)}function rs(e,t,a,r){var o={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(_i(e))Nh(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var g=t.lastRenderedState,v=u(g,a);if(o.hasEagerState=!0,o.eagerState=v,At(v,g))return ai(e,t,o,0),ze===null&&ti(),!1}catch{}finally{}if(a=ao(e,t,o,r),a!==null)return Nt(a,e,r),Th(a,t,r),!0}return!1}function Ho(e,t,a,r){if(r={lane:2,revertLane:vu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},_i(e)){if(t)throw Error(i(479))}else t=ao(e,a,r,2),t!==null&&Nt(t,e,2)}function _i(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function Nh(e,t){ir=mi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Th(e,t,a){if((a&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Uc(e,a)}}var ss={readContext:it,use:vi,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge};ss.useEffectEvent=Ge;var Oh={readContext:it,use:vi,useCallback:function(e,t){return yt().memoizedState=[e,t===void 0?null:t],e},useContext:it,useEffect:hh,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,xi(4194308,4,yh.bind(null,t,e),a)},useLayoutEffect:function(e,t){return xi(4194308,4,e,t)},useInsertionEffect:function(e,t){xi(4,2,e,t)},useMemo:function(e,t){var a=yt();t=t===void 0?null:t;var r=e();if(Sn){oa(!0);try{e()}finally{oa(!1)}}return a.memoizedState=[r,t],r},useReducer:function(e,t,a){var r=yt();if(a!==void 0){var o=a(t);if(Sn){oa(!0);try{a(t)}finally{oa(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=_y.bind(null,pe,e),[r.memoizedState,e]},useRef:function(e){var t=yt();return e={current:e},t.memoizedState=e},useState:function(e){e=Uo(e);var t=e.queue,a=kh.bind(null,pe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:zo,useDeferredValue:function(e,t){var a=yt();return Bo(a,e,t)},useTransition:function(){var e=Uo(!1);return e=wh.bind(null,pe,e.queue,!0,!1),yt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var r=pe,o=yt();if(Ee){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),ze===null)throw Error(i(349));(_e&127)!==0||Jd(r,t,a)}o.memoizedState=a;var u={value:a,getSnapshot:t};return o.queue=u,hh(Fd.bind(null,r,u,e),[e]),r.flags|=2048,or(9,{destroy:void 0},Zd.bind(null,r,u,a,t),null),a},useId:function(){var e=yt(),t=ze.identifierPrefix;if(Ee){var a=ca,r=ua;a=(r&~(1<<32-mt(r)-1)).toString(32)+a,t="_"+t+"R_"+a,a=yi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=my++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:qo,useFormState:lh,useActionState:lh,useOptimistic:function(e){var t=yt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Ho.bind(null,pe,!0,a),a.dispatch=t,[e,t]},useMemoCache:Ao,useCacheRefresh:function(){return yt().memoizedState=wy.bind(null,pe)},useEffectEvent:function(e){var t=yt(),a={impl:e};return t.memoizedState=a,function(){if((Oe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},$o={readContext:it,use:vi,useCallback:vh,useContext:it,useEffect:Mo,useImperativeHandle:ph,useInsertionEffect:gh,useLayoutEffect:mh,useMemo:bh,useReducer:bi,useRef:dh,useState:function(){return bi(_a)},useDebugValue:zo,useDeferredValue:function(e,t){var a=Ie();return xh(a,Ue.memoizedState,e,t)},useTransition:function(){var e=bi(_a)[0],t=Ie().memoizedState;return[typeof e=="boolean"?e:ns(e),t]},useSyncExternalStore:Qd,useId:jh,useHostTransitionStatus:qo,useFormState:oh,useActionState:oh,useOptimistic:function(e,t){var a=Ie();return th(a,Ue,e,t)},useMemoCache:Ao,useCacheRefresh:Eh};$o.useEffectEvent=fh;var Ah={readContext:it,use:vi,useCallback:vh,useContext:it,useEffect:Mo,useImperativeHandle:ph,useInsertionEffect:gh,useLayoutEffect:mh,useMemo:bh,useReducer:Ro,useRef:dh,useState:function(){return Ro(_a)},useDebugValue:zo,useDeferredValue:function(e,t){var a=Ie();return Ue===null?Bo(a,e,t):xh(a,Ue.memoizedState,e,t)},useTransition:function(){var e=Ro(_a)[0],t=Ie().memoizedState;return[typeof e=="boolean"?e:ns(e),t]},useSyncExternalStore:Qd,useId:jh,useHostTransitionStatus:qo,useFormState:ch,useActionState:ch,useOptimistic:function(e,t){var a=Ie();return Ue!==null?th(a,Ue,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ao,useCacheRefresh:Eh};Ah.useEffectEvent=fh;function Vo(e,t,a,r){t=e.memoizedState,a=a(r,t),a=a==null?t:w({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Go={enqueueSetState:function(e,t,a){e=e._reactInternals;var r=zt(),o=Ha(r);o.payload=t,a!=null&&(o.callback=a),t=$a(e,o,r),t!==null&&(Nt(t,e,r),Wr(t,e,r))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var r=zt(),o=Ha(r);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=$a(e,o,r),t!==null&&(Nt(t,e,r),Wr(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=zt(),r=Ha(a);r.tag=2,t!=null&&(r.callback=t),t=$a(e,r,a),t!==null&&(Nt(t,e,a),Wr(t,e,a))}};function Ch(e,t,a,r,o,u,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,u,g):t.prototype&&t.prototype.isPureReactComponent?!Yr(a,r)||!Yr(o,u):!0}function Rh(e,t,a,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&Go.enqueueReplaceState(t,t.state,null)}function jn(e,t){var a=t;if("ref"in t){a={};for(var r in t)r!=="ref"&&(a[r]=t[r])}if(e=e.defaultProps){a===t&&(a=w({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}function Uh(e){ei(e)}function Dh(e){console.error(e)}function Mh(e){ei(e)}function Si(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function zh(e,t,a){try{var r=e.onCaughtError;r(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Po(e,t,a){return a=Ha(a),a.tag=3,a.payload={element:null},a.callback=function(){Si(e,t)},a}function Bh(e){return e=Ha(e),e.tag=3,e}function Lh(e,t,a,r){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var u=r.value;e.payload=function(){return o(u)},e.callback=function(){zh(t,a,r)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){zh(t,a,r),typeof o!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})})}function Sy(e,t,a,r,o){if(a.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=a.alternate,t!==null&&er(t,a,o,!0),a=Rt.current,a!==null){switch(a.tag){case 31:case 13:return It===null?Mi():a.alternate===null&&Pe===0&&(Pe=3),a.flags&=-257,a.flags|=65536,a.lanes=o,r===ci?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([r]):t.add(r),mu(e,r,o)),!1;case 22:return a.flags|=65536,r===ci?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([r]):a.add(r)),mu(e,r,o)),!1}throw Error(i(435,a.tag))}return mu(e,r,o),Mi(),!1}if(Ee)return t=Rt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==oo&&(e=Error(i(422),{cause:r}),Ir(Pt(e,a)))):(r!==oo&&(t=Error(i(423),{cause:r}),Ir(Pt(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,r=Pt(r,a),o=Po(e.stateNode,r,o),xo(e,o),Pe!==4&&(Pe=2)),!1;var u=Error(i(520),{cause:r});if(u=Pt(u,a),fs===null?fs=[u]:fs.push(u),Pe!==4&&(Pe=2),t===null)return!0;r=Pt(r,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=Po(a.stateNode,r,e),xo(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Xa===null||!Xa.has(u))))return a.flags|=65536,o&=-o,a.lanes|=o,o=Bh(o),Lh(o,e,a,r),xo(a,o),!1}a=a.return}while(a!==null);return!1}var Yo=Error(i(461)),Ze=!1;function lt(e,t,a,r){t.child=e===null?Vd(t,null,a,r):_n(t,e.child,a,r)}function qh(e,t,a,r,o){a=a.render;var u=t.ref;if("ref"in r){var g={};for(var v in r)v!=="ref"&&(g[v]=r[v])}else g=r;return vn(t),r=ko(e,t,a,g,u,o),v=No(),e!==null&&!Ze?(To(e,t,o),Sa(e,t,o)):(Ee&&v&&io(t),t.flags|=1,lt(e,t,r,o),t.child)}function Hh(e,t,a,r,o){if(e===null){var u=a.type;return typeof u=="function"&&!no(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,$h(e,t,u,r,o)):(e=ri(a.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Wo(e,o)){var g=u.memoizedProps;if(a=a.compare,a=a!==null?a:Yr,a(g,r)&&e.ref===t.ref)return Sa(e,t,o)}return t.flags|=1,e=pa(u,r),e.ref=t.ref,e.return=t,t.child=e}function $h(e,t,a,r,o){if(e!==null){var u=e.memoizedProps;if(Yr(u,r)&&e.ref===t.ref)if(Ze=!1,t.pendingProps=r=u,Wo(e,o))(e.flags&131072)!==0&&(Ze=!0);else return t.lanes=e.lanes,Sa(e,t,o)}return Ko(e,t,a,r,o)}function Vh(e,t,a,r){var o=r.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(r=t.child=e.child,o=0;r!==null;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~u}else r=0,t.child=null;return Gh(e,t,u,a,r)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&oi(t,u!==null?u.cachePool:null),u!==null?Yd(t,u):_o(),Kd(t);else return r=t.lanes=536870912,Gh(e,t,u!==null?u.baseLanes|a:a,a,r)}else u!==null?(oi(t,u.cachePool),Yd(t,u),Ga(),t.memoizedState=null):(e!==null&&oi(t,null),_o(),Ga());return lt(e,t,o,a),t.child}function is(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Gh(e,t,a,r,o){var u=yo();return u=u===null?null:{parent:Qe._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&oi(t,null),_o(),Kd(t),e!==null&&er(e,t,r,!0),t.childLanes=o,null}function ji(e,t){return t=ki({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ph(e,t,a){return _n(t,e.child,null,a),e=ji(t,t.pendingProps),e.flags|=2,Ut(t),t.memoizedState=null,e}function jy(e,t,a){var r=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ee){if(r.mode==="hidden")return e=ji(t,r),t.lanes=536870912,is(null,e);if(jo(t),(e=Le)?(e=n0(e,Xt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ma!==null?{id:ua,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},a=Nd(e),a.return=t,t.child=a,st=t,Le=null)):e=null,e===null)throw Ba(t);return t.lanes=536870912,null}return ji(t,r)}var u=e.memoizedState;if(u!==null){var g=u.dehydrated;if(jo(t),o)if(t.flags&256)t.flags&=-257,t=Ph(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(Ze||er(e,t,a,!1),o=(a&e.childLanes)!==0,Ze||o){if(r=ze,r!==null&&(g=Dc(r,a),g!==0&&g!==u.retryLane))throw u.retryLane=g,gn(e,g),Nt(r,e,g),Yo;Mi(),t=Ph(e,t,a)}else e=u.treeContext,Le=Qt(g.nextSibling),st=t,Ee=!0,za=null,Xt=!1,e!==null&&Ad(t,e),t=ji(t,r),t.flags|=4096;return t}return e=pa(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ei(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Ko(e,t,a,r,o){return vn(t),a=ko(e,t,a,r,void 0,o),r=No(),e!==null&&!Ze?(To(e,t,o),Sa(e,t,o)):(Ee&&r&&io(t),t.flags|=1,lt(e,t,a,o),t.child)}function Yh(e,t,a,r,o,u){return vn(t),t.updateQueue=null,a=Id(t,r,a,o),Xd(e),r=No(),e!==null&&!Ze?(To(e,t,u),Sa(e,t,u)):(Ee&&r&&io(t),t.flags|=1,lt(e,t,a,u),t.child)}function Kh(e,t,a,r,o){if(vn(t),t.stateNode===null){var u=Jn,g=a.contextType;typeof g=="object"&&g!==null&&(u=it(g)),u=new a(r,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Go,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=r,u.state=t.memoizedState,u.refs={},vo(t),g=a.contextType,u.context=typeof g=="object"&&g!==null?it(g):Jn,u.state=t.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(Vo(t,a,g,r),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(g=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),g!==u.state&&Go.enqueueReplaceState(u,u.state,null),ts(t,r,u,o),es(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){u=t.stateNode;var v=t.memoizedProps,S=jn(a,v);u.props=S;var C=u.context,H=a.contextType;g=Jn,typeof H=="object"&&H!==null&&(g=it(H));var V=a.getDerivedStateFromProps;H=typeof V=="function"||typeof u.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,H||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(v||C!==g)&&Rh(t,u,r,g),qa=!1;var U=t.memoizedState;u.state=U,ts(t,r,u,o),es(),C=t.memoizedState,v||U!==C||qa?(typeof V=="function"&&(Vo(t,a,V,r),C=t.memoizedState),(S=qa||Ch(t,a,S,r,U,C,g))?(H||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=C),u.props=r,u.state=C,u.context=g,r=S):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,bo(e,t),g=t.memoizedProps,H=jn(a,g),u.props=H,V=t.pendingProps,U=u.context,C=a.contextType,S=Jn,typeof C=="object"&&C!==null&&(S=it(C)),v=a.getDerivedStateFromProps,(C=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==V||U!==S)&&Rh(t,u,r,S),qa=!1,U=t.memoizedState,u.state=U,ts(t,r,u,o),es();var B=t.memoizedState;g!==V||U!==B||qa||e!==null&&e.dependencies!==null&&ii(e.dependencies)?(typeof v=="function"&&(Vo(t,a,v,r),B=t.memoizedState),(H=qa||Ch(t,a,H,r,U,B,S)||e!==null&&e.dependencies!==null&&ii(e.dependencies))?(C||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,B,S),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,B,S)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=B),u.props=r,u.state=B,u.context=S,r=H):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),r=!1)}return u=r,Ei(e,t),r=(t.flags&128)!==0,u||r?(u=t.stateNode,a=r&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&r?(t.child=_n(t,e.child,null,o),t.child=_n(t,null,a,o)):lt(e,t,a,o),t.memoizedState=u.state,e=t.child):e=Sa(e,t,o),e}function Xh(e,t,a,r){return yn(),t.flags|=256,lt(e,t,a,r),t.child}var Xo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Io(e){return{baseLanes:e,cachePool:zd()}}function Qo(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Mt),e}function Ih(e,t,a){var r=t.pendingProps,o=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:(Xe.current&2)!==0),g&&(o=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ee){if(o?Va(t):Ga(),(e=Le)?(e=n0(e,Xt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ma!==null?{id:ua,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},a=Nd(e),a.return=t,t.child=a,st=t,Le=null)):e=null,e===null)throw Ba(t);return Cu(e)?t.lanes=32:t.lanes=536870912,null}var v=r.children;return r=r.fallback,o?(Ga(),o=t.mode,v=ki({mode:"hidden",children:v},o),r=mn(r,o,a,null),v.return=t,r.return=t,v.sibling=r,t.child=v,r=t.child,r.memoizedState=Io(a),r.childLanes=Qo(e,g,a),t.memoizedState=Xo,is(null,r)):(Va(t),Jo(t,v))}var S=e.memoizedState;if(S!==null&&(v=S.dehydrated,v!==null)){if(u)t.flags&256?(Va(t),t.flags&=-257,t=Zo(e,t,a)):t.memoizedState!==null?(Ga(),t.child=e.child,t.flags|=128,t=null):(Ga(),v=r.fallback,o=t.mode,r=ki({mode:"visible",children:r.children},o),v=mn(v,o,a,null),v.flags|=2,r.return=t,v.return=t,r.sibling=v,t.child=r,_n(t,e.child,null,a),r=t.child,r.memoizedState=Io(a),r.childLanes=Qo(e,g,a),t.memoizedState=Xo,t=is(null,r));else if(Va(t),Cu(v)){if(g=v.nextSibling&&v.nextSibling.dataset,g)var C=g.dgst;g=C,r=Error(i(419)),r.stack="",r.digest=g,Ir({value:r,source:null,stack:null}),t=Zo(e,t,a)}else if(Ze||er(e,t,a,!1),g=(a&e.childLanes)!==0,Ze||g){if(g=ze,g!==null&&(r=Dc(g,a),r!==0&&r!==S.retryLane))throw S.retryLane=r,gn(e,r),Nt(g,e,r),Yo;Au(v)||Mi(),t=Zo(e,t,a)}else Au(v)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,Le=Qt(v.nextSibling),st=t,Ee=!0,za=null,Xt=!1,e!==null&&Ad(t,e),t=Jo(t,r.children),t.flags|=4096);return t}return o?(Ga(),v=r.fallback,o=t.mode,S=e.child,C=S.sibling,r=pa(S,{mode:"hidden",children:r.children}),r.subtreeFlags=S.subtreeFlags&65011712,C!==null?v=pa(C,v):(v=mn(v,o,a,null),v.flags|=2),v.return=t,r.return=t,r.sibling=v,t.child=r,is(null,r),r=t.child,v=e.child.memoizedState,v===null?v=Io(a):(o=v.cachePool,o!==null?(S=Qe._currentValue,o=o.parent!==S?{parent:S,pool:S}:o):o=zd(),v={baseLanes:v.baseLanes|a,cachePool:o}),r.memoizedState=v,r.childLanes=Qo(e,g,a),t.memoizedState=Xo,is(e.child,r)):(Va(t),a=e.child,e=a.sibling,a=pa(a,{mode:"visible",children:r.children}),a.return=t,a.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=a,t.memoizedState=null,a)}function Jo(e,t){return t=ki({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ki(e,t){return e=Ct(22,e,null,t),e.lanes=0,e}function Zo(e,t,a){return _n(t,e.child,null,a),e=Jo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qh(e,t,a){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ho(e.return,t,a)}function Fo(e,t,a,r,o,u){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:o,treeForkCount:u}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=r,g.tail=a,g.tailMode=o,g.treeForkCount=u)}function Jh(e,t,a){var r=t.pendingProps,o=r.revealOrder,u=r.tail;r=r.children;var g=Xe.current,v=(g&2)!==0;if(v?(g=g&1|2,t.flags|=128):g&=1,J(Xe,g),lt(e,t,r,a),r=Ee?Xr:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qh(e,a,t);else if(e.tag===19)Qh(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&gi(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),Fo(t,!1,o,a,u,r);break;case"backwards":case"unstable_legacy-backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&gi(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}Fo(t,!0,a,null,u,r);break;case"together":Fo(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Sa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ka|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(er(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=pa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=pa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Wo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ii(e)))}function Ey(e,t,a){switch(t.tag){case 3:me(t,t.stateNode.containerInfo),La(t,Qe,e.memoizedState.cache),yn();break;case 27:case 5:Ke(t);break;case 4:me(t,t.stateNode.containerInfo);break;case 10:La(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,jo(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Va(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Ih(e,t,a):(Va(t),e=Sa(e,t,a),e!==null?e.sibling:null);Va(t);break;case 19:var o=(e.flags&128)!==0;if(r=(a&t.childLanes)!==0,r||(er(e,t,a,!1),r=(a&t.childLanes)!==0),o){if(r)return Jh(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),J(Xe,Xe.current),r)break;return null;case 22:return t.lanes=0,Vh(e,t,a,t.pendingProps);case 24:La(t,Qe,e.memoizedState.cache)}return Sa(e,t,a)}function Zh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ze=!0;else{if(!Wo(e,a)&&(t.flags&128)===0)return Ze=!1,Ey(e,t,a);Ze=(e.flags&131072)!==0}else Ze=!1,Ee&&(t.flags&1048576)!==0&&Od(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=xn(t.elementType),t.type=e,typeof e=="function")no(e)?(r=jn(e,r),t.tag=1,t=Kh(null,t,e,r,a)):(t.tag=0,t=Ko(null,t,e,r,a));else{if(e!=null){var o=e.$$typeof;if(o===I){t.tag=11,t=qh(null,t,e,r,a);break e}else if(o===K){t.tag=14,t=Hh(null,t,e,r,a);break e}}throw t=ye(e)||e,Error(i(306,t,""))}}return t;case 0:return Ko(e,t,t.type,t.pendingProps,a);case 1:return r=t.type,o=jn(r,t.pendingProps),Kh(e,t,r,o,a);case 3:e:{if(me(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var u=t.memoizedState;o=u.element,bo(e,t),ts(t,r,null,a);var g=t.memoizedState;if(r=g.cache,La(t,Qe,r),r!==u.cache&&fo(t,[Qe],a,!0),es(),r=g.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Xh(e,t,r,a);break e}else if(r!==o){o=Pt(Error(i(424)),t),Ir(o),t=Xh(e,t,r,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Le=Qt(e.firstChild),st=t,Ee=!0,za=null,Xt=!0,a=Vd(t,null,r,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(yn(),r===o){t=Sa(e,t,a);break e}lt(e,t,r,a)}t=t.child}return t;case 26:return Ei(e,t),e===null?(a=u0(t.type,null,t.pendingProps,null))?t.memoizedState=a:Ee||(a=t.type,e=t.pendingProps,r=Vi(ge.current).createElement(a),r[rt]=t,r[wt]=e,ot(r,a,e),at(r),t.stateNode=r):t.memoizedState=u0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ke(t),e===null&&Ee&&(r=t.stateNode=i0(t.type,t.pendingProps,ge.current),st=t,Xt=!0,o=Le,Za(t.type)?(Ru=o,Le=Qt(r.firstChild)):Le=o),lt(e,t,t.pendingProps.children,a),Ei(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ee&&((o=r=Le)&&(r=tp(r,t.type,t.pendingProps,Xt),r!==null?(t.stateNode=r,st=t,Le=Qt(r.firstChild),Xt=!1,o=!0):o=!1),o||Ba(t)),Ke(t),o=t.type,u=t.pendingProps,g=e!==null?e.memoizedProps:null,r=u.children,Nu(o,u)?r=null:g!==null&&Nu(o,g)&&(t.flags|=32),t.memoizedState!==null&&(o=ko(e,t,yy,null,null,a),ws._currentValue=o),Ei(e,t),lt(e,t,r,a),t.child;case 6:return e===null&&Ee&&((e=a=Le)&&(a=ap(a,t.pendingProps,Xt),a!==null?(t.stateNode=a,st=t,Le=null,e=!0):e=!1),e||Ba(t)),null;case 13:return Ih(e,t,a);case 4:return me(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=_n(t,null,r,a):lt(e,t,r,a),t.child;case 11:return qh(e,t,t.type,t.pendingProps,a);case 7:return lt(e,t,t.pendingProps,a),t.child;case 8:return lt(e,t,t.pendingProps.children,a),t.child;case 12:return lt(e,t,t.pendingProps.children,a),t.child;case 10:return r=t.pendingProps,La(t,t.type,r.value),lt(e,t,r.children,a),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,vn(t),o=it(o),r=r(o),t.flags|=1,lt(e,t,r,a),t.child;case 14:return Hh(e,t,t.type,t.pendingProps,a);case 15:return $h(e,t,t.type,t.pendingProps,a);case 19:return Jh(e,t,a);case 31:return jy(e,t,a);case 22:return Vh(e,t,a,t.pendingProps);case 24:return vn(t),r=it(Qe),e===null?(o=yo(),o===null&&(o=ze,u=go(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=a),o=u),t.memoizedState={parent:r,cache:o},vo(t),La(t,Qe,o)):((e.lanes&a)!==0&&(bo(e,t),ts(t,null,null,a),es()),o=e.memoizedState,u=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),La(t,Qe,r)):(r=u.cache,La(t,Qe,r),r!==o.cache&&fo(t,[Qe],a,!0))),lt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ja(e){e.flags|=4}function eu(e,t,a,r,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(Ef())e.flags|=8192;else throw wn=ci,po}else e.flags&=-16777217}function Fh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!g0(t))if(Ef())e.flags|=8192;else throw wn=ci,po}function Ni(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Cc():536870912,e.lanes|=t,hr|=t)}function ls(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,r=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,r|=o.subtreeFlags&65011712,r|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=a,t}function ky(e,t,a){var r=t.pendingProps;switch(lo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return qe(t),null;case 3:return a=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xa(Qe),ke(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Wn(t)?ja(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,uo())),qe(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(ja(t),u!==null?(qe(t),Fh(t,u)):(qe(t),eu(t,o,null,r,a))):u?u!==e.memoizedState?(ja(t),qe(t),Fh(t,u)):(qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&ja(t),qe(t),eu(t,o,e,r,a)),null;case 27:if(vt(t),a=ge.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&ja(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return qe(t),null}e=ee.current,Wn(t)?Cd(t):(e=i0(o,r,a),t.stateNode=e,ja(t))}return qe(t),null;case 5:if(vt(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&ja(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return qe(t),null}if(u=ee.current,Wn(t))Cd(t);else{var g=Vi(ge.current);switch(u){case 1:u=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=g.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof r.is=="string"?g.createElement("select",{is:r.is}):g.createElement("select"),r.multiple?u.multiple=!0:r.size&&(u.size=r.size);break;default:u=typeof r.is=="string"?g.createElement(o,{is:r.is}):g.createElement(o)}}u[rt]=t,u[wt]=r;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=u;e:switch(ot(u,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ja(t)}}return qe(t),eu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&ja(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(i(166));if(e=ge.current,Wn(t)){if(e=t.stateNode,a=t.memoizedProps,r=null,o=st,o!==null)switch(o.tag){case 27:case 5:r=o.memoizedProps}e[rt]=t,e=!!(e.nodeValue===a||r!==null&&r.suppressHydrationWarning===!0||Qf(e.nodeValue,a)),e||Ba(t,!0)}else e=Vi(e).createTextNode(r),e[rt]=t,t.stateNode=e}return qe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(r=Wn(t),a!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[rt]=t}else yn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),e=!1}else a=uo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Ut(t),t):(Ut(t),null);if((t.flags&128)!==0)throw Error(i(558))}return qe(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Wn(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(i(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));o[rt]=t}else yn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),o=!1}else o=uo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Ut(t),t):(Ut(t),null)}return Ut(t),(t.flags&128)!==0?(t.lanes=a,t):(a=r!==null,e=e!==null&&e.memoizedState!==null,a&&(r=t.child,o=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(o=r.alternate.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Ni(t,t.updateQueue),qe(t),null);case 4:return ke(),e===null&&_u(t.stateNode.containerInfo),qe(t),null;case 10:return xa(t.type),qe(t),null;case 19:if(D(Xe),r=t.memoizedState,r===null)return qe(t),null;if(o=(t.flags&128)!==0,u=r.rendering,u===null)if(o)ls(r,!1);else{if(Pe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=gi(e),u!==null){for(t.flags|=128,ls(r,!1),e=u.updateQueue,t.updateQueue=e,Ni(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)kd(a,e),a=a.sibling;return J(Xe,Xe.current&1|2),Ee&&va(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&ft()>Ri&&(t.flags|=128,o=!0,ls(r,!1),t.lanes=4194304)}else{if(!o)if(e=gi(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Ni(t,e),ls(r,!0),r.tail===null&&r.tailMode==="hidden"&&!u.alternate&&!Ee)return qe(t),null}else 2*ft()-r.renderingStartTime>Ri&&a!==536870912&&(t.flags|=128,o=!0,ls(r,!1),t.lanes=4194304);r.isBackwards?(u.sibling=t.child,t.child=u):(e=r.last,e!==null?e.sibling=u:t.child=u,r.last=u)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ft(),e.sibling=null,a=Xe.current,J(Xe,o?a&1|2:a&1),Ee&&va(t,r.treeForkCount),e):(qe(t),null);case 22:case 23:return Ut(t),So(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(a&536870912)!==0&&(t.flags&128)===0&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),a=t.updateQueue,a!==null&&Ni(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==a&&(t.flags|=2048),e!==null&&D(bn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),xa(Qe),qe(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Ny(e,t){switch(lo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xa(Qe),ke(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return vt(t),null;case 31:if(t.memoizedState!==null){if(Ut(t),t.alternate===null)throw Error(i(340));yn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ut(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));yn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return D(Xe),null;case 4:return ke(),null;case 10:return xa(t.type),null;case 22:case 23:return Ut(t),So(),e!==null&&D(bn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return xa(Qe),null;case 25:return null;default:return null}}function Wh(e,t){switch(lo(t),t.tag){case 3:xa(Qe),ke();break;case 26:case 27:case 5:vt(t);break;case 4:ke();break;case 31:t.memoizedState!==null&&Ut(t);break;case 13:Ut(t);break;case 19:D(Xe);break;case 10:xa(t.type);break;case 22:case 23:Ut(t),So(),e!==null&&D(bn);break;case 24:xa(Qe)}}function os(e,t){try{var a=t.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var o=r.next;a=o;do{if((a.tag&e)===e){r=void 0;var u=a.create,g=a.inst;r=u(),g.destroy=r}a=a.next}while(a!==o)}}catch(v){Ce(t,t.return,v)}}function Pa(e,t,a){try{var r=t.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var u=o.next;r=u;do{if((r.tag&e)===e){var g=r.inst,v=g.destroy;if(v!==void 0){g.destroy=void 0,o=t;var S=a,C=v;try{C()}catch(H){Ce(o,S,H)}}}r=r.next}while(r!==u)}}catch(H){Ce(t,t.return,H)}}function ef(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Pd(t,a)}catch(r){Ce(e,e.return,r)}}}function tf(e,t,a){a.props=jn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(r){Ce(e,t,r)}}function us(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof a=="function"?e.refCleanup=a(r):a.current=r}}catch(o){Ce(e,t,o)}}function da(e,t){var a=e.ref,r=e.refCleanup;if(a!==null)if(typeof r=="function")try{r()}catch(o){Ce(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){Ce(e,t,o)}else a.current=null}function af(e){var t=e.type,a=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break e;case"img":a.src?r.src=a.src:a.srcSet&&(r.srcset=a.srcSet)}}catch(o){Ce(e,e.return,o)}}function tu(e,t,a){try{var r=e.stateNode;Qy(r,e.type,a,t),r[wt]=t}catch(o){Ce(e,e.return,o)}}function nf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Za(e.type)||e.tag===4}function au(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Za(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nu(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ma));else if(r!==4&&(r===27&&Za(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(nu(e,t,a),e=e.sibling;e!==null;)nu(e,t,a),e=e.sibling}function Ti(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(r!==4&&(r===27&&Za(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ti(e,t,a),e=e.sibling;e!==null;)Ti(e,t,a),e=e.sibling}function rf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ot(t,r,a),t[rt]=e,t[wt]=a}catch(u){Ce(e,e.return,u)}}var Ea=!1,Fe=!1,ru=!1,sf=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Ty(e,t){if(e=e.containerInfo,Eu=Qi,e=pd(e),Jl(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var o=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var g=0,v=-1,S=-1,C=0,H=0,V=e,U=null;t:for(;;){for(var B;V!==a||o!==0&&V.nodeType!==3||(v=g+o),V!==u||r!==0&&V.nodeType!==3||(S=g+r),V.nodeType===3&&(g+=V.nodeValue.length),(B=V.firstChild)!==null;)U=V,V=B;for(;;){if(V===e)break t;if(U===a&&++C===o&&(v=g),U===u&&++H===r&&(S=g),(B=V.nextSibling)!==null)break;V=U,U=V.parentNode}V=B}a=v===-1||S===-1?null:{start:v,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(ku={focusedElem:e,selectionRange:a},Qi=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){switch(t=nt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)o=e[a],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,o=u.memoizedProps,u=u.memoizedState,r=a.stateNode;try{var te=jn(a.type,o);e=r.getSnapshotBeforeUpdate(te,u),r.__reactInternalSnapshotBeforeUpdate=e}catch(ce){Ce(a,a.return,ce)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Ou(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ou(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}}function lf(e,t,a){var r=a.flags;switch(a.tag){case 0:case 11:case 15:Na(e,a),r&4&&os(5,a);break;case 1:if(Na(e,a),r&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(g){Ce(a,a.return,g)}else{var o=jn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Ce(a,a.return,g)}}r&64&&ef(a),r&512&&us(a,a.return);break;case 3:if(Na(e,a),r&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Pd(e,t)}catch(g){Ce(a,a.return,g)}}break;case 27:t===null&&r&4&&rf(a);case 26:case 5:Na(e,a),t===null&&r&4&&af(a),r&512&&us(a,a.return);break;case 12:Na(e,a);break;case 31:Na(e,a),r&4&&cf(e,a);break;case 13:Na(e,a),r&4&&df(e,a),r&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=By.bind(null,a),np(e,a))));break;case 22:if(r=a.memoizedState!==null||Ea,!r){t=t!==null&&t.memoizedState!==null||Fe,o=Ea;var u=Fe;Ea=r,(Fe=t)&&!u?Ta(e,a,(a.subtreeFlags&8772)!==0):Na(e,a),Ea=o,Fe=u}break;case 30:break;default:Na(e,a)}}function of(e){var t=e.alternate;t!==null&&(e.alternate=null,of(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ul(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var $e=null,St=!1;function ka(e,t,a){for(a=a.child;a!==null;)uf(e,t,a),a=a.sibling}function uf(e,t,a){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(on,a)}catch{}switch(a.tag){case 26:Fe||da(a,t),ka(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Fe||da(a,t);var r=$e,o=St;Za(a.type)&&($e=a.stateNode,St=!1),ka(e,t,a),vs(a.stateNode),$e=r,St=o;break;case 5:Fe||da(a,t);case 6:if(r=$e,o=St,$e=null,ka(e,t,a),$e=r,St=o,$e!==null)if(St)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(a.stateNode)}catch(u){Ce(a,t,u)}else try{$e.removeChild(a.stateNode)}catch(u){Ce(a,t,u)}break;case 18:$e!==null&&(St?(e=$e,t0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),xr(e)):t0($e,a.stateNode));break;case 4:r=$e,o=St,$e=a.stateNode.containerInfo,St=!0,ka(e,t,a),$e=r,St=o;break;case 0:case 11:case 14:case 15:Pa(2,a,t),Fe||Pa(4,a,t),ka(e,t,a);break;case 1:Fe||(da(a,t),r=a.stateNode,typeof r.componentWillUnmount=="function"&&tf(a,t,r)),ka(e,t,a);break;case 21:ka(e,t,a);break;case 22:Fe=(r=Fe)||a.memoizedState!==null,ka(e,t,a),Fe=r;break;default:ka(e,t,a)}}function cf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{xr(e)}catch(a){Ce(t,t.return,a)}}}function df(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{xr(e)}catch(a){Ce(t,t.return,a)}}function Oy(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new sf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new sf),t;default:throw Error(i(435,e.tag))}}function Oi(e,t){var a=Oy(e);t.forEach(function(r){if(!a.has(r)){a.add(r);var o=Ly.bind(null,e,r);r.then(o,o)}})}function jt(e,t){var a=t.deletions;if(a!==null)for(var r=0;r<a.length;r++){var o=a[r],u=e,g=t,v=g;e:for(;v!==null;){switch(v.tag){case 27:if(Za(v.type)){$e=v.stateNode,St=!1;break e}break;case 5:$e=v.stateNode,St=!1;break e;case 3:case 4:$e=v.stateNode.containerInfo,St=!0;break e}v=v.return}if($e===null)throw Error(i(160));uf(u,g,o),$e=null,St=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)hf(t,e),t=t.sibling}var Wt=null;function hf(e,t){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jt(t,e),Et(e),r&4&&(Pa(3,e,e.return),os(3,e),Pa(5,e,e.return));break;case 1:jt(t,e),Et(e),r&512&&(Fe||a===null||da(a,a.return)),r&64&&Ea&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?r:a.concat(r))));break;case 26:var o=Wt;if(jt(t,e),Et(e),r&512&&(Fe||a===null||da(a,a.return)),r&4){var u=a!==null?a.memoizedState:null;if(r=e.memoizedState,a===null)if(r===null)if(e.stateNode===null){e:{r=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":u=o.getElementsByTagName("title")[0],(!u||u[zr]||u[rt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(r),o.head.insertBefore(u,o.querySelector("head > title"))),ot(u,r,a),u[rt]=e,at(u),r=u;break e;case"link":var g=h0("link","href",o).get(r+(a.href||""));if(g){for(var v=0;v<g.length;v++)if(u=g[v],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(v,1);break t}}u=o.createElement(r),ot(u,r,a),o.head.appendChild(u);break;case"meta":if(g=h0("meta","content",o).get(r+(a.content||""))){for(v=0;v<g.length;v++)if(u=g[v],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(v,1);break t}}u=o.createElement(r),ot(u,r,a),o.head.appendChild(u);break;default:throw Error(i(468,r))}u[rt]=e,at(u),r=u}e.stateNode=r}else f0(o,e.type,e.stateNode);else e.stateNode=d0(o,r,e.memoizedProps);else u!==r?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,r===null?f0(o,e.type,e.stateNode):d0(o,r,e.memoizedProps)):r===null&&e.stateNode!==null&&tu(e,e.memoizedProps,a.memoizedProps)}break;case 27:jt(t,e),Et(e),r&512&&(Fe||a===null||da(a,a.return)),a!==null&&r&4&&tu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(jt(t,e),Et(e),r&512&&(Fe||a===null||da(a,a.return)),e.flags&32){o=e.stateNode;try{Gn(o,"")}catch(te){Ce(e,e.return,te)}}r&4&&e.stateNode!=null&&(o=e.memoizedProps,tu(e,o,a!==null?a.memoizedProps:o)),r&1024&&(ru=!0);break;case 6:if(jt(t,e),Et(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,a=e.stateNode;try{a.nodeValue=r}catch(te){Ce(e,e.return,te)}}break;case 3:if(Yi=null,o=Wt,Wt=Gi(t.containerInfo),jt(t,e),Wt=o,Et(e),r&4&&a!==null&&a.memoizedState.isDehydrated)try{xr(t.containerInfo)}catch(te){Ce(e,e.return,te)}ru&&(ru=!1,ff(e));break;case 4:r=Wt,Wt=Gi(e.stateNode.containerInfo),jt(t,e),Et(e),Wt=r;break;case 12:jt(t,e),Et(e);break;case 31:jt(t,e),Et(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Oi(e,r)));break;case 13:jt(t,e),Et(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ci=ft()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Oi(e,r)));break;case 22:o=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,C=Ea,H=Fe;if(Ea=C||o,Fe=H||S,jt(t,e),Fe=H,Ea=C,Et(e),r&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||S||Ea||Fe||En(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){S=a=t;try{if(u=S.stateNode,o)g=u.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{v=S.stateNode;var V=S.memoizedProps.style,U=V!=null&&V.hasOwnProperty("display")?V.display:null;v.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(te){Ce(S,S.return,te)}}}else if(t.tag===6){if(a===null){S=t;try{S.stateNode.nodeValue=o?"":S.memoizedProps}catch(te){Ce(S,S.return,te)}}}else if(t.tag===18){if(a===null){S=t;try{var B=S.stateNode;o?a0(B,!0):a0(S.stateNode,!1)}catch(te){Ce(S,S.return,te)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(a=r.retryQueue,a!==null&&(r.retryQueue=null,Oi(e,a))));break;case 19:jt(t,e),Et(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Oi(e,r)));break;case 30:break;case 21:break;default:jt(t,e),Et(e)}}function Et(e){var t=e.flags;if(t&2){try{for(var a,r=e.return;r!==null;){if(nf(r)){a=r;break}r=r.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var o=a.stateNode,u=au(e);Ti(e,u,o);break;case 5:var g=a.stateNode;a.flags&32&&(Gn(g,""),a.flags&=-33);var v=au(e);Ti(e,v,g);break;case 3:case 4:var S=a.stateNode.containerInfo,C=au(e);nu(e,C,S);break;default:throw Error(i(161))}}catch(H){Ce(e,e.return,H)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ff(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ff(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Na(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)lf(e,t.alternate,t),t=t.sibling}function En(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Pa(4,t,t.return),En(t);break;case 1:da(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&tf(t,t.return,a),En(t);break;case 27:vs(t.stateNode);case 26:case 5:da(t,t.return),En(t);break;case 22:t.memoizedState===null&&En(t);break;case 30:En(t);break;default:En(t)}e=e.sibling}}function Ta(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,o=e,u=t,g=u.flags;switch(u.tag){case 0:case 11:case 15:Ta(o,u,a),os(4,u);break;case 1:if(Ta(o,u,a),r=u,o=r.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(C){Ce(r,r.return,C)}if(r=u,o=r.updateQueue,o!==null){var v=r.stateNode;try{var S=o.shared.hiddenCallbacks;if(S!==null)for(o.shared.hiddenCallbacks=null,o=0;o<S.length;o++)Gd(S[o],v)}catch(C){Ce(r,r.return,C)}}a&&g&64&&ef(u),us(u,u.return);break;case 27:rf(u);case 26:case 5:Ta(o,u,a),a&&r===null&&g&4&&af(u),us(u,u.return);break;case 12:Ta(o,u,a);break;case 31:Ta(o,u,a),a&&g&4&&cf(o,u);break;case 13:Ta(o,u,a),a&&g&4&&df(o,u);break;case 22:u.memoizedState===null&&Ta(o,u,a),us(u,u.return);break;case 30:break;default:Ta(o,u,a)}t=t.sibling}}function su(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Qr(a))}function iu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Qr(e))}function ea(e,t,a,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gf(e,t,a,r),t=t.sibling}function gf(e,t,a,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:ea(e,t,a,r),o&2048&&os(9,t);break;case 1:ea(e,t,a,r);break;case 3:ea(e,t,a,r),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Qr(e)));break;case 12:if(o&2048){ea(e,t,a,r),e=t.stateNode;try{var u=t.memoizedProps,g=u.id,v=u.onPostCommit;typeof v=="function"&&v(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){Ce(t,t.return,S)}}else ea(e,t,a,r);break;case 31:ea(e,t,a,r);break;case 13:ea(e,t,a,r);break;case 23:break;case 22:u=t.stateNode,g=t.alternate,t.memoizedState!==null?u._visibility&2?ea(e,t,a,r):cs(e,t):u._visibility&2?ea(e,t,a,r):(u._visibility|=2,ur(e,t,a,r,(t.subtreeFlags&10256)!==0||!1)),o&2048&&su(g,t);break;case 24:ea(e,t,a,r),o&2048&&iu(t.alternate,t);break;default:ea(e,t,a,r)}}function ur(e,t,a,r,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,g=t,v=a,S=r,C=g.flags;switch(g.tag){case 0:case 11:case 15:ur(u,g,v,S,o),os(8,g);break;case 23:break;case 22:var H=g.stateNode;g.memoizedState!==null?H._visibility&2?ur(u,g,v,S,o):cs(u,g):(H._visibility|=2,ur(u,g,v,S,o)),o&&C&2048&&su(g.alternate,g);break;case 24:ur(u,g,v,S,o),o&&C&2048&&iu(g.alternate,g);break;default:ur(u,g,v,S,o)}t=t.sibling}}function cs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,r=t,o=r.flags;switch(r.tag){case 22:cs(a,r),o&2048&&su(r.alternate,r);break;case 24:cs(a,r),o&2048&&iu(r.alternate,r);break;default:cs(a,r)}t=t.sibling}}var ds=8192;function cr(e,t,a){if(e.subtreeFlags&ds)for(e=e.child;e!==null;)mf(e,t,a),e=e.sibling}function mf(e,t,a){switch(e.tag){case 26:cr(e,t,a),e.flags&ds&&e.memoizedState!==null&&mp(a,Wt,e.memoizedState,e.memoizedProps);break;case 5:cr(e,t,a);break;case 3:case 4:var r=Wt;Wt=Gi(e.stateNode.containerInfo),cr(e,t,a),Wt=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=ds,ds=16777216,cr(e,t,a),ds=r):cr(e,t,a));break;default:cr(e,t,a)}}function yf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function hs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];nt=r,vf(r,e)}yf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)pf(e),e=e.sibling}function pf(e){switch(e.tag){case 0:case 11:case 15:hs(e),e.flags&2048&&Pa(9,e,e.return);break;case 3:hs(e);break;case 12:hs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ai(e)):hs(e);break;default:hs(e)}}function Ai(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];nt=r,vf(r,e)}yf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Pa(8,t,t.return),Ai(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ai(t));break;default:Ai(t)}e=e.sibling}}function vf(e,t){for(;nt!==null;){var a=nt;switch(a.tag){case 0:case 11:case 15:Pa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var r=a.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Qr(a.memoizedState.cache)}if(r=a.child,r!==null)r.return=a,nt=r;else e:for(a=e;nt!==null;){r=nt;var o=r.sibling,u=r.return;if(of(r),r===a){nt=null;break e}if(o!==null){o.return=u,nt=o;break e}nt=u}}}var Ay={getCacheForType:function(e){var t=it(Qe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return it(Qe).controller.signal}},Cy=typeof WeakMap=="function"?WeakMap:Map,Oe=0,ze=null,xe=null,_e=0,Ae=0,Dt=null,Ya=!1,dr=!1,lu=!1,Oa=0,Pe=0,Ka=0,kn=0,ou=0,Mt=0,hr=0,fs=null,kt=null,uu=!1,Ci=0,bf=0,Ri=1/0,Ui=null,Xa=null,et=0,Ia=null,fr=null,Aa=0,cu=0,du=null,xf=null,gs=0,hu=null;function zt(){return(Oe&2)!==0&&_e!==0?_e&-_e:M.T!==null?vu():Mc()}function wf(){if(Mt===0)if((_e&536870912)===0||Ee){var e=zn;zn<<=1,(zn&3932160)===0&&(zn=262144),Mt=e}else Mt=536870912;return e=Rt.current,e!==null&&(e.flags|=32),Mt}function Nt(e,t,a){(e===ze&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)&&(gr(e,0),Qa(e,_e,Mt,!1)),Mr(e,a),((Oe&2)===0||e!==ze)&&(e===ze&&((Oe&2)===0&&(kn|=a),Pe===4&&Qa(e,_e,Mt,!1)),ha(e))}function _f(e,t,a){if((Oe&6)!==0)throw Error(i(327));var r=!a&&(t&127)===0&&(t&e.expiredLanes)===0||un(e,t),o=r?Dy(e,t):gu(e,t,!0),u=r;do{if(o===0){dr&&!r&&Qa(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!Ry(a)){o=gu(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var v=e;o=fs;var S=v.current.memoizedState.isDehydrated;if(S&&(gr(v,g).flags|=256),g=gu(v,g,!1),g!==2){if(lu&&!S){v.errorRecoveryDisabledLanes|=u,kn|=u,o=4;break e}u=kt,kt=o,u!==null&&(kt===null?kt=u:kt.push.apply(kt,u))}o=g}if(u=!1,o!==2)continue}}if(o===1){gr(e,0),Qa(e,t,0,!0);break}e:{switch(r=e,u=o,u){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Qa(r,t,Mt,!Ya);break e;case 2:kt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(o=Ci+300-ft(),10<o)){if(Qa(r,t,Mt,!Ya),xt(r,0,!0)!==0)break e;Aa=t,r.timeoutHandle=Wf(Sf.bind(null,r,a,kt,Ui,uu,t,Mt,kn,hr,Ya,u,"Throttled",-0,0),o);break e}Sf(r,a,kt,Ui,uu,t,Mt,kn,hr,Ya,u,null,-0,0)}}break}while(!0);ha(e)}function Sf(e,t,a,r,o,u,g,v,S,C,H,V,U,B){if(e.timeoutHandle=-1,V=t.subtreeFlags,V&8192||(V&16785408)===16785408){V={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ma},mf(t,u,V);var te=(u&62914560)===u?Ci-ft():(u&4194048)===u?bf-ft():0;if(te=yp(V,te),te!==null){Aa=u,e.cancelPendingCommit=te(Cf.bind(null,e,t,u,a,r,o,g,v,S,H,V,null,U,B)),Qa(e,u,g,!C);return}}Cf(e,t,u,a,r,o,g,v,S)}function Ry(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var r=0;r<a.length;r++){var o=a[r],u=o.getSnapshot;o=o.value;try{if(!At(u(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qa(e,t,a,r){t&=~ou,t&=~kn,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var u=31-mt(o),g=1<<u;r[u]=-1,o&=~g}a!==0&&Rc(e,a,t)}function Di(){return(Oe&6)===0?(ms(0),!1):!0}function fu(){if(xe!==null){if(Ae===0)var e=xe.return;else e=xe,ba=pn=null,Oo(e),rr=null,Zr=0,e=xe;for(;e!==null;)Wh(e.alternate,e),e=e.return;xe=null}}function gr(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Fy(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Aa=0,fu(),ze=e,xe=a=pa(e.current,null),_e=t,Ae=0,Dt=null,Ya=!1,dr=un(e,t),lu=!1,hr=Mt=ou=kn=Ka=Pe=0,kt=fs=null,uu=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var o=31-mt(r),u=1<<o;t|=e[o],r&=~u}return Oa=t,ti(),a}function jf(e,t){pe=null,M.H=ss,t===nr||t===ui?(t=qd(),Ae=3):t===po?(t=qd(),Ae=4):Ae=t===Yo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Dt=t,xe===null&&(Pe=1,Si(e,Pt(t,e.current)))}function Ef(){var e=Rt.current;return e===null?!0:(_e&4194048)===_e?It===null:(_e&62914560)===_e||(_e&536870912)!==0?e===It:!1}function kf(){var e=M.H;return M.H=ss,e===null?ss:e}function Nf(){var e=M.A;return M.A=Ay,e}function Mi(){Pe=4,Ya||(_e&4194048)!==_e&&Rt.current!==null||(dr=!0),(Ka&134217727)===0&&(kn&134217727)===0||ze===null||Qa(ze,_e,Mt,!1)}function gu(e,t,a){var r=Oe;Oe|=2;var o=kf(),u=Nf();(ze!==e||_e!==t)&&(Ui=null,gr(e,t)),t=!1;var g=Pe;e:do try{if(Ae!==0&&xe!==null){var v=xe,S=Dt;switch(Ae){case 8:fu(),g=6;break e;case 3:case 2:case 9:case 6:Rt.current===null&&(t=!0);var C=Ae;if(Ae=0,Dt=null,mr(e,v,S,C),a&&dr){g=0;break e}break;default:C=Ae,Ae=0,Dt=null,mr(e,v,S,C)}}Uy(),g=Pe;break}catch(H){jf(e,H)}while(!0);return t&&e.shellSuspendCounter++,ba=pn=null,Oe=r,M.H=o,M.A=u,xe===null&&(ze=null,_e=0,ti()),g}function Uy(){for(;xe!==null;)Tf(xe)}function Dy(e,t){var a=Oe;Oe|=2;var r=kf(),o=Nf();ze!==e||_e!==t?(Ui=null,Ri=ft()+500,gr(e,t)):dr=un(e,t);e:do try{if(Ae!==0&&xe!==null){t=xe;var u=Dt;t:switch(Ae){case 1:Ae=0,Dt=null,mr(e,t,u,1);break;case 2:case 9:if(Bd(u)){Ae=0,Dt=null,Of(t);break}t=function(){Ae!==2&&Ae!==9||ze!==e||(Ae=7),ha(e)},u.then(t,t);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:Bd(u)?(Ae=0,Dt=null,Of(t)):(Ae=0,Dt=null,mr(e,t,u,7));break;case 5:var g=null;switch(xe.tag){case 26:g=xe.memoizedState;case 5:case 27:var v=xe;if(g?g0(g):v.stateNode.complete){Ae=0,Dt=null;var S=v.sibling;if(S!==null)xe=S;else{var C=v.return;C!==null?(xe=C,zi(C)):xe=null}break t}}Ae=0,Dt=null,mr(e,t,u,5);break;case 6:Ae=0,Dt=null,mr(e,t,u,6);break;case 8:fu(),Pe=6;break e;default:throw Error(i(462))}}My();break}catch(H){jf(e,H)}while(!0);return ba=pn=null,M.H=r,M.A=o,Oe=a,xe!==null?0:(ze=null,_e=0,ti(),Pe)}function My(){for(;xe!==null&&!_l();)Tf(xe)}function Tf(e){var t=Zh(e.alternate,e,Oa);e.memoizedProps=e.pendingProps,t===null?zi(e):xe=t}function Of(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Yh(a,t,t.pendingProps,t.type,void 0,_e);break;case 11:t=Yh(a,t,t.pendingProps,t.type.render,t.ref,_e);break;case 5:Oo(t);default:Wh(a,t),t=xe=kd(t,Oa),t=Zh(a,t,Oa)}e.memoizedProps=e.pendingProps,t===null?zi(e):xe=t}function mr(e,t,a,r){ba=pn=null,Oo(t),rr=null,Zr=0;var o=t.return;try{if(Sy(e,o,t,a,_e)){Pe=1,Si(e,Pt(a,e.current)),xe=null;return}}catch(u){if(o!==null)throw xe=o,u;Pe=1,Si(e,Pt(a,e.current)),xe=null;return}t.flags&32768?(Ee||r===1?e=!0:dr||(_e&536870912)!==0?e=!1:(Ya=e=!0,(r===2||r===9||r===3||r===6)&&(r=Rt.current,r!==null&&r.tag===13&&(r.flags|=16384))),Af(t,e)):zi(t)}function zi(e){var t=e;do{if((t.flags&32768)!==0){Af(t,Ya);return}e=t.return;var a=ky(t.alternate,t,Oa);if(a!==null){xe=a;return}if(t=t.sibling,t!==null){xe=t;return}xe=t=e}while(t!==null);Pe===0&&(Pe=5)}function Af(e,t){do{var a=Ny(e.alternate,e);if(a!==null){a.flags&=32767,xe=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){xe=e;return}xe=e=a}while(e!==null);Pe=6,xe=null}function Cf(e,t,a,r,o,u,g,v,S){e.cancelPendingCommit=null;do Bi();while(et!==0);if((Oe&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(u=t.lanes|t.childLanes,u|=to,gm(e,a,u,g,v,S),e===ze&&(xe=ze=null,_e=0),fr=t,Ia=e,Aa=a,cu=u,du=o,xf=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,qy(Dn,function(){return zf(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=M.T,M.T=null,o=P.p,P.p=2,g=Oe,Oe|=4;try{Ty(e,t,a)}finally{Oe=g,P.p=o,M.T=r}}et=1,Rf(),Uf(),Df()}}function Rf(){if(et===1){et=0;var e=Ia,t=fr,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var r=P.p;P.p=2;var o=Oe;Oe|=4;try{hf(t,e);var u=ku,g=pd(e.containerInfo),v=u.focusedElem,S=u.selectionRange;if(g!==v&&v&&v.ownerDocument&&yd(v.ownerDocument.documentElement,v)){if(S!==null&&Jl(v)){var C=S.start,H=S.end;if(H===void 0&&(H=C),"selectionStart"in v)v.selectionStart=C,v.selectionEnd=Math.min(H,v.value.length);else{var V=v.ownerDocument||document,U=V&&V.defaultView||window;if(U.getSelection){var B=U.getSelection(),te=v.textContent.length,ce=Math.min(S.start,te),Me=S.end===void 0?ce:Math.min(S.end,te);!B.extend&&ce>Me&&(g=Me,Me=ce,ce=g);var T=md(v,ce),E=md(v,Me);if(T&&E&&(B.rangeCount!==1||B.anchorNode!==T.node||B.anchorOffset!==T.offset||B.focusNode!==E.node||B.focusOffset!==E.offset)){var A=V.createRange();A.setStart(T.node,T.offset),B.removeAllRanges(),ce>Me?(B.addRange(A),B.extend(E.node,E.offset)):(A.setEnd(E.node,E.offset),B.addRange(A))}}}}for(V=[],B=v;B=B.parentNode;)B.nodeType===1&&V.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<V.length;v++){var $=V[v];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Qi=!!Eu,ku=Eu=null}finally{Oe=o,P.p=r,M.T=a}}e.current=t,et=2}}function Uf(){if(et===2){et=0;var e=Ia,t=fr,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var r=P.p;P.p=2;var o=Oe;Oe|=4;try{lf(e,t.alternate,t)}finally{Oe=o,P.p=r,M.T=a}}et=3}}function Df(){if(et===4||et===3){et=0,qs();var e=Ia,t=fr,a=Aa,r=xf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?et=5:(et=0,fr=Ia=null,Mf(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Xa=null),Cl(a),t=t.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(on,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=M.T,o=P.p,P.p=2,M.T=null;try{for(var u=e.onRecoverableError,g=0;g<r.length;g++){var v=r[g];u(v.value,{componentStack:v.stack})}}finally{M.T=t,P.p=o}}(Aa&3)!==0&&Bi(),ha(e),o=e.pendingLanes,(a&261930)!==0&&(o&42)!==0?e===hu?gs++:(gs=0,hu=e):gs=0,ms(0)}}function Mf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Qr(t)))}function Bi(){return Rf(),Uf(),Df(),zf()}function zf(){if(et!==5)return!1;var e=Ia,t=cu;cu=0;var a=Cl(Aa),r=M.T,o=P.p;try{P.p=32>a?32:a,M.T=null,a=du,du=null;var u=Ia,g=Aa;if(et=0,fr=Ia=null,Aa=0,(Oe&6)!==0)throw Error(i(331));var v=Oe;if(Oe|=4,pf(u.current),gf(u,u.current,g,a),Oe=v,ms(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(on,u)}catch{}return!0}finally{P.p=o,M.T=r,Mf(e,t)}}function Bf(e,t,a){t=Pt(a,t),t=Po(e.stateNode,t,2),e=$a(e,t,2),e!==null&&(Mr(e,2),ha(e))}function Ce(e,t,a){if(e.tag===3)Bf(e,e,a);else for(;t!==null;){if(t.tag===3){Bf(t,e,a);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xa===null||!Xa.has(r))){e=Pt(a,e),a=Bh(2),r=$a(t,a,2),r!==null&&(Lh(a,r,t,e),Mr(r,2),ha(r));break}}t=t.return}}function mu(e,t,a){var r=e.pingCache;if(r===null){r=e.pingCache=new Cy;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(a)||(lu=!0,o.add(a),e=zy.bind(null,e,t,a),t.then(e,e))}function zy(e,t,a){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ze===e&&(_e&a)===a&&(Pe===4||Pe===3&&(_e&62914560)===_e&&300>ft()-Ci?(Oe&2)===0&&gr(e,0):ou|=a,hr===_e&&(hr=0)),ha(e)}function Lf(e,t){t===0&&(t=Cc()),e=gn(e,t),e!==null&&(Mr(e,t),ha(e))}function By(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Lf(e,a)}function Ly(e,t){var a=0;switch(e.tag){case 31:case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Lf(e,a)}function qy(e,t){return bt(e,t)}var Li=null,yr=null,yu=!1,qi=!1,pu=!1,Ja=0;function ha(e){e!==yr&&e.next===null&&(yr===null?Li=yr=e:yr=yr.next=e),qi=!0,yu||(yu=!0,$y())}function ms(e,t){if(!pu&&qi){pu=!0;do for(var a=!1,r=Li;r!==null;){if(e!==0){var o=r.pendingLanes;if(o===0)var u=0;else{var g=r.suspendedLanes,v=r.pingedLanes;u=(1<<31-mt(42|e)+1)-1,u&=o&~(g&~v),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,Vf(r,u))}else u=_e,u=xt(r,r===ze?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(u&3)===0||un(r,u)||(a=!0,Vf(r,u));r=r.next}while(a);pu=!1}}function Hy(){qf()}function qf(){qi=yu=!1;var e=0;Ja!==0&&Zy()&&(e=Ja);for(var t=ft(),a=null,r=Li;r!==null;){var o=r.next,u=Hf(r,t);u===0?(r.next=null,a===null?Li=o:a.next=o,o===null&&(yr=a)):(a=r,(e!==0||(u&3)!==0)&&(qi=!0)),r=o}et!==0&&et!==5||ms(e),Ja!==0&&(Ja=0)}function Hf(e,t){for(var a=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var g=31-mt(u),v=1<<g,S=o[g];S===-1?((v&a)===0||(v&r)!==0)&&(o[g]=fm(v,t)):S<=t&&(e.expiredLanes|=v),u&=~v}if(t=ze,a=_e,a=xt(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,a===0||e===t&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Ht(r),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||un(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(r!==null&&Ht(r),Cl(a)){case 2:case 8:a=Vs;break;case 32:a=Dn;break;case 268435456:a=Gs;break;default:a=Dn}return r=$f.bind(null,e),a=bt(a,r),e.callbackPriority=t,e.callbackNode=a,t}return r!==null&&r!==null&&Ht(r),e.callbackPriority=2,e.callbackNode=null,2}function $f(e,t){if(et!==0&&et!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Bi()&&e.callbackNode!==a)return null;var r=_e;return r=xt(e,e===ze?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(_f(e,r,t),Hf(e,ft()),e.callbackNode!=null&&e.callbackNode===a?$f.bind(null,e):null)}function Vf(e,t){if(Bi())return null;_f(e,t,!0)}function $y(){Wy(function(){(Oe&6)!==0?bt($s,Hy):qf()})}function vu(){if(Ja===0){var e=tr;e===0&&(e=Mn,Mn<<=1,(Mn&261888)===0&&(Mn=256)),Ja=e}return Ja}function Gf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Xs(""+e)}function Pf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Vy(e,t,a,r,o){if(t==="submit"&&a&&a.stateNode===o){var u=Gf((o[wt]||null).action),g=r.submitter;g&&(t=(t=g[wt]||null)?Gf(t.formAction):g.getAttribute("formAction"),t!==null&&(u=t,g=null));var v=new Zs("action","action",null,r,o);e.push({event:v,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ja!==0){var S=g?Pf(o,g):new FormData(o);Lo(a,{pending:!0,data:S,method:o.method,action:u},null,S)}}else typeof u=="function"&&(v.preventDefault(),S=g?Pf(o,g):new FormData(o),Lo(a,{pending:!0,data:S,method:o.method,action:u},u,S))},currentTarget:o}]})}}for(var bu=0;bu<eo.length;bu++){var xu=eo[bu],Gy=xu.toLowerCase(),Py=xu[0].toUpperCase()+xu.slice(1);Ft(Gy,"on"+Py)}Ft(xd,"onAnimationEnd"),Ft(wd,"onAnimationIteration"),Ft(_d,"onAnimationStart"),Ft("dblclick","onDoubleClick"),Ft("focusin","onFocus"),Ft("focusout","onBlur"),Ft(iy,"onTransitionRun"),Ft(ly,"onTransitionStart"),Ft(oy,"onTransitionCancel"),Ft(Sd,"onTransitionEnd"),$n("onMouseEnter",["mouseout","mouseover"]),$n("onMouseLeave",["mouseout","mouseover"]),$n("onPointerEnter",["pointerout","pointerover"]),$n("onPointerLeave",["pointerout","pointerover"]),cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cn("onBeforeInput",["compositionend","keypress","textInput","paste"]),cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ys));function Yf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var r=e[a],o=r.event;r=r.listeners;e:{var u=void 0;if(t)for(var g=r.length-1;0<=g;g--){var v=r[g],S=v.instance,C=v.currentTarget;if(v=v.listener,S!==u&&o.isPropagationStopped())break e;u=v,o.currentTarget=C;try{u(o)}catch(H){ei(H)}o.currentTarget=null,u=S}else for(g=0;g<r.length;g++){if(v=r[g],S=v.instance,C=v.currentTarget,v=v.listener,S!==u&&o.isPropagationStopped())break e;u=v,o.currentTarget=C;try{u(o)}catch(H){ei(H)}o.currentTarget=null,u=S}}}}function we(e,t){var a=t[Rl];a===void 0&&(a=t[Rl]=new Set);var r=e+"__bubble";a.has(r)||(Kf(t,e,2,!1),a.add(r))}function wu(e,t,a){var r=0;t&&(r|=4),Kf(a,e,r,t)}var Hi="_reactListening"+Math.random().toString(36).slice(2);function _u(e){if(!e[Hi]){e[Hi]=!0,Lc.forEach(function(a){a!=="selectionchange"&&(Yy.has(a)||wu(a,!1,e),wu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hi]||(t[Hi]=!0,wu("selectionchange",!1,t))}}function Kf(e,t,a,r){switch(w0(t)){case 2:var o=bp;break;case 8:o=xp;break;default:o=Bu}a=o.bind(null,t,a,e),o=void 0,!$l||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function Su(e,t,a,r,o){var u=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var g=r.tag;if(g===3||g===4){var v=r.stateNode.containerInfo;if(v===o)break;if(g===4)for(g=r.return;g!==null;){var S=g.tag;if((S===3||S===4)&&g.stateNode.containerInfo===o)return;g=g.return}for(;v!==null;){if(g=Ln(v),g===null)return;if(S=g.tag,S===5||S===6||S===26||S===27){r=u=g;continue e}v=v.parentNode}}r=r.return}Jc(function(){var C=u,H=ql(a),V=[];e:{var U=jd.get(e);if(U!==void 0){var B=Zs,te=e;switch(e){case"keypress":if(Qs(a)===0)break e;case"keydown":case"keyup":B=Lm;break;case"focusin":te="focus",B=Yl;break;case"focusout":te="blur",B=Yl;break;case"beforeblur":case"afterblur":B=Yl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=km;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=$m;break;case xd:case wd:case _d:B=Om;break;case Sd:B=Gm;break;case"scroll":case"scrollend":B=jm;break;case"wheel":B=Ym;break;case"copy":case"cut":case"paste":B=Cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=td;break;case"toggle":case"beforetoggle":B=Xm}var ce=(t&4)!==0,Me=!ce&&(e==="scroll"||e==="scrollend"),T=ce?U!==null?U+"Capture":null:U;ce=[];for(var E=C,A;E!==null;){var $=E;if(A=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||A===null||T===null||($=Lr(E,T),$!=null&&ce.push(ps(E,$,A))),Me)break;E=E.return}0<ce.length&&(U=new B(U,te,null,a,H),V.push({event:U,listeners:ce}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",U&&a!==Ll&&(te=a.relatedTarget||a.fromElement)&&(Ln(te)||te[Bn]))break e;if((B||U)&&(U=H.window===H?H:(U=H.ownerDocument)?U.defaultView||U.parentWindow:window,B?(te=a.relatedTarget||a.toElement,B=C,te=te?Ln(te):null,te!==null&&(Me=d(te),ce=te.tag,te!==Me||ce!==5&&ce!==27&&ce!==6)&&(te=null)):(B=null,te=C),B!==te)){if(ce=Wc,$="onMouseLeave",T="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(ce=td,$="onPointerLeave",T="onPointerEnter",E="pointer"),Me=B==null?U:Br(B),A=te==null?U:Br(te),U=new ce($,E+"leave",B,a,H),U.target=Me,U.relatedTarget=A,$=null,Ln(H)===C&&(ce=new ce(T,E+"enter",te,a,H),ce.target=A,ce.relatedTarget=Me,$=ce),Me=$,B&&te)t:{for(ce=Ky,T=B,E=te,A=0,$=T;$;$=ce($))A++;$=0;for(var le=E;le;le=ce(le))$++;for(;0<A-$;)T=ce(T),A--;for(;0<$-A;)E=ce(E),$--;for(;A--;){if(T===E||E!==null&&T===E.alternate){ce=T;break t}T=ce(T),E=ce(E)}ce=null}else ce=null;B!==null&&Xf(V,U,B,ce,!1),te!==null&&Me!==null&&Xf(V,Me,te,ce,!0)}}e:{if(U=C?Br(C):window,B=U.nodeName&&U.nodeName.toLowerCase(),B==="select"||B==="input"&&U.type==="file")var Ne=ud;else if(ld(U))if(cd)Ne=ny;else{Ne=ty;var ne=ey}else B=U.nodeName,!B||B.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?C&&Bl(C.elementType)&&(Ne=ud):Ne=ay;if(Ne&&(Ne=Ne(e,C))){od(V,Ne,a,H);break e}ne&&ne(e,U,C),e==="focusout"&&C&&U.type==="number"&&C.memoizedProps.value!=null&&zl(U,"number",U.value)}switch(ne=C?Br(C):window,e){case"focusin":(ld(ne)||ne.contentEditable==="true")&&(Xn=ne,Zl=C,Kr=null);break;case"focusout":Kr=Zl=Xn=null;break;case"mousedown":Fl=!0;break;case"contextmenu":case"mouseup":case"dragend":Fl=!1,vd(V,a,H);break;case"selectionchange":if(sy)break;case"keydown":case"keyup":vd(V,a,H)}var be;if(Xl)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Kn?sd(e,a)&&(Se="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(ad&&a.locale!=="ko"&&(Kn||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Kn&&(be=Zc()):(Da=H,Vl="value"in Da?Da.value:Da.textContent,Kn=!0)),ne=$i(C,Se),0<ne.length&&(Se=new ed(Se,e,null,a,H),V.push({event:Se,listeners:ne}),be?Se.data=be:(be=id(a),be!==null&&(Se.data=be)))),(be=Qm?Jm(e,a):Zm(e,a))&&(Se=$i(C,"onBeforeInput"),0<Se.length&&(ne=new ed("onBeforeInput","beforeinput",null,a,H),V.push({event:ne,listeners:Se}),ne.data=be)),Vy(V,e,C,a,H)}Yf(V,t)})}function ps(e,t,a){return{instance:e,listener:t,currentTarget:a}}function $i(e,t){for(var a=t+"Capture",r=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=Lr(e,a),o!=null&&r.unshift(ps(e,o,u)),o=Lr(e,t),o!=null&&r.push(ps(e,o,u))),e.tag===3)return r;e=e.return}return[]}function Ky(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Xf(e,t,a,r,o){for(var u=t._reactName,g=[];a!==null&&a!==r;){var v=a,S=v.alternate,C=v.stateNode;if(v=v.tag,S!==null&&S===r)break;v!==5&&v!==26&&v!==27||C===null||(S=C,o?(C=Lr(a,u),C!=null&&g.unshift(ps(a,C,S))):o||(C=Lr(a,u),C!=null&&g.push(ps(a,C,S)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var Xy=/\r\n?/g,Iy=/\u0000|\uFFFD/g;function If(e){return(typeof e=="string"?e:""+e).replace(Xy,`
`).replace(Iy,"")}function Qf(e,t){return t=If(t),If(e)===t}function De(e,t,a,r,o,u){switch(a){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||Gn(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&Gn(e,""+r);break;case"className":Ys(e,"class",r);break;case"tabIndex":Ys(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ys(e,a,r);break;case"style":Ic(e,r,u);break;case"data":if(t!=="object"){Ys(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=Xs(""+r),e.setAttribute(a,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&De(e,t,"name",o.name,o,null),De(e,t,"formEncType",o.formEncType,o,null),De(e,t,"formMethod",o.formMethod,o,null),De(e,t,"formTarget",o.formTarget,o,null)):(De(e,t,"encType",o.encType,o,null),De(e,t,"method",o.method,o,null),De(e,t,"target",o.target,o,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=Xs(""+r),e.setAttribute(a,r);break;case"onClick":r!=null&&(e.onclick=ma);break;case"onScroll":r!=null&&we("scroll",e);break;case"onScrollEnd":r!=null&&we("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(i(61));if(a=r.__html,a!=null){if(o.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}a=Xs(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""+r):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":r===!0?e.setAttribute(a,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,r):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(a,r):e.removeAttribute(a);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(a):e.setAttribute(a,r);break;case"popover":we("beforetoggle",e),we("toggle",e),Ps(e,"popover",r);break;case"xlinkActuate":ga(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ga(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ga(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ga(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ga(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ga(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ga(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ga(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ga(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Ps(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=_m.get(a)||a,Ps(e,a,r))}}function ju(e,t,a,r,o,u){switch(a){case"style":Ic(e,r,u);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(i(61));if(a=r.__html,a!=null){if(o.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof r=="string"?Gn(e,r):(typeof r=="number"||typeof r=="bigint")&&Gn(e,""+r);break;case"onScroll":r!=null&&we("scroll",e);break;case"onScrollEnd":r!=null&&we("scrollend",e);break;case"onClick":r!=null&&(e.onclick=ma);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),u=e[wt]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof r=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,r,o);break e}a in e?e[a]=r:r===!0?e.setAttribute(a,""):Ps(e,a,r)}}}function ot(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",e),we("load",e);var r=!1,o=!1,u;for(u in a)if(a.hasOwnProperty(u)){var g=a[u];if(g!=null)switch(u){case"src":r=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:De(e,t,u,g,a,null)}}o&&De(e,t,"srcSet",a.srcSet,a,null),r&&De(e,t,"src",a.src,a,null);return;case"input":we("invalid",e);var v=u=g=o=null,S=null,C=null;for(r in a)if(a.hasOwnProperty(r)){var H=a[r];if(H!=null)switch(r){case"name":o=H;break;case"type":g=H;break;case"checked":S=H;break;case"defaultChecked":C=H;break;case"value":u=H;break;case"defaultValue":v=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,t));break;default:De(e,t,r,H,a,null)}}Pc(e,u,v,S,C,g,o,!1);return;case"select":we("invalid",e),r=g=u=null;for(o in a)if(a.hasOwnProperty(o)&&(v=a[o],v!=null))switch(o){case"value":u=v;break;case"defaultValue":g=v;break;case"multiple":r=v;default:De(e,t,o,v,a,null)}t=u,a=g,e.multiple=!!r,t!=null?Vn(e,!!r,t,!1):a!=null&&Vn(e,!!r,a,!0);return;case"textarea":we("invalid",e),u=o=r=null;for(g in a)if(a.hasOwnProperty(g)&&(v=a[g],v!=null))switch(g){case"value":r=v;break;case"defaultValue":o=v;break;case"children":u=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:De(e,t,g,v,a,null)}Kc(e,r,o,u);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(r=a[S],r!=null))switch(S){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:De(e,t,S,r,a,null)}return;case"dialog":we("beforetoggle",e),we("toggle",e),we("cancel",e),we("close",e);break;case"iframe":case"object":we("load",e);break;case"video":case"audio":for(r=0;r<ys.length;r++)we(ys[r],e);break;case"image":we("error",e),we("load",e);break;case"details":we("toggle",e);break;case"embed":case"source":case"link":we("error",e),we("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(C in a)if(a.hasOwnProperty(C)&&(r=a[C],r!=null))switch(C){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:De(e,t,C,r,a,null)}return;default:if(Bl(t)){for(H in a)a.hasOwnProperty(H)&&(r=a[H],r!==void 0&&ju(e,t,H,r,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(r=a[v],r!=null&&De(e,t,v,r,a,null))}function Qy(e,t,a,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,g=null,v=null,S=null,C=null,H=null;for(B in a){var V=a[B];if(a.hasOwnProperty(B)&&V!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":S=V;default:r.hasOwnProperty(B)||De(e,t,B,null,r,V)}}for(var U in r){var B=r[U];if(V=a[U],r.hasOwnProperty(U)&&(B!=null||V!=null))switch(U){case"type":u=B;break;case"name":o=B;break;case"checked":C=B;break;case"defaultChecked":H=B;break;case"value":g=B;break;case"defaultValue":v=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(137,t));break;default:B!==V&&De(e,t,U,B,r,V)}}Ml(e,g,v,S,C,H,u,o);return;case"select":B=g=v=U=null;for(u in a)if(S=a[u],a.hasOwnProperty(u)&&S!=null)switch(u){case"value":break;case"multiple":B=S;default:r.hasOwnProperty(u)||De(e,t,u,null,r,S)}for(o in r)if(u=r[o],S=a[o],r.hasOwnProperty(o)&&(u!=null||S!=null))switch(o){case"value":U=u;break;case"defaultValue":v=u;break;case"multiple":g=u;default:u!==S&&De(e,t,o,u,r,S)}t=v,a=g,r=B,U!=null?Vn(e,!!a,U,!1):!!r!=!!a&&(t!=null?Vn(e,!!a,t,!0):Vn(e,!!a,a?[]:"",!1));return;case"textarea":B=U=null;for(v in a)if(o=a[v],a.hasOwnProperty(v)&&o!=null&&!r.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:De(e,t,v,null,r,o)}for(g in r)if(o=r[g],u=a[g],r.hasOwnProperty(g)&&(o!=null||u!=null))switch(g){case"value":U=o;break;case"defaultValue":B=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(i(91));break;default:o!==u&&De(e,t,g,o,r,u)}Yc(e,U,B);return;case"option":for(var te in a)if(U=a[te],a.hasOwnProperty(te)&&U!=null&&!r.hasOwnProperty(te))switch(te){case"selected":e.selected=!1;break;default:De(e,t,te,null,r,U)}for(S in r)if(U=r[S],B=a[S],r.hasOwnProperty(S)&&U!==B&&(U!=null||B!=null))switch(S){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:De(e,t,S,U,r,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in a)U=a[ce],a.hasOwnProperty(ce)&&U!=null&&!r.hasOwnProperty(ce)&&De(e,t,ce,null,r,U);for(C in r)if(U=r[C],B=a[C],r.hasOwnProperty(C)&&U!==B&&(U!=null||B!=null))switch(C){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(137,t));break;default:De(e,t,C,U,r,B)}return;default:if(Bl(t)){for(var Me in a)U=a[Me],a.hasOwnProperty(Me)&&U!==void 0&&!r.hasOwnProperty(Me)&&ju(e,t,Me,void 0,r,U);for(H in r)U=r[H],B=a[H],!r.hasOwnProperty(H)||U===B||U===void 0&&B===void 0||ju(e,t,H,U,r,B);return}}for(var T in a)U=a[T],a.hasOwnProperty(T)&&U!=null&&!r.hasOwnProperty(T)&&De(e,t,T,null,r,U);for(V in r)U=r[V],B=a[V],!r.hasOwnProperty(V)||U===B||U==null&&B==null||De(e,t,V,U,r,B)}function Jf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),r=0;r<a.length;r++){var o=a[r],u=o.transferSize,g=o.initiatorType,v=o.duration;if(u&&v&&Jf(g)){for(g=0,v=o.responseEnd,r+=1;r<a.length;r++){var S=a[r],C=S.startTime;if(C>v)break;var H=S.transferSize,V=S.initiatorType;H&&Jf(V)&&(S=S.responseEnd,g+=H*(S<v?1:(v-C)/(S-C)))}if(--r,t+=8*(u+g)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Eu=null,ku=null;function Vi(e){return e.nodeType===9?e:e.ownerDocument}function Zf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ff(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Nu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tu=null;function Zy(){var e=window.event;return e&&e.type==="popstate"?e===Tu?!1:(Tu=e,!0):(Tu=null,!1)}var Wf=typeof setTimeout=="function"?setTimeout:void 0,Fy=typeof clearTimeout=="function"?clearTimeout:void 0,e0=typeof Promise=="function"?Promise:void 0,Wy=typeof queueMicrotask=="function"?queueMicrotask:typeof e0<"u"?function(e){return e0.resolve(null).then(e).catch(ep)}:Wf;function ep(e){setTimeout(function(){throw e})}function Za(e){return e==="head"}function t0(e,t){var a=t,r=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"||a==="/&"){if(r===0){e.removeChild(o),xr(t);return}r--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")r++;else if(a==="html")vs(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,vs(a);for(var u=a.firstChild;u;){var g=u.nextSibling,v=u.nodeName;u[zr]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=g}}else a==="body"&&vs(e.ownerDocument.body);a=o}while(a);xr(t)}function a0(e,t){var a=e;e=0;do{var r=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),r&&r.nodeType===8)if(a=r.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=r}while(a)}function Ou(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ou(a),Ul(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function tp(e,t,a,r){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[zr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Qt(e.nextSibling),e===null)break}return null}function ap(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Qt(e.nextSibling),e===null))return null;return e}function n0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Qt(e.nextSibling),e===null))return null;return e}function Au(e){return e.data==="$?"||e.data==="$~"}function Cu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function np(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var r=function(){t(),a.removeEventListener("DOMContentLoaded",r)};a.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Qt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ru=null;function r0(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Qt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function s0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function i0(e,t,a){switch(t=Vi(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function vs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ul(e)}var Jt=new Map,l0=new Set;function Gi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ca=P.d;P.d={f:rp,r:sp,D:ip,C:lp,L:op,m:up,X:dp,S:cp,M:hp};function rp(){var e=Ca.f(),t=Di();return e||t}function sp(e){var t=qn(e);t!==null&&t.tag===5&&t.type==="form"?Sh(t):Ca.r(e)}var pr=typeof document>"u"?null:document;function o0(e,t,a){var r=pr;if(r&&typeof t=="string"&&t){var o=Vt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),l0.has(o)||(l0.add(o),e={rel:e,crossOrigin:a,href:t},r.querySelector(o)===null&&(t=r.createElement("link"),ot(t,"link",e),at(t),r.head.appendChild(t)))}}function ip(e){Ca.D(e),o0("dns-prefetch",e,null)}function lp(e,t){Ca.C(e,t),o0("preconnect",e,t)}function op(e,t,a){Ca.L(e,t,a);var r=pr;if(r&&e&&t){var o='link[rel="preload"][as="'+Vt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+Vt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+Vt(a.imageSizes)+'"]')):o+='[href="'+Vt(e)+'"]';var u=o;switch(t){case"style":u=vr(e);break;case"script":u=br(e)}Jt.has(u)||(e=w({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Jt.set(u,e),r.querySelector(o)!==null||t==="style"&&r.querySelector(bs(u))||t==="script"&&r.querySelector(xs(u))||(t=r.createElement("link"),ot(t,"link",e),at(t),r.head.appendChild(t)))}}function up(e,t){Ca.m(e,t);var a=pr;if(a&&e){var r=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Vt(r)+'"][href="'+Vt(e)+'"]',u=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=br(e)}if(!Jt.has(u)&&(e=w({rel:"modulepreload",href:e},t),Jt.set(u,e),a.querySelector(o)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(xs(u)))return}r=a.createElement("link"),ot(r,"link",e),at(r),a.head.appendChild(r)}}}function cp(e,t,a){Ca.S(e,t,a);var r=pr;if(r&&e){var o=Hn(r).hoistableStyles,u=vr(e);t=t||"default";var g=o.get(u);if(!g){var v={loading:0,preload:null};if(g=r.querySelector(bs(u)))v.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Jt.get(u))&&Uu(e,a);var S=g=r.createElement("link");at(S),ot(S,"link",e),S._p=new Promise(function(C,H){S.onload=C,S.onerror=H}),S.addEventListener("load",function(){v.loading|=1}),S.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Pi(g,t,r)}g={type:"stylesheet",instance:g,count:1,state:v},o.set(u,g)}}}function dp(e,t){Ca.X(e,t);var a=pr;if(a&&e){var r=Hn(a).hoistableScripts,o=br(e),u=r.get(o);u||(u=a.querySelector(xs(o)),u||(e=w({src:e,async:!0},t),(t=Jt.get(o))&&Du(e,t),u=a.createElement("script"),at(u),ot(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(o,u))}}function hp(e,t){Ca.M(e,t);var a=pr;if(a&&e){var r=Hn(a).hoistableScripts,o=br(e),u=r.get(o);u||(u=a.querySelector(xs(o)),u||(e=w({src:e,async:!0,type:"module"},t),(t=Jt.get(o))&&Du(e,t),u=a.createElement("script"),at(u),ot(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(o,u))}}function u0(e,t,a,r){var o=(o=ge.current)?Gi(o):null;if(!o)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=vr(a.href),a=Hn(o).hoistableStyles,r=a.get(t),r||(r={type:"style",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=vr(a.href);var u=Hn(o).hoistableStyles,g=u.get(e);if(g||(o=o.ownerDocument||o,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,g),(u=o.querySelector(bs(e)))&&!u._p&&(g.instance=u,g.state.loading=5),Jt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jt.set(e,a),u||fp(o,e,a,g.state))),t&&r===null)throw Error(i(528,""));return g}if(t&&r!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=br(a),a=Hn(o).hoistableScripts,r=a.get(t),r||(r={type:"script",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function vr(e){return'href="'+Vt(e)+'"'}function bs(e){return'link[rel="stylesheet"]['+e+"]"}function c0(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function fp(e,t,a,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),ot(t,"link",a),at(t),e.head.appendChild(t))}function br(e){return'[src="'+Vt(e)+'"]'}function xs(e){return"script[async]"+e}function d0(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Vt(a.href)+'"]');if(r)return t.instance=r,at(r),r;var o=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),at(r),ot(r,"style",o),Pi(r,a.precedence,e),t.instance=r;case"stylesheet":o=vr(a.href);var u=e.querySelector(bs(o));if(u)return t.state.loading|=4,t.instance=u,at(u),u;r=c0(a),(o=Jt.get(o))&&Uu(r,o),u=(e.ownerDocument||e).createElement("link"),at(u);var g=u;return g._p=new Promise(function(v,S){g.onload=v,g.onerror=S}),ot(u,"link",r),t.state.loading|=4,Pi(u,a.precedence,e),t.instance=u;case"script":return u=br(a.src),(o=e.querySelector(xs(u)))?(t.instance=o,at(o),o):(r=a,(o=Jt.get(u))&&(r=w({},a),Du(r,o)),e=e.ownerDocument||e,o=e.createElement("script"),at(o),ot(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,Pi(r,a.precedence,e));return t.instance}function Pi(e,t,a){for(var r=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,u=o,g=0;g<r.length;g++){var v=r[g];if(v.dataset.precedence===t)u=v;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Uu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Du(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Yi=null;function h0(e,t,a){if(Yi===null){var r=new Map,o=Yi=new Map;o.set(a,r)}else o=Yi,r=o.get(a),r||(r=new Map,o.set(a,r));if(r.has(e))return r;for(r.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var u=a[o];if(!(u[zr]||u[rt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var g=u.getAttribute(t)||"";g=e+g;var v=r.get(g);v?v.push(u):r.set(g,[u])}}return r}function f0(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function gp(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function g0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function mp(e,t,a,r){if(a.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=vr(r.href),u=t.querySelector(bs(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ki.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,at(u);return}u=t.ownerDocument||t,r=c0(r),(o=Jt.get(o))&&Uu(r,o),u=u.createElement("link"),at(u);var g=u;g._p=new Promise(function(v,S){g.onload=v,g.onerror=S}),ot(u,"link",r),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Ki.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Mu=0;function yp(e,t){return e.stylesheets&&e.count===0&&Ii(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var r=setTimeout(function(){if(e.stylesheets&&Ii(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Mu===0&&(Mu=62500*Jy());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ii(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Mu?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}function Ki(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ii(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Xi=null;function Ii(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Xi=new Map,t.forEach(pp,e),Xi=null,Ki.call(e))}function pp(e,t){if(!(t.state.loading&4)){var a=Xi.get(e);if(a)var r=a.get(null);else{a=new Map,Xi.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var g=o[u];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),r=g)}r&&a.set(null,r)}o=t.instance,g=o.getAttribute("data-precedence"),u=a.get(g)||r,u===r&&a.set(null,o),a.set(g,o),this.count++,r=Ki.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var ws={$$typeof:L,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function vp(e,t,a,r,o,u,g,v,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ol(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ol(0),this.hiddenUpdates=Ol(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function m0(e,t,a,r,o,u,g,v,S,C,H,V){return e=new vp(e,t,a,g,S,C,H,V,v),t=1,u===!0&&(t|=24),u=Ct(3,null,null,t),e.current=u,u.stateNode=e,t=go(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:r,isDehydrated:a,cache:t},vo(u),e}function y0(e){return e?(e=Jn,e):Jn}function p0(e,t,a,r,o,u){o=y0(o),r.context===null?r.context=o:r.pendingContext=o,r=Ha(t),r.payload={element:a},u=u===void 0?null:u,u!==null&&(r.callback=u),a=$a(e,r,t),a!==null&&(Nt(a,e,t),Wr(a,e,t))}function v0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function zu(e,t){v0(e,t),(e=e.alternate)&&v0(e,t)}function b0(e){if(e.tag===13||e.tag===31){var t=gn(e,67108864);t!==null&&Nt(t,e,67108864),zu(e,67108864)}}function x0(e){if(e.tag===13||e.tag===31){var t=zt();t=Al(t);var a=gn(e,t);a!==null&&Nt(a,e,t),zu(e,t)}}var Qi=!0;function bp(e,t,a,r){var o=M.T;M.T=null;var u=P.p;try{P.p=2,Bu(e,t,a,r)}finally{P.p=u,M.T=o}}function xp(e,t,a,r){var o=M.T;M.T=null;var u=P.p;try{P.p=8,Bu(e,t,a,r)}finally{P.p=u,M.T=o}}function Bu(e,t,a,r){if(Qi){var o=Lu(r);if(o===null)Su(e,t,r,Ji,a),_0(e,r);else if(_p(o,e,t,a,r))r.stopPropagation();else if(_0(e,r),t&4&&-1<wp.indexOf(e)){for(;o!==null;){var u=qn(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var g=je(u.pendingLanes);if(g!==0){var v=u;for(v.pendingLanes|=2,v.entangledLanes|=2;g;){var S=1<<31-mt(g);v.entanglements[1]|=S,g&=~S}ha(u),(Oe&6)===0&&(Ri=ft()+500,ms(0))}}break;case 31:case 13:v=gn(u,2),v!==null&&Nt(v,u,2),Di(),zu(u,2)}if(u=Lu(r),u===null&&Su(e,t,r,Ji,a),u===o)break;o=u}o!==null&&r.stopPropagation()}else Su(e,t,r,null,a)}}function Lu(e){return e=ql(e),qu(e)}var Ji=null;function qu(e){if(Ji=null,e=Ln(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ji=e,null}function w0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hs()){case $s:return 2;case Vs:return 8;case Dn:case Sl:return 32;case Gs:return 268435456;default:return 32}default:return 32}}var Hu=!1,Fa=null,Wa=null,en=null,_s=new Map,Ss=new Map,tn=[],wp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _0(e,t){switch(e){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":_s.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(t.pointerId)}}function js(e,t,a,r,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:u,targetContainers:[o]},t!==null&&(t=qn(t),t!==null&&b0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function _p(e,t,a,r,o){switch(t){case"focusin":return Fa=js(Fa,e,t,a,r,o),!0;case"dragenter":return Wa=js(Wa,e,t,a,r,o),!0;case"mouseover":return en=js(en,e,t,a,r,o),!0;case"pointerover":var u=o.pointerId;return _s.set(u,js(_s.get(u)||null,e,t,a,r,o)),!0;case"gotpointercapture":return u=o.pointerId,Ss.set(u,js(Ss.get(u)||null,e,t,a,r,o)),!0}return!1}function S0(e){var t=Ln(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,zc(e.priority,function(){x0(a)});return}}else if(t===31){if(t=m(a),t!==null){e.blockedOn=t,zc(e.priority,function(){x0(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Lu(e.nativeEvent);if(a===null){a=e.nativeEvent;var r=new a.constructor(a.type,a);Ll=r,a.target.dispatchEvent(r),Ll=null}else return t=qn(a),t!==null&&b0(t),e.blockedOn=a,!1;t.shift()}return!0}function j0(e,t,a){Zi(e)&&a.delete(t)}function Sp(){Hu=!1,Fa!==null&&Zi(Fa)&&(Fa=null),Wa!==null&&Zi(Wa)&&(Wa=null),en!==null&&Zi(en)&&(en=null),_s.forEach(j0),Ss.forEach(j0)}function Fi(e,t){e.blockedOn===t&&(e.blockedOn=null,Hu||(Hu=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Sp)))}var Wi=null;function E0(e){Wi!==e&&(Wi=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Wi===e&&(Wi=null);for(var t=0;t<e.length;t+=3){var a=e[t],r=e[t+1],o=e[t+2];if(typeof r!="function"){if(qu(r||a)===null)continue;break}var u=qn(a);u!==null&&(e.splice(t,3),t-=3,Lo(u,{pending:!0,data:o,method:a.method,action:r},r,o))}}))}function xr(e){function t(S){return Fi(S,e)}Fa!==null&&Fi(Fa,e),Wa!==null&&Fi(Wa,e),en!==null&&Fi(en,e),_s.forEach(t),Ss.forEach(t);for(var a=0;a<tn.length;a++){var r=tn[a];r.blockedOn===e&&(r.blockedOn=null)}for(;0<tn.length&&(a=tn[0],a.blockedOn===null);)S0(a),a.blockedOn===null&&tn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(r=0;r<a.length;r+=3){var o=a[r],u=a[r+1],g=o[wt]||null;if(typeof u=="function")g||E0(a);else if(g){var v=null;if(u&&u.hasAttribute("formAction")){if(o=u,g=u[wt]||null)v=g.formAction;else if(qu(o)!==null)continue}else v=g.action;typeof v=="function"?a[r+1]=v:(a.splice(r,3),r-=3),E0(a)}}}function k0(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(g){return o=g})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),r||setTimeout(a,20)}function a(){if(!r&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function $u(e){this._internalRoot=e}el.prototype.render=$u.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,r=zt();p0(a,r,e,t,null,null)},el.prototype.unmount=$u.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;p0(e.current,2,null,e,null,null),Di(),t[Bn]=null}};function el(e){this._internalRoot=e}el.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<tn.length&&t!==0&&t<tn[a].priority;a++);tn.splice(a,0,e),a===0&&S0(e)}};var N0=n.version;if(N0!=="19.2.0")throw Error(i(527,N0,"19.2.0"));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=y(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var jp={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{on=tl.inject(jp),gt=tl}catch{}}return ks.createRoot=function(e,t){if(!c(e))throw Error(i(299));var a=!1,r="",o=Uh,u=Dh,g=Mh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=m0(e,1,!1,null,null,a,r,null,o,u,g,k0),e[Bn]=t.current,_u(e),new $u(t)},ks.hydrateRoot=function(e,t,a){if(!c(e))throw Error(i(299));var r=!1,o="",u=Uh,g=Dh,v=Mh,S=null;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),t=m0(e,1,!0,t,a??null,r,o,S,u,g,v,k0),t.context=y0(null),a=t.current,r=zt(),r=Al(r),o=Ha(r),o.callback=null,$a(a,o,r),a=r,t.current.lanes=a,Mr(t,a),ha(t),e[Bn]=t.current,_u(e),new el(t)},ks.version="19.2.0",ks}var B0;function zp(){if(B0)return Pu.exports;B0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Pu.exports=Mp(),Pu.exports}var Bp=zp();const Lp=xc(Bp);var rc=function(l,n){return rc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(s[c]=i[c])},rc(l,n)};function yg(l,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");rc(l,n);function s(){this.constructor=l}l.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}var ml=function(){return ml=Object.assign||function(n){for(var s,i=1,c=arguments.length;i<c;i++){s=arguments[i];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(n[d]=s[d])}return n},ml.apply(this,arguments)};function Rr(l,n){var s={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&n.indexOf(i)<0&&(s[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(l);c<i.length;c++)n.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(l,i[c])&&(s[i[c]]=l[i[c]]);return s}function pg(l,n,s,i){var c=arguments.length,d=c<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,s):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,n,s,i);else for(var m=l.length-1;m>=0;m--)(f=l[m])&&(d=(c<3?f(d):c>3?f(n,s,d):f(n,s))||d);return c>3&&d&&Object.defineProperty(n,s,d),d}function vg(l,n){return function(s,i){n(s,i,l)}}function bg(l,n,s,i,c,d){function f(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var m=i.kind,p=m==="getter"?"get":m==="setter"?"set":"value",y=!n&&l?i.static?l:l.prototype:null,b=n||(y?Object.getOwnPropertyDescriptor(y,i.name):{}),w,_=!1,x=s.length-1;x>=0;x--){var k={};for(var N in i)k[N]=N==="access"?{}:i[N];for(var N in i.access)k.access[N]=i.access[N];k.addInitializer=function(R){if(_)throw new TypeError("Cannot add initializers after decoration has completed");d.push(f(R||null))};var O=(0,s[x])(m==="accessor"?{get:b.get,set:b.set}:b[p],k);if(m==="accessor"){if(O===void 0)continue;if(O===null||typeof O!="object")throw new TypeError("Object expected");(w=f(O.get))&&(b.get=w),(w=f(O.set))&&(b.set=w),(w=f(O.init))&&c.unshift(w)}else(w=f(O))&&(m==="field"?c.unshift(w):b[p]=w)}y&&Object.defineProperty(y,i.name,b),_=!0}function xg(l,n,s){for(var i=arguments.length>2,c=0;c<n.length;c++)s=i?n[c].call(l,s):n[c].call(l);return i?s:void 0}function wg(l){return typeof l=="symbol"?l:"".concat(l)}function _g(l,n,s){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(l,"name",{configurable:!0,value:s?"".concat(s," ",n):n})}function Sg(l,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,n)}function re(l,n,s,i){function c(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function m(b){try{y(i.next(b))}catch(w){f(w)}}function p(b){try{y(i.throw(b))}catch(w){f(w)}}function y(b){b.done?d(b.value):c(b.value).then(m,p)}y((i=i.apply(l,n||[])).next())})}function jg(l,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,c,d,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=m(0),f.throw=m(1),f.return=m(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(y){return function(b){return p([y,b])}}function p(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(s=0)),s;)try{if(i=1,c&&(d=y[0]&2?c.return:y[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,y[1])).done)return d;switch(c=0,d&&(y=[y[0]&2,d.value]),y[0]){case 0:case 1:d=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,c=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!d||y[1]>d[0]&&y[1]<d[3])){s.label=y[1];break}if(y[0]===6&&s.label<d[1]){s.label=d[1],d=y;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(y);break}d[2]&&s.ops.pop(),s.trys.pop();continue}y=n.call(l,s)}catch(b){y=[6,b],c=0}finally{i=d=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}var xl=Object.create?(function(l,n,s,i){i===void 0&&(i=s);var c=Object.getOwnPropertyDescriptor(n,s);(!c||("get"in c?!n.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(l,i,c)}):(function(l,n,s,i){i===void 0&&(i=s),l[i]=n[s]});function Eg(l,n){for(var s in l)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&xl(n,l,s)}function yl(l){var n=typeof Symbol=="function"&&Symbol.iterator,s=n&&l[n],i=0;if(s)return s.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&i>=l.length&&(l=void 0),{value:l&&l[i++],done:!l}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function _c(l,n){var s=typeof Symbol=="function"&&l[Symbol.iterator];if(!s)return l;var i=s.call(l),c,d=[],f;try{for(;(n===void 0||n-- >0)&&!(c=i.next()).done;)d.push(c.value)}catch(m){f={error:m}}finally{try{c&&!c.done&&(s=i.return)&&s.call(i)}finally{if(f)throw f.error}}return d}function kg(){for(var l=[],n=0;n<arguments.length;n++)l=l.concat(_c(arguments[n]));return l}function Ng(){for(var l=0,n=0,s=arguments.length;n<s;n++)l+=arguments[n].length;for(var i=Array(l),c=0,n=0;n<s;n++)for(var d=arguments[n],f=0,m=d.length;f<m;f++,c++)i[c]=d[f];return i}function Tg(l,n,s){if(s||arguments.length===2)for(var i=0,c=n.length,d;i<c;i++)(d||!(i in n))&&(d||(d=Array.prototype.slice.call(n,0,i)),d[i]=n[i]);return l.concat(d||Array.prototype.slice.call(n))}function Ar(l){return this instanceof Ar?(this.v=l,this):new Ar(l)}function Og(l,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=s.apply(l,n||[]),c,d=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",f),c[Symbol.asyncIterator]=function(){return this},c;function f(x){return function(k){return Promise.resolve(k).then(x,w)}}function m(x,k){i[x]&&(c[x]=function(N){return new Promise(function(O,R){d.push([x,N,O,R])>1||p(x,N)})},k&&(c[x]=k(c[x])))}function p(x,k){try{y(i[x](k))}catch(N){_(d[0][3],N)}}function y(x){x.value instanceof Ar?Promise.resolve(x.value.v).then(b,w):_(d[0][2],x)}function b(x){p("next",x)}function w(x){p("throw",x)}function _(x,k){x(k),d.shift(),d.length&&p(d[0][0],d[0][1])}}function Ag(l){var n,s;return n={},i("next"),i("throw",function(c){throw c}),i("return"),n[Symbol.iterator]=function(){return this},n;function i(c,d){n[c]=l[c]?function(f){return(s=!s)?{value:Ar(l[c](f)),done:!1}:d?d(f):f}:d}}function Cg(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=l[Symbol.asyncIterator],s;return n?n.call(l):(l=typeof yl=="function"?yl(l):l[Symbol.iterator](),s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s);function i(d){s[d]=l[d]&&function(f){return new Promise(function(m,p){f=l[d](f),c(m,p,f.done,f.value)})}}function c(d,f,m,p){Promise.resolve(p).then(function(y){d({value:y,done:m})},f)}}function Rg(l,n){return Object.defineProperty?Object.defineProperty(l,"raw",{value:n}):l.raw=n,l}var qp=Object.create?(function(l,n){Object.defineProperty(l,"default",{enumerable:!0,value:n})}):function(l,n){l.default=n},sc=function(l){return sc=Object.getOwnPropertyNames||function(n){var s=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[s.length]=i);return s},sc(l)};function Ug(l){if(l&&l.__esModule)return l;var n={};if(l!=null)for(var s=sc(l),i=0;i<s.length;i++)s[i]!=="default"&&xl(n,l,s[i]);return qp(n,l),n}function Dg(l){return l&&l.__esModule?l:{default:l}}function Mg(l,n,s,i){if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?l!==n||!i:!n.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?i:s==="a"?i.call(l):i?i.value:n.get(l)}function zg(l,n,s,i,c){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?l!==n||!c:!n.has(l))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?c.call(l,s):c?c.value=s:n.set(l,s),s}function Bg(l,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof l=="function"?n===l:l.has(n)}function Lg(l,n,s){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var i,c;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=n[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=n[Symbol.dispose],s&&(c=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");c&&(i=function(){try{c.call(this)}catch(d){return Promise.reject(d)}}),l.stack.push({value:n,dispose:i,async:s})}else s&&l.stack.push({async:!0});return n}var Hp=typeof SuppressedError=="function"?SuppressedError:function(l,n,s){var i=new Error(s);return i.name="SuppressedError",i.error=l,i.suppressed=n,i};function qg(l){function n(d){l.error=l.hasError?new Hp(d,l.error,"An error was suppressed during disposal."):d,l.hasError=!0}var s,i=0;function c(){for(;s=l.stack.pop();)try{if(!s.async&&i===1)return i=0,l.stack.push(s),Promise.resolve().then(c);if(s.dispose){var d=s.dispose.call(s.value);if(s.async)return i|=2,Promise.resolve(d).then(c,function(f){return n(f),c()})}else i|=1}catch(f){n(f)}if(i===1)return l.hasError?Promise.reject(l.error):Promise.resolve();if(l.hasError)throw l.error}return c()}function Hg(l,n){return typeof l=="string"&&/^\.\.?\//.test(l)?l.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,i,c,d,f){return i?n?".jsx":".js":c&&(!d||!f)?s:c+d+"."+f.toLowerCase()+"js"}):l}const $p={__extends:yg,__assign:ml,__rest:Rr,__decorate:pg,__param:vg,__esDecorate:bg,__runInitializers:xg,__propKey:wg,__setFunctionName:_g,__metadata:Sg,__awaiter:re,__generator:jg,__createBinding:xl,__exportStar:Eg,__values:yl,__read:_c,__spread:kg,__spreadArrays:Ng,__spreadArray:Tg,__await:Ar,__asyncGenerator:Og,__asyncDelegator:Ag,__asyncValues:Cg,__makeTemplateObject:Rg,__importStar:Ug,__importDefault:Dg,__classPrivateFieldGet:Mg,__classPrivateFieldSet:zg,__classPrivateFieldIn:Bg,__addDisposableResource:Lg,__disposeResources:qg,__rewriteRelativeImportExtension:Hg},Vp=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Lg,get __assign(){return ml},__asyncDelegator:Ag,__asyncGenerator:Og,__asyncValues:Cg,__await:Ar,__awaiter:re,__classPrivateFieldGet:Mg,__classPrivateFieldIn:Bg,__classPrivateFieldSet:zg,__createBinding:xl,__decorate:pg,__disposeResources:qg,__esDecorate:bg,__exportStar:Eg,__extends:yg,__generator:jg,__importDefault:Dg,__importStar:Ug,__makeTemplateObject:Rg,__metadata:Sg,__param:vg,__propKey:wg,__read:_c,__rest:Rr,__rewriteRelativeImportExtension:Hg,__runInitializers:xg,__setFunctionName:_g,__spread:kg,__spreadArray:Tg,__spreadArrays:Ng,__values:yl,default:$p},Symbol.toStringTag,{value:"Module"})),Gp="modulepreload",Pp=function(l){return"/Vidya-Gram/"+l},L0={},Ur=function(n,s,i){let c=Promise.resolve();if(s&&s.length>0){let f=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));c=f(s.map(y=>{if(y=Pp(y),y in L0)return;L0[y]=!0;const b=y.endsWith(".css"),w=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const _=document.createElement("link");if(_.rel=b?"stylesheet":Gp,b||(_.as="script"),_.crossOrigin="",_.href=y,p&&_.setAttribute("nonce",p),document.head.appendChild(_),b)return new Promise((x,k)=>{_.addEventListener("load",x),_.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${y}`)))})}))}function d(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return c.then(f=>{for(const m of f||[])m.status==="rejected"&&d(m.reason);return n().catch(d)})},Yp=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>Ur(async()=>{const{default:i}=await Promise.resolve().then(()=>Un);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)};class Sc extends Error{constructor(n,s="FunctionsError",i){super(n),this.name=s,this.context=i}}class q0 extends Sc{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class H0 extends Sc{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class $0 extends Sc{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var ic;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(ic||(ic={}));class Kp{constructor(n,{headers:s={},customFetch:i,region:c=ic.Any}={}){this.url=n,this.headers=s,this.region=c,this.fetch=Yp(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return re(this,arguments,void 0,function*(s,i={}){var c;try{const{headers:d,method:f,body:m,signal:p}=i;let y={},{region:b}=i;b||(b=this.region);const w=new URL(`${this.url}/${s}`);b&&b!=="any"&&(y["x-region"]=b,w.searchParams.set("forceFunctionRegion",b));let _;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",_=m):typeof m=="string"?(y["Content-Type"]="text/plain",_=m):typeof FormData<"u"&&m instanceof FormData?_=m:(y["Content-Type"]="application/json",_=JSON.stringify(m)):_=m;const x=yield this.fetch(w.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),d),body:_,signal:p}).catch(R=>{throw R.name==="AbortError"?R:new q0(R)}),k=x.headers.get("x-relay-error");if(k&&k==="true")throw new H0(x);if(!x.ok)throw new $0(x);let N=((c=x.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),O;return N==="application/json"?O=yield x.json():N==="application/octet-stream"||N==="application/pdf"?O=yield x.blob():N==="text/event-stream"?O=x:N==="multipart/form-data"?O=yield x.formData():O=yield x.text(),{data:O,error:null,response:x}}catch(d){return d instanceof Error&&d.name==="AbortError"?{data:null,error:new q0(d)}:{data:null,error:d,response:d instanceof $0||d instanceof H0?d.context:void 0}}})}}var ht={};const Dr=mg(Vp);var al={},nl={},rl={},sl={},il={},Xp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Cr=Xp();const Ip=Cr.fetch,$g=Cr.fetch.bind(Cr),Vg=Cr.Headers,Qp=Cr.Request,Jp=Cr.Response,Un=Object.freeze(Object.defineProperty({__proto__:null,Headers:Vg,Request:Qp,Response:Jp,default:$g,fetch:Ip},Symbol.toStringTag,{value:"Module"})),Zp=mg(Un);var ll={},V0;function Gg(){if(V0)return ll;V0=1,Object.defineProperty(ll,"__esModule",{value:!0});class l extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return ll.default=l,ll}var G0;function Pg(){if(G0)return il;G0=1,Object.defineProperty(il,"__esModule",{value:!0});const l=Dr,n=l.__importDefault(Zp),s=l.__importDefault(Gg());class i{constructor(d){var f,m;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(f=d.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=d.signal,this.isMaybeSingle=(m=d.isMaybeSingle)!==null&&m!==void 0?m:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,f){return this.headers=new Headers(this.headers),this.headers.set(d,f),this}then(d,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let p=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var b,w,_,x;let k=null,N=null,O=null,R=y.status,z=y.statusText;if(y.ok){if(this.method!=="HEAD"){const Y=await y.text();Y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((b=this.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?N=Y:N=JSON.parse(Y))}const I=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),G=(_=y.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");I&&G&&G.length>1&&(O=parseInt(G[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(k={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,O=null,R=406,z="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const I=await y.text();try{k=JSON.parse(I),Array.isArray(k)&&y.status===404&&(N=[],k=null,R=200,z="OK")}catch{y.status===404&&I===""?(R=204,z="No Content"):k={message:I}}if(k&&this.isMaybeSingle&&(!((x=k==null?void 0:k.details)===null||x===void 0)&&x.includes("0 rows"))&&(k=null,R=200,z="OK"),k&&this.shouldThrowOnError)throw new s.default(k)}return{error:k,data:N,count:O,status:R,statusText:z}});return this.shouldThrowOnError||(p=p.catch(y=>{var b,w,_;return{error:{message:`${(b=y==null?void 0:y.name)!==null&&b!==void 0?b:"FetchError"}: ${y==null?void 0:y.message}`,details:`${(w=y==null?void 0:y.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(_=y==null?void 0:y.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),p.then(d,f)}returns(){return this}overrideTypes(){return this}}return il.default=i,il}var P0;function Yg(){if(P0)return sl;P0=1,Object.defineProperty(sl,"__esModule",{value:!0});const n=Dr.__importDefault(Pg());class s extends n.default{select(c){let d=!1;const f=(c??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:d=!0,nullsFirst:f,foreignTable:m,referencedTable:p=m}={}){const y=p?`${p}.order`:"order",b=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${b?`${b},`:""}${c}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:d,referencedTable:f=d}={}){const m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${c}`),this}range(c,d,{foreignTable:f,referencedTable:m=f}={}){const p=typeof m>"u"?"offset":`${m}.offset`,y=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${c}`),this.url.searchParams.set(y,`${d-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:d=!1,settings:f=!1,buffers:m=!1,wal:p=!1,format:y="text"}={}){var b;const w=[c?"analyze":null,d?"verbose":null,f?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),_=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${_}"; options=${w};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return sl.default=s,sl}var Y0;function jc(){if(Y0)return rl;Y0=1,Object.defineProperty(rl,"__esModule",{value:!0});const n=Dr.__importDefault(Yg()),s=new RegExp("[,()]");class i extends n.default{eq(d,f){return this.url.searchParams.append(d,`eq.${f}`),this}neq(d,f){return this.url.searchParams.append(d,`neq.${f}`),this}gt(d,f){return this.url.searchParams.append(d,`gt.${f}`),this}gte(d,f){return this.url.searchParams.append(d,`gte.${f}`),this}lt(d,f){return this.url.searchParams.append(d,`lt.${f}`),this}lte(d,f){return this.url.searchParams.append(d,`lte.${f}`),this}like(d,f){return this.url.searchParams.append(d,`like.${f}`),this}likeAllOf(d,f){return this.url.searchParams.append(d,`like(all).{${f.join(",")}}`),this}likeAnyOf(d,f){return this.url.searchParams.append(d,`like(any).{${f.join(",")}}`),this}ilike(d,f){return this.url.searchParams.append(d,`ilike.${f}`),this}ilikeAllOf(d,f){return this.url.searchParams.append(d,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(d,f){return this.url.searchParams.append(d,`ilike(any).{${f.join(",")}}`),this}is(d,f){return this.url.searchParams.append(d,`is.${f}`),this}in(d,f){const m=Array.from(new Set(f)).map(p=>typeof p=="string"&&s.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(d,`in.(${m})`),this}contains(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cs.{${f.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(f)}`),this}containedBy(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cd.{${f.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(f)}`),this}rangeGt(d,f){return this.url.searchParams.append(d,`sr.${f}`),this}rangeGte(d,f){return this.url.searchParams.append(d,`nxl.${f}`),this}rangeLt(d,f){return this.url.searchParams.append(d,`sl.${f}`),this}rangeLte(d,f){return this.url.searchParams.append(d,`nxr.${f}`),this}rangeAdjacent(d,f){return this.url.searchParams.append(d,`adj.${f}`),this}overlaps(d,f){return typeof f=="string"?this.url.searchParams.append(d,`ov.${f}`):this.url.searchParams.append(d,`ov.{${f.join(",")}}`),this}textSearch(d,f,{config:m,type:p}={}){let y="";p==="plain"?y="pl":p==="phrase"?y="ph":p==="websearch"&&(y="w");const b=m===void 0?"":`(${m})`;return this.url.searchParams.append(d,`${y}fts${b}.${f}`),this}match(d){return Object.entries(d).forEach(([f,m])=>{this.url.searchParams.append(f,`eq.${m}`)}),this}not(d,f,m){return this.url.searchParams.append(d,`not.${f}.${m}`),this}or(d,{foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.or`:"or";return this.url.searchParams.append(p,`(${d})`),this}filter(d,f,m){return this.url.searchParams.append(d,`${f}.${m}`),this}}return rl.default=i,rl}var K0;function Kg(){if(K0)return nl;K0=1,Object.defineProperty(nl,"__esModule",{value:!0});const n=Dr.__importDefault(jc());class s{constructor(c,{headers:d={},schema:f,fetch:m}){this.url=c,this.headers=new Headers(d),this.schema=f,this.fetch=m}select(c,d){const{head:f=!1,count:m}=d??{},p=f?"HEAD":"GET";let y=!1;const b=(c??"*").split("").map(w=>/\s/.test(w)&&!y?"":(w==='"'&&(y=!y),w)).join("");return this.url.searchParams.set("select",b),m&&this.headers.append("Prefer",`count=${m}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:d,defaultToNull:f=!0}={}){var m;const p="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const y=c.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(y.length>0){const b=[...new Set(y)].map(w=>`"${w}"`);this.url.searchParams.set("columns",b.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(c,{onConflict:d,ignoreDuplicates:f=!1,count:m,defaultToNull:p=!0}={}){var y;const b="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const w=c.reduce((_,x)=>_.concat(Object.keys(x)),[]);if(w.length>0){const _=[...new Set(w)].map(x=>`"${x}"`);this.url.searchParams.set("columns",_.join(","))}}return new n.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(c,{count:d}={}){var f;const m="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:c}={}){var d;const f="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return nl.default=s,nl}var X0;function Fp(){if(X0)return al;X0=1,Object.defineProperty(al,"__esModule",{value:!0});const l=Dr,n=l.__importDefault(Kg()),s=l.__importDefault(jc());class i{constructor(d,{headers:f={},schema:m,fetch:p}={}){this.url=d,this.headers=new Headers(f),this.schemaName=m,this.fetch=p}from(d){const f=new URL(`${this.url}/${d}`);return new n.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new i(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:m=!1,get:p=!1,count:y}={}){var b;let w;const _=new URL(`${this.url}/rpc/${d}`);let x;m||p?(w=m?"HEAD":"GET",Object.entries(f).filter(([N,O])=>O!==void 0).map(([N,O])=>[N,Array.isArray(O)?`{${O.join(",")}}`:`${O}`]).forEach(([N,O])=>{_.searchParams.append(N,O)})):(w="POST",x=f);const k=new Headers(this.headers);return y&&k.set("Prefer",`count=${y}`),new s.default({method:w,url:_,headers:k,schema:this.schemaName,body:x,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return al.default=i,al}var I0;function Wp(){if(I0)return ht;I0=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.PostgrestError=ht.PostgrestBuilder=ht.PostgrestTransformBuilder=ht.PostgrestFilterBuilder=ht.PostgrestQueryBuilder=ht.PostgrestClient=void 0;const l=Dr,n=l.__importDefault(Fp());ht.PostgrestClient=n.default;const s=l.__importDefault(Kg());ht.PostgrestQueryBuilder=s.default;const i=l.__importDefault(jc());ht.PostgrestFilterBuilder=i.default;const c=l.__importDefault(Yg());ht.PostgrestTransformBuilder=c.default;const d=l.__importDefault(Pg());ht.PostgrestBuilder=d.default;const f=l.__importDefault(Gg());return ht.PostgrestError=f.default,ht.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:d.default,PostgrestError:f.default},ht}var Xg=Wp();const Ig=xc(Xg),ev=kp({__proto__:null,default:Ig},[Xg]),{PostgrestClient:tv,PostgrestQueryBuilder:sw,PostgrestFilterBuilder:iw,PostgrestTransformBuilder:lw,PostgrestBuilder:ow,PostgrestError:uw}=Ig||ev;class av{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const i=s.node,c=parseInt(i.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const i=this.getWebSocketConstructor();return new i(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const nv="2.78.0",rv=`realtime-js/${nv}`,sv="1.0.0",lc=1e4,iv=1e3,lv=100;var Cs;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(Cs||(Cs={}));var tt;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(tt||(tt={}));var ra;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(ra||(ra={}));var oc;(function(l){l.websocket="websocket"})(oc||(oc={}));var An;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(An||(An={}));class ov{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),i=new TextDecoder;return this._decodeBroadcast(n,s,i)}_decodeBroadcast(n,s,i){const c=s.getUint8(1),d=s.getUint8(2);let f=this.HEADER_LENGTH+2;const m=i.decode(n.slice(f,f+c));f=f+c;const p=i.decode(n.slice(f,f+d));f=f+d;const y=JSON.parse(i.decode(n.slice(f,n.byteLength)));return{ref:null,topic:m,event:p,payload:y}}}class Qg{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Be;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Be||(Be={}));const Q0=(l,n,s={})=>{var i;const c=(i=s.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((d,f)=>(d[f]=uv(f,l,n,c),d),{}):{}},uv=(l,n,s,i)=>{const c=n.find(m=>m.name===l),d=c==null?void 0:c.type,f=s[l];return d&&!i.includes(d)?Jg(d,f):uc(f)},Jg=(l,n)=>{if(l.charAt(0)==="_"){const s=l.slice(1,l.length);return fv(n,s)}switch(l){case Be.bool:return cv(n);case Be.float4:case Be.float8:case Be.int2:case Be.int4:case Be.int8:case Be.numeric:case Be.oid:return dv(n);case Be.json:case Be.jsonb:return hv(n);case Be.timestamp:return gv(n);case Be.abstime:case Be.date:case Be.daterange:case Be.int4range:case Be.int8range:case Be.money:case Be.reltime:case Be.text:case Be.time:case Be.timestamptz:case Be.timetz:case Be.tsrange:case Be.tstzrange:return uc(n);default:return uc(n)}},uc=l=>l,cv=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},dv=l=>{if(typeof l=="string"){const n=parseFloat(l);if(!Number.isNaN(n))return n}return l},hv=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(n){return console.log(`JSON parse error: ${n}`),l}return l},fv=(l,n)=>{if(typeof l!="string")return l;const s=l.length-1,i=l[s];if(l[0]==="{"&&i==="}"){let d;const f=l.slice(1,s);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(m=>Jg(n,m))}return l},gv=l=>typeof l=="string"?l.replace(" ","T"):l,Zg=l=>{const n=new URL(l);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Iu{constructor(n,s,i={},c=lc){this.channel=n,this.event=s,this.payload=i,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var i;return this._hasReceived(n)&&s((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var J0;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(J0||(J0={}));class Rs{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},c=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rs.syncState(this.state,c,d,f),this.pendingDiffs.forEach(p=>{this.state=Rs.syncDiff(this.state,p,d,f)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},c=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Rs.syncDiff(this.state,c,d,f),m())}),this.onJoin((c,d,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:f})}),this.onLeave((c,d,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,i,c){const d=this.cloneDeep(n),f=this.transformState(s),m={},p={};return this.map(d,(y,b)=>{f[y]||(p[y]=b)}),this.map(f,(y,b)=>{const w=d[y];if(w){const _=b.map(O=>O.presence_ref),x=w.map(O=>O.presence_ref),k=b.filter(O=>x.indexOf(O.presence_ref)<0),N=w.filter(O=>_.indexOf(O.presence_ref)<0);k.length>0&&(m[y]=k),N.length>0&&(p[y]=N)}else m[y]=b}),this.syncDiff(d,{joins:m,leaves:p},i,c)}static syncDiff(n,s,i,c){const{joins:d,leaves:f}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return i||(i=()=>{}),c||(c=()=>{}),this.map(d,(m,p)=>{var y;const b=(y=n[m])!==null&&y!==void 0?y:[];if(n[m]=this.cloneDeep(p),b.length>0){const w=n[m].map(x=>x.presence_ref),_=b.filter(x=>w.indexOf(x.presence_ref)<0);n[m].unshift(..._)}i(m,b,p)}),this.map(f,(m,p)=>{let y=n[m];if(!y)return;const b=p.map(w=>w.presence_ref);y=y.filter(w=>b.indexOf(w.presence_ref)<0),n[m]=y,c(m,y,p),y.length===0&&delete n[m]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(i=>s(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,i)=>{const c=n[i];return"metas"in c?s[i]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):s[i]=c,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Z0;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(Z0||(Z0={}));var Us;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(Us||(Us={}));var Ra;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Ra||(Ra={}));class Ec{constructor(n,s={config:{}},i){var c,d;if(this.topic=n,this.params=s,this.socket=i,this.bindings={},this.state=tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Iu(this,ra.join,this.params,this.timeout),this.rejoinTimer=new Qg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ra.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new Rs(this),this.broadcastEndpointURL=Zg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,s=this.timeout){var i,c,d;if(this.socket.isConnected()||this.socket.connect(),this.state==tt.closed){const{config:{broadcast:f,presence:m,private:p}}=this.params,y=(c=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(x=>x.filter))!==null&&c!==void 0?c:[],b=!!this.bindings[Us.PRESENCE]&&this.bindings[Us.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,w={},_={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:y,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(x=>n==null?void 0:n(Ra.CHANNEL_ERROR,x)),this._onClose(()=>n==null?void 0:n(Ra.CLOSED)),this.updateJoinPayload(Object.assign({config:_},w)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:x})=>{var k;if(this.socket.setAuth(),x===void 0){n==null||n(Ra.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,O=(k=N==null?void 0:N.length)!==null&&k!==void 0?k:0,R=[];for(let z=0;z<O;z++){const L=N[z],{filter:{event:I,schema:G,table:Y,filter:K}}=L,de=x&&x[z];if(de&&de.event===I&&de.schema===G&&de.table===Y&&de.filter===K)R.push(Object.assign(Object.assign({},L),{id:de.id}));else{this.unsubscribe(),this.state=tt.errored,n==null||n(Ra.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,n&&n(Ra.SUBSCRIBED);return}}).receive("error",x=>{this.state=tt.errored,n==null||n(Ra.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Ra.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,i){return this.state===tt.joined&&n===Us.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,i)}async httpSend(n,s,i={}){var c;const d=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const f={method:"POST",headers:{Authorization:d,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:s,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(c=i.timeout)!==null&&c!==void 0?c:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const y=await m.json();p=y.error||y.message||p}catch{}return Promise.reject(new Error(p))}async send(n,s={}){var i,c;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=n,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);return await((c=y.body)===null||c===void 0?void 0:c.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,m,p;const y=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&d("ok"),y.receive("ok",()=>d("ok")),y.receive("error",()=>d("error")),y.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=tt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ra.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(c=>{i=new Iu(this,ra.leave,{},n),i.receive("ok",()=>{s(),c("ok")}).receive("timeout",()=>{s(),c("timed out")}).receive("error",()=>{c("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tt.closed,this.bindings={}}async _fetchWithTimeout(n,s,i){const c=new AbortController,d=setTimeout(()=>c.abort(),i),f=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:c.signal}));return clearTimeout(d),f}_push(n,s,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Iu(this,n,s,i);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>lv){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,i){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,i){var c,d;const f=n.toLocaleLowerCase(),{close:m,error:p,leave:y,join:b}=ra;if(i&&[m,p,y,b].indexOf(f)>=0&&i!==this._joinRef())return;let _=this._onMessage(f,s,i);if(s&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(x=>{var k,N,O;return((k=x.filter)===null||k===void 0?void 0:k.event)==="*"||((O=(N=x.filter)===null||N===void 0?void 0:N.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===f}).map(x=>x.callback(_,i)):(d=this.bindings[f])===null||d===void 0||d.filter(x=>{var k,N,O,R,z,L;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in x){const I=x.id,G=(k=x.filter)===null||k===void 0?void 0:k.event;return I&&((N=s.ids)===null||N===void 0?void 0:N.includes(I))&&(G==="*"||(G==null?void 0:G.toLocaleLowerCase())===((O=s.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{const I=(z=(R=x==null?void 0:x.filter)===null||R===void 0?void 0:R.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return I==="*"||I===((L=s==null?void 0:s.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===f}).map(x=>{if(typeof _=="object"&&"ids"in _){const k=_.data,{schema:N,table:O,commit_timestamp:R,type:z,errors:L}=k;_=Object.assign(Object.assign({},{schema:N,table:O,commit_timestamp:R,eventType:z,new:{},old:{},errors:L}),this._getPayloadRecords(k))}x.callback(_,i)})}_isClosed(){return this.state===tt.closed}_isJoined(){return this.state===tt.joined}_isJoining(){return this.state===tt.joining}_isLeaving(){return this.state===tt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,i){const c=n.toLocaleLowerCase(),d={type:c,filter:s,callback:i};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(n,s){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===i&&Ec.isEqual(c.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const i in n)if(n[i]!==s[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(ra.close,{},n)}_onError(n){this._on(ra.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=Q0(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=Q0(n.columns,n.old_record)),s}}const Qu=()=>{},ol={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mv=[1e3,2e3,5e3,1e4],yv=1e4,pv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vv{constructor(n,s){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=lc,this.transport=null,this.heartbeatIntervalMs=ol.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qu,this.ref=0,this.reconnectTimer=null,this.logger=Qu,this.conn=null,this.sendBuffer=[],this.serializer=new ov,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>{let d;return c?d=c:typeof fetch>"u"?d=(...f)=>Ur(async()=>{const{default:m}=await Promise.resolve().then(()=>Un);return{default:m}},void 0).then(({default:m})=>m(...f)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...f)=>d(...f)},!(!((i=s==null?void 0:s.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${oc.websocket}`,this.httpEndpoint=Zg(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=av.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sv}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,i){this.logger(n,s,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Cs.connecting:return An.Connecting;case Cs.open:return An.Open;case Cs.closing:return An.Closing;default:return An.Closed}}isConnected(){return this.connectionState()===An.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const i=`realtime:${n}`,c=this.getChannels().find(d=>d.topic===i);if(c)return c;{const d=new Ec(`realtime:${n}`,s,this);return this.channels.push(d),d}}push(n){const{topic:s,event:i,payload:c,ref:d}=n,f=()=>{this.encode(n,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${s} ${i} (${d})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(iv,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},ol.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:c,payload:d,ref:f}=s,m=f?`(${f})`:"",p=d.status||"";this.log("receive",`${p} ${i} ${c} ${m}`.trim(),d),this.channels.filter(y=>y._isMember(i)).forEach(y=>y._trigger(c,d,f)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(ra.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const i=n.match(/\?/)?"&":"?",c=new URLSearchParams(s);return`${n}${i}${c}`}_workerObjectUrl(n){let s;if(n)s=n;else{const i=new Blob([pv],{type:"application/javascript"});s=URL.createObjectURL(i)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(i=>{const c={access_token:s,version:rv};s&&i.updateJoinPayload(c),i.joinedOnce&&i._isJoined()&&i._push(ra.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(s)}catch(c){this.log("error",`error in ${n} callback`,c)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Qg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ol.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,i,c,d,f,m,p,y,b;if(this.transport=(s=n==null?void 0:n.transport)!==null&&s!==void 0?s:null,this.timeout=(i=n==null?void 0:n.timeout)!==null&&i!==void 0?i:lc,this.heartbeatIntervalMs=(c=n==null?void 0:n.heartbeatIntervalMs)!==null&&c!==void 0?c:ol.HEARTBEAT_INTERVAL,this.worker=(d=n==null?void 0:n.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=n==null?void 0:n.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=n==null?void 0:n.heartbeatCallback)!==null&&m!==void 0?m:Qu,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n==null?void 0:n.reconnectAfterMs)!==null&&p!==void 0?p:(w=>mv[w-1]||yv),this.encode=(y=n==null?void 0:n.encode)!==null&&y!==void 0?y:((w,_)=>_(JSON.stringify(w))),this.decode=(b=n==null?void 0:n.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}class kc extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Ve(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class bv extends kc{constructor(n,s,i){super(n),this.name="StorageApiError",this.status=s,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class cc extends kc{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}const Nc=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>Ur(async()=>{const{default:i}=await Promise.resolve().then(()=>Un);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)},xv=()=>re(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ur(()=>Promise.resolve().then(()=>Un),void 0)).Response:Response}),dc=l=>{if(Array.isArray(l))return l.map(s=>dc(s));if(typeof l=="function"||l!==Object(l))return l;const n={};return Object.entries(l).forEach(([s,i])=>{const c=s.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[c]=dc(i)}),n},wv=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},Ju=l=>{var n;return l.msg||l.message||l.error_description||(typeof l.error=="string"?l.error:(n=l.error)===null||n===void 0?void 0:n.message)||JSON.stringify(l)},_v=(l,n,s)=>re(void 0,void 0,void 0,function*(){const i=yield xv();l instanceof i&&!(s!=null&&s.noResolveJson)?l.json().then(c=>{const d=l.status||500,f=(c==null?void 0:c.statusCode)||d+"";n(new bv(Ju(c),d,f))}).catch(c=>{n(new cc(Ju(c),c))}):n(new cc(Ju(l),l))}),Sv=(l,n,s,i)=>{const c={method:l,headers:(n==null?void 0:n.headers)||{}};return l==="GET"||!i?c:(wv(i)?(c.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),c.body=JSON.stringify(i)):c.body=i,n!=null&&n.duplex&&(c.duplex=n.duplex),Object.assign(Object.assign({},c),s))};function Ls(l,n,s,i,c,d){return re(this,void 0,void 0,function*(){return new Promise((f,m)=>{l(s,Sv(n,i,c,d)).then(p=>{if(!p.ok)throw p;return i!=null&&i.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>_v(p,m,i))})})}function Ds(l,n,s,i){return re(this,void 0,void 0,function*(){return Ls(l,"GET",n,s,i)})}function na(l,n,s,i,c){return re(this,void 0,void 0,function*(){return Ls(l,"POST",n,i,c,s)})}function hc(l,n,s,i,c){return re(this,void 0,void 0,function*(){return Ls(l,"PUT",n,i,c,s)})}function jv(l,n,s,i){return re(this,void 0,void 0,function*(){return Ls(l,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),i)})}function Tc(l,n,s,i,c){return re(this,void 0,void 0,function*(){return Ls(l,"DELETE",n,i,c,s)})}class Ev{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s}then(n,s){return this.execute().then(n,s)}execute(){return re(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}}var Fg;class kv{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s,this[Fg]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ev(this.downloadFn,this.shouldThrowOnError)}then(n,s){return this.getPromise().then(n,s)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return re(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}}Fg=Symbol.toStringTag;const Nv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},F0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Tv{constructor(n,s={},i,c){this.shouldThrowOnError=!1,this.url=n,this.headers=s,this.bucketId=i,this.fetch=Nc(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,s,i,c){return re(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},F0),c);let m=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",this.encodeMetadata(p)),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",this.encodeMetadata(p))):(d=i,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),c!=null&&c.headers&&(m=Object.assign(Object.assign({},m),c.headers));const y=this._removeEmptyFolders(s),b=this._getFinalPath(y),w=yield(n=="PUT"?hc:na)(this.fetch,`${this.url}/object/${b}`,d,Object.assign({headers:m},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:y,id:w.Id,fullPath:w.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ve(d))return{data:null,error:d};throw d}})}upload(n,s,i){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,i)})}uploadToSignedUrl(n,s,i,c){return re(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(n),f=this._getFinalPath(d),m=new URL(this.url+`/object/upload/sign/${f}`);m.searchParams.set("token",s);try{let p;const y=Object.assign({upsert:F0.upsert},c),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",y.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",y.cacheControl)):(p=i,b["cache-control"]=`max-age=${y.cacheControl}`,b["content-type"]=y.contentType);const w=yield hc(this.fetch,m.toString(),p,{headers:b});return{data:{path:d,fullPath:w.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Ve(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(n,s){return re(this,void 0,void 0,function*(){try{let i=this._getFinalPath(n);const c=Object.assign({},this.headers);s!=null&&s.upsert&&(c["x-upsert"]="true");const d=yield na(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:c}),f=new URL(this.url+d.url),m=f.searchParams.get("token");if(!m)throw new kc("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:m},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}update(n,s,i){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,i)})}move(n,s,i){return re(this,void 0,void 0,function*(){try{return{data:yield na(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ve(c))return{data:null,error:c};throw c}})}copy(n,s,i){return re(this,void 0,void 0,function*(){try{return{data:{path:(yield na(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ve(c))return{data:null,error:c};throw c}})}createSignedUrl(n,s,i){return re(this,void 0,void 0,function*(){try{let c=this._getFinalPath(n),d=yield na(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:s},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const f=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ve(c))return{data:null,error:c};throw c}})}createSignedUrls(n,s,i){return re(this,void 0,void 0,function*(){try{const c=yield na(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),d=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:c.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ve(c))return{data:null,error:c};throw c}})}download(n,s){const c=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),f=d?`?${d}`:"",m=this._getFinalPath(n),p=()=>Ds(this.fetch,`${this.url}/${c}/${m}${f}`,{headers:this.headers,noResolveJson:!0});return new kv(p,this.shouldThrowOnError)}info(n){return re(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const i=yield Ds(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:dc(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}exists(n){return re(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield jv(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i)&&i instanceof cc){const c=i.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:i}}throw i}})}getPublicUrl(n,s){const i=this._getFinalPath(n),c=[],d=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";d!==""&&c.push(d);const m=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});p!==""&&c.push(p);let y=c.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${y}`)}}}remove(n){return re(this,void 0,void 0,function*(){try{return{data:yield Tc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}list(n,s,i){return re(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},Nv),s),{prefix:n||""});return{data:yield na(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},i),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ve(c))return{data:null,error:c};throw c}})}listV2(n,s){return re(this,void 0,void 0,function*(){try{const i=Object.assign({},n);return{data:yield na(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const Wg="2.78.0",em={"X-Client-Info":`storage-js/${Wg}`};class Ov{constructor(n,s={},i,c){this.shouldThrowOnError=!1;const d=new URL(n);c!=null&&c.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},em),s),this.fetch=Nc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(n){return re(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(n);return{data:yield Ds(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}getBucket(n){return re(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}createBucket(n){return re(this,arguments,void 0,function*(s,i={public:!1}){try{return{data:yield na(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ve(c))return{data:null,error:c};throw c}})}updateBucket(n,s){return re(this,void 0,void 0,function*(){try{return{data:yield hc(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}emptyBucket(n){return re(this,void 0,void 0,function*(){try{return{data:yield na(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}deleteBucket(n){return re(this,void 0,void 0,function*(){try{return{data:yield Tc(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(n){const s={};return n&&("limit"in n&&(s.limit=String(n.limit)),"offset"in n&&(s.offset=String(n.offset)),n.search&&(s.search=n.search),n.sortColumn&&(s.sortColumn=n.sortColumn),n.sortOrder&&(s.sortOrder=n.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}class Av{constructor(n,s={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},em),s),this.fetch=Nc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return re(this,void 0,void 0,function*(){try{return{data:yield na(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}listBuckets(n){return re(this,void 0,void 0,function*(){try{const s=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&s.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&s.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&s.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&s.set("sortOrder",n.sortOrder),n!=null&&n.search&&s.set("search",n.search);const i=s.toString(),c=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Ds(this.fetch,c,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}deleteBucket(n){return re(this,void 0,void 0,function*(){try{return{data:yield Tc(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}}const Oc={"X-Client-Info":`storage-js/${Wg}`,"Content-Type":"application/json"};class tm extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Lt(l){return typeof l=="object"&&l!==null&&"__isStorageVectorsError"in l}class Zu extends tm{constructor(n,s,i){super(n),this.name="StorageVectorsApiError",this.status=s,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Cv extends tm{constructor(n,s){super(n),this.name="StorageVectorsUnknownError",this.originalError=s}}var W0;(function(l){l.InternalError="InternalError",l.S3VectorConflictException="S3VectorConflictException",l.S3VectorNotFoundException="S3VectorNotFoundException",l.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",l.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",l.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(W0||(W0={}));const Ac=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>Ur(async()=>{const{default:i}=await Promise.resolve().then(()=>Un);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)},Rv=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},eg=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Uv=(l,n,s)=>re(void 0,void 0,void 0,function*(){if(l&&typeof l=="object"&&"status"in l&&"ok"in l&&typeof l.status=="number"&&!(s!=null&&s.noResolveJson)){const c=l.status||500,d=l;if(typeof d.json=="function")d.json().then(f=>{const m=(f==null?void 0:f.statusCode)||(f==null?void 0:f.code)||c+"";n(new Zu(eg(f),c,m))}).catch(()=>{const f=c+"",m=d.statusText||`HTTP ${c} error`;n(new Zu(m,c,f))});else{const f=c+"",m=d.statusText||`HTTP ${c} error`;n(new Zu(m,c,f))}}else n(new Cv(eg(l),l))}),Dv=(l,n,s,i)=>{const c={method:l,headers:(n==null?void 0:n.headers)||{}};return i?(Rv(i)?(c.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),c.body=JSON.stringify(i)):c.body=i,Object.assign(Object.assign({},c),s)):c};function Mv(l,n,s,i,c,d){return re(this,void 0,void 0,function*(){return new Promise((f,m)=>{l(s,Dv(n,i,c,d)).then(p=>{if(!p.ok)throw p;if(i!=null&&i.noResolveJson)return p;const y=p.headers.get("content-type");return!y||!y.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>Uv(p,m,i))})})}function qt(l,n,s,i,c){return re(this,void 0,void 0,function*(){return Mv(l,"POST",n,i,c,s)})}class zv{constructor(n,s={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Oc),s),this.fetch=Ac(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return re(this,void 0,void 0,function*(){try{return{data:(yield qt(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}getIndex(n,s){return re(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:s},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}listIndexes(n){return re(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}deleteIndex(n,s){return re(this,void 0,void 0,function*(){try{return{data:(yield qt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:s},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}}class Bv{constructor(n,s={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Oc),s),this.fetch=Ac(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return re(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield qt(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}getVectors(n){return re(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}listVectors(n){return re(this,void 0,void 0,function*(){try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:yield qt(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}queryVectors(n){return re(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}deleteVectors(n){return re(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield qt(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}}class Lv{constructor(n,s={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Oc),s),this.fetch=Ac(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return re(this,void 0,void 0,function*(){try{return{data:(yield qt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}getBucket(n){return re(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}listBuckets(){return re(this,arguments,void 0,function*(n={}){try{return{data:yield qt(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}deleteBucket(n){return re(this,void 0,void 0,function*(){try{return{data:(yield qt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}}class qv extends Lv{constructor(n,s={}){super(n,s.headers||{},s.fetch)}from(n){return new Hv(this.url,this.headers,n,this.fetch)}}class Hv extends zv{constructor(n,s,i,c){super(n,s,c),this.vectorBucketName=i}createIndex(n){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return re(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return re(this,arguments,void 0,function*(s={}){return n.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return re(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return re(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new $v(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class $v extends Bv{constructor(n,s,i,c,d){super(n,s,d),this.vectorBucketName=i,this.indexName=c}putVectors(n){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return re(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return re(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return re(this,arguments,void 0,function*(s={}){return n.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return re(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return re(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Vv extends Ov{constructor(n,s={},i,c){super(n,s,i,c)}from(n){return new Tv(this.url,this.headers,n,this.fetch)}get vectors(){return new qv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Av(this.url+"/iceberg",this.headers,this.fetch)}}const Gv="2.78.0";let As="";typeof Deno<"u"?As="deno":typeof document<"u"?As="web":typeof navigator<"u"&&navigator.product==="ReactNative"?As="react-native":As="node";const Pv={"X-Client-Info":`supabase-js-${As}/${Gv}`},Yv={headers:Pv},Kv={schema:"public"},Xv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Iv={},Qv=l=>{let n;return l?n=l:typeof fetch>"u"?n=$g:n=fetch,(...s)=>n(...s)},Jv=()=>typeof Headers>"u"?Vg:Headers,Zv=(l,n,s)=>{const i=Qv(s),c=Jv();return async(d,f)=>{var m;const p=(m=await n())!==null&&m!==void 0?m:l;let y=new c(f==null?void 0:f.headers);return y.has("apikey")||y.set("apikey",l),y.has("Authorization")||y.set("Authorization",`Bearer ${p}`),i(d,Object.assign(Object.assign({},f),{headers:y}))}};function Fv(l){return l.endsWith("/")?l:l+"/"}function Wv(l,n){var s,i;const{db:c,auth:d,realtime:f,global:m}=l,{db:p,auth:y,realtime:b,global:w}=n,_={db:Object.assign(Object.assign({},p),c),auth:Object.assign(Object.assign({},y),d),realtime:Object.assign(Object.assign({},b),f),storage:{},global:Object.assign(Object.assign(Object.assign({},w),m),{headers:Object.assign(Object.assign({},(s=w==null?void 0:w.headers)!==null&&s!==void 0?s:{}),(i=m==null?void 0:m.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return l.accessToken?_.accessToken=l.accessToken:delete _.accessToken,_}function eb(l){const n=l==null?void 0:l.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Fv(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const am="2.78.0",Nr=30*1e3,fc=3,Fu=fc*Nr,tb="http://localhost:9999",ab="supabase.auth.token",nb={"X-Client-Info":`gotrue-js/${am}`},gc="X-Supabase-Api-Version",nm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sb=600*1e3;class Ms extends Error{constructor(n,s,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=i}}function ie(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class ib extends Ms{constructor(n,s,i){super(n,s,i),this.name="AuthApiError",this.status=s,this.code=i}}function lb(l){return ie(l)&&l.name==="AuthApiError"}class Cn extends Ms{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class sn extends Ms{constructor(n,s,i,c){super(n,i,c),this.name=s,this.status=i}}class ta extends sn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ob(l){return ie(l)&&l.name==="AuthSessionMissingError"}class wr extends sn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ul extends sn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class cl extends sn{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ub(l){return ie(l)&&l.name==="AuthImplicitGrantRedirectError"}class tg extends sn{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mc extends sn{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function Wu(l){return ie(l)&&l.name==="AuthRetryableFetchError"}class ag extends sn{constructor(n,s,i){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=i}}class yc extends sn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const pl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ng=` 	
\r=`.split(""),cb=(()=>{const l=new Array(128);for(let n=0;n<l.length;n+=1)l[n]=-1;for(let n=0;n<ng.length;n+=1)l[ng[n].charCodeAt(0)]=-2;for(let n=0;n<pl.length;n+=1)l[pl[n].charCodeAt(0)]=n;return l})();function rg(l,n,s){if(l!==null)for(n.queue=n.queue<<8|l,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;s(pl[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;s(pl[i]),n.queuedBits-=6}}function rm(l,n,s){const i=cb[l];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function sg(l){const n=[],s=f=>{n.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=f=>{fb(f,i,s)};for(let f=0;f<l.length;f+=1)rm(l.charCodeAt(f),c,d);return n.join("")}function db(l,n){if(l<=127){n(l);return}else if(l<=2047){n(192|l>>6),n(128|l&63);return}else if(l<=65535){n(224|l>>12),n(128|l>>6&63),n(128|l&63);return}else if(l<=1114111){n(240|l>>18),n(128|l>>12&63),n(128|l>>6&63),n(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function hb(l,n){for(let s=0;s<l.length;s+=1){let i=l.charCodeAt(s);if(i>55295&&i<=56319){const c=(i-55296)*1024&65535;i=(l.charCodeAt(s+1)-56320&65535|c)+65536,s+=1}db(i,n)}}function fb(l,n,s){if(n.utf8seq===0){if(l<=127){s(l);return}for(let i=1;i<6;i+=1)if((l>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=l&31;else if(n.utf8seq===3)n.codepoint=l&15;else if(n.utf8seq===4)n.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|l&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function Or(l){const n=[],s={queue:0,queuedBits:0},i=c=>{n.push(c)};for(let c=0;c<l.length;c+=1)rm(l.charCodeAt(c),s,i);return new Uint8Array(n)}function gb(l){const n=[];return hb(l,s=>n.push(s)),new Uint8Array(n)}function Rn(l){const n=[],s={queue:0,queuedBits:0},i=c=>{n.push(c)};return l.forEach(c=>rg(c,s,i)),rg(null,s,i),n.join("")}function mb(l){return Math.round(Date.now()/1e3)+l}function yb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const n=Math.random()*16|0;return(l=="x"?n:n&3|8).toString(16)})}const pt=()=>typeof window<"u"&&typeof document<"u",Nn={tested:!1,writable:!1},sm=()=>{if(!pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Nn.tested)return Nn.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),Nn.tested=!0,Nn.writable=!0}catch{Nn.tested=!0,Nn.writable=!1}return Nn.writable};function pb(l){const n={},s=new URL(l);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((c,d)=>{n[d]=c})}catch{}return s.searchParams.forEach((i,c)=>{n[c]=i}),n}const im=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>Ur(async()=>{const{default:i}=await Promise.resolve().then(()=>Un);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)},vb=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",Tr=async(l,n,s)=>{await l.setItem(n,JSON.stringify(s))},Tn=async(l,n)=>{const s=await l.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},nn=async(l,n)=>{await l.removeItem(n)};class wl{constructor(){this.promise=new wl.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}wl.promiseConstructor=Promise;function ec(l){const n=l.split(".");if(n.length!==3)throw new yc("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!rb.test(n[i]))throw new yc("JWT not in base64url format");return{header:JSON.parse(sg(n[0])),payload:JSON.parse(sg(n[1])),signature:Or(n[2]),raw:{header:n[0],payload:n[1]}}}async function bb(l){return await new Promise(n=>{setTimeout(()=>n(null),l)})}function xb(l,n){return new Promise((i,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await l(d);if(!n(d,null,f)){i(f);return}}catch(f){if(!n(d,f)){c(f);return}}})()})}function wb(l){return("0"+l.toString(16)).substr(-2)}function _b(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=s.length;let c="";for(let d=0;d<56;d++)c+=s.charAt(Math.floor(Math.random()*i));return c}return crypto.getRandomValues(n),Array.from(n,wb).join("")}async function Sb(l){const s=new TextEncoder().encode(l),i=await crypto.subtle.digest("SHA-256",s),c=new Uint8Array(i);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function jb(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const s=await Sb(l);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _r(l,n,s=!1){const i=_b();let c=i;s&&(c+="/PASSWORD_RECOVERY"),await Tr(l,`${n}-code-verifier`,c);const d=await jb(i);return[d,i===d?"plain":"s256"]}const Eb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kb(l){const n=l.headers.get(gc);if(!n||!n.match(Eb))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Nb(l){if(!l)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(l<=n)throw new Error("JWT has expired")}function Tb(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ob=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sr(l){if(!Ob.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tc(){const l={};return new Proxy(l,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ab(l,n){return new Proxy(l,{get:(s,i,c)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const d=i.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,i,c)}return!n.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(s,i,c)}})}function ig(l){return JSON.parse(JSON.stringify(l))}const On=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Cb=[502,503,504];async function lg(l){var n;if(!vb(l))throw new mc(On(l),0);if(Cb.includes(l.status))throw new mc(On(l),l.status);let s;try{s=await l.json()}catch(d){throw new Cn(On(d),d)}let i;const c=kb(l);if(c&&c.getTime()>=nm["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?i=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(i=s.error_code),i){if(i==="weak_password")throw new ag(On(s),l.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new ta}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new ag(On(s),l.status,s.weak_password.reasons);throw new ib(On(s),l.status||500,i)}const Rb=(l,n,s,i)=>{const c={method:l,headers:(n==null?void 0:n.headers)||{}};return l==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),c.body=JSON.stringify(i),Object.assign(Object.assign({},c),s))};async function he(l,n,s,i){var c;const d=Object.assign({},i==null?void 0:i.headers);d[gc]||(d[gc]=nm["2024-01-01"].name),i!=null&&i.jwt&&(d.Authorization=`Bearer ${i.jwt}`);const f=(c=i==null?void 0:i.query)!==null&&c!==void 0?c:{};i!=null&&i.redirectTo&&(f.redirect_to=i.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await Ub(l,n,s+m,{headers:d,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(p):{data:Object.assign({},p),error:null}}async function Ub(l,n,s,i,c,d){const f=Rb(n,i,c,d);let m;try{m=await l(s,Object.assign({},f))}catch(p){throw console.error(p),new mc(On(p),0)}if(m.ok||await lg(m),i!=null&&i.noResolveJson)return m;try{return await m.json()}catch(p){await lg(p)}}function aa(l){var n;let s=null;zb(l)&&(s=Object.assign({},l),l.expires_at||(s.expires_at=mb(l.expires_in)));const i=(n=l.user)!==null&&n!==void 0?n:l;return{data:{session:s,user:i},error:null}}function og(l){const n=aa(l);return!n.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0)&&(n.data.weak_password=l.weak_password),n}function rn(l){var n;return{data:{user:(n=l.user)!==null&&n!==void 0?n:l},error:null}}function Db(l){return{data:l,error:null}}function Mb(l){const{action_link:n,email_otp:s,hashed_token:i,redirect_to:c,verification_type:d}=l,f=Rr(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:s,hashed_token:i,redirect_to:c,verification_type:d},p=Object.assign({},f);return{data:{properties:m,user:p},error:null}}function ug(l){return l}function zb(l){return l.access_token&&l.refresh_token&&l.expires_in}const ac=["global","local","others"];class Bb{constructor({url:n="",headers:s={},fetch:i}){this.url=n,this.headers=s,this.fetch=im(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,s=ac[0]){if(ac.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ac.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,s={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:rn})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:s}=n,i=Rr(n,["options"]),c=Object.assign(Object.assign({},i),s);return"newEmail"in i&&(c.new_email=i==null?void 0:i.newEmail,delete c.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Mb,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ie(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:rn})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,i,c,d,f,m,p;try{const y={nextPage:null,lastPage:0,total:0},b=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(d=(c=n==null?void 0:n.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:ug});if(b.error)throw b.error;const w=await b.json(),_=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,x=(p=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return x.length>0&&(x.forEach(k=>{const N=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(k.split(";")[1].split("=")[1]);y[`${O}Page`]=N}),y.total=parseInt(_)),{data:Object.assign(Object.assign({},w),y),error:null}}catch(y){if(ie(y))return{data:{users:[]},error:y};throw y}}async getUserById(n){Sr(n);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:rn})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){Sr(n);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:rn})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,s=!1){Sr(n);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:rn})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){Sr(n.userId);try{const{data:s,error:i}=await he(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:s,error:i}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _deleteFactor(n){Sr(n.userId),Sr(n.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _listOAuthClients(n){var s,i,c,d,f,m,p;try{const y={nextPage:null,lastPage:0,total:0},b=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(d=(c=n==null?void 0:n.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:ug});if(b.error)throw b.error;const w=await b.json(),_=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,x=(p=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return x.length>0&&(x.forEach(k=>{const N=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(k.split(";")[1].split("=")[1]);y[`${O}Page`]=N}),y.total=parseInt(_)),{data:Object.assign(Object.assign({},w),y),error:null}}catch(y){if(ie(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(n){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _getOAuthClient(n){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _updateOAuthClient(n,s){try{return await he(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:s,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ie(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(n){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(n){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}}function cg(l={}){return{getItem:n=>l[n]||null,setItem:(n,s)=>{l[n]=s},removeItem:n=>{delete l[n]}}}const jr={debug:!!(globalThis&&sm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lm extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Lb extends lm{}async function qb(l,n,s){jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),jr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async c=>{if(c){jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,c.name);try{return await s()}finally{jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,c.name)}}else{if(n===0)throw jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new Lb(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(jr.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Hb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function om(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function $b(l){return parseInt(l,16)}function Vb(l){const n=new TextEncoder().encode(l);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function Gb(l){var n;const{chainId:s,domain:i,expirationTime:c,issuedAt:d=new Date,nonce:f,notBefore:m,requestId:p,resources:y,scheme:b,uri:w,version:_}=l;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((n=l.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const x=om(l.address),k=b?`${b}://${i}`:i,N=l.statement?`${l.statement}
`:"",O=`${k} wants you to sign in with your Ethereum account:
${x}

${N}`;let R=`URI: ${w}
Version: ${_}
Chain ID: ${s}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(c&&(R+=`
Expiration Time: ${c.toISOString()}`),m&&(R+=`
Not Before: ${m.toISOString()}`),p&&(R+=`
Request ID: ${p}`),y){let z=`
Resources:`;for(const L of y){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);z+=`
- ${L}`}R+=z}return`${O}
${R}`}class We extends Error{constructor({message:n,code:s,cause:i,name:c}){var d;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(d=c??(i instanceof Error?i.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=s}}class vl extends We{constructor(n,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:n}),this.name="WebAuthnUnknownError",this.originalError=s}}function Pb({error:l,options:n}){var s,i,c;const{publicKey:d}=n;if(!d)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(n.signal instanceof AbortSignal)return new We({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((s=d.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new We({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(n.mediation==="conditional"&&((i=d.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new We({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((c=d.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new We({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new We({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new We({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return d.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new We({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new We({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const f=window.location.hostname;if(um(f)){if(d.rp.id!==f)return new We({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new We({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function Yb({error:l,options:n}){const{publicKey:s}=n;if(!s)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(n.signal instanceof AbortSignal)return new We({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new We({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const i=window.location.hostname;if(um(i)){if(s.rpId!==i)return new We({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}class Kb{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Xb=new Kb;function Ib(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:n,user:s,excludeCredentials:i}=l,c=Rr(l,["challenge","user","excludeCredentials"]),d=Or(n).buffer,f=Object.assign(Object.assign({},s),{id:Or(s.id).buffer}),m=Object.assign(Object.assign({},c),{challenge:d,user:f});if(i&&i.length>0){m.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const y=i[p];m.excludeCredentials[p]=Object.assign(Object.assign({},y),{id:Or(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return m}function Qb(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:n,allowCredentials:s}=l,i=Rr(l,["challenge","allowCredentials"]),c=Or(n).buffer,d=Object.assign(Object.assign({},i),{challenge:c});if(s&&s.length>0){d.allowCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const m=s[f];d.allowCredentials[f]=Object.assign(Object.assign({},m),{id:Or(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function Jb(l){var n;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const s=l;return{id:l.id,rawId:l.id,response:{attestationObject:Rn(new Uint8Array(l.response.attestationObject)),clientDataJSON:Rn(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Zb(l){var n;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const s=l,i=l.getClientExtensionResults(),c=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:Rn(new Uint8Array(c.authenticatorData)),clientDataJSON:Rn(new Uint8Array(c.clientDataJSON)),signature:Rn(new Uint8Array(c.signature)),userHandle:c.userHandle?Rn(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function um(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function dg(){var l,n;return!!(pt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator==null?void 0:navigator.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Fb(l){try{const n=await navigator.credentials.create(l);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new vl("Browser returned unexpected credential type",n)}:{data:null,error:new vl("Empty credential response",n)}}catch(n){return{data:null,error:Pb({error:n,options:l})}}}async function Wb(l){try{const n=await navigator.credentials.get(l);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new vl("Browser returned unexpected credential type",n)}:{data:null,error:new vl("Empty credential response",n)}}catch(n){return{data:null,error:Yb({error:n,options:l})}}}const ex={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},tx={userVerification:"preferred",hints:["security-key"]};function bl(...l){const n=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),s=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),i={};for(const c of l)if(c)for(const d in c){const f=c[d];if(f!==void 0)if(Array.isArray(f))i[d]=f;else if(s(f))i[d]=f;else if(n(f)){const m=i[d];n(m)?i[d]=bl(m,f):i[d]=bl(f)}else i[d]=f}return i}function ax(l,n){return bl(ex,l,n||{})}function nx(l,n){return bl(tx,l,n||{})}class rx{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:s,friendlyName:i,signal:c},d){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:n,webauthn:s});if(!f)return{data:null,error:m};const p=c??Xb.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:y}=f.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${i}`),y.displayName||(y.displayName=y.name)}switch(f.webauthn.type){case"create":{const y=ax(f.webauthn.credential_options.publicKey,d==null?void 0:d.create),{data:b,error:w}=await Fb({publicKey:y,signal:p});return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const y=nx(f.webauthn.credential_options.publicKey,d==null?void 0:d.request),{data:b,error:w}=await Wb(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:y,signal:p}));return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(f){return ie(f)?{data:null,error:f}:{data:null,error:new Cn("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:s,webauthn:i}){return this.client.mfa.verify({factorId:s,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:c}},d){if(!s)return{data:null,error:new Ms("rpId is required for WebAuthn authentication")};try{if(!dg())return{data:null,error:new Cn("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:n,webauthn:{rpId:s,rpOrigins:i},signal:c},{request:d});if(!f)return{data:null,error:m};const{webauthn:p}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:p.type,rpId:s,rpOrigins:i,credential_response:p.credential_response}})}catch(f){return ie(f)?{data:null,error:f}:{data:null,error:new Cn("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:c},d){if(!s)return{data:null,error:new Ms("rpId is required for WebAuthn registration")};try{if(!dg())return{data:null,error:new Cn("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===n&&_.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:m};const{data:p,error:y}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:s,rpOrigins:i},signal:c},{create:d});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:s,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:y}}catch(f){return ie(f)?{data:null,error:f}:{data:null,error:new Cn("Unexpected error in register",f)}}}}Hb();const sx={url:tb,storageKey:ab,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hg(l,n,s){return await s()}const Er={};class zs{get jwks(){var n,s;return(s=(n=Er[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=Er[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{cachedAt:n})}constructor(n){var s,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zs.nextInstanceID,zs.nextInstanceID+=1,this.instanceID>0&&pt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},sx),n);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Bb({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=im(c.fetch),this.lock=c.lock||hg,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:pt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=qb:this.lock=hg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new rx(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:sm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=cg(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=cg(this.memoryStorage)),pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${am}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=pb(window.location.href);let i="none";if(this._isImplicitGrantCallback(s)?i="implicit":await this._isPKCECallback(s)&&(i="pkce"),pt()&&this.detectSessionInUrl&&i!=="none"){const{data:c,error:d}=await this._getSessionFromURL(s,i);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),ub(d)){const p=(n=d.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ie(s)?{error:s}:{error:new Cn("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,i,c;try{const d=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(s=n==null?void 0:n.options)===null||s===void 0?void 0:s.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(c=n==null?void 0:n.options)===null||c===void 0?void 0:c.captchaToken}},xform:aa}),{data:f,error:m}=d;if(m||!f)return{data:{user:null,session:null},error:m};const p=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(d){if(ie(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(n){var s,i,c;try{let d;if("email"in n){const{email:b,password:w,options:_}=n;let x=null,k=null;this.flowType==="pkce"&&([x,k]=await _r(this.storage,this.storageKey)),d=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:b,password:w,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:x,code_challenge_method:k},xform:aa})}else if("phone"in n){const{phone:b,password:w,options:_}=n;d=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(i=_==null?void 0:_.data)!==null&&i!==void 0?i:{},channel:(c=_==null?void 0:_.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:aa})}else throw new ul("You must provide either an email or phone number and a password");const{data:f,error:m}=d;if(m||!f)return{data:{user:null,session:null},error:m};const p=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(d){if(ie(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(n){try{let s;if("email"in n){const{email:d,password:f,options:m}=n;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:og})}else if("phone"in n){const{phone:d,password:f,options:m}=n;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:og})}else throw new ul("You must provide either an email or phone number and a password");const{data:i,error:c}=s;return c?{data:{user:null,session:null},error:c}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new wr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:c})}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,i,c,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;switch(s){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(n){var s,i,c,d,f,m,p,y,b,w,_;let x,k;if("message"in n)x=n.message,k=n.signature;else{const{chain:N,wallet:O,statement:R,options:z}=n;let L;if(pt())if(typeof O=="object")L=O;else{const ve=window;if("ethereum"in ve&&typeof ve.ethereum=="object"&&"request"in ve.ethereum&&typeof ve.ethereum.request=="function")L=ve.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!(z!=null&&z.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=O}const I=new URL((s=z==null?void 0:z.url)!==null&&s!==void 0?s:window.location.href),G=await L.request({method:"eth_requestAccounts"}).then(ve=>ve).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!G||G.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=om(G[0]);let K=(i=z==null?void 0:z.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!K){const ve=await L.request({method:"eth_chainId"});K=$b(ve)}const de={domain:I.host,address:Y,statement:R,uri:I.href,version:"1",chainId:K,nonce:(c=z==null?void 0:z.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(f=(d=z==null?void 0:z.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=z==null?void 0:z.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=z==null?void 0:z.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(y=z==null?void 0:z.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(b=z==null?void 0:z.signInWithEthereum)===null||b===void 0?void 0:b.resources};x=Gb(de),k=await L.request({method:"personal_sign",params:[Vb(x),Y]})}try{const{data:N,error:O}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:k},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:aa});if(O)throw O;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new wr}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:O})}catch(N){if(ie(N))return{data:{user:null,session:null},error:N};throw N}}async signInWithSolana(n){var s,i,c,d,f,m,p,y,b,w,_,x;let k,N;if("message"in n)k=n.message,N=n.signature;else{const{chain:O,wallet:R,statement:z,options:L}=n;let I;if(pt())if(typeof R=="object")I=R;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))I=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=R}const G=new URL((s=L==null?void 0:L.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in I&&I.signIn){const Y=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L==null?void 0:L.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),z?{statement:z}:null));let K;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")K=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)K=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in K&&"signature"in K&&(typeof K.signedMessage=="string"||K.signedMessage instanceof Uint8Array)&&K.signature instanceof Uint8Array)k=typeof K.signedMessage=="string"?K.signedMessage:new TextDecoder().decode(K.signedMessage),N=K.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${G.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(c=(i=L==null?void 0:L.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=L==null?void 0:L.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((f=L==null?void 0:L.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((m=L==null?void 0:L.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((p=L==null?void 0:L.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((y=L==null?void 0:L.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((w=(b=L==null?void 0:L.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...L.signInWithSolana.resources.map(K=>`- ${K}`)]:[]].join(`
`);const Y=await I.signMessage(new TextEncoder().encode(k),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=Y}}try{const{data:O,error:R}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Rn(N)},!((_=n.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:aa});if(R)throw R;return!O||!O.session||!O.user?{data:{user:null,session:null},error:new wr}:(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),{data:Object.assign({},O),error:R})}catch(O){if(ie(O))return{data:{user:null,session:null},error:O};throw O}}async _exchangeCodeForSession(n){const s=await Tn(this.storage,`${this.storageKey}-code-verifier`),[i,c]=(s??"").split("/");try{const{data:d,error:f}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:aa});if(await nn(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new wr}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:f})}catch(d){if(ie(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(n){try{const{options:s,provider:i,token:c,access_token:d,nonce:f}=n,m=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:c,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:aa}),{data:p,error:y}=m;return y?{data:{user:null,session:null},error:y}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new wr}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:y})}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,i,c,d,f;try{if("email"in n){const{email:m,options:p}=n;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await _r(this.storage,this.storageKey));const{error:w}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},create_user:(i=p==null?void 0:p.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:y,code_challenge_method:b},redirectTo:p==null?void 0:p.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in n){const{phone:m,options:p}=n,{data:y,error:b}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=p==null?void 0:p.data)!==null&&c!==void 0?c:{},create_user:(d=p==null?void 0:p.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(f=p==null?void 0:p.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:b}}throw new ul("You must provide either an email or phone number.")}catch(m){if(ie(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(n){var s,i;try{let c,d;"options"in n&&(c=(s=n.options)===null||s===void 0?void 0:s.redirectTo,d=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:m}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:aa});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,y=f.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(c){if(ie(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(n){var s,i,c;try{let d=null,f=null;return this.flowType==="pkce"&&([d,f]=await _r(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&i!==void 0?i:void 0}),!((c=n==null?void 0:n.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:Db})}catch(d){if(ie(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)throw i;if(!s)throw new ta;const{error:c}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:c}})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:i,type:c,options:d}=n,{error:f}=await he(this.fetch,"POST",s,{headers:this.headers,body:{email:i,type:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in n){const{phone:i,type:c,options:d}=n,{data:f,error:m}=await he(this.fetch,"POST",s,{headers:this.headers,body:{phone:i,type:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m}}throw new ul("You must provide either an email or phone number and a type")}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await i,await s()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=s();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await Tn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<Fu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const f=await Tn(this.userStorage,this.storageKey+"-user");f!=null&&f.user?n.user=f.user:n.user=tc()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=Ab(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:c,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{session:null},error:d}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:rn}):await this._useSession(async s=>{var i,c,d;const{data:f,error:m}=s;if(m)throw m;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ta}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:rn})})}catch(s){if(ie(s))return ob(s)&&(await this._removeSession(),await nn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async i=>{const{data:c,error:d}=i;if(d)throw d;if(!c.session)throw new ta;const f=c.session;let m=null,p=null;this.flowType==="pkce"&&n.email!=null&&([m,p]=await _r(this.storage,this.storageKey));const{data:y,error:b}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:p}),jwt:f.access_token,xform:rn});if(b)throw b;return f.user=y.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new ta;const s=Date.now()/1e3;let i=s,c=!0,d=null;const{payload:f}=ec(n.access_token);if(f.exp&&(i=f.exp,c=i<=s),c){const{data:m,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:p}=await this._getUser(n.access_token);if(p)throw p;d={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:i-s,expires_at:i},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(s){if(ie(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var i;if(!n){const{data:f,error:m}=s;if(m)throw m;n=(i=f.session)!==null&&i!==void 0?i:void 0}if(!(n!=null&&n.refresh_token))throw new ta;const{data:c,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{user:null,session:null},error:d}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!pt())throw new cl("No browser detected.");if(n.error||n.error_description||n.error_code)throw new cl(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new tg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cl("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new tg("No code detected.");const{data:z,error:L}=await this._exchangeCodeForSession(n.code);if(L)throw L;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:c,access_token:d,refresh_token:f,expires_in:m,expires_at:p,token_type:y}=n;if(!d||!m||!f||!y)throw new cl("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(m);let _=b+w;p&&(_=parseInt(p));const x=_-b;x*1e3<=Nr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${w}s`);const k=_-w;b-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,_,b):b-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,_,b);const{data:N,error:O}=await this._getUser(d);if(O)throw O;const R={provider_token:i,provider_refresh_token:c,access_token:d,expires_in:w,expires_at:_,refresh_token:f,token_type:y,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:n.type},error:null}}catch(i){if(ie(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await Tn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var i;const{data:c,error:d}=s;if(d)return{error:d};const f=(i=c.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:m}=await this.admin.signOut(f,n);if(m&&!(lb(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return n!=="others"&&(await this._removeSession(),await nn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=yb(),i={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async s=>{var i,c;try{const{data:{session:d},error:f}=s;if(f)throw f;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,s={}){let i=null,c=null;this.flowType==="pkce"&&([i,c]=await _r(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:c,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(d){if(ie(d))return{data:null,error:d};throw d}}async getUserIdentities(){var n;try{const{data:s,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var s;try{const{data:i,error:c}=await this._useSession(async d=>{var f,m,p,y,b;const{data:w,error:_}=d;if(_)throw _;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",x,{headers:this.headers,jwt:(b=(y=w.session)===null||y===void 0?void 0:y.access_token)!==null&&b!==void 0?b:void 0})});if(c)throw c;return pt()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:n.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(ie(i))return{data:{provider:n.provider,url:null},error:i};throw i}}async linkIdentityIdToken(n){return await this._useSession(async s=>{var i;try{const{error:c,data:{session:d}}=s;if(c)throw c;const{options:f,provider:m,token:p,access_token:y,nonce:b}=n,w=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=d==null?void 0:d.access_token)!==null&&i!==void 0?i:void 0,body:{provider:m,id_token:p,access_token:y,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:aa}),{data:_,error:x}=w;return x?{data:{user:null,session:null},error:x}:!_||!_.session||!_.user?{data:{user:null,session:null},error:new wr}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),{data:_,error:x})}catch(c){if(ie(c))return{data:{user:null,session:null},error:c};throw c}})}async unlinkIdentity(n){try{return await this._useSession(async s=>{var i,c;const{data:d,error:f}=s;if(f)throw f;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(c=(i=d.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const i=Date.now();return await xb(async c=>(c>0&&await bb(200*Math.pow(2,c-1)),this._debug(s,"refreshing attempt",c),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:aa})),(c,d)=>{const f=200*Math.pow(2,c);return d&&Wu(d)&&Date.now()+f-i<Nr})}catch(i){if(this._debug(s,"error",i),ie(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",i),pt()&&!s.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,s;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const c=await Tn(this.storage,this.storageKey);if(c&&this.userStorage){let f=await Tn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await Tr(this.userStorage,this.storageKey+"-user",f)),c.user=(n=f==null?void 0:f.user)!==null&&n!==void 0?n:tc()}else if(c&&!c.user&&!c.user){const f=await Tn(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(c.user=f.user,await nn(this.storage,this.storageKey+"-user"),await Tr(this.storage,this.storageKey,c)):c.user=tc()}if(this._debug(i,"session from storage",c),!this._isValidSession(c)){this._debug(i,"session is not valid"),c!==null&&await this._removeSession();return}const d=((s=c.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Fu;if(this._debug(i,`session has${d?"":" not"} expired with margin of ${Fu}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),Wu(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(c.access_token);!m&&(f!=null&&f.user)?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(i,"error",c),console.error(c);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var s,i;if(!n)throw new ta;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new wl;const{data:d,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!d.session)throw new ta;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={data:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(c,"error",d),ie(d)){const f={data:null,error:d};return Wu(d)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(n,s,i=!0){const c=`#_notifyAllSubscribers(${n})`;this._debug(c,"begin",s,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:s});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,s)}catch(p){d.push(p)}});if(await Promise.all(f),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),i=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&s.user&&await Tr(this.userStorage,this.storageKey+"-user",{user:s.user});const c=Object.assign({},s);delete c.user;const d=ig(c);await Tr(this.storage,this.storageKey,d)}else{const c=ig(s);await Tr(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await nn(this.storage,this.storageKey),await nn(this.storage,this.storageKey+"-code-verifier"),await nn(this.storage,this.storageKey+"-user"),this.userStorage&&await nn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Nr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:i}}=s;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((i.expires_at*1e3-n)/Nr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Nr}ms, refresh threshold is ${fc} ticks`),c<=fc&&await this._callRefreshToken(i.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof lm)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,i){const c=[`provider=${encodeURIComponent(s)}`];if(i!=null&&i.redirectTo&&c.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&c.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[d,f]=await _r(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(m.toString())}if(i!=null&&i.queryParams){const d=new URLSearchParams(i.queryParams);c.push(d.toString())}return i!=null&&i.skipBrowserRedirect&&c.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${c.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var i;const{data:c,error:d}=s;return d?{data:null,error:d}:await he(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var i,c;const{data:d,error:f}=s;if(f)return{data:null,error:f};const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:p,error:y}=await he(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=d==null?void 0:d.session)===null||i===void 0?void 0:i.access_token});return y?{data:null,error:y}:(n.factorType==="totp"&&p.type==="totp"&&(!((c=p==null?void 0:p.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var i;const{data:c,error:d}=s;if(d)return{data:null,error:d};const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Jb(n.webauthn.credential_response):Zb(n.webauthn.credential_response)})}:{code:n.code}),{data:m,error:p}=await he(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),{data:m,error:p})})}catch(s){if(ie(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var i;const{data:c,error:d}=s;if(d)return{data:null,error:d};const f=await he(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Ib(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Qb(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(ie(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:i}=await this._challenge({factorId:n.factorId});return i?{data:null,error:i}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){var n;const{data:{user:s},error:i}=await this.getUser();if(i)return{data:null,error:i};const c={all:[],phone:[],totp:[],webauthn:[]};for(const d of(n=s==null?void 0:s.factors)!==null&&n!==void 0?n:[])c.all.push(d),d.status==="verified"&&c[d.factor_type].push(d);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var n,s;const{data:{session:i},error:c}=await this.getSession();if(c)return{data:null,error:c};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=ec(i.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((s=(n=i.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(m="aal2");const y=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async s=>{const{data:{session:i},error:c}=s;return c?{data:null,error:c}:i?await he(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:d=>({data:d,error:null})}):{data:null,error:new ta}})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _approveAuthorization(n,s){try{return await this._useSession(async i=>{const{data:{session:c},error:d}=i;if(d)return{data:null,error:d};if(!c)return{data:null,error:new ta};const f=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&pt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(i){if(ie(i))return{data:null,error:i};throw i}}async _denyAuthorization(n,s){try{return await this._useSession(async i=>{const{data:{session:c},error:d}=i;if(d)return{data:null,error:d};if(!c)return{data:null,error:new ta};const f=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&pt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(i){if(ie(i))return{data:null,error:i};throw i}}async fetchJwk(n,s={keys:[]}){let i=s.keys.find(m=>m.kid===n);if(i)return i;const c=Date.now();if(i=this.jwks.keys.find(m=>m.kid===n),i&&this.jwks_cached_at+sb>c)return i;const{data:d,error:f}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,i=d.keys.find(m=>m.kid===n),!i)?null:i}async getClaims(n,s={}){try{let i=n;if(!i){const{data:x,error:k}=await this.getSession();if(k||!x.session)return{data:null,error:k};i=x.session.access_token}const{header:c,payload:d,signature:f,raw:{header:m,payload:p}}=ec(i);s!=null&&s.allowExpired||Nb(d.exp);const y=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!y){const{error:x}=await this.getUser(i);if(x)throw x;return{data:{claims:d,header:c,signature:f},error:null}}const b=Tb(c.alg),w=await crypto.subtle.importKey("jwk",y,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,f,gb(`${m}.${p}`)))throw new yc("Invalid JWT signature");return{data:{claims:d,header:c,signature:f},error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}}}zs.nextInstanceID=0;const ix=zs;class lx extends ix{constructor(n){super(n)}}class ox{constructor(n,s,i){var c,d,f;this.supabaseUrl=n,this.supabaseKey=s;const m=eb(n);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,y={db:Kv,realtime:Iv,auth:Object.assign(Object.assign({},Xv),{storageKey:p}),global:Yv},b=Wv(i??{},y);this.storageKey=(c=b.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(d=b.global.headers)!==null&&d!==void 0?d:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(w,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=b.auth)!==null&&f!==void 0?f:{},this.headers,b.global.fetch),this.fetch=Zv(s,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new tv(new URL("rest/v1",m).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new Vv(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new Kp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,s,i)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n,s;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:i,storage:c,userStorage:d,storageKey:f,flowType:m,lock:p,debug:y},b,w){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lx({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),b),storageKey:f,autoRefreshToken:n,persistSession:s,detectSessionInUrl:i,storage:c,userStorage:d,flowType:m,lock:p,debug:y,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new vv(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,i)=>{this._handleTokenChanged(s,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(n,s,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ux=(l,n,s)=>new ox(l,n,s);function cx(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const n=l.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}cx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const dx="https://kxfsxqoyhoklqgwvzhpd.supabase.co",hx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt4ZnN4cW95aG9rbHFnd3Z6aHBkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4ODcxNjcsImV4cCI6MjA3NzQ2MzE2N30.mW3MNPAlWXFvAgu1RL4BW_1OWVjCzJat5OddK4GgW64",Re=ux(dx,hx),Zt=Re.auth,fx=async l=>{const{data:{user:n}}=await Zt.getUser();if(!n)throw new Error("User not authenticated for adding student.");const{visitors:s,...i}=l,c={...i,user_id:n.id},{data:d,error:f}=await Re.from("students").insert([c]).select().single();if(f)throw f;return d},hl=async(l,n)=>{const{error:s}=await Re.from("students").update(n).eq("id",l);if(s)throw s},gx=async l=>{const{error:n}=await Re.from("students").delete().eq("id",l);if(n)throw n},mx=async l=>{const{error:n}=await Re.from("students").delete().in("id",l);if(n)throw n},yx=async l=>{const{data:{user:n}}=await Zt.getUser();if(!n)throw new Error("User not authenticated for adding batch.");const s={...l,user_id:n.id},{error:i}=await Re.from("batches").insert([s]);if(i)throw i},fl=async(l,n)=>{const{error:s}=await Re.from("batches").update(n).eq("id",l);if(s)throw s},px=async l=>{if(l.studentIds&&l.studentIds.length>0){await pc(l.studentIds);const{error:s}=await Re.from("students").delete().in("id",l.studentIds);if(s)throw s}const{error:n}=await Re.from("batches").delete().eq("id",l.id);if(n)throw n},fg=async l=>{const{data:{user:n}}=await Zt.getUser();if(!n)throw new Error("User not authenticated for adding transaction.");const s={...l,user_id:n.id},{error:i}=await Re.from("transactions").insert([s]);if(i)throw i},vx=async l=>{if(l.length===0)return;const{data:{user:n}}=await Zt.getUser();if(!n)throw new Error("User not authenticated for adding transactions.");const s=l.map(c=>({...c,user_id:n.id})),{error:i}=await Re.from("transactions").insert(s);if(i)throw i},bx=async()=>{const{data:{user:l}}=await Zt.getUser();if(!l)throw new Error("User not authenticated for deleting transactions.");const{error:n}=await Re.from("transactions").delete().eq("user_id",l.id);if(n)throw n},xx=async l=>{const{error:n}=await Re.rpc("delete_transaction_and_update_student",{t_id:l});if(n)throw console.error("RPC delete_transaction_and_update_student failed:",n),new Error(n.message)},wx=async l=>{const{error:n}=await Re.from("transactions").delete().eq("studentId",l);if(n)throw n},_x=async l=>{if(l.length===0)return;const{error:n}=await Re.from("transactions").delete().in("studentId",l);if(n)throw n},Sx=async l=>{if(l.length===0)return[];const{data:{user:n}}=await Zt.getUser();if(!n)throw new Error("User not authenticated for adding students.");const s=l.map(d=>({...d,user_id:n.id})),{data:i,error:c}=await Re.from("students").insert(s).select();if(c)throw c;return i||[]},jx=async l=>{if(l.length===0)return;const{data:{user:n}}=await Zt.getUser();if(!n)throw new Error("User not authenticated for adding batches.");const s=l.map(c=>({...c,user_id:n.id})),{error:i}=await Re.from("batches").insert(s);if(i)throw i},Ex=async l=>{const{data:n,error:s}=await Re.from("guardians").select("*").eq("user_id",l);if(s)throw s;return n},cm=async l=>{if(l.length===0)return[];const{data:{user:n}}=await Zt.getUser();if(!n)throw new Error("User not authenticated.");const s=l.map(d=>({...d,user_id:n.id})),{data:i,error:c}=await Re.from("guardians").insert(s).select();if(c)throw c;return i},kx=async l=>{if(l.length===0)return[];const{error:n}=await Re.from("guardians").upsert(l);if(n)throw n},Nx=async l=>{if(l.length===0)return[];const{error:n}=await Re.from("guardians").delete().in("id",l);if(n)throw n},pc=async l=>{if(l.length===0)return;const{error:n}=await Re.from("guardians").delete().in("student_id",l);if(n)throw n},Tx=()=>{const[l,n]=X.useState(!0),[s,i]=X.useState(""),[c,d]=X.useState(""),[f,m]=X.useState(""),[p,y]=X.useState(!1),b=async w=>{w.preventDefault(),m(""),y(!0);try{let _;if(l?_=await Zt.signInWithPassword({email:s,password:c}):_=await Zt.signUp({email:s,password:c}),_.error)throw _.error}catch(_){m(_.message)}finally{y(!1)}};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:h.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:"Vidya-Gram"}),h.jsx("h2",{className:"mt-2 text-xl font-semibold text-gray-800 dark:text-white",children:l?"Login to your account":"Create a new account"})]}),h.jsxs("form",{className:"mt-6 space-y-6",onSubmit:b,children:[h.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[h.jsx("div",{children:h.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Email address",value:s,onChange:w=>i(w.target.value)})}),h.jsx("div",{children:h.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Password",value:c,onChange:w=>d(w.target.value)})})]}),f&&h.jsx("p",{className:"text-sm text-red-500",children:f}),h.jsx("div",{children:h.jsx("button",{type:"submit",disabled:p,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:p?"Processing...":l?"Sign in":"Sign up"})})]}),h.jsxs("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400",children:[l?"Don't have an account?":"Already have an account?",h.jsx("button",{onClick:()=>n(!l),className:"ml-1 font-medium text-indigo-600 hover:text-indigo-500",children:l?"Sign up":"Sign in"})]})]})})};var ut=(l=>(l.Dashboard="DASHBOARD",l.Students="STUDENTS",l.Batches="BATCHES",l.Wardens="WARDENS",l.Payments="PAYMENTS",l))(ut||{});const Ns=({icon:l,text:n,active:s,onClick:i})=>h.jsxs("button",{onClick:i,className:`flex items-center w-full px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ${s?"bg-indigo-600 text-white":"text-gray-500 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:[l,h.jsx("span",{className:"ml-3",children:n})]}),Ox=({currentView:l,setView:n,isOpen:s,setIsOpen:i})=>{const c=d=>{n(d),s&&i(!1)};return h.jsxs("div",{className:`fixed inset-y-0 left-0 z-30 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform ${s?"translate-x-0":"-translate-x-full"} md:relative md:translate-x-0 transition-transform duration-300 ease-in-out flex flex-col`,children:[h.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-gray-200 dark:border-gray-700 px-4",children:[h.jsx("svg",{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),h.jsx("h1",{className:"ml-2 text-xl font-bold text-indigo-600 dark:text-indigo-400",children:"Vidya-Gram"})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:h.jsxs("nav",{className:"flex flex-col space-y-2",children:[h.jsx(Ns,{href:"#",text:"Dashboard",active:l===ut.Dashboard,onClick:()=>c(ut.Dashboard),icon:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),h.jsx(Ns,{href:"#",text:"Students",active:l===ut.Students,onClick:()=>c(ut.Students),icon:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A5.975 5.975 0 0112 13a5.975 5.975 0 013 5.197M15 21a6 6 0 00-9-5.197"})})}),h.jsx(Ns,{href:"#",text:"Batches",active:l===ut.Batches,onClick:()=>c(ut.Batches),icon:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),h.jsx(Ns,{href:"#",text:"Wardens",active:l===ut.Wardens,onClick:()=>c(ut.Wardens),icon:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 20.944L12 22l9-1.056v-5.556c0-1.076-.232-2.11-.658-3.084z"})})}),h.jsx(Ns,{href:"#",text:"Payments",active:l===ut.Payments,onClick:()=>c(ut.Payments),icon:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 8h6m-5 4h.01M4 16V6a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2z"})})})]})})]})},Ax=({user:l,onAddStudent:n,onBulkUpload:s,theme:i,toggleTheme:c,onToggleSidebar:d})=>{const[f,m]=X.useState(!1),p=()=>{Zt.signOut()},y=()=>h.jsxs("button",{onClick:c,className:"p-2 rounded-full text-gray-500 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 dark:focus:ring-offset-gray-800 focus:ring-indigo-500",children:[h.jsx("span",{className:"sr-only",children:"Toggle theme"}),i==="dark"?h.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):h.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})]});return h.jsxs("header",{className:"flex items-center justify-between h-16 px-4 sm:px-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[h.jsx("button",{onClick:d,className:"md:hidden p-2 -ml-2 rounded-md text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700","aria-label":"Open sidebar",children:h.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),h.jsx("div",{className:"hidden md:block flex-1"}),h.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[h.jsx(y,{}),h.jsxs("button",{onClick:s,className:"hidden sm:inline-flex items-center px-3 py-2 text-sm font-medium text-center text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 dark:focus:ring-gray-600",children:[h.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Bulk Upload"]}),h.jsxs("button",{onClick:n,className:"inline-flex items-center justify-center h-10 w-10 md:w-auto md:px-3 md:py-2 text-sm font-medium text-center text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 focus:ring-4 focus:outline-none focus:ring-indigo-300 dark:bg-indigo-500 dark:hover:bg-indigo-600 dark:focus:ring-indigo-800",children:[h.jsx("svg",{className:"w-4 h-4 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),h.jsx("span",{className:"hidden md:inline",children:"Add Student"})]}),h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>m(!f),className:"flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 dark:focus:ring-offset-gray-800 focus:ring-indigo-500",children:[h.jsx("span",{className:"sr-only",children:"Open user menu"}),h.jsx("img",{className:"h-8 w-8 rounded-full",src:`https://ui-avatars.com/api/?name=${l.email}&background=random`,alt:"User avatar"})]}),f&&h.jsxs("div",{className:"absolute right-0 w-48 mt-2 origin-top-right bg-white rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5 dark:bg-gray-700",children:[h.jsxs("div",{className:"px-4 py-3",children:[h.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:"Signed in as"}),h.jsx("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-gray-300",children:l.email})]}),h.jsx("div",{className:"border-t border-gray-100 dark:border-gray-600"}),h.jsx("button",{onClick:p,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600",children:"Sign out"})]})]})]})]})},Bs=({isOpen:l,onClose:n,onConfirm:s,title:i,message:c,confirmButtonText:d="Confirm",confirmButtonVariant:f="danger",children:m})=>{if(!l)return null;const p={danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500",primary:"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500"};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:h.jsxs("div",{className:"p-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:i}),h.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:c}),m,h.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[h.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500",children:"Cancel"}),h.jsx("button",{onClick:s,className:`px-4 py-2 text-sm font-medium text-white border border-transparent rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${p[f]}`,children:d})]})]})})})},gl=l=>(l.payments||[]).reduce((n,s)=>n+s.amount,0),nc=l=>l["Full Paid"]?0:l["Total Fees"]-gl(l),Cx=l=>{let n=l.replace(/\D/g,"");return n.length===10&&(n=`91${n}`),`https://wa.me/${n}`},Rx=()=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})}),Ux=()=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 4.315 1.731 6.086l.06.094-1.105 4.023 4.13-1.082.096.056z"})}),Ts=({label:l,sortKey:n,sortConfig:s,requestSort:i,className:c})=>{const f=(s==null?void 0:s.key)===n?s.direction==="asc"?"":"":"";return h.jsx("th",{scope:"col",className:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer ${c}`,onClick:()=>i(n),children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{children:l}),h.jsx("span",{className:"ml-1 w-4",children:f})]})})},Dx=({students:l,onClose:n})=>{const s=["Roll No","Name","Father","Mother","Phone","Emergency Number","Phone 2","Gender","Batch","Room Number","Address","Total Fees","Paid","Dues","Full Paid","Security Money Paid","Mode","Remarks","imageUrl"],[i,c]=X.useState(new Set(s)),d=m=>{c(p=>{const y=new Set(p);return y.has(m)?y.delete(m):y.add(m),y})},f=()=>{const m=l.map(b=>{const w=(b.payments||[]).reduce((k,N)=>k+N.amount,0),_=b["Full Paid"]?0:b["Total Fees"]-w,x={};return i.forEach(k=>{k==="Paid"?x[k]=w:k==="Dues"?x[k]=_:x[k]=b[k]}),x}),p=XLSX.utils.json_to_sheet(m),y=XLSX.utils.book_new();XLSX.utils.book_append_sheet(y,p,"Students"),XLSX.writeFile(y,"student_data.xlsx"),n()};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg",children:h.jsxs("div",{className:"p-6",children:[h.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Export Student Data"}),h.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Select the columns you want to include in the export."}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 my-4 max-h-64 overflow-y-auto p-2 border rounded-md dark:border-gray-700",children:s.map(m=>h.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[h.jsx("input",{type:"checkbox",checked:i.has(m),onChange:()=>d(m),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),h.jsx("span",{children:m})]},m))}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t dark:border-gray-700",children:[h.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500",children:"Cancel"}),h.jsx("button",{onClick:f,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700",children:"Export as XLSX"})]})]})})})},Mx=({students:l,onEditStudent:n,onDeleteStudent:s,onDeleteSelected:i,onCreateBatch:c,onRecordPayment:d,onViewStudent:f,onManageVisitors:m,onToggleSecurityMoneyPaid:p})=>{const[y,b]=X.useState(""),[w,_]=X.useState(new Set),[x,k]=X.useState(!1),[N,O]=X.useState(!1),[R,z]=X.useState(""),[L,I]=X.useState(1),[G,Y]=X.useState(10),[K,de]=X.useState({key:"Name",direction:"asc"});X.useEffect(()=>{I(1)},[l.length,y,G,K]);const ve=q=>{let W="asc";K&&K.key===q&&K.direction==="asc"&&(W="desc"),de({key:q,direction:W})},He=X.useMemo(()=>{let q=[...l];const W=y.toLowerCase();return W&&(q=q.filter(ae=>ae.Name.toLowerCase().includes(W)||(ae.Father||"").toLowerCase().includes(W)||String(ae["Roll No"]).toLowerCase().includes(W)||ae.Phone.toLowerCase().includes(W)||(ae["Room Number"]||"").toLowerCase().includes(W))),K&&q.sort((ae,j)=>{let D=0;switch(K.key){case"Paid":D=gl(ae)-gl(j);break;case"Dues":D=nc(ae)-nc(j);break;case"Name":D=ae.Name.localeCompare(j.Name);break;case"Room Number":D=(ae["Room Number"]||"").localeCompare(j["Room Number"]||"",void 0,{numeric:!0,sensitivity:"base"});break;case"Roll No":D=String(ae["Roll No"]).localeCompare(String(j["Roll No"]),void 0,{numeric:!0,sensitivity:"base"});break;case"createdAt":D=new Date(ae.createdAt).getTime()-new Date(j.createdAt).getTime();break;default:ae[K.key]<j[K.key]&&(D=-1),ae[K.key]>j[K.key]&&(D=1)}return K.direction==="asc"?D:-D}),q},[l,y,K]),Ye=X.useMemo(()=>{if(G===0)return He;const q=(L-1)*G;return He.slice(q,q+G)},[He,L,G]),Z=q=>{_(W=>{const ae=new Set(W);return ae.has(q)?ae.delete(q):ae.add(q),ae})},F=q=>{q.target.checked?_(new Set(He.map(W=>W.id))):_(new Set)},ye=()=>{i(Array.from(w)),_(new Set),k(!1)},oe=()=>{R.trim()&&w.size>0?(c(R.trim().toUpperCase(),Array.from(w)),z(""),_(new Set)):alert("Please enter a batch name and select at least one student.")},M=q=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(q),P=G===0?1:Math.ceil(He.length/G);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-lg",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[h.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Student List"}),h.jsx("input",{type:"text",placeholder:"Search by name, father, roll no...",value:y,onChange:q=>b(q.target.value),className:"w-full sm:w-64 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700"})]}),w.size>0&&h.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 p-4 rounded-md mb-4 flex flex-col sm:flex-row items-center gap-4 flex-wrap",children:[h.jsxs("span",{className:"text-sm font-medium",children:[w.size," student(s) selected"]}),h.jsxs("div",{className:"flex-grow flex flex-col sm:flex-row items-center gap-2",children:[h.jsx("input",{type:"text",placeholder:"NEW BATCH NAME",value:R,onChange:q=>z(q.target.value.toUpperCase()),className:"px-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md text-sm w-full sm:w-auto dark:bg-gray-700"}),h.jsx("button",{onClick:oe,className:"w-full sm:w-auto px-3 py-1.5 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Create Batch"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>k(!0),className:"px-3 py-1.5 text-sm font-medium text-red-600 bg-red-100 dark:bg-red-900/50 dark:text-red-400 rounded-md hover:bg-red-200",children:"Delete"}),h.jsx("button",{onClick:()=>O(!0),className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-200 dark:bg-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-300",children:"Export"})]})]}),h.jsxs("div",{className:"overflow-x-auto",children:[h.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 relative",children:[h.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",className:"p-4",children:h.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500",onChange:F,checked:w.size>0&&w.size===He.length&&He.length>0})}),h.jsx(Ts,{label:"Name",sortKey:"Name",sortConfig:K,requestSort:ve}),h.jsx(Ts,{label:"Roll No",sortKey:"Roll No",sortConfig:K,requestSort:ve,className:"hidden sm:table-cell"}),h.jsx(Ts,{label:"Room No.",sortKey:"Room Number",sortConfig:K,requestSort:ve,className:"hidden md:table-cell"}),h.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden sm:table-cell",children:"Phone"}),h.jsx(Ts,{label:"Paid",sortKey:"Paid",sortConfig:K,requestSort:ve}),h.jsx(Ts,{label:"Dues",sortKey:"Dues",sortConfig:K,requestSort:ve}),h.jsx("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Security"}),h.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Ye.map(q=>{const W=gl(q),ae=nc(q),j=q["Full Paid"]||ae<=0;return h.jsxs("tr",{onClick:()=>f(q),className:`cursor-pointer ${w.has(q.id)?"bg-indigo-50 dark:bg-indigo-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[h.jsx("td",{className:"p-4",onClick:D=>D.stopPropagation(),children:h.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500",checked:w.has(q.id),onChange:()=>Z(q.id)})}),h.jsx("td",{className:"px-4 py-4",children:h.jsxs("div",{className:"flex items-center max-w-[200px] sm:max-w-[300px]",children:[h.jsx("img",{className:"h-10 w-10 rounded-full object-cover flex-shrink-0",src:q.imageUrl||`https://ui-avatars.com/api/?name=${q.Name}&background=random`,alt:q.Name}),h.jsxs("div",{className:"ml-4 min-w-0 flex-1",children:[h.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white break-words leading-tight",children:q.Name}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 break-words leading-tight mt-0.5",children:q.Father||"N/A"})]})]})}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden sm:table-cell",children:q["Roll No"]}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden md:table-cell",children:q["Room Number"]||"N/A"}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden sm:table-cell",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{children:q.Phone}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("a",{href:`tel:${q.Phone}`,onClick:D=>D.stopPropagation(),className:"p-1.5 rounded-full text-green-600 bg-green-100 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900",title:"Call",children:h.jsx(Rx,{})}),h.jsx("a",{href:Cx(q.Phone),target:"_blank",rel:"noopener noreferrer",onClick:D=>D.stopPropagation(),className:"p-1.5 rounded-full text-green-600 bg-green-100 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900",title:"WhatsApp",children:h.jsx(Ux,{})})]})]})}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:M(W)}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("div",{className:`font-semibold ${j?"text-green-600":"text-red-600"}`,children:j?"FULL PAID":M(ae)}),!j&&h.jsx("button",{onClick:D=>{D.stopPropagation(),d(q)},className:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900",children:"Pay"})]})}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center",onClick:D=>D.stopPropagation(),children:h.jsx("input",{type:"checkbox",className:"h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 cursor-pointer",checked:!!q["Security Money Paid"],onChange:D=>p(q.id,D.target.checked),title:q["Security Money Paid"]?"Security Money Paid":"Mark as Paid"})}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:D=>D.stopPropagation(),children:h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[h.jsx("button",{onClick:D=>{D.stopPropagation(),m(q)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-200 mr-2 p-1 hover:bg-indigo-50 dark:hover:bg-indigo-900/50 rounded-full transition-colors",title:"Manage Visitors",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),h.jsx("button",{onClick:D=>{D.stopPropagation(),n(q)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-200 p-1 hover:bg-indigo-50 dark:hover:bg-indigo-900/50 rounded transition-colors",children:"Edit"}),h.jsx("button",{onClick:D=>{D.stopPropagation(),s(q)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-200 p-1 hover:bg-red-50 dark:hover:bg-red-900/50 rounded transition-colors",children:"Delete"})]})})]},q.id)})})]}),He.length===0&&h.jsx("p",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No students found."})]}),h.jsxs("div",{className:"flex items-center justify-between pt-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx("label",{htmlFor:"rowsPerPage",className:"text-gray-600 dark:text-gray-400",children:"Rows:"}),h.jsxs("select",{id:"rowsPerPage",value:G,onChange:q=>Y(Number(q.target.value)),className:"bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md p-1.5 focus:ring-indigo-500",children:[h.jsx("option",{value:10,children:"10"}),h.jsx("option",{value:20,children:"20"}),h.jsx("option",{value:50,children:"50"}),h.jsx("option",{value:0,children:"All"})]})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[h.jsxs("span",{children:["Page ",L," of ",P]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:()=>I(q=>Math.max(1,q-1)),disabled:L===1,className:"p-1 rounded-md disabled:opacity-50 hover:bg-gray-100 dark:hover:bg-gray-700",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),h.jsx("button",{onClick:()=>I(q=>Math.min(P,q+1)),disabled:L===P,className:"p-1 rounded-md disabled:opacity-50 hover:bg-gray-100 dark:hover:bg-gray-700",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]})]})]})]}),x&&h.jsx(Bs,{isOpen:x,onClose:()=>k(!1),onConfirm:ye,title:"Delete Selected Students",message:`Are you sure you want to delete ${w.size} selected students? This action cannot be undone.`,confirmButtonText:"Confirm",confirmButtonVariant:"danger"}),N&&w.size>0&&h.jsx(Dx,{students:l.filter(q=>w.has(q.id)),onClose:()=>O(!1)})]})},gg={"Roll No":"",Name:"",Father:"",Mother:"",Phone:"","Emergency Number":"","Phone 2":"",Gender:"Male",Batch:"","Room Number":"",Address:"","Total Fees":0,Remarks:"","Full Paid":!1,"Security Money Paid":!1,Mode:"One Time",imageUrl:"",imagePath:""},zx=({isOpen:l,onClose:n,onSubmit:s,batches:i,existingStudents:c})=>{const[d,f]=X.useState(gg),[m,p]=X.useState(null),[y,b]=X.useState(null),[w,_]=X.useState(""),[x,k]=X.useState(!1),[N,O]=X.useState("");X.useEffect(()=>{l&&(f(gg),b(null),p(null),_(""),k(!1),O(""))},[l]);const R=I=>{const{name:G,value:Y,type:K}=I.target;if(K==="checkbox"){f(de=>({...de,[G]:I.target.checked}));return}f(G==="Total Fees"?de=>({...de,[G]:Number(Y)||0}):de=>({...de,[G]:Y.toUpperCase()})),G==="Roll No"&&O("")},z=async I=>{var Y;const G=(Y=I.target.files)==null?void 0:Y[0];if(G)try{const K=await imageCompression(G,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0});p(K),b(URL.createObjectURL(K))}catch(K){console.error("Image compression failed:",K),p(G),b(URL.createObjectURL(G))}},L=async I=>{I.preventDefault(),O("");const G=d["Roll No"].toString().trim();if(c.some(K=>K["Roll No"].toString().trim().toUpperCase()===G)){O(`Roll Number "${d["Roll No"]}" already exists. Please use a unique Roll Number.`);return}k(!0),await s(d,m,Number(w)||0),k(!1)};return l?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-start sticky top-0 bg-white dark:bg-gray-800 z-10 pb-4 border-b dark:border-gray-700",children:[h.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add New Student"}),h.jsx("button",{onClick:n,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white",children:h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),h.jsxs("form",{onSubmit:L,className:"mt-4 space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[h.jsx("img",{src:y||`https://ui-avatars.com/api/?name=${d.Name||"S"}&background=random`,alt:"Profile Preview",className:"w-24 h-24 rounded-full object-cover shadow-md"}),h.jsxs("div",{children:[h.jsxs("label",{htmlFor:"photo-upload",className:"cursor-pointer px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 transition-colors",children:[h.jsx("span",{children:"Upload Photo"}),h.jsx("input",{id:"photo-upload",name:"photo-upload",type:"file",className:"sr-only",accept:"image/*",onChange:z})]}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"PNG or JPG. Max 1MB."})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx("input",{type:"text",name:"Name",value:d.Name,onChange:R,placeholder:"FULL NAME *",required:!0,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsxs("div",{children:[h.jsx("input",{type:"text",name:"Roll No",value:d["Roll No"],onChange:R,placeholder:"ROLL NO. *",required:!0,className:`w-full px-3 py-2 border rounded-md dark:bg-gray-700 focus:ring-indigo-500 focus:border-indigo-500 ${N?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`}),N&&h.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:N})]}),h.jsx("input",{type:"text",name:"Father",value:d.Father,onChange:R,placeholder:"FATHER'S NAME",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsx("input",{type:"text",name:"Mother",value:d.Mother,onChange:R,placeholder:"MOTHER'S NAME",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsx("input",{type:"tel",name:"Phone",value:d.Phone,onChange:R,placeholder:"PRIMARY PHONE *",required:!0,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsx("input",{type:"tel",name:"Phone 2",value:d["Phone 2"],onChange:R,placeholder:"PHONE 2 (OPTIONAL)",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsx("input",{type:"tel",name:"Emergency Number",value:d["Emergency Number"],onChange:R,placeholder:"EMERGENCY NUMBER (OPTIONAL)",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsxs("select",{name:"Gender",value:d.Gender,onChange:R,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500",children:[h.jsx("option",{children:"Male"}),h.jsx("option",{children:"Female"}),h.jsx("option",{children:"Other"})]}),h.jsxs("div",{children:[h.jsx("input",{list:"batch-options-add",type:"text",name:"Batch",value:d.Batch,onChange:R,placeholder:"BATCH (SELECT OR TYPE NEW) *",required:!0,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsx("datalist",{id:"batch-options-add",children:i.map(I=>h.jsx("option",{value:I.name},I.id))})]}),h.jsx("input",{type:"text",name:"Room Number",value:d["Room Number"],onChange:R,placeholder:"ROOM NUMBER (OPTIONAL)",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsxs("select",{name:"Mode",value:d.Mode,onChange:R,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500 md:col-span-2",children:[h.jsx("option",{children:"One Time Payment"}),h.jsx("option",{children:"Monthly Payment"})]})]}),h.jsx("textarea",{name:"Address",value:d.Address,onChange:R,placeholder:"ADDRESS",rows:2,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-md border border-indigo-100 dark:border-indigo-800",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total Amount *"}),h.jsx("input",{type:"number",name:"Total Fees",value:d["Total Fees"]||"",onChange:R,placeholder:"Total Amount",required:!0,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Initial Payment"}),h.jsx("input",{type:"number",value:w,onChange:I=>_(I.target.value),placeholder:"Initial Payment",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),h.jsx("textarea",{name:"Remarks",value:d.Remarks,onChange:R,placeholder:"REMARKS (OPTIONAL)",rows:2,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/30 rounded-md",children:[h.jsx("input",{id:"full-paid",type:"checkbox",name:"Full Paid",checked:!!d["Full Paid"],onChange:R,className:"mt-1 h-4 w-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"full-paid",className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Mark as Full Paid"}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Overrides calculated status. Use for discounts or scholarships."})]})]}),h.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/30 rounded-md",children:[h.jsx("input",{id:"security-money-paid",type:"checkbox",name:"Security Money Paid",checked:!!d["Security Money Paid"],onChange:R,className:"mt-1 h-4 w-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"security-money-paid",className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Security Money Paid"}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Check if the student has submitted the security deposit."})]})]})]}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t dark:border-gray-700 mt-6 sticky bottom-0 bg-white dark:bg-gray-800 pb-2",children:[h.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 transition-colors",children:x?"Saving...":"Add Student"})]})]})]})})}):null},Bx=({student:l,onClose:n,onSave:s,batches:i})=>{const[c,d]=X.useState(l),[f,m]=X.useState(null),[p,y]=X.useState(l.imageUrl||null),[b,w]=X.useState(!1),[_,x]=X.useState(!1);X.useEffect(()=>{const G=JSON.parse(JSON.stringify(l));d(G),y(l.imageUrl||null),m(null),w(!1);const Y=i.some(K=>K.name.toLowerCase()===(l.Batch||"").toLowerCase());x(!!l.Batch&&!Y)},[l,i]);const k=G=>{const{name:Y,value:K,type:de}=G.target;if(de==="checkbox"){d(ve=>({...ve,[Y]:G.target.checked}));return}d(Y==="Total Fees"?ve=>({...ve,[Y]:Number(K)||0}):ve=>({...ve,[Y]:K.toUpperCase()}))},N=G=>{G.target.value==="NEW_BATCH_OPTION"?(x(!0),d(K=>({...K,Batch:""}))):(x(!1),k(G))},O=async G=>{var K;const Y=(K=G.target.files)==null?void 0:K[0];if(Y)try{const de=await imageCompression(Y,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0});m(de),y(URL.createObjectURL(de))}catch(de){console.error("Error compressing image:",de),m(Y),y(URL.createObjectURL(Y))}},R=async G=>{G.preventDefault(),w(!0),await s(c,f||void 0),w(!1)},z=X.useMemo(()=>(c.payments||[]).reduce((G,Y)=>G+Y.amount,0),[c.payments]),L=X.useMemo(()=>c["Full Paid"]?0:(c["Total Fees"]||0)-z,[c,z]),I=G=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(G);return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 sticky top-0 bg-white dark:bg-gray-800 z-10 pb-4",children:"Edit Student Profile"}),h.jsxs("form",{onSubmit:R,className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[h.jsxs("div",{className:"md:w-1/3 space-y-4",children:[h.jsxs("fieldset",{children:[h.jsx("legend",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:"Profile Photo"}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("img",{src:p||`https://ui-avatars.com/api/?name=${c.Name||"S"}&background=random`,alt:"Student",className:"h-32 w-32 rounded-full object-cover shadow-lg mb-4"}),h.jsxs("label",{htmlFor:"photo-upload",className:"cursor-pointer px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:[h.jsx("span",{children:"Change Photo"}),h.jsx("input",{id:"photo-upload",name:"photo-upload",type:"file",className:"sr-only",accept:"image/*",onChange:O})]})]})]}),h.jsxs("div",{className:"text-center md:text-left",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Roll No"}),h.jsx("input",{type:"text",name:"Roll No",value:c["Roll No"],onChange:k,className:"mt-1 block w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none sm:text-sm dark:text-gray-300",readOnly:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),h.jsx("input",{type:"text",name:"Name",value:c.Name,onChange:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]})]}),h.jsx("div",{className:"md:w-2/3",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Father's Name"}),h.jsx("input",{type:"text",name:"Father",value:c.Father||"",onChange:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mother's Name"}),h.jsx("input",{type:"text",name:"Mother",value:c.Mother||"",onChange:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Gender"}),h.jsxs("select",{name:"Gender",value:c.Gender,onChange:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:text-white",children:[h.jsx("option",{children:"Male"}),h.jsx("option",{children:"Female"}),h.jsx("option",{children:"Other"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Batch"}),_?h.jsxs("div",{className:"mt-1 flex gap-2",children:[h.jsx("input",{type:"text",name:"Batch",value:c.Batch,onChange:k,placeholder:"ENTER NEW BATCH NAME",autoFocus:!0,className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"}),h.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-300 dark:hover:bg-gray-500",title:"Cancel creating new batch",children:""})]}):h.jsxs("select",{name:"Batch",value:c.Batch,onChange:N,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:text-white",children:[h.jsx("option",{value:"",children:"-- Select Batch --"}),i.map(G=>h.jsx("option",{value:G.name,children:G.name},G.id)),h.jsx("option",{disabled:!0,children:""}),h.jsx("option",{value:"NEW_BATCH_OPTION",className:"font-semibold text-indigo-600 dark:text-indigo-400",children:"+ Create New Batch"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Room Number"}),h.jsx("input",{type:"text",name:"Room Number",value:c["Room Number"]||"",onChange:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Primary Phone"}),h.jsx("input",{type:"tel",name:"Phone",value:c.Phone,onChange:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone 2 (Optional)"}),h.jsx("input",{type:"tel",name:"Phone 2",value:c["Phone 2"]||"",onChange:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Emergency Number"}),h.jsx("input",{type:"tel",name:"Emergency Number",value:c["Emergency Number"]||"",onChange:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Address"}),h.jsx("input",{type:"text",name:"Address",value:c.Address||"",onChange:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]})]})})]}),h.jsxs("fieldset",{children:[h.jsx("legend",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:"Payment Details"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Fees"}),h.jsx("input",{type:"number",name:"Total Fees",value:c["Total Fees"],onChange:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white",placeholder:"e.g., 50000"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Payment Mode"}),h.jsxs("select",{name:"Mode",value:c.Mode||"",onChange:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:text-white",children:[h.jsx("option",{value:"",children:"Not Specified"}),h.jsx("option",{children:"Monthly Payment"}),h.jsx("option",{children:"One Time Payment"})]})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Paid"}),h.jsx("div",{className:"mt-1 block w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm sm:text-sm dark:text-white",children:I(z)})]}),h.jsx("div",{className:"md:col-span-2",children:h.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-md text-center",children:[h.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Remaining Fees: "}),h.jsx("span",{className:`font-bold ${L>0?"text-red-600":"text-green-600"}`,children:I(L)})]})}),h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx("input",{id:"full-paid",name:"Full Paid",type:"checkbox",checked:c["Full Paid"]??!1,onChange:k,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600"}),h.jsx("div",{children:h.jsx("label",{htmlFor:"full-paid",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mark as Full Paid"})})]}),h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx("input",{id:"security-money-paid-edit",name:"Security Money Paid",type:"checkbox",checked:c["Security Money Paid"]??!1,onChange:k,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600"}),h.jsx("div",{children:h.jsx("label",{htmlFor:"security-money-paid-edit",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Security Money Paid"})})]})]}),h.jsxs("div",{className:"mt-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Student Remarks"}),h.jsx("textarea",{name:"Remarks",value:c.Remarks||"",onChange:k,rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white",placeholder:"ADD ANY GENERAL REMARKS FOR THE STUDENT HERE."})]})]}),h.jsxs("fieldset",{className:"mt-6",children:[h.jsx("legend",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:"Transaction History"}),h.jsx("div",{className:"max-h-48 overflow-y-auto border dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-900",children:(c.payments||[]).length>0?h.jsxs("table",{className:"min-w-full text-sm",children:[h.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 sticky top-0",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Date"}),h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Amount"}),h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Method"}),h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Remarks"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[...c.payments||[]].sort((G,Y)=>new Date(Y.date).getTime()-new Date(G.date).getTime()).map(G=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-700 dark:text-gray-300",children:G.date}),h.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-medium text-gray-900 dark:text-white",children:I(G.amount)}),h.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-700 dark:text-gray-300",children:G.method}),h.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:G.remarks||"-"})]},G.id))})]}):h.jsx("p",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No payment history found."})})]}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t dark:border-gray-700 sticky bottom-0 bg-white dark:bg-gray-800 pb-1",children:[h.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 transition-colors",children:b?"Saving...":"Save Changes"})]})]})]})})},Lx=({student:l,onClose:n,onSave:s})=>{const[i,c]=X.useState([]),[d,f]=X.useState({}),[m,p]=X.useState({}),[y,b]=X.useState(!1);X.useEffect(()=>{if(!l)return;const R=l.visitors?JSON.parse(JSON.stringify(l.visitors)):[];c(R);const z={};R.forEach(L=>{L.image_url&&(z[L.id]=L.image_url)}),p(z),f({}),b(!1)},[l]);const w=(R,z)=>{const{name:L,value:I}=z.target;c(G=>G.map(Y=>Y.id===R?{...Y,[L]:I.toUpperCase()}:Y))},_=async(R,z)=>{var I;const L=(I=z.target.files)==null?void 0:I[0];if(L)try{const G=await imageCompression(L,{maxSizeMB:.5,maxWidthOrHeight:400,useWebWorker:!0});f(Y=>({...Y,[R]:G})),p(Y=>({...Y,[R]:URL.createObjectURL(G)}))}catch(G){console.error("Visitor image compression failed:",G),f(Y=>({...Y,[R]:L})),p(Y=>({...Y,[R]:URL.createObjectURL(L)}))}},x=()=>"temp_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),k=()=>{const R={id:x(),student_id:l.id,name:"",relation:"",phone:""};c(z=>[...z,R])},N=R=>{c(z=>z.filter(L=>L.id!==R)),f(z=>{const L={...z};return delete L[R],L}),p(z=>{const L={...z};return delete L[R],L})},O=async R=>{R.preventDefault(),b(!0),await s(l.id,i,d),b(!1)};return l?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex justify-center items-center p-4",children:h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:h.jsxs("form",{onSubmit:O,children:[h.jsx("div",{className:"p-6 sticky top-0 bg-white dark:bg-gray-800 z-10 border-b dark:border-gray-700",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Manage Visitors"}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["For: ",l.Name]})]}),h.jsx("button",{onClick:n,type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white",children:h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),h.jsxs("div",{className:"p-6 space-y-4",children:[i.map(R=>h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[auto,1fr] gap-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md border dark:border-gray-600",children:[h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx("img",{src:m[R.id]||`https://ui-avatars.com/api/?name=${R.name||"V"}&background=random`,alt:"Visitor Preview",className:"w-20 h-20 rounded-full object-cover"}),h.jsxs("label",{htmlFor:`visitor-photo-${R.id}`,className:"cursor-pointer text-xs text-indigo-600 dark:text-indigo-400 hover:underline",children:["Change Photo",h.jsx("input",{id:`visitor-photo-${R.id}`,type:"file",className:"sr-only",accept:"image/*",onChange:z=>_(R.id,z)})]})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[h.jsx("input",{type:"text",name:"name",value:R.name,onChange:z=>w(R.id,z),placeholder:"VISITOR NAME",required:!0,className:"w-full text-sm px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-600"}),h.jsx("input",{type:"text",name:"relation",value:R.relation,onChange:z=>w(R.id,z),placeholder:"RELATION",required:!0,className:"w-full text-sm px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-600"}),h.jsx("input",{type:"tel",name:"phone",value:R.phone,onChange:z=>w(R.id,z),placeholder:"VISITOR PHONE",required:!0,className:"w-full text-sm px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-600 sm:col-span-2"}),h.jsx("div",{className:"sm:col-span-2 flex justify-end",children:h.jsx("button",{type:"button",onClick:()=>N(R.id),className:"text-xs font-medium text-red-600 dark:text-red-400 hover:underline",children:"Remove Visitor"})})]})]},R.id)),h.jsx("button",{type:"button",onClick:k,className:"w-full text-sm py-2 border-2 border-dashed rounded-md text-gray-500 hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:"+ Add Visitor"})]}),h.jsxs("div",{className:"flex justify-end space-x-3 p-6 bg-gray-50 dark:bg-gray-800 border-t dark:border-gray-700 sticky bottom-0",children:[h.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:y,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:y?"Saving...":"Save Changes"})]})]})})}):null},qx=({isOpen:l,onClose:n,onUploadComplete:s,existingStudents:i,existingBatches:c})=>{const[d,f]=X.useState(null),[m,p]=X.useState(!1),[y,b]=X.useState(""),[w,_]=X.useState(null),[x,k]=X.useState(null),N=()=>{f(null),p(!1),b(""),_(null),k(null)},O=()=>{N(),n()},R=G=>{G.target.files&&(f(G.target.files[0]),b(""),_(null),k(null))},z=()=>{const G=[{Name:"AARAV SHARMA","Roll No":"101",Batch:"PHYSICS-A","Room Number":"101-A",Phone:"9876543210","Total Fees":5e4,Father:"RAKESH SHARMA",Mother:"SUNITA SHARMA",Gender:"Male",Address:"123, ABC COLONY, NEW DELHI",Remarks:"JOINED IN APRIL SESSION","Full Paid":!1,"Security Money Paid":!0,Mode:"Monthly","Initial Payment Amount":1e4,"Initial Payment Date":"2024-05-20","Initial Payment Method":"UPI","Initial Payment Remarks":"ADMISSION FEE","Visitor Name":"ROHAN SHARMA","Visitor Relation":"UNCLE","Visitor Phone":"9876543211"}],Y=XLSX.utils.json_to_sheet(G),K=XLSX.utils.book_new();XLSX.utils.book_append_sheet(K,Y,"Students"),XLSX.writeFile(K,"student_upload_template.xlsx")},L=()=>{if(!x)return;const G=XLSX.utils.json_to_sheet(x),Y=XLSX.utils.book_new();XLSX.utils.book_append_sheet(Y,G,"Skipped Records"),XLSX.writeFile(Y,"skipped_student_records.xlsx")},I=async()=>{if(!d){b("Please select a file.");return}p(!0),b(""),_(null),k(null);const G=new FileReader;G.onload=async Y=>{var K;try{const de=new Uint8Array((K=Y.target)==null?void 0:K.result),ve=XLSX.read(de,{type:"array"}),He=ve.SheetNames[0],Ye=ve.Sheets[He],Z=XLSX.utils.sheet_to_json(Ye);if(Z.length===0){b("The file is empty or doesn't contain valid data."),p(!1);return}const F=new Set(i.map(Q=>String(Q["Roll No"]).toUpperCase())),ye=[],oe=[],M={};for(const Q of Z){const me=Q["Roll No"]?String(Q["Roll No"]).trim().toUpperCase():"",ke=Q.Name?String(Q.Name).trim().toUpperCase():"";if(!me||!ke){oe.push({...Q,"Reason for Skipping":"Missing required fields: Name or Roll No"});continue}if(F.has(me))oe.push({...Q,"Reason for Skipping":"Roll No already exists"});else{const Ke=Q.Batch?String(Q.Batch).trim().toUpperCase():"UNASSIGNED",vt=[],Tt=Q["Visitor Name"]?String(Q["Visitor Name"]).trim().toUpperCase():"",sa=Q["Visitor Relation"]?String(Q["Visitor Relation"]).trim().toUpperCase():"",ct=Q["Visitor Phone"]?String(Q["Visitor Phone"]).trim().toUpperCase():"";Tt&&sa&&ct&&vt.push({name:Tt,relation:sa,phone:ct}),vt.length>0&&(M[me]=vt);const ia=[],Ot=Number(Q["Initial Payment Amount"]??0);if(Ot>0){let fa=new Date().toISOString().slice(0,10);if(Q["Initial Payment Date"]){let bt=Q["Initial Payment Date"];if(typeof bt=="number"){const Ht=new Date(1899,11,30);fa=new Date(Ht.getTime()+bt*24*60*60*1e3).toISOString().slice(0,10)}else if(typeof bt=="string"){const Ht=new Date(bt);isNaN(Ht.getTime())||(fa=Ht.toISOString().slice(0,10))}}const la={id:crypto.randomUUID(),amount:Ot,method:Q["Initial Payment Method"]||"Other",date:fa,remarks:String(Q["Initial Payment Remarks"]||"Initial payment from bulk upload").toUpperCase()};ia.push(la)}const ln={Name:ke,"Roll No":me,Batch:Ke,"Room Number":String(Q["Room Number"]??"").trim().toUpperCase(),Father:String(Q.Father??"").trim().toUpperCase(),Mother:String(Q.Mother??"").trim().toUpperCase(),Phone:String(Q.Phone??"").trim().toUpperCase(),"Total Fees":Number(Q["Total Fees"]??0),Gender:Q.Gender==="Female"?"Female":Q.Gender==="Other"?"Other":"Male",Address:String(Q.Address??"").trim().toUpperCase(),Remarks:String(Q.Remarks??"").trim().toUpperCase(),"Full Paid":Q["Full Paid"]!=null?!!Q["Full Paid"]:!1,"Security Money Paid":Q["Security Money Paid"]!=null?!!Q["Security Money Paid"]:!1,Mode:Q.Mode==="Monthly"?"Monthly":"One Time",payments:ia,imageUrl:"",imagePath:""};ye.push(ln),F.add(me)}}const P=ye.length>0?await Sx(ye):[],q=Array.isArray(P)?P:[],W=[];q.forEach(Q=>{const me=String(Q["Roll No"]),ke=M[me];ke&&ke.forEach(Ke=>{W.push({...Ke,student_id:Q.id})})}),W.length>0&&await cm(W);const ae=[];q.forEach(Q=>{Q.payments&&Q.payments.length>0&&Q.payments.forEach(me=>{ae.push({...me,studentId:Q.id,studentName:Q.Name,studentRollNo:Q["Roll No"]})})}),ae.length>0&&await vx(ae);const j=q.reduce((Q,me)=>(me&&me.id&&me.Batch&&(Q[me.Batch]=[...Q[me.Batch]||[],me.id]),Q),{}),D=Object.keys(j),J=new Map(c.map(Q=>[Q.name.toUpperCase(),Q])),ee=[],ue=[];let ge=0;D.forEach(Q=>{const me=j[Q];if(J.has(Q)){const ke=J.get(Q),Ke=[...new Set([...ke.studentIds,...me])];ue.push(fl(ke.id,{studentIds:Ke}))}else ee.push({name:Q,studentIds:me,wardens:[]}),ge++,J.set(Q,{id:"temp",name:Q,studentIds:me,wardens:[]})}),ee.length>0&&await jx(ee),ue.length>0&&await Promise.all(ue),_({processed:Z.length,created:q.length,skipped:oe.length,newBatches:ge}),oe.length>0&&k(oe),(q.length>0||ge>0||ue.length>0||ae.length>0||W.length>0)&&s()}catch(de){console.error(de),b(`Upload failed: ${de.message}. Please check file format and data.`)}finally{p(!1)}},G.readAsArrayBuffer(d)};return l?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bulk Student Upload"}),h.jsx("button",{onClick:O,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white",children:h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),h.jsxs("div",{className:"mt-4 space-y-4",children:[h.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[h.jsxs("p",{children:["Upload an Excel file. New students will be created. ",h.jsx("strong",{children:"Existing students (matched by 'Roll No') will be ignored."})]}),h.jsx("p",{className:"mt-1",children:"All text data will be automatically converted to UPPERCASE."}),h.jsx("button",{onClick:z,className:"text-indigo-600 dark:text-indigo-400 hover:underline font-medium mt-1 text-sm",children:"Download Template"})]}),h.jsx("div",{className:"mt-2 text-sm p-3 bg-indigo-50 dark:bg-indigo-900/20 border-l-4 border-indigo-400 dark:border-indigo-500 text-indigo-800 dark:text-indigo-200",children:h.jsxs("p",{children:[h.jsx("span",{className:"font-semibold",children:"Note on Payments & Visitors:"})," The visitor and initial payment columns are optional. However, if you add a visitor, the 'Visitor Name', 'Visitor Relation', and 'Visitor Phone' fields must ",h.jsx("span",{className:"font-semibold",children:"all"})," be filled in for that row."]})}),h.jsx("input",{type:"file",onChange:R,accept:".xlsx, .xls, .csv",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900/50 dark:file:text-indigo-300 dark:hover:file:bg-indigo-900"}),y&&h.jsx("p",{className:"text-sm text-red-500",children:y}),w&&h.jsxs("div",{className:`mt-4 p-4 rounded-md ${w.created>0?"bg-green-50 dark:bg-green-900/50 text-green-700 dark:text-green-300":"bg-yellow-50 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300"}`,children:[h.jsx("h4",{className:"font-bold",children:"Upload Complete!"}),h.jsxs("ul",{className:"list-disc list-inside text-sm mt-1",children:[h.jsxs("li",{children:["Processed: ",w.processed," rows"]}),h.jsxs("li",{children:["Students Created: ",w.created]}),h.jsxs("li",{children:["Batches Created: ",w.newBatches]}),h.jsxs("li",{children:["Records Skipped: ",w.skipped," (already exist or invalid data)"]})]}),x&&x.length>0&&h.jsx("button",{onClick:L,className:"mt-3 px-3 py-1 text-sm font-medium bg-white dark:bg-gray-600 text-indigo-700 dark:text-indigo-200 border border-indigo-300 dark:border-indigo-500 rounded-md hover:bg-gray-50 dark:hover:bg-gray-500",children:"Download Skipped Records"})]})]}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t dark:border-gray-700 mt-4",children:[h.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500",children:"Cancel"}),h.jsx("button",{onClick:I,disabled:m||!d,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Processing...":"Upload File"})]})]})})}):null},Hx=({student:l,onClose:n,onSave:s})=>{const[i,c]=X.useState(""),[d,f]=X.useState("Online"),[m,p]=X.useState(new Date().toISOString().slice(0,10)),[y,b]=X.useState(""),[w,_]=X.useState(!1),x=X.useMemo(()=>(l.payments||[]).reduce((z,L)=>z+L.amount,0),[l.payments]),k=X.useMemo(()=>l["Total Fees"]-x,[l,x]),N=z=>{const L=z.target.value;/^\d*\.?\d*$/.test(L)&&c(L)},O=async z=>{z.preventDefault();const L=parseFloat(i);if(!L||L<=0){alert("Please enter a valid positive amount.");return}if(!m||new Date(m).toString()==="Invalid Date"){alert("Please select a valid date.");return}_(!0);const I={id:crypto.randomUUID(),amount:L,method:d,date:m,remarks:y};await s(l,I)},R=z=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(z);return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-2xl w-full max-w-md",children:[h.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"Record Payment"}),h.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:["For: ",h.jsx("span",{className:"font-semibold",children:l.Name})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 bg-gray-50 dark:bg-gray-700 p-4 rounded-md",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Fees"}),h.jsx("p",{className:"font-semibold dark:text-white",children:R(l["Total Fees"])})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Fees Remaining"}),h.jsx("p",{className:`font-semibold ${k>0?"text-red-600":"text-green-600"}`,children:R(k)})]})]}),h.jsxs("form",{onSubmit:O,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount"}),h.jsx("input",{type:"text",value:i,onChange:N,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600",placeholder:"Enter amount being paid",required:!0,pattern:"^\\d*\\.?\\d*$"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Payment Method"}),h.jsxs("select",{value:d,onChange:z=>f(z.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600",children:[h.jsx("option",{children:"Online"}),h.jsx("option",{children:"Cash"}),h.jsx("option",{children:"Card"}),h.jsx("option",{children:"UPI"}),h.jsx("option",{children:"Other"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Payment Date"}),h.jsx("input",{type:"date",value:m,onChange:z=>p(z.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Remarks (Optional)"}),h.jsx("textarea",{value:y,onChange:z=>b(z.target.value),rows:2,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600",placeholder:"e.g., Transaction ID, partial payment"})]}),h.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:w?"Saving...":"Save Payment"})]})]})]})})},kr=({title:l,value:n})=>h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:l}),h.jsx("p",{className:"mt-1 text-3xl font-semibold text-gray-900 dark:text-white",children:n})]}),$x=({transactions:l})=>{const n=X.useRef(null),s=X.useRef(null),i=X.useMemo(()=>{const c={},d=[],f=new Date;for(let m=5;m>=0;m--){const y=new Date(f.getFullYear(),f.getMonth()-m,1).toLocaleString("default",{month:"short",year:"2-digit"});d.push(y),c[y]=0}return l.forEach(m=>{const y=new Date(m.date).toLocaleString("default",{month:"short",year:"2-digit"});c.hasOwnProperty(y)&&(c[y]+=m.amount)}),{labels:d,datasets:[{label:"Fees Collected",data:d.map(m=>c[m]),backgroundColor:"rgba(79, 70, 229, 0.7)",borderColor:"rgba(79, 70, 229, 1)",borderWidth:1,borderRadius:4}]}},[l]);return X.useEffect(()=>{if(!n.current)return;s.current&&s.current.destroy();const c=n.current.getContext("2d");if(c)return s.current=new Chart(c,{type:"bar",data:i,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback:function(d){return d>=1e3?""+d/1e3+"k":""+d}}},x:{grid:{display:!1}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(d){let f=d.dataset.label||"";return f&&(f+=": "),d.parsed.y!==null&&(f+=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(d.parsed.y)),f}}}}}}),()=>{s.current&&s.current.destroy()}},[i]),h.jsx("canvas",{ref:n})},vc=l=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(l),Vx=({students:l})=>h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-white mb-4",children:"Recent Students"}),h.jsxs("div",{className:"space-y-4",children:[l.slice(0,5).map(n=>h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:n.imageUrl||`https://ui-avatars.com/api/?name=${n.Name}&background=random`,alt:n.Name}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.Name}),h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Roll No: ",n["Roll No"]]})]})]},n.id)),l.length===0&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No students have been added yet."})]})]}),Gx=({transactions:l})=>h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-white mb-4",children:"Recent Transactions"}),h.jsxs("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[l.slice(0,5).map(n=>h.jsxs("li",{className:"py-3 flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.studentName}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:n.date})]}),h.jsx("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:vc(n.amount)})]},n.id)),l.length===0&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 pt-2",children:"No transactions recorded yet."})]})]}),Px=({students:l,batches:n,transactions:s})=>{const i=X.useMemo(()=>{const c=l.length,d=n.length,f=s.reduce((b,w)=>b+w.amount,0),m=l.reduce((b,w)=>{if(w["Full Paid"])return b;const _=(w.payments||[]).reduce((k,N)=>k+N.amount,0),x=w["Total Fees"]-_;return b+(x>0?x:0)},0),p=l.filter(b=>b["Full Paid"]?!0:(b.payments||[]).reduce((_,x)=>_+x.amount,0)>=b["Total Fees"]).length,y=l.filter(b=>b["Security Money Paid"]).length;return{totalStudents:c,totalBatches:d,feesCollected:f,feesRemaining:m,noDuesCount:p,securityMoneyPaidCount:y}},[l,n,s]);return h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-semibold text-gray-700 dark:text-gray-200 mb-6",children:"Overview"}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[h.jsx(kr,{title:"Total Students",value:i.totalStudents}),h.jsx(kr,{title:"Students with No Dues",value:`${i.noDuesCount} / ${i.totalStudents}`}),h.jsx(kr,{title:"Security Money Paid",value:`${i.securityMoneyPaidCount} / ${i.totalStudents}`}),h.jsx(kr,{title:"Total Batches",value:i.totalBatches}),h.jsx(kr,{title:"Total Fees Collected",value:vc(i.feesCollected)}),h.jsx(kr,{title:"Total Fees Remaining",value:vc(i.feesRemaining)})]}),h.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"lg:col-span-2 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[h.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-white mb-4",children:"Monthly Fee Collection"}),h.jsx("div",{className:"h-80",children:h.jsx($x,{transactions:s})})]}),h.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[h.jsx(Vx,{students:l}),h.jsx(Gx,{transactions:s})]})]})]})},Yx=()=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Kx=()=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-pink-500",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Xx=({batches:l,students:n,onInitiateDeleteBatch:s,onAddWarden:i,onRemoveWarden:c,onAssignStudents:d})=>{const[f,m]=X.useState(null),[p,y]=X.useState(null),[b,w]=X.useState(""),[_,x]=X.useState(null),[k,N]=X.useState(new Set),O=X.useMemo(()=>new Map(n.map(Z=>[Z.id,Z])),[n]),R=Z=>O.get(Z),z=Z=>{m(F=>F===Z?null:Z),y(null),x(null)},L=(Z,F)=>{(p==null?void 0:p.batchId)===Z&&(p==null?void 0:p.gender)===F?y(null):(y({batchId:Z,gender:F}),w(""),x(null))},I=()=>{p&&b&&(i(p.batchId,b),y(null),w(""))},G=(Z,F)=>{(_==null?void 0:_.wardenStudentId)===F.wardenStudentId?x(null):(x({batchId:Z.id,wardenStudentId:F.wardenStudentId}),N(new Set(F.assignedStudentIds)),y(null))},Y=()=>{x(null),N(new Set)},K=()=>{_&&(d(_.batchId,_.wardenStudentId,Array.from(k)),x(null))},de=Z=>{N(F=>{const ye=new Set(F);return ye.has(Z)?ye.delete(Z):ye.add(Z),ye})},ve=Z=>n.filter(F=>F.Batch.toLowerCase()===Z.toLowerCase()).sort((F,ye)=>String(F["Roll No"]).localeCompare(String(ye["Roll No"]),void 0,{numeric:!0,sensitivity:"base"})),He=(Z,F)=>{if(!p||p.batchId!==Z.id)return null;const{gender:ye}=p,oe=new Set(Z.wardens.map(P=>P.wardenStudentId)),M=F.filter(P=>P.Gender===ye&&!oe.has(P.id));return h.jsxs("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md flex items-center gap-3 transition-all duration-300",children:[h.jsxs("select",{value:b,onChange:P=>w(P.target.value),className:"flex-grow w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-indigo-500 bg-white dark:bg-gray-700 text-sm",children:[h.jsxs("option",{value:"",children:["-- Select a ",ye.toLowerCase()," student --"]}),M.map(P=>h.jsxs("option",{value:P.id,children:[P.Name," (",P["Roll No"],")"]},P.id))]}),h.jsx("button",{onClick:I,disabled:!b,className:"px-3 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 disabled:bg-green-300",children:"Add"}),h.jsx("button",{onClick:()=>y(null),className:"px-3 py-2 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 text-sm rounded-md hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cancel"})]})},Ye=(Z,F,ye)=>{var q;const oe=new Set(Z.wardens.map(W=>W.wardenStudentId)),M=new Set(Z.wardens.filter(W=>W.wardenStudentId!==F.wardenStudentId).flatMap(W=>W.assignedStudentIds)),P=ye.filter(W=>!oe.has(W.id));return h.jsxs("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-900/50 rounded-md",children:[h.jsxs("h5",{className:"text-md font-semibold text-gray-800 dark:text-gray-200 mb-3",children:["Assign students to ",(q=R(F.wardenStudentId))==null?void 0:q.Name,":"]}),h.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2 border dark:border-gray-600 rounded-md p-2",children:[P.map(W=>{const ae=M.has(W.id);return h.jsxs("label",{className:`flex items-center p-2 rounded-md ${ae?"opacity-50 cursor-not-allowed":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[h.jsx("input",{type:"checkbox",checked:k.has(W.id),onChange:()=>de(W.id),disabled:ae,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),h.jsxs("span",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300",children:[W.Name," (",W["Roll No"],")"]}),ae&&h.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"(Assigned elsewhere)"})]},W.id)}),P.length===0&&h.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:"No students available in this batch to assign."})]}),h.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[h.jsx("button",{onClick:Y,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 text-sm",children:"Cancel"}),h.jsx("button",{onClick:K,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm",children:"Save Assignments"})]})]})};return h.jsx(h.Fragment,{children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:[h.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white mb-4",children:"Batch Management"}),l.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No batches created yet. Go to the Students tab to select students and create a batch."}):h.jsx("div",{className:"space-y-4",children:l.map(Z=>{const F=ve(Z.name),ye=new Set(Z.wardens.map(oe=>oe.wardenStudentId));return h.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[h.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",onClick:()=>z(Z.id),children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg text-indigo-700 dark:text-indigo-400",children:Z.name}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[F.length," members",Z.wardens.length>0&&h.jsxs("span",{className:"ml-1 font-medium",children:["(incl. ",Z.wardens.length," ",Z.wardens.length===1?"warden":"wardens",")"]})]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:oe=>{oe.stopPropagation(),s(Z)},className:"text-red-500 hover:text-red-700 font-medium text-sm",children:"Delete"}),h.jsx("svg",{className:`w-5 h-5 text-gray-500 transform transition-transform ${f===Z.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})]}),f===Z.id&&h.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 space-y-6",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-md font-medium text-gray-600 dark:text-gray-300 mb-2",children:"Members (Sorted by Roll No):"}),h.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-gray-700 max-h-60 overflow-y-auto pr-2",children:F.map(oe=>h.jsxs("li",{className:"py-2 flex justify-between items-center",children:[h.jsxs("span",{className:"flex items-center",children:[oe.Name,ye.has(oe.id)&&h.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200 rounded-full font-medium",children:"Warden"})]}),h.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono",children:["Roll: ",oe["Roll No"]]})]},oe.id))})]}),h.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-3",children:[h.jsx("h4",{className:"text-md font-semibold text-gray-700 dark:text-gray-200",children:"Warden Management"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>L(Z.id,"Female"),className:"px-3 py-1 text-xs font-medium text-pink-700 bg-pink-100 rounded-full hover:bg-pink-200 dark:bg-pink-900 dark:text-pink-200 dark:hover:bg-pink-800",children:"Add Girl Warden"}),h.jsx("button",{onClick:()=>L(Z.id,"Male"),className:"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-full hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800",children:"Add Boy Warden"})]})]}),He(Z,F),h.jsxs("div",{className:"space-y-3 mt-3",children:[Z.wardens.map(oe=>{const M=R(oe.wardenStudentId);if(!M)return null;const P=(_==null?void 0:_.wardenStudentId)===oe.wardenStudentId;return h.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("p",{className:"font-semibold text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[M.Gender==="Male"?h.jsx(Yx,{}):h.jsx(Kx,{}),M.Name," ",h.jsx("span",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium",children:"(Warden)"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:()=>G(Z,oe),className:`text-sm ${P?"text-gray-500":"text-indigo-600 hover:text-indigo-800"}`,children:P?"Close Editor":"Assign Students"}),h.jsx("button",{onClick:()=>c(Z.id,oe.wardenStudentId),className:"text-sm text-red-500 hover:text-red-700",children:"Remove"})]})]}),h.jsxs("ul",{className:"mt-2 pl-4 text-sm text-gray-600 dark:text-gray-300 list-disc",children:[oe.assignedStudentIds.map(q=>R(q)).filter(Boolean).map(q=>h.jsxs("li",{children:[q.Name," ",h.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:["(",q["Roll No"],")"]})]},q.id)),oe.assignedStudentIds.length===0&&h.jsx("li",{className:"list-none text-xs text-gray-400",children:"No students assigned."})]}),P&&Ye(Z,oe,F)]},oe.wardenStudentId)}),Z.wardens.length===0&&h.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"No wardens assigned to this batch."})]})]})]})]},Z.id)})})]})})},Ix=({wardenStudent:l,assignedStudents:n})=>h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md border border-gray-200 dark:border-gray-700",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:l.imageUrl||`https://ui-avatars.com/api/?name=${l.Name}&background=random`,alt:l.Name}),h.jsxs("div",{children:[h.jsx("p",{className:"text-md font-semibold text-gray-900 dark:text-white",children:l.Name}),h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Roll No: ",l["Roll No"]]})]})]}),h.jsxs("div",{className:"mt-4 border-t border-gray-200 dark:border-gray-600 pt-3",children:[h.jsxs("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 mb-2",children:["Assigned Students (",n.length,")"]}),n.length>0?h.jsx("ul",{className:"space-y-1 text-sm text-gray-700 dark:text-gray-400 max-h-32 overflow-y-auto",children:n.map(s=>h.jsxs("li",{children:["- ",s.Name," ",h.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:["(",s["Roll No"],")"]})]},s.id))}):h.jsx("p",{className:"text-sm text-gray-400 italic",children:"No students assigned yet."})]})]}),Qx=({batches:l,students:n})=>{const s=X.useMemo(()=>new Map(n.map(c=>[c.id,c])),[n]),i=X.useMemo(()=>l.map(c=>{const d=c.wardens.map(f=>{const m=s.get(f.wardenStudentId),p=f.assignedStudentIds.map(y=>s.get(y)).filter(y=>!!y);return{wardenStudent:m,assignedStudents:p}}).filter(f=>!!f.wardenStudent);return{batch:c,wardens:d}}).filter(c=>c.wardens.length>0),[l,s]);return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:[h.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Warden Overview"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"A centralized view of all wardens and their assigned students across different batches."})]}),i.length===0?h.jsxs("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[h.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:h.jsx("path",{vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 20.944L12 22l9-1.056v-5.556c0-1.076-.232-2.11-.658-3.084z"})}),h.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No Wardens Assigned"}),h.jsx("p",{className:"mt-1 text-sm text-gray-500",children:'Assign students as wardens in the "Batches" section to see them here.'})]}):i.map(({batch:c,wardens:d})=>h.jsxs("div",{children:[h.jsxs("h3",{className:"text-xl font-bold text-indigo-600 dark:text-indigo-400 mb-4 pb-2 border-b-2 border-indigo-200 dark:border-indigo-800",children:["Batch: ",c.name]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(({wardenStudent:f,assignedStudents:m})=>h.jsx(Ix,{wardenStudent:f,assignedStudents:m},f.id))})]},c.id))]})},Jx=({transactions:l,onResetHistory:n,onDeleteTransaction:s})=>{const[i,c]=X.useState(""),[d,f]=X.useState(!1),[m,p]=X.useState(null),y=X.useMemo(()=>{if(!i.trim())return l;const x=i.toLowerCase().trim();return l.filter(k=>k.studentName.toLowerCase().includes(x)||String(k.studentRollNo).toLowerCase().includes(x)||k.method.toLowerCase().includes(x)||(k.remarks||"").toLowerCase().includes(x))},[l,i]),b=x=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(x),w=async()=>{await n(),f(!1)},_=async()=>{m&&(await s(m.id),p(null))};return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-lg",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Payment History"}),h.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Showing ",y.length," of ",l.length," transactions"]})]}),h.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[h.jsx("input",{type:"text",placeholder:"Search transactions...",className:"w-full sm:w-64 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700",value:i,onChange:x=>c(x.target.value)}),h.jsx("button",{onClick:()=>f(!0),className:"px-3 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",title:"Reset all payment history",children:"Reset"})]})]}),h.jsxs("div",{className:"overflow-x-auto",children:[h.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[h.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Student Name"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden sm:table-cell",children:"Roll No"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden md:table-cell",children:"Method"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden xl:table-cell",children:"Transaction ID"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden md:table-cell",children:"Remarks"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:y.map(x=>h.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:x.date}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:x.studentName}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 hidden sm:table-cell",children:x.studentRollNo}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-200",children:b(x.amount)}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 hidden md:table-cell",children:x.method}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400 font-mono hidden xl:table-cell",title:x.id,children:[x.id.substring(0,8),"..."]}),h.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300 hidden md:table-cell",children:x.remarks}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:h.jsx("button",{onClick:()=>p(x),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete Transaction",children:"Delete"})})]},x.id))})]}),y.length===0&&h.jsx("p",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No transactions found."})]})]}),d&&h.jsx(Bs,{isOpen:d,onClose:()=>f(!1),onConfirm:w,title:"Reset All Payment History?",message:"Are you sure you want to delete ALL payment records? This action is permanent and cannot be undone.",confirmButtonText:"Yes, Delete All",confirmButtonVariant:"danger"}),m&&h.jsx(Bs,{isOpen:!!m,onClose:()=>p(null),onConfirm:_,title:"Delete Transaction?",message:`Are you sure you want to permanently delete this payment of ${b(m.amount)} for ${m.studentName}? This cannot be undone.`,confirmButtonText:"Confirm Delete",confirmButtonVariant:"danger"})]})},Zx=({message:l,type:n,onClose:s})=>{X.useEffect(()=>{const d=setTimeout(s,4e3);return()=>clearTimeout(d)},[s]);const i="fixed top-5 right-5 z-[100] text-white px-6 py-3 rounded-lg shadow-lg flex items-center animate-fade-in-down",c={success:"bg-green-500",error:"bg-red-500"};return h.jsxs("div",{className:`${i} ${c[n]}`,children:[h.jsx("p",{children:l}),h.jsx("button",{onClick:s,className:"ml-4 text-xl font-semibold leading-none",children:""})]})},dm=()=>h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"}),Bt=({label:l,value:n})=>h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wider",children:l}),h.jsx("p",{className:"text-gray-800 dark:text-gray-200 break-words",children:n||"-"})]}),Fx=({student:l,onClose:n,onPay:s,onEdit:i,onManageVisitors:c})=>{const d=(l.payments||[]).reduce((p,y)=>p+y.amount,0),f=l["Full Paid"]?0:l["Total Fees"]-d,m=p=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(p);return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-start p-4 pt-10 sm:pt-20 overflow-y-auto",children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl my-auto",children:[h.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10 rounded-t-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Student Profile"}),h.jsx("button",{onClick:n,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white",children:h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),h.jsxs("div",{className:"p-6 sm:p-8",children:[h.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[h.jsxs("div",{className:"md:w-1/2 space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[h.jsx("img",{src:l.imageUrl||`https://ui-avatars.com/api/?name=${l.Name}&background=random`,alt:l.Name,className:"h-24 w-24 rounded-full object-cover shadow-lg"}),h.jsxs("div",{className:"text-center sm:text-left",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:l.Name}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Roll No: ",l["Roll No"]]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4 border-t dark:border-gray-700",children:[h.jsx(Bt,{label:"Father's Name",value:l.Father}),h.jsx(Bt,{label:"Mother's Name",value:l.Mother}),h.jsx(Bt,{label:"Batch",value:l.Batch}),h.jsx(Bt,{label:"Room Number",value:l["Room Number"]}),h.jsx(Bt,{label:"Gender",value:l.Gender}),h.jsx(Bt,{label:"Primary Phone",value:l.Phone}),h.jsx(Bt,{label:"Emergency Number",value:l["Emergency Number"]}),h.jsx(Bt,{label:"Phone 2",value:l["Phone 2"]}),h.jsx("div",{className:"sm:col-span-2",children:h.jsx(Bt,{label:"Address",value:l.Address})})]})]}),h.jsxs("div",{className:"md:w-1/2 space-y-6",children:[h.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Payment Summary"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border dark:border-gray-600",children:[h.jsx(Bt,{label:"Total Fees",value:m(l["Total Fees"])}),h.jsx(Bt,{label:"Total Paid",value:m(d)}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wider",children:"Remaining"}),h.jsx("p",{className:`font-semibold ${f>0?"text-red-500":"text-green-500"}`,children:m(f)})]}),h.jsx(Bt,{label:"Payment Mode",value:l.Mode}),h.jsx("div",{className:"col-span-2",children:h.jsx(Bt,{label:"Security Money Status",value:l["Security Money Paid"]?"PAID":"NOT PAID"})})]})]})]}),h.jsxs("div",{className:"mt-8 border-t border-gray-200 dark:border-gray-700 pt-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Visitors List"}),h.jsx("button",{onClick:c,className:"px-3 py-1.5 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-md hover:bg-indigo-100 dark:bg-indigo-900/30 dark:text-indigo-300 dark:hover:bg-indigo-900/50 transition-colors",children:"Manage Visitors"})]}),l.visitors.length>0?h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:l.visitors.map(p=>h.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border dark:border-gray-600",children:[h.jsx("img",{src:p.image_url||`https://ui-avatars.com/api/?name=${p.name}&background=random`,alt:p.name,className:"w-14 h-14 rounded-full object-cover"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:p.name}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.relation}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.phone})]})]},p.id))}):h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No visitors recorded."})]}),h.jsxs("div",{className:"mt-8 border-t border-gray-200 dark:border-gray-700 pt-6",children:[h.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4",children:"Transaction History"}),h.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md",children:(l.payments||[]).length>0?h.jsxs("table",{className:"min-w-full text-sm divide-y divide-gray-200 dark:divide-gray-700",children:[h.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Date"}),h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Amount"}),h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Method"}),h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Remarks"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800/50",children:[...l.payments].sort((p,y)=>new Date(y.date).getTime()-new Date(p.date).getTime()).map(p=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-700 dark:text-gray-300",children:p.date}),h.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-medium text-gray-900 dark:text-white",children:m(p.amount)}),h.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-700 dark:text-gray-300",children:p.method}),h.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:p.remarks||"-"})]},p.id))})]}):h.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"No payment history found."})}),l.Remarks&&h.jsxs("div",{className:"mt-6",children:[h.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider mb-2",children:"Remarks"}),h.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 dark:border-yellow-600 rounded-r-md",children:h.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:l.Remarks})})]})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row justify-end items-center gap-3 p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/80 rounded-b-lg sticky bottom-0",children:[h.jsx("button",{onClick:n,type:"button",className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600",children:"Close"}),h.jsx("button",{onClick:i,type:"button",className:"w-full sm:w-auto inline-flex justify-center items-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none",children:"Edit Profile"}),h.jsx("button",{onClick:s,type:"button",className:"w-full sm:w-auto inline-flex justify-center items-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none",children:"Record Payment"})]})]})})},bc="student-images",dl=async(l,n)=>{const{error:s}=await Re.storage.from(bc).upload(n,l,{cacheControl:"3600",upsert:!1});if(s)throw s;const{data:i}=Re.storage.from(bc).getPublicUrl(n);if(!i.publicUrl)throw new Error("Could not retrieve public URL for uploaded image.");return i.publicUrl},Os=async l=>{if(!l||l.length===0)return;const n=Array.isArray(l)?l.filter(i=>!!i):[l];if(n.length===0)return;const{error:s}=await Re.storage.from(bc).remove(n);s&&console.error("Error deleting image(s) from Supabase:",s.message)},Wx=l=>{const[n,s]=X.useState([]),[i,c]=X.useState(!0),d=X.useCallback(async()=>{c(!0);try{const{data:{user:x}}=await Re.auth.getUser();if(!x)throw new Error("User not authenticated.");const{data:k,error:N}=await Re.from("students").select("*").order("createdAt",{ascending:!1});if(N)throw N;const R=(await Ex(x.id)).reduce((L,I)=>{const G=I.student_id;return L[G]||(L[G]=[]),L[G].push(I),L},{}),z=k.map(L=>({...L,visitors:R[L.id]||[]}));s(z)}catch(x){console.error("Error fetching students:",x),l("Failed to load students.","error")}finally{c(!1)}},[l]);return X.useEffect(()=>{d()},[d]),{students:n,loading:i,refetchStudents:d,addStudentWithImage:async(x,k,N=0)=>{try{let O="",R="";if(k){const G=await imageCompression(k,{maxSizeMB:1,maxWidthOrHeight:1024});R=`profilePictures/${Date.now()}_${G.name}`,O=await dl(G,R)}const z=[];N>0&&z.push({id:crypto.randomUUID(),amount:N,method:"Cash",date:new Date().toISOString().slice(0,10),remarks:"Initial payment at registration"});const L={...x,payments:z,visitors:[],imageUrl:O,imagePath:R},I=await fx(L);N>0&&z.length>0&&await fg({...z[0],studentId:I.id,studentName:I.Name,studentRollNo:I["Roll No"]}),l("Student added successfully!","success")}catch(O){console.error("Error adding student:",O),l("Failed to add student.","error")}},updateStudentWithImage:async(x,k)=>{try{let N={...x};if(delete N.id,delete N.createdAt,delete N.visitors,k){x.imagePath&&await Os(x.imagePath);const O=await imageCompression(k,{maxSizeMB:1,maxWidthOrHeight:1024}),R=`profilePictures/${Date.now()}_${O.name}`,z=await dl(O,R);N.imageUrl=z,N.imagePath=R}await hl(x.id,N),l("Student profile updated.","success")}catch(N){console.error("Error updating student:",N);const O=N.message||"Failed to update student profile.";l(O,"error")}},deleteStudentAndImage:async(x,k)=>{try{const N=[];x.imagePath&&N.push(x.imagePath),x.visitors&&x.visitors.forEach(O=>{O.image_path&&N.push(O.image_path)}),N.length>0&&await Os(N),k&&await wx(x.id),await pc([x.id]),await gx(x.id),l("Student deleted successfully.","success")}catch(N){console.error("Error deleting student:",N),l("Failed to delete student.","error")}},deleteSelectedStudents:async x=>{if(x.length!==0)try{const N=n.filter(O=>x.includes(O.id)).flatMap(O=>{const R=[];return O.imagePath&&R.push(O.imagePath),O.visitors&&O.visitors.forEach(z=>z.image_path&&R.push(z.image_path)),R}).filter(O=>!!O);N.length>0&&await Os(N),await pc(x),await mx(x),l(`${x.length} student(s) deleted successfully.`,"success")}catch(k){console.error("Error deleting selected students:",k),l("Failed to delete selected students.","error")}},recordPayment:async(x,k)=>{try{const O=(x.payments||[]).reduce((z,L)=>z+L.amount,0)+k.amount>=x["Total Fees"],R=[...x.payments||[],k];await hl(x.id,{payments:R,"Full Paid":x["Full Paid"]||O}),await fg({...k,studentId:x.id,studentName:x.Name,studentRollNo:x["Roll No"]}),l("Payment recorded successfully.","success")}catch(N){console.error("Failed to save payment:",N),l("Failed to record payment.","error")}},saveVisitors:async(x,k,N)=>{try{const O=n.find(F=>F.id===x),R=(O==null?void 0:O.visitors)||[],z=new Map(R.map(F=>[F.id,F])),L=new Map(k.map(F=>[F.id,F])),I=k.filter(F=>!z.has(F.id)),G=k.filter(F=>z.has(F.id)),Y=R.filter(F=>!L.has(F.id)),K=I.map(async F=>{let ye="",oe="";const M=N[F.id];if(M){const W=await imageCompression(M,{maxSizeMB:.5,maxWidthOrHeight:400});oe=`visitorPictures/${Date.now()}_${F.id}_${W.name}`,ye=await dl(W,oe)}const{id:P,...q}=F;return{...q,image_url:ye,image_path:oe}}),de=await Promise.all(K),ve=G.map(async F=>{let ye=F.image_url||"",oe=F.image_path||"";const M=N[F.id];if(M){const P=z.get(F.id);P!=null&&P.image_path&&await Os(P.image_path);const q=await imageCompression(M,{maxSizeMB:.5,maxWidthOrHeight:400});oe=`visitorPictures/${Date.now()}_${F.id}_${q.name}`,ye=await dl(q,oe)}return{...F,image_url:ye,image_path:oe}}),He=await Promise.all(ve),Ye=Y.map(F=>F.image_path).filter(F=>!!F);Ye.length>0&&await Os(Ye);const Z=Y.map(F=>F.id);de.length>0&&await cm(de),He.length>0&&await kx(He),Z.length>0&&await Nx(Z),l("Visitors saved successfully.","success")}catch(O){console.error("Error saving visitors:",O),l(O.message||"Failed to save visitors.","error")}},toggleSecurityMoneyPaid:async(x,k)=>{try{await hl(x,{"Security Money Paid":k}),s(N=>N.map(O=>O.id===x?{...O,"Security Money Paid":k}:O)),l("Security money status updated.","success")}catch(N){console.error("Error updating security money status:",N),l(N.message||"Failed to update status.","error"),d()}}}},ew=l=>{const[n,s]=X.useState([]),[i,c]=X.useState(!0),d=X.useCallback(async()=>{c(!0);const{data:_,error:x}=await Re.from("batches").select("*");if(x)console.error("Error fetching batches:",x),l("Failed to load batches.","error");else{const k=_.sort((N,O)=>N.name.localeCompare(O.name,void 0,{numeric:!0,sensitivity:"base"}));s(k)}c(!1)},[l]);X.useEffect(()=>{d()},[d]);const f=X.useCallback(async(_,x)=>{const k=_.map(N=>hl(N,{Batch:x}));await Promise.all(k)},[]);return{batches:n,loading:i,refetchBatches:d,createBatch:async(_,x)=>{try{const k=_.trim();await yx({name:k,studentIds:x,wardens:[]}),x.length>0&&await f(x,k),l(`Batch "${k}" created.`,"success"),d()}catch(k){console.error("Failed to create batch:",k),l("Failed to create batch.","error")}},deleteBatch:async(_,x)=>{if(_)try{x&&_.studentIds.length>0&&await _x(_.studentIds),await px(_),l(`Batch "${_.name}" and its students have been deleted.`,"success"),s(k=>k.filter(N=>N.id!==_.id))}catch(k){console.error("Failed to delete batch:",k),l("Failed to delete batch.","error")}},addWarden:async(_,x)=>{const k=n.find(N=>N.id===_);if(k)try{if(k.wardens.some(R=>R.wardenStudentId===x)){l("This student is already a warden for this batch.","error");return}const N={wardenStudentId:x,assignedStudentIds:[]},O=[...k.wardens,N];await fl(_,{wardens:O}),l("Warden added successfully.","success"),s(R=>R.map(z=>z.id===_?{...z,wardens:O}:z))}catch(N){console.error("Error adding warden: ",N),l("Failed to add warden.","error"),d()}},removeWarden:async(_,x)=>{const k=n.find(N=>N.id===_);if(k)try{const N=k.wardens.filter(O=>O.wardenStudentId!==x);await fl(_,{wardens:N}),l("Warden removed.","success"),s(O=>O.map(R=>R.id===_?{...R,wardens:N}:R))}catch(N){console.error("Error removing warden: ",N),l("Failed to remove warden.","error"),d()}},assignStudentsToWarden:async(_,x,k)=>{const N=n.find(O=>O.id===_);if(N)try{const O=N.wardens.map(R=>R.wardenStudentId===x?{...R,assignedStudentIds:k}:R);await fl(_,{wardens:O}),l("Student assignments updated.","success"),s(R=>R.map(z=>z.id===_?{...z,wardens:O}:z))}catch(O){console.error("Error assigning students: ",O),l("Failed to assign students.","error"),d()}}}},tw=l=>{const[n,s]=X.useState([]),[i,c]=X.useState(!0),d=X.useCallback(async()=>{c(!0);const{data:p,error:y}=await Re.from("transactions").select("*").order("date",{ascending:!1});y?(console.error("Error fetching transactions:",y),l("Failed to load payment history.","error")):s(p),c(!1)},[l]);return X.useEffect(()=>{d()},[d]),{transactions:n,loading:i,refetchTransactions:d,resetAllTransactions:async()=>{try{await bx(),s([]),l("All payment history has been reset.","success")}catch(p){console.error("Error resetting transactions:",p),l("Failed to reset payment history.","error")}},deleteSingleTransaction:async p=>{try{await xx(p),s(y=>y.filter(b=>b.id!==p)),l("Transaction deleted successfully.","success")}catch(y){console.error("Error during transaction deletion process:",y),l(y.message||"An unexpected error occurred.","error"),await d()}}}},aw=({user:l,theme:n,toggleTheme:s})=>{const[i,c]=X.useState(ut.Dashboard),[d,f]=X.useState(null),[m,p]=X.useState(!1),y=X.useCallback((se,je="success")=>{f({id:Date.now(),message:se,type:je})},[]),{students:b,loading:w,refetchStudents:_,addStudentWithImage:x,updateStudentWithImage:k,deleteStudentAndImage:N,deleteSelectedStudents:O,recordPayment:R,saveVisitors:z,toggleSecurityMoneyPaid:L}=Wx(y),{batches:I,loading:G,refetchBatches:Y,createBatch:K,deleteBatch:de,addWarden:ve,removeWarden:He,assignStudentsToWarden:Ye}=ew(y),{transactions:Z,loading:F,refetchTransactions:ye,resetAllTransactions:oe,deleteSingleTransaction:M}=tw(y),P=w||G||F,[q,W]=X.useState(!0);X.useEffect(()=>{q&&!P&&W(!1)},[P,q]);const[ae,j]=X.useState(!1),[D,J]=X.useState(!1),[ee,ue]=X.useState(!1),[ge,Q]=X.useState(!1),[me,ke]=X.useState(null),[Ke,vt]=X.useState(null),[Tt,sa]=X.useState(null),[ct,ia]=X.useState(null),[Ot,ln]=X.useState(null),[fa,la]=X.useState(null),[bt,Ht]=X.useState(!1);X.useEffect(()=>{if(Ke){const se=b.find(je=>je.id===Ke.id);se&&se!==Ke&&vt(se)}if(me){const se=b.find(je=>je.id===me.id);se&&se!==me&&ke(se)}if(Tt){const se=b.find(je=>je.id===Tt.id);se&&se!==Tt&&sa(se)}},[b,Ke,me,Tt]);const _l=async(se,je,xt)=>{await x(se,je,xt),se.Batch&&!I.some(un=>un.name.toLowerCase()===se.Batch.toLowerCase())&&await K(se.Batch,[]),await Promise.all([_(),ye(),Y()]),j(!1)},qs=se=>{ke(se),ue(!0)},ft=async(se,je)=>{await k(se,je),se.Batch&&!I.some(xt=>xt.name.toLowerCase()===se.Batch.toLowerCase())&&await K(se.Batch,[]),await Promise.all([_(),Y()]),ue(!1),ke(null)},Hs=se=>{const je=b.find(xt=>xt.id===se.id)||se;sa(je),Q(!0)},$s=async(se,je,xt)=>{await z(se,je,xt),await _(),Q(!1),sa(null)},Vs=se=>{ia(se),Ht(!1)},Dn=async()=>{ct&&(await N(ct,bt),ia(null),await _(),bt&&await ye())},Sl=async se=>{await O(se),await _()},Gs=async(se,je)=>{await K(se,je),await Promise.all([Y(),_()])},jl=async(se,je)=>{await R(se,je),await Promise.all([_(),ye()]),la(null)},El=se=>{ln(se),Ht(!1)},on=async()=>{Ot&&(await de(Ot,bt),ln(null),await Promise.all([Y(),_()]),bt&&await ye())},gt=async(se,je)=>{await ve(se,je),await Y()},oa=async(se,je)=>{await He(se,je),await Y()},mt=async(se,je,xt)=>{await Ye(se,je,xt),await Y()},kl=async()=>{await oe(),await _()},Nl=async se=>{await M(se),await _()},Tl=async(se,je)=>{await L(se,je)},Mn=X.useCallback(async()=>{await Promise.all([_(),Y(),ye()])},[_,Y,ye]),zn=()=>{if(q&&P)return h.jsx("div",{className:"flex justify-center items-center h-full",children:h.jsx(dm,{})});switch(i){case ut.Students:return h.jsx(Mx,{students:b,onEditStudent:qs,onDeleteStudent:Vs,onDeleteSelected:Sl,onCreateBatch:Gs,onRecordPayment:la,onViewStudent:vt,onManageVisitors:Hs,onToggleSecurityMoneyPaid:Tl});case ut.Batches:return h.jsx(Xx,{batches:I,students:b,onInitiateDeleteBatch:El,onAddWarden:gt,onRemoveWarden:oa,onAssignStudents:mt});case ut.Wardens:return h.jsx(Qx,{batches:I,students:b});case ut.Payments:return h.jsx(Jx,{transactions:Z,onResetHistory:kl,onDeleteTransaction:Nl});case ut.Dashboard:default:return h.jsx(Px,{students:b,batches:I,transactions:Z})}};return h.jsxs("div",{className:"relative flex h-screen bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200",children:[m&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden",onClick:()=>p(!1)}),h.jsx(Ox,{currentView:i,setView:c,isOpen:m,setIsOpen:p}),h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[h.jsx(Ax,{user:l,onAddStudent:()=>j(!0),onBulkUpload:()=>J(!0),theme:n,toggleTheme:s,onToggleSidebar:()=>p(!m)}),h.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 dark:bg-gray-900 p-4 sm:p-6",children:zn()})]}),d&&h.jsx(Zx,{message:d.message,type:d.type,onClose:()=>f(null)},d.id),ae&&h.jsx(zx,{isOpen:ae,onClose:()=>j(!1),onSubmit:_l,batches:I,existingStudents:b}),ee&&me&&h.jsx(Bx,{student:me,onClose:()=>ue(!1),onSave:ft,batches:I}),D&&h.jsx(qx,{isOpen:D,onClose:()=>J(!1),onUploadComplete:Mn,existingStudents:b,existingBatches:I}),ct&&h.jsx(Bs,{isOpen:!!ct,onClose:()=>ia(null),onConfirm:Dn,title:"Delete Student",message:`Are you sure you want to delete ${ct.Name}? This action cannot be undone.`,confirmButtonVariant:"danger",children:h.jsxs("div",{className:"flex items-center space-x-3 bg-red-50 dark:bg-red-900/20 p-3 rounded-md mt-4",children:[h.jsx("input",{id:"delete-tx-student",type:"checkbox",checked:bt,onChange:se=>Ht(se.target.checked),className:"h-4 w-4 text-red-600 bg-gray-100 border-gray-300 rounded focus:ring-red-500 dark:focus:ring-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),h.jsx("label",{htmlFor:"delete-tx-student",className:"text-sm text-red-800 dark:text-red-200",children:"Also permanently delete all payment history for this student."})]})}),Ot&&h.jsx(Bs,{isOpen:!!Ot,onClose:()=>ln(null),onConfirm:on,title:`Delete Batch "${Ot.name}"?`,message:`This will delete the batch "${Ot.name}". The students in this batch will remain but will be unassigned if not manually reassigned.`,confirmButtonText:"Confirm Deletion",confirmButtonVariant:"danger"}),fa&&h.jsx(Hx,{student:fa,onClose:()=>la(null),onSave:jl}),Ke&&h.jsx(Fx,{student:Ke,onClose:()=>vt(null),onPay:()=>{la(Ke),vt(null)},onEdit:()=>{qs(Ke),vt(null)},onManageVisitors:()=>Hs(Ke)}),ge&&Tt&&h.jsx(Lx,{student:Tt,onClose:()=>{Q(!1),sa(null)},onSave:$s})]})},nw=()=>{const[l,n]=X.useState(null),[s,i]=X.useState(!0),[c,d]=X.useState(()=>{const m=localStorage.getItem("theme"),p=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return m||(p?"dark":"light")});X.useEffect(()=>{const m=window.document.documentElement;c==="dark"?m.classList.add("dark"):m.classList.remove("dark"),localStorage.setItem("theme",c)},[c]),X.useEffect(()=>{const{data:m}=Zt.onAuthStateChange((p,y)=>{n((y==null?void 0:y.user)??null),i(!1)});return()=>{m.subscription.unsubscribe()}},[]);const f=()=>{d(m=>m==="light"?"dark":"light")};return s?h.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900",children:h.jsx(dm,{})}):l?h.jsx(aw,{user:l,theme:c,toggleTheme:f}):h.jsx(Tx,{})},hm=document.getElementById("root");if(!hm)throw new Error("Could not find root element to mount to");const rw=Lp.createRoot(hm);rw.render(h.jsx(Ap.StrictMode,{children:h.jsx(nw,{})}));
