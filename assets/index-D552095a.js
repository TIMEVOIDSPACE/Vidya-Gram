function kp(l,n){for(var s=0;s<n.length;s++){const i=n[s];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in l)){const d=Object.getOwnPropertyDescriptor(i,c);d&&Object.defineProperty(l,c,d.get?d:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();function xc(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function mg(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var n=l.default;if(typeof n=="function"){var s=function i(){return this instanceof i?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(l).forEach(function(i){var c=Object.getOwnPropertyDescriptor(l,i);Object.defineProperty(s,i,c.get?c:{enumerable:!0,get:function(){return l[i]}})}),s}var $u={exports:{}},Ss={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function Np(){if(T0)return Ss;T0=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(i,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var m in c)m!=="key"&&(d[m]=c[m])}else d=c;return c=d.ref,{$$typeof:l,type:i,key:f,ref:c!==void 0?c:null,props:d}}return Ss.Fragment=n,Ss.jsx=s,Ss.jsxs=s,Ss}var O0;function Tp(){return O0||(O0=1,$u.exports=Np()),$u.exports}var h=Tp(),Vu={exports:{}},me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0;function Op(){if(A0)return me;A0=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),x=Symbol.iterator;function w(_){return _===null||typeof _!="object"?null:(_=x&&_[x]||_["@@iterator"],typeof _=="function"?_:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,M={};function R(_,$,Z){this.props=_,this.context=$,this.refs=M,this.updater=Z||E}R.prototype.isReactComponent={},R.prototype.setState=function(_,$){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,$,"setState")},R.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function z(){}z.prototype=R.prototype;function L(_,$,Z){this.props=_,this.context=$,this.refs=M,this.updater=Z||E}var X=L.prototype=new z;X.constructor=L,T(X,R.prototype),X.isPureReactComponent=!0;var P=Array.isArray;function V(){}var Q={H:null,A:null,T:null,S:null},ie=Object.prototype.hasOwnProperty;function fe(_,$,Z){var W=Z.ref;return{$$typeof:l,type:_,key:$,ref:W!==void 0?W:null,props:Z}}function at(_,$){return fe(_.type,$,_.props)}function Ve(_){return typeof _=="object"&&_!==null&&_.$$typeof===l}function K(_){var $={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(Z){return $[Z]})}var ue=/\/+/g;function xe(_,$){return typeof _=="object"&&_!==null&&_.key!=null?K(""+_.key):$.toString(36)}function ce(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(V,V):(_.status="pending",_.then(function($){_.status==="pending"&&(_.status="fulfilled",_.value=$)},function($){_.status==="pending"&&(_.status="rejected",_.reason=$)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function D(_,$,Z,W,de){var ge=typeof _;(ge==="undefined"||ge==="boolean")&&(_=null);var I=!1;if(_===null)I=!0;else switch(ge){case"bigint":case"string":case"number":I=!0;break;case"object":switch(_.$$typeof){case l:case n:I=!0;break;case b:return I=_._init,D(I(_._payload),$,Z,W,de)}}if(I)return de=de(_),I=W===""?"."+xe(_,0):W,P(de)?(Z="",I!=null&&(Z=I.replace(ue,"$&/")+"/"),D(de,$,Z,"",function(nt){return nt})):de!=null&&(Ve(de)&&(de=at(de,Z+(de.key==null||_&&_.key===de.key?"":(""+de.key).replace(ue,"$&/")+"/")+I)),$.push(de)),1;I=0;var ve=W===""?".":W+":";if(P(_))for(var be=0;be<_.length;be++)W=_[be],ge=ve+xe(W,be),I+=D(W,$,Z,ge,de);else if(be=w(_),typeof be=="function")for(_=be.call(_),be=0;!(W=_.next()).done;)W=W.value,ge=ve+xe(W,be++),I+=D(W,$,Z,ge,de);else if(ge==="object"){if(typeof _.then=="function")return D(ce(_),$,Z,W,de);throw $=String(_),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return I}function O(_,$,Z){if(_==null)return _;var W=[],de=0;return D(_,W,"","",function(ge){return $.call(Z,ge,de++)}),W}function J(_){if(_._status===-1){var $=_._result;$=$(),$.then(function(Z){(_._status===0||_._status===-1)&&(_._status=1,_._result=Z)},function(Z){(_._status===0||_._status===-1)&&(_._status=2,_._result=Z)}),_._status===-1&&(_._status=0,_._result=$)}if(_._status===1)return _._result.default;throw _._result}var F=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},le={map:O,forEach:function(_,$,Z){O(_,function(){$.apply(this,arguments)},Z)},count:function(_){var $=0;return O(_,function(){$++}),$},toArray:function(_){return O(_,function($){return $})||[]},only:function(_){if(!Ve(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return me.Activity=j,me.Children=le,me.Component=R,me.Fragment=s,me.Profiler=c,me.PureComponent=L,me.StrictMode=i,me.Suspense=p,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,me.__COMPILER_RUNTIME={__proto__:null,c:function(_){return Q.H.useMemoCache(_)}},me.cache=function(_){return function(){return _.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(_,$,Z){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var W=T({},_.props),de=_.key;if($!=null)for(ge in $.key!==void 0&&(de=""+$.key),$)!ie.call($,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&$.ref===void 0||(W[ge]=$[ge]);var ge=arguments.length-2;if(ge===1)W.children=Z;else if(1<ge){for(var I=Array(ge),ve=0;ve<ge;ve++)I[ve]=arguments[ve+2];W.children=I}return fe(_.type,de,W)},me.createContext=function(_){return _={$$typeof:f,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:d,_context:_},_},me.createElement=function(_,$,Z){var W,de={},ge=null;if($!=null)for(W in $.key!==void 0&&(ge=""+$.key),$)ie.call($,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(de[W]=$[W]);var I=arguments.length-2;if(I===1)de.children=Z;else if(1<I){for(var ve=Array(I),be=0;be<I;be++)ve[be]=arguments[be+2];de.children=ve}if(_&&_.defaultProps)for(W in I=_.defaultProps,I)de[W]===void 0&&(de[W]=I[W]);return fe(_,ge,de)},me.createRef=function(){return{current:null}},me.forwardRef=function(_){return{$$typeof:m,render:_}},me.isValidElement=Ve,me.lazy=function(_){return{$$typeof:b,_payload:{_status:-1,_result:_},_init:J}},me.memo=function(_,$){return{$$typeof:y,type:_,compare:$===void 0?null:$}},me.startTransition=function(_){var $=Q.T,Z={};Q.T=Z;try{var W=_(),de=Q.S;de!==null&&de(Z,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(V,F)}catch(ge){F(ge)}finally{$!==null&&Z.types!==null&&($.types=Z.types),Q.T=$}},me.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},me.use=function(_){return Q.H.use(_)},me.useActionState=function(_,$,Z){return Q.H.useActionState(_,$,Z)},me.useCallback=function(_,$){return Q.H.useCallback(_,$)},me.useContext=function(_){return Q.H.useContext(_)},me.useDebugValue=function(){},me.useDeferredValue=function(_,$){return Q.H.useDeferredValue(_,$)},me.useEffect=function(_,$){return Q.H.useEffect(_,$)},me.useEffectEvent=function(_){return Q.H.useEffectEvent(_)},me.useId=function(){return Q.H.useId()},me.useImperativeHandle=function(_,$,Z){return Q.H.useImperativeHandle(_,$,Z)},me.useInsertionEffect=function(_,$){return Q.H.useInsertionEffect(_,$)},me.useLayoutEffect=function(_,$){return Q.H.useLayoutEffect(_,$)},me.useMemo=function(_,$){return Q.H.useMemo(_,$)},me.useOptimistic=function(_,$){return Q.H.useOptimistic(_,$)},me.useReducer=function(_,$,Z){return Q.H.useReducer(_,$,Z)},me.useRef=function(_){return Q.H.useRef(_)},me.useState=function(_){return Q.H.useState(_)},me.useSyncExternalStore=function(_,$,Z){return Q.H.useSyncExternalStore(_,$,Z)},me.useTransition=function(){return Q.H.useTransition()},me.version="19.2.0",me}var C0;function wc(){return C0||(C0=1,Vu.exports=Op()),Vu.exports}var Y=wc();const Ap=xc(Y);var Gu={exports:{}},js={},Pu={exports:{}},Yu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function Cp(){return R0||(R0=1,(function(l){function n(D,O){var J=D.length;D.push(O);e:for(;0<J;){var F=J-1>>>1,le=D[F];if(0<c(le,O))D[F]=O,D[J]=le,J=F;else break e}}function s(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var O=D[0],J=D.pop();if(J!==O){D[0]=J;e:for(var F=0,le=D.length,_=le>>>1;F<_;){var $=2*(F+1)-1,Z=D[$],W=$+1,de=D[W];if(0>c(Z,J))W<le&&0>c(de,Z)?(D[F]=de,D[W]=J,F=W):(D[F]=Z,D[$]=J,F=$);else if(W<le&&0>c(de,J))D[F]=de,D[W]=J,F=W;else break e}}return O}function c(D,O){var J=D.sortIndex-O.sortIndex;return J!==0?J:D.id-O.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();l.unstable_now=function(){return f.now()-m}}var p=[],y=[],b=1,j=null,x=3,w=!1,E=!1,T=!1,M=!1,R=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function X(D){for(var O=s(y);O!==null;){if(O.callback===null)i(y);else if(O.startTime<=D)i(y),O.sortIndex=O.expirationTime,n(p,O);else break;O=s(y)}}function P(D){if(T=!1,X(D),!E)if(s(p)!==null)E=!0,V||(V=!0,K());else{var O=s(y);O!==null&&ce(P,O.startTime-D)}}var V=!1,Q=-1,ie=5,fe=-1;function at(){return M?!0:!(l.unstable_now()-fe<ie)}function Ve(){if(M=!1,V){var D=l.unstable_now();fe=D;var O=!0;try{e:{E=!1,T&&(T=!1,z(Q),Q=-1),w=!0;var J=x;try{t:{for(X(D),j=s(p);j!==null&&!(j.expirationTime>D&&at());){var F=j.callback;if(typeof F=="function"){j.callback=null,x=j.priorityLevel;var le=F(j.expirationTime<=D);if(D=l.unstable_now(),typeof le=="function"){j.callback=le,X(D),O=!0;break t}j===s(p)&&i(p),X(D)}else i(p);j=s(p)}if(j!==null)O=!0;else{var _=s(y);_!==null&&ce(P,_.startTime-D),O=!1}}break e}finally{j=null,x=J,w=!1}O=void 0}}finally{O?K():V=!1}}}var K;if(typeof L=="function")K=function(){L(Ve)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,xe=ue.port2;ue.port1.onmessage=Ve,K=function(){xe.postMessage(null)}}else K=function(){R(Ve,0)};function ce(D,O){Q=R(function(){D(l.unstable_now())},O)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(D){D.callback=null},l.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<D?Math.floor(1e3/D):5},l.unstable_getCurrentPriorityLevel=function(){return x},l.unstable_next=function(D){switch(x){case 1:case 2:case 3:var O=3;break;default:O=x}var J=x;x=O;try{return D()}finally{x=J}},l.unstable_requestPaint=function(){M=!0},l.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var J=x;x=D;try{return O()}finally{x=J}},l.unstable_scheduleCallback=function(D,O,J){var F=l.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?F+J:F):J=F,D){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=J+le,D={id:b++,callback:O,priorityLevel:D,startTime:J,expirationTime:le,sortIndex:-1},J>F?(D.sortIndex=J,n(y,D),s(p)===null&&D===s(y)&&(T?(z(Q),Q=-1):T=!0,ce(P,J-F))):(D.sortIndex=le,n(p,D),E||w||(E=!0,V||(V=!0,K()))),D},l.unstable_shouldYield=at,l.unstable_wrapCallback=function(D){var O=x;return function(){var J=x;x=O;try{return D.apply(this,arguments)}finally{x=J}}}})(Yu)),Yu}var U0;function Rp(){return U0||(U0=1,Pu.exports=Cp()),Pu.exports}var Ku={exports:{}},dt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function Up(){if(D0)return dt;D0=1;var l=wc();function n(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(p,y,b){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:j==null?null:""+j,children:p,containerInfo:y,implementation:b}}var f=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,dt.createPortal=function(p,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return d(p,y,null,b)},dt.flushSync=function(p){var y=f.T,b=i.p;try{if(f.T=null,i.p=2,p)return p()}finally{f.T=y,i.p=b,i.d.f()}},dt.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(p,y))},dt.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},dt.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var b=y.as,j=m(b,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,w=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:j,integrity:x,fetchPriority:w}):b==="script"&&i.d.X(p,{crossOrigin:j,integrity:x,fetchPriority:w,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},dt.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=m(y.as,y.crossOrigin);i.d.M(p,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(p)},dt.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,j=m(b,y.crossOrigin);i.d.L(p,b,{crossOrigin:j,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},dt.preloadModule=function(p,y){if(typeof p=="string")if(y){var b=m(y.as,y.crossOrigin);i.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(p)},dt.requestFormReset=function(p){i.d.r(p)},dt.unstable_batchedUpdates=function(p,y){return p(y)},dt.useFormState=function(p,y,b){return f.H.useFormState(p,y,b)},dt.useFormStatus=function(){return f.H.useHostTransitionStatus()},dt.version="19.2.0",dt}var M0;function Dp(){if(M0)return Ku.exports;M0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Ku.exports=Up(),Ku.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function Mp(){if(z0)return js;z0=1;var l=Rp(),n=wc(),s=Dp();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(i(188))}function y(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,r=t;;){var o=a.return;if(o===null)break;var u=o.alternate;if(u===null){if(r=o.return,r!==null){a=r;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===a)return p(o),e;if(u===r)return p(o),t;u=u.sibling}throw Error(i(188))}if(a.return!==r.return)a=o,r=u;else{for(var g=!1,v=o.child;v;){if(v===a){g=!0,a=o,r=u;break}if(v===r){g=!0,r=o,a=u;break}v=v.sibling}if(!g){for(v=u.child;v;){if(v===a){g=!0,a=u,r=o;break}if(v===r){g=!0,r=u,a=o;break}v=v.sibling}if(!g)throw Error(i(189))}}if(a.alternate!==r)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var j=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),L=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),fe=Symbol.for("react.activity"),at=Symbol.for("react.memo_cache_sentinel"),Ve=Symbol.iterator;function K(e){return e===null||typeof e!="object"?null:(e=Ve&&e[Ve]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Symbol.for("react.client.reference");function xe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ue?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case R:return"Profiler";case M:return"StrictMode";case P:return"Suspense";case V:return"SuspenseList";case fe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case L:return e.displayName||"Context";case z:return(e._context.displayName||"Context")+".Consumer";case X:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q:return t=e.displayName||null,t!==null?t:xe(e.type)||"Memo";case ie:t=e._payload,e=e._init;try{return xe(e(t))}catch{}}return null}var ce=Array.isArray,D=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},F=[],le=-1;function _(e){return{current:e}}function $(e){0>le||(e.current=F[le],F[le]=null,le--)}function Z(e,t){le++,F[le]=e.current,e.current=t}var W=_(null),de=_(null),ge=_(null),I=_(null);function ve(e,t){switch(Z(ge,t),Z(de,e),Z(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Zf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Zf(t),e=Ff(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(W),Z(W,e)}function be(){$(W),$(de),$(ge)}function nt(e){e.memoizedState!==null&&Z(I,e);var t=W.current,a=Ff(t,e.type);t!==a&&(Z(de,e),Z(W,a))}function ft(e){de.current===e&&($(W),$(de)),I.current===e&&($(I),bs._currentValue=J)}var Qt,Jt;function vt(e){if(Qt===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Qt=t&&t[1]||"",Jt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qt+e+Jt}var Nt=!1;function la(e,t){if(!e||Nt)return"";Nt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(B){var U=B}Reflect.construct(e,[],G)}else{try{G.call()}catch(B){U=B}e.call(G.prototype)}}else{try{throw Error()}catch(B){U=B}(G=e())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(B){if(B&&U&&typeof B.stack=="string")return[B.stack,U.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=r.DetermineComponentFrameRoot(),g=u[0],v=u[1];if(g&&v){var S=g.split(`
`),C=v.split(`
`);for(o=r=0;r<S.length&&!S[r].includes("DetermineComponentFrameRoot");)r++;for(;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;if(r===S.length||o===C.length)for(r=S.length-1,o=C.length-1;1<=r&&0<=o&&S[r]!==C[o];)o--;for(;1<=r&&0<=o;r--,o--)if(S[r]!==C[o]){if(r!==1||o!==1)do if(r--,o--,0>o||S[r]!==C[o]){var q=`
`+S[r].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),q}while(1<=r&&0<=o);break}}}finally{Nt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?vt(a):""}function Un(e,t){switch(e.tag){case 26:case 27:case 5:return vt(e.type);case 16:return vt("Lazy");case 13:return e.child!==t&&t!==null?vt("Suspense Fallback"):vt("Suspense");case 19:return vt("SuspenseList");case 0:case 15:return la(e.type,!1);case 11:return la(e.type.render,!1);case 1:return la(e.type,!0);case 31:return vt("Activity");default:return""}}function Zt(e){try{var t="",a=null;do t+=Un(e,a),a=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Ft=Object.prototype.hasOwnProperty,Bt=l.unstable_scheduleCallback,oa=l.unstable_cancelCallback,Bs=l.unstable_shouldYield,xl=l.unstable_requestPaint,ct=l.unstable_now,wl=l.unstable_getCurrentPriorityLevel,Ls=l.unstable_ImmediatePriority,qs=l.unstable_UserBlockingPriority,Dn=l.unstable_NormalPriority,_l=l.unstable_LowPriority,Hs=l.unstable_IdlePriority,Sl=l.log,jl=l.unstable_setDisableYieldValue,on=null,gt=null;function ua(e){if(typeof Sl=="function"&&jl(e),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(on,e)}catch{}}var mt=Math.clz32?Math.clz32:Nl,El=Math.log,kl=Math.LN2;function Nl(e){return e>>>=0,e===0?32:31-(El(e)/kl|0)|0}var re=256,Oe=262144,bt=4194304;function ga(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $s(e,t,a){var r=e.pendingLanes;if(r===0)return 0;var o=0,u=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var v=r&134217727;return v!==0?(r=v&~u,r!==0?o=ga(r):(g&=v,g!==0?o=ga(g):a||(a=v&~e,a!==0&&(o=ga(a))))):(v=r&~u,v!==0?o=ga(v):g!==0?o=ga(g):a||(a=r&~e,a!==0&&(o=ga(a)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:o}function Rr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function fm(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cc(){var e=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),e}function Tl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ur(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function gm(e,t,a,r,o,u){var g=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,S=e.expirationTimes,C=e.hiddenUpdates;for(a=g&~a;0<a;){var q=31-mt(a),G=1<<q;v[q]=0,S[q]=-1;var U=C[q];if(U!==null)for(C[q]=null,q=0;q<U.length;q++){var B=U[q];B!==null&&(B.lane&=-536870913)}a&=~G}r!==0&&Rc(e,r,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(g&~t))}function Rc(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-mt(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|a&261930}function Uc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var r=31-mt(a),o=1<<r;o&t|e[r]&t&&(e[r]|=t),a&=~o}}function Dc(e,t){var a=t&-t;return a=(a&42)!==0?1:Ol(a),(a&(e.suspendedLanes|t))!==0?0:a}function Ol(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Al(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Mc(){var e=O.p;return e!==0?e:(e=window.event,e===void 0?32:w0(e.type))}function zc(e,t){var a=O.p;try{return O.p=e,t()}finally{O.p=a}}var Da=Math.random().toString(36).slice(2),rt="__reactFiber$"+Da,xt="__reactProps$"+Da,Mn="__reactContainer$"+Da,Cl="__reactEvents$"+Da,mm="__reactListeners$"+Da,ym="__reactHandles$"+Da,Bc="__reactResources$"+Da,Dr="__reactMarker$"+Da;function Rl(e){delete e[rt],delete e[xt],delete e[Cl],delete e[mm],delete e[ym]}function zn(e){var t=e[rt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Mn]||a[rt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=s0(e);e!==null;){if(a=e[rt])return a;e=s0(e)}return t}e=a,a=e.parentNode}return null}function Bn(e){if(e=e[rt]||e[Mn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Mr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Ln(e){var t=e[Bc];return t||(t=e[Bc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Dr]=!0}var Lc=new Set,qc={};function un(e,t){qn(e,t),qn(e+"Capture",t)}function qn(e,t){for(qc[e]=t,e=0;e<t.length;e++)Lc.add(t[e])}var pm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hc={},$c={};function vm(e){return Ft.call($c,e)?!0:Ft.call(Hc,e)?!1:pm.test(e)?$c[e]=!0:(Hc[e]=!0,!1)}function Vs(e,t,a){if(vm(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Gs(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function ma(e,t,a,r){if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+r)}}function Lt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bm(e,t,a){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(g){a=""+g,u.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ul(e){if(!e._valueTracker){var t=Vc(e)?"checked":"value";e._valueTracker=bm(e,t,""+e[t])}}function Gc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return e&&(r=Vc(e)?e.checked?"true":"false":e.value),e=r,e!==a?(t.setValue(e),!0):!1}function Ps(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var xm=/[\n"\\]/g;function qt(e){return e.replace(xm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Dl(e,t,a,r,o,u,g,v){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Lt(t)):e.value!==""+Lt(t)&&(e.value=""+Lt(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Ml(e,g,Lt(t)):a!=null?Ml(e,g,Lt(a)):r!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Lt(v):e.removeAttribute("name")}function Pc(e,t,a,r,o,u,g,v){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Ul(e);return}a=a!=null?""+Lt(a):"",t=t!=null?""+Lt(t):a,v||t===e.value||(e.value=t),e.defaultValue=t}r=r??o,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=v?e.checked:!!r,e.defaultChecked=!!r,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Ul(e)}function Ml(e,t,a){t==="number"&&Ps(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Hn(e,t,a,r){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&r&&(e[a].defaultSelected=!0)}else{for(a=""+Lt(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Yc(e,t,a){if(t!=null&&(t=""+Lt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Lt(a):""}function Kc(e,t,a,r){if(t==null){if(r!=null){if(a!=null)throw Error(i(92));if(ce(r)){if(1<r.length)throw Error(i(93));r=r[0]}a=r}a==null&&(a=""),t=a}a=Lt(t),e.defaultValue=a,r=e.textContent,r===a&&r!==""&&r!==null&&(e.value=r),Ul(e)}function $n(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var wm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xc(e,t,a){var r=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,a):typeof a!="number"||a===0||wm.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ic(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var r in a)!a.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&a[o]!==r&&Xc(e,o,r)}else for(var u in t)t.hasOwnProperty(u)&&Xc(e,u,t[u])}function zl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _m=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ys(e){return Sm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ya(){}var Bl=null;function Ll(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vn=null,Gn=null;function Qc(e){var t=Bn(e);if(t&&(e=t.stateNode)){var a=e[xt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Dl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+qt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var o=r[xt]||null;if(!o)throw Error(i(90));Dl(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)r=a[t],r.form===e.form&&Gc(r)}break e;case"textarea":Yc(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Hn(e,!!a.multiple,t,!1)}}}var ql=!1;function Jc(e,t,a){if(ql)return e(t,a);ql=!0;try{var r=e(t);return r}finally{if(ql=!1,(Vn!==null||Gn!==null)&&(Ri(),Vn&&(t=Vn,e=Gn,Gn=Vn=null,Qc(t),e)))for(t=0;t<e.length;t++)Qc(e[t])}}function zr(e,t){var a=e.stateNode;if(a===null)return null;var r=a[xt]||null;if(r===null)return null;a=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hl=!1;if(pa)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){Hl=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{Hl=!1}var Ma=null,$l=null,Ks=null;function Zc(){if(Ks)return Ks;var e,t=$l,a=t.length,r,o="value"in Ma?Ma.value:Ma.textContent,u=o.length;for(e=0;e<a&&t[e]===o[e];e++);var g=a-e;for(r=1;r<=g&&t[a-r]===o[u-r];r++);return Ks=o.slice(e,1<r?1-r:void 0)}function Xs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Is(){return!0}function Fc(){return!1}function wt(e){function t(a,r,o,u,g){this._reactName=a,this._targetInst=o,this.type=r,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(u):u[v]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Is:Fc,this.isPropagationStopped=Fc,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),t}var cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=wt(cn),Lr=j({},cn,{view:0,detail:0}),jm=wt(Lr),Vl,Gl,qr,Js=j({},Lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qr&&(qr&&e.type==="mousemove"?(Vl=e.screenX-qr.screenX,Gl=e.screenY-qr.screenY):Gl=Vl=0,qr=e),Vl)},movementY:function(e){return"movementY"in e?e.movementY:Gl}}),Wc=wt(Js),Em=j({},Js,{dataTransfer:0}),km=wt(Em),Nm=j({},Lr,{relatedTarget:0}),Pl=wt(Nm),Tm=j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0}),Om=wt(Tm),Am=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cm=wt(Am),Rm=j({},cn,{data:0}),ed=wt(Rm),Um={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mm[e])?!!t[e]:!1}function Yl(){return zm}var Bm=j({},Lr,{key:function(e){if(e.key){var t=Um[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Dm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yl,charCode:function(e){return e.type==="keypress"?Xs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lm=wt(Bm),qm=j({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),td=wt(qm),Hm=j({},Lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yl}),$m=wt(Hm),Vm=j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gm=wt(Vm),Pm=j({},Js,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ym=wt(Pm),Km=j({},cn,{newState:0,oldState:0}),Xm=wt(Km),Im=[9,13,27,32],Kl=pa&&"CompositionEvent"in window,Hr=null;pa&&"documentMode"in document&&(Hr=document.documentMode);var Qm=pa&&"TextEvent"in window&&!Hr,ad=pa&&(!Kl||Hr&&8<Hr&&11>=Hr),nd=" ",rd=!1;function sd(e,t){switch(e){case"keyup":return Im.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function id(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pn=!1;function Jm(e,t){switch(e){case"compositionend":return id(t);case"keypress":return t.which!==32?null:(rd=!0,nd);case"textInput":return e=t.data,e===nd&&rd?null:e;default:return null}}function Zm(e,t){if(Pn)return e==="compositionend"||!Kl&&sd(e,t)?(e=Zc(),Ks=$l=Ma=null,Pn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ad&&t.locale!=="ko"?null:t.data;default:return null}}var Fm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ld(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fm[e.type]:t==="textarea"}function od(e,t,a,r){Vn?Gn?Gn.push(r):Gn=[r]:Vn=r,t=qi(t,"onChange"),0<t.length&&(a=new Qs("onChange","change",null,a,r),e.push({event:a,listeners:t}))}var $r=null,Vr=null;function Wm(e){Yf(e,0)}function Zs(e){var t=Mr(e);if(Gc(t))return e}function ud(e,t){if(e==="change")return t}var cd=!1;if(pa){var Xl;if(pa){var Il="oninput"in document;if(!Il){var dd=document.createElement("div");dd.setAttribute("oninput","return;"),Il=typeof dd.oninput=="function"}Xl=Il}else Xl=!1;cd=Xl&&(!document.documentMode||9<document.documentMode)}function hd(){$r&&($r.detachEvent("onpropertychange",fd),Vr=$r=null)}function fd(e){if(e.propertyName==="value"&&Zs(Vr)){var t=[];od(t,Vr,e,Ll(e)),Jc(Wm,t)}}function ey(e,t,a){e==="focusin"?(hd(),$r=t,Vr=a,$r.attachEvent("onpropertychange",fd)):e==="focusout"&&hd()}function ty(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zs(Vr)}function ay(e,t){if(e==="click")return Zs(t)}function ny(e,t){if(e==="input"||e==="change")return Zs(t)}function ry(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:ry;function Gr(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var o=a[r];if(!Ft.call(t,o)||!Tt(e[o],t[o]))return!1}return!0}function gd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function md(e,t){var a=gd(e);e=0;for(var r;a;){if(a.nodeType===3){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gd(a)}}function yd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ps(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Ps(e.document)}return t}function Ql(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var sy=pa&&"documentMode"in document&&11>=document.documentMode,Yn=null,Jl=null,Pr=null,Zl=!1;function vd(e,t,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Zl||Yn==null||Yn!==Ps(r)||(r=Yn,"selectionStart"in r&&Ql(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pr&&Gr(Pr,r)||(Pr=r,r=qi(Jl,"onSelect"),0<r.length&&(t=new Qs("onSelect","select",null,t,a),e.push({event:t,listeners:r}),t.target=Yn)))}function dn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Kn={animationend:dn("Animation","AnimationEnd"),animationiteration:dn("Animation","AnimationIteration"),animationstart:dn("Animation","AnimationStart"),transitionrun:dn("Transition","TransitionRun"),transitionstart:dn("Transition","TransitionStart"),transitioncancel:dn("Transition","TransitionCancel"),transitionend:dn("Transition","TransitionEnd")},Fl={},bd={};pa&&(bd=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function hn(e){if(Fl[e])return Fl[e];if(!Kn[e])return e;var t=Kn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in bd)return Fl[e]=t[a];return e}var xd=hn("animationend"),wd=hn("animationiteration"),_d=hn("animationstart"),iy=hn("transitionrun"),ly=hn("transitionstart"),oy=hn("transitioncancel"),Sd=hn("transitionend"),jd=new Map,Wl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wl.push("scrollEnd");function Wt(e,t){jd.set(e,t),un(t,[e])}var Fs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ht=[],Xn=0,eo=0;function Ws(){for(var e=Xn,t=eo=Xn=0;t<e;){var a=Ht[t];Ht[t++]=null;var r=Ht[t];Ht[t++]=null;var o=Ht[t];Ht[t++]=null;var u=Ht[t];if(Ht[t++]=null,r!==null&&o!==null){var g=r.pending;g===null?o.next=o:(o.next=g.next,g.next=o),r.pending=o}u!==0&&Ed(a,o,u)}}function ei(e,t,a,r){Ht[Xn++]=e,Ht[Xn++]=t,Ht[Xn++]=a,Ht[Xn++]=r,eo|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function to(e,t,a,r){return ei(e,t,a,r),ti(e)}function fn(e,t){return ei(e,null,null,t),ti(e)}function Ed(e,t,a){e.lanes|=a;var r=e.alternate;r!==null&&(r.lanes|=a);for(var o=!1,u=e.return;u!==null;)u.childLanes|=a,r=u.alternate,r!==null&&(r.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-mt(a),e=u.hiddenUpdates,r=e[o],r===null?e[o]=[t]:r.push(t),t.lane=a|536870912),u):null}function ti(e){if(50<hs)throw hs=0,du=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var In={};function uy(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,a,r){return new uy(e,t,a,r)}function ao(e){return e=e.prototype,!(!e||!e.isReactComponent)}function va(e,t){var a=e.alternate;return a===null?(a=Ot(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function kd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ai(e,t,a,r,o,u){var g=0;if(r=e,typeof e=="function")ao(e)&&(g=1);else if(typeof e=="string")g=gp(e,a,W.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case fe:return e=Ot(31,a,t,o),e.elementType=fe,e.lanes=u,e;case T:return gn(a.children,o,u,t);case M:g=8,o|=24;break;case R:return e=Ot(12,a,t,o|2),e.elementType=R,e.lanes=u,e;case P:return e=Ot(13,a,t,o),e.elementType=P,e.lanes=u,e;case V:return e=Ot(19,a,t,o),e.elementType=V,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:g=10;break e;case z:g=9;break e;case X:g=11;break e;case Q:g=14;break e;case ie:g=16,r=null;break e}g=29,a=Error(i(130,e===null?"null":typeof e,"")),r=null}return t=Ot(g,a,t,o),t.elementType=e,t.type=r,t.lanes=u,t}function gn(e,t,a,r){return e=Ot(7,e,r,t),e.lanes=a,e}function no(e,t,a){return e=Ot(6,e,null,t),e.lanes=a,e}function Nd(e){var t=Ot(18,null,null,0);return t.stateNode=e,t}function ro(e,t,a){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Td=new WeakMap;function $t(e,t){if(typeof e=="object"&&e!==null){var a=Td.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Zt(t)},Td.set(e,t),t)}return{value:e,source:t,stack:Zt(t)}}var Qn=[],Jn=0,ni=null,Yr=0,Vt=[],Gt=0,za=null,ca=1,da="";function ba(e,t){Qn[Jn++]=Yr,Qn[Jn++]=ni,ni=e,Yr=t}function Od(e,t,a){Vt[Gt++]=ca,Vt[Gt++]=da,Vt[Gt++]=za,za=e;var r=ca;e=da;var o=32-mt(r)-1;r&=~(1<<o),a+=1;var u=32-mt(t)+o;if(30<u){var g=o-o%5;u=(r&(1<<g)-1).toString(32),r>>=g,o-=g,ca=1<<32-mt(t)+o|a<<o|r,da=u+e}else ca=1<<u|a<<o|r,da=e}function so(e){e.return!==null&&(ba(e,1),Od(e,1,0))}function io(e){for(;e===ni;)ni=Qn[--Jn],Qn[Jn]=null,Yr=Qn[--Jn],Qn[Jn]=null;for(;e===za;)za=Vt[--Gt],Vt[Gt]=null,da=Vt[--Gt],Vt[Gt]=null,ca=Vt[--Gt],Vt[Gt]=null}function Ad(e,t){Vt[Gt++]=ca,Vt[Gt++]=da,Vt[Gt++]=za,ca=t.id,da=t.overflow,za=e}var st=null,Le=null,Ee=!1,Ba=null,Pt=!1,lo=Error(i(519));function La(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kr($t(t,e)),lo}function Cd(e){var t=e.stateNode,a=e.type,r=e.memoizedProps;switch(t[rt]=e,t[xt]=r,a){case"dialog":_e("cancel",t),_e("close",t);break;case"iframe":case"object":case"embed":_e("load",t);break;case"video":case"audio":for(a=0;a<gs.length;a++)_e(gs[a],t);break;case"source":_e("error",t);break;case"img":case"image":case"link":_e("error",t),_e("load",t);break;case"details":_e("toggle",t);break;case"input":_e("invalid",t),Pc(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":_e("invalid",t);break;case"textarea":_e("invalid",t),Kc(t,r.value,r.defaultValue,r.children)}a=r.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||r.suppressHydrationWarning===!0||Qf(t.textContent,a)?(r.popover!=null&&(_e("beforetoggle",t),_e("toggle",t)),r.onScroll!=null&&_e("scroll",t),r.onScrollEnd!=null&&_e("scrollend",t),r.onClick!=null&&(t.onclick=ya),t=!0):t=!1,t||La(e,!0)}function Rd(e){for(st=e.return;st;)switch(st.tag){case 5:case 31:case 13:Pt=!1;return;case 27:case 3:Pt=!0;return;default:st=st.return}}function Zn(e){if(e!==st)return!1;if(!Ee)return Rd(e),Ee=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||ku(e.type,e.memoizedProps)),a=!a),a&&Le&&La(e),Rd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Le=r0(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Le=r0(e)}else t===27?(t=Le,Fa(e.type)?(e=Cu,Cu=null,Le=e):Le=t):Le=st?Kt(e.stateNode.nextSibling):null;return!0}function mn(){Le=st=null,Ee=!1}function oo(){var e=Ba;return e!==null&&(Et===null?Et=e:Et.push.apply(Et,e),Ba=null),e}function Kr(e){Ba===null?Ba=[e]:Ba.push(e)}var uo=_(null),yn=null,xa=null;function qa(e,t,a){Z(uo,t._currentValue),t._currentValue=a}function wa(e){e._currentValue=uo.current,$(uo)}function co(e,t,a){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===a)break;e=e.return}}function ho(e,t,a,r){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var g=o.child;u=u.firstContext;e:for(;u!==null;){var v=u;u=o;for(var S=0;S<t.length;S++)if(v.context===t[S]){u.lanes|=a,v=u.alternate,v!==null&&(v.lanes|=a),co(u.return,a,e),r||(g=null);break e}u=v.next}}else if(o.tag===18){if(g=o.return,g===null)throw Error(i(341));g.lanes|=a,u=g.alternate,u!==null&&(u.lanes|=a),co(g,a,e),g=null}else g=o.child;if(g!==null)g.return=o;else for(g=o;g!==null;){if(g===e){g=null;break}if(o=g.sibling,o!==null){o.return=g.return,g=o;break}g=g.return}o=g}}function Fn(e,t,a,r){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var g=o.alternate;if(g===null)throw Error(i(387));if(g=g.memoizedProps,g!==null){var v=o.type;Tt(o.pendingProps.value,g.value)||(e!==null?e.push(v):e=[v])}}else if(o===I.current){if(g=o.alternate,g===null)throw Error(i(387));g.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(bs):e=[bs])}o=o.return}e!==null&&ho(t,e,a,r),t.flags|=262144}function ri(e){for(e=e.firstContext;e!==null;){if(!Tt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function pn(e){yn=e,xa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function it(e){return Ud(yn,e)}function si(e,t){return yn===null&&pn(e),Ud(e,t)}function Ud(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},xa===null){if(e===null)throw Error(i(308));xa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xa=xa.next=t;return a}var cy=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},dy=l.unstable_scheduleCallback,hy=l.unstable_NormalPriority,Xe={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fo(){return{controller:new cy,data:new Map,refCount:0}}function Xr(e){e.refCount--,e.refCount===0&&dy(hy,function(){e.controller.abort()})}var Ir=null,go=0,Wn=0,er=null;function fy(e,t){if(Ir===null){var a=Ir=[];go=0,Wn=pu(),er={status:"pending",value:void 0,then:function(r){a.push(r)}}}return go++,t.then(Dd,Dd),t}function Dd(){if(--go===0&&Ir!==null){er!==null&&(er.status="fulfilled");var e=Ir;Ir=null,Wn=0,er=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function gy(e,t){var a=[],r={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(r.status="rejected",r.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),r}var Md=D.S;D.S=function(e,t){bf=ct(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&fy(e,t),Md!==null&&Md(e,t)};var vn=_(null);function mo(){var e=vn.current;return e!==null?e:ze.pooledCache}function ii(e,t){t===null?Z(vn,vn.current):Z(vn,t.pool)}function zd(){var e=mo();return e===null?null:{parent:Xe._currentValue,pool:e}}var tr=Error(i(460)),yo=Error(i(474)),li=Error(i(542)),oi={then:function(){}};function Bd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ld(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ya,ya),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Hd(e),e;default:if(typeof t.status=="string")t.then(ya,ya);else{if(e=ze,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=r}},function(r){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Hd(e),e}throw xn=t,tr}}function bn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(xn=a,tr):a}}var xn=null;function qd(){if(xn===null)throw Error(i(459));var e=xn;return xn=null,e}function Hd(e){if(e===tr||e===li)throw Error(i(483))}var ar=null,Qr=0;function ui(e){var t=Qr;return Qr+=1,ar===null&&(ar=[]),Ld(ar,e,t)}function Jr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ci(e,t){throw t.$$typeof===x?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function $d(e){function t(N,k){if(e){var A=N.deletions;A===null?(N.deletions=[k],N.flags|=16):A.push(k)}}function a(N,k){if(!e)return null;for(;k!==null;)t(N,k),k=k.sibling;return null}function r(N){for(var k=new Map;N!==null;)N.key!==null?k.set(N.key,N):k.set(N.index,N),N=N.sibling;return k}function o(N,k){return N=va(N,k),N.index=0,N.sibling=null,N}function u(N,k,A){return N.index=A,e?(A=N.alternate,A!==null?(A=A.index,A<k?(N.flags|=67108866,k):A):(N.flags|=67108866,k)):(N.flags|=1048576,k)}function g(N){return e&&N.alternate===null&&(N.flags|=67108866),N}function v(N,k,A,H){return k===null||k.tag!==6?(k=no(A,N.mode,H),k.return=N,k):(k=o(k,A),k.return=N,k)}function S(N,k,A,H){var se=A.type;return se===T?q(N,k,A.props.children,H,A.key):k!==null&&(k.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===ie&&bn(se)===k.type)?(k=o(k,A.props),Jr(k,A),k.return=N,k):(k=ai(A.type,A.key,A.props,null,N.mode,H),Jr(k,A),k.return=N,k)}function C(N,k,A,H){return k===null||k.tag!==4||k.stateNode.containerInfo!==A.containerInfo||k.stateNode.implementation!==A.implementation?(k=ro(A,N.mode,H),k.return=N,k):(k=o(k,A.children||[]),k.return=N,k)}function q(N,k,A,H,se){return k===null||k.tag!==7?(k=gn(A,N.mode,H,se),k.return=N,k):(k=o(k,A),k.return=N,k)}function G(N,k,A){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=no(""+k,N.mode,A),k.return=N,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case w:return A=ai(k.type,k.key,k.props,null,N.mode,A),Jr(A,k),A.return=N,A;case E:return k=ro(k,N.mode,A),k.return=N,k;case ie:return k=bn(k),G(N,k,A)}if(ce(k)||K(k))return k=gn(k,N.mode,A,null),k.return=N,k;if(typeof k.then=="function")return G(N,ui(k),A);if(k.$$typeof===L)return G(N,si(N,k),A);ci(N,k)}return null}function U(N,k,A,H){var se=k!==null?k.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return se!==null?null:v(N,k,""+A,H);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case w:return A.key===se?S(N,k,A,H):null;case E:return A.key===se?C(N,k,A,H):null;case ie:return A=bn(A),U(N,k,A,H)}if(ce(A)||K(A))return se!==null?null:q(N,k,A,H,null);if(typeof A.then=="function")return U(N,k,ui(A),H);if(A.$$typeof===L)return U(N,k,si(N,A),H);ci(N,A)}return null}function B(N,k,A,H,se){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return N=N.get(A)||null,v(k,N,""+H,se);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return N=N.get(H.key===null?A:H.key)||null,S(k,N,H,se);case E:return N=N.get(H.key===null?A:H.key)||null,C(k,N,H,se);case ie:return H=bn(H),B(N,k,A,H,se)}if(ce(H)||K(H))return N=N.get(A)||null,q(k,N,H,se,null);if(typeof H.then=="function")return B(N,k,A,ui(H),se);if(H.$$typeof===L)return B(N,k,A,si(k,H),se);ci(k,H)}return null}function ee(N,k,A,H){for(var se=null,ke=null,te=k,pe=k=0,je=null;te!==null&&pe<A.length;pe++){te.index>pe?(je=te,te=null):je=te.sibling;var Ne=U(N,te,A[pe],H);if(Ne===null){te===null&&(te=je);break}e&&te&&Ne.alternate===null&&t(N,te),k=u(Ne,k,pe),ke===null?se=Ne:ke.sibling=Ne,ke=Ne,te=je}if(pe===A.length)return a(N,te),Ee&&ba(N,pe),se;if(te===null){for(;pe<A.length;pe++)te=G(N,A[pe],H),te!==null&&(k=u(te,k,pe),ke===null?se=te:ke.sibling=te,ke=te);return Ee&&ba(N,pe),se}for(te=r(te);pe<A.length;pe++)je=B(te,N,pe,A[pe],H),je!==null&&(e&&je.alternate!==null&&te.delete(je.key===null?pe:je.key),k=u(je,k,pe),ke===null?se=je:ke.sibling=je,ke=je);return e&&te.forEach(function(nn){return t(N,nn)}),Ee&&ba(N,pe),se}function oe(N,k,A,H){if(A==null)throw Error(i(151));for(var se=null,ke=null,te=k,pe=k=0,je=null,Ne=A.next();te!==null&&!Ne.done;pe++,Ne=A.next()){te.index>pe?(je=te,te=null):je=te.sibling;var nn=U(N,te,Ne.value,H);if(nn===null){te===null&&(te=je);break}e&&te&&nn.alternate===null&&t(N,te),k=u(nn,k,pe),ke===null?se=nn:ke.sibling=nn,ke=nn,te=je}if(Ne.done)return a(N,te),Ee&&ba(N,pe),se;if(te===null){for(;!Ne.done;pe++,Ne=A.next())Ne=G(N,Ne.value,H),Ne!==null&&(k=u(Ne,k,pe),ke===null?se=Ne:ke.sibling=Ne,ke=Ne);return Ee&&ba(N,pe),se}for(te=r(te);!Ne.done;pe++,Ne=A.next())Ne=B(te,N,pe,Ne.value,H),Ne!==null&&(e&&Ne.alternate!==null&&te.delete(Ne.key===null?pe:Ne.key),k=u(Ne,k,pe),ke===null?se=Ne:ke.sibling=Ne,ke=Ne);return e&&te.forEach(function(Ep){return t(N,Ep)}),Ee&&ba(N,pe),se}function Me(N,k,A,H){if(typeof A=="object"&&A!==null&&A.type===T&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case w:e:{for(var se=A.key;k!==null;){if(k.key===se){if(se=A.type,se===T){if(k.tag===7){a(N,k.sibling),H=o(k,A.props.children),H.return=N,N=H;break e}}else if(k.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===ie&&bn(se)===k.type){a(N,k.sibling),H=o(k,A.props),Jr(H,A),H.return=N,N=H;break e}a(N,k);break}else t(N,k);k=k.sibling}A.type===T?(H=gn(A.props.children,N.mode,H,A.key),H.return=N,N=H):(H=ai(A.type,A.key,A.props,null,N.mode,H),Jr(H,A),H.return=N,N=H)}return g(N);case E:e:{for(se=A.key;k!==null;){if(k.key===se)if(k.tag===4&&k.stateNode.containerInfo===A.containerInfo&&k.stateNode.implementation===A.implementation){a(N,k.sibling),H=o(k,A.children||[]),H.return=N,N=H;break e}else{a(N,k);break}else t(N,k);k=k.sibling}H=ro(A,N.mode,H),H.return=N,N=H}return g(N);case ie:return A=bn(A),Me(N,k,A,H)}if(ce(A))return ee(N,k,A,H);if(K(A)){if(se=K(A),typeof se!="function")throw Error(i(150));return A=se.call(A),oe(N,k,A,H)}if(typeof A.then=="function")return Me(N,k,ui(A),H);if(A.$$typeof===L)return Me(N,k,si(N,A),H);ci(N,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,k!==null&&k.tag===6?(a(N,k.sibling),H=o(k,A),H.return=N,N=H):(a(N,k),H=no(A,N.mode,H),H.return=N,N=H),g(N)):a(N,k)}return function(N,k,A,H){try{Qr=0;var se=Me(N,k,A,H);return ar=null,se}catch(te){if(te===tr||te===li)throw te;var ke=Ot(29,te,null,N.mode);return ke.lanes=H,ke.return=N,ke}finally{}}}var wn=$d(!0),Vd=$d(!1),Ha=!1;function po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function $a(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Va(e,t,a){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Te&2)!==0){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=ti(e),Ed(e,null,a),t}return ei(e,r,t,a),ti(e)}function Zr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Uc(e,a)}}function bo(e,t){var a=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var o=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?o=u=g:u=u.next=g,a=a.next}while(a!==null);u===null?o=u=t:u=u.next=t}else o=u=t;a={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:r.shared,callbacks:r.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var xo=!1;function Fr(){if(xo){var e=er;if(e!==null)throw e}}function Wr(e,t,a,r){xo=!1;var o=e.updateQueue;Ha=!1;var u=o.firstBaseUpdate,g=o.lastBaseUpdate,v=o.shared.pending;if(v!==null){o.shared.pending=null;var S=v,C=S.next;S.next=null,g===null?u=C:g.next=C,g=S;var q=e.alternate;q!==null&&(q=q.updateQueue,v=q.lastBaseUpdate,v!==g&&(v===null?q.firstBaseUpdate=C:v.next=C,q.lastBaseUpdate=S))}if(u!==null){var G=o.baseState;g=0,q=C=S=null,v=u;do{var U=v.lane&-536870913,B=U!==v.lane;if(B?(Se&U)===U:(r&U)===U){U!==0&&U===Wn&&(xo=!0),q!==null&&(q=q.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var ee=e,oe=v;U=t;var Me=a;switch(oe.tag){case 1:if(ee=oe.payload,typeof ee=="function"){G=ee.call(Me,G,U);break e}G=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=oe.payload,U=typeof ee=="function"?ee.call(Me,G,U):ee,U==null)break e;G=j({},G,U);break e;case 2:Ha=!0}}U=v.callback,U!==null&&(e.flags|=64,B&&(e.flags|=8192),B=o.callbacks,B===null?o.callbacks=[U]:B.push(U))}else B={lane:U,tag:v.tag,payload:v.payload,callback:v.callback,next:null},q===null?(C=q=B,S=G):q=q.next=B,g|=U;if(v=v.next,v===null){if(v=o.shared.pending,v===null)break;B=v,v=B.next,B.next=null,o.lastBaseUpdate=B,o.shared.pending=null}}while(!0);q===null&&(S=G),o.baseState=S,o.firstBaseUpdate=C,o.lastBaseUpdate=q,u===null&&(o.shared.lanes=0),Xa|=g,e.lanes=g,e.memoizedState=G}}function Gd(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Pd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Gd(a[e],t)}var nr=_(null),di=_(0);function Yd(e,t){e=Aa,Z(di,e),Z(nr,t),Aa=e|t.baseLanes}function wo(){Z(di,Aa),Z(nr,nr.current)}function _o(){Aa=di.current,$(nr),$(di)}var At=_(null),Yt=null;function Ga(e){var t=e.alternate;Z(Ye,Ye.current&1),Z(At,e),Yt===null&&(t===null||nr.current!==null||t.memoizedState!==null)&&(Yt=e)}function So(e){Z(Ye,Ye.current),Z(At,e),Yt===null&&(Yt=e)}function Kd(e){e.tag===22?(Z(Ye,Ye.current),Z(At,e),Yt===null&&(Yt=e)):Pa()}function Pa(){Z(Ye,Ye.current),Z(At,At.current)}function Ct(e){$(At),Yt===e&&(Yt=null),$(Ye)}var Ye=_(0);function hi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ou(a)||Au(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _a=0,ye=null,Ue=null,Ie=null,fi=!1,rr=!1,_n=!1,gi=0,es=0,sr=null,my=0;function Ge(){throw Error(i(321))}function jo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Tt(e[a],t[a]))return!1;return!0}function Eo(e,t,a,r,o,u){return _a=u,ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=e===null||e.memoizedState===null?Oh:Ho,_n=!1,u=a(r,o),_n=!1,rr&&(u=Id(t,a,r,o)),Xd(e),u}function Xd(e){D.H=ns;var t=Ue!==null&&Ue.next!==null;if(_a=0,Ie=Ue=ye=null,fi=!1,es=0,sr=null,t)throw Error(i(300));e===null||Qe||(e=e.dependencies,e!==null&&ri(e)&&(Qe=!0))}function Id(e,t,a,r){ye=e;var o=0;do{if(rr&&(sr=null),es=0,rr=!1,25<=o)throw Error(i(301));if(o+=1,Ie=Ue=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}D.H=Ah,u=t(a,r)}while(rr);return u}function yy(){var e=D.H,t=e.useState()[0];return t=typeof t.then=="function"?ts(t):t,e=e.useState()[0],(Ue!==null?Ue.memoizedState:null)!==e&&(ye.flags|=1024),t}function ko(){var e=gi!==0;return gi=0,e}function No(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function To(e){if(fi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}fi=!1}_a=0,Ie=Ue=ye=null,rr=!1,es=gi=0,sr=null}function yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?ye.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function Ke(){if(Ue===null){var e=ye.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Ie===null?ye.memoizedState:Ie.next;if(t!==null)Ie=t,Ue=e;else{if(e===null)throw ye.alternate===null?Error(i(467)):Error(i(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ie===null?ye.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function mi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ts(e){var t=es;return es+=1,sr===null&&(sr=[]),e=Ld(sr,e,t),t=ye,(Ie===null?t.memoizedState:Ie.next)===null&&(t=t.alternate,D.H=t===null||t.memoizedState===null?Oh:Ho),e}function yi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ts(e);if(e.$$typeof===L)return it(e)}throw Error(i(438,String(e)))}function Oo(e){var t=null,a=ye.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var r=ye.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=mi(),ye.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),r=0;r<e;r++)a[r]=at;return t.index++,a}function Sa(e,t){return typeof t=="function"?t(e):t}function pi(e){var t=Ke();return Ao(t,Ue,e)}function Ao(e,t,a){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=a;var o=e.baseQueue,u=r.pending;if(u!==null){if(o!==null){var g=o.next;o.next=u.next,u.next=g}t.baseQueue=o=u,r.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var v=g=null,S=null,C=t,q=!1;do{var G=C.lane&-536870913;if(G!==C.lane?(Se&G)===G:(_a&G)===G){var U=C.revertLane;if(U===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),G===Wn&&(q=!0);else if((_a&U)===U){C=C.next,U===Wn&&(q=!0);continue}else G={lane:0,revertLane:C.revertLane,gesture:null,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null},S===null?(v=S=G,g=u):S=S.next=G,ye.lanes|=U,Xa|=U;G=C.action,_n&&a(u,G),u=C.hasEagerState?C.eagerState:a(u,G)}else U={lane:G,revertLane:C.revertLane,gesture:C.gesture,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null},S===null?(v=S=U,g=u):S=S.next=U,ye.lanes|=G,Xa|=G;C=C.next}while(C!==null&&C!==t);if(S===null?g=u:S.next=v,!Tt(u,e.memoizedState)&&(Qe=!0,q&&(a=er,a!==null)))throw a;e.memoizedState=u,e.baseState=g,e.baseQueue=S,r.lastRenderedState=u}return o===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Co(e){var t=Ke(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var r=a.dispatch,o=a.pending,u=t.memoizedState;if(o!==null){a.pending=null;var g=o=o.next;do u=e(u,g.action),g=g.next;while(g!==o);Tt(u,t.memoizedState)||(Qe=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,r]}function Qd(e,t,a){var r=ye,o=Ke(),u=Ee;if(u){if(a===void 0)throw Error(i(407));a=a()}else a=t();var g=!Tt((Ue||o).memoizedState,a);if(g&&(o.memoizedState=a,Qe=!0),o=o.queue,Do(Fd.bind(null,r,o,e),[e]),o.getSnapshot!==t||g||Ie!==null&&Ie.memoizedState.tag&1){if(r.flags|=2048,ir(9,{destroy:void 0},Zd.bind(null,r,o,a,t),null),ze===null)throw Error(i(349));u||(_a&127)!==0||Jd(r,t,a)}return a}function Jd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ye.updateQueue,t===null?(t=mi(),ye.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Zd(e,t,a,r){t.value=a,t.getSnapshot=r,Wd(t)&&eh(e)}function Fd(e,t,a){return a(function(){Wd(t)&&eh(e)})}function Wd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Tt(e,a)}catch{return!0}}function eh(e){var t=fn(e,2);t!==null&&kt(t,e,2)}function Ro(e){var t=yt();if(typeof e=="function"){var a=e;if(e=a(),_n){ua(!0);try{a()}finally{ua(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:e},t}function th(e,t,a,r){return e.baseState=a,Ao(e,Ue,typeof r=="function"?r:Sa)}function py(e,t,a,r,o){if(xi(e))throw Error(i(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){u.listeners.push(g)}};D.T!==null?a(!0):u.isTransition=!1,r(u),a=t.pending,a===null?(u.next=t.pending=u,ah(t,u)):(u.next=a.next,t.pending=a.next=u)}}function ah(e,t){var a=t.action,r=t.payload,o=e.state;if(t.isTransition){var u=D.T,g={};D.T=g;try{var v=a(o,r),S=D.S;S!==null&&S(g,v),nh(e,t,v)}catch(C){Uo(e,t,C)}finally{u!==null&&g.types!==null&&(u.types=g.types),D.T=u}}else try{u=a(o,r),nh(e,t,u)}catch(C){Uo(e,t,C)}}function nh(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(r){rh(e,t,r)},function(r){return Uo(e,t,r)}):rh(e,t,a)}function rh(e,t,a){t.status="fulfilled",t.value=a,sh(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,ah(e,a)))}function Uo(e,t,a){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=a,sh(t),t=t.next;while(t!==r)}e.action=null}function sh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ih(e,t){return t}function lh(e,t){if(Ee){var a=ze.formState;if(a!==null){e:{var r=ye;if(Ee){if(Le){t:{for(var o=Le,u=Pt;o.nodeType!==8;){if(!u){o=null;break t}if(o=Kt(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){Le=Kt(o.nextSibling),r=o.data==="F!";break e}}La(r)}r=!1}r&&(t=a[0])}}return a=yt(),a.memoizedState=a.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ih,lastRenderedState:t},a.queue=r,a=kh.bind(null,ye,r),r.dispatch=a,r=Ro(!1),u=qo.bind(null,ye,!1,r.queue),r=yt(),o={state:t,dispatch:null,action:e,pending:null},r.queue=o,a=py.bind(null,ye,o,u,a),o.dispatch=a,r.memoizedState=e,[t,a,!1]}function oh(e){var t=Ke();return uh(t,Ue,e)}function uh(e,t,a){if(t=Ao(e,t,ih)[0],e=pi(Sa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=ts(t)}catch(g){throw g===tr?li:g}else r=t;t=Ke();var o=t.queue,u=o.dispatch;return a!==t.memoizedState&&(ye.flags|=2048,ir(9,{destroy:void 0},vy.bind(null,o,a),null)),[r,u,e]}function vy(e,t){e.action=t}function ch(e){var t=Ke(),a=Ue;if(a!==null)return uh(t,a,e);Ke(),t=t.memoizedState,a=Ke();var r=a.queue.dispatch;return a.memoizedState=e,[t,r,!1]}function ir(e,t,a,r){return e={tag:e,create:a,deps:r,inst:t,next:null},t=ye.updateQueue,t===null&&(t=mi(),ye.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,t.lastEffect=e),e}function dh(){return Ke().memoizedState}function vi(e,t,a,r){var o=yt();ye.flags|=e,o.memoizedState=ir(1|t,{destroy:void 0},a,r===void 0?null:r)}function bi(e,t,a,r){var o=Ke();r=r===void 0?null:r;var u=o.memoizedState.inst;Ue!==null&&r!==null&&jo(r,Ue.memoizedState.deps)?o.memoizedState=ir(t,u,a,r):(ye.flags|=e,o.memoizedState=ir(1|t,u,a,r))}function hh(e,t){vi(8390656,8,e,t)}function Do(e,t){bi(2048,8,e,t)}function by(e){ye.flags|=4;var t=ye.updateQueue;if(t===null)t=mi(),ye.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function fh(e){var t=Ke().memoizedState;return by({ref:t,nextImpl:e}),function(){if((Te&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function gh(e,t){return bi(4,2,e,t)}function mh(e,t){return bi(4,4,e,t)}function yh(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ph(e,t,a){a=a!=null?a.concat([e]):null,bi(4,4,yh.bind(null,t,e),a)}function Mo(){}function vh(e,t){var a=Ke();t=t===void 0?null:t;var r=a.memoizedState;return t!==null&&jo(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function bh(e,t){var a=Ke();t=t===void 0?null:t;var r=a.memoizedState;if(t!==null&&jo(t,r[1]))return r[0];if(r=e(),_n){ua(!0);try{e()}finally{ua(!1)}}return a.memoizedState=[r,t],r}function zo(e,t,a){return a===void 0||(_a&1073741824)!==0&&(Se&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=wf(),ye.lanes|=e,Xa|=e,a)}function xh(e,t,a,r){return Tt(a,t)?a:nr.current!==null?(e=zo(e,a,r),Tt(e,t)||(Qe=!0),e):(_a&42)===0||(_a&1073741824)!==0&&(Se&261930)===0?(Qe=!0,e.memoizedState=a):(e=wf(),ye.lanes|=e,Xa|=e,t)}function wh(e,t,a,r,o){var u=O.p;O.p=u!==0&&8>u?u:8;var g=D.T,v={};D.T=v,qo(e,!1,t,a);try{var S=o(),C=D.S;if(C!==null&&C(v,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var q=gy(S,r);as(e,t,q,Dt(e))}else as(e,t,r,Dt(e))}catch(G){as(e,t,{then:function(){},status:"rejected",reason:G},Dt())}finally{O.p=u,g!==null&&v.types!==null&&(g.types=v.types),D.T=g}}function xy(){}function Bo(e,t,a,r){if(e.tag!==5)throw Error(i(476));var o=_h(e).queue;wh(e,o,t,J,a===null?xy:function(){return Sh(e),a(r)})}function _h(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:J},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Sh(e){var t=_h(e);t.next===null&&(t=e.alternate.memoizedState),as(e,t.next.queue,{},Dt())}function Lo(){return it(bs)}function jh(){return Ke().memoizedState}function Eh(){return Ke().memoizedState}function wy(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Dt();e=$a(a);var r=Va(t,e,a);r!==null&&(kt(r,t,a),Zr(r,t,a)),t={cache:fo()},e.payload=t;return}t=t.return}}function _y(e,t,a){var r=Dt();a={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xi(e)?Nh(t,a):(a=to(e,t,a,r),a!==null&&(kt(a,e,r),Th(a,t,r)))}function kh(e,t,a){var r=Dt();as(e,t,a,r)}function as(e,t,a,r){var o={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xi(e))Nh(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var g=t.lastRenderedState,v=u(g,a);if(o.hasEagerState=!0,o.eagerState=v,Tt(v,g))return ei(e,t,o,0),ze===null&&Ws(),!1}catch{}finally{}if(a=to(e,t,o,r),a!==null)return kt(a,e,r),Th(a,t,r),!0}return!1}function qo(e,t,a,r){if(r={lane:2,revertLane:pu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},xi(e)){if(t)throw Error(i(479))}else t=to(e,a,r,2),t!==null&&kt(t,e,2)}function xi(e){var t=e.alternate;return e===ye||t!==null&&t===ye}function Nh(e,t){rr=fi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Th(e,t,a){if((a&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Uc(e,a)}}var ns={readContext:it,use:yi,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge};ns.useEffectEvent=Ge;var Oh={readContext:it,use:yi,useCallback:function(e,t){return yt().memoizedState=[e,t===void 0?null:t],e},useContext:it,useEffect:hh,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,vi(4194308,4,yh.bind(null,t,e),a)},useLayoutEffect:function(e,t){return vi(4194308,4,e,t)},useInsertionEffect:function(e,t){vi(4,2,e,t)},useMemo:function(e,t){var a=yt();t=t===void 0?null:t;var r=e();if(_n){ua(!0);try{e()}finally{ua(!1)}}return a.memoizedState=[r,t],r},useReducer:function(e,t,a){var r=yt();if(a!==void 0){var o=a(t);if(_n){ua(!0);try{a(t)}finally{ua(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=_y.bind(null,ye,e),[r.memoizedState,e]},useRef:function(e){var t=yt();return e={current:e},t.memoizedState=e},useState:function(e){e=Ro(e);var t=e.queue,a=kh.bind(null,ye,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Mo,useDeferredValue:function(e,t){var a=yt();return zo(a,e,t)},useTransition:function(){var e=Ro(!1);return e=wh.bind(null,ye,e.queue,!0,!1),yt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var r=ye,o=yt();if(Ee){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),ze===null)throw Error(i(349));(Se&127)!==0||Jd(r,t,a)}o.memoizedState=a;var u={value:a,getSnapshot:t};return o.queue=u,hh(Fd.bind(null,r,u,e),[e]),r.flags|=2048,ir(9,{destroy:void 0},Zd.bind(null,r,u,a,t),null),a},useId:function(){var e=yt(),t=ze.identifierPrefix;if(Ee){var a=da,r=ca;a=(r&~(1<<32-mt(r)-1)).toString(32)+a,t="_"+t+"R_"+a,a=gi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=my++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Lo,useFormState:lh,useActionState:lh,useOptimistic:function(e){var t=yt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=qo.bind(null,ye,!0,a),a.dispatch=t,[e,t]},useMemoCache:Oo,useCacheRefresh:function(){return yt().memoizedState=wy.bind(null,ye)},useEffectEvent:function(e){var t=yt(),a={impl:e};return t.memoizedState=a,function(){if((Te&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Ho={readContext:it,use:yi,useCallback:vh,useContext:it,useEffect:Do,useImperativeHandle:ph,useInsertionEffect:gh,useLayoutEffect:mh,useMemo:bh,useReducer:pi,useRef:dh,useState:function(){return pi(Sa)},useDebugValue:Mo,useDeferredValue:function(e,t){var a=Ke();return xh(a,Ue.memoizedState,e,t)},useTransition:function(){var e=pi(Sa)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:ts(e),t]},useSyncExternalStore:Qd,useId:jh,useHostTransitionStatus:Lo,useFormState:oh,useActionState:oh,useOptimistic:function(e,t){var a=Ke();return th(a,Ue,e,t)},useMemoCache:Oo,useCacheRefresh:Eh};Ho.useEffectEvent=fh;var Ah={readContext:it,use:yi,useCallback:vh,useContext:it,useEffect:Do,useImperativeHandle:ph,useInsertionEffect:gh,useLayoutEffect:mh,useMemo:bh,useReducer:Co,useRef:dh,useState:function(){return Co(Sa)},useDebugValue:Mo,useDeferredValue:function(e,t){var a=Ke();return Ue===null?zo(a,e,t):xh(a,Ue.memoizedState,e,t)},useTransition:function(){var e=Co(Sa)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:ts(e),t]},useSyncExternalStore:Qd,useId:jh,useHostTransitionStatus:Lo,useFormState:ch,useActionState:ch,useOptimistic:function(e,t){var a=Ke();return Ue!==null?th(a,Ue,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Oo,useCacheRefresh:Eh};Ah.useEffectEvent=fh;function $o(e,t,a,r){t=e.memoizedState,a=a(r,t),a=a==null?t:j({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Vo={enqueueSetState:function(e,t,a){e=e._reactInternals;var r=Dt(),o=$a(r);o.payload=t,a!=null&&(o.callback=a),t=Va(e,o,r),t!==null&&(kt(t,e,r),Zr(t,e,r))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var r=Dt(),o=$a(r);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=Va(e,o,r),t!==null&&(kt(t,e,r),Zr(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Dt(),r=$a(a);r.tag=2,t!=null&&(r.callback=t),t=Va(e,r,a),t!==null&&(kt(t,e,a),Zr(t,e,a))}};function Ch(e,t,a,r,o,u,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,u,g):t.prototype&&t.prototype.isPureReactComponent?!Gr(a,r)||!Gr(o,u):!0}function Rh(e,t,a,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Sn(e,t){var a=t;if("ref"in t){a={};for(var r in t)r!=="ref"&&(a[r]=t[r])}if(e=e.defaultProps){a===t&&(a=j({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}function Uh(e){Fs(e)}function Dh(e){console.error(e)}function Mh(e){Fs(e)}function wi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function zh(e,t,a){try{var r=e.onCaughtError;r(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Go(e,t,a){return a=$a(a),a.tag=3,a.payload={element:null},a.callback=function(){wi(e,t)},a}function Bh(e){return e=$a(e),e.tag=3,e}function Lh(e,t,a,r){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var u=r.value;e.payload=function(){return o(u)},e.callback=function(){zh(t,a,r)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){zh(t,a,r),typeof o!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})})}function Sy(e,t,a,r,o){if(a.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=a.alternate,t!==null&&Fn(t,a,o,!0),a=At.current,a!==null){switch(a.tag){case 31:case 13:return Yt===null?Ui():a.alternate===null&&Pe===0&&(Pe=3),a.flags&=-257,a.flags|=65536,a.lanes=o,r===oi?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([r]):t.add(r),gu(e,r,o)),!1;case 22:return a.flags|=65536,r===oi?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([r]):a.add(r)),gu(e,r,o)),!1}throw Error(i(435,a.tag))}return gu(e,r,o),Ui(),!1}if(Ee)return t=At.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==lo&&(e=Error(i(422),{cause:r}),Kr($t(e,a)))):(r!==lo&&(t=Error(i(423),{cause:r}),Kr($t(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,r=$t(r,a),o=Go(e.stateNode,r,o),bo(e,o),Pe!==4&&(Pe=2)),!1;var u=Error(i(520),{cause:r});if(u=$t(u,a),ds===null?ds=[u]:ds.push(u),Pe!==4&&(Pe=2),t===null)return!0;r=$t(r,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=Go(a.stateNode,r,e),bo(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Ia===null||!Ia.has(u))))return a.flags|=65536,o&=-o,a.lanes|=o,o=Bh(o),Lh(o,e,a,r),bo(a,o),!1}a=a.return}while(a!==null);return!1}var Po=Error(i(461)),Qe=!1;function lt(e,t,a,r){t.child=e===null?Vd(t,null,a,r):wn(t,e.child,a,r)}function qh(e,t,a,r,o){a=a.render;var u=t.ref;if("ref"in r){var g={};for(var v in r)v!=="ref"&&(g[v]=r[v])}else g=r;return pn(t),r=Eo(e,t,a,g,u,o),v=ko(),e!==null&&!Qe?(No(e,t,o),ja(e,t,o)):(Ee&&v&&so(t),t.flags|=1,lt(e,t,r,o),t.child)}function Hh(e,t,a,r,o){if(e===null){var u=a.type;return typeof u=="function"&&!ao(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,$h(e,t,u,r,o)):(e=ai(a.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Fo(e,o)){var g=u.memoizedProps;if(a=a.compare,a=a!==null?a:Gr,a(g,r)&&e.ref===t.ref)return ja(e,t,o)}return t.flags|=1,e=va(u,r),e.ref=t.ref,e.return=t,t.child=e}function $h(e,t,a,r,o){if(e!==null){var u=e.memoizedProps;if(Gr(u,r)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=r=u,Fo(e,o))(e.flags&131072)!==0&&(Qe=!0);else return t.lanes=e.lanes,ja(e,t,o)}return Yo(e,t,a,r,o)}function Vh(e,t,a,r){var o=r.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(r=t.child=e.child,o=0;r!==null;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~u}else r=0,t.child=null;return Gh(e,t,u,a,r)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ii(t,u!==null?u.cachePool:null),u!==null?Yd(t,u):wo(),Kd(t);else return r=t.lanes=536870912,Gh(e,t,u!==null?u.baseLanes|a:a,a,r)}else u!==null?(ii(t,u.cachePool),Yd(t,u),Pa(),t.memoizedState=null):(e!==null&&ii(t,null),wo(),Pa());return lt(e,t,o,a),t.child}function rs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Gh(e,t,a,r,o){var u=mo();return u=u===null?null:{parent:Xe._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&ii(t,null),wo(),Kd(t),e!==null&&Fn(e,t,r,!0),t.childLanes=o,null}function _i(e,t){return t=ji({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ph(e,t,a){return wn(t,e.child,null,a),e=_i(t,t.pendingProps),e.flags|=2,Ct(t),t.memoizedState=null,e}function jy(e,t,a){var r=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ee){if(r.mode==="hidden")return e=_i(t,r),t.lanes=536870912,rs(null,e);if(So(t),(e=Le)?(e=n0(e,Pt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:za!==null?{id:ca,overflow:da}:null,retryLane:536870912,hydrationErrors:null},a=Nd(e),a.return=t,t.child=a,st=t,Le=null)):e=null,e===null)throw La(t);return t.lanes=536870912,null}return _i(t,r)}var u=e.memoizedState;if(u!==null){var g=u.dehydrated;if(So(t),o)if(t.flags&256)t.flags&=-257,t=Ph(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(Qe||Fn(e,t,a,!1),o=(a&e.childLanes)!==0,Qe||o){if(r=ze,r!==null&&(g=Dc(r,a),g!==0&&g!==u.retryLane))throw u.retryLane=g,fn(e,g),kt(r,e,g),Po;Ui(),t=Ph(e,t,a)}else e=u.treeContext,Le=Kt(g.nextSibling),st=t,Ee=!0,Ba=null,Pt=!1,e!==null&&Ad(t,e),t=_i(t,r),t.flags|=4096;return t}return e=va(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Si(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Yo(e,t,a,r,o){return pn(t),a=Eo(e,t,a,r,void 0,o),r=ko(),e!==null&&!Qe?(No(e,t,o),ja(e,t,o)):(Ee&&r&&so(t),t.flags|=1,lt(e,t,a,o),t.child)}function Yh(e,t,a,r,o,u){return pn(t),t.updateQueue=null,a=Id(t,r,a,o),Xd(e),r=ko(),e!==null&&!Qe?(No(e,t,u),ja(e,t,u)):(Ee&&r&&so(t),t.flags|=1,lt(e,t,a,u),t.child)}function Kh(e,t,a,r,o){if(pn(t),t.stateNode===null){var u=In,g=a.contextType;typeof g=="object"&&g!==null&&(u=it(g)),u=new a(r,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Vo,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=r,u.state=t.memoizedState,u.refs={},po(t),g=a.contextType,u.context=typeof g=="object"&&g!==null?it(g):In,u.state=t.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&($o(t,a,g,r),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(g=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),g!==u.state&&Vo.enqueueReplaceState(u,u.state,null),Wr(t,r,u,o),Fr(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){u=t.stateNode;var v=t.memoizedProps,S=Sn(a,v);u.props=S;var C=u.context,q=a.contextType;g=In,typeof q=="object"&&q!==null&&(g=it(q));var G=a.getDerivedStateFromProps;q=typeof G=="function"||typeof u.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,q||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(v||C!==g)&&Rh(t,u,r,g),Ha=!1;var U=t.memoizedState;u.state=U,Wr(t,r,u,o),Fr(),C=t.memoizedState,v||U!==C||Ha?(typeof G=="function"&&($o(t,a,G,r),C=t.memoizedState),(S=Ha||Ch(t,a,S,r,U,C,g))?(q||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=C),u.props=r,u.state=C,u.context=g,r=S):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,vo(e,t),g=t.memoizedProps,q=Sn(a,g),u.props=q,G=t.pendingProps,U=u.context,C=a.contextType,S=In,typeof C=="object"&&C!==null&&(S=it(C)),v=a.getDerivedStateFromProps,(C=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==G||U!==S)&&Rh(t,u,r,S),Ha=!1,U=t.memoizedState,u.state=U,Wr(t,r,u,o),Fr();var B=t.memoizedState;g!==G||U!==B||Ha||e!==null&&e.dependencies!==null&&ri(e.dependencies)?(typeof v=="function"&&($o(t,a,v,r),B=t.memoizedState),(q=Ha||Ch(t,a,q,r,U,B,S)||e!==null&&e.dependencies!==null&&ri(e.dependencies))?(C||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,B,S),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,B,S)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=B),u.props=r,u.state=B,u.context=S,r=q):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),r=!1)}return u=r,Si(e,t),r=(t.flags&128)!==0,u||r?(u=t.stateNode,a=r&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&r?(t.child=wn(t,e.child,null,o),t.child=wn(t,null,a,o)):lt(e,t,a,o),t.memoizedState=u.state,e=t.child):e=ja(e,t,o),e}function Xh(e,t,a,r){return mn(),t.flags|=256,lt(e,t,a,r),t.child}var Ko={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:zd()}}function Io(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ut),e}function Ih(e,t,a){var r=t.pendingProps,o=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:(Ye.current&2)!==0),g&&(o=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ee){if(o?Ga(t):Pa(),(e=Le)?(e=n0(e,Pt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:za!==null?{id:ca,overflow:da}:null,retryLane:536870912,hydrationErrors:null},a=Nd(e),a.return=t,t.child=a,st=t,Le=null)):e=null,e===null)throw La(t);return Au(e)?t.lanes=32:t.lanes=536870912,null}var v=r.children;return r=r.fallback,o?(Pa(),o=t.mode,v=ji({mode:"hidden",children:v},o),r=gn(r,o,a,null),v.return=t,r.return=t,v.sibling=r,t.child=v,r=t.child,r.memoizedState=Xo(a),r.childLanes=Io(e,g,a),t.memoizedState=Ko,rs(null,r)):(Ga(t),Qo(t,v))}var S=e.memoizedState;if(S!==null&&(v=S.dehydrated,v!==null)){if(u)t.flags&256?(Ga(t),t.flags&=-257,t=Jo(e,t,a)):t.memoizedState!==null?(Pa(),t.child=e.child,t.flags|=128,t=null):(Pa(),v=r.fallback,o=t.mode,r=ji({mode:"visible",children:r.children},o),v=gn(v,o,a,null),v.flags|=2,r.return=t,v.return=t,r.sibling=v,t.child=r,wn(t,e.child,null,a),r=t.child,r.memoizedState=Xo(a),r.childLanes=Io(e,g,a),t.memoizedState=Ko,t=rs(null,r));else if(Ga(t),Au(v)){if(g=v.nextSibling&&v.nextSibling.dataset,g)var C=g.dgst;g=C,r=Error(i(419)),r.stack="",r.digest=g,Kr({value:r,source:null,stack:null}),t=Jo(e,t,a)}else if(Qe||Fn(e,t,a,!1),g=(a&e.childLanes)!==0,Qe||g){if(g=ze,g!==null&&(r=Dc(g,a),r!==0&&r!==S.retryLane))throw S.retryLane=r,fn(e,r),kt(g,e,r),Po;Ou(v)||Ui(),t=Jo(e,t,a)}else Ou(v)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,Le=Kt(v.nextSibling),st=t,Ee=!0,Ba=null,Pt=!1,e!==null&&Ad(t,e),t=Qo(t,r.children),t.flags|=4096);return t}return o?(Pa(),v=r.fallback,o=t.mode,S=e.child,C=S.sibling,r=va(S,{mode:"hidden",children:r.children}),r.subtreeFlags=S.subtreeFlags&65011712,C!==null?v=va(C,v):(v=gn(v,o,a,null),v.flags|=2),v.return=t,r.return=t,r.sibling=v,t.child=r,rs(null,r),r=t.child,v=e.child.memoizedState,v===null?v=Xo(a):(o=v.cachePool,o!==null?(S=Xe._currentValue,o=o.parent!==S?{parent:S,pool:S}:o):o=zd(),v={baseLanes:v.baseLanes|a,cachePool:o}),r.memoizedState=v,r.childLanes=Io(e,g,a),t.memoizedState=Ko,rs(e.child,r)):(Ga(t),a=e.child,e=a.sibling,a=va(a,{mode:"visible",children:r.children}),a.return=t,a.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=a,t.memoizedState=null,a)}function Qo(e,t){return t=ji({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ji(e,t){return e=Ot(22,e,null,t),e.lanes=0,e}function Jo(e,t,a){return wn(t,e.child,null,a),e=Qo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qh(e,t,a){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),co(e.return,t,a)}function Zo(e,t,a,r,o,u){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:o,treeForkCount:u}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=r,g.tail=a,g.tailMode=o,g.treeForkCount=u)}function Jh(e,t,a){var r=t.pendingProps,o=r.revealOrder,u=r.tail;r=r.children;var g=Ye.current,v=(g&2)!==0;if(v?(g=g&1|2,t.flags|=128):g&=1,Z(Ye,g),lt(e,t,r,a),r=Ee?Yr:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qh(e,a,t);else if(e.tag===19)Qh(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&hi(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),Zo(t,!1,o,a,u,r);break;case"backwards":case"unstable_legacy-backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&hi(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}Zo(t,!0,a,null,u,r);break;case"together":Zo(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function ja(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Xa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Fn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=va(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=va(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Fo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ri(e)))}function Ey(e,t,a){switch(t.tag){case 3:ve(t,t.stateNode.containerInfo),qa(t,Xe,e.memoizedState.cache),mn();break;case 27:case 5:nt(t);break;case 4:ve(t,t.stateNode.containerInfo);break;case 10:qa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,So(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Ga(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Ih(e,t,a):(Ga(t),e=ja(e,t,a),e!==null?e.sibling:null);Ga(t);break;case 19:var o=(e.flags&128)!==0;if(r=(a&t.childLanes)!==0,r||(Fn(e,t,a,!1),r=(a&t.childLanes)!==0),o){if(r)return Jh(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Z(Ye,Ye.current),r)break;return null;case 22:return t.lanes=0,Vh(e,t,a,t.pendingProps);case 24:qa(t,Xe,e.memoizedState.cache)}return ja(e,t,a)}function Zh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Qe=!0;else{if(!Fo(e,a)&&(t.flags&128)===0)return Qe=!1,Ey(e,t,a);Qe=(e.flags&131072)!==0}else Qe=!1,Ee&&(t.flags&1048576)!==0&&Od(t,Yr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=bn(t.elementType),t.type=e,typeof e=="function")ao(e)?(r=Sn(e,r),t.tag=1,t=Kh(null,t,e,r,a)):(t.tag=0,t=Yo(null,t,e,r,a));else{if(e!=null){var o=e.$$typeof;if(o===X){t.tag=11,t=qh(null,t,e,r,a);break e}else if(o===Q){t.tag=14,t=Hh(null,t,e,r,a);break e}}throw t=xe(e)||e,Error(i(306,t,""))}}return t;case 0:return Yo(e,t,t.type,t.pendingProps,a);case 1:return r=t.type,o=Sn(r,t.pendingProps),Kh(e,t,r,o,a);case 3:e:{if(ve(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var u=t.memoizedState;o=u.element,vo(e,t),Wr(t,r,null,a);var g=t.memoizedState;if(r=g.cache,qa(t,Xe,r),r!==u.cache&&ho(t,[Xe],a,!0),Fr(),r=g.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Xh(e,t,r,a);break e}else if(r!==o){o=$t(Error(i(424)),t),Kr(o),t=Xh(e,t,r,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Le=Kt(e.firstChild),st=t,Ee=!0,Ba=null,Pt=!0,a=Vd(t,null,r,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(mn(),r===o){t=ja(e,t,a);break e}lt(e,t,r,a)}t=t.child}return t;case 26:return Si(e,t),e===null?(a=u0(t.type,null,t.pendingProps,null))?t.memoizedState=a:Ee||(a=t.type,e=t.pendingProps,r=Hi(ge.current).createElement(a),r[rt]=t,r[xt]=e,ot(r,a,e),et(r),t.stateNode=r):t.memoizedState=u0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return nt(t),e===null&&Ee&&(r=t.stateNode=i0(t.type,t.pendingProps,ge.current),st=t,Pt=!0,o=Le,Fa(t.type)?(Cu=o,Le=Kt(r.firstChild)):Le=o),lt(e,t,t.pendingProps.children,a),Si(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ee&&((o=r=Le)&&(r=tp(r,t.type,t.pendingProps,Pt),r!==null?(t.stateNode=r,st=t,Le=Kt(r.firstChild),Pt=!1,o=!0):o=!1),o||La(t)),nt(t),o=t.type,u=t.pendingProps,g=e!==null?e.memoizedProps:null,r=u.children,ku(o,u)?r=null:g!==null&&ku(o,g)&&(t.flags|=32),t.memoizedState!==null&&(o=Eo(e,t,yy,null,null,a),bs._currentValue=o),Si(e,t),lt(e,t,r,a),t.child;case 6:return e===null&&Ee&&((e=a=Le)&&(a=ap(a,t.pendingProps,Pt),a!==null?(t.stateNode=a,st=t,Le=null,e=!0):e=!1),e||La(t)),null;case 13:return Ih(e,t,a);case 4:return ve(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=wn(t,null,r,a):lt(e,t,r,a),t.child;case 11:return qh(e,t,t.type,t.pendingProps,a);case 7:return lt(e,t,t.pendingProps,a),t.child;case 8:return lt(e,t,t.pendingProps.children,a),t.child;case 12:return lt(e,t,t.pendingProps.children,a),t.child;case 10:return r=t.pendingProps,qa(t,t.type,r.value),lt(e,t,r.children,a),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,pn(t),o=it(o),r=r(o),t.flags|=1,lt(e,t,r,a),t.child;case 14:return Hh(e,t,t.type,t.pendingProps,a);case 15:return $h(e,t,t.type,t.pendingProps,a);case 19:return Jh(e,t,a);case 31:return jy(e,t,a);case 22:return Vh(e,t,a,t.pendingProps);case 24:return pn(t),r=it(Xe),e===null?(o=mo(),o===null&&(o=ze,u=fo(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=a),o=u),t.memoizedState={parent:r,cache:o},po(t),qa(t,Xe,o)):((e.lanes&a)!==0&&(vo(e,t),Wr(t,null,null,a),Fr()),o=e.memoizedState,u=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),qa(t,Xe,r)):(r=u.cache,qa(t,Xe,r),r!==o.cache&&ho(t,[Xe],a,!0))),lt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Ea(e){e.flags|=4}function Wo(e,t,a,r,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(Ef())e.flags|=8192;else throw xn=oi,yo}else e.flags&=-16777217}function Fh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!g0(t))if(Ef())e.flags|=8192;else throw xn=oi,yo}function Ei(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Cc():536870912,e.lanes|=t,cr|=t)}function ss(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,r=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,r|=o.subtreeFlags&65011712,r|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=a,t}function ky(e,t,a){var r=t.pendingProps;switch(io(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return qe(t),null;case 3:return a=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wa(Xe),be(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Zn(t)?Ea(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,oo())),qe(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(Ea(t),u!==null?(qe(t),Fh(t,u)):(qe(t),Wo(t,o,null,r,a))):u?u!==e.memoizedState?(Ea(t),qe(t),Fh(t,u)):(qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&Ea(t),qe(t),Wo(t,o,e,r,a)),null;case 27:if(ft(t),a=ge.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ea(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return qe(t),null}e=W.current,Zn(t)?Cd(t):(e=i0(o,r,a),t.stateNode=e,Ea(t))}return qe(t),null;case 5:if(ft(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ea(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return qe(t),null}if(u=W.current,Zn(t))Cd(t);else{var g=Hi(ge.current);switch(u){case 1:u=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=g.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof r.is=="string"?g.createElement("select",{is:r.is}):g.createElement("select"),r.multiple?u.multiple=!0:r.size&&(u.size=r.size);break;default:u=typeof r.is=="string"?g.createElement(o,{is:r.is}):g.createElement(o)}}u[rt]=t,u[xt]=r;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=u;e:switch(ot(u,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Ea(t)}}return qe(t),Wo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Ea(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(i(166));if(e=ge.current,Zn(t)){if(e=t.stateNode,a=t.memoizedProps,r=null,o=st,o!==null)switch(o.tag){case 27:case 5:r=o.memoizedProps}e[rt]=t,e=!!(e.nodeValue===a||r!==null&&r.suppressHydrationWarning===!0||Qf(e.nodeValue,a)),e||La(t,!0)}else e=Hi(e).createTextNode(r),e[rt]=t,t.stateNode=e}return qe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(r=Zn(t),a!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[rt]=t}else mn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),e=!1}else a=oo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Ct(t),t):(Ct(t),null);if((t.flags&128)!==0)throw Error(i(558))}return qe(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Zn(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(i(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));o[rt]=t}else mn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),o=!1}else o=oo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Ct(t),t):(Ct(t),null)}return Ct(t),(t.flags&128)!==0?(t.lanes=a,t):(a=r!==null,e=e!==null&&e.memoizedState!==null,a&&(r=t.child,o=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(o=r.alternate.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Ei(t,t.updateQueue),qe(t),null);case 4:return be(),e===null&&wu(t.stateNode.containerInfo),qe(t),null;case 10:return wa(t.type),qe(t),null;case 19:if($(Ye),r=t.memoizedState,r===null)return qe(t),null;if(o=(t.flags&128)!==0,u=r.rendering,u===null)if(o)ss(r,!1);else{if(Pe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=hi(e),u!==null){for(t.flags|=128,ss(r,!1),e=u.updateQueue,t.updateQueue=e,Ei(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)kd(a,e),a=a.sibling;return Z(Ye,Ye.current&1|2),Ee&&ba(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&ct()>Ai&&(t.flags|=128,o=!0,ss(r,!1),t.lanes=4194304)}else{if(!o)if(e=hi(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Ei(t,e),ss(r,!0),r.tail===null&&r.tailMode==="hidden"&&!u.alternate&&!Ee)return qe(t),null}else 2*ct()-r.renderingStartTime>Ai&&a!==536870912&&(t.flags|=128,o=!0,ss(r,!1),t.lanes=4194304);r.isBackwards?(u.sibling=t.child,t.child=u):(e=r.last,e!==null?e.sibling=u:t.child=u,r.last=u)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ct(),e.sibling=null,a=Ye.current,Z(Ye,o?a&1|2:a&1),Ee&&ba(t,r.treeForkCount),e):(qe(t),null);case 22:case 23:return Ct(t),_o(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(a&536870912)!==0&&(t.flags&128)===0&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),a=t.updateQueue,a!==null&&Ei(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==a&&(t.flags|=2048),e!==null&&$(vn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),wa(Xe),qe(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Ny(e,t){switch(io(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wa(Xe),be(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ft(t),null;case 31:if(t.memoizedState!==null){if(Ct(t),t.alternate===null)throw Error(i(340));mn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ct(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));mn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $(Ye),null;case 4:return be(),null;case 10:return wa(t.type),null;case 22:case 23:return Ct(t),_o(),e!==null&&$(vn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return wa(Xe),null;case 25:return null;default:return null}}function Wh(e,t){switch(io(t),t.tag){case 3:wa(Xe),be();break;case 26:case 27:case 5:ft(t);break;case 4:be();break;case 31:t.memoizedState!==null&&Ct(t);break;case 13:Ct(t);break;case 19:$(Ye);break;case 10:wa(t.type);break;case 22:case 23:Ct(t),_o(),e!==null&&$(vn);break;case 24:wa(Xe)}}function is(e,t){try{var a=t.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var o=r.next;a=o;do{if((a.tag&e)===e){r=void 0;var u=a.create,g=a.inst;r=u(),g.destroy=r}a=a.next}while(a!==o)}}catch(v){Ce(t,t.return,v)}}function Ya(e,t,a){try{var r=t.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var u=o.next;r=u;do{if((r.tag&e)===e){var g=r.inst,v=g.destroy;if(v!==void 0){g.destroy=void 0,o=t;var S=a,C=v;try{C()}catch(q){Ce(o,S,q)}}}r=r.next}while(r!==u)}}catch(q){Ce(t,t.return,q)}}function ef(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Pd(t,a)}catch(r){Ce(e,e.return,r)}}}function tf(e,t,a){a.props=Sn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(r){Ce(e,t,r)}}function ls(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof a=="function"?e.refCleanup=a(r):a.current=r}}catch(o){Ce(e,t,o)}}function ha(e,t){var a=e.ref,r=e.refCleanup;if(a!==null)if(typeof r=="function")try{r()}catch(o){Ce(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){Ce(e,t,o)}else a.current=null}function af(e){var t=e.type,a=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break e;case"img":a.src?r.src=a.src:a.srcSet&&(r.srcset=a.srcSet)}}catch(o){Ce(e,e.return,o)}}function eu(e,t,a){try{var r=e.stateNode;Qy(r,e.type,a,t),r[xt]=t}catch(o){Ce(e,e.return,o)}}function nf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fa(e.type)||e.tag===4}function tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function au(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ya));else if(r!==4&&(r===27&&Fa(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(au(e,t,a),e=e.sibling;e!==null;)au(e,t,a),e=e.sibling}function ki(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(r!==4&&(r===27&&Fa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(ki(e,t,a),e=e.sibling;e!==null;)ki(e,t,a),e=e.sibling}function rf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ot(t,r,a),t[rt]=e,t[xt]=a}catch(u){Ce(e,e.return,u)}}var ka=!1,Je=!1,nu=!1,sf=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Ty(e,t){if(e=e.containerInfo,ju=Xi,e=pd(e),Ql(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var o=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var g=0,v=-1,S=-1,C=0,q=0,G=e,U=null;t:for(;;){for(var B;G!==a||o!==0&&G.nodeType!==3||(v=g+o),G!==u||r!==0&&G.nodeType!==3||(S=g+r),G.nodeType===3&&(g+=G.nodeValue.length),(B=G.firstChild)!==null;)U=G,G=B;for(;;){if(G===e)break t;if(U===a&&++C===o&&(v=g),U===u&&++q===r&&(S=g),(B=G.nextSibling)!==null)break;G=U,U=G.parentNode}G=B}a=v===-1||S===-1?null:{start:v,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Eu={focusedElem:e,selectionRange:a},Xi=!1,tt=t;tt!==null;)if(t=tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,tt=e;else for(;tt!==null;){switch(t=tt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)o=e[a],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,o=u.memoizedProps,u=u.memoizedState,r=a.stateNode;try{var ee=Sn(a.type,o);e=r.getSnapshotBeforeUpdate(ee,u),r.__reactInternalSnapshotBeforeUpdate=e}catch(oe){Ce(a,a.return,oe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Tu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Tu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,tt=e;break}tt=t.return}}function lf(e,t,a){var r=a.flags;switch(a.tag){case 0:case 11:case 15:Ta(e,a),r&4&&is(5,a);break;case 1:if(Ta(e,a),r&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(g){Ce(a,a.return,g)}else{var o=Sn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Ce(a,a.return,g)}}r&64&&ef(a),r&512&&ls(a,a.return);break;case 3:if(Ta(e,a),r&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Pd(e,t)}catch(g){Ce(a,a.return,g)}}break;case 27:t===null&&r&4&&rf(a);case 26:case 5:Ta(e,a),t===null&&r&4&&af(a),r&512&&ls(a,a.return);break;case 12:Ta(e,a);break;case 31:Ta(e,a),r&4&&cf(e,a);break;case 13:Ta(e,a),r&4&&df(e,a),r&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=By.bind(null,a),np(e,a))));break;case 22:if(r=a.memoizedState!==null||ka,!r){t=t!==null&&t.memoizedState!==null||Je,o=ka;var u=Je;ka=r,(Je=t)&&!u?Oa(e,a,(a.subtreeFlags&8772)!==0):Ta(e,a),ka=o,Je=u}break;case 30:break;default:Ta(e,a)}}function of(e){var t=e.alternate;t!==null&&(e.alternate=null,of(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Rl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var He=null,_t=!1;function Na(e,t,a){for(a=a.child;a!==null;)uf(e,t,a),a=a.sibling}function uf(e,t,a){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(on,a)}catch{}switch(a.tag){case 26:Je||ha(a,t),Na(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Je||ha(a,t);var r=He,o=_t;Fa(a.type)&&(He=a.stateNode,_t=!1),Na(e,t,a),ys(a.stateNode),He=r,_t=o;break;case 5:Je||ha(a,t);case 6:if(r=He,o=_t,He=null,Na(e,t,a),He=r,_t=o,He!==null)if(_t)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(a.stateNode)}catch(u){Ce(a,t,u)}else try{He.removeChild(a.stateNode)}catch(u){Ce(a,t,u)}break;case 18:He!==null&&(_t?(e=He,t0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),vr(e)):t0(He,a.stateNode));break;case 4:r=He,o=_t,He=a.stateNode.containerInfo,_t=!0,Na(e,t,a),He=r,_t=o;break;case 0:case 11:case 14:case 15:Ya(2,a,t),Je||Ya(4,a,t),Na(e,t,a);break;case 1:Je||(ha(a,t),r=a.stateNode,typeof r.componentWillUnmount=="function"&&tf(a,t,r)),Na(e,t,a);break;case 21:Na(e,t,a);break;case 22:Je=(r=Je)||a.memoizedState!==null,Na(e,t,a),Je=r;break;default:Na(e,t,a)}}function cf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{vr(e)}catch(a){Ce(t,t.return,a)}}}function df(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{vr(e)}catch(a){Ce(t,t.return,a)}}function Oy(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new sf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new sf),t;default:throw Error(i(435,e.tag))}}function Ni(e,t){var a=Oy(e);t.forEach(function(r){if(!a.has(r)){a.add(r);var o=Ly.bind(null,e,r);r.then(o,o)}})}function St(e,t){var a=t.deletions;if(a!==null)for(var r=0;r<a.length;r++){var o=a[r],u=e,g=t,v=g;e:for(;v!==null;){switch(v.tag){case 27:if(Fa(v.type)){He=v.stateNode,_t=!1;break e}break;case 5:He=v.stateNode,_t=!1;break e;case 3:case 4:He=v.stateNode.containerInfo,_t=!0;break e}v=v.return}if(He===null)throw Error(i(160));uf(u,g,o),He=null,_t=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)hf(t,e),t=t.sibling}var ea=null;function hf(e,t){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:St(t,e),jt(e),r&4&&(Ya(3,e,e.return),is(3,e),Ya(5,e,e.return));break;case 1:St(t,e),jt(e),r&512&&(Je||a===null||ha(a,a.return)),r&64&&ka&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?r:a.concat(r))));break;case 26:var o=ea;if(St(t,e),jt(e),r&512&&(Je||a===null||ha(a,a.return)),r&4){var u=a!==null?a.memoizedState:null;if(r=e.memoizedState,a===null)if(r===null)if(e.stateNode===null){e:{r=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":u=o.getElementsByTagName("title")[0],(!u||u[Dr]||u[rt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(r),o.head.insertBefore(u,o.querySelector("head > title"))),ot(u,r,a),u[rt]=e,et(u),r=u;break e;case"link":var g=h0("link","href",o).get(r+(a.href||""));if(g){for(var v=0;v<g.length;v++)if(u=g[v],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(v,1);break t}}u=o.createElement(r),ot(u,r,a),o.head.appendChild(u);break;case"meta":if(g=h0("meta","content",o).get(r+(a.content||""))){for(v=0;v<g.length;v++)if(u=g[v],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(v,1);break t}}u=o.createElement(r),ot(u,r,a),o.head.appendChild(u);break;default:throw Error(i(468,r))}u[rt]=e,et(u),r=u}e.stateNode=r}else f0(o,e.type,e.stateNode);else e.stateNode=d0(o,r,e.memoizedProps);else u!==r?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,r===null?f0(o,e.type,e.stateNode):d0(o,r,e.memoizedProps)):r===null&&e.stateNode!==null&&eu(e,e.memoizedProps,a.memoizedProps)}break;case 27:St(t,e),jt(e),r&512&&(Je||a===null||ha(a,a.return)),a!==null&&r&4&&eu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(St(t,e),jt(e),r&512&&(Je||a===null||ha(a,a.return)),e.flags&32){o=e.stateNode;try{$n(o,"")}catch(ee){Ce(e,e.return,ee)}}r&4&&e.stateNode!=null&&(o=e.memoizedProps,eu(e,o,a!==null?a.memoizedProps:o)),r&1024&&(nu=!0);break;case 6:if(St(t,e),jt(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,a=e.stateNode;try{a.nodeValue=r}catch(ee){Ce(e,e.return,ee)}}break;case 3:if(Gi=null,o=ea,ea=$i(t.containerInfo),St(t,e),ea=o,jt(e),r&4&&a!==null&&a.memoizedState.isDehydrated)try{vr(t.containerInfo)}catch(ee){Ce(e,e.return,ee)}nu&&(nu=!1,ff(e));break;case 4:r=ea,ea=$i(e.stateNode.containerInfo),St(t,e),jt(e),ea=r;break;case 12:St(t,e),jt(e);break;case 31:St(t,e),jt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Ni(e,r)));break;case 13:St(t,e),jt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Oi=ct()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Ni(e,r)));break;case 22:o=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,C=ka,q=Je;if(ka=C||o,Je=q||S,St(t,e),Je=q,ka=C,jt(e),r&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||S||ka||Je||jn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){S=a=t;try{if(u=S.stateNode,o)g=u.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{v=S.stateNode;var G=S.memoizedProps.style,U=G!=null&&G.hasOwnProperty("display")?G.display:null;v.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(ee){Ce(S,S.return,ee)}}}else if(t.tag===6){if(a===null){S=t;try{S.stateNode.nodeValue=o?"":S.memoizedProps}catch(ee){Ce(S,S.return,ee)}}}else if(t.tag===18){if(a===null){S=t;try{var B=S.stateNode;o?a0(B,!0):a0(S.stateNode,!1)}catch(ee){Ce(S,S.return,ee)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(a=r.retryQueue,a!==null&&(r.retryQueue=null,Ni(e,a))));break;case 19:St(t,e),jt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Ni(e,r)));break;case 30:break;case 21:break;default:St(t,e),jt(e)}}function jt(e){var t=e.flags;if(t&2){try{for(var a,r=e.return;r!==null;){if(nf(r)){a=r;break}r=r.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var o=a.stateNode,u=tu(e);ki(e,u,o);break;case 5:var g=a.stateNode;a.flags&32&&($n(g,""),a.flags&=-33);var v=tu(e);ki(e,v,g);break;case 3:case 4:var S=a.stateNode.containerInfo,C=tu(e);au(e,C,S);break;default:throw Error(i(161))}}catch(q){Ce(e,e.return,q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ff(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ff(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ta(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)lf(e,t.alternate,t),t=t.sibling}function jn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ya(4,t,t.return),jn(t);break;case 1:ha(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&tf(t,t.return,a),jn(t);break;case 27:ys(t.stateNode);case 26:case 5:ha(t,t.return),jn(t);break;case 22:t.memoizedState===null&&jn(t);break;case 30:jn(t);break;default:jn(t)}e=e.sibling}}function Oa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,o=e,u=t,g=u.flags;switch(u.tag){case 0:case 11:case 15:Oa(o,u,a),is(4,u);break;case 1:if(Oa(o,u,a),r=u,o=r.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(C){Ce(r,r.return,C)}if(r=u,o=r.updateQueue,o!==null){var v=r.stateNode;try{var S=o.shared.hiddenCallbacks;if(S!==null)for(o.shared.hiddenCallbacks=null,o=0;o<S.length;o++)Gd(S[o],v)}catch(C){Ce(r,r.return,C)}}a&&g&64&&ef(u),ls(u,u.return);break;case 27:rf(u);case 26:case 5:Oa(o,u,a),a&&r===null&&g&4&&af(u),ls(u,u.return);break;case 12:Oa(o,u,a);break;case 31:Oa(o,u,a),a&&g&4&&cf(o,u);break;case 13:Oa(o,u,a),a&&g&4&&df(o,u);break;case 22:u.memoizedState===null&&Oa(o,u,a),ls(u,u.return);break;case 30:break;default:Oa(o,u,a)}t=t.sibling}}function ru(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Xr(a))}function su(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Xr(e))}function ta(e,t,a,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gf(e,t,a,r),t=t.sibling}function gf(e,t,a,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:ta(e,t,a,r),o&2048&&is(9,t);break;case 1:ta(e,t,a,r);break;case 3:ta(e,t,a,r),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Xr(e)));break;case 12:if(o&2048){ta(e,t,a,r),e=t.stateNode;try{var u=t.memoizedProps,g=u.id,v=u.onPostCommit;typeof v=="function"&&v(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){Ce(t,t.return,S)}}else ta(e,t,a,r);break;case 31:ta(e,t,a,r);break;case 13:ta(e,t,a,r);break;case 23:break;case 22:u=t.stateNode,g=t.alternate,t.memoizedState!==null?u._visibility&2?ta(e,t,a,r):os(e,t):u._visibility&2?ta(e,t,a,r):(u._visibility|=2,lr(e,t,a,r,(t.subtreeFlags&10256)!==0||!1)),o&2048&&ru(g,t);break;case 24:ta(e,t,a,r),o&2048&&su(t.alternate,t);break;default:ta(e,t,a,r)}}function lr(e,t,a,r,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,g=t,v=a,S=r,C=g.flags;switch(g.tag){case 0:case 11:case 15:lr(u,g,v,S,o),is(8,g);break;case 23:break;case 22:var q=g.stateNode;g.memoizedState!==null?q._visibility&2?lr(u,g,v,S,o):os(u,g):(q._visibility|=2,lr(u,g,v,S,o)),o&&C&2048&&ru(g.alternate,g);break;case 24:lr(u,g,v,S,o),o&&C&2048&&su(g.alternate,g);break;default:lr(u,g,v,S,o)}t=t.sibling}}function os(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,r=t,o=r.flags;switch(r.tag){case 22:os(a,r),o&2048&&ru(r.alternate,r);break;case 24:os(a,r),o&2048&&su(r.alternate,r);break;default:os(a,r)}t=t.sibling}}var us=8192;function or(e,t,a){if(e.subtreeFlags&us)for(e=e.child;e!==null;)mf(e,t,a),e=e.sibling}function mf(e,t,a){switch(e.tag){case 26:or(e,t,a),e.flags&us&&e.memoizedState!==null&&mp(a,ea,e.memoizedState,e.memoizedProps);break;case 5:or(e,t,a);break;case 3:case 4:var r=ea;ea=$i(e.stateNode.containerInfo),or(e,t,a),ea=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=us,us=16777216,or(e,t,a),us=r):or(e,t,a));break;default:or(e,t,a)}}function yf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function cs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];tt=r,vf(r,e)}yf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)pf(e),e=e.sibling}function pf(e){switch(e.tag){case 0:case 11:case 15:cs(e),e.flags&2048&&Ya(9,e,e.return);break;case 3:cs(e);break;case 12:cs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ti(e)):cs(e);break;default:cs(e)}}function Ti(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];tt=r,vf(r,e)}yf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ya(8,t,t.return),Ti(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ti(t));break;default:Ti(t)}e=e.sibling}}function vf(e,t){for(;tt!==null;){var a=tt;switch(a.tag){case 0:case 11:case 15:Ya(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var r=a.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Xr(a.memoizedState.cache)}if(r=a.child,r!==null)r.return=a,tt=r;else e:for(a=e;tt!==null;){r=tt;var o=r.sibling,u=r.return;if(of(r),r===a){tt=null;break e}if(o!==null){o.return=u,tt=o;break e}tt=u}}}var Ay={getCacheForType:function(e){var t=it(Xe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return it(Xe).controller.signal}},Cy=typeof WeakMap=="function"?WeakMap:Map,Te=0,ze=null,we=null,Se=0,Ae=0,Rt=null,Ka=!1,ur=!1,iu=!1,Aa=0,Pe=0,Xa=0,En=0,lu=0,Ut=0,cr=0,ds=null,Et=null,ou=!1,Oi=0,bf=0,Ai=1/0,Ci=null,Ia=null,Fe=0,Qa=null,dr=null,Ca=0,uu=0,cu=null,xf=null,hs=0,du=null;function Dt(){return(Te&2)!==0&&Se!==0?Se&-Se:D.T!==null?pu():Mc()}function wf(){if(Ut===0)if((Se&536870912)===0||Ee){var e=Oe;Oe<<=1,(Oe&3932160)===0&&(Oe=262144),Ut=e}else Ut=536870912;return e=At.current,e!==null&&(e.flags|=32),Ut}function kt(e,t,a){(e===ze&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)&&(hr(e,0),Ja(e,Se,Ut,!1)),Ur(e,a),((Te&2)===0||e!==ze)&&(e===ze&&((Te&2)===0&&(En|=a),Pe===4&&Ja(e,Se,Ut,!1)),fa(e))}function _f(e,t,a){if((Te&6)!==0)throw Error(i(327));var r=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Rr(e,t),o=r?Dy(e,t):fu(e,t,!0),u=r;do{if(o===0){ur&&!r&&Ja(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!Ry(a)){o=fu(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var v=e;o=ds;var S=v.current.memoizedState.isDehydrated;if(S&&(hr(v,g).flags|=256),g=fu(v,g,!1),g!==2){if(iu&&!S){v.errorRecoveryDisabledLanes|=u,En|=u,o=4;break e}u=Et,Et=o,u!==null&&(Et===null?Et=u:Et.push.apply(Et,u))}o=g}if(u=!1,o!==2)continue}}if(o===1){hr(e,0),Ja(e,t,0,!0);break}e:{switch(r=e,u=o,u){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Ja(r,t,Ut,!Ka);break e;case 2:Et=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(o=Oi+300-ct(),10<o)){if(Ja(r,t,Ut,!Ka),$s(r,0,!0)!==0)break e;Ca=t,r.timeoutHandle=Wf(Sf.bind(null,r,a,Et,Ci,ou,t,Ut,En,cr,Ka,u,"Throttled",-0,0),o);break e}Sf(r,a,Et,Ci,ou,t,Ut,En,cr,Ka,u,null,-0,0)}}break}while(!0);fa(e)}function Sf(e,t,a,r,o,u,g,v,S,C,q,G,U,B){if(e.timeoutHandle=-1,G=t.subtreeFlags,G&8192||(G&16785408)===16785408){G={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ya},mf(t,u,G);var ee=(u&62914560)===u?Oi-ct():(u&4194048)===u?bf-ct():0;if(ee=yp(G,ee),ee!==null){Ca=u,e.cancelPendingCommit=ee(Cf.bind(null,e,t,u,a,r,o,g,v,S,q,G,null,U,B)),Ja(e,u,g,!C);return}}Cf(e,t,u,a,r,o,g,v,S)}function Ry(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var r=0;r<a.length;r++){var o=a[r],u=o.getSnapshot;o=o.value;try{if(!Tt(u(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ja(e,t,a,r){t&=~lu,t&=~En,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var u=31-mt(o),g=1<<u;r[u]=-1,o&=~g}a!==0&&Rc(e,a,t)}function Ri(){return(Te&6)===0?(fs(0),!1):!0}function hu(){if(we!==null){if(Ae===0)var e=we.return;else e=we,xa=yn=null,To(e),ar=null,Qr=0,e=we;for(;e!==null;)Wh(e.alternate,e),e=e.return;we=null}}function hr(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Fy(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ca=0,hu(),ze=e,we=a=va(e.current,null),Se=t,Ae=0,Rt=null,Ka=!1,ur=Rr(e,t),iu=!1,cr=Ut=lu=En=Xa=Pe=0,Et=ds=null,ou=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var o=31-mt(r),u=1<<o;t|=e[o],r&=~u}return Aa=t,Ws(),a}function jf(e,t){ye=null,D.H=ns,t===tr||t===li?(t=qd(),Ae=3):t===yo?(t=qd(),Ae=4):Ae=t===Po?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Rt=t,we===null&&(Pe=1,wi(e,$t(t,e.current)))}function Ef(){var e=At.current;return e===null?!0:(Se&4194048)===Se?Yt===null:(Se&62914560)===Se||(Se&536870912)!==0?e===Yt:!1}function kf(){var e=D.H;return D.H=ns,e===null?ns:e}function Nf(){var e=D.A;return D.A=Ay,e}function Ui(){Pe=4,Ka||(Se&4194048)!==Se&&At.current!==null||(ur=!0),(Xa&134217727)===0&&(En&134217727)===0||ze===null||Ja(ze,Se,Ut,!1)}function fu(e,t,a){var r=Te;Te|=2;var o=kf(),u=Nf();(ze!==e||Se!==t)&&(Ci=null,hr(e,t)),t=!1;var g=Pe;e:do try{if(Ae!==0&&we!==null){var v=we,S=Rt;switch(Ae){case 8:hu(),g=6;break e;case 3:case 2:case 9:case 6:At.current===null&&(t=!0);var C=Ae;if(Ae=0,Rt=null,fr(e,v,S,C),a&&ur){g=0;break e}break;default:C=Ae,Ae=0,Rt=null,fr(e,v,S,C)}}Uy(),g=Pe;break}catch(q){jf(e,q)}while(!0);return t&&e.shellSuspendCounter++,xa=yn=null,Te=r,D.H=o,D.A=u,we===null&&(ze=null,Se=0,Ws()),g}function Uy(){for(;we!==null;)Tf(we)}function Dy(e,t){var a=Te;Te|=2;var r=kf(),o=Nf();ze!==e||Se!==t?(Ci=null,Ai=ct()+500,hr(e,t)):ur=Rr(e,t);e:do try{if(Ae!==0&&we!==null){t=we;var u=Rt;t:switch(Ae){case 1:Ae=0,Rt=null,fr(e,t,u,1);break;case 2:case 9:if(Bd(u)){Ae=0,Rt=null,Of(t);break}t=function(){Ae!==2&&Ae!==9||ze!==e||(Ae=7),fa(e)},u.then(t,t);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:Bd(u)?(Ae=0,Rt=null,Of(t)):(Ae=0,Rt=null,fr(e,t,u,7));break;case 5:var g=null;switch(we.tag){case 26:g=we.memoizedState;case 5:case 27:var v=we;if(g?g0(g):v.stateNode.complete){Ae=0,Rt=null;var S=v.sibling;if(S!==null)we=S;else{var C=v.return;C!==null?(we=C,Di(C)):we=null}break t}}Ae=0,Rt=null,fr(e,t,u,5);break;case 6:Ae=0,Rt=null,fr(e,t,u,6);break;case 8:hu(),Pe=6;break e;default:throw Error(i(462))}}My();break}catch(q){jf(e,q)}while(!0);return xa=yn=null,D.H=r,D.A=o,Te=a,we!==null?0:(ze=null,Se=0,Ws(),Pe)}function My(){for(;we!==null&&!Bs();)Tf(we)}function Tf(e){var t=Zh(e.alternate,e,Aa);e.memoizedProps=e.pendingProps,t===null?Di(e):we=t}function Of(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Yh(a,t,t.pendingProps,t.type,void 0,Se);break;case 11:t=Yh(a,t,t.pendingProps,t.type.render,t.ref,Se);break;case 5:To(t);default:Wh(a,t),t=we=kd(t,Aa),t=Zh(a,t,Aa)}e.memoizedProps=e.pendingProps,t===null?Di(e):we=t}function fr(e,t,a,r){xa=yn=null,To(t),ar=null,Qr=0;var o=t.return;try{if(Sy(e,o,t,a,Se)){Pe=1,wi(e,$t(a,e.current)),we=null;return}}catch(u){if(o!==null)throw we=o,u;Pe=1,wi(e,$t(a,e.current)),we=null;return}t.flags&32768?(Ee||r===1?e=!0:ur||(Se&536870912)!==0?e=!1:(Ka=e=!0,(r===2||r===9||r===3||r===6)&&(r=At.current,r!==null&&r.tag===13&&(r.flags|=16384))),Af(t,e)):Di(t)}function Di(e){var t=e;do{if((t.flags&32768)!==0){Af(t,Ka);return}e=t.return;var a=ky(t.alternate,t,Aa);if(a!==null){we=a;return}if(t=t.sibling,t!==null){we=t;return}we=t=e}while(t!==null);Pe===0&&(Pe=5)}function Af(e,t){do{var a=Ny(e.alternate,e);if(a!==null){a.flags&=32767,we=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){we=e;return}we=e=a}while(e!==null);Pe=6,we=null}function Cf(e,t,a,r,o,u,g,v,S){e.cancelPendingCommit=null;do Mi();while(Fe!==0);if((Te&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(u=t.lanes|t.childLanes,u|=eo,gm(e,a,u,g,v,S),e===ze&&(we=ze=null,Se=0),dr=t,Qa=e,Ca=a,uu=u,cu=o,xf=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,qy(Dn,function(){return zf(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=D.T,D.T=null,o=O.p,O.p=2,g=Te,Te|=4;try{Ty(e,t,a)}finally{Te=g,O.p=o,D.T=r}}Fe=1,Rf(),Uf(),Df()}}function Rf(){if(Fe===1){Fe=0;var e=Qa,t=dr,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=D.T,D.T=null;var r=O.p;O.p=2;var o=Te;Te|=4;try{hf(t,e);var u=Eu,g=pd(e.containerInfo),v=u.focusedElem,S=u.selectionRange;if(g!==v&&v&&v.ownerDocument&&yd(v.ownerDocument.documentElement,v)){if(S!==null&&Ql(v)){var C=S.start,q=S.end;if(q===void 0&&(q=C),"selectionStart"in v)v.selectionStart=C,v.selectionEnd=Math.min(q,v.value.length);else{var G=v.ownerDocument||document,U=G&&G.defaultView||window;if(U.getSelection){var B=U.getSelection(),ee=v.textContent.length,oe=Math.min(S.start,ee),Me=S.end===void 0?oe:Math.min(S.end,ee);!B.extend&&oe>Me&&(g=Me,Me=oe,oe=g);var N=md(v,oe),k=md(v,Me);if(N&&k&&(B.rangeCount!==1||B.anchorNode!==N.node||B.anchorOffset!==N.offset||B.focusNode!==k.node||B.focusOffset!==k.offset)){var A=G.createRange();A.setStart(N.node,N.offset),B.removeAllRanges(),oe>Me?(B.addRange(A),B.extend(k.node,k.offset)):(A.setEnd(k.node,k.offset),B.addRange(A))}}}}for(G=[],B=v;B=B.parentNode;)B.nodeType===1&&G.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<G.length;v++){var H=G[v];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}Xi=!!ju,Eu=ju=null}finally{Te=o,O.p=r,D.T=a}}e.current=t,Fe=2}}function Uf(){if(Fe===2){Fe=0;var e=Qa,t=dr,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=D.T,D.T=null;var r=O.p;O.p=2;var o=Te;Te|=4;try{lf(e,t.alternate,t)}finally{Te=o,O.p=r,D.T=a}}Fe=3}}function Df(){if(Fe===4||Fe===3){Fe=0,xl();var e=Qa,t=dr,a=Ca,r=xf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Fe=5:(Fe=0,dr=Qa=null,Mf(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Ia=null),Al(a),t=t.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(on,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=D.T,o=O.p,O.p=2,D.T=null;try{for(var u=e.onRecoverableError,g=0;g<r.length;g++){var v=r[g];u(v.value,{componentStack:v.stack})}}finally{D.T=t,O.p=o}}(Ca&3)!==0&&Mi(),fa(e),o=e.pendingLanes,(a&261930)!==0&&(o&42)!==0?e===du?hs++:(hs=0,du=e):hs=0,fs(0)}}function Mf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Xr(t)))}function Mi(){return Rf(),Uf(),Df(),zf()}function zf(){if(Fe!==5)return!1;var e=Qa,t=uu;uu=0;var a=Al(Ca),r=D.T,o=O.p;try{O.p=32>a?32:a,D.T=null,a=cu,cu=null;var u=Qa,g=Ca;if(Fe=0,dr=Qa=null,Ca=0,(Te&6)!==0)throw Error(i(331));var v=Te;if(Te|=4,pf(u.current),gf(u,u.current,g,a),Te=v,fs(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(on,u)}catch{}return!0}finally{O.p=o,D.T=r,Mf(e,t)}}function Bf(e,t,a){t=$t(a,t),t=Go(e.stateNode,t,2),e=Va(e,t,2),e!==null&&(Ur(e,2),fa(e))}function Ce(e,t,a){if(e.tag===3)Bf(e,e,a);else for(;t!==null;){if(t.tag===3){Bf(t,e,a);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ia===null||!Ia.has(r))){e=$t(a,e),a=Bh(2),r=Va(t,a,2),r!==null&&(Lh(a,r,t,e),Ur(r,2),fa(r));break}}t=t.return}}function gu(e,t,a){var r=e.pingCache;if(r===null){r=e.pingCache=new Cy;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(a)||(iu=!0,o.add(a),e=zy.bind(null,e,t,a),t.then(e,e))}function zy(e,t,a){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ze===e&&(Se&a)===a&&(Pe===4||Pe===3&&(Se&62914560)===Se&&300>ct()-Oi?(Te&2)===0&&hr(e,0):lu|=a,cr===Se&&(cr=0)),fa(e)}function Lf(e,t){t===0&&(t=Cc()),e=fn(e,t),e!==null&&(Ur(e,t),fa(e))}function By(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Lf(e,a)}function Ly(e,t){var a=0;switch(e.tag){case 31:case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Lf(e,a)}function qy(e,t){return Bt(e,t)}var zi=null,gr=null,mu=!1,Bi=!1,yu=!1,Za=0;function fa(e){e!==gr&&e.next===null&&(gr===null?zi=gr=e:gr=gr.next=e),Bi=!0,mu||(mu=!0,$y())}function fs(e,t){if(!yu&&Bi){yu=!0;do for(var a=!1,r=zi;r!==null;){if(e!==0){var o=r.pendingLanes;if(o===0)var u=0;else{var g=r.suspendedLanes,v=r.pingedLanes;u=(1<<31-mt(42|e)+1)-1,u&=o&~(g&~v),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,Vf(r,u))}else u=Se,u=$s(r,r===ze?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(u&3)===0||Rr(r,u)||(a=!0,Vf(r,u));r=r.next}while(a);yu=!1}}function Hy(){qf()}function qf(){Bi=mu=!1;var e=0;Za!==0&&Zy()&&(e=Za);for(var t=ct(),a=null,r=zi;r!==null;){var o=r.next,u=Hf(r,t);u===0?(r.next=null,a===null?zi=o:a.next=o,o===null&&(gr=a)):(a=r,(e!==0||(u&3)!==0)&&(Bi=!0)),r=o}Fe!==0&&Fe!==5||fs(e),Za!==0&&(Za=0)}function Hf(e,t){for(var a=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var g=31-mt(u),v=1<<g,S=o[g];S===-1?((v&a)===0||(v&r)!==0)&&(o[g]=fm(v,t)):S<=t&&(e.expiredLanes|=v),u&=~v}if(t=ze,a=Se,a=$s(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,a===0||e===t&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&oa(r),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Rr(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(r!==null&&oa(r),Al(a)){case 2:case 8:a=qs;break;case 32:a=Dn;break;case 268435456:a=Hs;break;default:a=Dn}return r=$f.bind(null,e),a=Bt(a,r),e.callbackPriority=t,e.callbackNode=a,t}return r!==null&&r!==null&&oa(r),e.callbackPriority=2,e.callbackNode=null,2}function $f(e,t){if(Fe!==0&&Fe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Mi()&&e.callbackNode!==a)return null;var r=Se;return r=$s(e,e===ze?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(_f(e,r,t),Hf(e,ct()),e.callbackNode!=null&&e.callbackNode===a?$f.bind(null,e):null)}function Vf(e,t){if(Mi())return null;_f(e,t,!0)}function $y(){Wy(function(){(Te&6)!==0?Bt(Ls,Hy):qf()})}function pu(){if(Za===0){var e=Wn;e===0&&(e=re,re<<=1,(re&261888)===0&&(re=256)),Za=e}return Za}function Gf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ys(""+e)}function Pf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Vy(e,t,a,r,o){if(t==="submit"&&a&&a.stateNode===o){var u=Gf((o[xt]||null).action),g=r.submitter;g&&(t=(t=g[xt]||null)?Gf(t.formAction):g.getAttribute("formAction"),t!==null&&(u=t,g=null));var v=new Qs("action","action",null,r,o);e.push({event:v,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Za!==0){var S=g?Pf(o,g):new FormData(o);Bo(a,{pending:!0,data:S,method:o.method,action:u},null,S)}}else typeof u=="function"&&(v.preventDefault(),S=g?Pf(o,g):new FormData(o),Bo(a,{pending:!0,data:S,method:o.method,action:u},u,S))},currentTarget:o}]})}}for(var vu=0;vu<Wl.length;vu++){var bu=Wl[vu],Gy=bu.toLowerCase(),Py=bu[0].toUpperCase()+bu.slice(1);Wt(Gy,"on"+Py)}Wt(xd,"onAnimationEnd"),Wt(wd,"onAnimationIteration"),Wt(_d,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt(iy,"onTransitionRun"),Wt(ly,"onTransitionStart"),Wt(oy,"onTransitionCancel"),Wt(Sd,"onTransitionEnd"),qn("onMouseEnter",["mouseout","mouseover"]),qn("onMouseLeave",["mouseout","mouseover"]),qn("onPointerEnter",["pointerout","pointerover"]),qn("onPointerLeave",["pointerout","pointerover"]),un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),un("onBeforeInput",["compositionend","keypress","textInput","paste"]),un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gs));function Yf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var r=e[a],o=r.event;r=r.listeners;e:{var u=void 0;if(t)for(var g=r.length-1;0<=g;g--){var v=r[g],S=v.instance,C=v.currentTarget;if(v=v.listener,S!==u&&o.isPropagationStopped())break e;u=v,o.currentTarget=C;try{u(o)}catch(q){Fs(q)}o.currentTarget=null,u=S}else for(g=0;g<r.length;g++){if(v=r[g],S=v.instance,C=v.currentTarget,v=v.listener,S!==u&&o.isPropagationStopped())break e;u=v,o.currentTarget=C;try{u(o)}catch(q){Fs(q)}o.currentTarget=null,u=S}}}}function _e(e,t){var a=t[Cl];a===void 0&&(a=t[Cl]=new Set);var r=e+"__bubble";a.has(r)||(Kf(t,e,2,!1),a.add(r))}function xu(e,t,a){var r=0;t&&(r|=4),Kf(a,e,r,t)}var Li="_reactListening"+Math.random().toString(36).slice(2);function wu(e){if(!e[Li]){e[Li]=!0,Lc.forEach(function(a){a!=="selectionchange"&&(Yy.has(a)||xu(a,!1,e),xu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Li]||(t[Li]=!0,xu("selectionchange",!1,t))}}function Kf(e,t,a,r){switch(w0(t)){case 2:var o=bp;break;case 8:o=xp;break;default:o=zu}a=o.bind(null,t,a,e),o=void 0,!Hl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function _u(e,t,a,r,o){var u=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var g=r.tag;if(g===3||g===4){var v=r.stateNode.containerInfo;if(v===o)break;if(g===4)for(g=r.return;g!==null;){var S=g.tag;if((S===3||S===4)&&g.stateNode.containerInfo===o)return;g=g.return}for(;v!==null;){if(g=zn(v),g===null)return;if(S=g.tag,S===5||S===6||S===26||S===27){r=u=g;continue e}v=v.parentNode}}r=r.return}Jc(function(){var C=u,q=Ll(a),G=[];e:{var U=jd.get(e);if(U!==void 0){var B=Qs,ee=e;switch(e){case"keypress":if(Xs(a)===0)break e;case"keydown":case"keyup":B=Lm;break;case"focusin":ee="focus",B=Pl;break;case"focusout":ee="blur",B=Pl;break;case"beforeblur":case"afterblur":B=Pl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=km;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=$m;break;case xd:case wd:case _d:B=Om;break;case Sd:B=Gm;break;case"scroll":case"scrollend":B=jm;break;case"wheel":B=Ym;break;case"copy":case"cut":case"paste":B=Cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=td;break;case"toggle":case"beforetoggle":B=Xm}var oe=(t&4)!==0,Me=!oe&&(e==="scroll"||e==="scrollend"),N=oe?U!==null?U+"Capture":null:U;oe=[];for(var k=C,A;k!==null;){var H=k;if(A=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||A===null||N===null||(H=zr(k,N),H!=null&&oe.push(ms(k,H,A))),Me)break;k=k.return}0<oe.length&&(U=new B(U,ee,null,a,q),G.push({event:U,listeners:oe}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",U&&a!==Bl&&(ee=a.relatedTarget||a.fromElement)&&(zn(ee)||ee[Mn]))break e;if((B||U)&&(U=q.window===q?q:(U=q.ownerDocument)?U.defaultView||U.parentWindow:window,B?(ee=a.relatedTarget||a.toElement,B=C,ee=ee?zn(ee):null,ee!==null&&(Me=d(ee),oe=ee.tag,ee!==Me||oe!==5&&oe!==27&&oe!==6)&&(ee=null)):(B=null,ee=C),B!==ee)){if(oe=Wc,H="onMouseLeave",N="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(oe=td,H="onPointerLeave",N="onPointerEnter",k="pointer"),Me=B==null?U:Mr(B),A=ee==null?U:Mr(ee),U=new oe(H,k+"leave",B,a,q),U.target=Me,U.relatedTarget=A,H=null,zn(q)===C&&(oe=new oe(N,k+"enter",ee,a,q),oe.target=A,oe.relatedTarget=Me,H=oe),Me=H,B&&ee)t:{for(oe=Ky,N=B,k=ee,A=0,H=N;H;H=oe(H))A++;H=0;for(var se=k;se;se=oe(se))H++;for(;0<A-H;)N=oe(N),A--;for(;0<H-A;)k=oe(k),H--;for(;A--;){if(N===k||k!==null&&N===k.alternate){oe=N;break t}N=oe(N),k=oe(k)}oe=null}else oe=null;B!==null&&Xf(G,U,B,oe,!1),ee!==null&&Me!==null&&Xf(G,Me,ee,oe,!0)}}e:{if(U=C?Mr(C):window,B=U.nodeName&&U.nodeName.toLowerCase(),B==="select"||B==="input"&&U.type==="file")var ke=ud;else if(ld(U))if(cd)ke=ny;else{ke=ty;var te=ey}else B=U.nodeName,!B||B.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?C&&zl(C.elementType)&&(ke=ud):ke=ay;if(ke&&(ke=ke(e,C))){od(G,ke,a,q);break e}te&&te(e,U,C),e==="focusout"&&C&&U.type==="number"&&C.memoizedProps.value!=null&&Ml(U,"number",U.value)}switch(te=C?Mr(C):window,e){case"focusin":(ld(te)||te.contentEditable==="true")&&(Yn=te,Jl=C,Pr=null);break;case"focusout":Pr=Jl=Yn=null;break;case"mousedown":Zl=!0;break;case"contextmenu":case"mouseup":case"dragend":Zl=!1,vd(G,a,q);break;case"selectionchange":if(sy)break;case"keydown":case"keyup":vd(G,a,q)}var pe;if(Kl)e:{switch(e){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Pn?sd(e,a)&&(je="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(je="onCompositionStart");je&&(ad&&a.locale!=="ko"&&(Pn||je!=="onCompositionStart"?je==="onCompositionEnd"&&Pn&&(pe=Zc()):(Ma=q,$l="value"in Ma?Ma.value:Ma.textContent,Pn=!0)),te=qi(C,je),0<te.length&&(je=new ed(je,e,null,a,q),G.push({event:je,listeners:te}),pe?je.data=pe:(pe=id(a),pe!==null&&(je.data=pe)))),(pe=Qm?Jm(e,a):Zm(e,a))&&(je=qi(C,"onBeforeInput"),0<je.length&&(te=new ed("onBeforeInput","beforeinput",null,a,q),G.push({event:te,listeners:je}),te.data=pe)),Vy(G,e,C,a,q)}Yf(G,t)})}function ms(e,t,a){return{instance:e,listener:t,currentTarget:a}}function qi(e,t){for(var a=t+"Capture",r=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=zr(e,a),o!=null&&r.unshift(ms(e,o,u)),o=zr(e,t),o!=null&&r.push(ms(e,o,u))),e.tag===3)return r;e=e.return}return[]}function Ky(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Xf(e,t,a,r,o){for(var u=t._reactName,g=[];a!==null&&a!==r;){var v=a,S=v.alternate,C=v.stateNode;if(v=v.tag,S!==null&&S===r)break;v!==5&&v!==26&&v!==27||C===null||(S=C,o?(C=zr(a,u),C!=null&&g.unshift(ms(a,C,S))):o||(C=zr(a,u),C!=null&&g.push(ms(a,C,S)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var Xy=/\r\n?/g,Iy=/\u0000|\uFFFD/g;function If(e){return(typeof e=="string"?e:""+e).replace(Xy,`
`).replace(Iy,"")}function Qf(e,t){return t=If(t),If(e)===t}function De(e,t,a,r,o,u){switch(a){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||$n(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&$n(e,""+r);break;case"className":Gs(e,"class",r);break;case"tabIndex":Gs(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Gs(e,a,r);break;case"style":Ic(e,r,u);break;case"data":if(t!=="object"){Gs(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=Ys(""+r),e.setAttribute(a,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&De(e,t,"name",o.name,o,null),De(e,t,"formEncType",o.formEncType,o,null),De(e,t,"formMethod",o.formMethod,o,null),De(e,t,"formTarget",o.formTarget,o,null)):(De(e,t,"encType",o.encType,o,null),De(e,t,"method",o.method,o,null),De(e,t,"target",o.target,o,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=Ys(""+r),e.setAttribute(a,r);break;case"onClick":r!=null&&(e.onclick=ya);break;case"onScroll":r!=null&&_e("scroll",e);break;case"onScrollEnd":r!=null&&_e("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(i(61));if(a=r.__html,a!=null){if(o.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}a=Ys(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""+r):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":r===!0?e.setAttribute(a,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,r):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(a,r):e.removeAttribute(a);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(a):e.setAttribute(a,r);break;case"popover":_e("beforetoggle",e),_e("toggle",e),Vs(e,"popover",r);break;case"xlinkActuate":ma(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ma(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ma(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ma(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ma(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ma(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ma(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ma(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ma(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Vs(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=_m.get(a)||a,Vs(e,a,r))}}function Su(e,t,a,r,o,u){switch(a){case"style":Ic(e,r,u);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(i(61));if(a=r.__html,a!=null){if(o.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof r=="string"?$n(e,r):(typeof r=="number"||typeof r=="bigint")&&$n(e,""+r);break;case"onScroll":r!=null&&_e("scroll",e);break;case"onScrollEnd":r!=null&&_e("scrollend",e);break;case"onClick":r!=null&&(e.onclick=ya);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),u=e[xt]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof r=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,r,o);break e}a in e?e[a]=r:r===!0?e.setAttribute(a,""):Vs(e,a,r)}}}function ot(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",e),_e("load",e);var r=!1,o=!1,u;for(u in a)if(a.hasOwnProperty(u)){var g=a[u];if(g!=null)switch(u){case"src":r=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:De(e,t,u,g,a,null)}}o&&De(e,t,"srcSet",a.srcSet,a,null),r&&De(e,t,"src",a.src,a,null);return;case"input":_e("invalid",e);var v=u=g=o=null,S=null,C=null;for(r in a)if(a.hasOwnProperty(r)){var q=a[r];if(q!=null)switch(r){case"name":o=q;break;case"type":g=q;break;case"checked":S=q;break;case"defaultChecked":C=q;break;case"value":u=q;break;case"defaultValue":v=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,t));break;default:De(e,t,r,q,a,null)}}Pc(e,u,v,S,C,g,o,!1);return;case"select":_e("invalid",e),r=g=u=null;for(o in a)if(a.hasOwnProperty(o)&&(v=a[o],v!=null))switch(o){case"value":u=v;break;case"defaultValue":g=v;break;case"multiple":r=v;default:De(e,t,o,v,a,null)}t=u,a=g,e.multiple=!!r,t!=null?Hn(e,!!r,t,!1):a!=null&&Hn(e,!!r,a,!0);return;case"textarea":_e("invalid",e),u=o=r=null;for(g in a)if(a.hasOwnProperty(g)&&(v=a[g],v!=null))switch(g){case"value":r=v;break;case"defaultValue":o=v;break;case"children":u=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:De(e,t,g,v,a,null)}Kc(e,r,o,u);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(r=a[S],r!=null))switch(S){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:De(e,t,S,r,a,null)}return;case"dialog":_e("beforetoggle",e),_e("toggle",e),_e("cancel",e),_e("close",e);break;case"iframe":case"object":_e("load",e);break;case"video":case"audio":for(r=0;r<gs.length;r++)_e(gs[r],e);break;case"image":_e("error",e),_e("load",e);break;case"details":_e("toggle",e);break;case"embed":case"source":case"link":_e("error",e),_e("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(C in a)if(a.hasOwnProperty(C)&&(r=a[C],r!=null))switch(C){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:De(e,t,C,r,a,null)}return;default:if(zl(t)){for(q in a)a.hasOwnProperty(q)&&(r=a[q],r!==void 0&&Su(e,t,q,r,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(r=a[v],r!=null&&De(e,t,v,r,a,null))}function Qy(e,t,a,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,g=null,v=null,S=null,C=null,q=null;for(B in a){var G=a[B];if(a.hasOwnProperty(B)&&G!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":S=G;default:r.hasOwnProperty(B)||De(e,t,B,null,r,G)}}for(var U in r){var B=r[U];if(G=a[U],r.hasOwnProperty(U)&&(B!=null||G!=null))switch(U){case"type":u=B;break;case"name":o=B;break;case"checked":C=B;break;case"defaultChecked":q=B;break;case"value":g=B;break;case"defaultValue":v=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(137,t));break;default:B!==G&&De(e,t,U,B,r,G)}}Dl(e,g,v,S,C,q,u,o);return;case"select":B=g=v=U=null;for(u in a)if(S=a[u],a.hasOwnProperty(u)&&S!=null)switch(u){case"value":break;case"multiple":B=S;default:r.hasOwnProperty(u)||De(e,t,u,null,r,S)}for(o in r)if(u=r[o],S=a[o],r.hasOwnProperty(o)&&(u!=null||S!=null))switch(o){case"value":U=u;break;case"defaultValue":v=u;break;case"multiple":g=u;default:u!==S&&De(e,t,o,u,r,S)}t=v,a=g,r=B,U!=null?Hn(e,!!a,U,!1):!!r!=!!a&&(t!=null?Hn(e,!!a,t,!0):Hn(e,!!a,a?[]:"",!1));return;case"textarea":B=U=null;for(v in a)if(o=a[v],a.hasOwnProperty(v)&&o!=null&&!r.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:De(e,t,v,null,r,o)}for(g in r)if(o=r[g],u=a[g],r.hasOwnProperty(g)&&(o!=null||u!=null))switch(g){case"value":U=o;break;case"defaultValue":B=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(i(91));break;default:o!==u&&De(e,t,g,o,r,u)}Yc(e,U,B);return;case"option":for(var ee in a)if(U=a[ee],a.hasOwnProperty(ee)&&U!=null&&!r.hasOwnProperty(ee))switch(ee){case"selected":e.selected=!1;break;default:De(e,t,ee,null,r,U)}for(S in r)if(U=r[S],B=a[S],r.hasOwnProperty(S)&&U!==B&&(U!=null||B!=null))switch(S){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:De(e,t,S,U,r,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var oe in a)U=a[oe],a.hasOwnProperty(oe)&&U!=null&&!r.hasOwnProperty(oe)&&De(e,t,oe,null,r,U);for(C in r)if(U=r[C],B=a[C],r.hasOwnProperty(C)&&U!==B&&(U!=null||B!=null))switch(C){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(137,t));break;default:De(e,t,C,U,r,B)}return;default:if(zl(t)){for(var Me in a)U=a[Me],a.hasOwnProperty(Me)&&U!==void 0&&!r.hasOwnProperty(Me)&&Su(e,t,Me,void 0,r,U);for(q in r)U=r[q],B=a[q],!r.hasOwnProperty(q)||U===B||U===void 0&&B===void 0||Su(e,t,q,U,r,B);return}}for(var N in a)U=a[N],a.hasOwnProperty(N)&&U!=null&&!r.hasOwnProperty(N)&&De(e,t,N,null,r,U);for(G in r)U=r[G],B=a[G],!r.hasOwnProperty(G)||U===B||U==null&&B==null||De(e,t,G,U,r,B)}function Jf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),r=0;r<a.length;r++){var o=a[r],u=o.transferSize,g=o.initiatorType,v=o.duration;if(u&&v&&Jf(g)){for(g=0,v=o.responseEnd,r+=1;r<a.length;r++){var S=a[r],C=S.startTime;if(C>v)break;var q=S.transferSize,G=S.initiatorType;q&&Jf(G)&&(S=S.responseEnd,g+=q*(S<v?1:(v-C)/(S-C)))}if(--r,t+=8*(u+g)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ju=null,Eu=null;function Hi(e){return e.nodeType===9?e:e.ownerDocument}function Zf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ff(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ku(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nu=null;function Zy(){var e=window.event;return e&&e.type==="popstate"?e===Nu?!1:(Nu=e,!0):(Nu=null,!1)}var Wf=typeof setTimeout=="function"?setTimeout:void 0,Fy=typeof clearTimeout=="function"?clearTimeout:void 0,e0=typeof Promise=="function"?Promise:void 0,Wy=typeof queueMicrotask=="function"?queueMicrotask:typeof e0<"u"?function(e){return e0.resolve(null).then(e).catch(ep)}:Wf;function ep(e){setTimeout(function(){throw e})}function Fa(e){return e==="head"}function t0(e,t){var a=t,r=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"||a==="/&"){if(r===0){e.removeChild(o),vr(t);return}r--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")r++;else if(a==="html")ys(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ys(a);for(var u=a.firstChild;u;){var g=u.nextSibling,v=u.nodeName;u[Dr]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=g}}else a==="body"&&ys(e.ownerDocument.body);a=o}while(a);vr(t)}function a0(e,t){var a=e;e=0;do{var r=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),r&&r.nodeType===8)if(a=r.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=r}while(a)}function Tu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Tu(a),Rl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function tp(e,t,a,r){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Dr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Kt(e.nextSibling),e===null)break}return null}function ap(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Kt(e.nextSibling),e===null))return null;return e}function n0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Kt(e.nextSibling),e===null))return null;return e}function Ou(e){return e.data==="$?"||e.data==="$~"}function Au(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function np(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var r=function(){t(),a.removeEventListener("DOMContentLoaded",r)};a.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Kt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Cu=null;function r0(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Kt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function s0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function i0(e,t,a){switch(t=Hi(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function ys(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Rl(e)}var Xt=new Map,l0=new Set;function $i(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ra=O.d;O.d={f:rp,r:sp,D:ip,C:lp,L:op,m:up,X:dp,S:cp,M:hp};function rp(){var e=Ra.f(),t=Ri();return e||t}function sp(e){var t=Bn(e);t!==null&&t.tag===5&&t.type==="form"?Sh(t):Ra.r(e)}var mr=typeof document>"u"?null:document;function o0(e,t,a){var r=mr;if(r&&typeof t=="string"&&t){var o=qt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),l0.has(o)||(l0.add(o),e={rel:e,crossOrigin:a,href:t},r.querySelector(o)===null&&(t=r.createElement("link"),ot(t,"link",e),et(t),r.head.appendChild(t)))}}function ip(e){Ra.D(e),o0("dns-prefetch",e,null)}function lp(e,t){Ra.C(e,t),o0("preconnect",e,t)}function op(e,t,a){Ra.L(e,t,a);var r=mr;if(r&&e&&t){var o='link[rel="preload"][as="'+qt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+qt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+qt(a.imageSizes)+'"]')):o+='[href="'+qt(e)+'"]';var u=o;switch(t){case"style":u=yr(e);break;case"script":u=pr(e)}Xt.has(u)||(e=j({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Xt.set(u,e),r.querySelector(o)!==null||t==="style"&&r.querySelector(ps(u))||t==="script"&&r.querySelector(vs(u))||(t=r.createElement("link"),ot(t,"link",e),et(t),r.head.appendChild(t)))}}function up(e,t){Ra.m(e,t);var a=mr;if(a&&e){var r=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+qt(r)+'"][href="'+qt(e)+'"]',u=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=pr(e)}if(!Xt.has(u)&&(e=j({rel:"modulepreload",href:e},t),Xt.set(u,e),a.querySelector(o)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vs(u)))return}r=a.createElement("link"),ot(r,"link",e),et(r),a.head.appendChild(r)}}}function cp(e,t,a){Ra.S(e,t,a);var r=mr;if(r&&e){var o=Ln(r).hoistableStyles,u=yr(e);t=t||"default";var g=o.get(u);if(!g){var v={loading:0,preload:null};if(g=r.querySelector(ps(u)))v.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Xt.get(u))&&Ru(e,a);var S=g=r.createElement("link");et(S),ot(S,"link",e),S._p=new Promise(function(C,q){S.onload=C,S.onerror=q}),S.addEventListener("load",function(){v.loading|=1}),S.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Vi(g,t,r)}g={type:"stylesheet",instance:g,count:1,state:v},o.set(u,g)}}}function dp(e,t){Ra.X(e,t);var a=mr;if(a&&e){var r=Ln(a).hoistableScripts,o=pr(e),u=r.get(o);u||(u=a.querySelector(vs(o)),u||(e=j({src:e,async:!0},t),(t=Xt.get(o))&&Uu(e,t),u=a.createElement("script"),et(u),ot(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(o,u))}}function hp(e,t){Ra.M(e,t);var a=mr;if(a&&e){var r=Ln(a).hoistableScripts,o=pr(e),u=r.get(o);u||(u=a.querySelector(vs(o)),u||(e=j({src:e,async:!0,type:"module"},t),(t=Xt.get(o))&&Uu(e,t),u=a.createElement("script"),et(u),ot(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(o,u))}}function u0(e,t,a,r){var o=(o=ge.current)?$i(o):null;if(!o)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=yr(a.href),a=Ln(o).hoistableStyles,r=a.get(t),r||(r={type:"style",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=yr(a.href);var u=Ln(o).hoistableStyles,g=u.get(e);if(g||(o=o.ownerDocument||o,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,g),(u=o.querySelector(ps(e)))&&!u._p&&(g.instance=u,g.state.loading=5),Xt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xt.set(e,a),u||fp(o,e,a,g.state))),t&&r===null)throw Error(i(528,""));return g}if(t&&r!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=pr(a),a=Ln(o).hoistableScripts,r=a.get(t),r||(r={type:"script",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function yr(e){return'href="'+qt(e)+'"'}function ps(e){return'link[rel="stylesheet"]['+e+"]"}function c0(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function fp(e,t,a,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),ot(t,"link",a),et(t),e.head.appendChild(t))}function pr(e){return'[src="'+qt(e)+'"]'}function vs(e){return"script[async]"+e}function d0(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+qt(a.href)+'"]');if(r)return t.instance=r,et(r),r;var o=j({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),et(r),ot(r,"style",o),Vi(r,a.precedence,e),t.instance=r;case"stylesheet":o=yr(a.href);var u=e.querySelector(ps(o));if(u)return t.state.loading|=4,t.instance=u,et(u),u;r=c0(a),(o=Xt.get(o))&&Ru(r,o),u=(e.ownerDocument||e).createElement("link"),et(u);var g=u;return g._p=new Promise(function(v,S){g.onload=v,g.onerror=S}),ot(u,"link",r),t.state.loading|=4,Vi(u,a.precedence,e),t.instance=u;case"script":return u=pr(a.src),(o=e.querySelector(vs(u)))?(t.instance=o,et(o),o):(r=a,(o=Xt.get(u))&&(r=j({},a),Uu(r,o)),e=e.ownerDocument||e,o=e.createElement("script"),et(o),ot(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,Vi(r,a.precedence,e));return t.instance}function Vi(e,t,a){for(var r=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,u=o,g=0;g<r.length;g++){var v=r[g];if(v.dataset.precedence===t)u=v;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Ru(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Uu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Gi=null;function h0(e,t,a){if(Gi===null){var r=new Map,o=Gi=new Map;o.set(a,r)}else o=Gi,r=o.get(a),r||(r=new Map,o.set(a,r));if(r.has(e))return r;for(r.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var u=a[o];if(!(u[Dr]||u[rt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var g=u.getAttribute(t)||"";g=e+g;var v=r.get(g);v?v.push(u):r.set(g,[u])}}return r}function f0(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function gp(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function g0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function mp(e,t,a,r){if(a.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=yr(r.href),u=t.querySelector(ps(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Pi.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,et(u);return}u=t.ownerDocument||t,r=c0(r),(o=Xt.get(o))&&Ru(r,o),u=u.createElement("link"),et(u);var g=u;g._p=new Promise(function(v,S){g.onload=v,g.onerror=S}),ot(u,"link",r),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Pi.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Du=0;function yp(e,t){return e.stylesheets&&e.count===0&&Ki(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var r=setTimeout(function(){if(e.stylesheets&&Ki(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Du===0&&(Du=62500*Jy());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ki(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Du?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}function Pi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ki(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yi=null;function Ki(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yi=new Map,t.forEach(pp,e),Yi=null,Pi.call(e))}function pp(e,t){if(!(t.state.loading&4)){var a=Yi.get(e);if(a)var r=a.get(null);else{a=new Map,Yi.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var g=o[u];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),r=g)}r&&a.set(null,r)}o=t.instance,g=o.getAttribute("data-precedence"),u=a.get(g)||r,u===r&&a.set(null,o),a.set(g,o),this.count++,r=Pi.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var bs={$$typeof:L,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function vp(e,t,a,r,o,u,g,v,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tl(0),this.hiddenUpdates=Tl(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function m0(e,t,a,r,o,u,g,v,S,C,q,G){return e=new vp(e,t,a,g,S,C,q,G,v),t=1,u===!0&&(t|=24),u=Ot(3,null,null,t),e.current=u,u.stateNode=e,t=fo(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:r,isDehydrated:a,cache:t},po(u),e}function y0(e){return e?(e=In,e):In}function p0(e,t,a,r,o,u){o=y0(o),r.context===null?r.context=o:r.pendingContext=o,r=$a(t),r.payload={element:a},u=u===void 0?null:u,u!==null&&(r.callback=u),a=Va(e,r,t),a!==null&&(kt(a,e,t),Zr(a,e,t))}function v0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Mu(e,t){v0(e,t),(e=e.alternate)&&v0(e,t)}function b0(e){if(e.tag===13||e.tag===31){var t=fn(e,67108864);t!==null&&kt(t,e,67108864),Mu(e,67108864)}}function x0(e){if(e.tag===13||e.tag===31){var t=Dt();t=Ol(t);var a=fn(e,t);a!==null&&kt(a,e,t),Mu(e,t)}}var Xi=!0;function bp(e,t,a,r){var o=D.T;D.T=null;var u=O.p;try{O.p=2,zu(e,t,a,r)}finally{O.p=u,D.T=o}}function xp(e,t,a,r){var o=D.T;D.T=null;var u=O.p;try{O.p=8,zu(e,t,a,r)}finally{O.p=u,D.T=o}}function zu(e,t,a,r){if(Xi){var o=Bu(r);if(o===null)_u(e,t,r,Ii,a),_0(e,r);else if(_p(o,e,t,a,r))r.stopPropagation();else if(_0(e,r),t&4&&-1<wp.indexOf(e)){for(;o!==null;){var u=Bn(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var g=ga(u.pendingLanes);if(g!==0){var v=u;for(v.pendingLanes|=2,v.entangledLanes|=2;g;){var S=1<<31-mt(g);v.entanglements[1]|=S,g&=~S}fa(u),(Te&6)===0&&(Ai=ct()+500,fs(0))}}break;case 31:case 13:v=fn(u,2),v!==null&&kt(v,u,2),Ri(),Mu(u,2)}if(u=Bu(r),u===null&&_u(e,t,r,Ii,a),u===o)break;o=u}o!==null&&r.stopPropagation()}else _u(e,t,r,null,a)}}function Bu(e){return e=Ll(e),Lu(e)}var Ii=null;function Lu(e){if(Ii=null,e=zn(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ii=e,null}function w0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wl()){case Ls:return 2;case qs:return 8;case Dn:case _l:return 32;case Hs:return 268435456;default:return 32}default:return 32}}var qu=!1,Wa=null,en=null,tn=null,xs=new Map,ws=new Map,an=[],wp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _0(e,t){switch(e){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":en=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":xs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ws.delete(t.pointerId)}}function _s(e,t,a,r,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:u,targetContainers:[o]},t!==null&&(t=Bn(t),t!==null&&b0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function _p(e,t,a,r,o){switch(t){case"focusin":return Wa=_s(Wa,e,t,a,r,o),!0;case"dragenter":return en=_s(en,e,t,a,r,o),!0;case"mouseover":return tn=_s(tn,e,t,a,r,o),!0;case"pointerover":var u=o.pointerId;return xs.set(u,_s(xs.get(u)||null,e,t,a,r,o)),!0;case"gotpointercapture":return u=o.pointerId,ws.set(u,_s(ws.get(u)||null,e,t,a,r,o)),!0}return!1}function S0(e){var t=zn(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,zc(e.priority,function(){x0(a)});return}}else if(t===31){if(t=m(a),t!==null){e.blockedOn=t,zc(e.priority,function(){x0(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Bu(e.nativeEvent);if(a===null){a=e.nativeEvent;var r=new a.constructor(a.type,a);Bl=r,a.target.dispatchEvent(r),Bl=null}else return t=Bn(a),t!==null&&b0(t),e.blockedOn=a,!1;t.shift()}return!0}function j0(e,t,a){Qi(e)&&a.delete(t)}function Sp(){qu=!1,Wa!==null&&Qi(Wa)&&(Wa=null),en!==null&&Qi(en)&&(en=null),tn!==null&&Qi(tn)&&(tn=null),xs.forEach(j0),ws.forEach(j0)}function Ji(e,t){e.blockedOn===t&&(e.blockedOn=null,qu||(qu=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Sp)))}var Zi=null;function E0(e){Zi!==e&&(Zi=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Zi===e&&(Zi=null);for(var t=0;t<e.length;t+=3){var a=e[t],r=e[t+1],o=e[t+2];if(typeof r!="function"){if(Lu(r||a)===null)continue;break}var u=Bn(a);u!==null&&(e.splice(t,3),t-=3,Bo(u,{pending:!0,data:o,method:a.method,action:r},r,o))}}))}function vr(e){function t(S){return Ji(S,e)}Wa!==null&&Ji(Wa,e),en!==null&&Ji(en,e),tn!==null&&Ji(tn,e),xs.forEach(t),ws.forEach(t);for(var a=0;a<an.length;a++){var r=an[a];r.blockedOn===e&&(r.blockedOn=null)}for(;0<an.length&&(a=an[0],a.blockedOn===null);)S0(a),a.blockedOn===null&&an.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(r=0;r<a.length;r+=3){var o=a[r],u=a[r+1],g=o[xt]||null;if(typeof u=="function")g||E0(a);else if(g){var v=null;if(u&&u.hasAttribute("formAction")){if(o=u,g=u[xt]||null)v=g.formAction;else if(Lu(o)!==null)continue}else v=g.action;typeof v=="function"?a[r+1]=v:(a.splice(r,3),r-=3),E0(a)}}}function k0(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(g){return o=g})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),r||setTimeout(a,20)}function a(){if(!r&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Hu(e){this._internalRoot=e}Fi.prototype.render=Hu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,r=Dt();p0(a,r,e,t,null,null)},Fi.prototype.unmount=Hu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;p0(e.current,2,null,e,null,null),Ri(),t[Mn]=null}};function Fi(e){this._internalRoot=e}Fi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<an.length&&t!==0&&t<an[a].priority;a++);an.splice(a,0,e),a===0&&S0(e)}};var N0=n.version;if(N0!=="19.2.0")throw Error(i(527,N0,"19.2.0"));O.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=y(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var jp={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wi.isDisabled&&Wi.supportsFiber)try{on=Wi.inject(jp),gt=Wi}catch{}}return js.createRoot=function(e,t){if(!c(e))throw Error(i(299));var a=!1,r="",o=Uh,u=Dh,g=Mh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=m0(e,1,!1,null,null,a,r,null,o,u,g,k0),e[Mn]=t.current,wu(e),new Hu(t)},js.hydrateRoot=function(e,t,a){if(!c(e))throw Error(i(299));var r=!1,o="",u=Uh,g=Dh,v=Mh,S=null;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),t=m0(e,1,!0,t,a??null,r,o,S,u,g,v,k0),t.context=y0(null),a=t.current,r=Dt(),r=Ol(r),o=$a(r),o.callback=null,Va(a,o,r),a=r,t.current.lanes=a,Ur(t,a),fa(t),e[Mn]=t.current,wu(e),new Fi(t)},js.version="19.2.0",js}var B0;function zp(){if(B0)return Gu.exports;B0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Gu.exports=Mp(),Gu.exports}var Bp=zp();const Lp=xc(Bp);var nc=function(l,n){return nc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(s[c]=i[c])},nc(l,n)};function yg(l,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");nc(l,n);function s(){this.constructor=l}l.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}var fl=function(){return fl=Object.assign||function(n){for(var s,i=1,c=arguments.length;i<c;i++){s=arguments[i];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(n[d]=s[d])}return n},fl.apply(this,arguments)};function Or(l,n){var s={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&n.indexOf(i)<0&&(s[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(l);c<i.length;c++)n.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(l,i[c])&&(s[i[c]]=l[i[c]]);return s}function pg(l,n,s,i){var c=arguments.length,d=c<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,s):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,n,s,i);else for(var m=l.length-1;m>=0;m--)(f=l[m])&&(d=(c<3?f(d):c>3?f(n,s,d):f(n,s))||d);return c>3&&d&&Object.defineProperty(n,s,d),d}function vg(l,n){return function(s,i){n(s,i,l)}}function bg(l,n,s,i,c,d){function f(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var m=i.kind,p=m==="getter"?"get":m==="setter"?"set":"value",y=!n&&l?i.static?l:l.prototype:null,b=n||(y?Object.getOwnPropertyDescriptor(y,i.name):{}),j,x=!1,w=s.length-1;w>=0;w--){var E={};for(var T in i)E[T]=T==="access"?{}:i[T];for(var T in i.access)E.access[T]=i.access[T];E.addInitializer=function(R){if(x)throw new TypeError("Cannot add initializers after decoration has completed");d.push(f(R||null))};var M=(0,s[w])(m==="accessor"?{get:b.get,set:b.set}:b[p],E);if(m==="accessor"){if(M===void 0)continue;if(M===null||typeof M!="object")throw new TypeError("Object expected");(j=f(M.get))&&(b.get=j),(j=f(M.set))&&(b.set=j),(j=f(M.init))&&c.unshift(j)}else(j=f(M))&&(m==="field"?c.unshift(j):b[p]=j)}y&&Object.defineProperty(y,i.name,b),x=!0}function xg(l,n,s){for(var i=arguments.length>2,c=0;c<n.length;c++)s=i?n[c].call(l,s):n[c].call(l);return i?s:void 0}function wg(l){return typeof l=="symbol"?l:"".concat(l)}function _g(l,n,s){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(l,"name",{configurable:!0,value:s?"".concat(s," ",n):n})}function Sg(l,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,n)}function ae(l,n,s,i){function c(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function m(b){try{y(i.next(b))}catch(j){f(j)}}function p(b){try{y(i.throw(b))}catch(j){f(j)}}function y(b){b.done?d(b.value):c(b.value).then(m,p)}y((i=i.apply(l,n||[])).next())})}function jg(l,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,c,d,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=m(0),f.throw=m(1),f.return=m(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(y){return function(b){return p([y,b])}}function p(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(s=0)),s;)try{if(i=1,c&&(d=y[0]&2?c.return:y[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,y[1])).done)return d;switch(c=0,d&&(y=[y[0]&2,d.value]),y[0]){case 0:case 1:d=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,c=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!d||y[1]>d[0]&&y[1]<d[3])){s.label=y[1];break}if(y[0]===6&&s.label<d[1]){s.label=d[1],d=y;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(y);break}d[2]&&s.ops.pop(),s.trys.pop();continue}y=n.call(l,s)}catch(b){y=[6,b],c=0}finally{i=d=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}var vl=Object.create?(function(l,n,s,i){i===void 0&&(i=s);var c=Object.getOwnPropertyDescriptor(n,s);(!c||("get"in c?!n.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(l,i,c)}):(function(l,n,s,i){i===void 0&&(i=s),l[i]=n[s]});function Eg(l,n){for(var s in l)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&vl(n,l,s)}function gl(l){var n=typeof Symbol=="function"&&Symbol.iterator,s=n&&l[n],i=0;if(s)return s.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&i>=l.length&&(l=void 0),{value:l&&l[i++],done:!l}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function _c(l,n){var s=typeof Symbol=="function"&&l[Symbol.iterator];if(!s)return l;var i=s.call(l),c,d=[],f;try{for(;(n===void 0||n-- >0)&&!(c=i.next()).done;)d.push(c.value)}catch(m){f={error:m}}finally{try{c&&!c.done&&(s=i.return)&&s.call(i)}finally{if(f)throw f.error}}return d}function kg(){for(var l=[],n=0;n<arguments.length;n++)l=l.concat(_c(arguments[n]));return l}function Ng(){for(var l=0,n=0,s=arguments.length;n<s;n++)l+=arguments[n].length;for(var i=Array(l),c=0,n=0;n<s;n++)for(var d=arguments[n],f=0,m=d.length;f<m;f++,c++)i[c]=d[f];return i}function Tg(l,n,s){if(s||arguments.length===2)for(var i=0,c=n.length,d;i<c;i++)(d||!(i in n))&&(d||(d=Array.prototype.slice.call(n,0,i)),d[i]=n[i]);return l.concat(d||Array.prototype.slice.call(n))}function Nr(l){return this instanceof Nr?(this.v=l,this):new Nr(l)}function Og(l,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=s.apply(l,n||[]),c,d=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",f),c[Symbol.asyncIterator]=function(){return this},c;function f(w){return function(E){return Promise.resolve(E).then(w,j)}}function m(w,E){i[w]&&(c[w]=function(T){return new Promise(function(M,R){d.push([w,T,M,R])>1||p(w,T)})},E&&(c[w]=E(c[w])))}function p(w,E){try{y(i[w](E))}catch(T){x(d[0][3],T)}}function y(w){w.value instanceof Nr?Promise.resolve(w.value.v).then(b,j):x(d[0][2],w)}function b(w){p("next",w)}function j(w){p("throw",w)}function x(w,E){w(E),d.shift(),d.length&&p(d[0][0],d[0][1])}}function Ag(l){var n,s;return n={},i("next"),i("throw",function(c){throw c}),i("return"),n[Symbol.iterator]=function(){return this},n;function i(c,d){n[c]=l[c]?function(f){return(s=!s)?{value:Nr(l[c](f)),done:!1}:d?d(f):f}:d}}function Cg(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=l[Symbol.asyncIterator],s;return n?n.call(l):(l=typeof gl=="function"?gl(l):l[Symbol.iterator](),s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s);function i(d){s[d]=l[d]&&function(f){return new Promise(function(m,p){f=l[d](f),c(m,p,f.done,f.value)})}}function c(d,f,m,p){Promise.resolve(p).then(function(y){d({value:y,done:m})},f)}}function Rg(l,n){return Object.defineProperty?Object.defineProperty(l,"raw",{value:n}):l.raw=n,l}var qp=Object.create?(function(l,n){Object.defineProperty(l,"default",{enumerable:!0,value:n})}):function(l,n){l.default=n},rc=function(l){return rc=Object.getOwnPropertyNames||function(n){var s=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[s.length]=i);return s},rc(l)};function Ug(l){if(l&&l.__esModule)return l;var n={};if(l!=null)for(var s=rc(l),i=0;i<s.length;i++)s[i]!=="default"&&vl(n,l,s[i]);return qp(n,l),n}function Dg(l){return l&&l.__esModule?l:{default:l}}function Mg(l,n,s,i){if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?l!==n||!i:!n.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?i:s==="a"?i.call(l):i?i.value:n.get(l)}function zg(l,n,s,i,c){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?l!==n||!c:!n.has(l))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?c.call(l,s):c?c.value=s:n.set(l,s),s}function Bg(l,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof l=="function"?n===l:l.has(n)}function Lg(l,n,s){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var i,c;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=n[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=n[Symbol.dispose],s&&(c=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");c&&(i=function(){try{c.call(this)}catch(d){return Promise.reject(d)}}),l.stack.push({value:n,dispose:i,async:s})}else s&&l.stack.push({async:!0});return n}var Hp=typeof SuppressedError=="function"?SuppressedError:function(l,n,s){var i=new Error(s);return i.name="SuppressedError",i.error=l,i.suppressed=n,i};function qg(l){function n(d){l.error=l.hasError?new Hp(d,l.error,"An error was suppressed during disposal."):d,l.hasError=!0}var s,i=0;function c(){for(;s=l.stack.pop();)try{if(!s.async&&i===1)return i=0,l.stack.push(s),Promise.resolve().then(c);if(s.dispose){var d=s.dispose.call(s.value);if(s.async)return i|=2,Promise.resolve(d).then(c,function(f){return n(f),c()})}else i|=1}catch(f){n(f)}if(i===1)return l.hasError?Promise.reject(l.error):Promise.resolve();if(l.hasError)throw l.error}return c()}function Hg(l,n){return typeof l=="string"&&/^\.\.?\//.test(l)?l.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,i,c,d,f){return i?n?".jsx":".js":c&&(!d||!f)?s:c+d+"."+f.toLowerCase()+"js"}):l}const $p={__extends:yg,__assign:fl,__rest:Or,__decorate:pg,__param:vg,__esDecorate:bg,__runInitializers:xg,__propKey:wg,__setFunctionName:_g,__metadata:Sg,__awaiter:ae,__generator:jg,__createBinding:vl,__exportStar:Eg,__values:gl,__read:_c,__spread:kg,__spreadArrays:Ng,__spreadArray:Tg,__await:Nr,__asyncGenerator:Og,__asyncDelegator:Ag,__asyncValues:Cg,__makeTemplateObject:Rg,__importStar:Ug,__importDefault:Dg,__classPrivateFieldGet:Mg,__classPrivateFieldSet:zg,__classPrivateFieldIn:Bg,__addDisposableResource:Lg,__disposeResources:qg,__rewriteRelativeImportExtension:Hg},Vp=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Lg,get __assign(){return fl},__asyncDelegator:Ag,__asyncGenerator:Og,__asyncValues:Cg,__await:Nr,__awaiter:ae,__classPrivateFieldGet:Mg,__classPrivateFieldIn:Bg,__classPrivateFieldSet:zg,__createBinding:vl,__decorate:pg,__disposeResources:qg,__esDecorate:bg,__exportStar:Eg,__extends:yg,__generator:jg,__importDefault:Dg,__importStar:Ug,__makeTemplateObject:Rg,__metadata:Sg,__param:vg,__propKey:wg,__read:_c,__rest:Or,__rewriteRelativeImportExtension:Hg,__runInitializers:xg,__setFunctionName:_g,__spread:kg,__spreadArray:Tg,__spreadArrays:Ng,__values:gl,default:$p},Symbol.toStringTag,{value:"Module"})),Gp="modulepreload",Pp=function(l){return"/Vidya-Gram/"+l},L0={},Ar=function(n,s,i){let c=Promise.resolve();if(s&&s.length>0){let f=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));c=f(s.map(y=>{if(y=Pp(y),y in L0)return;L0[y]=!0;const b=y.endsWith(".css"),j=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${j}`))return;const x=document.createElement("link");if(x.rel=b?"stylesheet":Gp,b||(x.as="script"),x.crossOrigin="",x.href=y,p&&x.setAttribute("nonce",p),document.head.appendChild(x),b)return new Promise((w,E)=>{x.addEventListener("load",w),x.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${y}`)))})}))}function d(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return c.then(f=>{for(const m of f||[])m.status==="rejected"&&d(m.reason);return n().catch(d)})},Yp=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>Ar(async()=>{const{default:i}=await Promise.resolve().then(()=>Rn);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)};class Sc extends Error{constructor(n,s="FunctionsError",i){super(n),this.name=s,this.context=i}}class q0 extends Sc{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class H0 extends Sc{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class $0 extends Sc{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var sc;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(sc||(sc={}));class Kp{constructor(n,{headers:s={},customFetch:i,region:c=sc.Any}={}){this.url=n,this.headers=s,this.region=c,this.fetch=Yp(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return ae(this,arguments,void 0,function*(s,i={}){var c;try{const{headers:d,method:f,body:m,signal:p}=i;let y={},{region:b}=i;b||(b=this.region);const j=new URL(`${this.url}/${s}`);b&&b!=="any"&&(y["x-region"]=b,j.searchParams.set("forceFunctionRegion",b));let x;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",x=m):typeof m=="string"?(y["Content-Type"]="text/plain",x=m):typeof FormData<"u"&&m instanceof FormData?x=m:(y["Content-Type"]="application/json",x=JSON.stringify(m)):x=m;const w=yield this.fetch(j.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),d),body:x,signal:p}).catch(R=>{throw R.name==="AbortError"?R:new q0(R)}),E=w.headers.get("x-relay-error");if(E&&E==="true")throw new H0(w);if(!w.ok)throw new $0(w);let T=((c=w.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),M;return T==="application/json"?M=yield w.json():T==="application/octet-stream"||T==="application/pdf"?M=yield w.blob():T==="text/event-stream"?M=w:T==="multipart/form-data"?M=yield w.formData():M=yield w.text(),{data:M,error:null,response:w}}catch(d){return d instanceof Error&&d.name==="AbortError"?{data:null,error:new q0(d)}:{data:null,error:d,response:d instanceof $0||d instanceof H0?d.context:void 0}}})}}var ht={};const Cr=mg(Vp);var el={},tl={},al={},nl={},rl={},Xp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tr=Xp();const Ip=Tr.fetch,$g=Tr.fetch.bind(Tr),Vg=Tr.Headers,Qp=Tr.Request,Jp=Tr.Response,Rn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Vg,Request:Qp,Response:Jp,default:$g,fetch:Ip},Symbol.toStringTag,{value:"Module"})),Zp=mg(Rn);var sl={},V0;function Gg(){if(V0)return sl;V0=1,Object.defineProperty(sl,"__esModule",{value:!0});class l extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return sl.default=l,sl}var G0;function Pg(){if(G0)return rl;G0=1,Object.defineProperty(rl,"__esModule",{value:!0});const l=Cr,n=l.__importDefault(Zp),s=l.__importDefault(Gg());class i{constructor(d){var f,m;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(f=d.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=d.signal,this.isMaybeSingle=(m=d.isMaybeSingle)!==null&&m!==void 0?m:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,f){return this.headers=new Headers(this.headers),this.headers.set(d,f),this}then(d,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let p=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var b,j,x,w;let E=null,T=null,M=null,R=y.status,z=y.statusText;if(y.ok){if(this.method!=="HEAD"){const V=await y.text();V===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((b=this.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?T=V:T=JSON.parse(V))}const X=(j=this.headers.get("Prefer"))===null||j===void 0?void 0:j.match(/count=(exact|planned|estimated)/),P=(x=y.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");X&&P&&P.length>1&&(M=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(E={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,M=null,R=406,z="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const X=await y.text();try{E=JSON.parse(X),Array.isArray(E)&&y.status===404&&(T=[],E=null,R=200,z="OK")}catch{y.status===404&&X===""?(R=204,z="No Content"):E={message:X}}if(E&&this.isMaybeSingle&&(!((w=E==null?void 0:E.details)===null||w===void 0)&&w.includes("0 rows"))&&(E=null,R=200,z="OK"),E&&this.shouldThrowOnError)throw new s.default(E)}return{error:E,data:T,count:M,status:R,statusText:z}});return this.shouldThrowOnError||(p=p.catch(y=>{var b,j,x;return{error:{message:`${(b=y==null?void 0:y.name)!==null&&b!==void 0?b:"FetchError"}: ${y==null?void 0:y.message}`,details:`${(j=y==null?void 0:y.stack)!==null&&j!==void 0?j:""}`,hint:"",code:`${(x=y==null?void 0:y.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),p.then(d,f)}returns(){return this}overrideTypes(){return this}}return rl.default=i,rl}var P0;function Yg(){if(P0)return nl;P0=1,Object.defineProperty(nl,"__esModule",{value:!0});const n=Cr.__importDefault(Pg());class s extends n.default{select(c){let d=!1;const f=(c??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:d=!0,nullsFirst:f,foreignTable:m,referencedTable:p=m}={}){const y=p?`${p}.order`:"order",b=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${b?`${b},`:""}${c}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:d,referencedTable:f=d}={}){const m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${c}`),this}range(c,d,{foreignTable:f,referencedTable:m=f}={}){const p=typeof m>"u"?"offset":`${m}.offset`,y=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${c}`),this.url.searchParams.set(y,`${d-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:d=!1,settings:f=!1,buffers:m=!1,wal:p=!1,format:y="text"}={}){var b;const j=[c?"analyze":null,d?"verbose":null,f?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),x=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${x}"; options=${j};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return nl.default=s,nl}var Y0;function jc(){if(Y0)return al;Y0=1,Object.defineProperty(al,"__esModule",{value:!0});const n=Cr.__importDefault(Yg()),s=new RegExp("[,()]");class i extends n.default{eq(d,f){return this.url.searchParams.append(d,`eq.${f}`),this}neq(d,f){return this.url.searchParams.append(d,`neq.${f}`),this}gt(d,f){return this.url.searchParams.append(d,`gt.${f}`),this}gte(d,f){return this.url.searchParams.append(d,`gte.${f}`),this}lt(d,f){return this.url.searchParams.append(d,`lt.${f}`),this}lte(d,f){return this.url.searchParams.append(d,`lte.${f}`),this}like(d,f){return this.url.searchParams.append(d,`like.${f}`),this}likeAllOf(d,f){return this.url.searchParams.append(d,`like(all).{${f.join(",")}}`),this}likeAnyOf(d,f){return this.url.searchParams.append(d,`like(any).{${f.join(",")}}`),this}ilike(d,f){return this.url.searchParams.append(d,`ilike.${f}`),this}ilikeAllOf(d,f){return this.url.searchParams.append(d,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(d,f){return this.url.searchParams.append(d,`ilike(any).{${f.join(",")}}`),this}is(d,f){return this.url.searchParams.append(d,`is.${f}`),this}in(d,f){const m=Array.from(new Set(f)).map(p=>typeof p=="string"&&s.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(d,`in.(${m})`),this}contains(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cs.{${f.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(f)}`),this}containedBy(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cd.{${f.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(f)}`),this}rangeGt(d,f){return this.url.searchParams.append(d,`sr.${f}`),this}rangeGte(d,f){return this.url.searchParams.append(d,`nxl.${f}`),this}rangeLt(d,f){return this.url.searchParams.append(d,`sl.${f}`),this}rangeLte(d,f){return this.url.searchParams.append(d,`nxr.${f}`),this}rangeAdjacent(d,f){return this.url.searchParams.append(d,`adj.${f}`),this}overlaps(d,f){return typeof f=="string"?this.url.searchParams.append(d,`ov.${f}`):this.url.searchParams.append(d,`ov.{${f.join(",")}}`),this}textSearch(d,f,{config:m,type:p}={}){let y="";p==="plain"?y="pl":p==="phrase"?y="ph":p==="websearch"&&(y="w");const b=m===void 0?"":`(${m})`;return this.url.searchParams.append(d,`${y}fts${b}.${f}`),this}match(d){return Object.entries(d).forEach(([f,m])=>{this.url.searchParams.append(f,`eq.${m}`)}),this}not(d,f,m){return this.url.searchParams.append(d,`not.${f}.${m}`),this}or(d,{foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.or`:"or";return this.url.searchParams.append(p,`(${d})`),this}filter(d,f,m){return this.url.searchParams.append(d,`${f}.${m}`),this}}return al.default=i,al}var K0;function Kg(){if(K0)return tl;K0=1,Object.defineProperty(tl,"__esModule",{value:!0});const n=Cr.__importDefault(jc());class s{constructor(c,{headers:d={},schema:f,fetch:m}){this.url=c,this.headers=new Headers(d),this.schema=f,this.fetch=m}select(c,d){const{head:f=!1,count:m}=d??{},p=f?"HEAD":"GET";let y=!1;const b=(c??"*").split("").map(j=>/\s/.test(j)&&!y?"":(j==='"'&&(y=!y),j)).join("");return this.url.searchParams.set("select",b),m&&this.headers.append("Prefer",`count=${m}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:d,defaultToNull:f=!0}={}){var m;const p="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const y=c.reduce((b,j)=>b.concat(Object.keys(j)),[]);if(y.length>0){const b=[...new Set(y)].map(j=>`"${j}"`);this.url.searchParams.set("columns",b.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(c,{onConflict:d,ignoreDuplicates:f=!1,count:m,defaultToNull:p=!0}={}){var y;const b="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const j=c.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(j.length>0){const x=[...new Set(j)].map(w=>`"${w}"`);this.url.searchParams.set("columns",x.join(","))}}return new n.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(c,{count:d}={}){var f;const m="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:c}={}){var d;const f="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return tl.default=s,tl}var X0;function Fp(){if(X0)return el;X0=1,Object.defineProperty(el,"__esModule",{value:!0});const l=Cr,n=l.__importDefault(Kg()),s=l.__importDefault(jc());class i{constructor(d,{headers:f={},schema:m,fetch:p}={}){this.url=d,this.headers=new Headers(f),this.schemaName=m,this.fetch=p}from(d){const f=new URL(`${this.url}/${d}`);return new n.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new i(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:m=!1,get:p=!1,count:y}={}){var b;let j;const x=new URL(`${this.url}/rpc/${d}`);let w;m||p?(j=m?"HEAD":"GET",Object.entries(f).filter(([T,M])=>M!==void 0).map(([T,M])=>[T,Array.isArray(M)?`{${M.join(",")}}`:`${M}`]).forEach(([T,M])=>{x.searchParams.append(T,M)})):(j="POST",w=f);const E=new Headers(this.headers);return y&&E.set("Prefer",`count=${y}`),new s.default({method:j,url:x,headers:E,schema:this.schemaName,body:w,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return el.default=i,el}var I0;function Wp(){if(I0)return ht;I0=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.PostgrestError=ht.PostgrestBuilder=ht.PostgrestTransformBuilder=ht.PostgrestFilterBuilder=ht.PostgrestQueryBuilder=ht.PostgrestClient=void 0;const l=Cr,n=l.__importDefault(Fp());ht.PostgrestClient=n.default;const s=l.__importDefault(Kg());ht.PostgrestQueryBuilder=s.default;const i=l.__importDefault(jc());ht.PostgrestFilterBuilder=i.default;const c=l.__importDefault(Yg());ht.PostgrestTransformBuilder=c.default;const d=l.__importDefault(Pg());ht.PostgrestBuilder=d.default;const f=l.__importDefault(Gg());return ht.PostgrestError=f.default,ht.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:d.default,PostgrestError:f.default},ht}var Xg=Wp();const Ig=xc(Xg),ev=kp({__proto__:null,default:Ig},[Xg]),{PostgrestClient:tv,PostgrestQueryBuilder:sw,PostgrestFilterBuilder:iw,PostgrestTransformBuilder:lw,PostgrestBuilder:ow,PostgrestError:uw}=Ig||ev;class av{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const i=s.node,c=parseInt(i.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const i=this.getWebSocketConstructor();return new i(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const nv="2.78.0",rv=`realtime-js/${nv}`,sv="1.0.0",ic=1e4,iv=1e3,lv=100;var Os;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(Os||(Os={}));var We;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(We||(We={}));var ia;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(ia||(ia={}));var lc;(function(l){l.websocket="websocket"})(lc||(lc={}));var On;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(On||(On={}));class ov{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),i=new TextDecoder;return this._decodeBroadcast(n,s,i)}_decodeBroadcast(n,s,i){const c=s.getUint8(1),d=s.getUint8(2);let f=this.HEADER_LENGTH+2;const m=i.decode(n.slice(f,f+c));f=f+c;const p=i.decode(n.slice(f,f+d));f=f+d;const y=JSON.parse(i.decode(n.slice(f,n.byteLength)));return{ref:null,topic:m,event:p,payload:y}}}class Qg{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Be;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Be||(Be={}));const Q0=(l,n,s={})=>{var i;const c=(i=s.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((d,f)=>(d[f]=uv(f,l,n,c),d),{}):{}},uv=(l,n,s,i)=>{const c=n.find(m=>m.name===l),d=c==null?void 0:c.type,f=s[l];return d&&!i.includes(d)?Jg(d,f):oc(f)},Jg=(l,n)=>{if(l.charAt(0)==="_"){const s=l.slice(1,l.length);return fv(n,s)}switch(l){case Be.bool:return cv(n);case Be.float4:case Be.float8:case Be.int2:case Be.int4:case Be.int8:case Be.numeric:case Be.oid:return dv(n);case Be.json:case Be.jsonb:return hv(n);case Be.timestamp:return gv(n);case Be.abstime:case Be.date:case Be.daterange:case Be.int4range:case Be.int8range:case Be.money:case Be.reltime:case Be.text:case Be.time:case Be.timestamptz:case Be.timetz:case Be.tsrange:case Be.tstzrange:return oc(n);default:return oc(n)}},oc=l=>l,cv=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},dv=l=>{if(typeof l=="string"){const n=parseFloat(l);if(!Number.isNaN(n))return n}return l},hv=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(n){return console.log(`JSON parse error: ${n}`),l}return l},fv=(l,n)=>{if(typeof l!="string")return l;const s=l.length-1,i=l[s];if(l[0]==="{"&&i==="}"){let d;const f=l.slice(1,s);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(m=>Jg(n,m))}return l},gv=l=>typeof l=="string"?l.replace(" ","T"):l,Zg=l=>{const n=new URL(l);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Xu{constructor(n,s,i={},c=ic){this.channel=n,this.event=s,this.payload=i,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var i;return this._hasReceived(n)&&s((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var J0;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(J0||(J0={}));class As{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},c=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=As.syncState(this.state,c,d,f),this.pendingDiffs.forEach(p=>{this.state=As.syncDiff(this.state,p,d,f)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},c=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=As.syncDiff(this.state,c,d,f),m())}),this.onJoin((c,d,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:f})}),this.onLeave((c,d,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,i,c){const d=this.cloneDeep(n),f=this.transformState(s),m={},p={};return this.map(d,(y,b)=>{f[y]||(p[y]=b)}),this.map(f,(y,b)=>{const j=d[y];if(j){const x=b.map(M=>M.presence_ref),w=j.map(M=>M.presence_ref),E=b.filter(M=>w.indexOf(M.presence_ref)<0),T=j.filter(M=>x.indexOf(M.presence_ref)<0);E.length>0&&(m[y]=E),T.length>0&&(p[y]=T)}else m[y]=b}),this.syncDiff(d,{joins:m,leaves:p},i,c)}static syncDiff(n,s,i,c){const{joins:d,leaves:f}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return i||(i=()=>{}),c||(c=()=>{}),this.map(d,(m,p)=>{var y;const b=(y=n[m])!==null&&y!==void 0?y:[];if(n[m]=this.cloneDeep(p),b.length>0){const j=n[m].map(w=>w.presence_ref),x=b.filter(w=>j.indexOf(w.presence_ref)<0);n[m].unshift(...x)}i(m,b,p)}),this.map(f,(m,p)=>{let y=n[m];if(!y)return;const b=p.map(j=>j.presence_ref);y=y.filter(j=>b.indexOf(j.presence_ref)<0),n[m]=y,c(m,y,p),y.length===0&&delete n[m]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(i=>s(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,i)=>{const c=n[i];return"metas"in c?s[i]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):s[i]=c,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Z0;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(Z0||(Z0={}));var Cs;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(Cs||(Cs={}));var Ua;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Ua||(Ua={}));class Ec{constructor(n,s={config:{}},i){var c,d;if(this.topic=n,this.params=s,this.socket=i,this.bindings={},this.state=We.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Xu(this,ia.join,this.params,this.timeout),this.rejoinTimer=new Qg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=We.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=We.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ia.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new As(this),this.broadcastEndpointURL=Zg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,s=this.timeout){var i,c,d;if(this.socket.isConnected()||this.socket.connect(),this.state==We.closed){const{config:{broadcast:f,presence:m,private:p}}=this.params,y=(c=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&c!==void 0?c:[],b=!!this.bindings[Cs.PRESENCE]&&this.bindings[Cs.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,j={},x={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:y,private:p};this.socket.accessTokenValue&&(j.access_token=this.socket.accessTokenValue),this._onError(w=>n==null?void 0:n(Ua.CHANNEL_ERROR,w)),this._onClose(()=>n==null?void 0:n(Ua.CLOSED)),this.updateJoinPayload(Object.assign({config:x},j)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:w})=>{var E;if(this.socket.setAuth(),w===void 0){n==null||n(Ua.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,M=(E=T==null?void 0:T.length)!==null&&E!==void 0?E:0,R=[];for(let z=0;z<M;z++){const L=T[z],{filter:{event:X,schema:P,table:V,filter:Q}}=L,ie=w&&w[z];if(ie&&ie.event===X&&ie.schema===P&&ie.table===V&&ie.filter===Q)R.push(Object.assign(Object.assign({},L),{id:ie.id}));else{this.unsubscribe(),this.state=We.errored,n==null||n(Ua.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,n&&n(Ua.SUBSCRIBED);return}}).receive("error",w=>{this.state=We.errored,n==null||n(Ua.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Ua.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,i){return this.state===We.joined&&n===Cs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,i)}async httpSend(n,s,i={}){var c;const d=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const f={method:"POST",headers:{Authorization:d,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:s,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(c=i.timeout)!==null&&c!==void 0?c:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const y=await m.json();p=y.error||y.message||p}catch{}return Promise.reject(new Error(p))}async send(n,s={}){var i,c;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=n,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);return await((c=y.body)===null||c===void 0?void 0:c.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,m,p;const y=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&d("ok"),y.receive("ok",()=>d("ok")),y.receive("error",()=>d("error")),y.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=We.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ia.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(c=>{i=new Xu(this,ia.leave,{},n),i.receive("ok",()=>{s(),c("ok")}).receive("timeout",()=>{s(),c("timed out")}).receive("error",()=>{c("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=We.closed,this.bindings={}}async _fetchWithTimeout(n,s,i){const c=new AbortController,d=setTimeout(()=>c.abort(),i),f=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:c.signal}));return clearTimeout(d),f}_push(n,s,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Xu(this,n,s,i);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>lv){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,i){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,i){var c,d;const f=n.toLocaleLowerCase(),{close:m,error:p,leave:y,join:b}=ia;if(i&&[m,p,y,b].indexOf(f)>=0&&i!==this._joinRef())return;let x=this._onMessage(f,s,i);if(s&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(w=>{var E,T,M;return((E=w.filter)===null||E===void 0?void 0:E.event)==="*"||((M=(T=w.filter)===null||T===void 0?void 0:T.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===f}).map(w=>w.callback(x,i)):(d=this.bindings[f])===null||d===void 0||d.filter(w=>{var E,T,M,R,z,L;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in w){const X=w.id,P=(E=w.filter)===null||E===void 0?void 0:E.event;return X&&((T=s.ids)===null||T===void 0?void 0:T.includes(X))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((M=s.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const X=(z=(R=w==null?void 0:w.filter)===null||R===void 0?void 0:R.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return X==="*"||X===((L=s==null?void 0:s.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===f}).map(w=>{if(typeof x=="object"&&"ids"in x){const E=x.data,{schema:T,table:M,commit_timestamp:R,type:z,errors:L}=E;x=Object.assign(Object.assign({},{schema:T,table:M,commit_timestamp:R,eventType:z,new:{},old:{},errors:L}),this._getPayloadRecords(E))}w.callback(x,i)})}_isClosed(){return this.state===We.closed}_isJoined(){return this.state===We.joined}_isJoining(){return this.state===We.joining}_isLeaving(){return this.state===We.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,i){const c=n.toLocaleLowerCase(),d={type:c,filter:s,callback:i};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(n,s){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===i&&Ec.isEqual(c.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const i in n)if(n[i]!==s[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(ia.close,{},n)}_onError(n){this._on(ia.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=We.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=Q0(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=Q0(n.columns,n.old_record)),s}}const Iu=()=>{},il={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mv=[1e3,2e3,5e3,1e4],yv=1e4,pv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vv{constructor(n,s){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ic,this.transport=null,this.heartbeatIntervalMs=il.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Iu,this.ref=0,this.reconnectTimer=null,this.logger=Iu,this.conn=null,this.sendBuffer=[],this.serializer=new ov,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>{let d;return c?d=c:typeof fetch>"u"?d=(...f)=>Ar(async()=>{const{default:m}=await Promise.resolve().then(()=>Rn);return{default:m}},void 0).then(({default:m})=>m(...f)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...f)=>d(...f)},!(!((i=s==null?void 0:s.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${lc.websocket}`,this.httpEndpoint=Zg(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=av.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sv}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,i){this.logger(n,s,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Os.connecting:return On.Connecting;case Os.open:return On.Open;case Os.closing:return On.Closing;default:return On.Closed}}isConnected(){return this.connectionState()===On.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const i=`realtime:${n}`,c=this.getChannels().find(d=>d.topic===i);if(c)return c;{const d=new Ec(`realtime:${n}`,s,this);return this.channels.push(d),d}}push(n){const{topic:s,event:i,payload:c,ref:d}=n,f=()=>{this.encode(n,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${s} ${i} (${d})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(iv,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},il.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:c,payload:d,ref:f}=s,m=f?`(${f})`:"",p=d.status||"";this.log("receive",`${p} ${i} ${c} ${m}`.trim(),d),this.channels.filter(y=>y._isMember(i)).forEach(y=>y._trigger(c,d,f)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(ia.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const i=n.match(/\?/)?"&":"?",c=new URLSearchParams(s);return`${n}${i}${c}`}_workerObjectUrl(n){let s;if(n)s=n;else{const i=new Blob([pv],{type:"application/javascript"});s=URL.createObjectURL(i)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(i=>{const c={access_token:s,version:rv};s&&i.updateJoinPayload(c),i.joinedOnce&&i._isJoined()&&i._push(ia.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(s)}catch(c){this.log("error",`error in ${n} callback`,c)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Qg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},il.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,i,c,d,f,m,p,y,b;if(this.transport=(s=n==null?void 0:n.transport)!==null&&s!==void 0?s:null,this.timeout=(i=n==null?void 0:n.timeout)!==null&&i!==void 0?i:ic,this.heartbeatIntervalMs=(c=n==null?void 0:n.heartbeatIntervalMs)!==null&&c!==void 0?c:il.HEARTBEAT_INTERVAL,this.worker=(d=n==null?void 0:n.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=n==null?void 0:n.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=n==null?void 0:n.heartbeatCallback)!==null&&m!==void 0?m:Iu,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n==null?void 0:n.reconnectAfterMs)!==null&&p!==void 0?p:(j=>mv[j-1]||yv),this.encode=(y=n==null?void 0:n.encode)!==null&&y!==void 0?y:((j,x)=>x(JSON.stringify(j))),this.decode=(b=n==null?void 0:n.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}class kc extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function $e(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class bv extends kc{constructor(n,s,i){super(n),this.name="StorageApiError",this.status=s,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class uc extends kc{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}const Nc=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>Ar(async()=>{const{default:i}=await Promise.resolve().then(()=>Rn);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)},xv=()=>ae(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ar(()=>Promise.resolve().then(()=>Rn),void 0)).Response:Response}),cc=l=>{if(Array.isArray(l))return l.map(s=>cc(s));if(typeof l=="function"||l!==Object(l))return l;const n={};return Object.entries(l).forEach(([s,i])=>{const c=s.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[c]=cc(i)}),n},wv=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},Qu=l=>{var n;return l.msg||l.message||l.error_description||(typeof l.error=="string"?l.error:(n=l.error)===null||n===void 0?void 0:n.message)||JSON.stringify(l)},_v=(l,n,s)=>ae(void 0,void 0,void 0,function*(){const i=yield xv();l instanceof i&&!(s!=null&&s.noResolveJson)?l.json().then(c=>{const d=l.status||500,f=(c==null?void 0:c.statusCode)||d+"";n(new bv(Qu(c),d,f))}).catch(c=>{n(new uc(Qu(c),c))}):n(new uc(Qu(l),l))}),Sv=(l,n,s,i)=>{const c={method:l,headers:(n==null?void 0:n.headers)||{}};return l==="GET"||!i?c:(wv(i)?(c.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),c.body=JSON.stringify(i)):c.body=i,n!=null&&n.duplex&&(c.duplex=n.duplex),Object.assign(Object.assign({},c),s))};function zs(l,n,s,i,c,d){return ae(this,void 0,void 0,function*(){return new Promise((f,m)=>{l(s,Sv(n,i,c,d)).then(p=>{if(!p.ok)throw p;return i!=null&&i.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>_v(p,m,i))})})}function Rs(l,n,s,i){return ae(this,void 0,void 0,function*(){return zs(l,"GET",n,s,i)})}function sa(l,n,s,i,c){return ae(this,void 0,void 0,function*(){return zs(l,"POST",n,i,c,s)})}function dc(l,n,s,i,c){return ae(this,void 0,void 0,function*(){return zs(l,"PUT",n,i,c,s)})}function jv(l,n,s,i){return ae(this,void 0,void 0,function*(){return zs(l,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),i)})}function Tc(l,n,s,i,c){return ae(this,void 0,void 0,function*(){return zs(l,"DELETE",n,i,c,s)})}class Ev{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s}then(n,s){return this.execute().then(n,s)}execute(){return ae(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}})}}var Fg;class kv{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s,this[Fg]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ev(this.downloadFn,this.shouldThrowOnError)}then(n,s){return this.getPromise().then(n,s)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ae(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}})}}Fg=Symbol.toStringTag;const Nv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},F0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Tv{constructor(n,s={},i,c){this.shouldThrowOnError=!1,this.url=n,this.headers=s,this.bucketId=i,this.fetch=Nc(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,s,i,c){return ae(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},F0),c);let m=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",this.encodeMetadata(p)),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",this.encodeMetadata(p))):(d=i,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),c!=null&&c.headers&&(m=Object.assign(Object.assign({},m),c.headers));const y=this._removeEmptyFolders(s),b=this._getFinalPath(y),j=yield(n=="PUT"?dc:sa)(this.fetch,`${this.url}/object/${b}`,d,Object.assign({headers:m},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:y,id:j.Id,fullPath:j.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if($e(d))return{data:null,error:d};throw d}})}upload(n,s,i){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,i)})}uploadToSignedUrl(n,s,i,c){return ae(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(n),f=this._getFinalPath(d),m=new URL(this.url+`/object/upload/sign/${f}`);m.searchParams.set("token",s);try{let p;const y=Object.assign({upsert:F0.upsert},c),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",y.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",y.cacheControl)):(p=i,b["cache-control"]=`max-age=${y.cacheControl}`,b["content-type"]=y.contentType);const j=yield dc(this.fetch,m.toString(),p,{headers:b});return{data:{path:d,fullPath:j.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if($e(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(n,s){return ae(this,void 0,void 0,function*(){try{let i=this._getFinalPath(n);const c=Object.assign({},this.headers);s!=null&&s.upsert&&(c["x-upsert"]="true");const d=yield sa(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:c}),f=new URL(this.url+d.url),m=f.searchParams.get("token");if(!m)throw new kc("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:m},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}})}update(n,s,i){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,i)})}move(n,s,i){return ae(this,void 0,void 0,function*(){try{return{data:yield sa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}copy(n,s,i){return ae(this,void 0,void 0,function*(){try{return{data:{path:(yield sa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}createSignedUrl(n,s,i){return ae(this,void 0,void 0,function*(){try{let c=this._getFinalPath(n),d=yield sa(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:s},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const f=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}createSignedUrls(n,s,i){return ae(this,void 0,void 0,function*(){try{const c=yield sa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),d=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:c.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}download(n,s){const c=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),f=d?`?${d}`:"",m=this._getFinalPath(n),p=()=>Rs(this.fetch,`${this.url}/${c}/${m}${f}`,{headers:this.headers,noResolveJson:!0});return new kv(p,this.shouldThrowOnError)}info(n){return ae(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const i=yield Rs(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:cc(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}})}exists(n){return ae(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield jv(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i)&&i instanceof uc){const c=i.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:i}}throw i}})}getPublicUrl(n,s){const i=this._getFinalPath(n),c=[],d=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";d!==""&&c.push(d);const m=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});p!==""&&c.push(p);let y=c.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${y}`)}}}remove(n){return ae(this,void 0,void 0,function*(){try{return{data:yield Tc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}list(n,s,i){return ae(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},Nv),s),{prefix:n||""});return{data:yield sa(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},i),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}listV2(n,s){return ae(this,void 0,void 0,function*(){try{const i=Object.assign({},n);return{data:yield sa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const Wg="2.78.0",em={"X-Client-Info":`storage-js/${Wg}`};class Ov{constructor(n,s={},i,c){this.shouldThrowOnError=!1;const d=new URL(n);c!=null&&c.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},em),s),this.fetch=Nc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(n){return ae(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(n);return{data:yield Rs(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}getBucket(n){return ae(this,void 0,void 0,function*(){try{return{data:yield Rs(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}createBucket(n){return ae(this,arguments,void 0,function*(s,i={public:!1}){try{return{data:yield sa(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($e(c))return{data:null,error:c};throw c}})}updateBucket(n,s){return ae(this,void 0,void 0,function*(){try{return{data:yield dc(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($e(i))return{data:null,error:i};throw i}})}emptyBucket(n){return ae(this,void 0,void 0,function*(){try{return{data:yield sa(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}deleteBucket(n){return ae(this,void 0,void 0,function*(){try{return{data:yield Tc(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(n){const s={};return n&&("limit"in n&&(s.limit=String(n.limit)),"offset"in n&&(s.offset=String(n.offset)),n.search&&(s.search=n.search),n.sortColumn&&(s.sortColumn=n.sortColumn),n.sortOrder&&(s.sortOrder=n.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}class Av{constructor(n,s={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},em),s),this.fetch=Nc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return ae(this,void 0,void 0,function*(){try{return{data:yield sa(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}listBuckets(n){return ae(this,void 0,void 0,function*(){try{const s=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&s.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&s.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&s.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&s.set("sortOrder",n.sortOrder),n!=null&&n.search&&s.set("search",n.search);const i=s.toString(),c=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Rs(this.fetch,c,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}deleteBucket(n){return ae(this,void 0,void 0,function*(){try{return{data:yield Tc(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($e(s))return{data:null,error:s};throw s}})}}const Oc={"X-Client-Info":`storage-js/${Wg}`,"Content-Type":"application/json"};class tm extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Mt(l){return typeof l=="object"&&l!==null&&"__isStorageVectorsError"in l}class Ju extends tm{constructor(n,s,i){super(n),this.name="StorageVectorsApiError",this.status=s,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Cv extends tm{constructor(n,s){super(n),this.name="StorageVectorsUnknownError",this.originalError=s}}var W0;(function(l){l.InternalError="InternalError",l.S3VectorConflictException="S3VectorConflictException",l.S3VectorNotFoundException="S3VectorNotFoundException",l.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",l.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",l.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(W0||(W0={}));const Ac=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>Ar(async()=>{const{default:i}=await Promise.resolve().then(()=>Rn);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)},Rv=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},eg=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Uv=(l,n,s)=>ae(void 0,void 0,void 0,function*(){if(l&&typeof l=="object"&&"status"in l&&"ok"in l&&typeof l.status=="number"&&!(s!=null&&s.noResolveJson)){const c=l.status||500,d=l;if(typeof d.json=="function")d.json().then(f=>{const m=(f==null?void 0:f.statusCode)||(f==null?void 0:f.code)||c+"";n(new Ju(eg(f),c,m))}).catch(()=>{const f=c+"",m=d.statusText||`HTTP ${c} error`;n(new Ju(m,c,f))});else{const f=c+"",m=d.statusText||`HTTP ${c} error`;n(new Ju(m,c,f))}}else n(new Cv(eg(l),l))}),Dv=(l,n,s,i)=>{const c={method:l,headers:(n==null?void 0:n.headers)||{}};return i?(Rv(i)?(c.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),c.body=JSON.stringify(i)):c.body=i,Object.assign(Object.assign({},c),s)):c};function Mv(l,n,s,i,c,d){return ae(this,void 0,void 0,function*(){return new Promise((f,m)=>{l(s,Dv(n,i,c,d)).then(p=>{if(!p.ok)throw p;if(i!=null&&i.noResolveJson)return p;const y=p.headers.get("content-type");return!y||!y.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>Uv(p,m,i))})})}function zt(l,n,s,i,c){return ae(this,void 0,void 0,function*(){return Mv(l,"POST",n,i,c,s)})}class zv{constructor(n,s={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Oc),s),this.fetch=Ac(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return ae(this,void 0,void 0,function*(){try{return{data:(yield zt(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}getIndex(n,s){return ae(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:s},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}listIndexes(n){return ae(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}deleteIndex(n,s){return ae(this,void 0,void 0,function*(){try{return{data:(yield zt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:s},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}}class Bv{constructor(n,s={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Oc),s),this.fetch=Ac(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return ae(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield zt(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}getVectors(n){return ae(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}listVectors(n){return ae(this,void 0,void 0,function*(){try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:yield zt(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}queryVectors(n){return ae(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}deleteVectors(n){return ae(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield zt(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}}class Lv{constructor(n,s={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Oc),s),this.fetch=Ac(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return ae(this,void 0,void 0,function*(){try{return{data:(yield zt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}getBucket(n){return ae(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}listBuckets(){return ae(this,arguments,void 0,function*(n={}){try{return{data:yield zt(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}deleteBucket(n){return ae(this,void 0,void 0,function*(){try{return{data:(yield zt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}}class qv extends Lv{constructor(n,s={}){super(n,s.headers||{},s.fetch)}from(n){return new Hv(this.url,this.headers,n,this.fetch)}}class Hv extends zv{constructor(n,s,i,c){super(n,s,c),this.vectorBucketName=i}createIndex(n){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ae(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ae(this,arguments,void 0,function*(s={}){return n.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ae(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ae(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new $v(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class $v extends Bv{constructor(n,s,i,c,d){super(n,s,d),this.vectorBucketName=i,this.indexName=c}putVectors(n){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ae(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ae(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ae(this,arguments,void 0,function*(s={}){return n.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ae(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ae(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Vv extends Ov{constructor(n,s={},i,c){super(n,s,i,c)}from(n){return new Tv(this.url,this.headers,n,this.fetch)}get vectors(){return new qv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Av(this.url+"/iceberg",this.headers,this.fetch)}}const Gv="2.78.0";let Ts="";typeof Deno<"u"?Ts="deno":typeof document<"u"?Ts="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ts="react-native":Ts="node";const Pv={"X-Client-Info":`supabase-js-${Ts}/${Gv}`},Yv={headers:Pv},Kv={schema:"public"},Xv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Iv={},Qv=l=>{let n;return l?n=l:typeof fetch>"u"?n=$g:n=fetch,(...s)=>n(...s)},Jv=()=>typeof Headers>"u"?Vg:Headers,Zv=(l,n,s)=>{const i=Qv(s),c=Jv();return async(d,f)=>{var m;const p=(m=await n())!==null&&m!==void 0?m:l;let y=new c(f==null?void 0:f.headers);return y.has("apikey")||y.set("apikey",l),y.has("Authorization")||y.set("Authorization",`Bearer ${p}`),i(d,Object.assign(Object.assign({},f),{headers:y}))}};function Fv(l){return l.endsWith("/")?l:l+"/"}function Wv(l,n){var s,i;const{db:c,auth:d,realtime:f,global:m}=l,{db:p,auth:y,realtime:b,global:j}=n,x={db:Object.assign(Object.assign({},p),c),auth:Object.assign(Object.assign({},y),d),realtime:Object.assign(Object.assign({},b),f),storage:{},global:Object.assign(Object.assign(Object.assign({},j),m),{headers:Object.assign(Object.assign({},(s=j==null?void 0:j.headers)!==null&&s!==void 0?s:{}),(i=m==null?void 0:m.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return l.accessToken?x.accessToken=l.accessToken:delete x.accessToken,x}function eb(l){const n=l==null?void 0:l.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Fv(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const am="2.78.0",jr=30*1e3,hc=3,Zu=hc*jr,tb="http://localhost:9999",ab="supabase.auth.token",nb={"X-Client-Info":`gotrue-js/${am}`},fc="X-Supabase-Api-Version",nm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sb=600*1e3;class Us extends Error{constructor(n,s,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=i}}function ne(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class ib extends Us{constructor(n,s,i){super(n,s,i),this.name="AuthApiError",this.status=s,this.code=i}}function lb(l){return ne(l)&&l.name==="AuthApiError"}class An extends Us{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class ln extends Us{constructor(n,s,i,c){super(n,i,c),this.name=s,this.status=i}}class na extends ln{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ob(l){return ne(l)&&l.name==="AuthSessionMissingError"}class br extends ln{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ll extends ln{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class ol extends ln{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ub(l){return ne(l)&&l.name==="AuthImplicitGrantRedirectError"}class tg extends ln{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gc extends ln{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function Fu(l){return ne(l)&&l.name==="AuthRetryableFetchError"}class ag extends ln{constructor(n,s,i){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=i}}class mc extends ln{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const ml="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ng=` 	
\r=`.split(""),cb=(()=>{const l=new Array(128);for(let n=0;n<l.length;n+=1)l[n]=-1;for(let n=0;n<ng.length;n+=1)l[ng[n].charCodeAt(0)]=-2;for(let n=0;n<ml.length;n+=1)l[ml[n].charCodeAt(0)]=n;return l})();function rg(l,n,s){if(l!==null)for(n.queue=n.queue<<8|l,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;s(ml[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;s(ml[i]),n.queuedBits-=6}}function rm(l,n,s){const i=cb[l];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function sg(l){const n=[],s=f=>{n.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=f=>{fb(f,i,s)};for(let f=0;f<l.length;f+=1)rm(l.charCodeAt(f),c,d);return n.join("")}function db(l,n){if(l<=127){n(l);return}else if(l<=2047){n(192|l>>6),n(128|l&63);return}else if(l<=65535){n(224|l>>12),n(128|l>>6&63),n(128|l&63);return}else if(l<=1114111){n(240|l>>18),n(128|l>>12&63),n(128|l>>6&63),n(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function hb(l,n){for(let s=0;s<l.length;s+=1){let i=l.charCodeAt(s);if(i>55295&&i<=56319){const c=(i-55296)*1024&65535;i=(l.charCodeAt(s+1)-56320&65535|c)+65536,s+=1}db(i,n)}}function fb(l,n,s){if(n.utf8seq===0){if(l<=127){s(l);return}for(let i=1;i<6;i+=1)if((l>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=l&31;else if(n.utf8seq===3)n.codepoint=l&15;else if(n.utf8seq===4)n.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|l&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function kr(l){const n=[],s={queue:0,queuedBits:0},i=c=>{n.push(c)};for(let c=0;c<l.length;c+=1)rm(l.charCodeAt(c),s,i);return new Uint8Array(n)}function gb(l){const n=[];return hb(l,s=>n.push(s)),new Uint8Array(n)}function Cn(l){const n=[],s={queue:0,queuedBits:0},i=c=>{n.push(c)};return l.forEach(c=>rg(c,s,i)),rg(null,s,i),n.join("")}function mb(l){return Math.round(Date.now()/1e3)+l}function yb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const n=Math.random()*16|0;return(l=="x"?n:n&3|8).toString(16)})}const pt=()=>typeof window<"u"&&typeof document<"u",kn={tested:!1,writable:!1},sm=()=>{if(!pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(kn.tested)return kn.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),kn.tested=!0,kn.writable=!0}catch{kn.tested=!0,kn.writable=!1}return kn.writable};function pb(l){const n={},s=new URL(l);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((c,d)=>{n[d]=c})}catch{}return s.searchParams.forEach((i,c)=>{n[c]=i}),n}const im=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>Ar(async()=>{const{default:i}=await Promise.resolve().then(()=>Rn);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)},vb=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",Er=async(l,n,s)=>{await l.setItem(n,JSON.stringify(s))},Nn=async(l,n)=>{const s=await l.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},rn=async(l,n)=>{await l.removeItem(n)};class bl{constructor(){this.promise=new bl.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}bl.promiseConstructor=Promise;function Wu(l){const n=l.split(".");if(n.length!==3)throw new mc("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!rb.test(n[i]))throw new mc("JWT not in base64url format");return{header:JSON.parse(sg(n[0])),payload:JSON.parse(sg(n[1])),signature:kr(n[2]),raw:{header:n[0],payload:n[1]}}}async function bb(l){return await new Promise(n=>{setTimeout(()=>n(null),l)})}function xb(l,n){return new Promise((i,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await l(d);if(!n(d,null,f)){i(f);return}}catch(f){if(!n(d,f)){c(f);return}}})()})}function wb(l){return("0"+l.toString(16)).substr(-2)}function _b(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=s.length;let c="";for(let d=0;d<56;d++)c+=s.charAt(Math.floor(Math.random()*i));return c}return crypto.getRandomValues(n),Array.from(n,wb).join("")}async function Sb(l){const s=new TextEncoder().encode(l),i=await crypto.subtle.digest("SHA-256",s),c=new Uint8Array(i);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function jb(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const s=await Sb(l);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xr(l,n,s=!1){const i=_b();let c=i;s&&(c+="/PASSWORD_RECOVERY"),await Er(l,`${n}-code-verifier`,c);const d=await jb(i);return[d,i===d?"plain":"s256"]}const Eb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kb(l){const n=l.headers.get(fc);if(!n||!n.match(Eb))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Nb(l){if(!l)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(l<=n)throw new Error("JWT has expired")}function Tb(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ob=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wr(l){if(!Ob.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ec(){const l={};return new Proxy(l,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ab(l,n){return new Proxy(l,{get:(s,i,c)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const d=i.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,i,c)}return!n.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(s,i,c)}})}function ig(l){return JSON.parse(JSON.stringify(l))}const Tn=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Cb=[502,503,504];async function lg(l){var n;if(!vb(l))throw new gc(Tn(l),0);if(Cb.includes(l.status))throw new gc(Tn(l),l.status);let s;try{s=await l.json()}catch(d){throw new An(Tn(d),d)}let i;const c=kb(l);if(c&&c.getTime()>=nm["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?i=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(i=s.error_code),i){if(i==="weak_password")throw new ag(Tn(s),l.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new na}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new ag(Tn(s),l.status,s.weak_password.reasons);throw new ib(Tn(s),l.status||500,i)}const Rb=(l,n,s,i)=>{const c={method:l,headers:(n==null?void 0:n.headers)||{}};return l==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),c.body=JSON.stringify(i),Object.assign(Object.assign({},c),s))};async function he(l,n,s,i){var c;const d=Object.assign({},i==null?void 0:i.headers);d[fc]||(d[fc]=nm["2024-01-01"].name),i!=null&&i.jwt&&(d.Authorization=`Bearer ${i.jwt}`);const f=(c=i==null?void 0:i.query)!==null&&c!==void 0?c:{};i!=null&&i.redirectTo&&(f.redirect_to=i.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await Ub(l,n,s+m,{headers:d,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(p):{data:Object.assign({},p),error:null}}async function Ub(l,n,s,i,c,d){const f=Rb(n,i,c,d);let m;try{m=await l(s,Object.assign({},f))}catch(p){throw console.error(p),new gc(Tn(p),0)}if(m.ok||await lg(m),i!=null&&i.noResolveJson)return m;try{return await m.json()}catch(p){await lg(p)}}function ra(l){var n;let s=null;zb(l)&&(s=Object.assign({},l),l.expires_at||(s.expires_at=mb(l.expires_in)));const i=(n=l.user)!==null&&n!==void 0?n:l;return{data:{session:s,user:i},error:null}}function og(l){const n=ra(l);return!n.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0)&&(n.data.weak_password=l.weak_password),n}function sn(l){var n;return{data:{user:(n=l.user)!==null&&n!==void 0?n:l},error:null}}function Db(l){return{data:l,error:null}}function Mb(l){const{action_link:n,email_otp:s,hashed_token:i,redirect_to:c,verification_type:d}=l,f=Or(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:s,hashed_token:i,redirect_to:c,verification_type:d},p=Object.assign({},f);return{data:{properties:m,user:p},error:null}}function ug(l){return l}function zb(l){return l.access_token&&l.refresh_token&&l.expires_in}const tc=["global","local","others"];class Bb{constructor({url:n="",headers:s={},fetch:i}){this.url=n,this.headers=s,this.fetch=im(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,s=tc[0]){if(tc.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tc.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,s={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:sn})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:s}=n,i=Or(n,["options"]),c=Object.assign(Object.assign({},i),s);return"newEmail"in i&&(c.new_email=i==null?void 0:i.newEmail,delete c.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Mb,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ne(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:sn})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,i,c,d,f,m,p;try{const y={nextPage:null,lastPage:0,total:0},b=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(d=(c=n==null?void 0:n.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:ug});if(b.error)throw b.error;const j=await b.json(),x=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,w=(p=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(E=>{const T=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(E.split(";")[1].split("=")[1]);y[`${M}Page`]=T}),y.total=parseInt(x)),{data:Object.assign(Object.assign({},j),y),error:null}}catch(y){if(ne(y))return{data:{users:[]},error:y};throw y}}async getUserById(n){wr(n);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:sn})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){wr(n);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:sn})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,s=!1){wr(n);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:sn})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){wr(n.userId);try{const{data:s,error:i}=await he(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:s,error:i}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _deleteFactor(n){wr(n.userId),wr(n.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _listOAuthClients(n){var s,i,c,d,f,m,p;try{const y={nextPage:null,lastPage:0,total:0},b=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(d=(c=n==null?void 0:n.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:ug});if(b.error)throw b.error;const j=await b.json(),x=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,w=(p=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(E=>{const T=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(E.split(";")[1].split("=")[1]);y[`${M}Page`]=T}),y.total=parseInt(x)),{data:Object.assign(Object.assign({},j),y),error:null}}catch(y){if(ne(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(n){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _getOAuthClient(n){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _updateOAuthClient(n,s){try{return await he(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:s,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(n){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(n){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}}function cg(l={}){return{getItem:n=>l[n]||null,setItem:(n,s)=>{l[n]=s},removeItem:n=>{delete l[n]}}}const _r={debug:!!(globalThis&&sm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lm extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Lb extends lm{}async function qb(l,n,s){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),_r.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async c=>{if(c){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,c.name);try{return await s()}finally{_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,c.name)}}else{if(n===0)throw _r.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new Lb(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(_r.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Hb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function om(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function $b(l){return parseInt(l,16)}function Vb(l){const n=new TextEncoder().encode(l);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function Gb(l){var n;const{chainId:s,domain:i,expirationTime:c,issuedAt:d=new Date,nonce:f,notBefore:m,requestId:p,resources:y,scheme:b,uri:j,version:x}=l;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!j)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((n=l.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const w=om(l.address),E=b?`${b}://${i}`:i,T=l.statement?`${l.statement}
`:"",M=`${E} wants you to sign in with your Ethereum account:
${w}

${T}`;let R=`URI: ${j}
Version: ${x}
Chain ID: ${s}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(c&&(R+=`
Expiration Time: ${c.toISOString()}`),m&&(R+=`
Not Before: ${m.toISOString()}`),p&&(R+=`
Request ID: ${p}`),y){let z=`
Resources:`;for(const L of y){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);z+=`
- ${L}`}R+=z}return`${M}
${R}`}class Ze extends Error{constructor({message:n,code:s,cause:i,name:c}){var d;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(d=c??(i instanceof Error?i.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=s}}class yl extends Ze{constructor(n,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:n}),this.name="WebAuthnUnknownError",this.originalError=s}}function Pb({error:l,options:n}){var s,i,c;const{publicKey:d}=n;if(!d)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ze({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((s=d.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Ze({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(n.mediation==="conditional"&&((i=d.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ze({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((c=d.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Ze({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new Ze({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new Ze({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return d.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Ze({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new Ze({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const f=window.location.hostname;if(um(f)){if(d.rp.id!==f)return new Ze({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new Ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Ze({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new Ze({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new Ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function Yb({error:l,options:n}){const{publicKey:s}=n;if(!s)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ze({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new Ze({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const i=window.location.hostname;if(um(i)){if(s.rpId!==i)return new Ze({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new Ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new Ze({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new Ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}class Kb{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Xb=new Kb;function Ib(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:n,user:s,excludeCredentials:i}=l,c=Or(l,["challenge","user","excludeCredentials"]),d=kr(n).buffer,f=Object.assign(Object.assign({},s),{id:kr(s.id).buffer}),m=Object.assign(Object.assign({},c),{challenge:d,user:f});if(i&&i.length>0){m.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const y=i[p];m.excludeCredentials[p]=Object.assign(Object.assign({},y),{id:kr(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return m}function Qb(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:n,allowCredentials:s}=l,i=Or(l,["challenge","allowCredentials"]),c=kr(n).buffer,d=Object.assign(Object.assign({},i),{challenge:c});if(s&&s.length>0){d.allowCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const m=s[f];d.allowCredentials[f]=Object.assign(Object.assign({},m),{id:kr(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function Jb(l){var n;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const s=l;return{id:l.id,rawId:l.id,response:{attestationObject:Cn(new Uint8Array(l.response.attestationObject)),clientDataJSON:Cn(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Zb(l){var n;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const s=l,i=l.getClientExtensionResults(),c=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:Cn(new Uint8Array(c.authenticatorData)),clientDataJSON:Cn(new Uint8Array(c.clientDataJSON)),signature:Cn(new Uint8Array(c.signature)),userHandle:c.userHandle?Cn(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function um(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function dg(){var l,n;return!!(pt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator==null?void 0:navigator.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Fb(l){try{const n=await navigator.credentials.create(l);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new yl("Browser returned unexpected credential type",n)}:{data:null,error:new yl("Empty credential response",n)}}catch(n){return{data:null,error:Pb({error:n,options:l})}}}async function Wb(l){try{const n=await navigator.credentials.get(l);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new yl("Browser returned unexpected credential type",n)}:{data:null,error:new yl("Empty credential response",n)}}catch(n){return{data:null,error:Yb({error:n,options:l})}}}const ex={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},tx={userVerification:"preferred",hints:["security-key"]};function pl(...l){const n=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),s=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),i={};for(const c of l)if(c)for(const d in c){const f=c[d];if(f!==void 0)if(Array.isArray(f))i[d]=f;else if(s(f))i[d]=f;else if(n(f)){const m=i[d];n(m)?i[d]=pl(m,f):i[d]=pl(f)}else i[d]=f}return i}function ax(l,n){return pl(ex,l,n||{})}function nx(l,n){return pl(tx,l,n||{})}class rx{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:s,friendlyName:i,signal:c},d){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:n,webauthn:s});if(!f)return{data:null,error:m};const p=c??Xb.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:y}=f.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${i}`),y.displayName||(y.displayName=y.name)}switch(f.webauthn.type){case"create":{const y=ax(f.webauthn.credential_options.publicKey,d==null?void 0:d.create),{data:b,error:j}=await Fb({publicKey:y,signal:p});return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:j}}case"request":{const y=nx(f.webauthn.credential_options.publicKey,d==null?void 0:d.request),{data:b,error:j}=await Wb(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:y,signal:p}));return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:j}}}}catch(f){return ne(f)?{data:null,error:f}:{data:null,error:new An("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:s,webauthn:i}){return this.client.mfa.verify({factorId:s,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:c}},d){if(!s)return{data:null,error:new Us("rpId is required for WebAuthn authentication")};try{if(!dg())return{data:null,error:new An("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:n,webauthn:{rpId:s,rpOrigins:i},signal:c},{request:d});if(!f)return{data:null,error:m};const{webauthn:p}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:p.type,rpId:s,rpOrigins:i,credential_response:p.credential_response}})}catch(f){return ne(f)?{data:null,error:f}:{data:null,error:new An("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:c},d){if(!s)return{data:null,error:new Us("rpId is required for WebAuthn registration")};try{if(!dg())return{data:null,error:new An("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(b=>{var j;return(j=b.data)===null||j===void 0?void 0:j.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===n&&x.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:m};const{data:p,error:y}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:s,rpOrigins:i},signal:c},{create:d});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:s,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:y}}catch(f){return ne(f)?{data:null,error:f}:{data:null,error:new An("Unexpected error in register",f)}}}}Hb();const sx={url:tb,storageKey:ab,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hg(l,n,s){return await s()}const Sr={};class Ds{get jwks(){var n,s;return(s=(n=Sr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){Sr[this.storageKey]=Object.assign(Object.assign({},Sr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=Sr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Sr[this.storageKey]=Object.assign(Object.assign({},Sr[this.storageKey]),{cachedAt:n})}constructor(n){var s,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ds.nextInstanceID,Ds.nextInstanceID+=1,this.instanceID>0&&pt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},sx),n);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Bb({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=im(c.fetch),this.lock=c.lock||hg,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:pt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=qb:this.lock=hg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new rx(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:sm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=cg(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=cg(this.memoryStorage)),pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${am}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=pb(window.location.href);let i="none";if(this._isImplicitGrantCallback(s)?i="implicit":await this._isPKCECallback(s)&&(i="pkce"),pt()&&this.detectSessionInUrl&&i!=="none"){const{data:c,error:d}=await this._getSessionFromURL(s,i);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),ub(d)){const p=(n=d.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ne(s)?{error:s}:{error:new An("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,i,c;try{const d=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(s=n==null?void 0:n.options)===null||s===void 0?void 0:s.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(c=n==null?void 0:n.options)===null||c===void 0?void 0:c.captchaToken}},xform:ra}),{data:f,error:m}=d;if(m||!f)return{data:{user:null,session:null},error:m};const p=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(d){if(ne(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(n){var s,i,c;try{let d;if("email"in n){const{email:b,password:j,options:x}=n;let w=null,E=null;this.flowType==="pkce"&&([w,E]=await xr(this.storage,this.storageKey)),d=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:b,password:j,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:w,code_challenge_method:E},xform:ra})}else if("phone"in n){const{phone:b,password:j,options:x}=n;d=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:j,data:(i=x==null?void 0:x.data)!==null&&i!==void 0?i:{},channel:(c=x==null?void 0:x.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:ra})}else throw new ll("You must provide either an email or phone number and a password");const{data:f,error:m}=d;if(m||!f)return{data:{user:null,session:null},error:m};const p=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(d){if(ne(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(n){try{let s;if("email"in n){const{email:d,password:f,options:m}=n;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:og})}else if("phone"in n){const{phone:d,password:f,options:m}=n;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:og})}else throw new ll("You must provide either an email or phone number and a password");const{data:i,error:c}=s;return c?{data:{user:null,session:null},error:c}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new br}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:c})}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,i,c,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;switch(s){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(n){var s,i,c,d,f,m,p,y,b,j,x;let w,E;if("message"in n)w=n.message,E=n.signature;else{const{chain:T,wallet:M,statement:R,options:z}=n;let L;if(pt())if(typeof M=="object")L=M;else{const fe=window;if("ethereum"in fe&&typeof fe.ethereum=="object"&&"request"in fe.ethereum&&typeof fe.ethereum.request=="function")L=fe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!(z!=null&&z.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=M}const X=new URL((s=z==null?void 0:z.url)!==null&&s!==void 0?s:window.location.href),P=await L.request({method:"eth_requestAccounts"}).then(fe=>fe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const V=om(P[0]);let Q=(i=z==null?void 0:z.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!Q){const fe=await L.request({method:"eth_chainId"});Q=$b(fe)}const ie={domain:X.host,address:V,statement:R,uri:X.href,version:"1",chainId:Q,nonce:(c=z==null?void 0:z.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(f=(d=z==null?void 0:z.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=z==null?void 0:z.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=z==null?void 0:z.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(y=z==null?void 0:z.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(b=z==null?void 0:z.signInWithEthereum)===null||b===void 0?void 0:b.resources};w=Gb(ie),E=await L.request({method:"personal_sign",params:[Vb(w),V]})}try{const{data:T,error:M}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:E},!((j=n.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ra});if(M)throw M;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new br}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:M})}catch(T){if(ne(T))return{data:{user:null,session:null},error:T};throw T}}async signInWithSolana(n){var s,i,c,d,f,m,p,y,b,j,x,w;let E,T;if("message"in n)E=n.message,T=n.signature;else{const{chain:M,wallet:R,statement:z,options:L}=n;let X;if(pt())if(typeof R=="object")X=R;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))X=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");X=R}const P=new URL((s=L==null?void 0:L.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in X&&X.signIn){const V=await X.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L==null?void 0:L.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),z?{statement:z}:null));let Q;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")Q=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)Q=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Q&&"signature"in Q&&(typeof Q.signedMessage=="string"||Q.signedMessage instanceof Uint8Array)&&Q.signature instanceof Uint8Array)E=typeof Q.signedMessage=="string"?Q.signedMessage:new TextDecoder().decode(Q.signedMessage),T=Q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in X)||typeof X.signMessage!="function"||!("publicKey"in X)||typeof X!="object"||!X.publicKey||!("toBase58"in X.publicKey)||typeof X.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${P.host} wants you to sign in with your Solana account:`,X.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(c=(i=L==null?void 0:L.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=L==null?void 0:L.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((f=L==null?void 0:L.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((m=L==null?void 0:L.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((p=L==null?void 0:L.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((y=L==null?void 0:L.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((j=(b=L==null?void 0:L.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||j===void 0)&&j.length?["Resources",...L.signInWithSolana.resources.map(Q=>`- ${Q}`)]:[]].join(`
`);const V=await X.signMessage(new TextEncoder().encode(E),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=V}}try{const{data:M,error:R}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Cn(T)},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(w=n.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:ra});if(R)throw R;return!M||!M.session||!M.user?{data:{user:null,session:null},error:new br}:(M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),{data:Object.assign({},M),error:R})}catch(M){if(ne(M))return{data:{user:null,session:null},error:M};throw M}}async _exchangeCodeForSession(n){const s=await Nn(this.storage,`${this.storageKey}-code-verifier`),[i,c]=(s??"").split("/");try{const{data:d,error:f}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:ra});if(await rn(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new br}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:f})}catch(d){if(ne(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(n){try{const{options:s,provider:i,token:c,access_token:d,nonce:f}=n,m=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:c,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ra}),{data:p,error:y}=m;return y?{data:{user:null,session:null},error:y}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new br}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:y})}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,i,c,d,f;try{if("email"in n){const{email:m,options:p}=n;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await xr(this.storage,this.storageKey));const{error:j}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},create_user:(i=p==null?void 0:p.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:y,code_challenge_method:b},redirectTo:p==null?void 0:p.emailRedirectTo});return{data:{user:null,session:null},error:j}}if("phone"in n){const{phone:m,options:p}=n,{data:y,error:b}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=p==null?void 0:p.data)!==null&&c!==void 0?c:{},create_user:(d=p==null?void 0:p.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(f=p==null?void 0:p.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:b}}throw new ll("You must provide either an email or phone number.")}catch(m){if(ne(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(n){var s,i;try{let c,d;"options"in n&&(c=(s=n.options)===null||s===void 0?void 0:s.redirectTo,d=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:m}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:ra});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,y=f.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(c){if(ne(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(n){var s,i,c;try{let d=null,f=null;return this.flowType==="pkce"&&([d,f]=await xr(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&i!==void 0?i:void 0}),!((c=n==null?void 0:n.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:Db})}catch(d){if(ne(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)throw i;if(!s)throw new na;const{error:c}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:c}})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:i,type:c,options:d}=n,{error:f}=await he(this.fetch,"POST",s,{headers:this.headers,body:{email:i,type:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in n){const{phone:i,type:c,options:d}=n,{data:f,error:m}=await he(this.fetch,"POST",s,{headers:this.headers,body:{phone:i,type:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m}}throw new ll("You must provide either an email or phone number and a type")}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await i,await s()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=s();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await Nn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<Zu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const f=await Nn(this.userStorage,this.storageKey+"-user");f!=null&&f.user?n.user=f.user:n.user=ec()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=Ab(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:c,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{session:null},error:d}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:sn}):await this._useSession(async s=>{var i,c,d;const{data:f,error:m}=s;if(m)throw m;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new na}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:sn})})}catch(s){if(ne(s))return ob(s)&&(await this._removeSession(),await rn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async i=>{const{data:c,error:d}=i;if(d)throw d;if(!c.session)throw new na;const f=c.session;let m=null,p=null;this.flowType==="pkce"&&n.email!=null&&([m,p]=await xr(this.storage,this.storageKey));const{data:y,error:b}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:p}),jwt:f.access_token,xform:sn});if(b)throw b;return f.user=y.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new na;const s=Date.now()/1e3;let i=s,c=!0,d=null;const{payload:f}=Wu(n.access_token);if(f.exp&&(i=f.exp,c=i<=s),c){const{data:m,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:p}=await this._getUser(n.access_token);if(p)throw p;d={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:i-s,expires_at:i},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(s){if(ne(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var i;if(!n){const{data:f,error:m}=s;if(m)throw m;n=(i=f.session)!==null&&i!==void 0?i:void 0}if(!(n!=null&&n.refresh_token))throw new na;const{data:c,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{user:null,session:null},error:d}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!pt())throw new ol("No browser detected.");if(n.error||n.error_description||n.error_code)throw new ol(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new tg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ol("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new tg("No code detected.");const{data:z,error:L}=await this._exchangeCodeForSession(n.code);if(L)throw L;const X=new URL(window.location.href);return X.searchParams.delete("code"),window.history.replaceState(window.history.state,"",X.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:c,access_token:d,refresh_token:f,expires_in:m,expires_at:p,token_type:y}=n;if(!d||!m||!f||!y)throw new ol("No session defined in URL");const b=Math.round(Date.now()/1e3),j=parseInt(m);let x=b+j;p&&(x=parseInt(p));const w=x-b;w*1e3<=jr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${j}s`);const E=x-j;b-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,x,b):b-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,x,b);const{data:T,error:M}=await this._getUser(d);if(M)throw M;const R={provider_token:i,provider_refresh_token:c,access_token:d,expires_in:j,expires_at:x,refresh_token:f,token_type:y,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:n.type},error:null}}catch(i){if(ne(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await Nn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var i;const{data:c,error:d}=s;if(d)return{error:d};const f=(i=c.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:m}=await this.admin.signOut(f,n);if(m&&!(lb(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return n!=="others"&&(await this._removeSession(),await rn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=yb(),i={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async s=>{var i,c;try{const{data:{session:d},error:f}=s;if(f)throw f;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,s={}){let i=null,c=null;this.flowType==="pkce"&&([i,c]=await xr(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:c,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(d){if(ne(d))return{data:null,error:d};throw d}}async getUserIdentities(){var n;try{const{data:s,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var s;try{const{data:i,error:c}=await this._useSession(async d=>{var f,m,p,y,b;const{data:j,error:x}=d;if(x)throw x;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",w,{headers:this.headers,jwt:(b=(y=j.session)===null||y===void 0?void 0:y.access_token)!==null&&b!==void 0?b:void 0})});if(c)throw c;return pt()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:n.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(ne(i))return{data:{provider:n.provider,url:null},error:i};throw i}}async linkIdentityIdToken(n){return await this._useSession(async s=>{var i;try{const{error:c,data:{session:d}}=s;if(c)throw c;const{options:f,provider:m,token:p,access_token:y,nonce:b}=n,j=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=d==null?void 0:d.access_token)!==null&&i!==void 0?i:void 0,body:{provider:m,id_token:p,access_token:y,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ra}),{data:x,error:w}=j;return w?{data:{user:null,session:null},error:w}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new br}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),{data:x,error:w})}catch(c){if(ne(c))return{data:{user:null,session:null},error:c};throw c}})}async unlinkIdentity(n){try{return await this._useSession(async s=>{var i,c;const{data:d,error:f}=s;if(f)throw f;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(c=(i=d.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const i=Date.now();return await xb(async c=>(c>0&&await bb(200*Math.pow(2,c-1)),this._debug(s,"refreshing attempt",c),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:ra})),(c,d)=>{const f=200*Math.pow(2,c);return d&&Fu(d)&&Date.now()+f-i<jr})}catch(i){if(this._debug(s,"error",i),ne(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",i),pt()&&!s.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,s;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const c=await Nn(this.storage,this.storageKey);if(c&&this.userStorage){let f=await Nn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await Er(this.userStorage,this.storageKey+"-user",f)),c.user=(n=f==null?void 0:f.user)!==null&&n!==void 0?n:ec()}else if(c&&!c.user&&!c.user){const f=await Nn(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(c.user=f.user,await rn(this.storage,this.storageKey+"-user"),await Er(this.storage,this.storageKey,c)):c.user=ec()}if(this._debug(i,"session from storage",c),!this._isValidSession(c)){this._debug(i,"session is not valid"),c!==null&&await this._removeSession();return}const d=((s=c.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Zu;if(this._debug(i,`session has${d?"":" not"} expired with margin of ${Zu}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),Fu(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(c.access_token);!m&&(f!=null&&f.user)?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(i,"error",c),console.error(c);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var s,i;if(!n)throw new na;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new bl;const{data:d,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!d.session)throw new na;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={data:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(c,"error",d),ne(d)){const f={data:null,error:d};return Fu(d)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(n,s,i=!0){const c=`#_notifyAllSubscribers(${n})`;this._debug(c,"begin",s,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:s});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,s)}catch(p){d.push(p)}});if(await Promise.all(f),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),i=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&s.user&&await Er(this.userStorage,this.storageKey+"-user",{user:s.user});const c=Object.assign({},s);delete c.user;const d=ig(c);await Er(this.storage,this.storageKey,d)}else{const c=ig(s);await Er(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await rn(this.storage,this.storageKey),await rn(this.storage,this.storageKey+"-code-verifier"),await rn(this.storage,this.storageKey+"-user"),this.userStorage&&await rn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),jr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:i}}=s;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((i.expires_at*1e3-n)/jr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${jr}ms, refresh threshold is ${hc} ticks`),c<=hc&&await this._callRefreshToken(i.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof lm)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,i){const c=[`provider=${encodeURIComponent(s)}`];if(i!=null&&i.redirectTo&&c.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&c.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[d,f]=await xr(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(m.toString())}if(i!=null&&i.queryParams){const d=new URLSearchParams(i.queryParams);c.push(d.toString())}return i!=null&&i.skipBrowserRedirect&&c.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${c.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var i;const{data:c,error:d}=s;return d?{data:null,error:d}:await he(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var i,c;const{data:d,error:f}=s;if(f)return{data:null,error:f};const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:p,error:y}=await he(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=d==null?void 0:d.session)===null||i===void 0?void 0:i.access_token});return y?{data:null,error:y}:(n.factorType==="totp"&&p.type==="totp"&&(!((c=p==null?void 0:p.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var i;const{data:c,error:d}=s;if(d)return{data:null,error:d};const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Jb(n.webauthn.credential_response):Zb(n.webauthn.credential_response)})}:{code:n.code}),{data:m,error:p}=await he(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),{data:m,error:p})})}catch(s){if(ne(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var i;const{data:c,error:d}=s;if(d)return{data:null,error:d};const f=await he(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Ib(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Qb(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(ne(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:i}=await this._challenge({factorId:n.factorId});return i?{data:null,error:i}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){var n;const{data:{user:s},error:i}=await this.getUser();if(i)return{data:null,error:i};const c={all:[],phone:[],totp:[],webauthn:[]};for(const d of(n=s==null?void 0:s.factors)!==null&&n!==void 0?n:[])c.all.push(d),d.status==="verified"&&c[d.factor_type].push(d);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var n,s;const{data:{session:i},error:c}=await this.getSession();if(c)return{data:null,error:c};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Wu(i.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((s=(n=i.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(m="aal2");const y=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async s=>{const{data:{session:i},error:c}=s;return c?{data:null,error:c}:i?await he(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:d=>({data:d,error:null})}):{data:null,error:new na}})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _approveAuthorization(n,s){try{return await this._useSession(async i=>{const{data:{session:c},error:d}=i;if(d)return{data:null,error:d};if(!c)return{data:null,error:new na};const f=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&pt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _denyAuthorization(n,s){try{return await this._useSession(async i=>{const{data:{session:c},error:d}=i;if(d)return{data:null,error:d};if(!c)return{data:null,error:new na};const f=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&pt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async fetchJwk(n,s={keys:[]}){let i=s.keys.find(m=>m.kid===n);if(i)return i;const c=Date.now();if(i=this.jwks.keys.find(m=>m.kid===n),i&&this.jwks_cached_at+sb>c)return i;const{data:d,error:f}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,i=d.keys.find(m=>m.kid===n),!i)?null:i}async getClaims(n,s={}){try{let i=n;if(!i){const{data:w,error:E}=await this.getSession();if(E||!w.session)return{data:null,error:E};i=w.session.access_token}const{header:c,payload:d,signature:f,raw:{header:m,payload:p}}=Wu(i);s!=null&&s.allowExpired||Nb(d.exp);const y=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!y){const{error:w}=await this.getUser(i);if(w)throw w;return{data:{claims:d,header:c,signature:f},error:null}}const b=Tb(c.alg),j=await crypto.subtle.importKey("jwk",y,b,!0,["verify"]);if(!await crypto.subtle.verify(b,j,f,gb(`${m}.${p}`)))throw new mc("Invalid JWT signature");return{data:{claims:d,header:c,signature:f},error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}}Ds.nextInstanceID=0;const ix=Ds;class lx extends ix{constructor(n){super(n)}}class ox{constructor(n,s,i){var c,d,f;this.supabaseUrl=n,this.supabaseKey=s;const m=eb(n);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,y={db:Kv,realtime:Iv,auth:Object.assign(Object.assign({},Xv),{storageKey:p}),global:Yv},b=Wv(i??{},y);this.storageKey=(c=b.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(d=b.global.headers)!==null&&d!==void 0?d:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(j,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=b.auth)!==null&&f!==void 0?f:{},this.headers,b.global.fetch),this.fetch=Zv(s,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new tv(new URL("rest/v1",m).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new Vv(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new Kp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,s,i)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n,s;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:i,storage:c,userStorage:d,storageKey:f,flowType:m,lock:p,debug:y},b,j){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lx({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),b),storageKey:f,autoRefreshToken:n,persistSession:s,detectSessionInUrl:i,storage:c,userStorage:d,flowType:m,lock:p,debug:y,fetch:j,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new vv(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,i)=>{this._handleTokenChanged(s,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(n,s,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ux=(l,n,s)=>new ox(l,n,s);function cx(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const n=l.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}cx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const dx="https://kxfsxqoyhoklqgwvzhpd.supabase.co",hx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt4ZnN4cW95aG9rbHFnd3Z6aHBkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4ODcxNjcsImV4cCI6MjA3NzQ2MzE2N30.mW3MNPAlWXFvAgu1RL4BW_1OWVjCzJat5OddK4GgW64",Re=ux(dx,hx),It=Re.auth,fx=async l=>{const{data:{user:n}}=await It.getUser();if(!n)throw new Error("User not authenticated for adding student.");const{visitors:s,...i}=l,c={...i,user_id:n.id},{data:d,error:f}=await Re.from("students").insert([c]).select().single();if(f)throw f;return d},yc=async(l,n)=>{const{error:s}=await Re.from("students").update(n).eq("id",l);if(s)throw s},gx=async l=>{const{error:n}=await Re.from("students").delete().eq("id",l);if(n)throw n},mx=async l=>{const{error:n}=await Re.from("students").delete().in("id",l);if(n)throw n},yx=async l=>{const{data:{user:n}}=await It.getUser();if(!n)throw new Error("User not authenticated for adding batch.");const s={...l,user_id:n.id},{error:i}=await Re.from("batches").insert([s]);if(i)throw i},dl=async(l,n)=>{const{error:s}=await Re.from("batches").update(n).eq("id",l);if(s)throw s},px=async l=>{if(l.studentIds&&l.studentIds.length>0){await pc(l.studentIds);const{error:s}=await Re.from("students").delete().in("id",l.studentIds);if(s)throw s}const{error:n}=await Re.from("batches").delete().eq("id",l.id);if(n)throw n},fg=async l=>{const{data:{user:n}}=await It.getUser();if(!n)throw new Error("User not authenticated for adding transaction.");const s={...l,user_id:n.id},{error:i}=await Re.from("transactions").insert([s]);if(i)throw i},vx=async l=>{if(l.length===0)return;const{data:{user:n}}=await It.getUser();if(!n)throw new Error("User not authenticated for adding transactions.");const s=l.map(c=>({...c,user_id:n.id})),{error:i}=await Re.from("transactions").insert(s);if(i)throw i},bx=async()=>{const{data:{user:l}}=await It.getUser();if(!l)throw new Error("User not authenticated for deleting transactions.");const{error:n}=await Re.from("transactions").delete().eq("user_id",l.id);if(n)throw n},xx=async l=>{const{error:n}=await Re.rpc("delete_transaction_and_update_student",{t_id:l});if(n)throw console.error("RPC delete_transaction_and_update_student failed:",n),new Error(n.message)},wx=async l=>{const{error:n}=await Re.from("transactions").delete().eq("studentId",l);if(n)throw n},_x=async l=>{if(l.length===0)return;const{error:n}=await Re.from("transactions").delete().in("studentId",l);if(n)throw n},Sx=async l=>{if(l.length===0)return[];const{data:{user:n}}=await It.getUser();if(!n)throw new Error("User not authenticated for adding students.");const s=l.map(d=>({...d,user_id:n.id})),{data:i,error:c}=await Re.from("students").insert(s).select();if(c)throw c;return i||[]},jx=async l=>{if(l.length===0)return;const{data:{user:n}}=await It.getUser();if(!n)throw new Error("User not authenticated for adding batches.");const s=l.map(c=>({...c,user_id:n.id})),{error:i}=await Re.from("batches").insert(s);if(i)throw i},Ex=async l=>{const{data:n,error:s}=await Re.from("guardians").select("*").eq("user_id",l);if(s)throw s;return n},cm=async l=>{if(l.length===0)return[];const{data:{user:n}}=await It.getUser();if(!n)throw new Error("User not authenticated.");const s=l.map(d=>({...d,user_id:n.id})),{data:i,error:c}=await Re.from("guardians").insert(s).select();if(c)throw c;return i},kx=async l=>{if(l.length===0)return[];const{error:n}=await Re.from("guardians").upsert(l);if(n)throw n},Nx=async l=>{if(l.length===0)return[];const{error:n}=await Re.from("guardians").delete().in("id",l);if(n)throw n},pc=async l=>{if(l.length===0)return;const{error:n}=await Re.from("guardians").delete().in("student_id",l);if(n)throw n},Tx=()=>{const[l,n]=Y.useState(!0),[s,i]=Y.useState(""),[c,d]=Y.useState(""),[f,m]=Y.useState(""),[p,y]=Y.useState(!1),b=async j=>{j.preventDefault(),m(""),y(!0);try{let x;if(l?x=await It.signInWithPassword({email:s,password:c}):x=await It.signUp({email:s,password:c}),x.error)throw x.error}catch(x){m(x.message)}finally{y(!1)}};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:h.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md dark:bg-gray-800",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:"Vidya-Gram"}),h.jsx("h2",{className:"mt-2 text-xl font-semibold text-gray-800 dark:text-white",children:l?"Login to your account":"Create a new account"})]}),h.jsxs("form",{className:"mt-6 space-y-6",onSubmit:b,children:[h.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[h.jsx("div",{children:h.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Email address",value:s,onChange:j=>i(j.target.value)})}),h.jsx("div",{children:h.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Password",value:c,onChange:j=>d(j.target.value)})})]}),f&&h.jsx("p",{className:"text-sm text-red-500",children:f}),h.jsx("div",{children:h.jsx("button",{type:"submit",disabled:p,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:p?"Processing...":l?"Sign in":"Sign up"})})]}),h.jsxs("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400",children:[l?"Don't have an account?":"Already have an account?",h.jsx("button",{onClick:()=>n(!l),className:"ml-1 font-medium text-indigo-600 hover:text-indigo-500",children:l?"Sign up":"Sign in"})]})]})})};var ut=(l=>(l.Dashboard="DASHBOARD",l.Students="STUDENTS",l.Batches="BATCHES",l.Wardens="WARDENS",l.Payments="PAYMENTS",l))(ut||{});const Es=({icon:l,text:n,active:s,onClick:i})=>h.jsxs("button",{onClick:i,className:`flex items-center w-full px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ${s?"bg-indigo-600 text-white":"text-gray-500 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:[l,h.jsx("span",{className:"ml-3",children:n})]}),Ox=({currentView:l,setView:n,isOpen:s,setIsOpen:i})=>{const c=d=>{n(d),s&&i(!1)};return h.jsxs("div",{className:`fixed inset-y-0 left-0 z-30 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform ${s?"translate-x-0":"-translate-x-full"} md:relative md:translate-x-0 transition-transform duration-300 ease-in-out flex flex-col`,children:[h.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-gray-200 dark:border-gray-700 px-4",children:[h.jsx("svg",{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),h.jsx("h1",{className:"ml-2 text-xl font-bold text-indigo-600 dark:text-indigo-400",children:"Vidya-Gram"})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:h.jsxs("nav",{className:"flex flex-col space-y-2",children:[h.jsx(Es,{href:"#",text:"Dashboard",active:l===ut.Dashboard,onClick:()=>c(ut.Dashboard),icon:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),h.jsx(Es,{href:"#",text:"Students",active:l===ut.Students,onClick:()=>c(ut.Students),icon:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A5.975 5.975 0 0112 13a5.975 5.975 0 013 5.197M15 21a6 6 0 00-9-5.197"})})}),h.jsx(Es,{href:"#",text:"Batches",active:l===ut.Batches,onClick:()=>c(ut.Batches),icon:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),h.jsx(Es,{href:"#",text:"Wardens",active:l===ut.Wardens,onClick:()=>c(ut.Wardens),icon:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 20.944L12 22l9-1.056v-5.556c0-1.076-.232-2.11-.658-3.084z"})})}),h.jsx(Es,{href:"#",text:"Payments",active:l===ut.Payments,onClick:()=>c(ut.Payments),icon:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 8h6m-5 4h.01M4 16V6a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2z"})})})]})})]})},Ax=({user:l,onAddStudent:n,onBulkUpload:s,theme:i,toggleTheme:c,onToggleSidebar:d})=>{const[f,m]=Y.useState(!1),p=()=>{It.signOut()},y=()=>h.jsxs("button",{onClick:c,className:"p-2 rounded-full text-gray-500 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 dark:focus:ring-offset-gray-800 focus:ring-indigo-500",children:[h.jsx("span",{className:"sr-only",children:"Toggle theme"}),i==="dark"?h.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):h.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})]});return h.jsxs("header",{className:"flex items-center justify-between h-16 px-4 sm:px-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[h.jsx("button",{onClick:d,className:"md:hidden p-2 -ml-2 rounded-md text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700","aria-label":"Open sidebar",children:h.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),h.jsx("div",{className:"hidden md:block flex-1"}),h.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[h.jsx(y,{}),h.jsxs("button",{onClick:s,className:"hidden sm:inline-flex items-center px-3 py-2 text-sm font-medium text-center text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 dark:focus:ring-gray-600",children:[h.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Bulk Upload"]}),h.jsxs("button",{onClick:n,className:"inline-flex items-center justify-center h-10 w-10 md:w-auto md:px-3 md:py-2 text-sm font-medium text-center text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 focus:ring-4 focus:outline-none focus:ring-indigo-300 dark:bg-indigo-500 dark:hover:bg-indigo-600 dark:focus:ring-indigo-800",children:[h.jsx("svg",{className:"w-4 h-4 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),h.jsx("span",{className:"hidden md:inline",children:"Add Student"})]}),h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>m(!f),className:"flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 dark:focus:ring-offset-gray-800 focus:ring-indigo-500",children:[h.jsx("span",{className:"sr-only",children:"Open user menu"}),h.jsx("img",{className:"h-8 w-8 rounded-full",src:`https://ui-avatars.com/api/?name=${l.email}&background=random`,alt:"User avatar"})]}),f&&h.jsxs("div",{className:"absolute right-0 w-48 mt-2 origin-top-right bg-white rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5 dark:bg-gray-700",children:[h.jsxs("div",{className:"px-4 py-3",children:[h.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:"Signed in as"}),h.jsx("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-gray-300",children:l.email})]}),h.jsx("div",{className:"border-t border-gray-100 dark:border-gray-600"}),h.jsx("button",{onClick:p,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600",children:"Sign out"})]})]})]})]})},Ms=({isOpen:l,onClose:n,onConfirm:s,title:i,message:c,confirmButtonText:d="Confirm",confirmButtonVariant:f="danger",children:m})=>{if(!l)return null;const p={danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500",primary:"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500"};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:h.jsxs("div",{className:"p-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:i}),h.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:c}),m,h.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[h.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500",children:"Cancel"}),h.jsx("button",{onClick:s,className:`px-4 py-2 text-sm font-medium text-white border border-transparent rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${p[f]}`,children:d})]})]})})})},hl=l=>(l.payments||[]).reduce((n,s)=>n+s.amount,0),ac=l=>l["Full Paid"]?0:l["Total Fees"]-hl(l),Cx=l=>{let n=l.replace(/\D/g,"");return n.length===10&&(n=`91${n}`),`https://wa.me/${n}`},Rx=()=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})}),Ux=()=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 4.315 1.731 6.086l.06.094-1.105 4.023 4.13-1.082.096.056z"})}),ks=({label:l,sortKey:n,sortConfig:s,requestSort:i,className:c})=>{const f=(s==null?void 0:s.key)===n?s.direction==="asc"?"":"":"";return h.jsx("th",{scope:"col",className:`px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer ${c}`,onClick:()=>i(n),children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{children:l}),h.jsx("span",{className:"ml-1 w-4",children:f})]})})},Dx=({students:l,onClose:n})=>{const s=["Roll No","Name","Father","Mother","Phone","Emergency Number","Phone 2","Gender","Batch","Address","Total Fees","Paid","Dues","Full Paid","Mode","Remarks","imageUrl"],[i,c]=Y.useState(new Set(s)),d=m=>{c(p=>{const y=new Set(p);return y.has(m)?y.delete(m):y.add(m),y})},f=()=>{const m=l.map(b=>{const j=(b.payments||[]).reduce((E,T)=>E+T.amount,0),x=b["Full Paid"]?0:b["Total Fees"]-j,w={};return i.forEach(E=>{E==="Paid"?w[E]=j:E==="Dues"?w[E]=x:w[E]=b[E]}),w}),p=XLSX.utils.json_to_sheet(m),y=XLSX.utils.book_new();XLSX.utils.book_append_sheet(y,p,"Students"),XLSX.writeFile(y,"student_data.xlsx"),n()};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg",children:h.jsxs("div",{className:"p-6",children:[h.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Export Student Data"}),h.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Select the columns you want to include in the export."}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 my-4 max-h-64 overflow-y-auto p-2 border rounded-md dark:border-gray-700",children:s.map(m=>h.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[h.jsx("input",{type:"checkbox",checked:i.has(m),onChange:()=>d(m),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),h.jsx("span",{children:m})]},m))}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t dark:border-gray-700",children:[h.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500",children:"Cancel"}),h.jsx("button",{onClick:f,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700",children:"Export as XLSX"})]})]})})})},Mx=({students:l,onEditStudent:n,onDeleteStudent:s,onDeleteSelected:i,onCreateBatch:c,onRecordPayment:d,onViewStudent:f,onManageVisitors:m})=>{const[p,y]=Y.useState(""),[b,j]=Y.useState(new Set),[x,w]=Y.useState(!1),[E,T]=Y.useState(!1),[M,R]=Y.useState(""),[z,L]=Y.useState(1),[X,P]=Y.useState(10),[V,Q]=Y.useState({key:"Name",direction:"asc"});Y.useEffect(()=>{L(1)},[l.length,p,X,V]);const ie=O=>{let J="asc";V&&V.key===O&&V.direction==="asc"&&(J="desc"),Q({key:O,direction:J})},fe=Y.useMemo(()=>{let O=[...l];const J=p.toLowerCase();return J&&(O=O.filter(F=>F.Name.toLowerCase().includes(J)||(F.Father||"").toLowerCase().includes(J)||String(F["Roll No"]).toLowerCase().includes(J)||F.Phone.toLowerCase().includes(J)||F.Batch.toLowerCase().includes(J))),V&&O.sort((F,le)=>{let _=0;switch(V.key){case"Paid":_=hl(F)-hl(le);break;case"Dues":_=ac(F)-ac(le);break;case"Name":_=F.Name.localeCompare(le.Name);break;case"Batch":_=F.Batch.localeCompare(le.Batch,void 0,{numeric:!0,sensitivity:"base"});break;case"Roll No":_=String(F["Roll No"]).localeCompare(String(le["Roll No"]),void 0,{numeric:!0,sensitivity:"base"});break;case"createdAt":_=new Date(F.createdAt).getTime()-new Date(le.createdAt).getTime();break;default:F[V.key]<le[V.key]&&(_=-1),F[V.key]>le[V.key]&&(_=1)}return V.direction==="asc"?_:-_}),O},[l,p,V]),at=Y.useMemo(()=>{if(X===0)return fe;const O=(z-1)*X;return fe.slice(O,O+X)},[fe,z,X]),Ve=O=>{j(J=>{const F=new Set(J);return F.has(O)?F.delete(O):F.add(O),F})},K=O=>{O.target.checked?j(new Set(fe.map(J=>J.id))):j(new Set)},ue=()=>{i(Array.from(b)),j(new Set),w(!1)},xe=()=>{M.trim()&&b.size>0?(c(M.trim().toUpperCase(),Array.from(b)),R(""),j(new Set)):alert("Please enter a batch name and select at least one student.")},ce=O=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(O),D=X===0?1:Math.ceil(fe.length/X);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-lg",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[h.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Student List"}),h.jsx("input",{type:"text",placeholder:"Search by name, father, roll no...",value:p,onChange:O=>y(O.target.value),className:"w-full sm:w-64 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700"})]}),b.size>0&&h.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 p-4 rounded-md mb-4 flex flex-col sm:flex-row items-center gap-4 flex-wrap",children:[h.jsxs("span",{className:"text-sm font-medium",children:[b.size," student(s) selected"]}),h.jsxs("div",{className:"flex-grow flex flex-col sm:flex-row items-center gap-2",children:[h.jsx("input",{type:"text",placeholder:"NEW BATCH NAME",value:M,onChange:O=>R(O.target.value.toUpperCase()),className:"px-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md text-sm w-full sm:w-auto dark:bg-gray-700"}),h.jsx("button",{onClick:xe,className:"w-full sm:w-auto px-3 py-1.5 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Create Batch"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>w(!0),className:"px-3 py-1.5 text-sm font-medium text-red-600 bg-red-100 dark:bg-red-900/50 dark:text-red-400 rounded-md hover:bg-red-200",children:"Delete"}),h.jsx("button",{onClick:()=>T(!0),className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-200 dark:bg-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-300",children:"Export"})]})]}),h.jsxs("div",{className:"overflow-x-auto",children:[h.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 relative",children:[h.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",className:"p-4",children:h.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500",onChange:K,checked:b.size>0&&b.size===fe.length&&fe.length>0})}),h.jsx(ks,{label:"Name",sortKey:"Name",sortConfig:V,requestSort:ie}),h.jsx(ks,{label:"Roll No",sortKey:"Roll No",sortConfig:V,requestSort:ie,className:"hidden sm:table-cell"}),h.jsx(ks,{label:"Batch",sortKey:"Batch",sortConfig:V,requestSort:ie,className:"hidden md:table-cell"}),h.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden sm:table-cell",children:"Phone"}),h.jsx(ks,{label:"Paid",sortKey:"Paid",sortConfig:V,requestSort:ie}),h.jsx(ks,{label:"Dues",sortKey:"Dues",sortConfig:V,requestSort:ie}),h.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:at.map(O=>{const J=hl(O),F=ac(O),le=O["Full Paid"]||F<=0;return h.jsxs("tr",{onClick:()=>f(O),className:`cursor-pointer ${b.has(O.id)?"bg-indigo-50 dark:bg-indigo-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[h.jsx("td",{className:"p-4",onClick:_=>_.stopPropagation(),children:h.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500",checked:b.has(O.id),onChange:()=>Ve(O.id)})}),h.jsx("td",{className:"px-4 py-4",children:h.jsxs("div",{className:"flex items-center max-w-[200px] sm:max-w-[300px]",children:[h.jsx("img",{className:"h-10 w-10 rounded-full object-cover flex-shrink-0",src:O.imageUrl||`https://ui-avatars.com/api/?name=${O.Name}&background=random`,alt:O.Name}),h.jsxs("div",{className:"ml-4 min-w-0 flex-1",children:[h.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white break-words leading-tight",children:O.Name}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 break-words leading-tight mt-0.5",children:O.Father||"N/A"})]})]})}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden sm:table-cell",children:O["Roll No"]}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden md:table-cell",children:h.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs",children:O.Batch})}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 hidden sm:table-cell",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{children:O.Phone}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("a",{href:`tel:${O.Phone}`,onClick:_=>_.stopPropagation(),className:"p-1.5 rounded-full text-green-600 bg-green-100 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900",title:"Call",children:h.jsx(Rx,{})}),h.jsx("a",{href:Cx(O.Phone),target:"_blank",rel:"noopener noreferrer",onClick:_=>_.stopPropagation(),className:"p-1.5 rounded-full text-green-600 bg-green-100 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900",title:"WhatsApp",children:h.jsx(Ux,{})})]})]})}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:ce(J)}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("div",{className:`font-semibold ${le?"text-green-600":"text-red-600"}`,children:le?"FULL PAID":ce(F)}),!le&&h.jsx("button",{onClick:_=>{_.stopPropagation(),d(O)},className:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900",children:"Pay"})]})}),h.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:_=>_.stopPropagation(),children:h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[h.jsx("button",{onClick:_=>{_.stopPropagation(),m(O)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-200 mr-2 p-1 hover:bg-indigo-50 dark:hover:bg-indigo-900/50 rounded-full transition-colors",title:"Manage Visitors",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),h.jsx("button",{onClick:_=>{_.stopPropagation(),n(O)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-200 p-1 hover:bg-indigo-50 dark:hover:bg-indigo-900/50 rounded transition-colors",children:"Edit"}),h.jsx("button",{onClick:_=>{_.stopPropagation(),s(O)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-200 p-1 hover:bg-red-50 dark:hover:bg-red-900/50 rounded transition-colors",children:"Delete"})]})})]},O.id)})})]}),fe.length===0&&h.jsx("p",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No students found."})]}),h.jsxs("div",{className:"flex items-center justify-between pt-4",children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx("label",{htmlFor:"rowsPerPage",className:"text-gray-600 dark:text-gray-400",children:"Rows:"}),h.jsxs("select",{id:"rowsPerPage",value:X,onChange:O=>P(Number(O.target.value)),className:"bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md p-1.5 focus:ring-indigo-500",children:[h.jsx("option",{value:10,children:"10"}),h.jsx("option",{value:20,children:"20"}),h.jsx("option",{value:50,children:"50"}),h.jsx("option",{value:0,children:"All"})]})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[h.jsxs("span",{children:["Page ",z," of ",D]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:()=>L(O=>Math.max(1,O-1)),disabled:z===1,className:"p-1 rounded-md disabled:opacity-50 hover:bg-gray-100 dark:hover:bg-gray-700",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),h.jsx("button",{onClick:()=>L(O=>Math.min(D,O+1)),disabled:z===D,className:"p-1 rounded-md disabled:opacity-50 hover:bg-gray-100 dark:hover:bg-gray-700",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]})]})]})]}),x&&h.jsx(Ms,{isOpen:x,onClose:()=>w(!1),onConfirm:ue,title:"Delete Selected Students",message:`Are you sure you want to delete ${b.size} selected students? This action cannot be undone.`,confirmButtonText:"Confirm",confirmButtonVariant:"danger"}),E&&b.size>0&&h.jsx(Dx,{students:l.filter(O=>b.has(O.id)),onClose:()=>T(!1)})]})},gg={"Roll No":"",Name:"",Father:"",Mother:"",Phone:"","Emergency Number":"","Phone 2":"",Gender:"Male",Batch:"",Address:"","Total Fees":0,Remarks:"","Full Paid":!1,Mode:"One Time",imageUrl:"",imagePath:""},zx=({isOpen:l,onClose:n,onSubmit:s,batches:i,existingStudents:c})=>{const[d,f]=Y.useState(gg),[m,p]=Y.useState(null),[y,b]=Y.useState(null),[j,x]=Y.useState(""),[w,E]=Y.useState(!1),[T,M]=Y.useState("");Y.useEffect(()=>{l&&(f(gg),b(null),p(null),x(""),E(!1),M(""))},[l]);const R=X=>{const{name:P,value:V,type:Q}=X.target;if(Q==="checkbox"){f(ie=>({...ie,[P]:X.target.checked}));return}f(P==="Total Fees"?ie=>({...ie,[P]:Number(V)||0}):ie=>({...ie,[P]:V.toUpperCase()})),P==="Roll No"&&M("")},z=async X=>{var V;const P=(V=X.target.files)==null?void 0:V[0];if(P)try{const Q=await imageCompression(P,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0});p(Q),b(URL.createObjectURL(Q))}catch(Q){console.error("Image compression failed:",Q),p(P),b(URL.createObjectURL(P))}},L=async X=>{X.preventDefault(),M("");const P=d["Roll No"].toString().trim();if(c.some(Q=>Q["Roll No"].toString().trim().toUpperCase()===P)){M(`Roll Number "${d["Roll No"]}" already exists. Please use a unique Roll Number.`);return}E(!0),await s(d,m,Number(j)||0),E(!1)};return l?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-start sticky top-0 bg-white dark:bg-gray-800 z-10 pb-4 border-b dark:border-gray-700",children:[h.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add New Student"}),h.jsx("button",{onClick:n,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white",children:h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),h.jsxs("form",{onSubmit:L,className:"mt-4 space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[h.jsx("img",{src:y||`https://ui-avatars.com/api/?name=${d.Name||"S"}&background=random`,alt:"Profile Preview",className:"w-24 h-24 rounded-full object-cover shadow-md"}),h.jsxs("div",{children:[h.jsxs("label",{htmlFor:"photo-upload",className:"cursor-pointer px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 transition-colors",children:[h.jsx("span",{children:"Upload Photo"}),h.jsx("input",{id:"photo-upload",name:"photo-upload",type:"file",className:"sr-only",accept:"image/*",onChange:z})]}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"PNG or JPG. Max 1MB."})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx("input",{type:"text",name:"Name",value:d.Name,onChange:R,placeholder:"FULL NAME *",required:!0,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsxs("div",{children:[h.jsx("input",{type:"text",name:"Roll No",value:d["Roll No"],onChange:R,placeholder:"ROLL NO. *",required:!0,className:`w-full px-3 py-2 border rounded-md dark:bg-gray-700 focus:ring-indigo-500 focus:border-indigo-500 ${T?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`}),T&&h.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:T})]}),h.jsx("input",{type:"text",name:"Father",value:d.Father,onChange:R,placeholder:"FATHER'S NAME",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsx("input",{type:"text",name:"Mother",value:d.Mother,onChange:R,placeholder:"MOTHER'S NAME",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsx("input",{type:"tel",name:"Phone",value:d.Phone,onChange:R,placeholder:"PRIMARY PHONE *",required:!0,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsx("input",{type:"tel",name:"Phone 2",value:d["Phone 2"],onChange:R,placeholder:"PHONE 2 (OPTIONAL)",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsx("input",{type:"tel",name:"Emergency Number",value:d["Emergency Number"],onChange:R,placeholder:"EMERGENCY NUMBER (OPTIONAL)",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsxs("select",{name:"Gender",value:d.Gender,onChange:R,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500",children:[h.jsx("option",{children:"Male"}),h.jsx("option",{children:"Female"}),h.jsx("option",{children:"Other"})]}),h.jsxs("div",{children:[h.jsx("input",{list:"batch-options-add",type:"text",name:"Batch",value:d.Batch,onChange:R,placeholder:"BATCH (SELECT OR TYPE NEW) *",required:!0,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsx("datalist",{id:"batch-options-add",children:i.map(X=>h.jsx("option",{value:X.name},X.id))})]}),h.jsxs("select",{name:"Mode",value:d.Mode,onChange:R,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500",children:[h.jsx("option",{children:"One Time Payment"}),h.jsx("option",{children:"Monthly Payment"})]})]}),h.jsx("textarea",{name:"Address",value:d.Address,onChange:R,placeholder:"ADDRESS",rows:2,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-md border border-indigo-100 dark:border-indigo-800",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total Amount *"}),h.jsx("input",{type:"number",name:"Total Fees",value:d["Total Fees"]||"",onChange:R,placeholder:"Total Amount",required:!0,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Initial Payment"}),h.jsx("input",{type:"number",value:j,onChange:X=>x(X.target.value),placeholder:"Initial Payment",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),h.jsx("textarea",{name:"Remarks",value:d.Remarks,onChange:R,placeholder:"REMARKS (OPTIONAL)",rows:2,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),h.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/30 rounded-md",children:[h.jsx("input",{id:"full-paid",type:"checkbox",name:"Full Paid",checked:!!d["Full Paid"],onChange:R,className:"mt-1 h-4 w-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"full-paid",className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Mark as Full Paid"}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Overrides calculated status. Use for discounts or scholarships."})]})]}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t dark:border-gray-700 mt-6 sticky bottom-0 bg-white dark:bg-gray-800 pb-2",children:[h.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 transition-colors",children:w?"Saving...":"Add Student"})]})]})]})})}):null},Bx=({student:l,onClose:n,onSave:s,batches:i})=>{const[c,d]=Y.useState(l),[f,m]=Y.useState(null),[p,y]=Y.useState(l.imageUrl||null),[b,j]=Y.useState(!1),[x,w]=Y.useState(!1);Y.useEffect(()=>{const P=JSON.parse(JSON.stringify(l));d(P),y(l.imageUrl||null),m(null),j(!1);const V=i.some(Q=>Q.name.toLowerCase()===(l.Batch||"").toLowerCase());w(!!l.Batch&&!V)},[l,i]);const E=P=>{const{name:V,value:Q,type:ie}=P.target;if(ie==="checkbox"){d(fe=>({...fe,[V]:P.target.checked}));return}d(V==="Total Fees"?fe=>({...fe,[V]:Number(Q)||0}):fe=>({...fe,[V]:Q.toUpperCase()}))},T=P=>{P.target.value==="NEW_BATCH_OPTION"?(w(!0),d(Q=>({...Q,Batch:""}))):(w(!1),E(P))},M=async P=>{var Q;const V=(Q=P.target.files)==null?void 0:Q[0];if(V)try{const ie=await imageCompression(V,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0});m(ie),y(URL.createObjectURL(ie))}catch(ie){console.error("Error compressing image:",ie),m(V),y(URL.createObjectURL(V))}},R=async P=>{P.preventDefault(),j(!0),await s(c,f||void 0),j(!1)},z=Y.useMemo(()=>(c.payments||[]).reduce((P,V)=>P+V.amount,0),[c.payments]),L=Y.useMemo(()=>c["Full Paid"]?0:(c["Total Fees"]||0)-z,[c,z]),X=P=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(P);return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 sticky top-0 bg-white dark:bg-gray-800 z-10 pb-4",children:"Edit Student Profile"}),h.jsxs("form",{onSubmit:R,className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[h.jsxs("div",{className:"md:w-1/3 space-y-4",children:[h.jsxs("fieldset",{children:[h.jsx("legend",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:"Profile Photo"}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("img",{src:p||`https://ui-avatars.com/api/?name=${c.Name||"S"}&background=random`,alt:"Student",className:"h-32 w-32 rounded-full object-cover shadow-lg mb-4"}),h.jsxs("label",{htmlFor:"photo-upload",className:"cursor-pointer px-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:[h.jsx("span",{children:"Change Photo"}),h.jsx("input",{id:"photo-upload",name:"photo-upload",type:"file",className:"sr-only",accept:"image/*",onChange:M})]})]})]}),h.jsxs("div",{className:"text-center md:text-left",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Roll No"}),h.jsx("input",{type:"text",name:"Roll No",value:c["Roll No"],onChange:E,className:"mt-1 block w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none sm:text-sm dark:text-gray-300",readOnly:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),h.jsx("input",{type:"text",name:"Name",value:c.Name,onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]})]}),h.jsx("div",{className:"md:w-2/3",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Father's Name"}),h.jsx("input",{type:"text",name:"Father",value:c.Father||"",onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mother's Name"}),h.jsx("input",{type:"text",name:"Mother",value:c.Mother||"",onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Gender"}),h.jsxs("select",{name:"Gender",value:c.Gender,onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:text-white",children:[h.jsx("option",{children:"Male"}),h.jsx("option",{children:"Female"}),h.jsx("option",{children:"Other"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Batch"}),x?h.jsxs("div",{className:"mt-1 flex gap-2",children:[h.jsx("input",{type:"text",name:"Batch",value:c.Batch,onChange:E,placeholder:"ENTER NEW BATCH NAME",autoFocus:!0,className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"}),h.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-300 dark:hover:bg-gray-500",title:"Cancel creating new batch",children:""})]}):h.jsxs("select",{name:"Batch",value:c.Batch,onChange:T,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:text-white",children:[h.jsx("option",{value:"",children:"-- Select Batch --"}),i.map(P=>h.jsx("option",{value:P.name,children:P.name},P.id)),h.jsx("option",{disabled:!0,children:""}),h.jsx("option",{value:"NEW_BATCH_OPTION",className:"font-semibold text-indigo-600 dark:text-indigo-400",children:"+ Create New Batch"})]})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Primary Phone"}),h.jsx("input",{type:"tel",name:"Phone",value:c.Phone,onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone 2 (Optional)"}),h.jsx("input",{type:"tel",name:"Phone 2",value:c["Phone 2"]||"",onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Emergency Number"}),h.jsx("input",{type:"tel",name:"Emergency Number",value:c["Emergency Number"]||"",onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Address"}),h.jsx("input",{type:"text",name:"Address",value:c.Address||"",onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]})]})})]}),h.jsxs("fieldset",{children:[h.jsx("legend",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:"Payment Details"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Fees"}),h.jsx("input",{type:"number",name:"Total Fees",value:c["Total Fees"],onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white",placeholder:"e.g., 50000"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Payment Mode"}),h.jsxs("select",{name:"Mode",value:c.Mode||"",onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:text-white",children:[h.jsx("option",{value:"",children:"Not Specified"}),h.jsx("option",{children:"Monthly Payment"}),h.jsx("option",{children:"One Time Payment"})]})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Paid"}),h.jsx("div",{className:"mt-1 block w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm sm:text-sm dark:text-white",children:X(z)})]}),h.jsx("div",{className:"md:col-span-2",children:h.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-md text-center",children:[h.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Remaining Fees: "}),h.jsx("span",{className:`font-bold ${L>0?"text-red-600":"text-green-600"}`,children:X(L)})]})}),h.jsxs("div",{className:"flex items-center gap-2 mt-2 md:col-span-2",children:[h.jsx("input",{id:"full-paid",name:"Full Paid",type:"checkbox",checked:c["Full Paid"]??!1,onChange:E,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600"}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"full-paid",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mark as Full Paid"}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Overrides calculated status. Use for discounts or scholarships."})]})]})]}),h.jsxs("div",{className:"mt-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Student Remarks"}),h.jsx("textarea",{name:"Remarks",value:c.Remarks||"",onChange:E,rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white",placeholder:"ADD ANY GENERAL REMARKS FOR THE STUDENT HERE."})]})]}),h.jsxs("fieldset",{className:"mt-6",children:[h.jsx("legend",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:"Transaction History"}),h.jsx("div",{className:"max-h-48 overflow-y-auto border dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-900",children:(c.payments||[]).length>0?h.jsxs("table",{className:"min-w-full text-sm",children:[h.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 sticky top-0",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Date"}),h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Amount"}),h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Method"}),h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Remarks"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[...c.payments||[]].sort((P,V)=>new Date(V.date).getTime()-new Date(P.date).getTime()).map(P=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-700 dark:text-gray-300",children:P.date}),h.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-medium text-gray-900 dark:text-white",children:X(P.amount)}),h.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-700 dark:text-gray-300",children:P.method}),h.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:P.remarks||"-"})]},P.id))})]}):h.jsx("p",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No payment history found."})})]}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t dark:border-gray-700 sticky bottom-0 bg-white dark:bg-gray-800 pb-1",children:[h.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 transition-colors",children:b?"Saving...":"Save Changes"})]})]})]})})},Lx=({student:l,onClose:n,onSave:s})=>{const[i,c]=Y.useState([]),[d,f]=Y.useState({}),[m,p]=Y.useState({}),[y,b]=Y.useState(!1);Y.useEffect(()=>{if(!l)return;const R=l.visitors?JSON.parse(JSON.stringify(l.visitors)):[];c(R);const z={};R.forEach(L=>{L.image_url&&(z[L.id]=L.image_url)}),p(z),f({}),b(!1)},[l]);const j=(R,z)=>{const{name:L,value:X}=z.target;c(P=>P.map(V=>V.id===R?{...V,[L]:X.toUpperCase()}:V))},x=async(R,z)=>{var X;const L=(X=z.target.files)==null?void 0:X[0];if(L)try{const P=await imageCompression(L,{maxSizeMB:.5,maxWidthOrHeight:400,useWebWorker:!0});f(V=>({...V,[R]:P})),p(V=>({...V,[R]:URL.createObjectURL(P)}))}catch(P){console.error("Visitor image compression failed:",P),f(V=>({...V,[R]:L})),p(V=>({...V,[R]:URL.createObjectURL(L)}))}},w=()=>"temp_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),E=()=>{const R={id:w(),student_id:l.id,name:"",relation:"",phone:""};c(z=>[...z,R])},T=R=>{c(z=>z.filter(L=>L.id!==R)),f(z=>{const L={...z};return delete L[R],L}),p(z=>{const L={...z};return delete L[R],L})},M=async R=>{R.preventDefault(),b(!0),await s(l.id,i,d),b(!1)};return l?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex justify-center items-center p-4",children:h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:h.jsxs("form",{onSubmit:M,children:[h.jsx("div",{className:"p-6 sticky top-0 bg-white dark:bg-gray-800 z-10 border-b dark:border-gray-700",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Manage Visitors"}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["For: ",l.Name]})]}),h.jsx("button",{onClick:n,type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white",children:h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),h.jsxs("div",{className:"p-6 space-y-4",children:[i.map(R=>h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[auto,1fr] gap-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md border dark:border-gray-600",children:[h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx("img",{src:m[R.id]||`https://ui-avatars.com/api/?name=${R.name||"V"}&background=random`,alt:"Visitor Preview",className:"w-20 h-20 rounded-full object-cover"}),h.jsxs("label",{htmlFor:`visitor-photo-${R.id}`,className:"cursor-pointer text-xs text-indigo-600 dark:text-indigo-400 hover:underline",children:["Change Photo",h.jsx("input",{id:`visitor-photo-${R.id}`,type:"file",className:"sr-only",accept:"image/*",onChange:z=>x(R.id,z)})]})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[h.jsx("input",{type:"text",name:"name",value:R.name,onChange:z=>j(R.id,z),placeholder:"VISITOR NAME",required:!0,className:"w-full text-sm px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-600"}),h.jsx("input",{type:"text",name:"relation",value:R.relation,onChange:z=>j(R.id,z),placeholder:"RELATION",required:!0,className:"w-full text-sm px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-600"}),h.jsx("input",{type:"tel",name:"phone",value:R.phone,onChange:z=>j(R.id,z),placeholder:"VISITOR PHONE",required:!0,className:"w-full text-sm px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-600 sm:col-span-2"}),h.jsx("div",{className:"sm:col-span-2 flex justify-end",children:h.jsx("button",{type:"button",onClick:()=>T(R.id),className:"text-xs font-medium text-red-600 dark:text-red-400 hover:underline",children:"Remove Visitor"})})]})]},R.id)),h.jsx("button",{type:"button",onClick:E,className:"w-full text-sm py-2 border-2 border-dashed rounded-md text-gray-500 hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:"+ Add Visitor"})]}),h.jsxs("div",{className:"flex justify-end space-x-3 p-6 bg-gray-50 dark:bg-gray-800 border-t dark:border-gray-700 sticky bottom-0",children:[h.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:y,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:y?"Saving...":"Save Changes"})]})]})})}):null},qx=({isOpen:l,onClose:n,onUploadComplete:s,existingStudents:i,existingBatches:c})=>{const[d,f]=Y.useState(null),[m,p]=Y.useState(!1),[y,b]=Y.useState(""),[j,x]=Y.useState(null),[w,E]=Y.useState(null),T=()=>{f(null),p(!1),b(""),x(null),E(null)},M=()=>{T(),n()},R=P=>{P.target.files&&(f(P.target.files[0]),b(""),x(null),E(null))},z=()=>{const P=[{Name:"Aarav Sharma","Roll No":"101",Batch:"Physics-A",Phone:"9876543210","Total Fees":5e4,Father:"Rakesh Sharma",Mother:"Sunita Sharma",Gender:"Male",Address:"123, ABC Colony, New Delhi",Remarks:"Joined in April session","Full Paid":!1,Mode:"Monthly","Initial Payment Amount":1e4,"Initial Payment Date":"2024-05-20","Initial Payment Method":"UPI","Initial Payment Remarks":"Admission Fee","Visitor Name":"Rohan Sharma","Visitor Relation":"Uncle","Visitor Phone":"9876543211"}],V=XLSX.utils.json_to_sheet(P),Q=XLSX.utils.book_new();XLSX.utils.book_append_sheet(Q,V,"Students"),XLSX.writeFile(Q,"student_upload_template.xlsx")},L=()=>{if(!w)return;const P=XLSX.utils.json_to_sheet(w),V=XLSX.utils.book_new();XLSX.utils.book_append_sheet(V,P,"Skipped Records"),XLSX.writeFile(V,"skipped_student_records.xlsx")},X=async()=>{if(!d){b("Please select a file.");return}p(!0),b(""),x(null),E(null);const P=new FileReader;P.onload=async V=>{var Q;try{const ie=new Uint8Array((Q=V.target)==null?void 0:Q.result),fe=XLSX.read(ie,{type:"array"}),at=fe.SheetNames[0],Ve=fe.Sheets[at],K=XLSX.utils.sheet_to_json(Ve);if(K.length===0){b("The file is empty or doesn't contain valid data."),p(!1);return}const ue=new Set(i.map(I=>String(I["Roll No"]))),xe=[],ce=[],D={};for(const I of K){const ve=I["Roll No"]?String(I["Roll No"]).trim():"",be=I.Name?String(I.Name).trim():"";if(!ve||!be){ce.push({...I,"Reason for Skipping":"Missing required fields: Name or Roll No"});continue}if(ue.has(ve))ce.push({...I,"Reason for Skipping":"Roll No already exists"});else{const nt=I.Batch?String(I.Batch).trim():"Unassigned",ft=[],Qt=I["Visitor Name"]?String(I["Visitor Name"]).trim():"",Jt=I["Visitor Relation"]?String(I["Visitor Relation"]).trim():"",vt=I["Visitor Phone"]?String(I["Visitor Phone"]).trim():"";Qt&&Jt&&vt&&ft.push({name:Qt,relation:Jt,phone:vt}),ft.length>0&&(D[ve]=ft);const Nt=[],la=Number(I["Initial Payment Amount"]??0);if(la>0){let Zt=new Date().toISOString().slice(0,10);if(I["Initial Payment Date"]){let Bt=I["Initial Payment Date"];if(typeof Bt=="number"){const oa=new Date(1899,11,30);Zt=new Date(oa.getTime()+Bt*24*60*60*1e3).toISOString().slice(0,10)}else if(typeof Bt=="string"){const oa=new Date(Bt);isNaN(oa.getTime())||(Zt=oa.toISOString().slice(0,10))}}const Ft={id:crypto.randomUUID(),amount:la,method:I["Initial Payment Method"]||"Other",date:Zt,remarks:I["Initial Payment Remarks"]||"Initial payment from bulk upload"};Nt.push(Ft)}const Un={Name:be,"Roll No":ve,Batch:nt,Father:String(I.Father??""),Mother:String(I.Mother??""),Phone:String(I.Phone??""),"Total Fees":Number(I["Total Fees"]??0),Gender:I.Gender==="Female"?"Female":I.Gender==="Other"?"Other":"Male",Address:I.Address??"",Remarks:I.Remarks??"","Full Paid":I["Full Paid"]!=null?!!I["Full Paid"]:!1,Mode:I.Mode==="Monthly"?"Monthly":"One Time",payments:Nt,imageUrl:"",imagePath:""};xe.push(Un),ue.add(ve)}}const O=xe.length>0?await Sx(xe):[],J=Array.isArray(O)?O:[],F=[];J.forEach(I=>{const ve=String(I["Roll No"]),be=D[ve];be&&be.forEach(nt=>{F.push({...nt,student_id:I.id})})}),F.length>0&&await cm(F);const le=[];J.forEach(I=>{I.payments&&I.payments.length>0&&I.payments.forEach(ve=>{le.push({...ve,studentId:I.id,studentName:I.Name,studentRollNo:I["Roll No"]})})}),le.length>0&&await vx(le);const _=J.reduce((I,ve)=>(ve&&ve.id&&ve.Batch&&(I[ve.Batch]=[...I[ve.Batch]||[],ve.id]),I),{}),$=Object.keys(_),Z=new Map(c.map(I=>[I.name,I])),W=[],de=[];let ge=0;$.forEach(I=>{const ve=_[I];if(Z.has(I)){const be=Z.get(I),nt=[...new Set([...be.studentIds,...ve])];de.push(dl(be.id,{studentIds:nt}))}else W.push({name:I,studentIds:ve,wardens:[]}),ge++,Z.set(I,{id:"temp",name:I,studentIds:ve,wardens:[]})}),W.length>0&&await jx(W),de.length>0&&await Promise.all(de),x({processed:K.length,created:J.length,skipped:ce.length,newBatches:ge}),ce.length>0&&E(ce),(J.length>0||ge>0||de.length>0||le.length>0||F.length>0)&&s()}catch(ie){console.error(ie),b(`Upload failed: ${ie.message}. Please check file format and data.`)}finally{p(!1)}},P.readAsArrayBuffer(d)};return l?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bulk Student Upload"}),h.jsx("button",{onClick:M,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white",children:h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),h.jsxs("div",{className:"mt-4 space-y-4",children:[h.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[h.jsxs("p",{children:["Upload an Excel file. New students will be created. ",h.jsx("strong",{children:"Existing students (matched by 'Roll No') will be ignored."})]}),h.jsx("button",{onClick:z,className:"text-indigo-600 dark:text-indigo-400 hover:underline font-medium mt-1 text-sm",children:"Download Template"})]}),h.jsx("div",{className:"mt-2 text-sm p-3 bg-indigo-50 dark:bg-indigo-900/20 border-l-4 border-indigo-400 dark:border-indigo-500 text-indigo-800 dark:text-indigo-200",children:h.jsxs("p",{children:[h.jsx("span",{className:"font-semibold",children:"Note on Payments & Visitors:"})," The visitor and initial payment columns are optional. However, if you add a visitor, the 'Visitor Name', 'Visitor Relation', and 'Visitor Phone' fields must ",h.jsx("span",{className:"font-semibold",children:"all"})," be filled in for that row."]})}),h.jsx("input",{type:"file",onChange:R,accept:".xlsx, .xls, .csv",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900/50 dark:file:text-indigo-300 dark:hover:file:bg-indigo-900"}),y&&h.jsx("p",{className:"text-sm text-red-500",children:y}),j&&h.jsxs("div",{className:`mt-4 p-4 rounded-md ${j.created>0?"bg-green-50 dark:bg-green-900/50 text-green-700 dark:text-green-300":"bg-yellow-50 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300"}`,children:[h.jsx("h4",{className:"font-bold",children:"Upload Complete!"}),h.jsxs("ul",{className:"list-disc list-inside text-sm mt-1",children:[h.jsxs("li",{children:["Processed: ",j.processed," rows"]}),h.jsxs("li",{children:["Students Created: ",j.created]}),h.jsxs("li",{children:["Batches Created: ",j.newBatches]}),h.jsxs("li",{children:["Records Skipped: ",j.skipped," (already exist or invalid data)"]})]}),w&&w.length>0&&h.jsx("button",{onClick:L,className:"mt-3 px-3 py-1 text-sm font-medium bg-white dark:bg-gray-600 text-indigo-700 dark:text-indigo-200 border border-indigo-300 dark:border-indigo-500 rounded-md hover:bg-gray-50 dark:hover:bg-gray-500",children:"Download Skipped Records"})]})]}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t dark:border-gray-700 mt-4",children:[h.jsx("button",{type:"button",onClick:M,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500",children:"Cancel"}),h.jsx("button",{onClick:X,disabled:m||!d,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Processing...":"Upload File"})]})]})})}):null},Hx=({student:l,onClose:n,onSave:s})=>{const[i,c]=Y.useState(""),[d,f]=Y.useState("Online"),[m,p]=Y.useState(new Date().toISOString().slice(0,10)),[y,b]=Y.useState(""),[j,x]=Y.useState(!1),w=Y.useMemo(()=>(l.payments||[]).reduce((z,L)=>z+L.amount,0),[l.payments]),E=Y.useMemo(()=>l["Total Fees"]-w,[l,w]),T=z=>{const L=z.target.value;/^\d*\.?\d*$/.test(L)&&c(L)},M=async z=>{z.preventDefault();const L=parseFloat(i);if(!L||L<=0){alert("Please enter a valid positive amount.");return}if(!m||new Date(m).toString()==="Invalid Date"){alert("Please select a valid date.");return}x(!0);const X={id:crypto.randomUUID(),amount:L,method:d,date:m,remarks:y};await s(l,X)},R=z=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(z);return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-2xl w-full max-w-md",children:[h.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"Record Payment"}),h.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:["For: ",h.jsx("span",{className:"font-semibold",children:l.Name})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 bg-gray-50 dark:bg-gray-700 p-4 rounded-md",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Fees"}),h.jsx("p",{className:"font-semibold dark:text-white",children:R(l["Total Fees"])})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Fees Remaining"}),h.jsx("p",{className:`font-semibold ${E>0?"text-red-600":"text-green-600"}`,children:R(E)})]})]}),h.jsxs("form",{onSubmit:M,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount"}),h.jsx("input",{type:"text",value:i,onChange:T,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600",placeholder:"Enter amount being paid",required:!0,pattern:"^\\d*\\.?\\d*$"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Payment Method"}),h.jsxs("select",{value:d,onChange:z=>f(z.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600",children:[h.jsx("option",{children:"Online"}),h.jsx("option",{children:"Cash"}),h.jsx("option",{children:"Card"}),h.jsx("option",{children:"UPI"}),h.jsx("option",{children:"Other"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Payment Date"}),h.jsx("input",{type:"date",value:m,onChange:z=>p(z.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Remarks (Optional)"}),h.jsx("textarea",{value:y,onChange:z=>b(z.target.value),rows:2,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600",placeholder:"e.g., Transaction ID, partial payment"})]}),h.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:j?"Saving...":"Save Payment"})]})]})]})})},ul=({title:l,value:n})=>h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:l}),h.jsx("p",{className:"mt-1 text-3xl font-semibold text-gray-900 dark:text-white",children:n})]}),$x=({transactions:l})=>{const n=Y.useRef(null),s=Y.useRef(null),i=Y.useMemo(()=>{const c={},d=[],f=new Date;for(let m=5;m>=0;m--){const y=new Date(f.getFullYear(),f.getMonth()-m,1).toLocaleString("default",{month:"short",year:"2-digit"});d.push(y),c[y]=0}return l.forEach(m=>{const y=new Date(m.date).toLocaleString("default",{month:"short",year:"2-digit"});c.hasOwnProperty(y)&&(c[y]+=m.amount)}),{labels:d,datasets:[{label:"Fees Collected",data:d.map(m=>c[m]),backgroundColor:"rgba(79, 70, 229, 0.7)",borderColor:"rgba(79, 70, 229, 1)",borderWidth:1,borderRadius:4}]}},[l]);return Y.useEffect(()=>{if(!n.current)return;s.current&&s.current.destroy();const c=n.current.getContext("2d");if(c)return s.current=new Chart(c,{type:"bar",data:i,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback:function(d){return d>=1e3?""+d/1e3+"k":""+d}}},x:{grid:{display:!1}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(d){let f=d.dataset.label||"";return f&&(f+=": "),d.parsed.y!==null&&(f+=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(d.parsed.y)),f}}}}}}),()=>{s.current&&s.current.destroy()}},[i]),h.jsx("canvas",{ref:n})},vc=l=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(l),Vx=({students:l})=>h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-white mb-4",children:"Recent Students"}),h.jsxs("div",{className:"space-y-4",children:[l.slice(0,5).map(n=>h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:n.imageUrl||`https://ui-avatars.com/api/?name=${n.Name}&background=random`,alt:n.Name}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.Name}),h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Roll No: ",n["Roll No"]]})]})]},n.id)),l.length===0&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No students have been added yet."})]})]}),Gx=({transactions:l})=>h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-white mb-4",children:"Recent Transactions"}),h.jsxs("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[l.slice(0,5).map(n=>h.jsxs("li",{className:"py-3 flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.studentName}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:n.date})]}),h.jsx("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:vc(n.amount)})]},n.id)),l.length===0&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 pt-2",children:"No transactions recorded yet."})]})]}),Px=({students:l,batches:n,transactions:s})=>{const i=Y.useMemo(()=>{const c=l.length,d=n.length,f=s.reduce((y,b)=>y+b.amount,0),m=l.reduce((y,b)=>{if(b["Full Paid"])return y;const j=(b.payments||[]).reduce((w,E)=>w+E.amount,0),x=b["Total Fees"]-j;return y+(x>0?x:0)},0),p=l.filter(y=>y["Full Paid"]?!0:(y.payments||[]).reduce((j,x)=>j+x.amount,0)>=y["Total Fees"]).length;return{totalStudents:c,totalBatches:d,feesCollected:f,feesRemaining:m,fullPaidCount:p}},[l,n,s]);return h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-semibold text-gray-700 dark:text-gray-200 mb-6",children:"Overview"}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(ul,{title:"Total Students",value:i.totalStudents}),h.jsx(ul,{title:"Total Batches",value:i.totalBatches}),h.jsx(ul,{title:"Total Fees Collected",value:vc(i.feesCollected)}),h.jsx(ul,{title:"Total Fees Remaining",value:vc(i.feesRemaining)})]}),h.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"lg:col-span-2 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[h.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-white mb-4",children:"Monthly Fee Collection"}),h.jsx("div",{className:"h-80",children:h.jsx($x,{transactions:s})})]}),h.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[h.jsx(Vx,{students:l}),h.jsx(Gx,{transactions:s})]})]})]})},Yx=()=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Kx=()=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-pink-500",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Xx=({batches:l,students:n,onInitiateDeleteBatch:s,onAddWarden:i,onRemoveWarden:c,onAssignStudents:d})=>{const[f,m]=Y.useState(null),[p,y]=Y.useState(null),[b,j]=Y.useState(""),[x,w]=Y.useState(null),[E,T]=Y.useState(new Set),M=Y.useMemo(()=>new Map(n.map(K=>[K.id,K])),[n]),R=K=>M.get(K),z=K=>{m(ue=>ue===K?null:K),y(null),w(null)},L=(K,ue)=>{(p==null?void 0:p.batchId)===K&&(p==null?void 0:p.gender)===ue?y(null):(y({batchId:K,gender:ue}),j(""),w(null))},X=()=>{p&&b&&(i(p.batchId,b),y(null),j(""))},P=(K,ue)=>{(x==null?void 0:x.wardenStudentId)===ue.wardenStudentId?w(null):(w({batchId:K.id,wardenStudentId:ue.wardenStudentId}),T(new Set(ue.assignedStudentIds)),y(null))},V=()=>{w(null),T(new Set)},Q=()=>{x&&(d(x.batchId,x.wardenStudentId,Array.from(E)),w(null))},ie=K=>{T(ue=>{const xe=new Set(ue);return xe.has(K)?xe.delete(K):xe.add(K),xe})},fe=K=>n.filter(ue=>ue.Batch.toLowerCase()===K.toLowerCase()).sort((ue,xe)=>String(ue["Roll No"]).localeCompare(String(xe["Roll No"]),void 0,{numeric:!0,sensitivity:"base"})),at=(K,ue)=>{if(!p||p.batchId!==K.id)return null;const{gender:xe}=p,ce=new Set(K.wardens.map(O=>O.wardenStudentId)),D=ue.filter(O=>O.Gender===xe&&!ce.has(O.id));return h.jsxs("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md flex items-center gap-3 transition-all duration-300",children:[h.jsxs("select",{value:b,onChange:O=>j(O.target.value),className:"flex-grow w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-indigo-500 bg-white dark:bg-gray-700 text-sm",children:[h.jsxs("option",{value:"",children:["-- Select a ",xe.toLowerCase()," student --"]}),D.map(O=>h.jsxs("option",{value:O.id,children:[O.Name," (",O["Roll No"],")"]},O.id))]}),h.jsx("button",{onClick:X,disabled:!b,className:"px-3 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 disabled:bg-green-300",children:"Add"}),h.jsx("button",{onClick:()=>y(null),className:"px-3 py-2 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 text-sm rounded-md hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cancel"})]})},Ve=(K,ue,xe)=>{var J;const ce=new Set(K.wardens.map(F=>F.wardenStudentId)),D=new Set(K.wardens.filter(F=>F.wardenStudentId!==ue.wardenStudentId).flatMap(F=>F.assignedStudentIds)),O=xe.filter(F=>!ce.has(F.id));return h.jsxs("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-900/50 rounded-md",children:[h.jsxs("h5",{className:"text-md font-semibold text-gray-800 dark:text-gray-200 mb-3",children:["Assign students to ",(J=R(ue.wardenStudentId))==null?void 0:J.Name,":"]}),h.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2 border dark:border-gray-600 rounded-md p-2",children:[O.map(F=>{const le=D.has(F.id);return h.jsxs("label",{className:`flex items-center p-2 rounded-md ${le?"opacity-50 cursor-not-allowed":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[h.jsx("input",{type:"checkbox",checked:E.has(F.id),onChange:()=>ie(F.id),disabled:le,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),h.jsxs("span",{className:"ml-3 text-sm text-gray-700 dark:text-gray-300",children:[F.Name," (",F["Roll No"],")"]}),le&&h.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"(Assigned elsewhere)"})]},F.id)}),O.length===0&&h.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:"No students available in this batch to assign."})]}),h.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[h.jsx("button",{onClick:V,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 text-sm",children:"Cancel"}),h.jsx("button",{onClick:Q,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm",children:"Save Assignments"})]})]})};return h.jsx(h.Fragment,{children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:[h.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white mb-4",children:"Batch Management"}),l.length===0?h.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No batches created yet. Go to the Students tab to select students and create a batch."}):h.jsx("div",{className:"space-y-4",children:l.map(K=>{const ue=fe(K.name),xe=new Set(K.wardens.map(ce=>ce.wardenStudentId));return h.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[h.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",onClick:()=>z(K.id),children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg text-indigo-700 dark:text-indigo-400",children:K.name}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[ue.length," members",K.wardens.length>0&&h.jsxs("span",{className:"ml-1 font-medium",children:["(incl. ",K.wardens.length," ",K.wardens.length===1?"warden":"wardens",")"]})]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:ce=>{ce.stopPropagation(),s(K)},className:"text-red-500 hover:text-red-700 font-medium text-sm",children:"Delete"}),h.jsx("svg",{className:`w-5 h-5 text-gray-500 transform transition-transform ${f===K.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})]}),f===K.id&&h.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 space-y-6",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-md font-medium text-gray-600 dark:text-gray-300 mb-2",children:"Members (Sorted by Roll No):"}),h.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-gray-700 max-h-60 overflow-y-auto pr-2",children:ue.map(ce=>h.jsxs("li",{className:"py-2 flex justify-between items-center",children:[h.jsxs("span",{className:"flex items-center",children:[ce.Name,xe.has(ce.id)&&h.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200 rounded-full font-medium",children:"Warden"})]}),h.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono",children:["Roll: ",ce["Roll No"]]})]},ce.id))})]}),h.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-3",children:[h.jsx("h4",{className:"text-md font-semibold text-gray-700 dark:text-gray-200",children:"Warden Management"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>L(K.id,"Female"),className:"px-3 py-1 text-xs font-medium text-pink-700 bg-pink-100 rounded-full hover:bg-pink-200 dark:bg-pink-900 dark:text-pink-200 dark:hover:bg-pink-800",children:"Add Girl Warden"}),h.jsx("button",{onClick:()=>L(K.id,"Male"),className:"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-full hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800",children:"Add Boy Warden"})]})]}),at(K,ue),h.jsxs("div",{className:"space-y-3 mt-3",children:[K.wardens.map(ce=>{const D=R(ce.wardenStudentId);if(!D)return null;const O=(x==null?void 0:x.wardenStudentId)===ce.wardenStudentId;return h.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("p",{className:"font-semibold text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[D.Gender==="Male"?h.jsx(Yx,{}):h.jsx(Kx,{}),D.Name," ",h.jsx("span",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium",children:"(Warden)"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:()=>P(K,ce),className:`text-sm ${O?"text-gray-500":"text-indigo-600 hover:text-indigo-800"}`,children:O?"Close Editor":"Assign Students"}),h.jsx("button",{onClick:()=>c(K.id,ce.wardenStudentId),className:"text-sm text-red-500 hover:text-red-700",children:"Remove"})]})]}),h.jsxs("ul",{className:"mt-2 pl-4 text-sm text-gray-600 dark:text-gray-300 list-disc",children:[ce.assignedStudentIds.map(J=>R(J)).filter(Boolean).map(J=>h.jsxs("li",{children:[J.Name," ",h.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:["(",J["Roll No"],")"]})]},J.id)),ce.assignedStudentIds.length===0&&h.jsx("li",{className:"list-none text-xs text-gray-400",children:"No students assigned."})]}),O&&Ve(K,ce,ue)]},ce.wardenStudentId)}),K.wardens.length===0&&h.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"No wardens assigned to this batch."})]})]})]})]},K.id)})})]})})},Ix=({wardenStudent:l,assignedStudents:n})=>h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md border border-gray-200 dark:border-gray-700",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:l.imageUrl||`https://ui-avatars.com/api/?name=${l.Name}&background=random`,alt:l.Name}),h.jsxs("div",{children:[h.jsx("p",{className:"text-md font-semibold text-gray-900 dark:text-white",children:l.Name}),h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Roll No: ",l["Roll No"]]})]})]}),h.jsxs("div",{className:"mt-4 border-t border-gray-200 dark:border-gray-600 pt-3",children:[h.jsxs("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 mb-2",children:["Assigned Students (",n.length,")"]}),n.length>0?h.jsx("ul",{className:"space-y-1 text-sm text-gray-700 dark:text-gray-400 max-h-32 overflow-y-auto",children:n.map(s=>h.jsxs("li",{children:["- ",s.Name," ",h.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:["(",s["Roll No"],")"]})]},s.id))}):h.jsx("p",{className:"text-sm text-gray-400 italic",children:"No students assigned yet."})]})]}),Qx=({batches:l,students:n})=>{const s=Y.useMemo(()=>new Map(n.map(c=>[c.id,c])),[n]),i=Y.useMemo(()=>l.map(c=>{const d=c.wardens.map(f=>{const m=s.get(f.wardenStudentId),p=f.assignedStudentIds.map(y=>s.get(y)).filter(y=>!!y);return{wardenStudent:m,assignedStudents:p}}).filter(f=>!!f.wardenStudent);return{batch:c,wardens:d}}).filter(c=>c.wardens.length>0),[l,s]);return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:[h.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Warden Overview"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"A centralized view of all wardens and their assigned students across different batches."})]}),i.length===0?h.jsxs("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[h.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:h.jsx("path",{vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 20.944L12 22l9-1.056v-5.556c0-1.076-.232-2.11-.658-3.084z"})}),h.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No Wardens Assigned"}),h.jsx("p",{className:"mt-1 text-sm text-gray-500",children:'Assign students as wardens in the "Batches" section to see them here.'})]}):i.map(({batch:c,wardens:d})=>h.jsxs("div",{children:[h.jsxs("h3",{className:"text-xl font-bold text-indigo-600 dark:text-indigo-400 mb-4 pb-2 border-b-2 border-indigo-200 dark:border-indigo-800",children:["Batch: ",c.name]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(({wardenStudent:f,assignedStudents:m})=>h.jsx(Ix,{wardenStudent:f,assignedStudents:m},f.id))})]},c.id))]})},Jx=({transactions:l,onResetHistory:n,onDeleteTransaction:s})=>{const[i,c]=Y.useState(""),[d,f]=Y.useState(!1),[m,p]=Y.useState(null),y=Y.useMemo(()=>{if(!i.trim())return l;const w=i.toLowerCase().trim();return l.filter(E=>E.studentName.toLowerCase().includes(w)||String(E.studentRollNo).toLowerCase().includes(w)||E.method.toLowerCase().includes(w)||(E.remarks||"").toLowerCase().includes(w))},[l,i]),b=w=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(w),j=async()=>{await n(),f(!1)},x=async()=>{m&&(await s(m.id),p(null))};return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-lg",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Payment History"}),h.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Showing ",y.length," of ",l.length," transactions"]})]}),h.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[h.jsx("input",{type:"text",placeholder:"Search transactions...",className:"w-full sm:w-64 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700",value:i,onChange:w=>c(w.target.value)}),h.jsx("button",{onClick:()=>f(!0),className:"px-3 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",title:"Reset all payment history",children:"Reset"})]})]}),h.jsxs("div",{className:"overflow-x-auto",children:[h.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[h.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Student Name"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden sm:table-cell",children:"Roll No"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden md:table-cell",children:"Method"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden xl:table-cell",children:"Transaction ID"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden md:table-cell",children:"Remarks"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:y.map(w=>h.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:w.date}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:w.studentName}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 hidden sm:table-cell",children:w.studentRollNo}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-200",children:b(w.amount)}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 hidden md:table-cell",children:w.method}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400 font-mono hidden xl:table-cell",title:w.id,children:[w.id.substring(0,8),"..."]}),h.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300 hidden md:table-cell",children:w.remarks}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:h.jsx("button",{onClick:()=>p(w),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete Transaction",children:"Delete"})})]},w.id))})]}),y.length===0&&h.jsx("p",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No transactions found."})]})]}),d&&h.jsx(Ms,{isOpen:d,onClose:()=>f(!1),onConfirm:j,title:"Reset All Payment History?",message:"Are you sure you want to delete ALL payment records? This action is permanent and cannot be undone.",confirmButtonText:"Yes, Delete All",confirmButtonVariant:"danger"}),m&&h.jsx(Ms,{isOpen:!!m,onClose:()=>p(null),onConfirm:x,title:"Delete Transaction?",message:`Are you sure you want to permanently delete this payment of ${b(m.amount)} for ${m.studentName}? This cannot be undone.`,confirmButtonText:"Confirm Delete",confirmButtonVariant:"danger"})]})},Zx=({message:l,type:n,onClose:s})=>{Y.useEffect(()=>{const d=setTimeout(s,4e3);return()=>clearTimeout(d)},[s]);const i="fixed top-5 right-5 z-[100] text-white px-6 py-3 rounded-lg shadow-lg flex items-center animate-fade-in-down",c={success:"bg-green-500",error:"bg-red-500"};return h.jsxs("div",{className:`${i} ${c[n]}`,children:[h.jsx("p",{children:l}),h.jsx("button",{onClick:s,className:"ml-4 text-xl font-semibold leading-none",children:""})]})},dm=()=>h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"}),aa=({label:l,value:n})=>h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wider",children:l}),h.jsx("p",{className:"text-gray-800 dark:text-gray-200 break-words",children:n||"-"})]}),Fx=({student:l,onClose:n,onPay:s,onEdit:i,onManageVisitors:c})=>{const d=(l.payments||[]).reduce((p,y)=>p+y.amount,0),f=l["Full Paid"]?0:l["Total Fees"]-d,m=p=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(p);return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-start p-4 pt-10 sm:pt-20 overflow-y-auto",children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl my-auto",children:[h.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10 rounded-t-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Student Profile"}),h.jsx("button",{onClick:n,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white",children:h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),h.jsxs("div",{className:"p-6 sm:p-8",children:[h.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[h.jsxs("div",{className:"md:w-1/2 space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[h.jsx("img",{src:l.imageUrl||`https://ui-avatars.com/api/?name=${l.Name}&background=random`,alt:l.Name,className:"h-24 w-24 rounded-full object-cover shadow-lg"}),h.jsxs("div",{className:"text-center sm:text-left",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:l.Name}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Roll No: ",l["Roll No"]]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4 border-t dark:border-gray-700",children:[h.jsx(aa,{label:"Father's Name",value:l.Father}),h.jsx(aa,{label:"Mother's Name",value:l.Mother}),h.jsx(aa,{label:"Batch",value:l.Batch}),h.jsx(aa,{label:"Gender",value:l.Gender}),h.jsx(aa,{label:"Primary Phone",value:l.Phone}),h.jsx(aa,{label:"Emergency Number",value:l["Emergency Number"]}),h.jsx(aa,{label:"Phone 2",value:l["Phone 2"]}),h.jsx("div",{className:"sm:col-span-2",children:h.jsx(aa,{label:"Address",value:l.Address})})]})]}),h.jsxs("div",{className:"md:w-1/2 space-y-6",children:[h.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Payment Summary"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border dark:border-gray-600",children:[h.jsx(aa,{label:"Total Fees",value:m(l["Total Fees"])}),h.jsx(aa,{label:"Total Paid",value:m(d)}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wider",children:"Remaining"}),h.jsx("p",{className:`font-semibold ${f>0?"text-red-500":"text-green-500"}`,children:m(f)})]}),h.jsx(aa,{label:"Payment Mode",value:l.Mode})]})]})]}),h.jsxs("div",{className:"mt-8 border-t border-gray-200 dark:border-gray-700 pt-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Visitors List"}),h.jsx("button",{onClick:c,className:"px-3 py-1.5 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-md hover:bg-indigo-100 dark:bg-indigo-900/30 dark:text-indigo-300 dark:hover:bg-indigo-900/50 transition-colors",children:"Manage Visitors"})]}),l.visitors.length>0?h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:l.visitors.map(p=>h.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border dark:border-gray-600",children:[h.jsx("img",{src:p.image_url||`https://ui-avatars.com/api/?name=${p.name}&background=random`,alt:p.name,className:"w-14 h-14 rounded-full object-cover"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:p.name}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.relation}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.phone})]})]},p.id))}):h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No visitors recorded."})]}),h.jsxs("div",{className:"mt-8 border-t border-gray-200 dark:border-gray-700 pt-6",children:[h.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4",children:"Transaction History"}),h.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md",children:(l.payments||[]).length>0?h.jsxs("table",{className:"min-w-full text-sm divide-y divide-gray-200 dark:divide-gray-700",children:[h.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Date"}),h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Amount"}),h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Method"}),h.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500 dark:text-gray-400",children:"Remarks"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800/50",children:[...l.payments].sort((p,y)=>new Date(y.date).getTime()-new Date(p.date).getTime()).map(p=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-700 dark:text-gray-300",children:p.date}),h.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-medium text-gray-900 dark:text-white",children:m(p.amount)}),h.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-700 dark:text-gray-300",children:p.method}),h.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:p.remarks||"-"})]},p.id))})]}):h.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"No payment history found."})}),l.Remarks&&h.jsxs("div",{className:"mt-6",children:[h.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider mb-2",children:"Remarks"}),h.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 dark:border-yellow-600 rounded-r-md",children:h.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:l.Remarks})})]})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row justify-end items-center gap-3 p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/80 rounded-b-lg sticky bottom-0",children:[h.jsx("button",{onClick:n,type:"button",className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600",children:"Close"}),h.jsx("button",{onClick:i,type:"button",className:"w-full sm:w-auto inline-flex justify-center items-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none",children:"Edit Profile"}),h.jsx("button",{onClick:s,type:"button",className:"w-full sm:w-auto inline-flex justify-center items-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none",children:"Record Payment"})]})]})})},bc="student-images",cl=async(l,n)=>{const{error:s}=await Re.storage.from(bc).upload(n,l,{cacheControl:"3600",upsert:!1});if(s)throw s;const{data:i}=Re.storage.from(bc).getPublicUrl(n);if(!i.publicUrl)throw new Error("Could not retrieve public URL for uploaded image.");return i.publicUrl},Ns=async l=>{if(!l||l.length===0)return;const n=Array.isArray(l)?l.filter(i=>!!i):[l];if(n.length===0)return;const{error:s}=await Re.storage.from(bc).remove(n);s&&console.error("Error deleting image(s) from Supabase:",s.message)},Wx=l=>{const[n,s]=Y.useState([]),[i,c]=Y.useState(!0),d=Y.useCallback(async()=>{c(!0);try{const{data:{user:x}}=await Re.auth.getUser();if(!x)throw new Error("User not authenticated.");const{data:w,error:E}=await Re.from("students").select("*").order("createdAt",{ascending:!1});if(E)throw E;const M=(await Ex(x.id)).reduce((z,L)=>{const X=L.student_id;return z[X]||(z[X]=[]),z[X].push(L),z},{}),R=w.map(z=>({...z,visitors:M[z.id]||[]}));s(R)}catch(x){console.error("Error fetching students:",x),l("Failed to load students.","error")}finally{c(!1)}},[l]);return Y.useEffect(()=>{d()},[d]),{students:n,loading:i,refetchStudents:d,addStudentWithImage:async(x,w,E=0)=>{try{let T="",M="";if(w){const X=await imageCompression(w,{maxSizeMB:1,maxWidthOrHeight:1024});M=`profilePictures/${Date.now()}_${X.name}`,T=await cl(X,M)}const R=[];E>0&&R.push({id:crypto.randomUUID(),amount:E,method:"Cash",date:new Date().toISOString().slice(0,10),remarks:"Initial payment at registration"});const z={...x,payments:R,visitors:[],imageUrl:T,imagePath:M},L=await fx(z);E>0&&R.length>0&&await fg({...R[0],studentId:L.id,studentName:L.Name,studentRollNo:L["Roll No"]}),l("Student added successfully!","success")}catch(T){console.error("Error adding student:",T),l("Failed to add student.","error")}},updateStudentWithImage:async(x,w)=>{try{let E={...x};if(delete E.id,delete E.createdAt,delete E.visitors,w){x.imagePath&&await Ns(x.imagePath);const T=await imageCompression(w,{maxSizeMB:1,maxWidthOrHeight:1024}),M=`profilePictures/${Date.now()}_${T.name}`,R=await cl(T,M);E.imageUrl=R,E.imagePath=M}await yc(x.id,E),l("Student profile updated.","success")}catch(E){console.error("Error updating student:",E);const T=E.message||"Failed to update student profile.";l(T,"error")}},deleteStudentAndImage:async(x,w)=>{try{const E=[];x.imagePath&&E.push(x.imagePath),x.visitors&&x.visitors.forEach(T=>{T.image_path&&E.push(T.image_path)}),E.length>0&&await Ns(E),w&&await wx(x.id),await pc([x.id]),await gx(x.id),l("Student deleted successfully.","success")}catch(E){console.error("Error deleting student:",E),l("Failed to delete student.","error")}},deleteSelectedStudents:async x=>{if(x.length!==0)try{const E=n.filter(T=>x.includes(T.id)).flatMap(T=>{const M=[];return T.imagePath&&M.push(T.imagePath),T.visitors&&T.visitors.forEach(R=>R.image_path&&M.push(R.image_path)),M}).filter(T=>!!T);E.length>0&&await Ns(E),await pc(x),await mx(x),l(`${x.length} student(s) deleted successfully.`,"success")}catch(w){console.error("Error deleting selected students:",w),l("Failed to delete selected students.","error")}},recordPayment:async(x,w)=>{try{const T=(x.payments||[]).reduce((R,z)=>R+z.amount,0)+w.amount>=x["Total Fees"],M=[...x.payments||[],w];await yc(x.id,{payments:M,"Full Paid":x["Full Paid"]||T}),await fg({...w,studentId:x.id,studentName:x.Name,studentRollNo:x["Roll No"]}),l("Payment recorded successfully.","success")}catch(E){console.error("Failed to save payment:",E),l("Failed to record payment.","error")}},saveVisitors:async(x,w,E)=>{try{const T=n.find(K=>K.id===x),M=(T==null?void 0:T.visitors)||[],R=new Map(M.map(K=>[K.id,K])),z=new Map(w.map(K=>[K.id,K])),L=w.filter(K=>!R.has(K.id)),X=w.filter(K=>R.has(K.id)),P=M.filter(K=>!z.has(K.id)),V=L.map(async K=>{let ue="",xe="";const ce=E[K.id];if(ce){const J=await imageCompression(ce,{maxSizeMB:.5,maxWidthOrHeight:400});xe=`visitorPictures/${Date.now()}_${K.id}_${J.name}`,ue=await cl(J,xe)}const{id:D,...O}=K;return{...O,image_url:ue,image_path:xe}}),Q=await Promise.all(V),ie=X.map(async K=>{let ue=K.image_url||"",xe=K.image_path||"";const ce=E[K.id];if(ce){const D=R.get(K.id);D!=null&&D.image_path&&await Ns(D.image_path);const O=await imageCompression(ce,{maxSizeMB:.5,maxWidthOrHeight:400});xe=`visitorPictures/${Date.now()}_${K.id}_${O.name}`,ue=await cl(O,xe)}return{...K,image_url:ue,image_path:xe}}),fe=await Promise.all(ie),at=P.map(K=>K.image_path).filter(K=>!!K);at.length>0&&await Ns(at);const Ve=P.map(K=>K.id);Q.length>0&&await cm(Q),fe.length>0&&await kx(fe),Ve.length>0&&await Nx(Ve),l("Visitors saved successfully.","success")}catch(T){console.error("Error saving visitors:",T),l(T.message||"Failed to save visitors.","error")}}}},ew=l=>{const[n,s]=Y.useState([]),[i,c]=Y.useState(!0),d=Y.useCallback(async()=>{c(!0);const{data:x,error:w}=await Re.from("batches").select("*");if(w)console.error("Error fetching batches:",w),l("Failed to load batches.","error");else{const E=x.sort((T,M)=>T.name.localeCompare(M.name,void 0,{numeric:!0,sensitivity:"base"}));s(E)}c(!1)},[l]);Y.useEffect(()=>{d()},[d]);const f=Y.useCallback(async(x,w)=>{const E=x.map(T=>yc(T,{Batch:w}));await Promise.all(E)},[]);return{batches:n,loading:i,refetchBatches:d,createBatch:async(x,w)=>{try{const E=x.trim();await yx({name:E,studentIds:w,wardens:[]}),w.length>0&&await f(w,E),l(`Batch "${E}" created.`,"success"),d()}catch(E){console.error("Failed to create batch:",E),l("Failed to create batch.","error")}},deleteBatch:async(x,w)=>{if(x)try{w&&x.studentIds.length>0&&await _x(x.studentIds),await px(x),l(`Batch "${x.name}" and its students have been deleted.`,"success"),s(E=>E.filter(T=>T.id!==x.id))}catch(E){console.error("Failed to delete batch:",E),l("Failed to delete batch.","error")}},addWarden:async(x,w)=>{const E=n.find(T=>T.id===x);if(E)try{if(E.wardens.some(R=>R.wardenStudentId===w)){l("This student is already a warden for this batch.","error");return}const T={wardenStudentId:w,assignedStudentIds:[]},M=[...E.wardens,T];await dl(x,{wardens:M}),l("Warden added successfully.","success"),s(R=>R.map(z=>z.id===x?{...z,wardens:M}:z))}catch(T){console.error("Error adding warden: ",T),l("Failed to add warden.","error"),d()}},removeWarden:async(x,w)=>{const E=n.find(T=>T.id===x);if(E)try{const T=E.wardens.filter(M=>M.wardenStudentId!==w);await dl(x,{wardens:T}),l("Warden removed.","success"),s(M=>M.map(R=>R.id===x?{...R,wardens:T}:R))}catch(T){console.error("Error removing warden: ",T),l("Failed to remove warden.","error"),d()}},assignStudentsToWarden:async(x,w,E)=>{const T=n.find(M=>M.id===x);if(T)try{const M=T.wardens.map(R=>R.wardenStudentId===w?{...R,assignedStudentIds:E}:R);await dl(x,{wardens:M}),l("Student assignments updated.","success"),s(R=>R.map(z=>z.id===x?{...z,wardens:M}:z))}catch(M){console.error("Error assigning students: ",M),l("Failed to assign students.","error"),d()}}}},tw=l=>{const[n,s]=Y.useState([]),[i,c]=Y.useState(!0),d=Y.useCallback(async()=>{c(!0);const{data:p,error:y}=await Re.from("transactions").select("*").order("date",{ascending:!1});y?(console.error("Error fetching transactions:",y),l("Failed to load payment history.","error")):s(p),c(!1)},[l]);return Y.useEffect(()=>{d()},[d]),{transactions:n,loading:i,refetchTransactions:d,resetAllTransactions:async()=>{try{await bx(),s([]),l("All payment history has been reset.","success")}catch(p){console.error("Error resetting transactions:",p),l("Failed to reset payment history.","error")}},deleteSingleTransaction:async p=>{try{await xx(p),s(y=>y.filter(b=>b.id!==p)),l("Transaction deleted successfully.","success")}catch(y){console.error("Error during transaction deletion process:",y),l(y.message||"An unexpected error occurred.","error"),await d()}}}},aw=({user:l,theme:n,toggleTheme:s})=>{const[i,c]=Y.useState(ut.Dashboard),[d,f]=Y.useState(null),[m,p]=Y.useState(!1),y=Y.useCallback((re,Oe="success")=>{f({id:Date.now(),message:re,type:Oe})},[]),{students:b,loading:j,refetchStudents:x,addStudentWithImage:w,updateStudentWithImage:E,deleteStudentAndImage:T,deleteSelectedStudents:M,recordPayment:R,saveVisitors:z}=Wx(y),{batches:L,loading:X,refetchBatches:P,createBatch:V,deleteBatch:Q,addWarden:ie,removeWarden:fe,assignStudentsToWarden:at}=ew(y),{transactions:Ve,loading:K,refetchTransactions:ue,resetAllTransactions:xe,deleteSingleTransaction:ce}=tw(y),D=j||X||K,[O,J]=Y.useState(!0);Y.useEffect(()=>{O&&!D&&J(!1)},[D,O]);const[F,le]=Y.useState(!1),[_,$]=Y.useState(!1),[Z,W]=Y.useState(!1),[de,ge]=Y.useState(!1),[I,ve]=Y.useState(null),[be,nt]=Y.useState(null),[ft,Qt]=Y.useState(null),[Jt,vt]=Y.useState(null),[Nt,la]=Y.useState(null),[Un,Zt]=Y.useState(null),[Ft,Bt]=Y.useState(!1);Y.useEffect(()=>{if(be){const re=b.find(Oe=>Oe.id===be.id);re&&re!==be&&nt(re)}if(I){const re=b.find(Oe=>Oe.id===I.id);re&&re!==I&&ve(re)}if(ft){const re=b.find(Oe=>Oe.id===ft.id);re&&re!==ft&&Qt(re)}},[b,be,I,ft]);const oa=async(re,Oe,bt)=>{await w(re,Oe,bt),re.Batch&&!L.some(ga=>ga.name.toLowerCase()===re.Batch.toLowerCase())&&await V(re.Batch,[]),await Promise.all([x(),ue(),P()]),le(!1)},Bs=re=>{ve(re),W(!0)},xl=async(re,Oe)=>{await E(re,Oe),re.Batch&&!L.some(bt=>bt.name.toLowerCase()===re.Batch.toLowerCase())&&await V(re.Batch,[]),await Promise.all([x(),P()]),W(!1),ve(null)},ct=re=>{const Oe=b.find(bt=>bt.id===re.id)||re;Qt(Oe),ge(!0)},wl=async(re,Oe,bt)=>{await z(re,Oe,bt),await x(),ge(!1),Qt(null)},Ls=re=>{vt(re),Bt(!1)},qs=async()=>{Jt&&(await T(Jt,Ft),vt(null),await x(),Ft&&await ue())},Dn=async re=>{await M(re),await x()},_l=async(re,Oe)=>{await V(re,Oe),await Promise.all([P(),x()])},Hs=async(re,Oe)=>{await R(re,Oe),await Promise.all([x(),ue()]),Zt(null)},Sl=re=>{la(re),Bt(!1)},jl=async()=>{Nt&&(await Q(Nt,Ft),la(null),await Promise.all([P(),x()]),Ft&&await ue())},on=async(re,Oe)=>{await ie(re,Oe),await P()},gt=async(re,Oe)=>{await fe(re,Oe),await P()},ua=async(re,Oe,bt)=>{await at(re,Oe,bt),await P()},mt=async()=>{await xe(),await x()},El=async re=>{await ce(re),await x()},kl=Y.useCallback(async()=>{await Promise.all([x(),P(),ue()])},[x,P,ue]),Nl=()=>{if(O&&D)return h.jsx("div",{className:"flex justify-center items-center h-full",children:h.jsx(dm,{})});switch(i){case ut.Students:return h.jsx(Mx,{students:b,onEditStudent:Bs,onDeleteStudent:Ls,onDeleteSelected:Dn,onCreateBatch:_l,onRecordPayment:Zt,onViewStudent:nt,onManageVisitors:ct});case ut.Batches:return h.jsx(Xx,{batches:L,students:b,onInitiateDeleteBatch:Sl,onAddWarden:on,onRemoveWarden:gt,onAssignStudents:ua});case ut.Wardens:return h.jsx(Qx,{batches:L,students:b});case ut.Payments:return h.jsx(Jx,{transactions:Ve,onResetHistory:mt,onDeleteTransaction:El});case ut.Dashboard:default:return h.jsx(Px,{students:b,batches:L,transactions:Ve})}};return h.jsxs("div",{className:"relative flex h-screen bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200",children:[m&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden",onClick:()=>p(!1)}),h.jsx(Ox,{currentView:i,setView:c,isOpen:m,setIsOpen:p}),h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[h.jsx(Ax,{user:l,onAddStudent:()=>le(!0),onBulkUpload:()=>$(!0),theme:n,toggleTheme:s,onToggleSidebar:()=>p(!m)}),h.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 dark:bg-gray-900 p-4 sm:p-6",children:Nl()})]}),d&&h.jsx(Zx,{message:d.message,type:d.type,onClose:()=>f(null)},d.id),F&&h.jsx(zx,{isOpen:F,onClose:()=>le(!1),onSubmit:oa,batches:L,existingStudents:b}),Z&&I&&h.jsx(Bx,{student:I,onClose:()=>W(!1),onSave:xl,batches:L}),_&&h.jsx(qx,{isOpen:_,onClose:()=>$(!1),onUploadComplete:kl,existingStudents:b,existingBatches:L}),Jt&&h.jsx(Ms,{isOpen:!!Jt,onClose:()=>vt(null),onConfirm:qs,title:"Delete Student",message:`Are you sure you want to delete ${Jt.Name}? This action cannot be undone.`,confirmButtonVariant:"danger",children:h.jsxs("div",{className:"flex items-center space-x-3 bg-red-50 dark:bg-red-900/20 p-3 rounded-md mt-4",children:[h.jsx("input",{id:"delete-tx-student",type:"checkbox",checked:Ft,onChange:re=>Bt(re.target.checked),className:"h-4 w-4 text-red-600 bg-gray-100 border-gray-300 rounded focus:ring-red-500 dark:focus:ring-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),h.jsx("label",{htmlFor:"delete-tx-student",className:"text-sm text-red-800 dark:text-red-200",children:"Also permanently delete all payment history for this student."})]})}),Nt&&h.jsx(Ms,{isOpen:!!Nt,onClose:()=>la(null),onConfirm:jl,title:`Delete Batch "${Nt.name}"?`,message:`This will delete the batch "${Nt.name}". The students in this batch will remain but will be unassigned if not manually reassigned.`,confirmButtonText:"Confirm Deletion",confirmButtonVariant:"danger"}),Un&&h.jsx(Hx,{student:Un,onClose:()=>Zt(null),onSave:Hs}),be&&h.jsx(Fx,{student:be,onClose:()=>nt(null),onPay:()=>{Zt(be),nt(null)},onEdit:()=>{Bs(be),nt(null)},onManageVisitors:()=>ct(be)}),de&&ft&&h.jsx(Lx,{student:ft,onClose:()=>{ge(!1),Qt(null)},onSave:wl})]})},nw=()=>{const[l,n]=Y.useState(null),[s,i]=Y.useState(!0),[c,d]=Y.useState(()=>{const m=localStorage.getItem("theme"),p=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return m||(p?"dark":"light")});Y.useEffect(()=>{const m=window.document.documentElement;c==="dark"?m.classList.add("dark"):m.classList.remove("dark"),localStorage.setItem("theme",c)},[c]),Y.useEffect(()=>{const{data:m}=It.onAuthStateChange((p,y)=>{n((y==null?void 0:y.user)??null),i(!1)});return()=>{m.subscription.unsubscribe()}},[]);const f=()=>{d(m=>m==="light"?"dark":"light")};return s?h.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900",children:h.jsx(dm,{})}):l?h.jsx(aw,{user:l,theme:c,toggleTheme:f}):h.jsx(Tx,{})},hm=document.getElementById("root");if(!hm)throw new Error("Could not find root element to mount to");const rw=Lp.createRoot(hm);rw.render(h.jsx(Ap.StrictMode,{children:h.jsx(nw,{})}));
