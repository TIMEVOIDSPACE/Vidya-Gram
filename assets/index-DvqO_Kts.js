(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function zS(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var N_={exports:{}},zc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db;function ZN(){if(db)return zc;db=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:i,type:n,key:c,ref:a!==void 0?a:null,props:l}}return zc.Fragment=e,zc.jsx=t,zc.jsxs=t,zc}var fb;function eD(){return fb||(fb=1,N_.exports=ZN()),N_.exports}var w=eD(),D_={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb;function tD(){if(mb)return ke;mb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),I=Symbol.iterator;function D(P){return P===null||typeof P!="object"?null:(P=I&&P[I]||P["@@iterator"],typeof P=="function"?P:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,U={};function ne(P,X,he){this.props=P,this.context=X,this.refs=U,this.updater=he||F}ne.prototype.isReactComponent={},ne.prototype.setState=function(P,X){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,X,"setState")},ne.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function ie(){}ie.prototype=ne.prototype;function se(P,X,he){this.props=P,this.context=X,this.refs=U,this.updater=he||F}var ge=se.prototype=new ie;ge.constructor=se,B(ge,ne.prototype),ge.isPureReactComponent=!0;var Ae=Array.isArray;function Ee(){}var x={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function C(P,X,he){var Y=he.ref;return{$$typeof:i,type:P,key:X,ref:Y!==void 0?Y:null,props:he}}function V(P,X){return C(P.type,X,P.props)}function O(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function M(P){var X={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(he){return X[he]})}var A=/\/+/g;function De(P,X){return typeof P=="object"&&P!==null&&P.key!=null?M(""+P.key):X.toString(36)}function Qe(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Ee,Ee):(P.status="pending",P.then(function(X){P.status==="pending"&&(P.status="fulfilled",P.value=X)},function(X){P.status==="pending"&&(P.status="rejected",P.reason=X)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function $(P,X,he,Y,le){var fe=typeof P;(fe==="undefined"||fe==="boolean")&&(P=null);var ce=!1;if(P===null)ce=!0;else switch(fe){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(P.$$typeof){case i:case e:ce=!0;break;case y:return ce=P._init,$(ce(P._payload),X,he,Y,le)}}if(ce)return le=le(P),ce=Y===""?"."+De(P,0):Y,Ae(le)?(he="",ce!=null&&(he=ce.replace(A,"$&/")+"/"),$(le,X,he,"",function(We){return We})):le!=null&&(O(le)&&(le=V(le,he+(le.key==null||P&&P.key===le.key?"":(""+le.key).replace(A,"$&/")+"/")+ce)),X.push(le)),1;ce=0;var Ne=Y===""?".":Y+":";if(Ae(P))for(var Re=0;Re<P.length;Re++)Y=P[Re],fe=Ne+De(Y,Re),ce+=$(Y,X,he,fe,le);else if(Re=D(P),typeof Re=="function")for(P=Re.call(P),Re=0;!(Y=P.next()).done;)Y=Y.value,fe=Ne+De(Y,Re++),ce+=$(Y,X,he,fe,le);else if(fe==="object"){if(typeof P.then=="function")return $(Qe(P),X,he,Y,le);throw X=String(P),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ce}function ue(P,X,he){if(P==null)return P;var Y=[],le=0;return $(P,Y,"","",function(fe){return X.call(he,fe,le++)}),Y}function ae(P){if(P._status===-1){var X=P._result;X=X(),X.then(function(he){(P._status===0||P._status===-1)&&(P._status=1,P._result=he)},function(he){(P._status===0||P._status===-1)&&(P._status=2,P._result=he)}),P._status===-1&&(P._status=0,P._result=X)}if(P._status===1)return P._result.default;throw P._result}var ve=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Pe={map:ue,forEach:function(P,X,he){ue(P,function(){X.apply(this,arguments)},he)},count:function(P){var X=0;return ue(P,function(){X++}),X},toArray:function(P){return ue(P,function(X){return X})||[]},only:function(P){if(!O(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return ke.Activity=T,ke.Children=Pe,ke.Component=ne,ke.Fragment=t,ke.Profiler=a,ke.PureComponent=se,ke.StrictMode=n,ke.Suspense=m,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,ke.__COMPILER_RUNTIME={__proto__:null,c:function(P){return x.H.useMemoCache(P)}},ke.cache=function(P){return function(){return P.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(P,X,he){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var Y=B({},P.props),le=P.key;if(X!=null)for(fe in X.key!==void 0&&(le=""+X.key),X)!R.call(X,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&X.ref===void 0||(Y[fe]=X[fe]);var fe=arguments.length-2;if(fe===1)Y.children=he;else if(1<fe){for(var ce=Array(fe),Ne=0;Ne<fe;Ne++)ce[Ne]=arguments[Ne+2];Y.children=ce}return C(P.type,le,Y)},ke.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},ke.createElement=function(P,X,he){var Y,le={},fe=null;if(X!=null)for(Y in X.key!==void 0&&(fe=""+X.key),X)R.call(X,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(le[Y]=X[Y]);var ce=arguments.length-2;if(ce===1)le.children=he;else if(1<ce){for(var Ne=Array(ce),Re=0;Re<ce;Re++)Ne[Re]=arguments[Re+2];le.children=Ne}if(P&&P.defaultProps)for(Y in ce=P.defaultProps,ce)le[Y]===void 0&&(le[Y]=ce[Y]);return C(P,fe,le)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(P){return{$$typeof:f,render:P}},ke.isValidElement=O,ke.lazy=function(P){return{$$typeof:y,_payload:{_status:-1,_result:P},_init:ae}},ke.memo=function(P,X){return{$$typeof:g,type:P,compare:X===void 0?null:X}},ke.startTransition=function(P){var X=x.T,he={};x.T=he;try{var Y=P(),le=x.S;le!==null&&le(he,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(Ee,ve)}catch(fe){ve(fe)}finally{X!==null&&he.types!==null&&(X.types=he.types),x.T=X}},ke.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},ke.use=function(P){return x.H.use(P)},ke.useActionState=function(P,X,he){return x.H.useActionState(P,X,he)},ke.useCallback=function(P,X){return x.H.useCallback(P,X)},ke.useContext=function(P){return x.H.useContext(P)},ke.useDebugValue=function(){},ke.useDeferredValue=function(P,X){return x.H.useDeferredValue(P,X)},ke.useEffect=function(P,X){return x.H.useEffect(P,X)},ke.useEffectEvent=function(P){return x.H.useEffectEvent(P)},ke.useId=function(){return x.H.useId()},ke.useImperativeHandle=function(P,X,he){return x.H.useImperativeHandle(P,X,he)},ke.useInsertionEffect=function(P,X){return x.H.useInsertionEffect(P,X)},ke.useLayoutEffect=function(P,X){return x.H.useLayoutEffect(P,X)},ke.useMemo=function(P,X){return x.H.useMemo(P,X)},ke.useOptimistic=function(P,X){return x.H.useOptimistic(P,X)},ke.useReducer=function(P,X,he){return x.H.useReducer(P,X,he)},ke.useRef=function(P){return x.H.useRef(P)},ke.useState=function(P){return x.H.useState(P)},ke.useSyncExternalStore=function(P,X,he){return x.H.useSyncExternalStore(P,X,he)},ke.useTransition=function(){return x.H.useTransition()},ke.version="19.2.0",ke}var pb;function Jy(){return pb||(pb=1,D_.exports=tD()),D_.exports}var _e=Jy();const FS=zS(_e);var P_={exports:{}},Fc={},O_={exports:{}},k_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gb;function nD(){return gb||(gb=1,(function(i){function e($,ue){var ae=$.length;$.push(ue);e:for(;0<ae;){var ve=ae-1>>>1,Pe=$[ve];if(0<a(Pe,ue))$[ve]=ue,$[ae]=Pe,ae=ve;else break e}}function t($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var ue=$[0],ae=$.pop();if(ae!==ue){$[0]=ae;e:for(var ve=0,Pe=$.length,P=Pe>>>1;ve<P;){var X=2*(ve+1)-1,he=$[X],Y=X+1,le=$[Y];if(0>a(he,ae))Y<Pe&&0>a(le,he)?($[ve]=le,$[Y]=ae,ve=Y):($[ve]=he,$[X]=ae,ve=X);else if(Y<Pe&&0>a(le,ae))$[ve]=le,$[Y]=ae,ve=Y;else break e}}return ue}function a($,ue){var ae=$.sortIndex-ue.sortIndex;return ae!==0?ae:$.id-ue.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();i.unstable_now=function(){return c.now()-f}}var m=[],g=[],y=1,T=null,I=3,D=!1,F=!1,B=!1,U=!1,ne=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function ge($){for(var ue=t(g);ue!==null;){if(ue.callback===null)n(g);else if(ue.startTime<=$)n(g),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(g)}}function Ae($){if(B=!1,ge($),!F)if(t(m)!==null)F=!0,Ee||(Ee=!0,M());else{var ue=t(g);ue!==null&&Qe(Ae,ue.startTime-$)}}var Ee=!1,x=-1,R=5,C=-1;function V(){return U?!0:!(i.unstable_now()-C<R)}function O(){if(U=!1,Ee){var $=i.unstable_now();C=$;var ue=!0;try{e:{F=!1,B&&(B=!1,ie(x),x=-1),D=!0;var ae=I;try{t:{for(ge($),T=t(m);T!==null&&!(T.expirationTime>$&&V());){var ve=T.callback;if(typeof ve=="function"){T.callback=null,I=T.priorityLevel;var Pe=ve(T.expirationTime<=$);if($=i.unstable_now(),typeof Pe=="function"){T.callback=Pe,ge($),ue=!0;break t}T===t(m)&&n(m),ge($)}else n(m);T=t(m)}if(T!==null)ue=!0;else{var P=t(g);P!==null&&Qe(Ae,P.startTime-$),ue=!1}}break e}finally{T=null,I=ae,D=!1}ue=void 0}}finally{ue?M():Ee=!1}}}var M;if(typeof se=="function")M=function(){se(O)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,De=A.port2;A.port1.onmessage=O,M=function(){De.postMessage(null)}}else M=function(){ne(O,0)};function Qe($,ue){x=ne(function(){$(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function($){$.callback=null},i.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},i.unstable_getCurrentPriorityLevel=function(){return I},i.unstable_next=function($){switch(I){case 1:case 2:case 3:var ue=3;break;default:ue=I}var ae=I;I=ue;try{return $()}finally{I=ae}},i.unstable_requestPaint=function(){U=!0},i.unstable_runWithPriority=function($,ue){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ae=I;I=$;try{return ue()}finally{I=ae}},i.unstable_scheduleCallback=function($,ue,ae){var ve=i.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ve+ae:ve):ae=ve,$){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ae+Pe,$={id:y++,callback:ue,priorityLevel:$,startTime:ae,expirationTime:Pe,sortIndex:-1},ae>ve?($.sortIndex=ae,e(g,$),t(m)===null&&$===t(g)&&(B?(ie(x),x=-1):B=!0,Qe(Ae,ae-ve))):($.sortIndex=Pe,e(m,$),F||D||(F=!0,Ee||(Ee=!0,M()))),$},i.unstable_shouldYield=V,i.unstable_wrapCallback=function($){var ue=I;return function(){var ae=I;I=ue;try{return $.apply(this,arguments)}finally{I=ae}}}})(k_)),k_}var _b;function iD(){return _b||(_b=1,O_.exports=nD()),O_.exports}var V_={exports:{}},wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb;function rD(){if(yb)return wn;yb=1;var i=Jy();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,y){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:g,implementation:y}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,wn.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,y)},wn.flushSync=function(m){var g=c.T,y=n.p;try{if(c.T=null,n.p=2,m)return m()}finally{c.T=g,n.p=y,n.d.f()}},wn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(m,g))},wn.prefetchDNS=function(m){typeof m=="string"&&n.d.D(m)},wn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,T=f(y,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,D=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?n.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:I,fetchPriority:D}):y==="script"&&n.d.X(m,{crossOrigin:T,integrity:I,fetchPriority:D,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},wn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=f(g.as,g.crossOrigin);n.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(m)},wn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,T=f(y,g.crossOrigin);n.d.L(m,y,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},wn.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=f(g.as,g.crossOrigin);n.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(m)},wn.requestFormReset=function(m){n.d.r(m)},wn.unstable_batchedUpdates=function(m,g){return m(g)},wn.useFormState=function(m,g,y){return c.H.useFormState(m,g,y)},wn.useFormStatus=function(){return c.H.useHostTransitionStatus()},wn.version="19.2.0",wn}var vb;function sD(){if(vb)return V_.exports;vb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),V_.exports=rD(),V_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb;function aD(){if(Tb)return Fc;Tb=1;var i=iD(),e=Jy(),t=sD();function n(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(n(188))}function g(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(n(188));return s!==r?null:r}for(var o=r,u=s;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return m(d),r;if(p===u)return m(d),s;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=d,u=p;else{for(var v=!1,b=d.child;b;){if(b===o){v=!0,o=d,u=p;break}if(b===u){v=!0,u=d,o=p;break}b=b.sibling}if(!v){for(b=p.child;b;){if(b===o){v=!0,o=p,u=d;break}if(b===u){v=!0,u=p,o=d;break}b=b.sibling}if(!v)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),se=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function M(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var A=Symbol.for("react.client.reference");function De(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===A?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case B:return"Fragment";case ne:return"Profiler";case U:return"StrictMode";case Ae:return"Suspense";case Ee:return"SuspenseList";case C:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case F:return"Portal";case se:return r.displayName||"Context";case ie:return(r._context.displayName||"Context")+".Consumer";case ge:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case x:return s=r.displayName||null,s!==null?s:De(r.type)||"Memo";case R:s=r._payload,r=r._init;try{return De(r(s))}catch{}}return null}var Qe=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},ve=[],Pe=-1;function P(r){return{current:r}}function X(r){0>Pe||(r.current=ve[Pe],ve[Pe]=null,Pe--)}function he(r,s){Pe++,ve[Pe]=r.current,r.current=s}var Y=P(null),le=P(null),fe=P(null),ce=P(null);function Ne(r,s){switch(he(fe,s),he(le,r),he(Y,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Vw(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Vw(s),r=Mw(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}X(Y),he(Y,r)}function Re(){X(Y),X(le),X(fe)}function We(r){r.memoizedState!==null&&he(ce,r);var s=Y.current,o=Mw(s,r.type);s!==o&&(he(le,r),he(Y,o))}function Cn(r){le.current===r&&(X(Y),X(le)),ce.current===r&&(X(ce),Lc._currentValue=ae)}var En,di;function jn(r){if(En===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);En=s&&s[1]||"",di=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+En+r+di}var Mr=!1;function Pa(r,s){if(!r||Mr)return"";Mr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(W){var G=W}Reflect.construct(r,[],ee)}else{try{ee.call()}catch(W){G=W}r.call(ee.prototype)}}else{try{throw Error()}catch(W){G=W}(ee=r())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(W){if(W&&G&&typeof W.stack=="string")return[W.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),v=p[0],b=p[1];if(v&&b){var N=v.split(`
`),H=b.split(`
`);for(d=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;if(u===N.length||d===H.length)for(u=N.length-1,d=H.length-1;1<=u&&0<=d&&N[u]!==H[d];)d--;for(;1<=u&&0<=d;u--,d--)if(N[u]!==H[d]){if(u!==1||d!==1)do if(u--,d--,0>d||N[u]!==H[d]){var J=`
`+N[u].replace(" at new "," at ");return r.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",r.displayName)),J}while(1<=u&&0<=d);break}}}finally{Mr=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?jn(o):""}function Uu(r,s){switch(r.tag){case 26:case 27:case 5:return jn(r.type);case 16:return jn("Lazy");case 13:return r.child!==s&&s!==null?jn("Suspense Fallback"):jn("Suspense");case 19:return jn("SuspenseList");case 0:case 15:return Pa(r.type,!1);case 11:return Pa(r.type.render,!1);case 1:return Pa(r.type,!0);case 31:return jn("Activity");default:return""}}function ju(r){try{var s="",o=null;do s+=Uu(r,o),o=r,r=r.return;while(r);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Bt=Object.prototype.hasOwnProperty,Jt=i.unstable_scheduleCallback,Ts=i.unstable_cancelCallback,Pp=i.unstable_shouldYield,pd=i.unstable_requestPaint,Nn=i.unstable_now,Oa=i.unstable_getCurrentPriorityLevel,Bu=i.unstable_ImmediatePriority,zu=i.unstable_UserBlockingPriority,Es=i.unstable_NormalPriority,Op=i.unstable_LowPriority,gd=i.unstable_IdlePriority,_d=i.log,yd=i.unstable_setDisableYieldValue,Di=null,un=null;function fi(r){if(typeof _d=="function"&&yd(r),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Di,r)}catch{}}var kt=Math.clz32?Math.clz32:Td,vd=Math.log,Ko=Math.LN2;function Td(r){return r>>>=0,r===0?32:31-(vd(r)/Ko|0)|0}var Xi=256,ka=262144,zt=4194304;function Ji(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Zi(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var d=0,p=r.suspendedLanes,v=r.pingedLanes;r=r.warmLanes;var b=u&134217727;return b!==0?(u=b&~p,u!==0?d=Ji(u):(v&=b,v!==0?d=Ji(v):o||(o=b&~r,o!==0&&(d=Ji(o))))):(b=u&~p,b!==0?d=Ji(b):v!==0?d=Ji(v):o||(o=u&~r,o!==0&&(d=Ji(o)))),d===0?0:s!==0&&s!==d&&(s&p)===0&&(p=d&-d,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:d}function Pi(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function kp(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ed(){var r=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),r}function er(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Va(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Vp(r,s,o,u,d,p){var v=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var b=r.entanglements,N=r.expirationTimes,H=r.hiddenUpdates;for(o=v&~o;0<o;){var J=31-kt(o),ee=1<<J;b[J]=0,N[J]=-1;var G=H[J];if(G!==null)for(H[J]=null,J=0;J<G.length;J++){var W=G[J];W!==null&&(W.lane&=-536870913)}o&=~ee}u!==0&&Ma(r,u,0),p!==0&&d===0&&r.tag!==0&&(r.suspendedLanes|=p&~(v&~s))}function Ma(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-kt(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function Fu(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-kt(o),d=1<<u;d&s|r[u]&s&&(r[u]|=s),o&=~d}}function qu(r,s){var o=s&-s;return o=(o&42)!==0?1:La(o),(o&(r.suspendedLanes|s))!==0?0:o}function La(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Lr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function wd(){var r=ue.p;return r!==0?r:(r=window.event,r===void 0?32:sb(r.type))}function Oi(r,s){var o=ue.p;try{return ue.p=r,s()}finally{ue.p=o}}var ki=Math.random().toString(36).slice(2),Ft="__reactFiber$"+ki,nn="__reactProps$"+ki,tr="__reactContainer$"+ki,Qo="__reactEvents$"+ki,Mp="__reactListeners$"+ki,bd="__reactHandles$"+ki,Id="__reactResources$"+ki,nr="__reactMarker$"+ki;function $o(r){delete r[Ft],delete r[nn],delete r[Qo],delete r[Mp],delete r[bd]}function ir(r){var s=r[Ft];if(s)return s;for(var o=r.parentNode;o;){if(s=o[tr]||o[Ft]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=qw(r);r!==null;){if(o=r[Ft])return o;r=qw(r)}return s}r=o,o=r.parentNode}return null}function mi(r){if(r=r[Ft]||r[tr]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function Xn(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(n(33))}function rr(r){var s=r[Id];return s||(s=r[Id]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function qt(r){r[nr]=!0}var Hu=new Set,Gu={};function sr(r,s){ar(r,s),ar(r+"Capture",s)}function ar(r,s){for(Gu[r]=s,r=0;r<s.length;r++)Hu.add(s[r])}var Ku=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qu={},$u={};function Sd(r){return Bt.call($u,r)?!0:Bt.call(Qu,r)?!1:Ku.test(r)?$u[r]=!0:(Qu[r]=!0,!1)}function Yo(r,s,o){if(Sd(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Jn(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Ht(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}function rn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ws(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Yu(r,s,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,p=u.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){o=""+v,p.call(this,v)}}),Object.defineProperty(r,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function nt(r){if(!r._valueTracker){var s=ws(r)?"checked":"value";r._valueTracker=Yu(r,s,""+r[s])}}function Ua(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=ws(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function or(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ja=/[\n"\\]/g;function Bn(r){return r.replace(ja,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Wo(r,s,o,u,d,p,v,b){r.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?r.type=v:r.removeAttribute("type"),s!=null?v==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+rn(s)):r.value!==""+rn(s)&&(r.value=""+rn(s)):v!=="submit"&&v!=="reset"||r.removeAttribute("value"),s!=null?Wu(r,v,rn(s)):o!=null?Wu(r,v,rn(o)):u!=null&&r.removeAttribute("value"),d==null&&p!=null&&(r.defaultChecked=!!p),d!=null&&(r.checked=d&&typeof d!="function"&&typeof d!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.name=""+rn(b):r.removeAttribute("name")}function Ad(r,s,o,u,d,p,v,b){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){nt(r);return}o=o!=null?""+rn(o):"",s=s!=null?""+rn(s):o,b||s===r.value||(r.value=s),r.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=b?r.checked:!!u,r.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.name=v),nt(r)}function Wu(r,s,o){s==="number"&&or(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function bs(r,s,o,u){if(r=r.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<r.length;o++)d=s.hasOwnProperty("$"+r[o].value),r[o].selected!==d&&(r[o].selected=d),d&&u&&(r[o].defaultSelected=!0)}else{for(o=""+rn(o),s=null,d=0;d<r.length;d++){if(r[d].value===o){r[d].selected=!0,u&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function Rd(r,s,o){if(s!=null&&(s=""+rn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+rn(o):""}function Is(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(n(92));if(Qe(u)){if(1<u.length)throw Error(n(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=rn(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),nt(r)}function zn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var xd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xu(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||xd.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Ju(r,s,o){if(s!=null&&typeof s!="object")throw Error(n(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&Xu(r,d,u)}else for(var p in s)s.hasOwnProperty(p)&&Xu(r,p,s[p])}function Xo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ss=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(r){return Ss.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Vi(){}var Zu=null;function pi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var As=null,lr=null;function Ba(r){var s=mi(r);if(s&&(r=s.stateNode)){var o=r[nn]||null;e:switch(r=s.stateNode,s.type){case"input":if(Wo(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var d=u[nn]||null;if(!d)throw Error(n(90));Wo(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Ua(u)}break e;case"textarea":Rd(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&bs(r,!!o.multiple,s,!1)}}}var Zo=!1;function Rs(r,s,o){if(Zo)return r(s,o);Zo=!0;try{var u=r(s);return u}finally{if(Zo=!1,(As!==null||lr!==null)&&(bf(),As&&(s=As,r=lr,lr=As=null,Ba(s),r)))for(s=0;s<r.length;s++)Ba(r[s])}}function Mi(r,s){var o=r.stateNode;if(o===null)return null;var u=o[nn]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(n(231,s,typeof o));return o}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),za=!1;if(gi)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){za=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{za=!1}var ur=null,ec=null,Fa=null;function tc(){if(Fa)return Fa;var r,s=ec,o=s.length,u,d="value"in ur?ur.value:ur.textContent,p=d.length;for(r=0;r<o&&s[r]===d[r];r++);var v=o-r;for(u=1;u<=v&&s[o-u]===d[p-u];u++);return Fa=d.slice(r,1<u?1-u:void 0)}function qa(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Ur(){return!0}function Li(){return!1}function cn(r){function s(o,u,d,p,v){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var b in r)r.hasOwnProperty(b)&&(o=r[b],this[b]=o?o(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ur:Li,this.isPropagationStopped=Li,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),s}var jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=cn(jr),xs=T({},jr,{view:0,detail:0}),nc=cn(xs),Cs,el,hr,tl=T({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ns,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==hr&&(hr&&r.type==="mousemove"?(Cs=r.screenX-hr.screenX,el=r.screenY-hr.screenY):el=Cs=0,hr=r),Cs)},movementY:function(r){return"movementY"in r?r.movementY:el}}),ic=cn(tl),Ha=T({},tl,{dataTransfer:0}),Nd=cn(Ha),Dd=T({},xs,{relatedTarget:0}),Ga=cn(Dd),rc=T({},jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Pd=cn(rc),nl=T({},jr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Od=cn(nl),kd=T({},jr,{data:0}),dr=cn(kd),Vd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Md={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ld={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ud(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Ld[r])?!!s[r]:!1}function Ns(){return Ud}var Dn=T({},xs,{key:function(r){if(r.key){var s=Vd[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=qa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Md[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ns,charCode:function(r){return r.type==="keypress"?qa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?qa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),jd=cn(Dn),Bd=T({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Br=cn(Bd),h=T({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ns}),_=cn(h),E=T({},jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=cn(E),z=T({},tl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=cn(z),de=T({},jr,{newState:0,oldState:0}),Ve=cn(de),Vt=[9,13,27,32],Ze=gi&&"CompositionEvent"in window,vt=null;gi&&"documentMode"in document&&(vt=document.documentMode);var _i=gi&&"TextEvent"in window&&!vt,fr=gi&&(!Ze||vt&&8<vt&&11>=vt),Ui=" ",ji=!1;function Ka(r,s){switch(r){case"keyup":return Vt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function il(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var rl=!1;function bC(r,s){switch(r){case"compositionend":return il(s);case"keypress":return s.which!==32?null:(ji=!0,Ui);case"textInput":return r=s.data,r===Ui&&ji?null:r;default:return null}}function IC(r,s){if(rl)return r==="compositionend"||!Ze&&Ka(r,s)?(r=tc(),Fa=ec=ur=null,rl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return fr&&s.locale!=="ko"?null:s.data;default:return null}}var SC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KT(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!SC[r.type]:s==="textarea"}function QT(r,s,o,u){As?lr?lr.push(u):lr=[u]:As=u,s=Nf(s,"onChange"),0<s.length&&(o=new cr("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var sc=null,ac=null;function AC(r){Cw(r,0)}function zd(r){var s=Xn(r);if(Ua(s))return r}function $T(r,s){if(r==="change")return s}var YT=!1;if(gi){var Lp;if(gi){var Up="oninput"in document;if(!Up){var WT=document.createElement("div");WT.setAttribute("oninput","return;"),Up=typeof WT.oninput=="function"}Lp=Up}else Lp=!1;YT=Lp&&(!document.documentMode||9<document.documentMode)}function XT(){sc&&(sc.detachEvent("onpropertychange",JT),ac=sc=null)}function JT(r){if(r.propertyName==="value"&&zd(ac)){var s=[];QT(s,ac,r,pi(r)),Rs(AC,s)}}function RC(r,s,o){r==="focusin"?(XT(),sc=s,ac=o,sc.attachEvent("onpropertychange",JT)):r==="focusout"&&XT()}function xC(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return zd(ac)}function CC(r,s){if(r==="click")return zd(s)}function NC(r,s){if(r==="input"||r==="change")return zd(s)}function DC(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Zn=typeof Object.is=="function"?Object.is:DC;function oc(r,s){if(Zn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!Bt.call(s,d)||!Zn(r[d],s[d]))return!1}return!0}function ZT(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function eE(r,s){var o=ZT(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ZT(o)}}function tE(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?tE(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function nE(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=or(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=or(r.document)}return s}function jp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var PC=gi&&"documentMode"in document&&11>=document.documentMode,sl=null,Bp=null,lc=null,zp=!1;function iE(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;zp||sl==null||sl!==or(u)||(u=sl,"selectionStart"in u&&jp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),lc&&oc(lc,u)||(lc=u,u=Nf(Bp,"onSelect"),0<u.length&&(s=new cr("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=sl)))}function Qa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var al={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},Fp={},rE={};gi&&(rE=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function $a(r){if(Fp[r])return Fp[r];if(!al[r])return r;var s=al[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in rE)return Fp[r]=s[o];return r}var sE=$a("animationend"),aE=$a("animationiteration"),oE=$a("animationstart"),OC=$a("transitionrun"),kC=$a("transitionstart"),VC=$a("transitioncancel"),lE=$a("transitionend"),uE=new Map,qp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qp.push("scrollEnd");function Bi(r,s){uE.set(r,s),sr(s,[r])}var Fd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},yi=[],ol=0,Hp=0;function qd(){for(var r=ol,s=Hp=ol=0;s<r;){var o=yi[s];yi[s++]=null;var u=yi[s];yi[s++]=null;var d=yi[s];yi[s++]=null;var p=yi[s];if(yi[s++]=null,u!==null&&d!==null){var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}p!==0&&cE(o,d,p)}}function Hd(r,s,o,u){yi[ol++]=r,yi[ol++]=s,yi[ol++]=o,yi[ol++]=u,Hp|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Gp(r,s,o,u){return Hd(r,s,o,u),Gd(r)}function Ya(r,s){return Hd(r,null,null,s),Gd(r)}function cE(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var d=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(d=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,d&&s!==null&&(d=31-kt(o),r=p.hiddenUpdates,u=r[d],u===null?r[d]=[s]:u.push(s),s.lane=o|536870912),p):null}function Gd(r){if(50<Nc)throw Nc=0,e_=null,Error(n(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var ll={};function MC(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(r,s,o,u){return new MC(r,s,o,u)}function Kp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function zr(r,s){var o=r.alternate;return o===null?(o=ei(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function hE(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Kd(r,s,o,u,d,p){var v=0;if(u=r,typeof r=="function")Kp(r)&&(v=1);else if(typeof r=="string")v=zN(r,o,Y.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case C:return r=ei(31,o,s,d),r.elementType=C,r.lanes=p,r;case B:return Wa(o.children,d,p,s);case U:v=8,d|=24;break;case ne:return r=ei(12,o,s,d|2),r.elementType=ne,r.lanes=p,r;case Ae:return r=ei(13,o,s,d),r.elementType=Ae,r.lanes=p,r;case Ee:return r=ei(19,o,s,d),r.elementType=Ee,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case se:v=10;break e;case ie:v=9;break e;case ge:v=11;break e;case x:v=14;break e;case R:v=16,u=null;break e}v=29,o=Error(n(130,r===null?"null":typeof r,"")),u=null}return s=ei(v,o,s,d),s.elementType=r,s.type=u,s.lanes=p,s}function Wa(r,s,o,u){return r=ei(7,r,u,s),r.lanes=o,r}function Qp(r,s,o){return r=ei(6,r,null,s),r.lanes=o,r}function dE(r){var s=ei(18,null,null,0);return s.stateNode=r,s}function $p(r,s,o){return s=ei(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var fE=new WeakMap;function vi(r,s){if(typeof r=="object"&&r!==null){var o=fE.get(r);return o!==void 0?o:(s={value:r,source:s,stack:ju(s)},fE.set(r,s),s)}return{value:r,source:s,stack:ju(s)}}var ul=[],cl=0,Qd=null,uc=0,Ti=[],Ei=0,Ds=null,mr=1,pr="";function Fr(r,s){ul[cl++]=uc,ul[cl++]=Qd,Qd=r,uc=s}function mE(r,s,o){Ti[Ei++]=mr,Ti[Ei++]=pr,Ti[Ei++]=Ds,Ds=r;var u=mr;r=pr;var d=32-kt(u)-1;u&=~(1<<d),o+=1;var p=32-kt(s)+d;if(30<p){var v=d-d%5;p=(u&(1<<v)-1).toString(32),u>>=v,d-=v,mr=1<<32-kt(s)+d|o<<d|u,pr=p+r}else mr=1<<p|o<<d|u,pr=r}function Yp(r){r.return!==null&&(Fr(r,1),mE(r,1,0))}function Wp(r){for(;r===Qd;)Qd=ul[--cl],ul[cl]=null,uc=ul[--cl],ul[cl]=null;for(;r===Ds;)Ds=Ti[--Ei],Ti[Ei]=null,pr=Ti[--Ei],Ti[Ei]=null,mr=Ti[--Ei],Ti[Ei]=null}function pE(r,s){Ti[Ei++]=mr,Ti[Ei++]=pr,Ti[Ei++]=Ds,mr=s.id,pr=s.overflow,Ds=r}var hn=null,mt=null,Ke=!1,Ps=null,wi=!1,Xp=Error(n(519));function Os(r){var s=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cc(vi(s,r)),Xp}function gE(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Ft]=r,s[nn]=u,o){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(o=0;o<Pc.length;o++)Be(Pc[o],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Be("invalid",s),Ad(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Be("invalid",s);break;case"textarea":Be("invalid",s),Is(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Ow(s.textContent,o)?(u.popover!=null&&(Be("beforetoggle",s),Be("toggle",s)),u.onScroll!=null&&Be("scroll",s),u.onScrollEnd!=null&&Be("scrollend",s),u.onClick!=null&&(s.onclick=Vi),s=!0):s=!1,s||Os(r,!0)}function _E(r){for(hn=r.return;hn;)switch(hn.tag){case 5:case 31:case 13:wi=!1;return;case 27:case 3:wi=!0;return;default:hn=hn.return}}function hl(r){if(r!==hn)return!1;if(!Ke)return _E(r),Ke=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||p_(r.type,r.memoizedProps)),o=!o),o&&mt&&Os(r),_E(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));mt=Fw(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));mt=Fw(r)}else s===27?(s=mt,Qs(r.type)?(r=T_,T_=null,mt=r):mt=s):mt=hn?Ii(r.stateNode.nextSibling):null;return!0}function Xa(){mt=hn=null,Ke=!1}function Jp(){var r=Ps;return r!==null&&(Gn===null?Gn=r:Gn.push.apply(Gn,r),Ps=null),r}function cc(r){Ps===null?Ps=[r]:Ps.push(r)}var Zp=P(null),Ja=null,qr=null;function ks(r,s,o){he(Zp,s._currentValue),s._currentValue=o}function Hr(r){r._currentValue=Zp.current,X(Zp)}function eg(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function tg(r,s,o,u){var d=r.child;for(d!==null&&(d.return=r);d!==null;){var p=d.dependencies;if(p!==null){var v=d.child;p=p.firstContext;e:for(;p!==null;){var b=p;p=d;for(var N=0;N<s.length;N++)if(b.context===s[N]){p.lanes|=o,b=p.alternate,b!==null&&(b.lanes|=o),eg(p.return,o,r),u||(v=null);break e}p=b.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(n(341));v.lanes|=o,p=v.alternate,p!==null&&(p.lanes|=o),eg(v,o,r),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===r){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function dl(r,s,o,u){r=null;for(var d=s,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(n(387));if(v=v.memoizedProps,v!==null){var b=d.type;Zn(d.pendingProps.value,v.value)||(r!==null?r.push(b):r=[b])}}else if(d===ce.current){if(v=d.alternate,v===null)throw Error(n(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(r!==null?r.push(Lc):r=[Lc])}d=d.return}r!==null&&tg(s,r,o,u),s.flags|=262144}function $d(r){for(r=r.firstContext;r!==null;){if(!Zn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Za(r){Ja=r,qr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function dn(r){return yE(Ja,r)}function Yd(r,s){return Ja===null&&Za(r),yE(r,s)}function yE(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},qr===null){if(r===null)throw Error(n(308));qr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else qr=qr.next=s;return o}var LC=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},UC=i.unstable_scheduleCallback,jC=i.unstable_NormalPriority,Gt={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ng(){return{controller:new LC,data:new Map,refCount:0}}function hc(r){r.refCount--,r.refCount===0&&UC(jC,function(){r.controller.abort()})}var dc=null,ig=0,fl=0,ml=null;function BC(r,s){if(dc===null){var o=dc=[];ig=0,fl=a_(),ml={status:"pending",value:void 0,then:function(u){o.push(u)}}}return ig++,s.then(vE,vE),s}function vE(){if(--ig===0&&dc!==null){ml!==null&&(ml.status="fulfilled");var r=dc;dc=null,fl=0,ml=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function zC(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var TE=$.S;$.S=function(r,s){iw=Nn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&BC(r,s),TE!==null&&TE(r,s)};var eo=P(null);function rg(){var r=eo.current;return r!==null?r:ht.pooledCache}function Wd(r,s){s===null?he(eo,eo.current):he(eo,s.pool)}function EE(){var r=rg();return r===null?null:{parent:Gt._currentValue,pool:r}}var pl=Error(n(460)),sg=Error(n(474)),Xd=Error(n(542)),Jd={then:function(){}};function wE(r){return r=r.status,r==="fulfilled"||r==="rejected"}function bE(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Vi,Vi),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,SE(r),r;default:if(typeof s.status=="string")s.then(Vi,Vi);else{if(r=ht,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,SE(r),r}throw no=s,pl}}function to(r){try{var s=r._init;return s(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(no=o,pl):o}}var no=null;function IE(){if(no===null)throw Error(n(459));var r=no;return no=null,r}function SE(r){if(r===pl||r===Xd)throw Error(n(483))}var gl=null,fc=0;function Zd(r){var s=fc;return fc+=1,gl===null&&(gl=[]),bE(gl,r,s)}function mc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function ef(r,s){throw s.$$typeof===I?Error(n(525)):(r=Object.prototype.toString.call(s),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function AE(r){function s(L,k){if(r){var q=L.deletions;q===null?(L.deletions=[k],L.flags|=16):q.push(k)}}function o(L,k){if(!r)return null;for(;k!==null;)s(L,k),k=k.sibling;return null}function u(L){for(var k=new Map;L!==null;)L.key!==null?k.set(L.key,L):k.set(L.index,L),L=L.sibling;return k}function d(L,k){return L=zr(L,k),L.index=0,L.sibling=null,L}function p(L,k,q){return L.index=q,r?(q=L.alternate,q!==null?(q=q.index,q<k?(L.flags|=67108866,k):q):(L.flags|=67108866,k)):(L.flags|=1048576,k)}function v(L){return r&&L.alternate===null&&(L.flags|=67108866),L}function b(L,k,q,Z){return k===null||k.tag!==6?(k=Qp(q,L.mode,Z),k.return=L,k):(k=d(k,q),k.return=L,k)}function N(L,k,q,Z){var xe=q.type;return xe===B?J(L,k,q.props.children,Z,q.key):k!==null&&(k.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&to(xe)===k.type)?(k=d(k,q.props),mc(k,q),k.return=L,k):(k=Kd(q.type,q.key,q.props,null,L.mode,Z),mc(k,q),k.return=L,k)}function H(L,k,q,Z){return k===null||k.tag!==4||k.stateNode.containerInfo!==q.containerInfo||k.stateNode.implementation!==q.implementation?(k=$p(q,L.mode,Z),k.return=L,k):(k=d(k,q.children||[]),k.return=L,k)}function J(L,k,q,Z,xe){return k===null||k.tag!==7?(k=Wa(q,L.mode,Z,xe),k.return=L,k):(k=d(k,q),k.return=L,k)}function ee(L,k,q){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Qp(""+k,L.mode,q),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case D:return q=Kd(k.type,k.key,k.props,null,L.mode,q),mc(q,k),q.return=L,q;case F:return k=$p(k,L.mode,q),k.return=L,k;case R:return k=to(k),ee(L,k,q)}if(Qe(k)||M(k))return k=Wa(k,L.mode,q,null),k.return=L,k;if(typeof k.then=="function")return ee(L,Zd(k),q);if(k.$$typeof===se)return ee(L,Yd(L,k),q);ef(L,k)}return null}function G(L,k,q,Z){var xe=k!==null?k.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return xe!==null?null:b(L,k,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case D:return q.key===xe?N(L,k,q,Z):null;case F:return q.key===xe?H(L,k,q,Z):null;case R:return q=to(q),G(L,k,q,Z)}if(Qe(q)||M(q))return xe!==null?null:J(L,k,q,Z,null);if(typeof q.then=="function")return G(L,k,Zd(q),Z);if(q.$$typeof===se)return G(L,k,Yd(L,q),Z);ef(L,q)}return null}function W(L,k,q,Z,xe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(q)||null,b(k,L,""+Z,xe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case D:return L=L.get(Z.key===null?q:Z.key)||null,N(k,L,Z,xe);case F:return L=L.get(Z.key===null?q:Z.key)||null,H(k,L,Z,xe);case R:return Z=to(Z),W(L,k,q,Z,xe)}if(Qe(Z)||M(Z))return L=L.get(q)||null,J(k,L,Z,xe,null);if(typeof Z.then=="function")return W(L,k,q,Zd(Z),xe);if(Z.$$typeof===se)return W(L,k,q,Yd(k,Z),xe);ef(k,Z)}return null}function Te(L,k,q,Z){for(var xe=null,Xe=null,be=k,Ue=k=0,He=null;be!==null&&Ue<q.length;Ue++){be.index>Ue?(He=be,be=null):He=be.sibling;var Je=G(L,be,q[Ue],Z);if(Je===null){be===null&&(be=He);break}r&&be&&Je.alternate===null&&s(L,be),k=p(Je,k,Ue),Xe===null?xe=Je:Xe.sibling=Je,Xe=Je,be=He}if(Ue===q.length)return o(L,be),Ke&&Fr(L,Ue),xe;if(be===null){for(;Ue<q.length;Ue++)be=ee(L,q[Ue],Z),be!==null&&(k=p(be,k,Ue),Xe===null?xe=be:Xe.sibling=be,Xe=be);return Ke&&Fr(L,Ue),xe}for(be=u(be);Ue<q.length;Ue++)He=W(be,L,Ue,q[Ue],Z),He!==null&&(r&&He.alternate!==null&&be.delete(He.key===null?Ue:He.key),k=p(He,k,Ue),Xe===null?xe=He:Xe.sibling=He,Xe=He);return r&&be.forEach(function(Js){return s(L,Js)}),Ke&&Fr(L,Ue),xe}function Ce(L,k,q,Z){if(q==null)throw Error(n(151));for(var xe=null,Xe=null,be=k,Ue=k=0,He=null,Je=q.next();be!==null&&!Je.done;Ue++,Je=q.next()){be.index>Ue?(He=be,be=null):He=be.sibling;var Js=G(L,be,Je.value,Z);if(Js===null){be===null&&(be=He);break}r&&be&&Js.alternate===null&&s(L,be),k=p(Js,k,Ue),Xe===null?xe=Js:Xe.sibling=Js,Xe=Js,be=He}if(Je.done)return o(L,be),Ke&&Fr(L,Ue),xe;if(be===null){for(;!Je.done;Ue++,Je=q.next())Je=ee(L,Je.value,Z),Je!==null&&(k=p(Je,k,Ue),Xe===null?xe=Je:Xe.sibling=Je,Xe=Je);return Ke&&Fr(L,Ue),xe}for(be=u(be);!Je.done;Ue++,Je=q.next())Je=W(be,L,Ue,Je.value,Z),Je!==null&&(r&&Je.alternate!==null&&be.delete(Je.key===null?Ue:Je.key),k=p(Je,k,Ue),Xe===null?xe=Je:Xe.sibling=Je,Xe=Je);return r&&be.forEach(function(JN){return s(L,JN)}),Ke&&Fr(L,Ue),xe}function ct(L,k,q,Z){if(typeof q=="object"&&q!==null&&q.type===B&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case D:e:{for(var xe=q.key;k!==null;){if(k.key===xe){if(xe=q.type,xe===B){if(k.tag===7){o(L,k.sibling),Z=d(k,q.props.children),Z.return=L,L=Z;break e}}else if(k.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&to(xe)===k.type){o(L,k.sibling),Z=d(k,q.props),mc(Z,q),Z.return=L,L=Z;break e}o(L,k);break}else s(L,k);k=k.sibling}q.type===B?(Z=Wa(q.props.children,L.mode,Z,q.key),Z.return=L,L=Z):(Z=Kd(q.type,q.key,q.props,null,L.mode,Z),mc(Z,q),Z.return=L,L=Z)}return v(L);case F:e:{for(xe=q.key;k!==null;){if(k.key===xe)if(k.tag===4&&k.stateNode.containerInfo===q.containerInfo&&k.stateNode.implementation===q.implementation){o(L,k.sibling),Z=d(k,q.children||[]),Z.return=L,L=Z;break e}else{o(L,k);break}else s(L,k);k=k.sibling}Z=$p(q,L.mode,Z),Z.return=L,L=Z}return v(L);case R:return q=to(q),ct(L,k,q,Z)}if(Qe(q))return Te(L,k,q,Z);if(M(q)){if(xe=M(q),typeof xe!="function")throw Error(n(150));return q=xe.call(q),Ce(L,k,q,Z)}if(typeof q.then=="function")return ct(L,k,Zd(q),Z);if(q.$$typeof===se)return ct(L,k,Yd(L,q),Z);ef(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,k!==null&&k.tag===6?(o(L,k.sibling),Z=d(k,q),Z.return=L,L=Z):(o(L,k),Z=Qp(q,L.mode,Z),Z.return=L,L=Z),v(L)):o(L,k)}return function(L,k,q,Z){try{fc=0;var xe=ct(L,k,q,Z);return gl=null,xe}catch(be){if(be===pl||be===Xd)throw be;var Xe=ei(29,be,null,L.mode);return Xe.lanes=Z,Xe.return=L,Xe}finally{}}}var io=AE(!0),RE=AE(!1),Vs=!1;function ag(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function og(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ms(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ls(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(et&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Gd(r),cE(r,null,o),s}return Hd(r,u,s,o),Gd(r)}function pc(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Fu(r,o)}}function lg(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?d=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?d=p=s:p=p.next=s}else d=p=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var ug=!1;function gc(){if(ug){var r=ml;if(r!==null)throw r}}function _c(r,s,o,u){ug=!1;var d=r.updateQueue;Vs=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var N=b,H=N.next;N.next=null,v===null?p=H:v.next=H,v=N;var J=r.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==v&&(b===null?J.firstBaseUpdate=H:b.next=H,J.lastBaseUpdate=N))}if(p!==null){var ee=d.baseState;v=0,J=H=N=null,b=p;do{var G=b.lane&-536870913,W=G!==b.lane;if(W?(qe&G)===G:(u&G)===G){G!==0&&G===fl&&(ug=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Te=r,Ce=b;G=s;var ct=o;switch(Ce.tag){case 1:if(Te=Ce.payload,typeof Te=="function"){ee=Te.call(ct,ee,G);break e}ee=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ce.payload,G=typeof Te=="function"?Te.call(ct,ee,G):Te,G==null)break e;ee=T({},ee,G);break e;case 2:Vs=!0}}G=b.callback,G!==null&&(r.flags|=64,W&&(r.flags|=8192),W=d.callbacks,W===null?d.callbacks=[G]:W.push(G))}else W={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(H=J=W,N=ee):J=J.next=W,v|=G;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;W=b,b=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);J===null&&(N=ee),d.baseState=N,d.firstBaseUpdate=H,d.lastBaseUpdate=J,p===null&&(d.shared.lanes=0),Fs|=v,r.lanes=v,r.memoizedState=ee}}function xE(r,s){if(typeof r!="function")throw Error(n(191,r));r.call(s)}function CE(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)xE(o[r],s)}var _l=P(null),tf=P(0);function NE(r,s){r=Zr,he(tf,r),he(_l,s),Zr=r|s.baseLanes}function cg(){he(tf,Zr),he(_l,_l.current)}function hg(){Zr=tf.current,X(_l),X(tf)}var ti=P(null),bi=null;function Us(r){var s=r.alternate;he(Mt,Mt.current&1),he(ti,r),bi===null&&(s===null||_l.current!==null||s.memoizedState!==null)&&(bi=r)}function dg(r){he(Mt,Mt.current),he(ti,r),bi===null&&(bi=r)}function DE(r){r.tag===22?(he(Mt,Mt.current),he(ti,r),bi===null&&(bi=r)):js()}function js(){he(Mt,Mt.current),he(ti,ti.current)}function ni(r){X(ti),bi===r&&(bi=null),X(Mt)}var Mt=P(0);function nf(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||y_(o)||v_(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Gr=0,Me=null,lt=null,Kt=null,rf=!1,yl=!1,ro=!1,sf=0,yc=0,vl=null,FC=0;function xt(){throw Error(n(321))}function fg(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Zn(r[o],s[o]))return!1;return!0}function mg(r,s,o,u,d,p){return Gr=p,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=r===null||r.memoizedState===null?m0:Cg,ro=!1,p=o(u,d),ro=!1,yl&&(p=OE(s,o,u,d)),PE(r),p}function PE(r){$.H=Ec;var s=lt!==null&&lt.next!==null;if(Gr=0,Kt=lt=Me=null,rf=!1,yc=0,vl=null,s)throw Error(n(300));r===null||Qt||(r=r.dependencies,r!==null&&$d(r)&&(Qt=!0))}function OE(r,s,o,u){Me=r;var d=0;do{if(yl&&(vl=null),yc=0,yl=!1,25<=d)throw Error(n(301));if(d+=1,Kt=lt=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}$.H=p0,p=s(o,u)}while(yl);return p}function qC(){var r=$.H,s=r.useState()[0];return s=typeof s.then=="function"?vc(s):s,r=r.useState()[0],(lt!==null?lt.memoizedState:null)!==r&&(Me.flags|=1024),s}function pg(){var r=sf!==0;return sf=0,r}function gg(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function _g(r){if(rf){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}rf=!1}Gr=0,Kt=lt=Me=null,yl=!1,yc=sf=0,vl=null}function Pn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Me.memoizedState=Kt=r:Kt=Kt.next=r,Kt}function Lt(){if(lt===null){var r=Me.alternate;r=r!==null?r.memoizedState:null}else r=lt.next;var s=Kt===null?Me.memoizedState:Kt.next;if(s!==null)Kt=s,lt=r;else{if(r===null)throw Me.alternate===null?Error(n(467)):Error(n(310));lt=r,r={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Kt===null?Me.memoizedState=Kt=r:Kt=Kt.next=r}return Kt}function af(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vc(r){var s=yc;return yc+=1,vl===null&&(vl=[]),r=bE(vl,r,s),s=Me,(Kt===null?s.memoizedState:Kt.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?m0:Cg),r}function of(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return vc(r);if(r.$$typeof===se)return dn(r)}throw Error(n(438,String(r)))}function yg(r){var s=null,o=Me.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=af(),Me.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=V;return s.index++,o}function Kr(r,s){return typeof s=="function"?s(r):s}function lf(r){var s=Lt();return vg(s,lt,r)}function vg(r,s,o){var u=r.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=o;var d=r.baseQueue,p=u.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}s.baseQueue=d=p,u.pending=null}if(p=r.baseState,d===null)r.memoizedState=p;else{s=d.next;var b=v=null,N=null,H=s,J=!1;do{var ee=H.lane&-536870913;if(ee!==H.lane?(qe&ee)===ee:(Gr&ee)===ee){var G=H.revertLane;if(G===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ee===fl&&(J=!0);else if((Gr&G)===G){H=H.next,G===fl&&(J=!0);continue}else ee={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},N===null?(b=N=ee,v=p):N=N.next=ee,Me.lanes|=G,Fs|=G;ee=H.action,ro&&o(p,ee),p=H.hasEagerState?H.eagerState:o(p,ee)}else G={lane:ee,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},N===null?(b=N=G,v=p):N=N.next=G,Me.lanes|=ee,Fs|=ee;H=H.next}while(H!==null&&H!==s);if(N===null?v=p:N.next=b,!Zn(p,r.memoizedState)&&(Qt=!0,J&&(o=ml,o!==null)))throw o;r.memoizedState=p,r.baseState=v,r.baseQueue=N,u.lastRenderedState=p}return d===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Tg(r){var s=Lt(),o=s.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=r;var u=o.dispatch,d=o.pending,p=s.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do p=r(p,v.action),v=v.next;while(v!==d);Zn(p,s.memoizedState)||(Qt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function kE(r,s,o){var u=Me,d=Lt(),p=Ke;if(p){if(o===void 0)throw Error(n(407));o=o()}else o=s();var v=!Zn((lt||d).memoizedState,o);if(v&&(d.memoizedState=o,Qt=!0),d=d.queue,bg(LE.bind(null,u,d,r),[r]),d.getSnapshot!==s||v||Kt!==null&&Kt.memoizedState.tag&1){if(u.flags|=2048,Tl(9,{destroy:void 0},ME.bind(null,u,d,o,s),null),ht===null)throw Error(n(349));p||(Gr&127)!==0||VE(u,s,o)}return o}function VE(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Me.updateQueue,s===null?(s=af(),Me.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function ME(r,s,o,u){s.value=o,s.getSnapshot=u,UE(s)&&jE(r)}function LE(r,s,o){return o(function(){UE(s)&&jE(r)})}function UE(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Zn(r,o)}catch{return!0}}function jE(r){var s=Ya(r,2);s!==null&&Kn(s,r,2)}function Eg(r){var s=Pn();if(typeof r=="function"){var o=r;if(r=o(),ro){fi(!0);try{o()}finally{fi(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kr,lastRenderedState:r},s}function BE(r,s,o,u){return r.baseState=o,vg(r,lt,typeof u=="function"?u:Kr)}function HC(r,s,o,u,d){if(hf(r))throw Error(n(485));if(r=s.action,r!==null){var p={payload:d,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};$.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,zE(s,p)):(p.next=o.next,s.pending=o.next=p)}}function zE(r,s){var o=s.action,u=s.payload,d=r.state;if(s.isTransition){var p=$.T,v={};$.T=v;try{var b=o(d,u),N=$.S;N!==null&&N(v,b),FE(r,s,b)}catch(H){wg(r,s,H)}finally{p!==null&&v.types!==null&&(p.types=v.types),$.T=p}}else try{p=o(d,u),FE(r,s,p)}catch(H){wg(r,s,H)}}function FE(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){qE(r,s,u)},function(u){return wg(r,s,u)}):qE(r,s,o)}function qE(r,s,o){s.status="fulfilled",s.value=o,HE(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,zE(r,o)))}function wg(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,HE(s),s=s.next;while(s!==u)}r.action=null}function HE(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function GE(r,s){return s}function KE(r,s){if(Ke){var o=ht.formState;if(o!==null){e:{var u=Me;if(Ke){if(mt){t:{for(var d=mt,p=wi;d.nodeType!==8;){if(!p){d=null;break t}if(d=Ii(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){mt=Ii(d.nextSibling),u=d.data==="F!";break e}}Os(u)}u=!1}u&&(s=o[0])}}return o=Pn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:GE,lastRenderedState:s},o.queue=u,o=h0.bind(null,Me,u),u.dispatch=o,u=Eg(!1),p=xg.bind(null,Me,!1,u.queue),u=Pn(),d={state:s,dispatch:null,action:r,pending:null},u.queue=d,o=HC.bind(null,Me,d,p,o),d.dispatch=o,u.memoizedState=r,[s,o,!1]}function QE(r){var s=Lt();return $E(s,lt,r)}function $E(r,s,o){if(s=vg(r,s,GE)[0],r=lf(Kr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=vc(s)}catch(v){throw v===pl?Xd:v}else u=s;s=Lt();var d=s.queue,p=d.dispatch;return o!==s.memoizedState&&(Me.flags|=2048,Tl(9,{destroy:void 0},GC.bind(null,d,o),null)),[u,p,r]}function GC(r,s){r.action=s}function YE(r){var s=Lt(),o=lt;if(o!==null)return $E(s,o,r);Lt(),s=s.memoizedState,o=Lt();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function Tl(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=Me.updateQueue,s===null&&(s=af(),Me.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function WE(){return Lt().memoizedState}function uf(r,s,o,u){var d=Pn();Me.flags|=r,d.memoizedState=Tl(1|s,{destroy:void 0},o,u===void 0?null:u)}function cf(r,s,o,u){var d=Lt();u=u===void 0?null:u;var p=d.memoizedState.inst;lt!==null&&u!==null&&fg(u,lt.memoizedState.deps)?d.memoizedState=Tl(s,p,o,u):(Me.flags|=r,d.memoizedState=Tl(1|s,p,o,u))}function XE(r,s){uf(8390656,8,r,s)}function bg(r,s){cf(2048,8,r,s)}function KC(r){Me.flags|=4;var s=Me.updateQueue;if(s===null)s=af(),Me.updateQueue=s,s.events=[r];else{var o=s.events;o===null?s.events=[r]:o.push(r)}}function JE(r){var s=Lt().memoizedState;return KC({ref:s,nextImpl:r}),function(){if((et&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}function ZE(r,s){return cf(4,2,r,s)}function e0(r,s){return cf(4,4,r,s)}function t0(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function n0(r,s,o){o=o!=null?o.concat([r]):null,cf(4,4,t0.bind(null,s,r),o)}function Ig(){}function i0(r,s){var o=Lt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&fg(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function r0(r,s){var o=Lt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&fg(s,u[1]))return u[0];if(u=r(),ro){fi(!0);try{r()}finally{fi(!1)}}return o.memoizedState=[u,s],u}function Sg(r,s,o){return o===void 0||(Gr&1073741824)!==0&&(qe&261930)===0?r.memoizedState=s:(r.memoizedState=o,r=sw(),Me.lanes|=r,Fs|=r,o)}function s0(r,s,o,u){return Zn(o,s)?o:_l.current!==null?(r=Sg(r,o,u),Zn(r,s)||(Qt=!0),r):(Gr&42)===0||(Gr&1073741824)!==0&&(qe&261930)===0?(Qt=!0,r.memoizedState=o):(r=sw(),Me.lanes|=r,Fs|=r,s)}function a0(r,s,o,u,d){var p=ue.p;ue.p=p!==0&&8>p?p:8;var v=$.T,b={};$.T=b,xg(r,!1,s,o);try{var N=d(),H=$.S;if(H!==null&&H(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=zC(N,u);Tc(r,s,J,si(r))}else Tc(r,s,u,si(r))}catch(ee){Tc(r,s,{then:function(){},status:"rejected",reason:ee},si())}finally{ue.p=p,v!==null&&b.types!==null&&(v.types=b.types),$.T=v}}function QC(){}function Ag(r,s,o,u){if(r.tag!==5)throw Error(n(476));var d=o0(r).queue;a0(r,d,s,ae,o===null?QC:function(){return l0(r),o(u)})}function o0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kr,lastRenderedState:ae},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kr,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function l0(r){var s=o0(r);s.next===null&&(s=r.alternate.memoizedState),Tc(r,s.next.queue,{},si())}function Rg(){return dn(Lc)}function u0(){return Lt().memoizedState}function c0(){return Lt().memoizedState}function $C(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=si();r=Ms(o);var u=Ls(s,r,o);u!==null&&(Kn(u,s,o),pc(u,s,o)),s={cache:ng()},r.payload=s;return}s=s.return}}function YC(r,s,o){var u=si();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},hf(r)?d0(s,o):(o=Gp(r,s,o,u),o!==null&&(Kn(o,r,u),f0(o,s,u)))}function h0(r,s,o){var u=si();Tc(r,s,o,u)}function Tc(r,s,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(hf(r))d0(s,d);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var v=s.lastRenderedState,b=p(v,o);if(d.hasEagerState=!0,d.eagerState=b,Zn(b,v))return Hd(r,s,d,0),ht===null&&qd(),!1}catch{}finally{}if(o=Gp(r,s,d,u),o!==null)return Kn(o,r,u),f0(o,s,u),!0}return!1}function xg(r,s,o,u){if(u={lane:2,revertLane:a_(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},hf(r)){if(s)throw Error(n(479))}else s=Gp(r,o,u,2),s!==null&&Kn(s,r,2)}function hf(r){var s=r.alternate;return r===Me||s!==null&&s===Me}function d0(r,s){yl=rf=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function f0(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Fu(r,o)}}var Ec={readContext:dn,use:of,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};Ec.useEffectEvent=xt;var m0={readContext:dn,use:of,useCallback:function(r,s){return Pn().memoizedState=[r,s===void 0?null:s],r},useContext:dn,useEffect:XE,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,uf(4194308,4,t0.bind(null,s,r),o)},useLayoutEffect:function(r,s){return uf(4194308,4,r,s)},useInsertionEffect:function(r,s){uf(4,2,r,s)},useMemo:function(r,s){var o=Pn();s=s===void 0?null:s;var u=r();if(ro){fi(!0);try{r()}finally{fi(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=Pn();if(o!==void 0){var d=o(s);if(ro){fi(!0);try{o(s)}finally{fi(!1)}}}else d=s;return u.memoizedState=u.baseState=d,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:d},u.queue=r,r=r.dispatch=YC.bind(null,Me,r),[u.memoizedState,r]},useRef:function(r){var s=Pn();return r={current:r},s.memoizedState=r},useState:function(r){r=Eg(r);var s=r.queue,o=h0.bind(null,Me,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Ig,useDeferredValue:function(r,s){var o=Pn();return Sg(o,r,s)},useTransition:function(){var r=Eg(!1);return r=a0.bind(null,Me,r.queue,!0,!1),Pn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=Me,d=Pn();if(Ke){if(o===void 0)throw Error(n(407));o=o()}else{if(o=s(),ht===null)throw Error(n(349));(qe&127)!==0||VE(u,s,o)}d.memoizedState=o;var p={value:o,getSnapshot:s};return d.queue=p,XE(LE.bind(null,u,p,r),[r]),u.flags|=2048,Tl(9,{destroy:void 0},ME.bind(null,u,p,o,s),null),o},useId:function(){var r=Pn(),s=ht.identifierPrefix;if(Ke){var o=pr,u=mr;o=(u&~(1<<32-kt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=sf++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=FC++,s="_"+s+"r_"+o.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Rg,useFormState:KE,useActionState:KE,useOptimistic:function(r){var s=Pn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=xg.bind(null,Me,!0,o),o.dispatch=s,[r,s]},useMemoCache:yg,useCacheRefresh:function(){return Pn().memoizedState=$C.bind(null,Me)},useEffectEvent:function(r){var s=Pn(),o={impl:r};return s.memoizedState=o,function(){if((et&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}},Cg={readContext:dn,use:of,useCallback:i0,useContext:dn,useEffect:bg,useImperativeHandle:n0,useInsertionEffect:ZE,useLayoutEffect:e0,useMemo:r0,useReducer:lf,useRef:WE,useState:function(){return lf(Kr)},useDebugValue:Ig,useDeferredValue:function(r,s){var o=Lt();return s0(o,lt.memoizedState,r,s)},useTransition:function(){var r=lf(Kr)[0],s=Lt().memoizedState;return[typeof r=="boolean"?r:vc(r),s]},useSyncExternalStore:kE,useId:u0,useHostTransitionStatus:Rg,useFormState:QE,useActionState:QE,useOptimistic:function(r,s){var o=Lt();return BE(o,lt,r,s)},useMemoCache:yg,useCacheRefresh:c0};Cg.useEffectEvent=JE;var p0={readContext:dn,use:of,useCallback:i0,useContext:dn,useEffect:bg,useImperativeHandle:n0,useInsertionEffect:ZE,useLayoutEffect:e0,useMemo:r0,useReducer:Tg,useRef:WE,useState:function(){return Tg(Kr)},useDebugValue:Ig,useDeferredValue:function(r,s){var o=Lt();return lt===null?Sg(o,r,s):s0(o,lt.memoizedState,r,s)},useTransition:function(){var r=Tg(Kr)[0],s=Lt().memoizedState;return[typeof r=="boolean"?r:vc(r),s]},useSyncExternalStore:kE,useId:u0,useHostTransitionStatus:Rg,useFormState:YE,useActionState:YE,useOptimistic:function(r,s){var o=Lt();return lt!==null?BE(o,lt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:yg,useCacheRefresh:c0};p0.useEffectEvent=JE;function Ng(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:T({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Dg={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=si(),d=Ms(u);d.payload=s,o!=null&&(d.callback=o),s=Ls(r,d,u),s!==null&&(Kn(s,r,u),pc(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=si(),d=Ms(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=Ls(r,d,u),s!==null&&(Kn(s,r,u),pc(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=si(),u=Ms(o);u.tag=2,s!=null&&(u.callback=s),s=Ls(r,u,o),s!==null&&(Kn(s,r,o),pc(s,r,o))}};function g0(r,s,o,u,d,p,v){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,v):s.prototype&&s.prototype.isPureReactComponent?!oc(o,u)||!oc(d,p):!0}function _0(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&Dg.enqueueReplaceState(s,s.state,null)}function so(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=T({},o));for(var d in r)o[d]===void 0&&(o[d]=r[d])}return o}function y0(r){Fd(r)}function v0(r){console.error(r)}function T0(r){Fd(r)}function df(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function E0(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Pg(r,s,o){return o=Ms(o),o.tag=3,o.payload={element:null},o.callback=function(){df(r,s)},o}function w0(r){return r=Ms(r),r.tag=3,r}function b0(r,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=u.value;r.payload=function(){return d(p)},r.callback=function(){E0(s,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(r.callback=function(){E0(s,o,u),typeof d!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function WC(r,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&dl(s,o,d,!0),o=ti.current,o!==null){switch(o.tag){case 31:case 13:return bi===null?If():o.alternate===null&&Ct===0&&(Ct=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===Jd?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),i_(r,u,d)),!1;case 22:return o.flags|=65536,u===Jd?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),i_(r,u,d)),!1}throw Error(n(435,o.tag))}return i_(r,u,d),If(),!1}if(Ke)return s=ti.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Xp&&(r=Error(n(422),{cause:u}),cc(vi(r,o)))):(u!==Xp&&(s=Error(n(423),{cause:u}),cc(vi(s,o))),r=r.current.alternate,r.flags|=65536,d&=-d,r.lanes|=d,u=vi(u,o),d=Pg(r.stateNode,u,d),lg(r,d),Ct!==4&&(Ct=2)),!1;var p=Error(n(520),{cause:u});if(p=vi(p,o),Cc===null?Cc=[p]:Cc.push(p),Ct!==4&&(Ct=2),s===null)return!0;u=vi(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=d&-d,o.lanes|=r,r=Pg(o.stateNode,u,r),lg(o,r),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(qs===null||!qs.has(p))))return o.flags|=65536,d&=-d,o.lanes|=d,d=w0(d),b0(d,r,o,u),lg(o,d),!1}o=o.return}while(o!==null);return!1}var Og=Error(n(461)),Qt=!1;function fn(r,s,o,u){s.child=r===null?RE(s,null,o,u):io(s,r.child,o,u)}function I0(r,s,o,u,d){o=o.render;var p=s.ref;if("ref"in u){var v={};for(var b in u)b!=="ref"&&(v[b]=u[b])}else v=u;return Za(s),u=mg(r,s,o,v,p,d),b=pg(),r!==null&&!Qt?(gg(r,s,d),Qr(r,s,d)):(Ke&&b&&Yp(s),s.flags|=1,fn(r,s,u,d),s.child)}function S0(r,s,o,u,d){if(r===null){var p=o.type;return typeof p=="function"&&!Kp(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,A0(r,s,p,u,d)):(r=Kd(o.type,null,u,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,!zg(r,d)){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:oc,o(v,u)&&r.ref===s.ref)return Qr(r,s,d)}return s.flags|=1,r=zr(p,u),r.ref=s.ref,r.return=s,s.child=r}function A0(r,s,o,u,d){if(r!==null){var p=r.memoizedProps;if(oc(p,u)&&r.ref===s.ref)if(Qt=!1,s.pendingProps=u=p,zg(r,d))(r.flags&131072)!==0&&(Qt=!0);else return s.lanes=r.lanes,Qr(r,s,d)}return kg(r,s,o,u,d)}function R0(r,s,o,u){var d=u.children,p=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,r!==null){for(u=s.child=r.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~p}else u=0,s.child=null;return x0(r,s,p,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Wd(s,p!==null?p.cachePool:null),p!==null?NE(s,p):cg(),DE(s);else return u=s.lanes=536870912,x0(r,s,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(Wd(s,p.cachePool),NE(s,p),js(),s.memoizedState=null):(r!==null&&Wd(s,null),cg(),js());return fn(r,s,d,o),s.child}function wc(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function x0(r,s,o,u,d){var p=rg();return p=p===null?null:{parent:Gt._currentValue,pool:p},s.memoizedState={baseLanes:o,cachePool:p},r!==null&&Wd(s,null),cg(),DE(s),r!==null&&dl(r,s,u,!0),s.childLanes=d,null}function ff(r,s){return s=pf({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function C0(r,s,o){return io(s,r.child,null,o),r=ff(s,s.pendingProps),r.flags|=2,ni(s),s.memoizedState=null,r}function XC(r,s,o){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Ke){if(u.mode==="hidden")return r=ff(s,u),s.lanes=536870912,wc(null,r);if(dg(s),(r=mt)?(r=zw(r,wi),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ds!==null?{id:mr,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},o=dE(r),o.return=s,s.child=o,hn=s,mt=null)):r=null,r===null)throw Os(s);return s.lanes=536870912,null}return ff(s,u)}var p=r.memoizedState;if(p!==null){var v=p.dehydrated;if(dg(s),d)if(s.flags&256)s.flags&=-257,s=C0(r,s,o);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(n(558));else if(Qt||dl(r,s,o,!1),d=(o&r.childLanes)!==0,Qt||d){if(u=ht,u!==null&&(v=qu(u,o),v!==0&&v!==p.retryLane))throw p.retryLane=v,Ya(r,v),Kn(u,r,v),Og;If(),s=C0(r,s,o)}else r=p.treeContext,mt=Ii(v.nextSibling),hn=s,Ke=!0,Ps=null,wi=!1,r!==null&&pE(s,r),s=ff(s,u),s.flags|=4096;return s}return r=zr(r.child,{mode:u.mode,children:u.children}),r.ref=s.ref,s.child=r,r.return=s,r}function mf(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(n(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function kg(r,s,o,u,d){return Za(s),o=mg(r,s,o,u,void 0,d),u=pg(),r!==null&&!Qt?(gg(r,s,d),Qr(r,s,d)):(Ke&&u&&Yp(s),s.flags|=1,fn(r,s,o,d),s.child)}function N0(r,s,o,u,d,p){return Za(s),s.updateQueue=null,o=OE(s,u,o,d),PE(r),u=pg(),r!==null&&!Qt?(gg(r,s,p),Qr(r,s,p)):(Ke&&u&&Yp(s),s.flags|=1,fn(r,s,o,p),s.child)}function D0(r,s,o,u,d){if(Za(s),s.stateNode===null){var p=ll,v=o.contextType;typeof v=="object"&&v!==null&&(p=dn(v)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Dg,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},ag(s),v=o.contextType,p.context=typeof v=="object"&&v!==null?dn(v):ll,p.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(Ng(s,o,v,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&Dg.enqueueReplaceState(p,p.state,null),_c(s,u,p,d),gc(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){p=s.stateNode;var b=s.memoizedProps,N=so(o,b);p.props=N;var H=p.context,J=o.contextType;v=ll,typeof J=="object"&&J!==null&&(v=dn(J));var ee=o.getDerivedStateFromProps;J=typeof ee=="function"||typeof p.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,J||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b||H!==v)&&_0(s,p,u,v),Vs=!1;var G=s.memoizedState;p.state=G,_c(s,u,p,d),gc(),H=s.memoizedState,b||G!==H||Vs?(typeof ee=="function"&&(Ng(s,o,ee,u),H=s.memoizedState),(N=Vs||g0(s,o,N,u,G,H,v))?(J||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),p.props=u,p.state=H,p.context=v,u=N):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,og(r,s),v=s.memoizedProps,J=so(o,v),p.props=J,ee=s.pendingProps,G=p.context,H=o.contextType,N=ll,typeof H=="object"&&H!==null&&(N=dn(H)),b=o.getDerivedStateFromProps,(H=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==ee||G!==N)&&_0(s,p,u,N),Vs=!1,G=s.memoizedState,p.state=G,_c(s,u,p,d),gc();var W=s.memoizedState;v!==ee||G!==W||Vs||r!==null&&r.dependencies!==null&&$d(r.dependencies)?(typeof b=="function"&&(Ng(s,o,b,u),W=s.memoizedState),(J=Vs||g0(s,o,J,u,G,W,N)||r!==null&&r.dependencies!==null&&$d(r.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,W,N),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,W,N)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=W),p.props=u,p.state=W,p.context=N,u=J):(typeof p.componentDidUpdate!="function"||v===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),u=!1)}return p=u,mf(r,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,r!==null&&u?(s.child=io(s,r.child,null,d),s.child=io(s,null,o,d)):fn(r,s,o,d),s.memoizedState=p.state,r=s.child):r=Qr(r,s,d),r}function P0(r,s,o,u){return Xa(),s.flags|=256,fn(r,s,o,u),s.child}var Vg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mg(r){return{baseLanes:r,cachePool:EE()}}function Lg(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=ri),r}function O0(r,s,o){var u=s.pendingProps,d=!1,p=(s.flags&128)!==0,v;if((v=p)||(v=r!==null&&r.memoizedState===null?!1:(Mt.current&2)!==0),v&&(d=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,r===null){if(Ke){if(d?Us(s):js(),(r=mt)?(r=zw(r,wi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ds!==null?{id:mr,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},o=dE(r),o.return=s,s.child=o,hn=s,mt=null)):r=null,r===null)throw Os(s);return v_(r)?s.lanes=32:s.lanes=536870912,null}var b=u.children;return u=u.fallback,d?(js(),d=s.mode,b=pf({mode:"hidden",children:b},d),u=Wa(u,d,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,u=s.child,u.memoizedState=Mg(o),u.childLanes=Lg(r,v,o),s.memoizedState=Vg,wc(null,u)):(Us(s),Ug(s,b))}var N=r.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(p)s.flags&256?(Us(s),s.flags&=-257,s=jg(r,s,o)):s.memoizedState!==null?(js(),s.child=r.child,s.flags|=128,s=null):(js(),b=u.fallback,d=s.mode,u=pf({mode:"visible",children:u.children},d),b=Wa(b,d,o,null),b.flags|=2,u.return=s,b.return=s,u.sibling=b,s.child=u,io(s,r.child,null,o),u=s.child,u.memoizedState=Mg(o),u.childLanes=Lg(r,v,o),s.memoizedState=Vg,s=wc(null,u));else if(Us(s),v_(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var H=v.dgst;v=H,u=Error(n(419)),u.stack="",u.digest=v,cc({value:u,source:null,stack:null}),s=jg(r,s,o)}else if(Qt||dl(r,s,o,!1),v=(o&r.childLanes)!==0,Qt||v){if(v=ht,v!==null&&(u=qu(v,o),u!==0&&u!==N.retryLane))throw N.retryLane=u,Ya(r,u),Kn(v,r,u),Og;y_(b)||If(),s=jg(r,s,o)}else y_(b)?(s.flags|=192,s.child=r.child,s=null):(r=N.treeContext,mt=Ii(b.nextSibling),hn=s,Ke=!0,Ps=null,wi=!1,r!==null&&pE(s,r),s=Ug(s,u.children),s.flags|=4096);return s}return d?(js(),b=u.fallback,d=s.mode,N=r.child,H=N.sibling,u=zr(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,H!==null?b=zr(H,b):(b=Wa(b,d,o,null),b.flags|=2),b.return=s,u.return=s,u.sibling=b,s.child=u,wc(null,u),u=s.child,b=r.child.memoizedState,b===null?b=Mg(o):(d=b.cachePool,d!==null?(N=Gt._currentValue,d=d.parent!==N?{parent:N,pool:N}:d):d=EE(),b={baseLanes:b.baseLanes|o,cachePool:d}),u.memoizedState=b,u.childLanes=Lg(r,v,o),s.memoizedState=Vg,wc(r.child,u)):(Us(s),o=r.child,r=o.sibling,o=zr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(v=s.deletions,v===null?(s.deletions=[r],s.flags|=16):v.push(r)),s.child=o,s.memoizedState=null,o)}function Ug(r,s){return s=pf({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function pf(r,s){return r=ei(22,r,null,s),r.lanes=0,r}function jg(r,s,o){return io(s,r.child,null,o),r=Ug(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function k0(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),eg(r.return,s,o)}function Bg(r,s,o,u,d,p){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:p}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=d,v.treeForkCount=p)}function V0(r,s,o){var u=s.pendingProps,d=u.revealOrder,p=u.tail;u=u.children;var v=Mt.current,b=(v&2)!==0;if(b?(v=v&1|2,s.flags|=128):v&=1,he(Mt,v),fn(r,s,u,o),u=Ke?uc:0,!b&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&k0(r,o,s);else if(r.tag===19)k0(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)r=o.alternate,r!==null&&nf(r)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),Bg(s,!1,d,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&nf(r)===null){s.child=d;break}r=d.sibling,d.sibling=o,o=d,d=r}Bg(s,!0,o,null,p,u);break;case"together":Bg(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Qr(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Fs|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(dl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(n(153));if(s.child!==null){for(r=s.child,o=zr(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=zr(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function zg(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&$d(r)))}function JC(r,s,o){switch(s.tag){case 3:Ne(s,s.stateNode.containerInfo),ks(s,Gt,r.memoizedState.cache),Xa();break;case 27:case 5:We(s);break;case 4:Ne(s,s.stateNode.containerInfo);break;case 10:ks(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,dg(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Us(s),s.flags|=128,null):(o&s.child.childLanes)!==0?O0(r,s,o):(Us(s),r=Qr(r,s,o),r!==null?r.sibling:null);Us(s);break;case 19:var d=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(dl(r,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return V0(r,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),he(Mt,Mt.current),u)break;return null;case 22:return s.lanes=0,R0(r,s,o,s.pendingProps);case 24:ks(s,Gt,r.memoizedState.cache)}return Qr(r,s,o)}function M0(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Qt=!0;else{if(!zg(r,o)&&(s.flags&128)===0)return Qt=!1,JC(r,s,o);Qt=(r.flags&131072)!==0}else Qt=!1,Ke&&(s.flags&1048576)!==0&&mE(s,uc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(r=to(s.elementType),s.type=r,typeof r=="function")Kp(r)?(u=so(r,u),s.tag=1,s=D0(null,s,r,u,o)):(s.tag=0,s=kg(null,s,r,u,o));else{if(r!=null){var d=r.$$typeof;if(d===ge){s.tag=11,s=I0(null,s,r,u,o);break e}else if(d===x){s.tag=14,s=S0(null,s,r,u,o);break e}}throw s=De(r)||r,Error(n(306,s,""))}}return s;case 0:return kg(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=so(u,s.pendingProps),D0(r,s,u,d,o);case 3:e:{if(Ne(s,s.stateNode.containerInfo),r===null)throw Error(n(387));u=s.pendingProps;var p=s.memoizedState;d=p.element,og(r,s),_c(s,u,null,o);var v=s.memoizedState;if(u=v.cache,ks(s,Gt,u),u!==p.cache&&tg(s,[Gt],o,!0),gc(),u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=P0(r,s,u,o);break e}else if(u!==d){d=vi(Error(n(424)),s),cc(d),s=P0(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(mt=Ii(r.firstChild),hn=s,Ke=!0,Ps=null,wi=!0,o=RE(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Xa(),u===d){s=Qr(r,s,o);break e}fn(r,s,u,o)}s=s.child}return s;case 26:return mf(r,s),r===null?(o=Qw(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ke||(o=s.type,r=s.pendingProps,u=Df(fe.current).createElement(o),u[Ft]=s,u[nn]=r,mn(u,o,r),qt(u),s.stateNode=u):s.memoizedState=Qw(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return We(s),r===null&&Ke&&(u=s.stateNode=Hw(s.type,s.pendingProps,fe.current),hn=s,wi=!0,d=mt,Qs(s.type)?(T_=d,mt=Ii(u.firstChild)):mt=d),fn(r,s,s.pendingProps.children,o),mf(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Ke&&((d=u=mt)&&(u=xN(u,s.type,s.pendingProps,wi),u!==null?(s.stateNode=u,hn=s,mt=Ii(u.firstChild),wi=!1,d=!0):d=!1),d||Os(s)),We(s),d=s.type,p=s.pendingProps,v=r!==null?r.memoizedProps:null,u=p.children,p_(d,p)?u=null:v!==null&&p_(d,v)&&(s.flags|=32),s.memoizedState!==null&&(d=mg(r,s,qC,null,null,o),Lc._currentValue=d),mf(r,s),fn(r,s,u,o),s.child;case 6:return r===null&&Ke&&((r=o=mt)&&(o=CN(o,s.pendingProps,wi),o!==null?(s.stateNode=o,hn=s,mt=null,r=!0):r=!1),r||Os(s)),null;case 13:return O0(r,s,o);case 4:return Ne(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=io(s,null,u,o):fn(r,s,u,o),s.child;case 11:return I0(r,s,s.type,s.pendingProps,o);case 7:return fn(r,s,s.pendingProps,o),s.child;case 8:return fn(r,s,s.pendingProps.children,o),s.child;case 12:return fn(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,ks(s,s.type,u.value),fn(r,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,Za(s),d=dn(d),u=u(d),s.flags|=1,fn(r,s,u,o),s.child;case 14:return S0(r,s,s.type,s.pendingProps,o);case 15:return A0(r,s,s.type,s.pendingProps,o);case 19:return V0(r,s,o);case 31:return XC(r,s,o);case 22:return R0(r,s,o,s.pendingProps);case 24:return Za(s),u=dn(Gt),r===null?(d=rg(),d===null&&(d=ht,p=ng(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=o),d=p),s.memoizedState={parent:u,cache:d},ag(s),ks(s,Gt,d)):((r.lanes&o)!==0&&(og(r,s),_c(s,null,null,o),gc()),d=r.memoizedState,p=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),ks(s,Gt,u)):(u=p.cache,ks(s,Gt,u),u!==d.cache&&tg(s,[Gt],o,!0))),fn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function $r(r){r.flags|=4}function Fg(r,s,o,u,d){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(d&335544128)===d)if(r.stateNode.complete)r.flags|=8192;else if(uw())r.flags|=8192;else throw no=Jd,sg}else r.flags&=-16777217}function L0(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Jw(s))if(uw())r.flags|=8192;else throw no=Jd,sg}function gf(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Ed():536870912,r.lanes|=s,Il|=s)}function bc(r,s){if(!Ke)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function pt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var d=r.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function ZC(r,s,o){var u=s.pendingProps;switch(Wp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(s),null;case 1:return pt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Hr(Gt),Re(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(hl(s)?$r(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jp())),pt(s),null;case 26:var d=s.type,p=s.memoizedState;return r===null?($r(s),p!==null?(pt(s),L0(s,p)):(pt(s),Fg(s,d,null,u,o))):p?p!==r.memoizedState?($r(s),pt(s),L0(s,p)):(pt(s),s.flags&=-16777217):(r=r.memoizedProps,r!==u&&$r(s),pt(s),Fg(s,d,r,u,o)),null;case 27:if(Cn(s),o=fe.current,d=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&$r(s);else{if(!u){if(s.stateNode===null)throw Error(n(166));return pt(s),null}r=Y.current,hl(s)?gE(s):(r=Hw(d,u,o),s.stateNode=r,$r(s))}return pt(s),null;case 5:if(Cn(s),d=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&$r(s);else{if(!u){if(s.stateNode===null)throw Error(n(166));return pt(s),null}if(p=Y.current,hl(s))gE(s);else{var v=Df(fe.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?v.createElement(d,{is:u.is}):v.createElement(d)}}p[Ft]=s,p[nn]=u;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=p;e:switch(mn(p,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&$r(s)}}return pt(s),Fg(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,o),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&$r(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(n(166));if(r=fe.current,hl(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,d=hn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}r[Ft]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Ow(r.nodeValue,o)),r||Os(s,!0)}else r=Df(r).createTextNode(u),r[Ft]=s,s.stateNode=r}return pt(s),null;case 31:if(o=s.memoizedState,r===null||r.memoizedState!==null){if(u=hl(s),o!==null){if(r===null){if(!u)throw Error(n(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[Ft]=s}else Xa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),r=!1}else o=Jp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return s.flags&256?(ni(s),s):(ni(s),null);if((s.flags&128)!==0)throw Error(n(558))}return pt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(d=hl(s),u!==null&&u.dehydrated!==null){if(r===null){if(!d)throw Error(n(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));d[Ft]=s}else Xa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),d=!1}else d=Jp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(ni(s),s):(ni(s),null)}return ni(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==d&&(u.flags|=2048)),o!==r&&o&&(s.child.flags|=8192),gf(s,s.updateQueue),pt(s),null);case 4:return Re(),r===null&&c_(s.stateNode.containerInfo),pt(s),null;case 10:return Hr(s.type),pt(s),null;case 19:if(X(Mt),u=s.memoizedState,u===null)return pt(s),null;if(d=(s.flags&128)!==0,p=u.rendering,p===null)if(d)bc(u,!1);else{if(Ct!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(p=nf(r),p!==null){for(s.flags|=128,bc(u,!1),r=p.updateQueue,s.updateQueue=r,gf(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)hE(o,r),o=o.sibling;return he(Mt,Mt.current&1|2),Ke&&Fr(s,u.treeForkCount),s.child}r=r.sibling}u.tail!==null&&Nn()>Ef&&(s.flags|=128,d=!0,bc(u,!1),s.lanes=4194304)}else{if(!d)if(r=nf(p),r!==null){if(s.flags|=128,d=!0,r=r.updateQueue,s.updateQueue=r,gf(s,r),bc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!Ke)return pt(s),null}else 2*Nn()-u.renderingStartTime>Ef&&o!==536870912&&(s.flags|=128,d=!0,bc(u,!1),s.lanes=4194304);u.isBackwards?(p.sibling=s.child,s.child=p):(r=u.last,r!==null?r.sibling=p:s.child=p,u.last=p)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Nn(),r.sibling=null,o=Mt.current,he(Mt,d?o&1|2:o&1),Ke&&Fr(s,u.treeForkCount),r):(pt(s),null);case 22:case 23:return ni(s),hg(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(pt(s),s.subtreeFlags&6&&(s.flags|=8192)):pt(s),o=s.updateQueue,o!==null&&gf(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&X(eo),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Hr(Gt),pt(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function eN(r,s){switch(Wp(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Hr(Gt),Re(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Cn(s),null;case 31:if(s.memoizedState!==null){if(ni(s),s.alternate===null)throw Error(n(340));Xa()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(ni(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Xa()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return X(Mt),null;case 4:return Re(),null;case 10:return Hr(s.type),null;case 22:case 23:return ni(s),hg(),r!==null&&X(eo),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Hr(Gt),null;case 25:return null;default:return null}}function U0(r,s){switch(Wp(s),s.tag){case 3:Hr(Gt),Re();break;case 26:case 27:case 5:Cn(s);break;case 4:Re();break;case 31:s.memoizedState!==null&&ni(s);break;case 13:ni(s);break;case 19:X(Mt);break;case 10:Hr(s.type);break;case 22:case 23:ni(s),hg(),r!==null&&X(eo);break;case 24:Hr(Gt)}}function Ic(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&r)===r){u=void 0;var p=o.create,v=o.inst;u=p(),v.destroy=u}o=o.next}while(o!==d)}}catch(b){rt(s,s.return,b)}}function Bs(r,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var p=d.next;u=p;do{if((u.tag&r)===r){var v=u.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,d=s;var N=o,H=b;try{H()}catch(J){rt(d,N,J)}}}u=u.next}while(u!==p)}}catch(J){rt(s,s.return,J)}}function j0(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{CE(s,o)}catch(u){rt(r,r.return,u)}}}function B0(r,s,o){o.props=so(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){rt(r,s,u)}}function Sc(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(d){rt(r,s,d)}}function gr(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){rt(r,s,d)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){rt(r,s,d)}else o.current=null}function z0(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){rt(r,r.return,d)}}function qg(r,s,o){try{var u=r.stateNode;wN(u,r.type,o,s),u[nn]=s}catch(d){rt(r,r.return,d)}}function F0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Qs(r.type)||r.tag===4}function Hg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||F0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Qs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Gg(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Vi));else if(u!==4&&(u===27&&Qs(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Gg(r,s,o),r=r.sibling;r!==null;)Gg(r,s,o),r=r.sibling}function _f(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&Qs(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(_f(r,s,o),r=r.sibling;r!==null;)_f(r,s,o),r=r.sibling}function q0(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);mn(s,u,o),s[Ft]=r,s[nn]=o}catch(p){rt(r,r.return,p)}}var Yr=!1,$t=!1,Kg=!1,H0=typeof WeakSet=="function"?WeakSet:Set,sn=null;function tN(r,s){if(r=r.containerInfo,f_=Uf,r=nE(r),jp(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,b=-1,N=-1,H=0,J=0,ee=r,G=null;t:for(;;){for(var W;ee!==o||d!==0&&ee.nodeType!==3||(b=v+d),ee!==p||u!==0&&ee.nodeType!==3||(N=v+u),ee.nodeType===3&&(v+=ee.nodeValue.length),(W=ee.firstChild)!==null;)G=ee,ee=W;for(;;){if(ee===r)break t;if(G===o&&++H===d&&(b=v),G===p&&++J===u&&(N=v),(W=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=W}o=b===-1||N===-1?null:{start:b,end:N}}else o=null}o=o||{start:0,end:0}}else o=null;for(m_={focusedElem:r,selectionRange:o},Uf=!1,sn=s;sn!==null;)if(s=sn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,sn=r;else for(;sn!==null;){switch(s=sn,p=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)d=r[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=s,d=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Te=so(o.type,d);r=u.getSnapshotBeforeUpdate(Te,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ce){rt(o,o.return,Ce)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)__(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":__(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=s.sibling,r!==null){r.return=s.return,sn=r;break}sn=s.return}}function G0(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Xr(r,o),u&4&&Ic(5,o);break;case 1:if(Xr(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(v){rt(o,o.return,v)}else{var d=so(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(d,s,r.__reactInternalSnapshotBeforeUpdate)}catch(v){rt(o,o.return,v)}}u&64&&j0(o),u&512&&Sc(o,o.return);break;case 3:if(Xr(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{CE(r,s)}catch(v){rt(o,o.return,v)}}break;case 27:s===null&&u&4&&q0(o);case 26:case 5:Xr(r,o),s===null&&u&4&&z0(o),u&512&&Sc(o,o.return);break;case 12:Xr(r,o);break;case 31:Xr(r,o),u&4&&$0(r,o);break;case 13:Xr(r,o),u&4&&Y0(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=cN.bind(null,o),NN(r,o))));break;case 22:if(u=o.memoizedState!==null||Yr,!u){s=s!==null&&s.memoizedState!==null||$t,d=Yr;var p=$t;Yr=u,($t=s)&&!p?Jr(r,o,(o.subtreeFlags&8772)!==0):Xr(r,o),Yr=d,$t=p}break;case 30:break;default:Xr(r,o)}}function K0(r){var s=r.alternate;s!==null&&(r.alternate=null,K0(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&$o(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Tt=null,Fn=!1;function Wr(r,s,o){for(o=o.child;o!==null;)Q0(r,s,o),o=o.sibling}function Q0(r,s,o){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Di,o)}catch{}switch(o.tag){case 26:$t||gr(o,s),Wr(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:$t||gr(o,s);var u=Tt,d=Fn;Qs(o.type)&&(Tt=o.stateNode,Fn=!1),Wr(r,s,o),kc(o.stateNode),Tt=u,Fn=d;break;case 5:$t||gr(o,s);case 6:if(u=Tt,d=Fn,Tt=null,Wr(r,s,o),Tt=u,Fn=d,Tt!==null)if(Fn)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(o.stateNode)}catch(p){rt(o,s,p)}else try{Tt.removeChild(o.stateNode)}catch(p){rt(o,s,p)}break;case 18:Tt!==null&&(Fn?(r=Tt,jw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Pl(r)):jw(Tt,o.stateNode));break;case 4:u=Tt,d=Fn,Tt=o.stateNode.containerInfo,Fn=!0,Wr(r,s,o),Tt=u,Fn=d;break;case 0:case 11:case 14:case 15:Bs(2,o,s),$t||Bs(4,o,s),Wr(r,s,o);break;case 1:$t||(gr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&B0(o,s,u)),Wr(r,s,o);break;case 21:Wr(r,s,o);break;case 22:$t=(u=$t)||o.memoizedState!==null,Wr(r,s,o),$t=u;break;default:Wr(r,s,o)}}function $0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Pl(r)}catch(o){rt(s,s.return,o)}}}function Y0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Pl(r)}catch(o){rt(s,s.return,o)}}function nN(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new H0),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new H0),s;default:throw Error(n(435,r.tag))}}function yf(r,s){var o=nN(r);s.forEach(function(u){if(!o.has(u)){o.add(u);var d=hN.bind(null,r,u);u.then(d,d)}})}function qn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],p=r,v=s,b=v;e:for(;b!==null;){switch(b.tag){case 27:if(Qs(b.type)){Tt=b.stateNode,Fn=!1;break e}break;case 5:Tt=b.stateNode,Fn=!1;break e;case 3:case 4:Tt=b.stateNode.containerInfo,Fn=!0;break e}b=b.return}if(Tt===null)throw Error(n(160));Q0(p,v,d),Tt=null,Fn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)W0(s,r),s=s.sibling}var zi=null;function W0(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:qn(s,r),Hn(r),u&4&&(Bs(3,r,r.return),Ic(3,r),Bs(5,r,r.return));break;case 1:qn(s,r),Hn(r),u&512&&($t||o===null||gr(o,o.return)),u&64&&Yr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=zi;if(qn(s,r),Hn(r),u&512&&($t||o===null||gr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":p=d.getElementsByTagName("title")[0],(!p||p[nr]||p[Ft]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(u),d.head.insertBefore(p,d.querySelector("head > title"))),mn(p,u,o),p[Ft]=r,qt(p),u=p;break e;case"link":var v=Ww("link","href",d).get(u+(o.href||""));if(v){for(var b=0;b<v.length;b++)if(p=v[b],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(b,1);break t}}p=d.createElement(u),mn(p,u,o),d.head.appendChild(p);break;case"meta":if(v=Ww("meta","content",d).get(u+(o.content||""))){for(b=0;b<v.length;b++)if(p=v[b],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(b,1);break t}}p=d.createElement(u),mn(p,u,o),d.head.appendChild(p);break;default:throw Error(n(468,u))}p[Ft]=r,qt(p),u=p}r.stateNode=u}else Xw(d,r.type,r.stateNode);else r.stateNode=Yw(d,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?Xw(d,r.type,r.stateNode):Yw(d,u,r.memoizedProps)):u===null&&r.stateNode!==null&&qg(r,r.memoizedProps,o.memoizedProps)}break;case 27:qn(s,r),Hn(r),u&512&&($t||o===null||gr(o,o.return)),o!==null&&u&4&&qg(r,r.memoizedProps,o.memoizedProps);break;case 5:if(qn(s,r),Hn(r),u&512&&($t||o===null||gr(o,o.return)),r.flags&32){d=r.stateNode;try{zn(d,"")}catch(Te){rt(r,r.return,Te)}}u&4&&r.stateNode!=null&&(d=r.memoizedProps,qg(r,d,o!==null?o.memoizedProps:d)),u&1024&&(Kg=!0);break;case 6:if(qn(s,r),Hn(r),u&4){if(r.stateNode===null)throw Error(n(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Te){rt(r,r.return,Te)}}break;case 3:if(kf=null,d=zi,zi=Pf(s.containerInfo),qn(s,r),zi=d,Hn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Pl(s.containerInfo)}catch(Te){rt(r,r.return,Te)}Kg&&(Kg=!1,X0(r));break;case 4:u=zi,zi=Pf(r.stateNode.containerInfo),qn(s,r),Hn(r),zi=u;break;case 12:qn(s,r),Hn(r);break;case 31:qn(s,r),Hn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,yf(r,u)));break;case 13:qn(s,r),Hn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Tf=Nn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,yf(r,u)));break;case 22:d=r.memoizedState!==null;var N=o!==null&&o.memoizedState!==null,H=Yr,J=$t;if(Yr=H||d,$t=J||N,qn(s,r),$t=J,Yr=H,Hn(r),u&8192)e:for(s=r.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||N||Yr||$t||ao(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){N=o=s;try{if(p=N.stateNode,d)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=N.stateNode;var ee=N.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Te){rt(N,N.return,Te)}}}else if(s.tag===6){if(o===null){N=s;try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch(Te){rt(N,N.return,Te)}}}else if(s.tag===18){if(o===null){N=s;try{var W=N.stateNode;d?Bw(W,!0):Bw(N.stateNode,!1)}catch(Te){rt(N,N.return,Te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,yf(r,o))));break;case 19:qn(s,r),Hn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,yf(r,u)));break;case 30:break;case 21:break;default:qn(s,r),Hn(r)}}function Hn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(F0(u)){o=u;break}u=u.return}if(o==null)throw Error(n(160));switch(o.tag){case 27:var d=o.stateNode,p=Hg(r);_f(r,p,d);break;case 5:var v=o.stateNode;o.flags&32&&(zn(v,""),o.flags&=-33);var b=Hg(r);_f(r,b,v);break;case 3:case 4:var N=o.stateNode.containerInfo,H=Hg(r);Gg(r,H,N);break;default:throw Error(n(161))}}catch(J){rt(r,r.return,J)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function X0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;X0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Xr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)G0(r,s.alternate,s),s=s.sibling}function ao(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Bs(4,s,s.return),ao(s);break;case 1:gr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&B0(s,s.return,o),ao(s);break;case 27:kc(s.stateNode);case 26:case 5:gr(s,s.return),ao(s);break;case 22:s.memoizedState===null&&ao(s);break;case 30:ao(s);break;default:ao(s)}r=r.sibling}}function Jr(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=r,p=s,v=p.flags;switch(p.tag){case 0:case 11:case 15:Jr(d,p,o),Ic(4,p);break;case 1:if(Jr(d,p,o),u=p,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(H){rt(u,u.return,H)}if(u=p,d=u.updateQueue,d!==null){var b=u.stateNode;try{var N=d.shared.hiddenCallbacks;if(N!==null)for(d.shared.hiddenCallbacks=null,d=0;d<N.length;d++)xE(N[d],b)}catch(H){rt(u,u.return,H)}}o&&v&64&&j0(p),Sc(p,p.return);break;case 27:q0(p);case 26:case 5:Jr(d,p,o),o&&u===null&&v&4&&z0(p),Sc(p,p.return);break;case 12:Jr(d,p,o);break;case 31:Jr(d,p,o),o&&v&4&&$0(d,p);break;case 13:Jr(d,p,o),o&&v&4&&Y0(d,p);break;case 22:p.memoizedState===null&&Jr(d,p,o),Sc(p,p.return);break;case 30:break;default:Jr(d,p,o)}s=s.sibling}}function Qg(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&hc(o))}function $g(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&hc(r))}function Fi(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)J0(r,s,o,u),s=s.sibling}function J0(r,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Fi(r,s,o,u),d&2048&&Ic(9,s);break;case 1:Fi(r,s,o,u);break;case 3:Fi(r,s,o,u),d&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&hc(r)));break;case 12:if(d&2048){Fi(r,s,o,u),r=s.stateNode;try{var p=s.memoizedProps,v=p.id,b=p.onPostCommit;typeof b=="function"&&b(v,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(N){rt(s,s.return,N)}}else Fi(r,s,o,u);break;case 31:Fi(r,s,o,u);break;case 13:Fi(r,s,o,u);break;case 23:break;case 22:p=s.stateNode,v=s.alternate,s.memoizedState!==null?p._visibility&2?Fi(r,s,o,u):Ac(r,s):p._visibility&2?Fi(r,s,o,u):(p._visibility|=2,El(r,s,o,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Qg(v,s);break;case 24:Fi(r,s,o,u),d&2048&&$g(s.alternate,s);break;default:Fi(r,s,o,u)}}function El(r,s,o,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=r,v=s,b=o,N=u,H=v.flags;switch(v.tag){case 0:case 11:case 15:El(p,v,b,N,d),Ic(8,v);break;case 23:break;case 22:var J=v.stateNode;v.memoizedState!==null?J._visibility&2?El(p,v,b,N,d):Ac(p,v):(J._visibility|=2,El(p,v,b,N,d)),d&&H&2048&&Qg(v.alternate,v);break;case 24:El(p,v,b,N,d),d&&H&2048&&$g(v.alternate,v);break;default:El(p,v,b,N,d)}s=s.sibling}}function Ac(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,d=u.flags;switch(u.tag){case 22:Ac(o,u),d&2048&&Qg(u.alternate,u);break;case 24:Ac(o,u),d&2048&&$g(u.alternate,u);break;default:Ac(o,u)}s=s.sibling}}var Rc=8192;function wl(r,s,o){if(r.subtreeFlags&Rc)for(r=r.child;r!==null;)Z0(r,s,o),r=r.sibling}function Z0(r,s,o){switch(r.tag){case 26:wl(r,s,o),r.flags&Rc&&r.memoizedState!==null&&FN(o,zi,r.memoizedState,r.memoizedProps);break;case 5:wl(r,s,o);break;case 3:case 4:var u=zi;zi=Pf(r.stateNode.containerInfo),wl(r,s,o),zi=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Rc,Rc=16777216,wl(r,s,o),Rc=u):wl(r,s,o));break;default:wl(r,s,o)}}function ew(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function xc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,nw(u,r)}ew(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)tw(r),r=r.sibling}function tw(r){switch(r.tag){case 0:case 11:case 15:xc(r),r.flags&2048&&Bs(9,r,r.return);break;case 3:xc(r);break;case 12:xc(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,vf(r)):xc(r);break;default:xc(r)}}function vf(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,nw(u,r)}ew(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Bs(8,s,s.return),vf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,vf(s));break;default:vf(s)}r=r.sibling}}function nw(r,s){for(;sn!==null;){var o=sn;switch(o.tag){case 0:case 11:case 15:Bs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:hc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,sn=u;else e:for(o=r;sn!==null;){u=sn;var d=u.sibling,p=u.return;if(K0(u),u===o){sn=null;break e}if(d!==null){d.return=p,sn=d;break e}sn=p}}}var iN={getCacheForType:function(r){var s=dn(Gt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o},cacheSignal:function(){return dn(Gt).controller.signal}},rN=typeof WeakMap=="function"?WeakMap:Map,et=0,ht=null,je=null,qe=0,it=0,ii=null,zs=!1,bl=!1,Yg=!1,Zr=0,Ct=0,Fs=0,oo=0,Wg=0,ri=0,Il=0,Cc=null,Gn=null,Xg=!1,Tf=0,iw=0,Ef=1/0,wf=null,qs=null,Zt=0,Hs=null,Sl=null,es=0,Jg=0,Zg=null,rw=null,Nc=0,e_=null;function si(){return(et&2)!==0&&qe!==0?qe&-qe:$.T!==null?a_():wd()}function sw(){if(ri===0)if((qe&536870912)===0||Ke){var r=ka;ka<<=1,(ka&3932160)===0&&(ka=262144),ri=r}else ri=536870912;return r=ti.current,r!==null&&(r.flags|=32),ri}function Kn(r,s,o){(r===ht&&(it===2||it===9)||r.cancelPendingCommit!==null)&&(Al(r,0),Gs(r,qe,ri,!1)),Va(r,o),((et&2)===0||r!==ht)&&(r===ht&&((et&2)===0&&(oo|=o),Ct===4&&Gs(r,qe,ri,!1)),_r(r))}function aw(r,s,o){if((et&6)!==0)throw Error(n(327));var u=!o&&(s&127)===0&&(s&r.expiredLanes)===0||Pi(r,s),d=u?oN(r,s):n_(r,s,!0),p=u;do{if(d===0){bl&&!u&&Gs(r,s,0,!1);break}else{if(o=r.current.alternate,p&&!sN(o)){d=n_(r,s,!1),p=!1;continue}if(d===2){if(p=s,r.errorRecoveryDisabledLanes&p)var v=0;else v=r.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var b=r;d=Cc;var N=b.current.memoizedState.isDehydrated;if(N&&(Al(b,v).flags|=256),v=n_(b,v,!1),v!==2){if(Yg&&!N){b.errorRecoveryDisabledLanes|=p,oo|=p,d=4;break e}p=Gn,Gn=d,p!==null&&(Gn===null?Gn=p:Gn.push.apply(Gn,p))}d=v}if(p=!1,d!==2)continue}}if(d===1){Al(r,0),Gs(r,s,0,!0);break}e:{switch(u=r,p=d,p){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Gs(u,s,ri,!zs);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(d=Tf+300-Nn(),10<d)){if(Gs(u,s,ri,!zs),Zi(u,0,!0)!==0)break e;es=s,u.timeoutHandle=Lw(ow.bind(null,u,o,Gn,wf,Xg,s,ri,oo,Il,zs,p,"Throttled",-0,0),d);break e}ow(u,o,Gn,wf,Xg,s,ri,oo,Il,zs,p,null,-0,0)}}break}while(!0);_r(r)}function ow(r,s,o,u,d,p,v,b,N,H,J,ee,G,W){if(r.timeoutHandle=-1,ee=s.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vi},Z0(s,p,ee);var Te=(p&62914560)===p?Tf-Nn():(p&4194048)===p?iw-Nn():0;if(Te=qN(ee,Te),Te!==null){es=p,r.cancelPendingCommit=Te(pw.bind(null,r,s,p,o,u,d,v,b,N,J,ee,null,G,W)),Gs(r,p,v,!H);return}}pw(r,s,p,o,u,d,v,b,N)}function sN(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],p=d.getSnapshot;d=d.value;try{if(!Zn(p(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Gs(r,s,o,u){s&=~Wg,s&=~oo,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var d=s;0<d;){var p=31-kt(d),v=1<<p;u[p]=-1,d&=~v}o!==0&&Ma(r,o,s)}function bf(){return(et&6)===0?(Dc(0),!1):!0}function t_(){if(je!==null){if(it===0)var r=je.return;else r=je,qr=Ja=null,_g(r),gl=null,fc=0,r=je;for(;r!==null;)U0(r.alternate,r),r=r.return;je=null}}function Al(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,SN(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),es=0,t_(),ht=r,je=o=zr(r.current,null),qe=s,it=0,ii=null,zs=!1,bl=Pi(r,s),Yg=!1,Il=ri=Wg=oo=Fs=Ct=0,Gn=Cc=null,Xg=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var d=31-kt(u),p=1<<d;s|=r[d],u&=~p}return Zr=s,qd(),o}function lw(r,s){Me=null,$.H=Ec,s===pl||s===Xd?(s=IE(),it=3):s===sg?(s=IE(),it=4):it=s===Og?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ii=s,je===null&&(Ct=1,df(r,vi(s,r.current)))}function uw(){var r=ti.current;return r===null?!0:(qe&4194048)===qe?bi===null:(qe&62914560)===qe||(qe&536870912)!==0?r===bi:!1}function cw(){var r=$.H;return $.H=Ec,r===null?Ec:r}function hw(){var r=$.A;return $.A=iN,r}function If(){Ct=4,zs||(qe&4194048)!==qe&&ti.current!==null||(bl=!0),(Fs&134217727)===0&&(oo&134217727)===0||ht===null||Gs(ht,qe,ri,!1)}function n_(r,s,o){var u=et;et|=2;var d=cw(),p=hw();(ht!==r||qe!==s)&&(wf=null,Al(r,s)),s=!1;var v=Ct;e:do try{if(it!==0&&je!==null){var b=je,N=ii;switch(it){case 8:t_(),v=6;break e;case 3:case 2:case 9:case 6:ti.current===null&&(s=!0);var H=it;if(it=0,ii=null,Rl(r,b,N,H),o&&bl){v=0;break e}break;default:H=it,it=0,ii=null,Rl(r,b,N,H)}}aN(),v=Ct;break}catch(J){lw(r,J)}while(!0);return s&&r.shellSuspendCounter++,qr=Ja=null,et=u,$.H=d,$.A=p,je===null&&(ht=null,qe=0,qd()),v}function aN(){for(;je!==null;)dw(je)}function oN(r,s){var o=et;et|=2;var u=cw(),d=hw();ht!==r||qe!==s?(wf=null,Ef=Nn()+500,Al(r,s)):bl=Pi(r,s);e:do try{if(it!==0&&je!==null){s=je;var p=ii;t:switch(it){case 1:it=0,ii=null,Rl(r,s,p,1);break;case 2:case 9:if(wE(p)){it=0,ii=null,fw(s);break}s=function(){it!==2&&it!==9||ht!==r||(it=7),_r(r)},p.then(s,s);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:wE(p)?(it=0,ii=null,fw(s)):(it=0,ii=null,Rl(r,s,p,7));break;case 5:var v=null;switch(je.tag){case 26:v=je.memoizedState;case 5:case 27:var b=je;if(v?Jw(v):b.stateNode.complete){it=0,ii=null;var N=b.sibling;if(N!==null)je=N;else{var H=b.return;H!==null?(je=H,Sf(H)):je=null}break t}}it=0,ii=null,Rl(r,s,p,5);break;case 6:it=0,ii=null,Rl(r,s,p,6);break;case 8:t_(),Ct=6;break e;default:throw Error(n(462))}}lN();break}catch(J){lw(r,J)}while(!0);return qr=Ja=null,$.H=u,$.A=d,et=o,je!==null?0:(ht=null,qe=0,qd(),Ct)}function lN(){for(;je!==null&&!Pp();)dw(je)}function dw(r){var s=M0(r.alternate,r,Zr);r.memoizedProps=r.pendingProps,s===null?Sf(r):je=s}function fw(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=N0(o,s,s.pendingProps,s.type,void 0,qe);break;case 11:s=N0(o,s,s.pendingProps,s.type.render,s.ref,qe);break;case 5:_g(s);default:U0(o,s),s=je=hE(s,Zr),s=M0(o,s,Zr)}r.memoizedProps=r.pendingProps,s===null?Sf(r):je=s}function Rl(r,s,o,u){qr=Ja=null,_g(s),gl=null,fc=0;var d=s.return;try{if(WC(r,d,s,o,qe)){Ct=1,df(r,vi(o,r.current)),je=null;return}}catch(p){if(d!==null)throw je=d,p;Ct=1,df(r,vi(o,r.current)),je=null;return}s.flags&32768?(Ke||u===1?r=!0:bl||(qe&536870912)!==0?r=!1:(zs=r=!0,(u===2||u===9||u===3||u===6)&&(u=ti.current,u!==null&&u.tag===13&&(u.flags|=16384))),mw(s,r)):Sf(s)}function Sf(r){var s=r;do{if((s.flags&32768)!==0){mw(s,zs);return}r=s.return;var o=ZC(s.alternate,s,Zr);if(o!==null){je=o;return}if(s=s.sibling,s!==null){je=s;return}je=s=r}while(s!==null);Ct===0&&(Ct=5)}function mw(r,s){do{var o=eN(r.alternate,r);if(o!==null){o.flags&=32767,je=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){je=r;return}je=r=o}while(r!==null);Ct=6,je=null}function pw(r,s,o,u,d,p,v,b,N){r.cancelPendingCommit=null;do Af();while(Zt!==0);if((et&6)!==0)throw Error(n(327));if(s!==null){if(s===r.current)throw Error(n(177));if(p=s.lanes|s.childLanes,p|=Hp,Vp(r,o,p,v,b,N),r===ht&&(je=ht=null,qe=0),Sl=s,Hs=r,es=o,Jg=p,Zg=d,rw=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,dN(Es,function(){return Tw(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,d=ue.p,ue.p=2,v=et,et|=4;try{tN(r,s,o)}finally{et=v,ue.p=d,$.T=u}}Zt=1,gw(),_w(),yw()}}function gw(){if(Zt===1){Zt=0;var r=Hs,s=Sl,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=$.T,$.T=null;var u=ue.p;ue.p=2;var d=et;et|=4;try{W0(s,r);var p=m_,v=nE(r.containerInfo),b=p.focusedElem,N=p.selectionRange;if(v!==b&&b&&b.ownerDocument&&tE(b.ownerDocument.documentElement,b)){if(N!==null&&jp(b)){var H=N.start,J=N.end;if(J===void 0&&(J=H),"selectionStart"in b)b.selectionStart=H,b.selectionEnd=Math.min(J,b.value.length);else{var ee=b.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var W=G.getSelection(),Te=b.textContent.length,Ce=Math.min(N.start,Te),ct=N.end===void 0?Ce:Math.min(N.end,Te);!W.extend&&Ce>ct&&(v=ct,ct=Ce,Ce=v);var L=eE(b,Ce),k=eE(b,ct);if(L&&k&&(W.rangeCount!==1||W.anchorNode!==L.node||W.anchorOffset!==L.offset||W.focusNode!==k.node||W.focusOffset!==k.offset)){var q=ee.createRange();q.setStart(L.node,L.offset),W.removeAllRanges(),Ce>ct?(W.addRange(q),W.extend(k.node,k.offset)):(q.setEnd(k.node,k.offset),W.addRange(q))}}}}for(ee=[],W=b;W=W.parentNode;)W.nodeType===1&&ee.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ee.length;b++){var Z=ee[b];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Uf=!!f_,m_=f_=null}finally{et=d,ue.p=u,$.T=o}}r.current=s,Zt=2}}function _w(){if(Zt===2){Zt=0;var r=Hs,s=Sl,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=$.T,$.T=null;var u=ue.p;ue.p=2;var d=et;et|=4;try{G0(r,s.alternate,s)}finally{et=d,ue.p=u,$.T=o}}Zt=3}}function yw(){if(Zt===4||Zt===3){Zt=0,pd();var r=Hs,s=Sl,o=es,u=rw;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Zt=5:(Zt=0,Sl=Hs=null,vw(r,r.pendingLanes));var d=r.pendingLanes;if(d===0&&(qs=null),Lr(o),s=s.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Di,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=$.T,d=ue.p,ue.p=2,$.T=null;try{for(var p=r.onRecoverableError,v=0;v<u.length;v++){var b=u[v];p(b.value,{componentStack:b.stack})}}finally{$.T=s,ue.p=d}}(es&3)!==0&&Af(),_r(r),d=r.pendingLanes,(o&261930)!==0&&(d&42)!==0?r===e_?Nc++:(Nc=0,e_=r):Nc=0,Dc(0)}}function vw(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,hc(s)))}function Af(){return gw(),_w(),yw(),Tw()}function Tw(){if(Zt!==5)return!1;var r=Hs,s=Jg;Jg=0;var o=Lr(es),u=$.T,d=ue.p;try{ue.p=32>o?32:o,$.T=null,o=Zg,Zg=null;var p=Hs,v=es;if(Zt=0,Sl=Hs=null,es=0,(et&6)!==0)throw Error(n(331));var b=et;if(et|=4,tw(p.current),J0(p,p.current,v,o),et=b,Dc(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Di,p)}catch{}return!0}finally{ue.p=d,$.T=u,vw(r,s)}}function Ew(r,s,o){s=vi(o,s),s=Pg(r.stateNode,s,2),r=Ls(r,s,2),r!==null&&(Va(r,2),_r(r))}function rt(r,s,o){if(r.tag===3)Ew(r,r,o);else for(;s!==null;){if(s.tag===3){Ew(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(qs===null||!qs.has(u))){r=vi(o,r),o=w0(2),u=Ls(s,o,2),u!==null&&(b0(o,u,s,r),Va(u,2),_r(u));break}}s=s.return}}function i_(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new rN;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(Yg=!0,d.add(o),r=uN.bind(null,r,s,o),s.then(r,r))}function uN(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,ht===r&&(qe&o)===o&&(Ct===4||Ct===3&&(qe&62914560)===qe&&300>Nn()-Tf?(et&2)===0&&Al(r,0):Wg|=o,Il===qe&&(Il=0)),_r(r)}function ww(r,s){s===0&&(s=Ed()),r=Ya(r,s),r!==null&&(Va(r,s),_r(r))}function cN(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),ww(r,o)}function hN(r,s){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,d=r.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(s),ww(r,o)}function dN(r,s){return Jt(r,s)}var Rf=null,xl=null,r_=!1,xf=!1,s_=!1,Ks=0;function _r(r){r!==xl&&r.next===null&&(xl===null?Rf=xl=r:xl=xl.next=r),xf=!0,r_||(r_=!0,mN())}function Dc(r,s){if(!s_&&xf){s_=!0;do for(var o=!1,u=Rf;u!==null;){if(r!==0){var d=u.pendingLanes;if(d===0)var p=0;else{var v=u.suspendedLanes,b=u.pingedLanes;p=(1<<31-kt(42|r)+1)-1,p&=d&~(v&~b),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Aw(u,p))}else p=qe,p=Zi(u,u===ht?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Pi(u,p)||(o=!0,Aw(u,p));u=u.next}while(o);s_=!1}}function fN(){bw()}function bw(){xf=r_=!1;var r=0;Ks!==0&&IN()&&(r=Ks);for(var s=Nn(),o=null,u=Rf;u!==null;){var d=u.next,p=Iw(u,s);p===0?(u.next=null,o===null?Rf=d:o.next=d,d===null&&(xl=o)):(o=u,(r!==0||(p&3)!==0)&&(xf=!0)),u=d}Zt!==0&&Zt!==5||Dc(r),Ks!==0&&(Ks=0)}function Iw(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,d=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var v=31-kt(p),b=1<<v,N=d[v];N===-1?((b&o)===0||(b&u)!==0)&&(d[v]=kp(b,s)):N<=s&&(r.expiredLanes|=b),p&=~b}if(s=ht,o=qe,o=Zi(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(it===2||it===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Ts(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Pi(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Ts(u),Lr(o)){case 2:case 8:o=zu;break;case 32:o=Es;break;case 268435456:o=gd;break;default:o=Es}return u=Sw.bind(null,r),o=Jt(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Ts(u),r.callbackPriority=2,r.callbackNode=null,2}function Sw(r,s){if(Zt!==0&&Zt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Af()&&r.callbackNode!==o)return null;var u=qe;return u=Zi(r,r===ht?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(aw(r,u,s),Iw(r,Nn()),r.callbackNode!=null&&r.callbackNode===o?Sw.bind(null,r):null)}function Aw(r,s){if(Af())return null;aw(r,s,!0)}function mN(){AN(function(){(et&6)!==0?Jt(Bu,fN):bw()})}function a_(){if(Ks===0){var r=fl;r===0&&(r=Xi,Xi<<=1,(Xi&261888)===0&&(Xi=256)),Ks=r}return Ks}function Rw(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Jo(""+r)}function xw(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function pN(r,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var p=Rw((d[nn]||null).action),v=u.submitter;v&&(s=(s=v[nn]||null)?Rw(s.formAction):v.getAttribute("formAction"),s!==null&&(p=s,v=null));var b=new cr("action","action",null,u,d);r.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ks!==0){var N=v?xw(d,v):new FormData(d);Ag(o,{pending:!0,data:N,method:d.method,action:p},null,N)}}else typeof p=="function"&&(b.preventDefault(),N=v?xw(d,v):new FormData(d),Ag(o,{pending:!0,data:N,method:d.method,action:p},p,N))},currentTarget:d}]})}}for(var o_=0;o_<qp.length;o_++){var l_=qp[o_],gN=l_.toLowerCase(),_N=l_[0].toUpperCase()+l_.slice(1);Bi(gN,"on"+_N)}Bi(sE,"onAnimationEnd"),Bi(aE,"onAnimationIteration"),Bi(oE,"onAnimationStart"),Bi("dblclick","onDoubleClick"),Bi("focusin","onFocus"),Bi("focusout","onBlur"),Bi(OC,"onTransitionRun"),Bi(kC,"onTransitionStart"),Bi(VC,"onTransitionCancel"),Bi(lE,"onTransitionEnd"),ar("onMouseEnter",["mouseout","mouseover"]),ar("onMouseLeave",["mouseout","mouseover"]),ar("onPointerEnter",["pointerout","pointerover"]),ar("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pc));function Cw(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],d=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var v=u.length-1;0<=v;v--){var b=u[v],N=b.instance,H=b.currentTarget;if(b=b.listener,N!==p&&d.isPropagationStopped())break e;p=b,d.currentTarget=H;try{p(d)}catch(J){Fd(J)}d.currentTarget=null,p=N}else for(v=0;v<u.length;v++){if(b=u[v],N=b.instance,H=b.currentTarget,b=b.listener,N!==p&&d.isPropagationStopped())break e;p=b,d.currentTarget=H;try{p(d)}catch(J){Fd(J)}d.currentTarget=null,p=N}}}}function Be(r,s){var o=s[Qo];o===void 0&&(o=s[Qo]=new Set);var u=r+"__bubble";o.has(u)||(Nw(s,r,2,!1),o.add(u))}function u_(r,s,o){var u=0;s&&(u|=4),Nw(o,r,u,s)}var Cf="_reactListening"+Math.random().toString(36).slice(2);function c_(r){if(!r[Cf]){r[Cf]=!0,Hu.forEach(function(o){o!=="selectionchange"&&(yN.has(o)||u_(o,!1,r),u_(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Cf]||(s[Cf]=!0,u_("selectionchange",!1,s))}}function Nw(r,s,o,u){switch(sb(s)){case 2:var d=KN;break;case 8:d=QN;break;default:d=S_}o=d.bind(null,s,o,r),d=void 0,!za||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?r.addEventListener(s,o,{capture:!0,passive:d}):r.addEventListener(s,o,!0):d!==void 0?r.addEventListener(s,o,{passive:d}):r.addEventListener(s,o,!1)}function h_(r,s,o,u,d){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var b=u.stateNode.containerInfo;if(b===d)break;if(v===4)for(v=u.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;b!==null;){if(v=ir(b),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){u=p=v;continue e}b=b.parentNode}}u=u.return}Rs(function(){var H=p,J=pi(o),ee=[];e:{var G=uE.get(r);if(G!==void 0){var W=cr,Te=r;switch(r){case"keypress":if(qa(o)===0)break e;case"keydown":case"keyup":W=jd;break;case"focusin":Te="focus",W=Ga;break;case"focusout":Te="blur",W=Ga;break;case"beforeblur":case"afterblur":W=Ga;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Nd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=_;break;case sE:case aE:case oE:W=Pd;break;case lE:W=S;break;case"scroll":case"scrollend":W=nc;break;case"wheel":W=Q;break;case"copy":case"cut":case"paste":W=Od;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Br;break;case"toggle":case"beforetoggle":W=Ve}var Ce=(s&4)!==0,ct=!Ce&&(r==="scroll"||r==="scrollend"),L=Ce?G!==null?G+"Capture":null:G;Ce=[];for(var k=H,q;k!==null;){var Z=k;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||L===null||(Z=Mi(k,L),Z!=null&&Ce.push(Oc(k,Z,q))),ct)break;k=k.return}0<Ce.length&&(G=new W(G,Te,null,o,J),ee.push({event:G,listeners:Ce}))}}if((s&7)===0){e:{if(G=r==="mouseover"||r==="pointerover",W=r==="mouseout"||r==="pointerout",G&&o!==Zu&&(Te=o.relatedTarget||o.fromElement)&&(ir(Te)||Te[tr]))break e;if((W||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,W?(Te=o.relatedTarget||o.toElement,W=H,Te=Te?ir(Te):null,Te!==null&&(ct=l(Te),Ce=Te.tag,Te!==ct||Ce!==5&&Ce!==27&&Ce!==6)&&(Te=null)):(W=null,Te=H),W!==Te)){if(Ce=ic,Z="onMouseLeave",L="onMouseEnter",k="mouse",(r==="pointerout"||r==="pointerover")&&(Ce=Br,Z="onPointerLeave",L="onPointerEnter",k="pointer"),ct=W==null?G:Xn(W),q=Te==null?G:Xn(Te),G=new Ce(Z,k+"leave",W,o,J),G.target=ct,G.relatedTarget=q,Z=null,ir(J)===H&&(Ce=new Ce(L,k+"enter",Te,o,J),Ce.target=q,Ce.relatedTarget=ct,Z=Ce),ct=Z,W&&Te)t:{for(Ce=vN,L=W,k=Te,q=0,Z=L;Z;Z=Ce(Z))q++;Z=0;for(var xe=k;xe;xe=Ce(xe))Z++;for(;0<q-Z;)L=Ce(L),q--;for(;0<Z-q;)k=Ce(k),Z--;for(;q--;){if(L===k||k!==null&&L===k.alternate){Ce=L;break t}L=Ce(L),k=Ce(k)}Ce=null}else Ce=null;W!==null&&Dw(ee,G,W,Ce,!1),Te!==null&&ct!==null&&Dw(ee,ct,Te,Ce,!0)}}e:{if(G=H?Xn(H):window,W=G.nodeName&&G.nodeName.toLowerCase(),W==="select"||W==="input"&&G.type==="file")var Xe=$T;else if(KT(G))if(YT)Xe=NC;else{Xe=xC;var be=RC}else W=G.nodeName,!W||W.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&Xo(H.elementType)&&(Xe=$T):Xe=CC;if(Xe&&(Xe=Xe(r,H))){QT(ee,Xe,o,J);break e}be&&be(r,G,H),r==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&Wu(G,"number",G.value)}switch(be=H?Xn(H):window,r){case"focusin":(KT(be)||be.contentEditable==="true")&&(sl=be,Bp=H,lc=null);break;case"focusout":lc=Bp=sl=null;break;case"mousedown":zp=!0;break;case"contextmenu":case"mouseup":case"dragend":zp=!1,iE(ee,o,J);break;case"selectionchange":if(PC)break;case"keydown":case"keyup":iE(ee,o,J)}var Ue;if(Ze)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else rl?Ka(r,o)&&(He="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(He="onCompositionStart");He&&(fr&&o.locale!=="ko"&&(rl||He!=="onCompositionStart"?He==="onCompositionEnd"&&rl&&(Ue=tc()):(ur=J,ec="value"in ur?ur.value:ur.textContent,rl=!0)),be=Nf(H,He),0<be.length&&(He=new dr(He,r,null,o,J),ee.push({event:He,listeners:be}),Ue?He.data=Ue:(Ue=il(o),Ue!==null&&(He.data=Ue)))),(Ue=_i?bC(r,o):IC(r,o))&&(He=Nf(H,"onBeforeInput"),0<He.length&&(be=new dr("onBeforeInput","beforeinput",null,o,J),ee.push({event:be,listeners:He}),be.data=Ue)),pN(ee,r,H,o,J)}Cw(ee,s)})}function Oc(r,s,o){return{instance:r,listener:s,currentTarget:o}}function Nf(r,s){for(var o=s+"Capture",u=[];r!==null;){var d=r,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=Mi(r,o),d!=null&&u.unshift(Oc(r,d,p)),d=Mi(r,s),d!=null&&u.push(Oc(r,d,p))),r.tag===3)return u;r=r.return}return[]}function vN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Dw(r,s,o,u,d){for(var p=s._reactName,v=[];o!==null&&o!==u;){var b=o,N=b.alternate,H=b.stateNode;if(b=b.tag,N!==null&&N===u)break;b!==5&&b!==26&&b!==27||H===null||(N=H,d?(H=Mi(o,p),H!=null&&v.unshift(Oc(o,H,N))):d||(H=Mi(o,p),H!=null&&v.push(Oc(o,H,N)))),o=o.return}v.length!==0&&r.push({event:s,listeners:v})}var TN=/\r\n?/g,EN=/\u0000|\uFFFD/g;function Pw(r){return(typeof r=="string"?r:""+r).replace(TN,`
`).replace(EN,"")}function Ow(r,s){return s=Pw(s),Pw(r)===s}function ut(r,s,o,u,d,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||zn(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&zn(r,""+u);break;case"className":Jn(r,"class",u);break;case"tabIndex":Jn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Jn(r,o,u);break;case"style":Ju(r,u,p);break;case"data":if(s!=="object"){Jn(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Jo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&ut(r,s,"name",d.name,d,null),ut(r,s,"formEncType",d.formEncType,d,null),ut(r,s,"formMethod",d.formMethod,d,null),ut(r,s,"formTarget",d.formTarget,d,null)):(ut(r,s,"encType",d.encType,d,null),ut(r,s,"method",d.method,d,null),ut(r,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Jo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Vi);break;case"onScroll":u!=null&&Be("scroll",r);break;case"onScrollEnd":u!=null&&Be("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(n(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Jo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Be("beforetoggle",r),Be("toggle",r),Yo(r,"popover",u);break;case"xlinkActuate":Ht(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ht(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ht(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ht(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ht(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ht(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ht(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ht(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ht(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Yo(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Cd.get(o)||o,Yo(r,o,u))}}function d_(r,s,o,u,d,p){switch(o){case"style":Ju(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(n(60));r.innerHTML=o}}break;case"children":typeof u=="string"?zn(r,u):(typeof u=="number"||typeof u=="bigint")&&zn(r,""+u);break;case"onScroll":u!=null&&Be("scroll",r);break;case"onScrollEnd":u!=null&&Be("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gu.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),p=r[nn]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(s,p,d),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,d);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Yo(r,o,u)}}}function mn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",r),Be("load",r);var u=!1,d=!1,p;for(p in o)if(o.hasOwnProperty(p)){var v=o[p];if(v!=null)switch(p){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ut(r,s,p,v,o,null)}}d&&ut(r,s,"srcSet",o.srcSet,o,null),u&&ut(r,s,"src",o.src,o,null);return;case"input":Be("invalid",r);var b=p=v=d=null,N=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var J=o[u];if(J!=null)switch(u){case"name":d=J;break;case"type":v=J;break;case"checked":N=J;break;case"defaultChecked":H=J;break;case"value":p=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(137,s));break;default:ut(r,s,u,J,o,null)}}Ad(r,p,b,N,H,v,d,!1);return;case"select":Be("invalid",r),u=v=p=null;for(d in o)if(o.hasOwnProperty(d)&&(b=o[d],b!=null))switch(d){case"value":p=b;break;case"defaultValue":v=b;break;case"multiple":u=b;default:ut(r,s,d,b,o,null)}s=p,o=v,r.multiple=!!u,s!=null?bs(r,!!u,s,!1):o!=null&&bs(r,!!u,o,!0);return;case"textarea":Be("invalid",r),p=d=u=null;for(v in o)if(o.hasOwnProperty(v)&&(b=o[v],b!=null))switch(v){case"value":u=b;break;case"defaultValue":d=b;break;case"children":p=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:ut(r,s,v,b,o,null)}Is(r,u,d,p);return;case"option":for(N in o)if(o.hasOwnProperty(N)&&(u=o[N],u!=null))switch(N){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ut(r,s,N,u,o,null)}return;case"dialog":Be("beforetoggle",r),Be("toggle",r),Be("cancel",r),Be("close",r);break;case"iframe":case"object":Be("load",r);break;case"video":case"audio":for(u=0;u<Pc.length;u++)Be(Pc[u],r);break;case"image":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"embed":case"source":case"link":Be("error",r),Be("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ut(r,s,H,u,o,null)}return;default:if(Xo(s)){for(J in o)o.hasOwnProperty(J)&&(u=o[J],u!==void 0&&d_(r,s,J,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&ut(r,s,b,u,o,null))}function wN(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,v=null,b=null,N=null,H=null,J=null;for(W in o){var ee=o[W];if(o.hasOwnProperty(W)&&ee!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":N=ee;default:u.hasOwnProperty(W)||ut(r,s,W,null,u,ee)}}for(var G in u){var W=u[G];if(ee=o[G],u.hasOwnProperty(G)&&(W!=null||ee!=null))switch(G){case"type":p=W;break;case"name":d=W;break;case"checked":H=W;break;case"defaultChecked":J=W;break;case"value":v=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(137,s));break;default:W!==ee&&ut(r,s,G,W,u,ee)}}Wo(r,v,b,N,H,J,p,d);return;case"select":W=v=b=G=null;for(p in o)if(N=o[p],o.hasOwnProperty(p)&&N!=null)switch(p){case"value":break;case"multiple":W=N;default:u.hasOwnProperty(p)||ut(r,s,p,null,u,N)}for(d in u)if(p=u[d],N=o[d],u.hasOwnProperty(d)&&(p!=null||N!=null))switch(d){case"value":G=p;break;case"defaultValue":b=p;break;case"multiple":v=p;default:p!==N&&ut(r,s,d,p,u,N)}s=b,o=v,u=W,G!=null?bs(r,!!o,G,!1):!!u!=!!o&&(s!=null?bs(r,!!o,s,!0):bs(r,!!o,o?[]:"",!1));return;case"textarea":W=G=null;for(b in o)if(d=o[b],o.hasOwnProperty(b)&&d!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ut(r,s,b,null,u,d)}for(v in u)if(d=u[v],p=o[v],u.hasOwnProperty(v)&&(d!=null||p!=null))switch(v){case"value":G=d;break;case"defaultValue":W=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(n(91));break;default:d!==p&&ut(r,s,v,d,u,p)}Rd(r,G,W);return;case"option":for(var Te in o)if(G=o[Te],o.hasOwnProperty(Te)&&G!=null&&!u.hasOwnProperty(Te))switch(Te){case"selected":r.selected=!1;break;default:ut(r,s,Te,null,u,G)}for(N in u)if(G=u[N],W=o[N],u.hasOwnProperty(N)&&G!==W&&(G!=null||W!=null))switch(N){case"selected":r.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ut(r,s,N,G,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in o)G=o[Ce],o.hasOwnProperty(Ce)&&G!=null&&!u.hasOwnProperty(Ce)&&ut(r,s,Ce,null,u,G);for(H in u)if(G=u[H],W=o[H],u.hasOwnProperty(H)&&G!==W&&(G!=null||W!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(137,s));break;default:ut(r,s,H,G,u,W)}return;default:if(Xo(s)){for(var ct in o)G=o[ct],o.hasOwnProperty(ct)&&G!==void 0&&!u.hasOwnProperty(ct)&&d_(r,s,ct,void 0,u,G);for(J in u)G=u[J],W=o[J],!u.hasOwnProperty(J)||G===W||G===void 0&&W===void 0||d_(r,s,J,G,u,W);return}}for(var L in o)G=o[L],o.hasOwnProperty(L)&&G!=null&&!u.hasOwnProperty(L)&&ut(r,s,L,null,u,G);for(ee in u)G=u[ee],W=o[ee],!u.hasOwnProperty(ee)||G===W||G==null&&W==null||ut(r,s,ee,G,u,W)}function kw(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],p=d.transferSize,v=d.initiatorType,b=d.duration;if(p&&b&&kw(v)){for(v=0,b=d.responseEnd,u+=1;u<o.length;u++){var N=o[u],H=N.startTime;if(H>b)break;var J=N.transferSize,ee=N.initiatorType;J&&kw(ee)&&(N=N.responseEnd,v+=J*(N<b?1:(b-H)/(N-H)))}if(--u,s+=8*(p+v)/(d.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var f_=null,m_=null;function Df(r){return r.nodeType===9?r:r.ownerDocument}function Vw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mw(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function p_(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var g_=null;function IN(){var r=window.event;return r&&r.type==="popstate"?r===g_?!1:(g_=r,!0):(g_=null,!1)}var Lw=typeof setTimeout=="function"?setTimeout:void 0,SN=typeof clearTimeout=="function"?clearTimeout:void 0,Uw=typeof Promise=="function"?Promise:void 0,AN=typeof queueMicrotask=="function"?queueMicrotask:typeof Uw<"u"?function(r){return Uw.resolve(null).then(r).catch(RN)}:Lw;function RN(r){setTimeout(function(){throw r})}function Qs(r){return r==="head"}function jw(r,s){var o=s,u=0;do{var d=o.nextSibling;if(r.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(d),Pl(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")kc(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,kc(o);for(var p=o.firstChild;p;){var v=p.nextSibling,b=p.nodeName;p[nr]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=v}}else o==="body"&&kc(r.ownerDocument.body);o=d}while(o);Pl(s)}function Bw(r,s){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function __(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":__(o),$o(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function xN(r,s,o,u){for(;r.nodeType===1;){var d=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[nr])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==d.rel||r.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||r.getAttribute("title")!==(d.title==null?null:d.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(d.src==null?null:d.src)||r.getAttribute("type")!==(d.type==null?null:d.type)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=Ii(r.nextSibling),r===null)break}return null}function CN(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Ii(r.nextSibling),r===null))return null;return r}function zw(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Ii(r.nextSibling),r===null))return null;return r}function y_(r){return r.data==="$?"||r.data==="$~"}function v_(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function NN(r,s){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Ii(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var T_=null;function Fw(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(s===0)return Ii(r.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}r=r.nextSibling}return null}function qw(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return r;s--}else o!=="/$"&&o!=="/&"||s++}r=r.previousSibling}return null}function Hw(r,s,o){switch(s=Df(o),r){case"html":if(r=s.documentElement,!r)throw Error(n(452));return r;case"head":if(r=s.head,!r)throw Error(n(453));return r;case"body":if(r=s.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function kc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);$o(r)}var Si=new Map,Gw=new Set;function Pf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ts=ue.d;ue.d={f:DN,r:PN,D:ON,C:kN,L:VN,m:MN,X:UN,S:LN,M:jN};function DN(){var r=ts.f(),s=bf();return r||s}function PN(r){var s=mi(r);s!==null&&s.tag===5&&s.type==="form"?l0(s):ts.r(r)}var Cl=typeof document>"u"?null:document;function Kw(r,s,o){var u=Cl;if(u&&typeof s=="string"&&s){var d=Bn(s);d='link[rel="'+r+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Gw.has(d)||(Gw.add(d),r={rel:r,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),mn(s,"link",r),qt(s),u.head.appendChild(s)))}}function ON(r){ts.D(r),Kw("dns-prefetch",r,null)}function kN(r,s){ts.C(r,s),Kw("preconnect",r,s)}function VN(r,s,o){ts.L(r,s,o);var u=Cl;if(u&&r&&s){var d='link[rel="preload"][as="'+Bn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Bn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Bn(o.imageSizes)+'"]')):d+='[href="'+Bn(r)+'"]';var p=d;switch(s){case"style":p=Nl(r);break;case"script":p=Dl(r)}Si.has(p)||(r=T({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Si.set(p,r),u.querySelector(d)!==null||s==="style"&&u.querySelector(Vc(p))||s==="script"&&u.querySelector(Mc(p))||(s=u.createElement("link"),mn(s,"link",r),qt(s),u.head.appendChild(s)))}}function MN(r,s){ts.m(r,s);var o=Cl;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Bn(u)+'"][href="'+Bn(r)+'"]',p=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Dl(r)}if(!Si.has(p)&&(r=T({rel:"modulepreload",href:r},s),Si.set(p,r),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Mc(p)))return}u=o.createElement("link"),mn(u,"link",r),qt(u),o.head.appendChild(u)}}}function LN(r,s,o){ts.S(r,s,o);var u=Cl;if(u&&r){var d=rr(u).hoistableStyles,p=Nl(r);s=s||"default";var v=d.get(p);if(!v){var b={loading:0,preload:null};if(v=u.querySelector(Vc(p)))b.loading=5;else{r=T({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Si.get(p))&&E_(r,o);var N=v=u.createElement("link");qt(N),mn(N,"link",r),N._p=new Promise(function(H,J){N.onload=H,N.onerror=J}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Of(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:b},d.set(p,v)}}}function UN(r,s){ts.X(r,s);var o=Cl;if(o&&r){var u=rr(o).hoistableScripts,d=Dl(r),p=u.get(d);p||(p=o.querySelector(Mc(d)),p||(r=T({src:r,async:!0},s),(s=Si.get(d))&&w_(r,s),p=o.createElement("script"),qt(p),mn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function jN(r,s){ts.M(r,s);var o=Cl;if(o&&r){var u=rr(o).hoistableScripts,d=Dl(r),p=u.get(d);p||(p=o.querySelector(Mc(d)),p||(r=T({src:r,async:!0,type:"module"},s),(s=Si.get(d))&&w_(r,s),p=o.createElement("script"),qt(p),mn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function Qw(r,s,o,u){var d=(d=fe.current)?Pf(d):null;if(!d)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Nl(o.href),o=rr(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Nl(o.href);var p=rr(d).hoistableStyles,v=p.get(r);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,v),(p=d.querySelector(Vc(r)))&&!p._p&&(v.instance=p,v.state.loading=5),Si.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Si.set(r,o),p||BN(d,r,o,v.state))),s&&u===null)throw Error(n(528,""));return v}if(s&&u!==null)throw Error(n(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Dl(o),o=rr(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function Nl(r){return'href="'+Bn(r)+'"'}function Vc(r){return'link[rel="stylesheet"]['+r+"]"}function $w(r){return T({},r,{"data-precedence":r.precedence,precedence:null})}function BN(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),mn(s,"link",o),qt(s),r.head.appendChild(s))}function Dl(r){return'[src="'+Bn(r)+'"]'}function Mc(r){return"script[async]"+r}function Yw(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Bn(o.href)+'"]');if(u)return s.instance=u,qt(u),u;var d=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),qt(u),mn(u,"style",d),Of(u,o.precedence,r),s.instance=u;case"stylesheet":d=Nl(o.href);var p=r.querySelector(Vc(d));if(p)return s.state.loading|=4,s.instance=p,qt(p),p;u=$w(o),(d=Si.get(d))&&E_(u,d),p=(r.ownerDocument||r).createElement("link"),qt(p);var v=p;return v._p=new Promise(function(b,N){v.onload=b,v.onerror=N}),mn(p,"link",u),s.state.loading|=4,Of(p,o.precedence,r),s.instance=p;case"script":return p=Dl(o.src),(d=r.querySelector(Mc(p)))?(s.instance=d,qt(d),d):(u=o,(d=Si.get(p))&&(u=T({},o),w_(u,d)),r=r.ownerDocument||r,d=r.createElement("script"),qt(d),mn(d,"link",u),r.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Of(u,o.precedence,r));return s.instance}function Of(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,p=d,v=0;v<u.length;v++){var b=u[v];if(b.dataset.precedence===s)p=b;else if(p!==d)break}p?p.parentNode.insertBefore(r,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function E_(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function w_(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var kf=null;function Ww(r,s,o){if(kf===null){var u=new Map,d=kf=new Map;d.set(o,u)}else d=kf,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),d=0;d<o.length;d++){var p=o[d];if(!(p[nr]||p[Ft]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(s)||"";v=r+v;var b=u.get(v);b?b.push(p):u.set(v,[p])}}return u}function Xw(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function zN(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Jw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function FN(r,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=Nl(u.href),p=s.querySelector(Vc(d));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Vf.bind(r),s.then(r,r)),o.state.loading|=4,o.instance=p,qt(p);return}p=s.ownerDocument||s,u=$w(u),(d=Si.get(d))&&E_(u,d),p=p.createElement("link"),qt(p);var v=p;v._p=new Promise(function(b,N){v.onload=b,v.onerror=N}),mn(p,"link",u),o.instance=p}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=Vf.bind(r),s.addEventListener("load",o),s.addEventListener("error",o))}}var b_=0;function qN(r,s){return r.stylesheets&&r.count===0&&Lf(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Lf(r,r.stylesheets),r.unsuspend){var p=r.unsuspend;r.unsuspend=null,p()}},6e4+s);0<r.imgBytes&&b_===0&&(b_=62500*bN());var d=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Lf(r,r.stylesheets),r.unsuspend)){var p=r.unsuspend;r.unsuspend=null,p()}},(r.imgBytes>b_?50:800)+s);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function Vf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Mf=null;function Lf(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Mf=new Map,s.forEach(HN,r),Mf=null,Vf.call(r))}function HN(r,s){if(!(s.state.loading&4)){var o=Mf.get(r);if(o)var u=o.get(null);else{o=new Map,Mf.set(r,o);for(var d=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var v=d[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}d=s.instance,v=d.getAttribute("data-precedence"),p=o.get(v)||u,p===u&&o.set(null,d),o.set(v,d),this.count++,u=Vf.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),p?p.parentNode.insertBefore(d,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(d,r.firstChild)),s.state.loading|=4}}var Lc={$$typeof:se,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function GN(r,s,o,u,d,p,v,b,N){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.hiddenUpdates=er(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Zw(r,s,o,u,d,p,v,b,N,H,J,ee){return r=new GN(r,s,o,v,N,H,J,ee,b),s=1,p===!0&&(s|=24),p=ei(3,null,null,s),r.current=p,p.stateNode=r,s=ng(),s.refCount++,r.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},ag(p),r}function eb(r){return r?(r=ll,r):ll}function tb(r,s,o,u,d,p){d=eb(d),u.context===null?u.context=d:u.pendingContext=d,u=Ms(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ls(r,u,s),o!==null&&(Kn(o,r,s),pc(o,r,s))}function nb(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function I_(r,s){nb(r,s),(r=r.alternate)&&nb(r,s)}function ib(r){if(r.tag===13||r.tag===31){var s=Ya(r,67108864);s!==null&&Kn(s,r,67108864),I_(r,67108864)}}function rb(r){if(r.tag===13||r.tag===31){var s=si();s=La(s);var o=Ya(r,s);o!==null&&Kn(o,r,s),I_(r,s)}}var Uf=!0;function KN(r,s,o,u){var d=$.T;$.T=null;var p=ue.p;try{ue.p=2,S_(r,s,o,u)}finally{ue.p=p,$.T=d}}function QN(r,s,o,u){var d=$.T;$.T=null;var p=ue.p;try{ue.p=8,S_(r,s,o,u)}finally{ue.p=p,$.T=d}}function S_(r,s,o,u){if(Uf){var d=A_(u);if(d===null)h_(r,s,u,jf,o),ab(r,u);else if(YN(d,r,s,o,u))u.stopPropagation();else if(ab(r,u),s&4&&-1<$N.indexOf(r)){for(;d!==null;){var p=mi(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Ji(p.pendingLanes);if(v!==0){var b=p;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var N=1<<31-kt(v);b.entanglements[1]|=N,v&=~N}_r(p),(et&6)===0&&(Ef=Nn()+500,Dc(0))}}break;case 31:case 13:b=Ya(p,2),b!==null&&Kn(b,p,2),bf(),I_(p,2)}if(p=A_(u),p===null&&h_(r,s,u,jf,o),p===d)break;d=p}d!==null&&u.stopPropagation()}else h_(r,s,u,null,o)}}function A_(r){return r=pi(r),R_(r)}var jf=null;function R_(r){if(jf=null,r=ir(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===31){if(r=f(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return jf=r,null}function sb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oa()){case Bu:return 2;case zu:return 8;case Es:case Op:return 32;case gd:return 268435456;default:return 32}default:return 32}}var x_=!1,$s=null,Ys=null,Ws=null,Uc=new Map,jc=new Map,Xs=[],$N="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ab(r,s){switch(r){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":Uc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(s.pointerId)}}function Bc(r,s,o,u,d,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},s!==null&&(s=mi(s),s!==null&&ib(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function YN(r,s,o,u,d){switch(s){case"focusin":return $s=Bc($s,r,s,o,u,d),!0;case"dragenter":return Ys=Bc(Ys,r,s,o,u,d),!0;case"mouseover":return Ws=Bc(Ws,r,s,o,u,d),!0;case"pointerover":var p=d.pointerId;return Uc.set(p,Bc(Uc.get(p)||null,r,s,o,u,d)),!0;case"gotpointercapture":return p=d.pointerId,jc.set(p,Bc(jc.get(p)||null,r,s,o,u,d)),!0}return!1}function ob(r){var s=ir(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,Oi(r.priority,function(){rb(o)});return}}else if(s===31){if(s=f(o),s!==null){r.blockedOn=s,Oi(r.priority,function(){rb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Bf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=A_(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Zu=u,o.target.dispatchEvent(u),Zu=null}else return s=mi(o),s!==null&&ib(s),r.blockedOn=o,!1;s.shift()}return!0}function lb(r,s,o){Bf(r)&&o.delete(s)}function WN(){x_=!1,$s!==null&&Bf($s)&&($s=null),Ys!==null&&Bf(Ys)&&(Ys=null),Ws!==null&&Bf(Ws)&&(Ws=null),Uc.forEach(lb),jc.forEach(lb)}function zf(r,s){r.blockedOn===s&&(r.blockedOn=null,x_||(x_=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,WN)))}var Ff=null;function ub(r){Ff!==r&&(Ff=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ff===r&&(Ff=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],d=r[s+2];if(typeof u!="function"){if(R_(u||o)===null)continue;break}var p=mi(o);p!==null&&(r.splice(s,3),s-=3,Ag(p,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function Pl(r){function s(N){return zf(N,r)}$s!==null&&zf($s,r),Ys!==null&&zf(Ys,r),Ws!==null&&zf(Ws,r),Uc.forEach(s),jc.forEach(s);for(var o=0;o<Xs.length;o++){var u=Xs[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Xs.length&&(o=Xs[0],o.blockedOn===null);)ob(o),o.blockedOn===null&&Xs.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],p=o[u+1],v=d[nn]||null;if(typeof p=="function")v||ub(o);else if(v){var b=null;if(p&&p.hasAttribute("formAction")){if(d=p,v=p[nn]||null)b=v.formAction;else if(R_(d)!==null)continue}else b=v.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),ub(o)}}}function cb(){function r(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function C_(r){this._internalRoot=r}qf.prototype.render=C_.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(n(409));var o=s.current,u=si();tb(o,u,r,s,null,null)},qf.prototype.unmount=C_.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;tb(r.current,2,null,r,null,null),bf(),s[tr]=null}};function qf(r){this._internalRoot=r}qf.prototype.unstable_scheduleHydration=function(r){if(r){var s=wd();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Xs.length&&s!==0&&s<Xs[o].priority;o++);Xs.splice(o,0,r),o===0&&ob(r)}};var hb=e.version;if(hb!=="19.2.0")throw Error(n(527,hb,"19.2.0"));ue.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=g(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var XN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hf.isDisabled&&Hf.supportsFiber)try{Di=Hf.inject(XN),un=Hf}catch{}}return Fc.createRoot=function(r,s){if(!a(r))throw Error(n(299));var o=!1,u="",d=y0,p=v0,v=T0;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=Zw(r,1,!1,null,null,o,u,null,d,p,v,cb),r[tr]=s.current,c_(r),new C_(s)},Fc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(n(299));var u=!1,d="",p=y0,v=v0,b=T0,N=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.formState!==void 0&&(N=o.formState)),s=Zw(r,1,!0,s,o??null,u,d,N,p,v,b,cb),s.context=eb(null),o=s.current,u=si(),u=La(u),d=Ms(u),d.callback=null,Ls(o,d,u),o=u,s.current.lanes=o,Va(s,o),_r(s),r[tr]=s.current,c_(r),new qf(s)},Fc.version="19.2.0",Fc}var Eb;function oD(){if(Eb)return P_.exports;Eb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),P_.exports=aD(),P_.exports}var lD=oD();const uD=zS(lD),cD=()=>{};var wb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let a=i.charCodeAt(n);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},hD=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const a=i[t++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[n++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],c=i[t++],f=i[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[n++]=String.fromCharCode(55296+(m>>10)),e[n++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],c=i[t++];e[n++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},HS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<i.length;a+=3){const l=i[a],c=a+1<i.length,f=c?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,y=l>>2,T=(l&3)<<4|f>>4;let I=(f&15)<<2|g>>6,D=g&63;m||(D=64,c||(I=64)),n.push(t[y],t[T],t[I],t[D])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(qS(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):hD(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],f=a<i.length?t[i.charAt(a)]:0;++a;const g=a<i.length?t[i.charAt(a)]:64;++a;const T=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||f==null||g==null||T==null)throw new dD;const I=l<<2|f>>4;if(n.push(I),g!==64){const D=f<<4&240|g>>2;if(n.push(D),T!==64){const F=g<<6&192|T;n.push(F)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class dD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fD=function(i){const e=qS(i);return HS.encodeByteArray(e,!0)},_m=function(i){return fD(i).replace(/\./g,"")},Zy=function(i){try{return HS.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ym(i,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!mD(t)||(i[t]=ym(i[t],e[t]));return i}function mD(i){return i!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=()=>ev().__FIREBASE_DEFAULTS__,gD=()=>{if(typeof process>"u"||typeof wb>"u")return;const i=wb.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},_D=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Zy(i[1]);return e&&JSON.parse(e)},tv=()=>{try{return cD()||pD()||gD()||_D()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},nv=()=>{var i;return(i=tv())==null?void 0:i.config},yD=i=>{var e;return(e=tv())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iv(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",a=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...i};return[_m(JSON.stringify(t)),_m(JSON.stringify(c)),""].join(".")}const lh={};function TD(){const i={prod:[],emulator:[]};for(const e of Object.keys(lh))lh[e]?i.emulator.push(e):i.prod.push(e);return i}function ED(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let bb=!1;function rv(i,e){if(typeof window>"u"||typeof document>"u"||!Ia(window.location.host)||lh[i]===e||lh[i]||bb)return;lh[i]=e;function t(I){return`__firebase__banner__${I}`}const n="__firebase__banner",l=TD().prod.length>0;function c(){const I=document.getElementById(n);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function m(I,D){I.setAttribute("width","24"),I.setAttribute("id",D),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function g(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{bb=!0,c()},I}function y(I,D){I.setAttribute("id",D),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function T(){const I=ED(n),D=t("text"),F=document.getElementById(D)||document.createElement("span"),B=t("learnmore"),U=document.getElementById(B)||document.createElement("a"),ne=t("preprendIcon"),ie=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const se=I.element;f(se),y(U,B);const ge=g();m(ie,ne),se.append(ie,F,U,ge),document.body.appendChild(se)}l?(F.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function qm(){var e;const i=(e=tv())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bD(){return typeof window<"u"||KS()}function KS(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ID(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function sv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $S(){const i=St();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function YS(){return!qm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WS(){return!qm()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Sh(){try{return typeof indexedDB=="object"}catch{return!1}}function SD(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD="FirebaseError";class Rn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=AD,Object.setPrototypeOf(this,Rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bo.prototype.create)}}class Bo{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?RD(l,n):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Rn(a,f,n)}}function RD(i,e){return i.replace(xD,(t,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const xD=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function CD(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function fa(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const a of t){if(!n.includes(a))return!1;const l=i[a],c=e[a];if(Sb(l)&&Sb(c)){if(!fa(l,c))return!1}else if(l!==c)return!1}for(const a of n)if(!t.includes(a))return!1;return!0}function Sb(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(i){const e=[];for(const[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Kl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,l]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function eh(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function XS(i,e){const t=new ND(i,e);return t.subscribe.bind(t)}class ND{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let a;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");DD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:n},a.next===void 0&&(a.next=M_),a.error===void 0&&(a.error=M_),a.complete===void 0&&(a.complete=M_);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DD(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function M_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(i){return i&&i._delegate?i._delegate:i}class Ci{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new vD;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kD(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});n.resolve(l)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);n===f&&c.resolve(a)}return a}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const l=this.instances.get(n);return l&&e(l,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const a of n)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:OD(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OD(i){return i===uo?void 0:i}function kD(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new PD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=[];var ze;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ze||(ze={}));const ZS={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},VD=ze.INFO,MD={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},LD=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),a=MD[e];if(a)console[a](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hm{constructor(e){this.name=e,this._logLevel=VD,this._logHandler=LD,this._userLogHandler=null,av.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}function UD(i){av.forEach(e=>{e.setLogLevel(i)})}function jD(i,e){for(const t of av){let n=null;e&&e.level&&(n=ZS[e.level]),i===null?t.userLogHandler=null:t.userLogHandler=(a,l,...c)=>{const f=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(n??a.logLevel)&&i({level:ze[l].toLowerCase(),message:f,args:c,type:a.name})}}}const BD=(i,e)=>e.some(t=>i instanceof t);let Ab,Rb;function zD(){return Ab||(Ab=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FD(){return Rb||(Rb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eA=new WeakMap,ay=new WeakMap,tA=new WeakMap,L_=new WeakMap,ov=new WeakMap;function qD(i){const e=new Promise((t,n)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(la(i.result)),a()},c=()=>{n(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&eA.set(t,i)}).catch(()=>{}),ov.set(e,i),e}function HD(i){if(ay.has(i))return;const e=new Promise((t,n)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{n(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});ay.set(i,e)}let oy={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return ay.get(i);if(e==="objectStoreNames")return i.objectStoreNames||tA.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return la(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function GD(i){oy=i(oy)}function KD(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(U_(this),e,...t);return tA.set(n,e.sort?e.sort():[e]),la(n)}:FD().includes(i)?function(...e){return i.apply(U_(this),e),la(eA.get(this))}:function(...e){return la(i.apply(U_(this),e))}}function QD(i){return typeof i=="function"?KD(i):(i instanceof IDBTransaction&&HD(i),BD(i,zD())?new Proxy(i,oy):i)}function la(i){if(i instanceof IDBRequest)return qD(i);if(L_.has(i))return L_.get(i);const e=QD(i);return e!==i&&(L_.set(i,e),ov.set(e,i)),e}const U_=i=>ov.get(i);function $D(i,e,{blocked:t,upgrade:n,blocking:a,terminated:l}={}){const c=indexedDB.open(i,e),f=la(c);return n&&c.addEventListener("upgradeneeded",m=>{n(la(c.result),m.oldVersion,m.newVersion,la(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const YD=["get","getKey","getAll","getAllKeys","count"],WD=["put","add","delete","clear"],j_=new Map;function xb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(j_.get(e))return j_.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,a=WD.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(a||YD.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return n&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&m.done]))[0]};return j_.set(e,l),l}GD(i=>({...i,get:(e,t,n)=>xb(e,t)||i.get(e,t,n),has:(e,t)=>!!xb(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(JD(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function JD(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vm="@firebase/app",ly="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new Hm("@firebase/app"),ZD="@firebase/app-compat",e2="@firebase/analytics-compat",t2="@firebase/analytics",n2="@firebase/app-check-compat",i2="@firebase/app-check",r2="@firebase/auth",s2="@firebase/auth-compat",a2="@firebase/database",o2="@firebase/data-connect",l2="@firebase/database-compat",u2="@firebase/functions",c2="@firebase/functions-compat",h2="@firebase/installations",d2="@firebase/installations-compat",f2="@firebase/messaging",m2="@firebase/messaging-compat",p2="@firebase/performance",g2="@firebase/performance-compat",_2="@firebase/remote-config",y2="@firebase/remote-config-compat",v2="@firebase/storage",T2="@firebase/storage-compat",E2="@firebase/firestore",w2="@firebase/ai",b2="@firebase/firestore-compat",I2="firebase",S2="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="[DEFAULT]",A2={[vm]:"fire-core",[ZD]:"fire-core-compat",[t2]:"fire-analytics",[e2]:"fire-analytics-compat",[i2]:"fire-app-check",[n2]:"fire-app-check-compat",[r2]:"fire-auth",[s2]:"fire-auth-compat",[a2]:"fire-rtdb",[o2]:"fire-data-connect",[l2]:"fire-rtdb-compat",[u2]:"fire-fn",[c2]:"fire-fn-compat",[h2]:"fire-iid",[d2]:"fire-iid-compat",[f2]:"fire-fcm",[m2]:"fire-fcm-compat",[p2]:"fire-perf",[g2]:"fire-perf-compat",[_2]:"fire-rc",[y2]:"fire-rc-compat",[v2]:"fire-gcs",[T2]:"fire-gcs-compat",[E2]:"fire-fst",[b2]:"fire-fst-compat",[w2]:"fire-vertex","fire-js":"fire-js",[I2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Map,tu=new Map,nu=new Map;function Ah(i,e){try{i.container.addComponent(e)}catch(t){os.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function nA(i,e){i.container.addOrOverwriteComponent(e)}function ls(i){const e=i.name;if(nu.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;nu.set(e,i);for(const t of pa.values())Ah(t,i);for(const t of tu.values())Ah(t,i);return!0}function iA(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function R2(i,e,t=ma){iA(i,e).clearInstance(t)}function lv(i){return i.options!==void 0}function rA(i){return lv(i)?!1:"authIdToken"in i||"appCheckToken"in i||"releaseOnDeref"in i||"automaticDataCollectionEnabled"in i}function _t(i){return i==null?!1:i.settings!==void 0}function x2(){nu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new Bo("app","Firebase",C2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sA=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ci("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(i,e){const t=Zy(i.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class N2 extends sA{constructor(e,t,n,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,c={name:n,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,c,a);else{const f=e;super(f.options,c,a)}this._serverConfig={automaticDataCollectionEnabled:l,...t},this._serverConfig.authIdToken&&Cb(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&Cb(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,ci(vm,ly,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){cv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ui.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=S2;function uv(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n={name:ma,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw ui.create("bad-app-name",{appName:String(a)});if(t||(t=nv()),!t)throw ui.create("no-options");const l=pa.get(a);if(l){if(fa(t,l.options)&&fa(n,l.config))return l;throw ui.create("duplicate-app",{appName:a})}const c=new JS(a);for(const m of nu.values())c.addComponent(m);const f=new sA(t,n,c);return pa.set(a,f),f}function D2(i,e={}){if(bD()&&!KS())throw ui.create("invalid-server-app-environment");let t,n=e||{};if(i&&(lv(i)?t=i.options:rA(i)?n=i:t=i),n.automaticDataCollectionEnabled===void 0&&(n.automaticDataCollectionEnabled=!0),t||(t=nv()),!t)throw ui.create("no-options");const a={...n,...t};a.releaseOnDeref!==void 0&&delete a.releaseOnDeref;const l=y=>[...y].reduce((T,I)=>Math.imul(31,T)+I.charCodeAt(0)|0,0);if(n.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ui.create("finalization-registry-not-supported",{});const c=""+l(JSON.stringify(a)),f=tu.get(c);if(f)return f.incRefCount(n.releaseOnDeref),f;const m=new JS(c);for(const y of nu.values())m.addComponent(y);const g=new N2(t,n,c,m);return tu.set(c,g),g}function P2(i=ma){const e=pa.get(i);if(!e&&i===ma&&nv())return uv();if(!e)throw ui.create("no-app",{appName:i});return e}function O2(){return Array.from(pa.values())}async function cv(i){let e=!1;const t=i.name;pa.has(t)?(e=!0,pa.delete(t)):tu.has(t)&&i.decRefCount()<=0&&(tu.delete(t),e=!0),e&&(await Promise.all(i.container.getProviders().map(n=>n.delete())),i.isDeleted=!0)}function ci(i,e,t){let n=A2[i]??i;t&&(n+=`-${t}`);const a=n.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${n}" with version "${e}":`];a&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(c.join(" "));return}ls(new Ci(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}function aA(i,e){if(i!==null&&typeof i!="function")throw ui.create("invalid-log-argument");jD(i,e)}function oA(i){UD(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="firebase-heartbeat-database",V2=1,Rh="firebase-heartbeat-store";let B_=null;function lA(){return B_||(B_=$D(k2,V2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Rh)}catch(t){console.warn(t)}}}}).catch(i=>{throw ui.create("idb-open",{originalErrorMessage:i.message})})),B_}async function M2(i){try{const t=(await lA()).transaction(Rh),n=await t.objectStore(Rh).get(uA(i));return await t.done,n}catch(e){if(e instanceof Rn)os.warn(e.message);else{const t=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});os.warn(t.message)}}}async function Nb(i,e){try{const n=(await lA()).transaction(Rh,"readwrite");await n.objectStore(Rh).put(e,uA(i)),await n.done}catch(t){if(t instanceof Rn)os.warn(t.message);else{const n=ui.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});os.warn(n.message)}}}function uA(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=1024,U2=30;class j2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new z2(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Db();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>U2){const c=F2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){os.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Db(),{heartbeatsToSend:n,unsentEntries:a}=B2(this._heartbeatsCache.heartbeats),l=_m(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return os.warn(t),""}}}function Db(){return new Date().toISOString().substring(0,10)}function B2(i,e=L2){const t=[];let n=i.slice();for(const a of i){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Pb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Pb(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class z2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sh()?SD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await M2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Nb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Nb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Pb(i){return _m(JSON.stringify({version:2,heartbeats:i})).length}function F2(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let n=1;n<i.length;n++)i[n].date<t&&(t=i[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(i){ls(new Ci("platform-logger",e=>new XD(e),"PRIVATE")),ls(new Ci("heartbeat",e=>new j2(e),"PRIVATE")),ci(vm,ly,i),ci(vm,ly,"esm2020"),ci("fire-js","")}q2("");const H2=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Rn,SDK_VERSION:ds,_DEFAULT_ENTRY_NAME:ma,_addComponent:Ah,_addOrOverwriteComponent:nA,_apps:pa,_clearComponents:x2,_components:nu,_getProvider:iA,_isFirebaseApp:lv,_isFirebaseServerApp:_t,_isFirebaseServerAppSettings:rA,_registerComponent:ls,_removeServiceInstance:R2,_serverApps:tu,deleteApp:cv,getApp:P2,getApps:O2,initializeApp:uv,initializeServerApp:D2,onLog:aA,registerVersion:ci,setLogLevel:oA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,t){this._delegate=e,this.firebase=t,Ah(e,new Ci("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),cv(this._delegate)))}_getService(e,t=ma){var a;this._delegate.checkDestroyed();const n=this._delegate.container.getProvider(e);return!n.isInitialized()&&((a=n.getComponent())==null?void 0:a.instantiationMode)==="EXPLICIT"&&n.initialize(),n.getImmediate({identifier:t})}_removeServiceInstance(e,t=ma){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Ah(this._delegate,e)}_addOrOverwriteComponent(e){nA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Ob=new Bo("app-compat","Firebase",K2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(i){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:ci,setLogLevel:oA,onLog:aA,apps:null,SDK_VERSION:ds,INTERNAL:{registerComponent:f,removeApp:n,useAsService:m,modularAPIs:H2}};t.default=t,Object.defineProperty(t,"apps",{get:c});function n(g){delete e[g]}function a(g){if(g=g||ma,!Ib(e,g))throw Ob.create("no-app",{appName:g});return e[g]}a.App=i;function l(g,y={}){const T=uv(g,y);if(Ib(e,T.name))return e[T.name];const I=new i(T,t);return e[T.name]=I,I}function c(){return Object.keys(e).map(g=>e[g])}function f(g){const y=g.name,T=y.replace("-compat","");if(ls(g)&&g.type==="PUBLIC"){const I=(D=a())=>{if(typeof D[T]!="function")throw Ob.create("invalid-app-argument",{appName:y});return D[T]()};g.serviceProps!==void 0&&ym(I,g.serviceProps),t[T]=I,i.prototype[T]=function(...D){return this._getService.bind(this,y).apply(this,g.multipleInstances?D:[])}}return g.type==="PUBLIC"?t[T]:null}function m(g,y){return y==="serverAuth"?null:y}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(){const i=Q2(G2);i.INTERNAL={...i.INTERNAL,createFirebaseNamespace:cA,extendNamespace:e,createSubscribe:XS,ErrorFactory:Bo,deepExtend:ym};function e(t){ym(i,t)}return i}const $2=cA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new Hm("@firebase/app-compat"),Y2="@firebase/app-compat",W2="0.5.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(i){ci(Y2,W2,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const i=ev();if(i.firebase!==void 0){kb.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=i.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&kb.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Yi=$2;X2();var J2="firebase",Z2="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yi.registerVersion(J2,Z2,"app-compat");const qc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Ol={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function hA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tP=eP,nP=hA,dA=new Bo("auth","Firebase",hA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new Hm("@firebase/auth");function iP(i,...e){Tm.logLevel<=ze.WARN&&Tm.warn(`Auth (${ds}): ${i}`,...e)}function nm(i,...e){Tm.logLevel<=ze.ERROR&&Tm.error(`Auth (${ds}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(i,...e){throw dv(i,...e)}function en(i,...e){return dv(i,...e)}function hv(i,e,t){const n={...nP(),[e]:t};return new Bo("auth","Firebase",n).create(e,{appName:i.name})}function ln(i){return hv(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Su(i,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&vn(i,"argument-error"),hv(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dv(i,...e){if(typeof i!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return dA.create(i,...e)}function oe(i,e,...t){if(!i)throw dv(e,...t)}function Ar(i){const e="INTERNAL ASSERTION FAILED: "+i;throw nm(e),new Error(e)}function Wi(i,e){i||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function fv(){return Vb()==="http:"||Vb()==="https:"}function Vb(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fv()||QS()||"connection"in navigator)?navigator.onLine:!0}function sP(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wi(t>e,"Short delay should be less than long delay!"),this.isMobile=wD()||sv()}get(){return rP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(i,e){Wi(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lP=new $h(3e4,6e4);function Pt(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Ot(i,e,t,n,a={}){return mA(i,a,async()=>{let l={},c={};n&&(e==="GET"?c=n:l={body:JSON.stringify(n)});const f=Iu({key:i.config.apiKey,...c}).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:m,...l};return ID()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Ia(i.emulatorConfig.host)&&(g.credentials="include"),fA.fetch()(await pA(i,i.config.apiHost,t,f),g)})}async function mA(i,e,t){i._canInitEmulator=!1;const n={...aP,...e};try{const a=new cP(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw th(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw th(i,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw th(i,"email-already-in-use",c);if(m==="USER_DISABLED")throw th(i,"user-disabled",c);const y=n[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw hv(i,y,g);vn(i,y)}}catch(a){if(a instanceof Rn)throw a;vn(i,"network-request-failed",{message:String(a)})}}async function fs(i,e,t,n,a={}){const l=await Ot(i,e,t,n,a);return"mfaPendingCredential"in l&&vn(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function pA(i,e,t,n){const a=`${e}${t}?${n}`,l=i,c=l.config.emulator?mv(i.config,a):`${i.config.apiScheme}://${a}`;return oP.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function uP(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(en(this.auth,"network-request-failed")),lP.get())})}}function th(i,e,t){const n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const a=en(i,e,n);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(i){return i!==void 0&&i.getResponse!==void 0}function Lb(i){return i!==void 0&&i.enterprise!==void 0}class gA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return uP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hP(i){return(await Ot(i,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function _A(i,e){return Ot(i,"GET","/v2/recaptchaConfig",Pt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(i,e){return Ot(i,"POST","/v1/accounts:delete",e)}async function fP(i,e){return Ot(i,"POST","/v1/accounts:update",e)}async function Em(i,e){return Ot(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mP(i,e=!1){const t=Ie(i),n=await t.getIdToken(e),a=Gm(n);oe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:n,authTime:uh(z_(a.auth_time)),issuedAtTime:uh(z_(a.iat)),expirationTime:uh(z_(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function z_(i){return Number(i)*1e3}function Gm(i){const[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return nm("JWT malformed, contained fewer than 3 sections"),null;try{const a=Zy(t);return a?JSON.parse(a):(nm("Failed to decode base64 JWT payload"),null)}catch(a){return nm("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Ub(i){const e=Gm(i);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function us(i,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Rn&&pP(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function pP({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uh(this.lastLoginAt),this.creationTime=uh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(i){var T;const e=i.auth,t=await i.getIdToken(),n=await us(i,Em(e,{idToken:t}));oe(n==null?void 0:n.users.length,e,"internal-error");const a=n.users[0];i._notifyReloadListener(a);const l=(T=a.providerUserInfo)!=null&&T.length?yA(a.providerUserInfo):[],c=yP(i.providerData,l),f=i.isAnonymous,m=!(i.email&&a.passwordHash)&&!(c!=null&&c.length),g=f?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new uy(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(i,y)}async function _P(i){const e=Ie(i);await Ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yP(i,e){return[...i.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function yA(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(i,e){const t=await mA(i,{},async()=>{const n=Iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,c=await pA(i,a,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:n};return i.emulatorConfig&&Ia(i.emulatorConfig.host)&&(m.credentials="include"),fA.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function TP(i,e){return Ot(i,"POST","/v2/accounts:revokeToken",Pt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ub(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const t=Ub(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:a,expiresIn:l}=await vP(e,t);this.updateTokensAndExpiration(n,a,Number(l))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:a,expirationTime:l}=t,c=new $l;return n&&(oe(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),a&&(oe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(oe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $l,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(i,e){oe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ki{constructor({uid:e,auth:t,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new gP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new uy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await us(this,this.stsTokenManager.getToken(this.auth,e));return oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return mP(this,e)}reload(){return _P(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ki({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ch(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_t(this.auth.app))return Promise.reject(ln(this.auth));const e=await this.getIdToken();return await us(this,dP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:T,emailVerified:I,isAnonymous:D,providerData:F,stsTokenManager:B}=t;oe(T&&B,e,"internal-error");const U=$l.fromJSON(this.name,B);oe(typeof T=="string",e,"internal-error"),Zs(n,e.name),Zs(a,e.name),oe(typeof I=="boolean",e,"internal-error"),oe(typeof D=="boolean",e,"internal-error"),Zs(l,e.name),Zs(c,e.name),Zs(f,e.name),Zs(m,e.name),Zs(g,e.name),Zs(y,e.name);const ne=new Ki({uid:T,auth:e,email:a,emailVerified:I,displayName:n,isAnonymous:D,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:U,createdAt:g,lastLoginAt:y});return F&&Array.isArray(F)&&(ne.providerData=F.map(ie=>({...ie}))),m&&(ne._redirectEventId=m),ne}static async _fromIdTokenResponse(e,t,n=!1){const a=new $l;a.updateFromServerResponse(t);const l=new Ki({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await Ch(l),l}static async _fromGetAccountInfoResponse(e,t,n){const a=t.users[0];oe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?yA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new $l;f.updateFromIdToken(n);const m=new Ki({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new uy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=new Map;function li(i){Wi(i instanceof Function,"Expected a class definition");let e=jb.get(i);return e?(Wi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,jb.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vA.type="NONE";const iu=vA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(i,e,t){return`firebase:${i}:${e}:${t}`}class Yl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:a,name:l}=this.auth;this.fullUserKey=bo(this.userKey,a.apiKey,l),this.fullPersistenceKey=bo("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Em(this.auth,{idToken:e}).catch(()=>{});return t?Ki._fromGetAccountInfoResponse(this.auth,t,e):null}return Ki._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Yl(li(iu),e,n);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||li(iu);const c=bo(n,e.config.apiKey,e.name);let f=null;for(const g of t)try{const y=await g._get(c);if(y){let T;if(typeof y=="string"){const I=await Em(e,{idToken:y}).catch(()=>{});if(!I)break;T=await Ki._fromGetAccountInfoResponse(e,I,y)}else T=Ki._fromJSON(e,y);g!==l&&(f=T),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Yl(l,e,n):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Yl(l,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IA(e))return"Blackberry";if(SA(e))return"Webos";if(EA(e))return"Safari";if((e.includes("chrome/")||wA(e))&&!e.includes("edge/"))return"Chrome";if(Yh(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function TA(i=St()){return/firefox\//i.test(i)}function EA(i=St()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wA(i=St()){return/crios\//i.test(i)}function bA(i=St()){return/iemobile/i.test(i)}function Yh(i=St()){return/android/i.test(i)}function IA(i=St()){return/blackberry/i.test(i)}function SA(i=St()){return/webos/i.test(i)}function Wh(i=St()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function EP(i=St()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(i)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(i)}function wP(i=St()){var e;return Wh(i)&&!!((e=window.navigator)!=null&&e.standalone)}function bP(){return $S()&&document.documentMode===10}function AA(i=St()){return Wh(i)||Yh(i)||SA(i)||IA(i)||/windows phone/i.test(i)||bA(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(i,e=[]){let t;switch(i){case"Browser":t=Bb(St());break;case"Worker":t=`${Bb(St())}-${i}`;break;default:t=i}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ds}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});n.onAbort=t,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(i,e={}){return Ot(i,"GET","/v2/passwordPolicy",Pt(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=6;class RP{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??AP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,t,n,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zb(this),this.idTokenSubscription=new zb(this),this.beforeStateQueue=new IP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=li(t)),this._initializationPromise=this.queue(async()=>{var n,a,l;if(!this._deleted&&(this.persistenceManager=await Yl.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Em(this,{idToken:e}),n=await Ki._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(_t(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=n==null?void 0:n._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(n=m.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(c){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ch(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_t(this.app))return Promise.reject(ln(this));const t=e?Ie(e):null;return t&&oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _t(this.app)?Promise.reject(ln(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _t(this.app)?Promise.reject(ln(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SP(this),t=new RP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bo("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await TP(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&li(e)||this._popupRedirectResolver;oe(t,this,"argument-error"),this.redirectPersistenceManager=await Yl.create(this,[li(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,n,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(_t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&iP(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function At(i){return Ie(i)}class zb{constructor(e){this.auth=e,this.observer=null,this.addObserver=XS(t=>this.observer=t)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CP(i){Xh=i}function pv(i){return Xh.loadJS(i)}function NP(){return Xh.recaptchaV2Script}function DP(){return Xh.recaptchaEnterpriseScript}function PP(){return Xh.gapiScript}function xA(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=500,kP=6e4,Gf=1e12;class VP{constructor(e){this.auth=e,this.counter=Gf,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new UP(e,this.auth.name,t||{})),this.counter++,n}reset(e){var n;const t=e||Gf;(n=this._widgets.get(t))==null||n.delete(),this._widgets.delete(t)}getResponse(e){var n;const t=e||Gf;return((n=this._widgets.get(t))==null?void 0:n.getResponse())||""}async execute(e){var n;const t=e||Gf;return(n=this._widgets.get(t))==null||n.execute(),""}}class MP{constructor(){this.enterprise=new LP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class LP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class UP{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;oe(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=jP(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},kP)},OP))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function jP(i){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<i;n++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const BP="recaptcha-enterprise",ch="NO_RECAPTCHA";class CA{constructor(e){this.type=BP,this.auth=At(e)}async verify(e="verify",t=!1){async function n(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{_A(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new gA(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{f(m)})})}function a(l,c,f){const m=window.grecaptcha;Lb(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(ch)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MP().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{n(this.auth).then(f=>{if(!t&&Lb(window.grecaptcha))a(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=DP();m.length!==0&&(m+=f),pv(m).then(()=>{a(f,l,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function Hc(i,e,t,n=!1,a=!1){const l=new CA(i);let c;if(a)c=ch;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return n?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function ua(i,e,t,n,a){var l,c;if(a==="EMAIL_PASSWORD_PROVIDER")if((l=i._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Hc(i,e,t,t==="getOobCode");return n(i,f)}else return n(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Hc(i,e,t,t==="getOobCode");return n(i,m)}else return Promise.reject(f)});else if(a==="PHONE_PROVIDER")if((c=i._getRecaptchaConfig())!=null&&c.isProviderEnabled("PHONE_PROVIDER")){const f=await Hc(i,e,t);return n(i,f).catch(async m=>{var g;if(((g=i._getRecaptchaConfig())==null?void 0:g.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(m.code==="auth/missing-recaptcha-token"||m.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const y=await Hc(i,e,t,!1,!0);return n(i,y)}return Promise.reject(m)})}else{const f=await Hc(i,e,t,!1,!0);return n(i,f)}else return Promise.reject(a+" provider is not supported.")}async function zP(i){const e=At(i),t=await _A(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new gA(t);e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,n.isAnyProviderEnabled()&&new CA(e).verify()}function FP(i,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(li);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function qP(i,e,t){const n=At(i);oe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!!(t!=null&&t.disableWarnings),l=NA(e),{host:c,port:f}=HP(e),m=f===null?"":`:${f}`,g={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){oe(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),oe(fa(g,n.config.emulator)&&fa(y,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=g,n.emulatorConfig=y,n.settings.appVerificationDisabledForTesting=!0,Ia(c)?(iv(`${l}//${c}${m}`),rv("Auth",!0)):a||GP()}function NA(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function HP(i){const e=NA(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const l=a[1];return{host:l,port:Fb(n.substr(l.length+1))}}else{const[l,c]=n.split(":");return{host:l,port:Fb(c)}}}function Fb(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function GP(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,t){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(i,e){return Ot(i,"POST","/v1/accounts:resetPassword",Pt(i,e))}async function KP(i,e){return Ot(i,"POST","/v1/accounts:update",e)}async function QP(i,e){return Ot(i,"POST","/v1/accounts:signUp",e)}async function $P(i,e){return Ot(i,"POST","/v1/accounts:update",Pt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YP(i,e){return fs(i,"POST","/v1/accounts:signInWithPassword",Pt(i,e))}async function Km(i,e){return Ot(i,"POST","/v1/accounts:sendOobCode",Pt(i,e))}async function WP(i,e){return Km(i,e)}async function XP(i,e){return Km(i,e)}async function JP(i,e){return Km(i,e)}async function ZP(i,e){return Km(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO(i,e){return fs(i,"POST","/v1/accounts:signInWithEmailLink",Pt(i,e))}async function tO(i,e){return fs(i,"POST","/v1/accounts:signInWithEmailLink",Pt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends Au{constructor(e,t,n,a=null){super("password",n),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Nh(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Nh(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ua(e,t,"signInWithPassword",YP,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return eO(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ua(e,n,"signUpPassword",QP,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return tO(e,{idToken:t,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ss(i,e){return fs(i,"POST","/v1/accounts:signInWithIdp",Pt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="http://localhost";class Or extends Au{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Or(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...l}=t;if(!n||!a)return null;const c=new Or(n,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ss(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ss(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ss(e,t)}buildRequest(){const e={requestUri:nO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Iu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(i,e){return Ot(i,"POST","/v1/accounts:sendVerificationCode",Pt(i,e))}async function iO(i,e){return fs(i,"POST","/v1/accounts:signInWithPhoneNumber",Pt(i,e))}async function rO(i,e){const t=await fs(i,"POST","/v1/accounts:signInWithPhoneNumber",Pt(i,e));if(t.temporaryProof)throw th(i,"account-exists-with-different-credential",t);return t}const sO={USER_NOT_FOUND:"user-not-found"};async function aO(i,e){const t={...e,operation:"REAUTH"};return fs(i,"POST","/v1/accounts:signInWithPhoneNumber",Pt(i,t),sO)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Au{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Io({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Io({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return iO(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return rO(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return aO(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:a,temporaryProof:l}=e;return!n&&!t&&!a&&!l?null:new Io({verificationId:t,verificationCode:n,phoneNumber:a,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lO(i){const e=Kl(eh(i)).link,t=e?Kl(eh(e)).deep_link_id:null,n=Kl(eh(i)).deep_link_id;return(n?Kl(eh(n)).link:null)||n||t||e||i}class Qm{constructor(e){const t=Kl(eh(e)),n=t.apiKey??null,a=t.oobCode??null,l=oO(t.mode??null);oe(n&&a&&l,"argument-error"),this.apiKey=n,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=lO(e);try{return new Qm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.providerId=Sa.PROVIDER_ID}static credential(e,t){return Nh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Qm.parseLink(t);return oe(n,"argument-error"),Nh._fromEmailAndCode(e,n.code,n.tenantId)}}Sa.PROVIDER_ID="password";Sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends ms{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Wl extends Ru{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return oe("providerId"in t&&"signInMethod"in t,"argument-error"),Or._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return oe(e.idToken||e.accessToken,"argument-error"),Or._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Wl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Wl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:a,pendingToken:l,nonce:c,providerId:f}=e;if(!n&&!a&&!t&&!l||!f)return null;try{return new Wl(f)._credential({idToken:t,accessToken:n,nonce:c,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Ru{constructor(){super("facebook.com")}static credential(e){return Or._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.FACEBOOK_SIGN_IN_METHOD="facebook.com";Er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Or._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return wr.credential(t,n)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Ru{constructor(){super("github.com")}static credential(e){return Or._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.GITHUB_SIGN_IN_METHOD="github.com";br.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="http://localhost";class ru extends Au{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return ss(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ss(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ss(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,pendingToken:l}=t;return!n||!a||!l||n!==a?null:new ru(n,l)}static _create(e,t){return new ru(e,t)}buildRequest(){return{requestUri:uO,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="saml.";class wm extends ms{constructor(e){oe(e.startsWith(cO),"argument-error"),super(e)}static credentialFromResult(e){return wm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return wm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=ru.fromJSON(e);return oe(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return ru._create(n,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Ru{constructor(){super("twitter.com")}static credential(e,t){return Or._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Ir.credential(t,n)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(i,e){return fs(i,"POST","/v1/accounts:signUp",Pt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,a=!1){const l=await Ki._fromIdTokenResponse(e,n,a),c=Hb(n);return new Ni({user:l,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const a=Hb(n);return new Ni({user:e,providerId:a,_tokenResponse:n,operationType:t})}}function Hb(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hO(i){var a;if(_t(i.app))return Promise.reject(ln(i));const e=At(i);if(await e._initializationPromise,(a=e.currentUser)!=null&&a.isAnonymous)return new Ni({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await PA(e,{returnSecureToken:!0}),n=await Ni._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends Rn{constructor(e,t,n,a){super(t.code,t.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,bm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,a){return new bm(e,t,n,a)}}function OA(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?bm._fromErrorAndOperation(i,l,e,n):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(i){return new Set(i.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(i,e){const t=Ie(i);await $m(!0,t,e);const{providerUserInfo:n}=await fP(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=kA(n||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function gv(i,e,t=!1){const n=await us(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Ni._forOperation(i,"link",n)}async function $m(i,e,t){await Ch(e);const n=kA(e.providerData),a=i===!1?"provider-already-linked":"no-such-provider";oe(n.has(t)===i,e.auth,a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(i,e,t=!1){const{auth:n}=i;if(_t(n.app))return Promise.reject(ln(n));const a="reauthenticate";try{const l=await us(i,OA(n,a,e,i),t);oe(l.idToken,n,"internal-error");const c=Gm(l.idToken);oe(c,n,"internal-error");const{sub:f}=c;return oe(i.uid===f,n,"user-mismatch"),Ni._forOperation(i,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&vn(n,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(i,e,t=!1){if(_t(i.app))return Promise.reject(ln(i));const n="signIn",a=await OA(i,n,e),l=await Ni._fromIdTokenResponse(i,n,a);return t||await i._updateCurrentUser(l.user),l}async function Ym(i,e){return MA(At(i),e)}async function LA(i,e){const t=Ie(i);return await $m(!1,t,e.providerId),gv(t,e)}async function UA(i,e){return VA(Ie(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fO(i,e){return fs(i,"POST","/v1/accounts:signInWithCustomToken",Pt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO(i,e){if(_t(i.app))return Promise.reject(ln(i));const t=At(i),n=await fO(t,{token:e,returnSecureToken:!0}),a=await Ni._fromIdTokenResponse(t,"signIn",n);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?_v._fromServerResponse(e,t):"totpInfo"in t?yv._fromServerResponse(e,t):vn(e,"internal-error")}}class _v extends Jh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new _v(t)}}class yv extends Jh{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new yv(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(i,e,t){var n;oe(((n=t.url)==null?void 0:n.length)>0,i,"invalid-continue-uri"),oe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,i,"invalid-dynamic-link-domain"),oe(typeof t.linkDomain>"u"||t.linkDomain.length>0,i,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(oe(t.iOS.bundleId.length>0,i,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(oe(t.android.packageName.length>0,i,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vv(i){const e=At(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pO(i,e,t){const n=At(i),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Wm(n,a,t),await ua(n,a,"getOobCode",XP,"EMAIL_PASSWORD_PROVIDER")}async function gO(i,e,t){await DA(Ie(i),{oobCode:e,newPassword:t}).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&vv(i),n})}async function _O(i,e){await $P(Ie(i),{oobCode:e})}async function jA(i,e){const t=Ie(i),n=await DA(t,{oobCode:e}),a=n.requestType;switch(oe(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(n.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(n.mfaInfo,t,"internal-error");default:oe(n.email,t,"internal-error")}let l=null;return n.mfaInfo&&(l=Jh._fromServerResponse(At(t),n.mfaInfo)),{data:{email:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.newEmail:n.email)||null,previousEmail:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.email:n.newEmail)||null,multiFactorInfo:l},operation:a}}async function yO(i,e){const{data:t}=await jA(Ie(i),e);return t.email}async function vO(i,e,t){if(_t(i.app))return Promise.reject(ln(i));const n=At(i),c=await ua(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PA,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&vv(i),m}),f=await Ni._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(f.user),f}function BA(i,e,t){return _t(i.app)?Promise.reject(ln(i)):Ym(Ie(i),Sa.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&vv(i),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(i,e,t){const n=At(i),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(c,f){oe(f.handleCodeInApp,n,"argument-error"),f&&Wm(n,c,f)}l(a,t),await ua(n,a,"getOobCode",JP,"EMAIL_PASSWORD_PROVIDER")}function EO(i,e){const t=Qm.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function wO(i,e,t){if(_t(i.app))return Promise.reject(ln(i));const n=Ie(i),a=Sa.credentialWithLink(e,t||xh());return oe(a._tenantId===(n.tenantId||null),n,"tenant-id-mismatch"),Ym(n,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(i,e){return Ot(i,"POST","/v1/accounts:createAuthUri",Pt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(i,e){const t=fv()?xh():"http://localhost",n={identifier:e,continueUri:t},{signinMethods:a}=await bO(Ie(i),n);return a||[]}async function SO(i,e){const t=Ie(i),a={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()};e&&Wm(t.auth,a,e);const{email:l}=await WP(t.auth,a);l!==i.email&&await i.reload()}async function AO(i,e,t){const n=Ie(i),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await i.getIdToken(),newEmail:e};t&&Wm(n.auth,l,t);const{email:c}=await ZP(n.auth,l);c!==i.email&&await i.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO(i,e){return Ot(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Ie(i),l={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await us(n,RO(n.auth,l));n.displayName=c.displayName||null,n.photoURL=c.photoUrl||null;const f=n.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=n.displayName,f.photoURL=n.photoURL),await n._updateTokensIfNecessary(c)}function CO(i,e){const t=Ie(i);return _t(t.auth.app)?Promise.reject(ln(t.auth)):zA(t,e,null)}function NO(i,e){return zA(Ie(i),null,e)}async function zA(i,e,t){const{auth:n}=i,l={idToken:await i.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const c=await us(i,KP(n,l));await i._updateTokensIfNecessary(c,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(i){var a,l;if(!i)return null;const{providerId:e}=i,t=i.rawUserInfo?JSON.parse(i.rawUserInfo):{},n=i.isNewUser||i.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(i!=null&&i.idToken)){const c=(l=(a=Gm(i.idToken))==null?void 0:a.firebase)==null?void 0:l.sign_in_provider;if(c){const f=c!=="anonymous"&&c!=="custom"?c:null;return new Xl(n,f)}}if(!e)return null;switch(e){case"facebook.com":return new PO(n,t);case"github.com":return new OO(n,t);case"google.com":return new kO(n,t);case"twitter.com":return new VO(n,t,i.screenName||null);case"custom":case"anonymous":return new Xl(n,null);default:return new Xl(n,e,t)}}class Xl{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class FA extends Xl{constructor(e,t,n,a){super(e,t,n),this.username=a}}class PO extends Xl{constructor(e,t){super(e,"facebook.com",t)}}class OO extends FA{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class kO extends Xl{constructor(e,t){super(e,"google.com",t)}}class VO extends FA{constructor(e,t,n){super(e,"twitter.com",t,n)}}function MO(i){const{user:e,_tokenResponse:t}=i;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:DO(t)}function LO(i,e,t,n){return Ie(i).onAuthStateChanged(e,t,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new vo("enroll",e,t)}static _fromMfaPendingCredential(e){return new vo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(e!=null&&e.multiFactorSession){if((t=e.multiFactorSession)!=null&&t.pendingCredential)return vo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((n=e.multiFactorSession)!=null&&n.idToken)return vo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=At(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(f=>Jh._fromServerResponse(n,f));oe(a.mfaPendingCredential,n,"internal-error");const c=vo._fromMfaPendingCredential(a.mfaPendingCredential);return new Tv(c,l,async f=>{const m=await f._process(n,c);delete a.mfaInfo,delete a.mfaPendingCredential;const g={...a,idToken:m.idToken,refreshToken:m.refreshToken};switch(t.operationType){case"signIn":const y=await Ni._fromIdTokenResponse(n,t.operationType,g);return await n._updateCurrentUser(y.user),y;case"reauthenticate":return oe(t.user,n,"internal-error"),Ni._forOperation(t.user,t.operationType,g);default:vn(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function UO(i,e){var a;const t=Ie(i),n=e;return oe(e.customData.operationType,t,"argument-error"),oe((a=n.customData._serverResponse)==null?void 0:a.mfaPendingCredential,t,"argument-error"),Tv._fromError(t,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(i,e){return Ot(i,"POST","/v2/accounts/mfaEnrollment:start",Pt(i,e))}function jO(i,e){return Ot(i,"POST","/v2/accounts/mfaEnrollment:finalize",Pt(i,e))}function BO(i,e){return Ot(i,"POST","/v2/accounts/mfaEnrollment:withdraw",Pt(i,e))}class Ev{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(n=>Jh._fromServerResponse(e.auth,n)))})}static _fromUser(e){return new Ev(e)}async getSession(){return vo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,a=await this.getSession(),l=await us(this.user,n._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,n=await this.user.getIdToken();try{const a=await us(this.user,BO(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const F_=new WeakMap;function zO(i){const e=Ie(i);return F_.has(e)||F_.set(e,Ev._fromUser(e)),F_.get(e)}const Im="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Im,"1"),this.storage.removeItem(Im),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=1e3,qO=10;class HA extends qA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),a=this.localCache[t];n!==a&&e(t,a,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const n=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},l=this.storage.getItem(n);bP()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,qO):a()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},FO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}HA.type="LOCAL";const wv=HA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA extends qA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}GA.type="SESSION";const Ro=GA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const n=new Xm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const f=Array.from(c).map(async g=>g(t.origin,l)),m=await HO(f);t.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const g=Zh("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},n);c={messageChannel:a,onMessage(T){const I=T;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return window}function KO(i){Wt().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(){return typeof Wt().WorkerGlobalScope<"u"&&typeof Wt().importScripts=="function"}async function QO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $O(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function YO(){return bv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="firebaseLocalStorageDb",WO=1,Sm="firebaseLocalStorage",QA="fbase_key";class ed{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jm(i,e){return i.transaction([Sm],e?"readwrite":"readonly").objectStore(Sm)}function XO(){const i=indexedDB.deleteDatabase(KA);return new ed(i).toPromise()}function cy(){const i=indexedDB.open(KA,WO);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(Sm,{keyPath:QA})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(Sm)?e(n):(n.close(),await XO(),e(await cy()))})})}async function Kb(i,e,t){const n=Jm(i,!0).put({[QA]:e,value:t});return new ed(n).toPromise()}async function JO(i,e){const t=Jm(i,!1).get(e),n=await new ed(t).toPromise();return n===void 0?null:n.value}function Qb(i,e){const t=Jm(i,!0).delete(e);return new ed(t).toPromise()}const ZO=800,ek=3;class $A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>ek)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xm._getInstance(YO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await QO(),!this.activeServiceWorker)return;this.sender=new GO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$O()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cy();return await Kb(e,Im,"1"),await Qb(e,Im),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kb(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>JO(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Qb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Jm(a,!1).getAll();return new ed(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$A.type="LOCAL";const Dh=$A;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(i,e){return Ot(i,"POST","/v2/accounts/mfaSignIn:start",Pt(i,e))}function tk(i,e){return Ot(i,"POST","/v2/accounts/mfaSignIn:finalize",Pt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=xA("rcb"),nk=new $h(3e4,6e4);class ik{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Wt().grecaptcha)!=null&&e.render)}load(e,t=""){return oe(rk(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Mb(Wt().grecaptcha)?Promise.resolve(Wt().grecaptcha):new Promise((n,a)=>{const l=Wt().setTimeout(()=>{a(en(e,"network-request-failed"))},nk.get());Wt()[q_]=()=>{Wt().clearTimeout(l),delete Wt()[q_];const f=Wt().grecaptcha;if(!f||!Mb(f)){a(en(e,"internal-error"));return}const m=f.render;f.render=(g,y)=>{const T=m(g,y);return this.counter++,T},this.hostLanguage=t,n(f)};const c=`${NP()}?${Iu({onload:q_,render:"explicit",hl:t})}`;pv(c).catch(()=>{clearTimeout(l),a(en(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=Wt().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function rk(i){return i.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(i)}class sk{async load(e){return new VP(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="recaptcha",ak={theme:"light",type:"image"};let ok=class{constructor(e,t,n={...ak}){this.parameters=n,this.type=hh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=At(e),this.isInvisible=this.parameters.size==="invisible",oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;oe(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sk:new ik,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(a=>{const l=c=>{c&&(this.tokenChangeListeners.delete(l),a(c))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(n=>n(t)),typeof e=="function")e(t);else if(typeof e=="string"){const n=Wt()[e];typeof n=="function"&&n(t)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){oe(fv()&&!bv(),this.auth,"internal-error"),await lk(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await hP(this.auth);oe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function lk(){let i=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}i=()=>e(),window.addEventListener("load",i)}).catch(e=>{throw i&&window.removeEventListener("load",i),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Io._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function uk(i,e,t){if(_t(i.app))return Promise.reject(ln(i));const n=At(i),a=await Zm(n,e,Ie(t));return new Iv(a,l=>Ym(n,l))}async function ck(i,e,t){const n=Ie(i);await $m(!1,n,"phone");const a=await Zm(n.auth,e,Ie(t));return new Iv(a,l=>LA(n,l))}async function hk(i,e,t){const n=Ie(i);if(_t(n.auth.app))return Promise.reject(ln(n.auth));const a=await Zm(n.auth,e,Ie(t));return new Iv(a,l=>UA(n,l))}async function Zm(i,e,t){var n;if(!i._getRecaptchaConfig())try{await zP(i)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const l=a.session;if("phoneNumber"in a){oe(l.type==="enroll",i,"internal-error");const c={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ua(i,c,"mfaSmsEnrollment",async(y,T)=>{if(T.phoneEnrollmentInfo.captchaResponse===ch){oe((t==null?void 0:t.type)===hh,y,"argument-error");const I=await H_(y,T,t);return Gb(y,I)}return Gb(y,T)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneSessionInfo.sessionInfo}else{oe(l.type==="signin",i,"internal-error");const c=((n=a.multiFactorHint)==null?void 0:n.uid)||a.multiFactorUid;oe(c,i,"missing-multi-factor-info");const f={mfaPendingCredential:l.credential,mfaEnrollmentId:c,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ua(i,f,"mfaSmsSignIn",async(T,I)=>{if(I.phoneSignInInfo.captchaResponse===ch){oe((t==null?void 0:t.type)===hh,T,"argument-error");const D=await H_(T,I,t);return $b(T,D)}return $b(T,I)},"PHONE_PROVIDER").catch(T=>Promise.reject(T))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ua(i,l,"sendVerificationCode",async(g,y)=>{if(y.captchaResponse===ch){oe((t==null?void 0:t.type)===hh,g,"argument-error");const T=await H_(g,y,t);return qb(g,T)}return qb(g,y)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).sessionInfo}}finally{t==null||t._reset()}}async function dk(i,e){const t=Ie(i);if(_t(t.auth.app))return Promise.reject(ln(t.auth));await gv(t,e)}async function H_(i,e,t){oe(t.type===hh,i,"argument-error");const n=await t.verify();oe(typeof n=="string",i,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.captchaResponse,f=a.phoneEnrollmentInfo.clientType,m=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:n,captchaResponse:c,clientType:f,recaptchaVersion:m}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,c=a.phoneSignInInfo.clientType,f=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:n,captchaResponse:l,clientType:c,recaptchaVersion:f}}),a}else return Object.assign(a,{recaptchaToken:n}),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xo=class im{constructor(e){this.providerId=im.PROVIDER_ID,this.auth=At(e)}verifyPhoneNumber(e,t){return Zm(this.auth,e,Ie(t))}static credential(e,t){return Io._fromVerification(e,t)}static credentialFromResult(e){const t=e;return im.credentialFromTaggedObject(t)}static credentialFromError(e){return im.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Io._fromTokenResponse(t,n):null}};xo.PROVIDER_ID="phone";xo.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(i,e){return e?li(e):(oe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv extends Au{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ss(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ss(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ss(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fk(i){return MA(i.auth,new Sv(i),i.bypassAuthState)}function mk(i){const{auth:e,user:t}=i;return oe(t,e,"internal-error"),VA(t,new Sv(i),i.bypassAuthState)}async function pk(i){const{auth:e,user:t}=i;return oe(t,e,"internal-error"),gv(t,new Sv(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,t,n,a,l=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:n,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fk;case"linkViaPopup":case"linkViaRedirect":return pk;case"reauthViaPopup":case"reauthViaRedirect":return mk;default:vn(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new $h(2e3,1e4);async function _k(i,e,t){if(_t(i.app))return Promise.reject(en(i,"operation-not-supported-in-this-environment"));const n=At(i);Su(i,e,ms);const a=zo(n,t);return new is(n,"signInViaPopup",e,a).executeNotNull()}async function yk(i,e,t){const n=Ie(i);if(_t(n.auth.app))return Promise.reject(en(n.auth,"operation-not-supported-in-this-environment"));Su(n.auth,e,ms);const a=zo(n.auth,t);return new is(n.auth,"reauthViaPopup",e,a,n).executeNotNull()}async function vk(i,e,t){const n=Ie(i);Su(n.auth,e,ms);const a=zo(n.auth,t);return new is(n.auth,"linkViaPopup",e,a,n).executeNotNull()}class is extends YA{constructor(e,t,n,a,l){super(e,t,a,l),this.provider=n,this.authWindow=null,this.pollId=null,is.currentPopupAction&&is.currentPopupAction.cancel(),is.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Wi(this.filter.length===1,"Popup operations only handle one event");const e=Zh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(en(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,is.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gk.get())};e()}}is.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="pendingRedirect",dh=new Map;class Ek extends YA{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=dh.get(this.auth._key());if(!e){try{const n=await wk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}dh.set(this.auth._key(),e)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wk(i,e){const t=XA(e),n=WA(i);if(!await n._isAvailable())return!1;const a=await n._get(t)==="true";return await n._remove(t),a}async function Av(i,e){return WA(i)._set(XA(e),"true")}function bk(){dh.clear()}function Rv(i,e){dh.set(i._key(),e)}function WA(i){return li(i._redirectPersistence)}function XA(i){return bo(Tk,i.config.apiKey,i.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(i,e,t){return Sk(i,e,t)}async function Sk(i,e,t){if(_t(i.app))return Promise.reject(ln(i));const n=At(i);Su(i,e,ms),await n._initializationPromise;const a=zo(n,t);return await Av(a,n),a._openRedirect(n,e,"signInViaRedirect")}function Ak(i,e,t){return Rk(i,e,t)}async function Rk(i,e,t){const n=Ie(i);if(Su(n.auth,e,ms),_t(n.auth.app))return Promise.reject(ln(n.auth));await n.auth._initializationPromise;const a=zo(n.auth,t);await Av(a,n.auth);const l=await JA(n);return a._openRedirect(n.auth,e,"reauthViaRedirect",l)}function xk(i,e,t){return Ck(i,e,t)}async function Ck(i,e,t){const n=Ie(i);Su(n.auth,e,ms),await n.auth._initializationPromise;const a=zo(n.auth,t);await $m(!1,n,e.providerId),await Av(a,n.auth);const l=await JA(n);return a._openRedirect(n.auth,e,"linkViaRedirect",l)}async function Nk(i,e){return await At(i)._initializationPromise,ep(i,e,!1)}async function ep(i,e,t=!1){if(_t(i.app))return Promise.reject(ln(i));const n=At(i),a=zo(n,e),c=await new Ek(n,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}async function JA(i){const e=Zh(`${i.uid}:::`);return i._redirectEventId=e,await i.auth._setRedirectUser(i),await i.auth._persistUserIfCurrent(i),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=600*1e3;class ZA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Pk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!eR(e)){const a=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(en(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yb(e))}saveEventToCache(e){this.cachedEventUids.add(Yb(e)),this.lastProcessedEventTime=Date.now()}}function Yb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function eR({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Pk(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eR(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(i,e={}){return Ot(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kk=/^https?/;async function Vk(i){if(i.config.emulator)return;const{authorizedDomains:e}=await tR(i);for(const t of e)try{if(Mk(t))return}catch{}vn(i,"unauthorized-domain")}function Mk(i){const e=xh(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!kk.test(t))return!1;if(Ok.test(i))return n===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=new $h(3e4,6e4);function Wb(){const i=Wt().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function Uk(i){return new Promise((e,t)=>{var a,l,c;function n(){Wb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wb(),t(en(i,"network-request-failed"))},timeout:Lk.get()})}if((l=(a=Wt().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Wt().gapi)!=null&&c.load)n();else{const f=xA("iframefcb");return Wt()[f]=()=>{gapi.load?n():t(en(i,"network-request-failed"))},pv(`${PP()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw rm=null,e})}let rm=null;function jk(i){return rm=rm||Uk(i),rm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=new $h(5e3,15e3),zk="__/auth/iframe",Fk="emulator/auth/iframe",qk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gk(i){const e=i.config;oe(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?mv(e,Fk):`https://${i.config.authDomain}/${zk}`,n={apiKey:e.apiKey,appName:i.name,v:ds},a=Hk.get(i.config.apiHost);a&&(n.eid=a);const l=i._getFrameworks();return l.length&&(n.fw=l.join(",")),`${t}?${Iu(n).slice(1)}`}async function Kk(i){const e=await jk(i),t=Wt().gapi;return oe(t,i,"internal-error"),e.open({where:document.body,url:Gk(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qk,dontclear:!0},n=>new Promise(async(a,l)=>{await n.restyle({setHideOnLeave:!1});const c=en(i,"network-request-failed"),f=Wt().setTimeout(()=>{l(c)},Bk.get());function m(){Wt().clearTimeout(f),a(n)}n.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$k=500,Yk=600,Wk="_blank",Xk="http://localhost";class Xb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Jk(i,e,t,n=$k,a=Yk){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let f="";const m={...Qk,width:n.toString(),height:a.toString(),top:l,left:c},g=St().toLowerCase();t&&(f=wA(g)?Wk:t),TA(g)&&(e=e||Xk,m.scrollbars="yes");const y=Object.entries(m).reduce((I,[D,F])=>`${I}${D}=${F},`,"");if(wP(g)&&f!=="_self")return Zk(e||"",f),new Xb(null);const T=window.open(e||"",f,y);oe(T,i,"popup-blocked");try{T.focus()}catch{}return new Xb(T)}function Zk(i,e){const t=document.createElement("a");t.href=i,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="__/auth/handler",tV="emulator/auth/handler",nV=encodeURIComponent("fac");async function hy(i,e,t,n,a,l){oe(i.config.authDomain,i,"auth-domain-config-required"),oe(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:ds,eventId:a};if(e instanceof ms){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",CD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,T]of Object.entries(l||{}))c[y]=T}if(e instanceof Ru){const y=e.getScopes().filter(T=>T!=="");y.length>0&&(c.scopes=y.join(","))}i.tenantId&&(c.tid=i.tenantId);const f=c;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const m=await i._getAppCheckToken(),g=m?`#${nV}=${encodeURIComponent(m)}`:"";return`${iV(i)}?${Iu(f).slice(1)}${g}`}function iV({config:i}){return i.emulator?mv(i,tV):`https://${i.authDomain}/${eV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="webStorageSupport";class rV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ro,this._completeRedirectFn=ep,this._overrideRedirectResult=Rv}async _openPopup(e,t,n,a){var c;Wi((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await hy(e,t,n,xh(),a);return Jk(e,l,Zh())}async _openRedirect(e,t,n,a){await this._originValidation(e);const l=await hy(e,t,n,xh(),a);return KO(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Wi(l,"If manager is not set, promise should be"),l)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Kk(e),n=new ZA(e);return t.register("authEvent",a=>(oe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(G_,{type:G_},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[G_];l!==void 0&&t(!!l),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Vk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return AA()||EA()||Wh()}}const sV=rV;class aV{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ar("unexpected MultiFactorSessionType")}}}class xv extends aV{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new xv(e)}_finalizeEnroll(e,t,n){return jO(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return tk(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class nR{constructor(){}static assertion(e){return xv._fromCredential(e)}}nR.FACTOR_ID="phone";var Jb="@firebase/auth",Zb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uV(i){ls(new Ci("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=n.options;oe(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const m={apiKey:c,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RA(i)},g=new xP(n,a,l,m);return FP(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ls(new Ci("auth-internal",e=>{const t=At(e.getProvider("auth").getImmediate());return(n=>new oV(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ci(Jb,Zb,lV(i)),ci(Jb,Zb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=300;yD("authIdTokenMaxAge");function hV(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}CP({loadJS(i){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=a=>{const l=en("internal-error");l.customData=a,t(l)},n.type="text/javascript",n.charset="UTF-8",hV().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uV("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=2e3;async function fV(i,e,t){const{BuildInfo:n}=Co();Wi(e.sessionId,"AuthEvent did not contain a session ID");const a=await yV(e.sessionId),l={};return Wh()?l.ibi=n.packageName:Yh()?l.apn=n.packageName:vn(i,"operation-not-supported-in-this-environment"),n.displayName&&(l.appDisplayName=n.displayName),l.sessionId=a,hy(i,t,e.type,void 0,e.eventId??void 0,l)}async function mV(i){const{BuildInfo:e}=Co(),t={};Wh()?t.iosBundleId=e.packageName:Yh()?t.androidPackageName=e.packageName:vn(i,"operation-not-supported-in-this-environment"),await tR(i,t)}function pV(i){const{cordova:e}=Co();return new Promise(t=>{e.plugins.browsertab.isAvailable(n=>{let a=null;n?e.plugins.browsertab.openUrl(i):a=e.InAppBrowser.open(i,EP()?"_blank":"_system","location=yes"),t(a)})})}async function gV(i,e,t){const{cordova:n}=Co();let a=()=>{};try{await new Promise((l,c)=>{let f=null;function m(){var I;l();const T=(I=n.plugins.browsertab)==null?void 0:I.close;typeof T=="function"&&T(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function g(){f||(f=window.setTimeout(()=>{c(en(i,"redirect-cancelled-by-user"))},dV))}function y(){(document==null?void 0:document.visibilityState)==="visible"&&g()}e.addPassiveListener(m),document.addEventListener("resume",g,!1),Yh()&&document.addEventListener("visibilitychange",y,!1),a=()=>{e.removePassiveListener(m),document.removeEventListener("resume",g,!1),document.removeEventListener("visibilitychange",y,!1),f&&window.clearTimeout(f)}})}finally{a()}}function _V(i){var t,n,a,l,c,f,m,g,y,T;const e=Co();oe(typeof((t=e==null?void 0:e.universalLinks)==null?void 0:t.subscribe)=="function",i,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof((n=e==null?void 0:e.BuildInfo)==null?void 0:n.packageName)<"u",i,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe(typeof((c=(l=(a=e==null?void 0:e.cordova)==null?void 0:a.plugins)==null?void 0:l.browsertab)==null?void 0:c.openUrl)=="function",i,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe(typeof((g=(m=(f=e==null?void 0:e.cordova)==null?void 0:f.plugins)==null?void 0:m.browsertab)==null?void 0:g.isAvailable)=="function",i,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe(typeof((T=(y=e==null?void 0:e.cordova)==null?void 0:y.InAppBrowser)==null?void 0:T.open)=="function",i,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function yV(i){const e=vV(i),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function vV(i){if(Wi(/[0-9a-zA-Z]+/.test(i),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(i);const e=new ArrayBuffer(i.length),t=new Uint8Array(e);for(let n=0;n<i.length;n++)t[n]=i.charCodeAt(n);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=20;class EV extends ZA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function wV(i,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:SV(),postBody:null,tenantId:i.tenantId,error:en(i,"no-auth-event")}}function bV(i,e){return dy()._set(fy(i),e)}async function eI(i){const e=await dy()._get(fy(i));return e&&await dy()._remove(fy(i)),e}function IV(i,e){var n,a;const t=RV(e);if(t.includes("/__/auth/callback")){const l=sm(t),c=l.firebaseError?AV(decodeURIComponent(l.firebaseError)):null,f=(a=(n=c==null?void 0:c.code)==null?void 0:n.split("auth/"))==null?void 0:a[1],m=f?en(f):null;return m?{type:i.type,eventId:i.eventId,tenantId:i.tenantId,error:m,urlResponse:null,sessionId:null,postBody:null}:{type:i.type,eventId:i.eventId,tenantId:i.tenantId,sessionId:i.sessionId,urlResponse:t,postBody:null}}return null}function SV(){const i=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<TV;t++){const n=Math.floor(Math.random()*e.length);i.push(e.charAt(n))}return i.join("")}function dy(){return li(wv)}function fy(i){return bo("authEvent",i.config.apiKey,i.name)}function AV(i){try{return JSON.parse(i)}catch{return null}}function RV(i){const e=sm(i),t=e.link?decodeURIComponent(e.link):void 0,n=sm(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return sm(a).link||a||n||t||i}function sm(i){if(!(i!=null&&i.includes("?")))return{};const[e,...t]=i.split("?");return Kl(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=500;class CV{constructor(){this._redirectPersistence=Ro,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ep,this._overrideRedirectResult=Rv}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new EV(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){vn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,a){_V(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),bk(),await this._originValidation(e);const c=wV(e,n,a);await bV(e,c);const f=await fV(e,c,t),m=await pV(f);return gV(e,l,m)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mV(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:a,BuildInfo:l}=Co(),c=setTimeout(async()=>{await eI(e),t.onEvent(tI())},xV),f=async y=>{clearTimeout(c);const T=await eI(e);let I=null;T&&(y!=null&&y.url)&&(I=IV(T,y.url)),t.onEvent(I||tI())};typeof n<"u"&&typeof n.subscribe=="function"&&n.subscribe(null,f);const m=a,g=`${l.packageName.toLowerCase()}://`;Co().handleOpenURL=async y=>{if(y.toLowerCase().startsWith(g)&&f({url:y}),typeof m=="function")try{m(y)}catch(T){console.error(T)}}}}const NV=CV;function tI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:en("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(i,e){At(i)._logFramework(e)}var PV="@firebase/auth-compat",OV="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=1e3;function fh(){var i;return((i=self==null?void 0:self.location)==null?void 0:i.protocol)||null}function VV(){return fh()==="http:"||fh()==="https:"}function iR(i=St()){return!!((fh()==="file:"||fh()==="ionic:"||fh()==="capacitor:")&&i.toLowerCase().match(/iphone|ipad|ipod|android/))}function MV(){return sv()||qm()}function LV(){return $S()&&(document==null?void 0:document.documentMode)===11}function UV(i=St()){return/Edge\/\d+/.test(i)}function jV(i=St()){return LV()||UV(i)}function rR(){try{const i=self.localStorage,e=Zh();if(i)return i.setItem(e,"1"),i.removeItem(e),jV()?Sh():!0}catch{return Cv()&&Sh()}return!1}function Cv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function K_(){return(VV()||QS()||iR())&&!MV()&&rR()&&!Cv()}function sR(){return iR()&&typeof document<"u"}async function BV(){return sR()?new Promise(i=>{const e=setTimeout(()=>{i(!1)},kV);document.addEventListener("deviceready",()=>{clearTimeout(e),i(!0)})}):!1}function zV(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi={LOCAL:"local",NONE:"none",SESSION:"session"},Gc=oe,aR="persistence";function FV(i,e){if(Gc(Object.values(oi).includes(e),i,"invalid-persistence-type"),sv()){Gc(e!==oi.SESSION,i,"unsupported-persistence-type");return}if(qm()){Gc(e===oi.NONE,i,"unsupported-persistence-type");return}if(Cv()){Gc(e===oi.NONE||e===oi.LOCAL&&Sh(),i,"unsupported-persistence-type");return}Gc(e===oi.NONE||rR(),i,"unsupported-persistence-type")}async function my(i){await i._initializationPromise;const e=oR(),t=bo(aR,i.config.apiKey,i.name);e&&e.setItem(t,i._getPersistenceType())}function qV(i,e){const t=oR();if(!t)return[];const n=bo(aR,i,e);switch(t.getItem(n)){case oi.NONE:return[iu];case oi.LOCAL:return[Dh,Ro];case oi.SESSION:return[Ro];default:return[]}}function oR(){var i;try{return((i=zV())==null?void 0:i.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=oe;class sa{constructor(){this.browserResolver=li(sV),this.cordovaResolver=li(NV),this.underlyingResolver=null,this._redirectPersistence=Ro,this._completeRedirectFn=ep,this._overrideRedirectResult=Rv}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,a)}async _openRedirect(e,t,n,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return sR()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return HV(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await BV();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(i){return i.unwrap()}function GV(i){return i.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(i){return uR(i)}function QV(i,e){var n;const t=(n=e.customData)==null?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const a=e;a.resolver=new $V(i,UO(i,e))}else if(t){const a=uR(e),l=e;a&&(l.credential=a,l.tenantId=t.tenantId||void 0,l.email=t.email||void 0,l.phoneNumber=t.phoneNumber||void 0)}}function uR(i){const{_tokenResponse:e}=i instanceof Rn?i.customData:i;if(!e)return null;if(!(i instanceof Rn)&&"temporaryProof"in e&&"phoneNumber"in e)return xo.credentialFromResult(i);const t=e.providerId;if(!t||t===qc.PASSWORD)return null;let n;switch(t){case qc.GOOGLE:n=wr;break;case qc.FACEBOOK:n=Er;break;case qc.GITHUB:n=br;break;case qc.TWITTER:n=Ir;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:c,pendingToken:f,nonce:m}=e;return!l&&!c&&!a&&!f?null:f?t.startsWith("saml.")?ru._create(t,f):Or._fromParams({providerId:t,signInMethod:t,pendingToken:f,idToken:a,accessToken:l}):new Wl(t).credential({idToken:a,accessToken:l,rawNonce:m})}return i instanceof Rn?n.credentialFromError(i):n.credentialFromResult(i)}function Qn(i,e){return e.catch(t=>{throw t instanceof Rn&&QV(i,t),t}).then(t=>{const n=t.operationType,a=t.user;return{operationType:n,credential:KV(t),additionalUserInfo:MO(t),user:tp.getOrCreate(a)}})}async function py(i,e){const t=await e;return{verificationId:t.verificationId,confirm:n=>Qn(i,t.confirm(n))}}class $V{constructor(e,t){this.resolver=t,this.auth=GV(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Qn(lR(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tp=class nh{constructor(e){this._delegate=e,this.multiFactor=zO(e)}static getOrCreate(e){return nh.USER_MAP.has(e)||nh.USER_MAP.set(e,new nh(e)),nh.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Qn(this.auth,LA(this._delegate,e))}async linkWithPhoneNumber(e,t){return py(this.auth,ck(this._delegate,e,t))}async linkWithPopup(e){return Qn(this.auth,vk(this._delegate,e,sa))}async linkWithRedirect(e){return await my(At(this.auth)),xk(this._delegate,e,sa)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Qn(this.auth,UA(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return py(this.auth,hk(this._delegate,e,t))}reauthenticateWithPopup(e){return Qn(this.auth,yk(this._delegate,e,sa))}async reauthenticateWithRedirect(e){return await my(At(this.auth)),Ak(this._delegate,e,sa)}sendEmailVerification(e){return SO(this._delegate,e)}async unlink(e){return await dO(this._delegate,e),this}updateEmail(e){return CO(this._delegate,e)}updatePassword(e){return NO(this._delegate,e)}updatePhoneNumber(e){return dk(this._delegate,e)}updateProfile(e){return xO(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return AO(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};tp.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=oe;class gy{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:n}=e.options;Kc(n,"invalid-api-key",{appName:e.name}),Kc(n,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?sa:void 0;this._delegate=t.initialize({options:{persistence:YV(n,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(tP),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?tp.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){qP(this._delegate,e,t)}applyActionCode(e){return _O(this._delegate,e)}checkActionCode(e){return jA(this._delegate,e)}confirmPasswordReset(e,t){return gO(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Qn(this._delegate,vO(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return IO(this._delegate,e)}isSignInWithEmailLink(e){return EO(this._delegate,e)}async getRedirectResult(){Kc(K_(),this._delegate,"operation-not-supported-in-this-environment");const e=await Nk(this._delegate,sa);return e?Qn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){DV(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:a,error:l,complete:c}=nI(e,t,n);return this._delegate.onAuthStateChanged(a,l,c)}onIdTokenChanged(e,t,n){const{next:a,error:l,complete:c}=nI(e,t,n);return this._delegate.onIdTokenChanged(a,l,c)}sendSignInLinkToEmail(e,t){return TO(this._delegate,e,t)}sendPasswordResetEmail(e,t){return pO(this._delegate,e,t||void 0)}async setPersistence(e){FV(this._delegate,e);let t;switch(e){case oi.SESSION:t=Ro;break;case oi.LOCAL:t=await li(Dh)._isAvailable()?Dh:wv;break;case oi.NONE:t=iu;break;default:return vn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Qn(this._delegate,hO(this._delegate))}signInWithCredential(e){return Qn(this._delegate,Ym(this._delegate,e))}signInWithCustomToken(e){return Qn(this._delegate,mO(this._delegate,e))}signInWithEmailAndPassword(e,t){return Qn(this._delegate,BA(this._delegate,e,t))}signInWithEmailLink(e,t){return Qn(this._delegate,wO(this._delegate,e,t))}signInWithPhoneNumber(e,t){return py(this._delegate,uk(this._delegate,e,t))}async signInWithPopup(e){return Kc(K_(),this._delegate,"operation-not-supported-in-this-environment"),Qn(this._delegate,_k(this._delegate,e,sa))}async signInWithRedirect(e){return Kc(K_(),this._delegate,"operation-not-supported-in-this-environment"),await my(this._delegate),Ik(this._delegate,e,sa)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return yO(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}gy.Persistence=oi;function nI(i,e,t){let n=i;typeof i!="function"&&({next:n,error:e,complete:t}=i);const a=n;return{next:c=>a(c&&tp.getOrCreate(c)),error:e,complete:t}}function YV(i,e){const t=qV(i,e);if(typeof self<"u"&&!t.includes(Dh)&&t.push(Dh),typeof window<"u")for(const n of[wv,Ro])t.includes(n)||t.push(n);return t.includes(iu)||t.push(iu),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{static credential(e,t){return xo.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new xo(lR(Yi.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Nv.PHONE_SIGN_IN_METHOD=xo.PHONE_SIGN_IN_METHOD;Nv.PROVIDER_ID=xo.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=oe;class XV{constructor(e,t,n=Yi.app()){var a;WV((a=n.options)==null?void 0:a.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new ok(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV="auth-compat";function ZV(i){i.INTERNAL.registerComponent(new Ci(JV,e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new gy(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ol.EMAIL_SIGNIN,PASSWORD_RESET:Ol.PASSWORD_RESET,RECOVER_EMAIL:Ol.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ol.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ol.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ol.VERIFY_EMAIL}},EmailAuthProvider:Sa,FacebookAuthProvider:Er,GithubAuthProvider:br,GoogleAuthProvider:wr,OAuthProvider:Wl,SAMLAuthProvider:wm,PhoneAuthProvider:Nv,PhoneMultiFactorGenerator:nR,RecaptchaVerifier:XV,TwitterAuthProvider:Ir,Auth:gy,AuthCredential:Au,Error:Rn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),i.registerVersion(PV,OV)}ZV(Yi);var iI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ca,cR;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,R){function C(){}C.prototype=R.prototype,x.F=R.prototype,x.prototype=new C,x.prototype.constructor=x,x.D=function(V,O,M){for(var A=Array(arguments.length-2),De=2;De<arguments.length;De++)A[De-2]=arguments[De];return R.prototype[O].apply(V,A)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,R,C){C||(C=0);const V=Array(16);if(typeof R=="string")for(var O=0;O<16;++O)V[O]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(O=0;O<16;++O)V[O]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=x.g[0],C=x.g[1],O=x.g[2];let M=x.g[3],A;A=R+(M^C&(O^M))+V[0]+3614090360&4294967295,R=C+(A<<7&4294967295|A>>>25),A=M+(O^R&(C^O))+V[1]+3905402710&4294967295,M=R+(A<<12&4294967295|A>>>20),A=O+(C^M&(R^C))+V[2]+606105819&4294967295,O=M+(A<<17&4294967295|A>>>15),A=C+(R^O&(M^R))+V[3]+3250441966&4294967295,C=O+(A<<22&4294967295|A>>>10),A=R+(M^C&(O^M))+V[4]+4118548399&4294967295,R=C+(A<<7&4294967295|A>>>25),A=M+(O^R&(C^O))+V[5]+1200080426&4294967295,M=R+(A<<12&4294967295|A>>>20),A=O+(C^M&(R^C))+V[6]+2821735955&4294967295,O=M+(A<<17&4294967295|A>>>15),A=C+(R^O&(M^R))+V[7]+4249261313&4294967295,C=O+(A<<22&4294967295|A>>>10),A=R+(M^C&(O^M))+V[8]+1770035416&4294967295,R=C+(A<<7&4294967295|A>>>25),A=M+(O^R&(C^O))+V[9]+2336552879&4294967295,M=R+(A<<12&4294967295|A>>>20),A=O+(C^M&(R^C))+V[10]+4294925233&4294967295,O=M+(A<<17&4294967295|A>>>15),A=C+(R^O&(M^R))+V[11]+2304563134&4294967295,C=O+(A<<22&4294967295|A>>>10),A=R+(M^C&(O^M))+V[12]+1804603682&4294967295,R=C+(A<<7&4294967295|A>>>25),A=M+(O^R&(C^O))+V[13]+4254626195&4294967295,M=R+(A<<12&4294967295|A>>>20),A=O+(C^M&(R^C))+V[14]+2792965006&4294967295,O=M+(A<<17&4294967295|A>>>15),A=C+(R^O&(M^R))+V[15]+1236535329&4294967295,C=O+(A<<22&4294967295|A>>>10),A=R+(O^M&(C^O))+V[1]+4129170786&4294967295,R=C+(A<<5&4294967295|A>>>27),A=M+(C^O&(R^C))+V[6]+3225465664&4294967295,M=R+(A<<9&4294967295|A>>>23),A=O+(R^C&(M^R))+V[11]+643717713&4294967295,O=M+(A<<14&4294967295|A>>>18),A=C+(M^R&(O^M))+V[0]+3921069994&4294967295,C=O+(A<<20&4294967295|A>>>12),A=R+(O^M&(C^O))+V[5]+3593408605&4294967295,R=C+(A<<5&4294967295|A>>>27),A=M+(C^O&(R^C))+V[10]+38016083&4294967295,M=R+(A<<9&4294967295|A>>>23),A=O+(R^C&(M^R))+V[15]+3634488961&4294967295,O=M+(A<<14&4294967295|A>>>18),A=C+(M^R&(O^M))+V[4]+3889429448&4294967295,C=O+(A<<20&4294967295|A>>>12),A=R+(O^M&(C^O))+V[9]+568446438&4294967295,R=C+(A<<5&4294967295|A>>>27),A=M+(C^O&(R^C))+V[14]+3275163606&4294967295,M=R+(A<<9&4294967295|A>>>23),A=O+(R^C&(M^R))+V[3]+4107603335&4294967295,O=M+(A<<14&4294967295|A>>>18),A=C+(M^R&(O^M))+V[8]+1163531501&4294967295,C=O+(A<<20&4294967295|A>>>12),A=R+(O^M&(C^O))+V[13]+2850285829&4294967295,R=C+(A<<5&4294967295|A>>>27),A=M+(C^O&(R^C))+V[2]+4243563512&4294967295,M=R+(A<<9&4294967295|A>>>23),A=O+(R^C&(M^R))+V[7]+1735328473&4294967295,O=M+(A<<14&4294967295|A>>>18),A=C+(M^R&(O^M))+V[12]+2368359562&4294967295,C=O+(A<<20&4294967295|A>>>12),A=R+(C^O^M)+V[5]+4294588738&4294967295,R=C+(A<<4&4294967295|A>>>28),A=M+(R^C^O)+V[8]+2272392833&4294967295,M=R+(A<<11&4294967295|A>>>21),A=O+(M^R^C)+V[11]+1839030562&4294967295,O=M+(A<<16&4294967295|A>>>16),A=C+(O^M^R)+V[14]+4259657740&4294967295,C=O+(A<<23&4294967295|A>>>9),A=R+(C^O^M)+V[1]+2763975236&4294967295,R=C+(A<<4&4294967295|A>>>28),A=M+(R^C^O)+V[4]+1272893353&4294967295,M=R+(A<<11&4294967295|A>>>21),A=O+(M^R^C)+V[7]+4139469664&4294967295,O=M+(A<<16&4294967295|A>>>16),A=C+(O^M^R)+V[10]+3200236656&4294967295,C=O+(A<<23&4294967295|A>>>9),A=R+(C^O^M)+V[13]+681279174&4294967295,R=C+(A<<4&4294967295|A>>>28),A=M+(R^C^O)+V[0]+3936430074&4294967295,M=R+(A<<11&4294967295|A>>>21),A=O+(M^R^C)+V[3]+3572445317&4294967295,O=M+(A<<16&4294967295|A>>>16),A=C+(O^M^R)+V[6]+76029189&4294967295,C=O+(A<<23&4294967295|A>>>9),A=R+(C^O^M)+V[9]+3654602809&4294967295,R=C+(A<<4&4294967295|A>>>28),A=M+(R^C^O)+V[12]+3873151461&4294967295,M=R+(A<<11&4294967295|A>>>21),A=O+(M^R^C)+V[15]+530742520&4294967295,O=M+(A<<16&4294967295|A>>>16),A=C+(O^M^R)+V[2]+3299628645&4294967295,C=O+(A<<23&4294967295|A>>>9),A=R+(O^(C|~M))+V[0]+4096336452&4294967295,R=C+(A<<6&4294967295|A>>>26),A=M+(C^(R|~O))+V[7]+1126891415&4294967295,M=R+(A<<10&4294967295|A>>>22),A=O+(R^(M|~C))+V[14]+2878612391&4294967295,O=M+(A<<15&4294967295|A>>>17),A=C+(M^(O|~R))+V[5]+4237533241&4294967295,C=O+(A<<21&4294967295|A>>>11),A=R+(O^(C|~M))+V[12]+1700485571&4294967295,R=C+(A<<6&4294967295|A>>>26),A=M+(C^(R|~O))+V[3]+2399980690&4294967295,M=R+(A<<10&4294967295|A>>>22),A=O+(R^(M|~C))+V[10]+4293915773&4294967295,O=M+(A<<15&4294967295|A>>>17),A=C+(M^(O|~R))+V[1]+2240044497&4294967295,C=O+(A<<21&4294967295|A>>>11),A=R+(O^(C|~M))+V[8]+1873313359&4294967295,R=C+(A<<6&4294967295|A>>>26),A=M+(C^(R|~O))+V[15]+4264355552&4294967295,M=R+(A<<10&4294967295|A>>>22),A=O+(R^(M|~C))+V[6]+2734768916&4294967295,O=M+(A<<15&4294967295|A>>>17),A=C+(M^(O|~R))+V[13]+1309151649&4294967295,C=O+(A<<21&4294967295|A>>>11),A=R+(O^(C|~M))+V[4]+4149444226&4294967295,R=C+(A<<6&4294967295|A>>>26),A=M+(C^(R|~O))+V[11]+3174756917&4294967295,M=R+(A<<10&4294967295|A>>>22),A=O+(R^(M|~C))+V[2]+718787259&4294967295,O=M+(A<<15&4294967295|A>>>17),A=C+(M^(O|~R))+V[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(O+(A<<21&4294967295|A>>>11))&4294967295,x.g[2]=x.g[2]+O&4294967295,x.g[3]=x.g[3]+M&4294967295}n.prototype.v=function(x,R){R===void 0&&(R=x.length);const C=R-this.blockSize,V=this.C;let O=this.h,M=0;for(;M<R;){if(O==0)for(;M<=C;)a(this,x,M),M+=this.blockSize;if(typeof x=="string"){for(;M<R;)if(V[O++]=x.charCodeAt(M++),O==this.blockSize){a(this,V),O=0;break}}else for(;M<R;)if(V[O++]=x[M++],O==this.blockSize){a(this,V),O=0;break}}this.h=O,this.o+=R},n.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;R=this.o*8;for(var C=x.length-8;C<x.length;++C)x[C]=R&255,R/=256;for(this.v(x),x=Array(16),R=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)x[R++]=this.g[C]>>>V&255;return x};function l(x,R){var C=f;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=R(x)}function c(x,R){this.h=R;const C=[];let V=!0;for(let O=x.length-1;O>=0;O--){const M=x[O]|0;V&&M==R||(C[O]=M,V=!1)}this.g=C}var f={};function m(x){return-128<=x&&x<128?l(x,function(R){return new c([R|0],R<0?-1:0)}):new c([x|0],x<0?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return T;if(x<0)return U(g(-x));const R=[];let C=1;for(let V=0;x>=C;V++)R[V]=x/C|0,C*=4294967296;return new c(R,0)}function y(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return U(y(x.substring(1),R));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(R,8));let V=T;for(let M=0;M<x.length;M+=8){var O=Math.min(8,x.length-M);const A=parseInt(x.substring(M,M+O),R);O<8?(O=g(Math.pow(R,O)),V=V.j(O).add(g(A))):(V=V.j(C),V=V.add(g(A)))}return V}var T=m(0),I=m(1),D=m(16777216);i=c.prototype,i.m=function(){if(B(this))return-U(this).m();let x=0,R=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);x+=(V>=0?V:4294967296+V)*R,R*=4294967296}return x},i.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(F(this))return"0";if(B(this))return"-"+U(this).toString(x);const R=g(Math.pow(x,6));var C=this;let V="";for(;;){const O=ge(C,R).g;C=ne(C,O.j(R));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(x);if(C=O,F(C))return M+V;for(;M.length<6;)M="0"+M;V=M+V}},i.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function F(x){if(x.h!=0)return!1;for(let R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function B(x){return x.h==-1}i.l=function(x){return x=ne(this,x),B(x)?-1:F(x)?0:1};function U(x){const R=x.g.length,C=[];for(let V=0;V<R;V++)C[V]=~x.g[V];return new c(C,~x.h).add(I)}i.abs=function(){return B(this)?U(this):this},i.add=function(x){const R=Math.max(this.g.length,x.g.length),C=[];let V=0;for(let O=0;O<=R;O++){let M=V+(this.i(O)&65535)+(x.i(O)&65535),A=(M>>>16)+(this.i(O)>>>16)+(x.i(O)>>>16);V=A>>>16,M&=65535,A&=65535,C[O]=A<<16|M}return new c(C,C[C.length-1]&-2147483648?-1:0)};function ne(x,R){return x.add(U(R))}i.j=function(x){if(F(this)||F(x))return T;if(B(this))return B(x)?U(this).j(U(x)):U(U(this).j(x));if(B(x))return U(this.j(U(x)));if(this.l(D)<0&&x.l(D)<0)return g(this.m()*x.m());const R=this.g.length+x.g.length,C=[];for(var V=0;V<2*R;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let O=0;O<x.g.length;O++){const M=this.i(V)>>>16,A=this.i(V)&65535,De=x.i(O)>>>16,Qe=x.i(O)&65535;C[2*V+2*O]+=A*Qe,ie(C,2*V+2*O),C[2*V+2*O+1]+=M*Qe,ie(C,2*V+2*O+1),C[2*V+2*O+1]+=A*De,ie(C,2*V+2*O+1),C[2*V+2*O+2]+=M*De,ie(C,2*V+2*O+2)}for(x=0;x<R;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=R;x<2*R;x++)C[x]=0;return new c(C,0)};function ie(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function se(x,R){this.g=x,this.h=R}function ge(x,R){if(F(R))throw Error("division by zero");if(F(x))return new se(T,T);if(B(x))return R=ge(U(x),R),new se(U(R.g),U(R.h));if(B(R))return R=ge(x,U(R)),new se(U(R.g),R.h);if(x.g.length>30){if(B(x)||B(R))throw Error("slowDivide_ only works with positive integers.");for(var C=I,V=R;V.l(x)<=0;)C=Ae(C),V=Ae(V);var O=Ee(C,1),M=Ee(V,1);for(V=Ee(V,2),C=Ee(C,2);!F(V);){var A=M.add(V);A.l(x)<=0&&(O=O.add(C),M=A),V=Ee(V,1),C=Ee(C,1)}return R=ne(x,O.j(R)),new se(O,R)}for(O=T;x.l(R)>=0;){for(C=Math.max(1,Math.floor(x.m()/R.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),M=g(C),A=M.j(R);B(A)||A.l(x)>0;)C-=V,M=g(C),A=M.j(R);F(M)&&(M=I),O=O.add(M),x=ne(x,A)}return new se(O,x)}i.B=function(x){return ge(this,x).h},i.and=function(x){const R=Math.max(this.g.length,x.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)&x.i(V);return new c(C,this.h&x.h)},i.or=function(x){const R=Math.max(this.g.length,x.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)|x.i(V);return new c(C,this.h|x.h)},i.xor=function(x){const R=Math.max(this.g.length,x.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)^x.i(V);return new c(C,this.h^x.h)};function Ae(x){const R=x.g.length+1,C=[];for(let V=0;V<R;V++)C[V]=x.i(V)<<1|x.i(V-1)>>>31;return new c(C,x.h)}function Ee(x,R){const C=R>>5;R%=32;const V=x.g.length-C,O=[];for(let M=0;M<V;M++)O[M]=R>0?x.i(M+C)>>>R|x.i(M+C+1)<<32-R:x.i(M+C);return new c(O,x.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,cR=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,ca=c}).apply(typeof iI<"u"?iI:typeof self<"u"?self:typeof window<"u"?window:{});var Kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hR,ih,dR,am,_y,fR,mR,pR;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kf=="object"&&Kf];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var n=t(this);function a(h,_){if(_)e:{var E=n;h=h.split(".");for(var S=0;S<h.length-1;S++){var z=h[S];if(!(z in E))break e;E=E[z]}h=h[h.length-1],S=E[h],_=_(S),_!=S&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var E=[],S;for(S in _)Object.prototype.hasOwnProperty.call(_,S)&&E.push([S,_[S]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,E){return h.call.apply(h.bind,arguments)}function g(h,_,E){return g=m,g.apply(null,arguments)}function y(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function T(h,_){function E(){}E.prototype=_.prototype,h.Z=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(S,z,Q){for(var de=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)de[Ve-2]=arguments[Ve];return _.prototype[z].apply(S,de)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function D(h){const _=h.length;if(_>0){const E=Array(_);for(let S=0;S<_;S++)E[S]=h[S];return E}return[]}function F(h,_){for(let S=1;S<arguments.length;S++){const z=arguments[S];var E=typeof z;if(E=E!="object"?E:z?Array.isArray(z)?"array":E:"null",E=="array"||E=="object"&&typeof z.length=="number"){E=h.length||0;const Q=z.length||0;h.length=E+Q;for(let de=0;de<Q;de++)h[E+de]=z[de]}else h.push(z)}}class B{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function U(h){c.setTimeout(()=>{throw h},0)}function ne(){var h=x;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ie{constructor(){this.h=this.g=null}add(_,E){const S=se.get();S.set(_,E),this.h?this.h.next=S:this.g=S,this.h=S}}var se=new B(()=>new ge,h=>h.reset());class ge{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,Ee=!1,x=new ie,R=()=>{const h=Promise.resolve(void 0);Ae=()=>{h.then(C)}};function C(){for(var h;h=ne();){try{h.h.call(h.g)}catch(E){U(E)}var _=se;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}Ee=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,_),c.removeEventListener("test",E,_)}catch{}return h})();function A(h){return/^[\s\xa0]*$/.test(h)}function De(h,_){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}T(De,O),De.prototype.init=function(h,_){const E=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Qe="closure_listenable_"+(Math.random()*1e6|0),$=0;function ue(h,_,E,S,z){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!S,this.ha=z,this.key=++$,this.da=this.fa=!1}function ae(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ve(h,_,E){for(const S in h)_.call(E,h[S],S,h)}function Pe(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function P(h){const _={};for(const E in h)_[E]=h[E];return _}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(h,_){let E,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(E in S)h[E]=S[E];for(let Q=0;Q<X.length;Q++)E=X[Q],Object.prototype.hasOwnProperty.call(S,E)&&(h[E]=S[E])}}function Y(h){this.src=h,this.g={},this.h=0}Y.prototype.add=function(h,_,E,S,z){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const de=fe(h,_,S,z);return de>-1?(_=h[de],E||(_.fa=!1)):(_=new ue(_,this.src,Q,!!S,z),_.fa=E,h.push(_)),_};function le(h,_){const E=_.type;if(E in h.g){var S=h.g[E],z=Array.prototype.indexOf.call(S,_,void 0),Q;(Q=z>=0)&&Array.prototype.splice.call(S,z,1),Q&&(ae(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function fe(h,_,E,S){for(let z=0;z<h.length;++z){const Q=h[z];if(!Q.da&&Q.listener==_&&Q.capture==!!E&&Q.ha==S)return z}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),Ne={};function Re(h,_,E,S,z){if(Array.isArray(_)){for(let Q=0;Q<_.length;Q++)Re(h,_[Q],E,S,z);return null}return E=ju(E),h&&h[Qe]?h.J(_,E,f(S)?!!S.capture:!1,z):We(h,_,E,!1,S,z)}function We(h,_,E,S,z,Q){if(!_)throw Error("Invalid event type");const de=f(z)?!!z.capture:!!z;let Ve=Pa(h);if(Ve||(h[ce]=Ve=new Y(h)),E=Ve.add(_,E,S,de,Q),E.proxy)return E;if(S=Cn(),E.proxy=S,S.src=h,S.listener=E,h.addEventListener)M||(z=de),z===void 0&&(z=!1),h.addEventListener(_.toString(),S,z);else if(h.attachEvent)h.attachEvent(jn(_.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Cn(){function h(E){return _.call(h.src,h.listener,E)}const _=Mr;return h}function En(h,_,E,S,z){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)En(h,_[Q],E,S,z);else S=f(S)?!!S.capture:!!S,E=ju(E),h&&h[Qe]?(h=h.i,Q=String(_).toString(),Q in h.g&&(_=h.g[Q],E=fe(_,E,S,z),E>-1&&(ae(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete h.g[Q],h.h--)))):h&&(h=Pa(h))&&(_=h.g[_.toString()],h=-1,_&&(h=fe(_,E,S,z)),(E=h>-1?_[h]:null)&&di(E))}function di(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Qe])le(_.i,h);else{var E=h.type,S=h.proxy;_.removeEventListener?_.removeEventListener(E,S,h.capture):_.detachEvent?_.detachEvent(jn(E),S):_.addListener&&_.removeListener&&_.removeListener(S),(E=Pa(_))?(le(E,h),E.h==0&&(E.src=null,_[ce]=null)):ae(h)}}}function jn(h){return h in Ne?Ne[h]:Ne[h]="on"+h}function Mr(h,_){if(h.da)h=!0;else{_=new De(_,this);const E=h.listener,S=h.ha||h.src;h.fa&&di(h),h=E.call(S,_)}return h}function Pa(h){return h=h[ce],h instanceof Y?h:null}var Uu="__closure_events_fn_"+(Math.random()*1e9>>>0);function ju(h){return typeof h=="function"?h:(h[Uu]||(h[Uu]=function(_){return h.handleEvent(_)}),h[Uu])}function Bt(){V.call(this),this.i=new Y(this),this.M=this,this.G=null}T(Bt,V),Bt.prototype[Qe]=!0,Bt.prototype.removeEventListener=function(h,_,E,S){En(this,h,_,E,S)};function Jt(h,_){var E,S=h.G;if(S)for(E=[];S;S=S.G)E.push(S);if(h=h.M,S=_.type||_,typeof _=="string")_=new O(_,h);else if(_ instanceof O)_.target=_.target||h;else{var z=_;_=new O(S,h),he(_,z)}z=!0;let Q,de;if(E)for(de=E.length-1;de>=0;de--)Q=_.g=E[de],z=Ts(Q,S,!0,_)&&z;if(Q=_.g=h,z=Ts(Q,S,!0,_)&&z,z=Ts(Q,S,!1,_)&&z,E)for(de=0;de<E.length;de++)Q=_.g=E[de],z=Ts(Q,S,!1,_)&&z}Bt.prototype.N=function(){if(Bt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const E=h.g[_];for(let S=0;S<E.length;S++)ae(E[S]);delete h.g[_],h.h--}}this.G=null},Bt.prototype.J=function(h,_,E,S){return this.i.add(String(h),_,!1,E,S)},Bt.prototype.K=function(h,_,E,S){return this.i.add(String(h),_,!0,E,S)};function Ts(h,_,E,S){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let z=!0;for(let Q=0;Q<_.length;++Q){const de=_[Q];if(de&&!de.da&&de.capture==E){const Ve=de.listener,Vt=de.ha||de.src;de.fa&&le(h.i,de),z=Ve.call(Vt,S)!==!1&&z}}return z&&!S.defaultPrevented}function Pp(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function pd(h){h.g=Pp(()=>{h.g=null,h.i&&(h.i=!1,pd(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Nn extends V{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:pd(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oa(h){V.call(this),this.h=h,this.g={}}T(Oa,V);var Bu=[];function zu(h){ve(h.g,function(_,E){this.g.hasOwnProperty(E)&&di(_)},h),h.g={}}Oa.prototype.N=function(){Oa.Z.N.call(this),zu(this)},Oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Es=c.JSON.stringify,Op=c.JSON.parse,gd=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function _d(){}function yd(){}var Di={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function un(){O.call(this,"d")}T(un,O);function fi(){O.call(this,"c")}T(fi,O);var kt={},vd=null;function Ko(){return vd=vd||new Bt}kt.Ia="serverreachability";function Td(h){O.call(this,kt.Ia,h)}T(Td,O);function Xi(h){const _=Ko();Jt(_,new Td(_))}kt.STAT_EVENT="statevent";function ka(h,_){O.call(this,kt.STAT_EVENT,h),this.stat=_}T(ka,O);function zt(h){const _=Ko();Jt(_,new ka(_,h))}kt.Ja="timingevent";function Ji(h,_){O.call(this,kt.Ja,h),this.size=_}T(Ji,O);function Zi(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function Pi(){this.g=!0}Pi.prototype.ua=function(){this.g=!1};function kp(h,_,E,S,z,Q){h.info(function(){if(h.g)if(Q){var de="",Ve=Q.split("&");for(let Ze=0;Ze<Ve.length;Ze++){var Vt=Ve[Ze].split("=");if(Vt.length>1){const vt=Vt[0];Vt=Vt[1];const _i=vt.split("_");de=_i.length>=2&&_i[1]=="type"?de+(vt+"="+Vt+"&"):de+(vt+"=redacted&")}}}else de=null;else de=Q;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+_+`
`+E+`
`+de})}function Ed(h,_,E,S,z,Q,de){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+_+`
`+E+`
`+Q+" "+de})}function er(h,_,E,S){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Vp(h,E)+(S?" "+S:"")})}function Va(h,_){h.info(function(){return"TIMEOUT: "+_})}Pi.prototype.info=function(){};function Vp(h,_){if(!h.g)return _;if(!_)return null;try{const Q=JSON.parse(_);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var E=Q[h];if(!(E.length<2)){var S=E[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let de=1;de<S.length;de++)S[de]=""}}}}return Es(Q)}catch{return _}}var Ma={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qu;function La(){}T(La,_d),La.prototype.g=function(){return new XMLHttpRequest},qu=new La;function Lr(h){return encodeURIComponent(String(h))}function wd(h){var _=1;h=h.split(":");const E=[];for(;_>0&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function Oi(h,_,E,S){this.j=h,this.i=_,this.l=E,this.S=S||1,this.V=new Oa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ki}function ki(){this.i=null,this.g="",this.h=!1}var Ft={},nn={};function tr(h,_,E){h.M=1,h.A=Ua(Ht(_)),h.u=E,h.R=!0,Qo(h,null)}function Qo(h,_){h.F=Date.now(),nr(h),h.B=Ht(h.A);var E=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),Xo(E.i,"t",S),h.C=0,E=h.j.L,h.h=new ki,h.g=Ld(h.j,E?_:null,!h.u),h.P>0&&(h.O=new Nn(g(h.Y,h,h.g),h.P)),_=h.V,E=h.g,S=h.ba;var z="readystatechange";Array.isArray(z)||(z&&(Bu[0]=z.toString()),z=Bu);for(let Q=0;Q<z.length;Q++){const de=Re(E,z[Q],S||_.handleEvent,!1,_.h||_);if(!de)break;_.g[de.key]=de}_=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),Xi(),kp(h.i,h.v,h.B,h.l,h.S,h.u)}Oi.prototype.ba=function(h){h=h.target;const _=this.O;_&&Li(h)==3?_.j():this.Y(h)},Oi.prototype.Y=function(h){try{if(h==this.g)e:{const Ve=Li(this.g),Vt=this.g.ya(),Ze=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||cn(this.g)))){this.K||Ve!=4||Vt==7||(Vt==8||Ze<=0?Xi(3):Xi(2)),ir(this);var _=this.g.ca();this.X=_;var E=Mp(this);if(this.o=_==200,Ed(this.i,this.v,this.B,this.l,this.S,Ve,_),this.o){if(this.U&&!this.L){t:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(S)){var Q=S;break t}}Q=null}if(h=Q)er(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rr(this,h);else{this.o=!1,this.m=3,zt(12),Xn(this),mi(this);break e}}if(this.R){h=!0;let vt;for(;!this.K&&this.C<E.length;)if(vt=Id(this,E),vt==nn){Ve==4&&(this.m=4,zt(14),h=!1),er(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Ft){this.m=4,zt(15),er(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else er(this.i,this.l,vt,null),rr(this,vt);if(bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||E.length!=0||this.h.h||(this.m=1,zt(16),h=!1),this.o=this.o&&h,!h)er(this.i,this.l,E,"[Invalid Chunked Response]"),Xn(this),mi(this);else if(E.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),rc(de),de.P=!0,zt(11))}}else er(this.i,this.l,E,null),rr(this,E);Ve==4&&Xn(this),this.o&&!this.K&&(Ve==4?Od(this.j,this):(this.o=!1,nr(this)))}else jr(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,zt(12)):(this.m=0,zt(13)),Xn(this),mi(this)}}}catch{}finally{}};function Mp(h){if(!bd(h))return h.g.la();const _=cn(h.g);if(_==="")return"";let E="";const S=_.length,z=Li(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Xn(h),mi(h),"";h.h.i=new c.TextDecoder}for(let Q=0;Q<S;Q++)h.h.h=!0,E+=h.h.i.decode(_[Q],{stream:!(z&&Q==S-1)});return _.length=0,h.h.g+=E,h.C=0,h.h.g}function bd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Id(h,_){var E=h.C,S=_.indexOf(`
`,E);return S==-1?nn:(E=Number(_.substring(E,S)),isNaN(E)?Ft:(S+=1,S+E>_.length?nn:(_=_.slice(S,S+E),h.C=S+E,_)))}Oi.prototype.cancel=function(){this.K=!0,Xn(this)};function nr(h){h.T=Date.now()+h.H,$o(h,h.H)}function $o(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Zi(g(h.aa,h),_)}function ir(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Oi.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Va(this.i,this.B),this.M!=2&&(Xi(),zt(17)),Xn(this),this.m=2,mi(this)):$o(this,this.T-h)};function mi(h){h.j.I==0||h.K||Od(h.j,h)}function Xn(h){ir(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,zu(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function rr(h,_){try{var E=h.j;if(E.I!=0&&(E.g==h||ar(E.h,h))){if(!h.L&&ar(E.h,h)&&E.I==3){try{var S=E.Ba.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)nl(E),Cs(E);else break e;Ga(E),zt(18)}}else E.xa=z[1],0<E.xa-E.K&&z[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Zi(g(E.Va,E),6e3));sr(E.h)<=1&&E.ta&&(E.ta=void 0)}else dr(E,11)}else if((h.L||E.g==h)&&nl(E),!A(_))for(z=E.Ba.g.parse(_),_=0;_<z.length;_++){let Ze=z[_];const vt=Ze[0];if(!(vt<=E.K))if(E.K=vt,Ze=Ze[1],E.I==2)if(Ze[0]=="c"){E.M=Ze[1],E.ba=Ze[2];const _i=Ze[3];_i!=null&&(E.ka=_i,E.j.info("VER="+E.ka));const fr=Ze[4];fr!=null&&(E.za=fr,E.j.info("SVER="+E.za));const Ui=Ze[5];Ui!=null&&typeof Ui=="number"&&Ui>0&&(S=1.5*Ui,E.O=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const ji=h.g;if(ji){const Ka=ji.g?ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ka){var Q=S.h;Q.g||Ka.indexOf("spdy")==-1&&Ka.indexOf("quic")==-1&&Ka.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ku(Q,Q.h),Q.h=null))}if(S.G){const il=ji.g?ji.g.getResponseHeader("X-HTTP-Session-Id"):null;il&&(S.wa=il,nt(S.J,S.G,il))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),S=E;var de=h;if(S.na=Md(S,S.L?S.ba:null,S.W),de.L){Qu(S.h,de);var Ve=de,Vt=S.O;Vt&&(Ve.H=Vt),Ve.D&&(ir(Ve),nr(Ve)),S.g=de}else Dd(S);E.i.length>0&&hr(E)}else Ze[0]!="stop"&&Ze[0]!="close"||dr(E,7);else E.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?dr(E,7):nc(E):Ze[0]!="noop"&&E.l&&E.l.qa(Ze),E.A=0)}}Xi(4)}catch{}}var qt=class{constructor(h,_){this.g=h,this.map=_}};function Hu(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Gu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function sr(h){return h.h?1:h.g?h.g.size:0}function ar(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ku(h,_){h.g?h.g.add(_):h.h=_}function Qu(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Hu.prototype.cancel=function(){if(this.i=$u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function $u(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.G);return _}return D(h.i)}var Sd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yo(h,_){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const S=h[E].indexOf("=");let z,Q=null;S>=0?(z=h[E].substring(0,S),Q=h[E].substring(S+1)):z=h[E],_(z,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Jn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof Jn?(this.l=h.l,rn(this,h.j),this.o=h.o,this.g=h.g,ws(this,h.u),this.h=h.h,Yu(this,Cd(h.i)),this.m=h.m):h&&(_=String(h).match(Sd))?(this.l=!1,rn(this,_[1]||"",!0),this.o=or(_[2]||""),this.g=or(_[3]||"",!0),ws(this,_[4]),this.h=or(_[5]||"",!0),Yu(this,_[6]||"",!0),this.m=or(_[7]||"")):(this.l=!1,this.i=new Is(null,this.l))}Jn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(ja(_,Wo,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ja(_,Wo,!0),"@"),h.push(Lr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(ja(E,E.charAt(0)=="/"?Wu:Ad,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",ja(E,Rd)),h.join("")},Jn.prototype.resolve=function(h){const _=Ht(this);let E=!!h.j;E?rn(_,h.j):E=!!h.o,E?_.o=h.o:E=!!h.g,E?_.g=h.g:E=h.u!=null;var S=h.h;if(E)ws(_,h.u);else if(E=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=_.h.lastIndexOf("/");z!=-1&&(S=_.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const Q=[];for(let de=0;de<z.length;){const Ve=z[de++];Ve=="."?S&&de==z.length&&Q.push(""):Ve==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),S&&de==z.length&&Q.push("")):(Q.push(Ve),S=!0)}S=Q.join("/")}else S=z}return E?_.h=S:E=h.i.toString()!=="",E?Yu(_,Cd(h.i)):E=!!h.m,E&&(_.m=h.m),_};function Ht(h){return new Jn(h)}function rn(h,_,E){h.j=E?or(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function ws(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Yu(h,_,E){_ instanceof Is?(h.i=_,Jo(h.i,h.l)):(E||(_=ja(_,bs)),h.i=new Is(_,h.l))}function nt(h,_,E){h.i.set(_,E)}function Ua(h){return nt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function or(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ja(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,Bn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Bn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Wo=/[#\/\?@]/g,Ad=/[#\?:]/g,Wu=/[#\?]/g,bs=/[#\?@]/g,Rd=/#/g;function Is(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function zn(h){h.g||(h.g=new Map,h.h=0,h.i&&Yo(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}i=Is.prototype,i.add=function(h,_){zn(this),this.i=null,h=Ss(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function xd(h,_){zn(h),_=Ss(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Xu(h,_){return zn(h),_=Ss(h,_),h.g.has(_)}i.forEach=function(h,_){zn(this),this.g.forEach(function(E,S){E.forEach(function(z){h.call(_,z,S,this)},this)},this)};function Ju(h,_){zn(h);let E=[];if(typeof _=="string")Xu(h,_)&&(E=E.concat(h.g.get(Ss(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)E=E.concat(h[_]);return E}i.set=function(h,_){return zn(this),this.i=null,h=Ss(this,h),Xu(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},i.get=function(h,_){return h?(h=Ju(this,h),h.length>0?String(h[0]):_):_};function Xo(h,_,E){xd(h,_),E.length>0&&(h.i=null,h.g.set(Ss(h,_),D(E)),h.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let S=0;S<_.length;S++){var E=_[S];const z=Lr(E);E=Ju(this,E);for(let Q=0;Q<E.length;Q++){let de=z;E[Q]!==""&&(de+="="+Lr(E[Q])),h.push(de)}}return this.i=h.join("&")};function Cd(h){const _=new Is;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Ss(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Jo(h,_){_&&!h.j&&(zn(h),h.i=null,h.g.forEach(function(E,S){const z=S.toLowerCase();S!=z&&(xd(this,S),Xo(this,z,E))},h)),h.j=_}function Vi(h,_){const E=new Pi;if(c.Image){const S=new Image;S.onload=y(pi,E,"TestLoadImage: loaded",!0,_,S),S.onerror=y(pi,E,"TestLoadImage: error",!1,_,S),S.onabort=y(pi,E,"TestLoadImage: abort",!1,_,S),S.ontimeout=y(pi,E,"TestLoadImage: timeout",!1,_,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else _(!1)}function Zu(h,_){const E=new Pi,S=new AbortController,z=setTimeout(()=>{S.abort(),pi(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:S.signal}).then(Q=>{clearTimeout(z),Q.ok?pi(E,"TestPingServer: ok",!0,_):pi(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(z),pi(E,"TestPingServer: error",!1,_)})}function pi(h,_,E,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(E)}catch{}}function As(){this.g=new gd}function lr(h){this.i=h.Sb||null,this.h=h.ab||!1}T(lr,_d),lr.prototype.g=function(){return new Ba(this.i,this.h)};function Ba(h,_){Bt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ba,Bt),i=Ba.prototype,i.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,Mi(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rs(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Mi(this)),this.g&&(this.readyState=3,Mi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Rs(this):Mi(this),this.readyState==3&&Zo(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,Rs(this))},i.Na=function(h){this.g&&(this.response=h,Rs(this))},i.ga=function(){this.g&&Rs(this)};function Rs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Mi(h)}i.setRequestHeader=function(h,_){this.A.append(h,_)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function Mi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ba.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function gi(h){let _="";return ve(h,function(E,S){_+=S,_+=":",_+=E,_+=`\r
`}),_}function za(h,_,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=gi(E),typeof h=="string"?E!=null&&Lr(E):nt(h,_,E))}function ot(h){Bt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ot,Bt);var ur=/^https?$/i,ec=["POST","PUT"];i=ot.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,_,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qu.g(),this.g.onreadystatechange=I(g(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Q){Fa(this,Q);return}if(h=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)E.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())E.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(ec,_,void 0)>=0)||S||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,de]of E)this.g.setRequestHeader(Q,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){Fa(this,Q)}};function Fa(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,tc(h),Ur(h)}function tc(h){h.A||(h.A=!0,Jt(h,"complete"),Jt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Jt(this,"complete"),Jt(this,"abort"),Ur(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),ot.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?qa(this):this.Xa())},i.Xa=function(){qa(this)};function qa(h){if(h.h&&typeof l<"u"){if(h.v&&Li(h)==4)setTimeout(h.Ca.bind(h),0);else if(Jt(h,"readystatechange"),Li(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var S;if(S=Q===0){let de=String(h.D).match(Sd)[1]||null;!de&&c.self&&c.self.location&&(de=c.self.location.protocol.slice(0,-1)),S=!ur.test(de?de.toLowerCase():"")}E=S}if(E)Jt(h,"complete"),Jt(h,"success");else{h.o=6;try{var z=Li(h)>2?h.g.statusText:""}catch{z=""}h.l=z+" ["+h.ca()+"]",tc(h)}}finally{Ur(h)}}}}function Ur(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,_||Jt(h,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Li(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Li(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Op(_)}};function cn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function jr(h){const _={};h=(h.g&&Li(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(A(h[S]))continue;var E=wd(h[S]);const z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=_[z]||[];_[z]=Q,Q.push(E)}Pe(_,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function cr(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function xs(h){this.za=0,this.i=[],this.j=new Pi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=cr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=cr("baseRetryDelayMs",5e3,h),this.Za=cr("retryDelaySeedMs",1e4,h),this.Ta=cr("forwardChannelMaxRetries",2,h),this.va=cr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Hu(h&&h.concurrentRequestLimit),this.Ba=new As,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=xs.prototype,i.ka=8,i.I=1,i.connect=function(h,_,E,S){zt(0),this.W=h,this.H=_||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.J=Md(this,null,this.W),hr(this)};function nc(h){if(el(h),h.I==3){var _=h.V++,E=Ht(h.J);if(nt(E,"SID",h.M),nt(E,"RID",_),nt(E,"TYPE","terminate"),Ha(h,E),_=new Oi(h,h.j,_),_.M=2,_.A=Ua(Ht(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=_.A,E=!0),E||(_.g=Ld(_.j,null),_.g.ea(_.A)),_.F=Date.now(),nr(_)}Vd(h)}function Cs(h){h.g&&(rc(h),h.g.cancel(),h.g=null)}function el(h){Cs(h),h.v&&(c.clearTimeout(h.v),h.v=null),nl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function hr(h){if(!Gu(h.h)&&!h.m){h.m=!0;var _=h.Ea;Ae||R(),Ee||(Ae(),Ee=!0),x.add(_,h),h.D=0}}function tl(h,_){return sr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Zi(g(h.Ea,h,_),kd(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const z=new Oi(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=P(Q),he(Q,this.U)):Q=this.U),this.u!==null||this.R||(z.J=Q,Q=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Nd(this,z,_),E=Ht(this.J),nt(E,"RID",h),nt(E,"CVER",22),this.G&&nt(E,"X-HTTP-Session-Id",this.G),Ha(this,E),Q&&(this.R?_="headers="+Lr(gi(Q))+"&"+_:this.u&&za(E,this.u,Q)),Ku(this.h,z),this.Ra&&nt(E,"TYPE","init"),this.S?(nt(E,"$req",_),nt(E,"SID","null"),z.U=!0,tr(z,E,null)):tr(z,E,_),this.I=2}}else this.I==3&&(h?ic(this,h):this.i.length==0||Gu(this.h)||ic(this))};function ic(h,_){var E;_?E=_.l:E=h.V++;const S=Ht(h.J);nt(S,"SID",h.M),nt(S,"RID",E),nt(S,"AID",h.K),Ha(h,S),h.u&&h.o&&za(S,h.u,h.o),E=new Oi(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Nd(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ku(h.h,E),tr(E,S,_)}function Ha(h,_){h.H&&ve(h.H,function(E,S){nt(_,S,E)}),h.l&&ve({},function(E,S){nt(_,S,E)})}function Nd(h,_,E){E=Math.min(h.i.length,E);const S=h.l?g(h.l.Ka,h.l,h):null;e:{var z=h.i;let Ve=-1;for(;;){const Vt=["count="+E];Ve==-1?E>0?(Ve=z[0].g,Vt.push("ofs="+Ve)):Ve=0:Vt.push("ofs="+Ve);let Ze=!0;for(let vt=0;vt<E;vt++){var Q=z[vt].g;const _i=z[vt].map;if(Q-=Ve,Q<0)Ve=Math.max(0,z[vt].g-100),Ze=!1;else try{Q="req"+Q+"_"||"";try{var de=_i instanceof Map?_i:Object.entries(_i);for(const[fr,Ui]of de){let ji=Ui;f(Ui)&&(ji=Es(Ui)),Vt.push(Q+fr+"="+encodeURIComponent(ji))}}catch(fr){throw Vt.push(Q+"type="+encodeURIComponent("_badmap")),fr}}catch{S&&S(_i)}}if(Ze){de=Vt.join("&");break e}}de=void 0}return h=h.i.splice(0,E),_.G=h,de}function Dd(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;Ae||R(),Ee||(Ae(),Ee=!0),x.add(_,h),h.A=0}}function Ga(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Zi(g(h.Da,h),kd(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,Pd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Zi(g(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zt(10),Cs(this),Pd(this))};function rc(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Pd(h){h.g=new Oi(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Ht(h.na);nt(_,"RID","rpc"),nt(_,"SID",h.M),nt(_,"AID",h.K),nt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&nt(_,"TO",h.ia),nt(_,"TYPE","xmlhttp"),Ha(h,_),h.u&&h.o&&za(_,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Ua(Ht(_)),E.u=null,E.R=!0,Qo(E,h)}i.Va=function(){this.C!=null&&(this.C=null,Cs(this),Ga(this),zt(19))};function nl(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Od(h,_){var E=null;if(h.g==_){nl(h),rc(h),h.g=null;var S=2}else if(ar(h.h,_))E=_.G,Qu(h.h,_),S=1;else return;if(h.I!=0){if(_.o)if(S==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var z=h.D;S=Ko(),Jt(S,new Ji(S,E)),hr(h)}else Dd(h);else if(z=_.m,z==3||z==0&&_.X>0||!(S==1&&tl(h,_)||S==2&&Ga(h)))switch(E&&E.length>0&&(_=h.h,_.i=_.i.concat(E)),z){case 1:dr(h,5);break;case 4:dr(h,10);break;case 3:dr(h,6);break;default:dr(h,2)}}}function kd(h,_){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*_}function dr(h,_){if(h.j.info("Error code "+_),_==2){var E=g(h.bb,h),S=h.Ua;const z=!S;S=new Jn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||rn(S,"https"),Ua(S),z?Vi(S.toString(),E):Zu(S.toString(),E)}else zt(2);h.I=0,h.l&&h.l.pa(_),Vd(h),el(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Vd(h){if(h.I=0,h.ja=[],h.l){const _=$u(h.h);(_.length!=0||h.i.length!=0)&&(F(h.ja,_),F(h.ja,h.i),h.h.i.length=0,D(h.i),h.i.length=0),h.l.oa()}}function Md(h,_,E){var S=E instanceof Jn?Ht(E):new Jn(E);if(S.g!="")_&&(S.g=_+"."+S.g),ws(S,S.u);else{var z=c.location;S=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;const Q=new Jn(null);S&&rn(Q,S),_&&(Q.g=_),z&&ws(Q,z),E&&(Q.h=E),S=Q}return E=h.G,_=h.wa,E&&_&&nt(S,E,_),nt(S,"VER",h.ka),Ha(h,S),S}function Ld(h,_,E){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new ot(new lr({ab:E})):new ot(h.ma),_.Fa(h.L),_}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ud(){}i=Ud.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Ns(){}Ns.prototype.g=function(h,_){return new Dn(h,_)};function Dn(h,_){Bt.call(this),this.g=new xs(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!A(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!A(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Br(this)}T(Dn,Bt),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){nc(this.g)},Dn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Es(h),h=E);_.i.push(new qt(_.Ya++,h)),_.I==3&&hr(_)},Dn.prototype.N=function(){this.g.l=null,delete this.j,nc(this.g),delete this.g,Dn.Z.N.call(this)};function jd(h){un.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}T(jd,un);function Bd(){fi.call(this),this.status=1}T(Bd,fi);function Br(h){this.g=h}T(Br,Ud),Br.prototype.ra=function(){Jt(this.g,"a")},Br.prototype.qa=function(h){Jt(this.g,new jd(h))},Br.prototype.pa=function(h){Jt(this.g,new Bd)},Br.prototype.oa=function(){Jt(this.g,"b")},Ns.prototype.createWebChannel=Ns.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,pR=function(){return new Ns},mR=function(){return Ko()},fR=kt,_y={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,am=Ma,Fu.COMPLETE="complete",dR=Fu,yd.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",Bt.prototype.listen=Bt.prototype.J,ih=yd,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,hR=ot}).apply(typeof Kf<"u"?Kf:typeof self<"u"?self:typeof window<"u"?window:{});const rI="@firebase/firestore",sI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new Hm("@firebase/firestore");function zl(){return ga.logLevel}function eM(i){ga.setLogLevel(i)}function re(i,...e){if(ga.logLevel<=ze.DEBUG){const t=e.map(Dv);ga.debug(`Firestore (${xu}): ${i}`,...t)}}function Ut(i,...e){if(ga.logLevel<=ze.ERROR){const t=e.map(Dv);ga.error(`Firestore (${xu}): ${i}`,...t)}}function kr(i,...e){if(ga.logLevel<=ze.WARN){const t=e.map(Dv);ga.warn(`Firestore (${xu}): ${i}`,...t)}}function Dv(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(i,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,gR(i,n,t)}function gR(i,e,t){let n=`FIRESTORE (${xu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Ut(n),new Error(n)}function we(i,e,t,n){let a="Unexpected state";typeof t=="string"?a=t:n=t,i||gR(e,a,n)}function tM(i,e){i||ye(57014,e)}function pe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Rn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class iM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rM{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){we(this.o===void 0,42304);let n=this.i;const a=m=>this.i!==n?(n=this.i,t(m)):Promise.resolve();let l=new yn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new yn,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new yn)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(we(typeof n.accessToken=="string",31837,{l:n}),new _R(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class sM{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aM{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new sM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class aI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_t(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){we(this.o===void 0,3512);const n=l=>{l.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>n(l)))};const a=l=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new aI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(we(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new aI(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=lM(40);for(let l=0;l<a.length;++l)n.length<20&&a[l]<t&&(n+=e.charAt(a[l]%62))}return n}}function Oe(i,e){return i<e?-1:i>e?1:0}function yy(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++){const a=i.charAt(n),l=e.charAt(n);if(a!==l)return Q_(a)===Q_(l)?Oe(a,l):Q_(a)?1:-1}return Oe(i.length,e.length)}const uM=55296,cM=57343;function Q_(i){const e=i.charCodeAt(0);return e>=uM&&e<=cM}function su(i,e,t){return i.length===e.length&&i.every(((n,a)=>t(n,e[a])))}function yR(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="__name__";class vr{constructor(e,t,n){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&ye(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return vr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vr?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let a=0;a<n;a++){const l=vr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Oe(e.length,t.length)}static compareSegments(e,t){const n=vr.isNumericId(e),a=vr.isNumericId(t);return n&&!a?-1:!n&&a?1:n&&a?vr.extractNumericId(e).compare(vr.extractNumericId(t)):yy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ca.fromString(e.substring(4,e.length-2))}}class Fe extends vr{construct(e,t,n){return new Fe(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new te(K.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((a=>a.length>0)))}return new Fe(t)}static emptyPath(){return new Fe([])}}const hM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends vr{construct(e,t,n){return new wt(e,t,n)}static isValidIdentifier(e){return hM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oI}static keyField(){return new wt([oI])}static fromServerFormat(e){const t=[];let n="",a=0;const l=()=>{if(n.length===0)throw new te(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new te(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new te(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(n+=f,a++):(l(),a++)}if(l(),c)throw new te(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(t)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Fe.fromString(e))}static fromName(e){return new me(Fe.fromString(e).popFirst(5))}static empty(){return new me(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Fe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(i,e,t){if(!t)throw new te(K.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function vR(i,e,t,n){if(e===!0&&n===!0)throw new te(K.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function lI(i){if(!me.isDocumentKey(i))throw new te(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function uI(i){if(me.isDocumentKey(i))throw new te(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function TR(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function np(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ye(12329,{type:typeof i})}function Ye(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new te(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=np(i);throw new te(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function ER(i,e){if(e<=0)throw new te(K.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(i,e){const t={typeString:i};return e&&(t.value=e),t}function td(i,e){if(!TR(i))throw new te(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const a=e[n].typeString,l="value"in e[n]?{value:e[n].value}:void 0;if(!(n in i)){t=`JSON missing required field: '${n}'`;break}const c=i[n];if(a&&typeof c!==a){t=`JSON field '${n}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${n}' field to equal '${l.value}'`;break}}if(t)throw new te(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=-62135596800,hI=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*hI);return new tt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cI)throw new te(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hI}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(td(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:Xt("string",tt._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new tt(0,0))}static max(){return new Se(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=-1;class Am{constructor(e,t,n,a){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=a}}function vy(i){return i.fields.find((e=>e.kind===2))}function co(i){return i.fields.filter((e=>e.kind!==2))}Am.UNKNOWN_ID=-1;class om{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ph{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ph(0,hi.min())}}function wR(i,e){const t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,a=Se.fromTimestamp(n===1e9?new tt(t+1,0):new tt(t,n));return new hi(a,me.empty(),e)}function bR(i){return new hi(i.readTime,i.key,au)}class hi{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new hi(Se.min(),me.empty(),au)}static max(){return new hi(Se.max(),me.empty(),au)}}function kv(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(i.documentKey,e.documentKey),t!==0?t:Oe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(i){if(i.code!==K.FAILED_PRECONDITION||i.message!==IR)throw i;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((n,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(n,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(n,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,n)=>{t(e)}))}static reject(e){return new j(((t,n)=>{n(e)}))}static waitFor(e){return new j(((t,n)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(m=>n(m)))})),c=!0,l===a&&t()}))}static or(e){let t=j.resolve(!1);for(const n of e)t=t.next((a=>a?j.resolve(a):n()));return t}static forEach(e,t){const n=[];return e.forEach(((a,l)=>{n.push(t.call(this,a,l))})),this.waitFor(n)}static mapArray(e,t){return new j(((n,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((y=>{c[g]=y,++f,f===l&&n(c)}),(y=>a(y)))}}))}static doWhile(e,t){return new j(((n,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):n()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="SimpleDb";class ip{static open(e,t,n,a){try{return new ip(t,e.transaction(a,n))}catch(l){throw new mh(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new yn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new mh(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const a=Vv(n.target.error);this.S.reject(new mh(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(re(ai,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new fM(t)}}class Cr{static delete(e){return re(ai,"Removing database:",e),mo(ev().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Sh())return!1;if(Cr.F())return!0;const e=St(),t=Cr.M(e),n=0<t&&t<10,a=AR(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,Cr.M(St())===12.2&&Ut("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(re(ai,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{n(new mh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?n(new te(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?n(new te(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):n(new mh(e,c))},a.onupgradeneeded=l=>{re(ai,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{re(ai,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const f=ip.open(this.db,e,l?"readonly":"readwrite",n),m=a(f).next((g=>(f.C(),g))).catch((g=>(f.abort(g),j.reject(g)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,g=m.name!=="FirebaseError"&&c<3;if(re(ai,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function AR(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class dM{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return mo(this.U.delete())}}class mh extends te{constructor(e,t){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ra(i){return i.name==="IndexedDbTransactionError"}class fM{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(re(ai,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(re(ai,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),mo(n)}add(e){return re(ai,"ADD",this.store.name,e,e),mo(this.store.add(e))}get(e){return mo(this.store.get(e)).next((t=>(t===void 0&&(t=null),re(ai,"GET",this.store.name,e,t),t)))}delete(e){return re(ai,"DELETE",this.store.name,e),mo(this.store.delete(e))}count(){return re(ai,"COUNT",this.store.name),mo(this.store.count())}J(e,t){const n=this.options(e,t),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(n.range);return new j(((c,f)=>{l.onerror=m=>{f(m.target.error)},l.onsuccess=m=>{c(m.target.result)}}))}{const l=this.cursor(n),c=[];return this.H(l,((f,m)=>{c.push(m)})).next((()=>c))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new j(((a,l)=>{n.onerror=c=>{l(c.target.error)},n.onsuccess=c=>{a(c.target.result)}}))}Z(e,t){re(ai,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const a=this.cursor(n);return this.H(a,((l,c,f)=>f.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const a=this.cursor(n);return this.H(a,t)}te(e){const t=this.cursor({});return new j(((n,a)=>{t.onerror=l=>{const c=Vv(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((f=>{f?c.continue():n()})):n()}}))}H(e,t){const n=[];return new j(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void a();const m=new dM(f),g=t(f.primaryKey,f.value,m);if(g instanceof j){const y=g.catch((T=>(m.done(),j.reject(T))));n.push(y)}m.isDone?a():m.G===null?f.continue():f.continue(m.G)}})).next((()=>j.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function mo(i){return new j(((e,t)=>{i.onsuccess=n=>{const a=n.target.result;e(a)},i.onerror=n=>{const a=Vv(n.target.error);t(a)}}))}let dI=!1;function Vv(i){const e=Cr.M(St());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const n=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dI||(dI=!0,setTimeout((()=>{throw n}),0)),n}}return i}const ph="IndexBackfiller";class mM{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){re(ph,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();re(ph,`Documents written: ${t}`)}catch(t){Ra(t)?re(ph,"Ignoring IndexedDB error during index backfill: ",t):await Aa(t)}await this.re(6e4)}))}}class pM{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let a=t,l=!0;return j.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!n.has(c))return re(ph,`Processing collection: ${c}`),this.oe(e,c,a).next((f=>{a-=f,n.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,n).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((f=>(re(ph,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>c.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((a,l)=>{const c=bR(l);kv(c,n)>0&&(n=c)})),new hi(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$n.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=-1;function nd(i){return i==null}function Oh(i){return i===0&&1/i==-1/0}function RR(i){return typeof i=="number"&&Number.isInteger(i)&&!Oh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="";function xn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=fI(e)),e=gM(i.get(t),e);return fI(e)}function gM(i,e){let t=e;const n=i.length;for(let a=0;a<n;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case Rm:t+="";break;default:t+=l}}return t}function fI(i){return i+Rm+""}function Rr(i){const e=i.length;if(we(e>=2,64408,{path:i}),e===2)return we(i.charAt(0)===Rm&&i.charAt(1)==="",56145,{path:i}),Fe.emptyPath();const t=e-2,n=[];let a="";for(let l=0;l<e;){const c=i.indexOf(Rm,l);switch((c<0||c>t)&&ye(50515,{path:i}),i.charAt(c+1)){case"":const f=i.substring(l,c);let m;a.length===0?m=f:(a+=f,m=a,a=""),n.push(m);break;case"":a+=i.substring(l,c),a+="\0";break;case"":a+=i.substring(l,c+1);break;default:ye(61167,{path:i})}l=c+2}return new Fe(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="remoteDocuments",id="owner",kl="owner",kh="mutationQueues",_M="userId",Gi="mutations",mI="batchId",To="userMutationsIndex",pI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(i,e){return[i,xn(e)]}function xR(i,e,t){return[i,xn(e),t]}const yM={},ou="documentMutations",xm="remoteDocumentsV14",vM=["prefixPath","collectionGroup","readTime","documentId"],um="documentKeyIndex",TM=["prefixPath","collectionGroup","documentId"],CR="collectionGroupIndex",EM=["collectionGroup","readTime","prefixPath","documentId"],Vh="remoteDocumentGlobal",Ty="remoteDocumentGlobalKey",lu="targets",NR="queryTargetsIndex",wM=["canonicalId","targetId"],uu="targetDocuments",bM=["targetId","path"],Mv="documentTargetsIndex",IM=["path","targetId"],Cm="targetGlobalKey",So="targetGlobal",Mh="collectionParents",SM=["collectionId","parent"],cu="clientMetadata",AM="clientId",rp="bundles",RM="bundleId",sp="namedQueries",xM="name",Lv="indexConfiguration",CM="indexId",Ey="collectionGroupIndex",NM="collectionGroup",gh="indexState",DM=["indexId","uid"],DR="sequenceNumberIndex",PM=["uid","sequenceNumber"],_h="indexEntries",OM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],PR="documentKeyIndex",kM=["indexId","uid","orderedDocumentKey"],ap="documentOverlays",VM=["userId","collectionPath","documentId"],wy="collectionPathOverlayIndex",MM=["userId","collectionPath","largestBatchId"],OR="collectionGroupOverlayIndex",LM=["userId","collectionGroup","largestBatchId"],Uv="globals",UM="name",kR=[kh,Gi,ou,ho,lu,id,So,uu,cu,Vh,Mh,rp,sp],jM=[...kR,ap],VR=[kh,Gi,ou,xm,lu,id,So,uu,cu,Vh,Mh,rp,sp,ap],MR=VR,jv=[...MR,Lv,gh,_h],BM=jv,LR=[...jv,Uv],zM=LR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by extends SR{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function tn(i,e){const t=pe(i);return Cr.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function xa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function UR(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t){this.comparator=e,this.root=t||gn.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return t+n.left.size;a<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qf(this.root,e,this.comparator,!0)}}class Qf{constructor(e,t,n,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?n(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,t,n,a,l){this.key=e,this.value=t,this.color=n??gn.RED,this.left=a??gn.EMPTY,this.right=l??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,a,l){return new gn(e??this.key,t??this.value,n??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let a=this;const l=n(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,n),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return gn.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,n,a,l){return this}insert(e,t,n){return new gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _I(this.data.getIterator())}getIteratorFrom(e){return new _I(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=n.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class _I{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vl(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new at(wt.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return su(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new jR("Invalid base64 string: "+l):l}})(e);return new Nt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const qM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cs(i){if(we(!!i,39018),typeof i=="string"){let e=0;const t=qM.exec(i);if(we(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Et(i.seconds),nanos:Et(i.nanos)}}function Et(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function hs(i){return typeof i=="string"?Nt.fromBase64String(i):Nt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="server_timestamp",zR="__type__",FR="__previous_value__",qR="__local_write_time__";function op(i){var t,n;return((n=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[zR])==null?void 0:n.stringValue)===BR}function lp(i){const e=i.mapValue.fields[FR];return op(e)?lp(e):e}function Lh(i){const e=cs(i.mapValue.fields[qR].timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t,n,a,l,c,f,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=y}}const Iy="(default)";class _a{constructor(e,t){this.projectId=e,this.database=t||Iy}static empty(){return new _a("","")}get isDefaultDatabase(){return this.database===Iy}isEqual(e){return e instanceof _a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="__type__",HR="__max__",aa={mapValue:{fields:{__type__:{stringValue:HR}}}},zv="__vector__",hu="value",cm={nullValue:"NULL_VALUE"};function ya(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?op(i)?4:GR(i)?9007199254740991:up(i)?10:11:ye(28295,{value:i})}function Vr(i,e){if(i===e)return!0;const t=ya(i);if(t!==ya(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Lh(i).isEqual(Lh(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=cs(a.timestampValue),f=cs(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,l){return hs(a.bytesValue).isEqual(hs(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,l){return Et(a.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(a.geoPointValue.longitude)===Et(l.geoPointValue.longitude)})(i,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Et(a.integerValue)===Et(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Et(a.doubleValue),f=Et(l.doubleValue);return c===f?Oh(c)===Oh(f):isNaN(c)&&isNaN(f)}return!1})(i,e);case 9:return su(i.arrayValue.values||[],e.arrayValue.values||[],Vr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(gI(c)!==gI(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Vr(c[m],f[m])))return!1;return!0})(i,e);default:return ye(52216,{left:i})}}function Uh(i,e){return(i.values||[]).find((t=>Vr(t,e)))!==void 0}function va(i,e){if(i===e)return 0;const t=ya(i),n=ya(e);if(t!==n)return Oe(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(i.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Et(l.integerValue||l.doubleValue),m=Et(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(i,e);case 3:return yI(i.timestampValue,e.timestampValue);case 4:return yI(Lh(i),Lh(e));case 5:return yy(i.stringValue,e.stringValue);case 6:return(function(l,c){const f=hs(l),m=hs(c);return f.compareTo(m)})(i.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const y=Oe(f[g],m[g]);if(y!==0)return y}return Oe(f.length,m.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Oe(Et(l.latitude),Et(c.latitude));return f!==0?f:Oe(Et(l.longitude),Et(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return vI(i.arrayValue,e.arrayValue);case 10:return(function(l,c){var I,D,F,B;const f=l.fields||{},m=c.fields||{},g=(I=f[hu])==null?void 0:I.arrayValue,y=(D=m[hu])==null?void 0:D.arrayValue,T=Oe(((F=g==null?void 0:g.values)==null?void 0:F.length)||0,((B=y==null?void 0:y.values)==null?void 0:B.length)||0);return T!==0?T:vI(g,y)})(i.mapValue,e.mapValue);case 11:return(function(l,c){if(l===aa.mapValue&&c===aa.mapValue)return 0;if(l===aa.mapValue)return 1;if(c===aa.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=c.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let T=0;T<m.length&&T<y.length;++T){const I=yy(m[T],y[T]);if(I!==0)return I;const D=va(f[m[T]],g[y[T]]);if(D!==0)return D}return Oe(m.length,y.length)})(i.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function yI(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Oe(i,e);const t=cs(i),n=cs(e),a=Oe(t.seconds,n.seconds);return a!==0?a:Oe(t.nanos,n.nanos)}function vI(i,e){const t=i.values||[],n=e.values||[];for(let a=0;a<t.length&&a<n.length;++a){const l=va(t[a],n[a]);if(l)return l}return Oe(t.length,n.length)}function du(i){return Sy(i)}function Sy(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const n=cs(t);return`time(${n.seconds},${n.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return hs(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return me.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let n="[",a=!0;for(const l of t.values||[])a?a=!1:n+=",",n+=Sy(l);return n+"]"})(i.arrayValue):"mapValue"in i?(function(t){const n=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of n)l?l=!1:a+=",",a+=`${c}:${Sy(t.fields[c])}`;return a+"}"})(i.mapValue):ye(61005,{value:i})}function hm(i){switch(ya(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lp(i);return e?16+hm(e):16;case 5:return 2*i.stringValue.length;case 6:return hs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((a,l)=>a+hm(l)),0)})(i.arrayValue);case 10:case 11:return(function(n){let a=0;return xa(n.fields,((l,c)=>{a+=l.length+hm(c)})),a})(i.mapValue);default:throw ye(13486,{value:i})}}function No(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ay(i){return!!i&&"integerValue"in i}function jh(i){return!!i&&"arrayValue"in i}function TI(i){return!!i&&"nullValue"in i}function EI(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function dm(i){return!!i&&"mapValue"in i}function up(i){var t,n;return((n=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[Bv])==null?void 0:n.stringValue)===zv}function yh(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return xa(i.mapValue.fields,((t,n)=>e.mapValue.fields[t]=yh(n))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yh(i.arrayValue.values[t]);return e}return{...i}}function GR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===HR}const KR={mapValue:{fields:{[Bv]:{stringValue:zv},[hu]:{arrayValue:{}}}}};function GM(i){return"nullValue"in i?cm:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?No(_a.empty(),me.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?up(i)?KR:{mapValue:{}}:ye(35942,{value:i})}function KM(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?No(_a.empty(),me.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?KR:"mapValue"in i?up(i)?{mapValue:{}}:aa:ye(61959,{value:i})}function wI(i,e){const t=va(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function bI(i,e){const t=va(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!dm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yh(t)}setAll(e){let t=wt.emptyPath(),n={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,n,a),n={},a=[],t=f.popLast()}c?n[f.lastSegment()]=yh(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,n,a)}delete(e){const t=this.field(e.popLast());dm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=t.mapValue.fields[e.get(n)];dm(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,n){xa(t,((a,l)=>e[a]=l));for(const a of n)delete e[a]}clone(){return new _n(yh(this.value))}}function QR(i){const e=[];return xa(i.fields,((t,n)=>{const a=new wt([t]);if(dm(n)){const l=QR(n.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t,n,a,l,c,f){this.key=e,this.documentType=t,this.version=n,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new gt(e,0,Se.min(),Se.min(),Se.min(),_n.empty(),0)}static newFoundDocument(e,t,n,a){return new gt(e,1,t,Se.min(),n,a,0)}static newNoDocument(e,t){return new gt(e,2,t,Se.min(),Se.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new gt(e,3,t,Se.min(),Se.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t){this.position=e,this.inclusive=t}}function II(i,e,t){let n=0;for(let a=0;a<i.position.length;a++){const l=e[a],c=i.position[a];if(l.field.isKeyField()?n=me.comparator(me.fromName(c.referenceValue),t.key):n=va(c,t.data.field(l.field)),l.dir==="desc"&&(n*=-1),n!==0)break}return n}function SI(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Vr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t="asc"){this.field=e,this.dir=t}}function QM(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{}class Ge extends $R{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new $M(e,t,n):t==="array-contains"?new XM(e,n):t==="in"?new ex(e,n):t==="not-in"?new JM(e,n):t==="array-contains-any"?new ZM(e,n):new Ge(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new YM(e,n):new WM(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(va(t,this.value)):t!==null&&ya(this.value)===ya(t)&&this.matchesComparison(va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class st extends $R{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new st(e,t)}matches(e){return fu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fu(i){return i.op==="and"}function Ry(i){return i.op==="or"}function Fv(i){return YR(i)&&fu(i)}function YR(i){for(const e of i.filters)if(e instanceof st)return!1;return!0}function xy(i){if(i instanceof Ge)return i.field.canonicalString()+i.op.toString()+du(i.value);if(Fv(i))return i.filters.map((e=>xy(e))).join(",");{const e=i.filters.map((t=>xy(t))).join(",");return`${i.op}(${e})`}}function WR(i,e){return i instanceof Ge?(function(n,a){return a instanceof Ge&&n.op===a.op&&n.field.isEqual(a.field)&&Vr(n.value,a.value)})(i,e):i instanceof st?(function(n,a){return a instanceof st&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((l,c,f)=>l&&WR(c,a.filters[f])),!0):!1})(i,e):void ye(19439)}function XR(i,e){const t=i.filters.concat(e);return st.create(t,i.op)}function JR(i){return i instanceof Ge?(function(t){return`${t.field.canonicalString()} ${t.op} ${du(t.value)}`})(i):i instanceof st?(function(t){return t.op.toString()+" {"+t.getFilters().map(JR).join(" ,")+"}"})(i):"Filter"}class $M extends Ge{constructor(e,t,n){super(e,t,n),this.key=me.fromName(n.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class YM extends Ge{constructor(e,t){super(e,"in",t),this.keys=ZR("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class WM extends Ge{constructor(e,t){super(e,"not-in",t),this.keys=ZR("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ZR(i,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>me.fromName(n.referenceValue)))}class XM extends Ge{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jh(t)&&Uh(t.arrayValue,this.value)}}class ex extends Ge{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uh(this.value.arrayValue,t)}}class JM extends Ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uh(this.value.arrayValue,t)}}class ZM extends Ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>Uh(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,t=null,n=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Cy(i,e=null,t=[],n=[],a=null,l=null,c=null){return new e4(i,e,t,n,a,l,c)}function Do(i){const e=pe(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>xy(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(l){return l.field.canonicalString()+l.dir})(n))).join(","),nd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>du(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>du(n))).join(",")),e.Te=t}return e.Te}function rd(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!QM(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!WR(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!SI(i.startAt,e.startAt)&&SI(i.endAt,e.endAt)}function Nm(i){return me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Dm(i,e){return i.filters.filter((t=>t instanceof Ge&&t.field.isEqual(e)))}function AI(i,e,t){let n=cm,a=!0;for(const l of Dm(i,e)){let c=cm,f=!0;switch(l.op){case"<":case"<=":c=GM(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,f=!1;break;case"!=":case"not-in":c=cm}wI({value:n,inclusive:a},{value:c,inclusive:f})<0&&(n=c,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];wI({value:n,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(n=c,a=t.inclusive);break}}return{value:n,inclusive:a}}function RI(i,e,t){let n=aa,a=!0;for(const l of Dm(i,e)){let c=aa,f=!0;switch(l.op){case">=":case">":c=KM(l.value),f=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,f=!1;break;case"!=":case"not-in":c=aa}bI({value:n,inclusive:a},{value:c,inclusive:f})>0&&(n=c,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];bI({value:n,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(n=c,a=t.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t=null,n=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tx(i,e,t,n,a,l,c,f){return new ps(i,e,t,n,a,l,c,f)}function Cu(i){return new ps(i)}function xI(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function qv(i){return i.collectionGroup!==null}function Jl(i){const e=pe(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new at(wt.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Bh(l,n))})),t.has(wt.keyField().canonicalString())||e.Ie.push(new Bh(wt.keyField(),n))}return e.Ie}function Ln(i){const e=pe(i);return e.Ee||(e.Ee=t4(e,Jl(i))),e.Ee}function t4(i,e){if(i.limitType==="F")return Cy(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Bh(a.field,l)}));const t=i.endAt?new Ta(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new Ta(i.startAt.position,i.startAt.inclusive):null;return Cy(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function Ny(i,e){const t=i.filters.concat([e]);return new ps(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Pm(i,e,t){return new ps(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function sd(i,e){return rd(Ln(i),Ln(e))&&i.limitType===e.limitType}function nx(i){return`${Do(Ln(i))}|lt:${i.limitType}`}function Fl(i){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((a=>JR(a))).join(", ")}]`),nd(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((a=>du(a))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((a=>du(a))).join(",")),`Target(${n})`})(Ln(i))}; limitType=${i.limitType})`}function ad(i,e){return e.isFoundDocument()&&(function(n,a){const l=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(l):me.isDocumentKey(n.path)?n.path.isEqual(l):n.path.isImmediateParentOf(l)})(i,e)&&(function(n,a){for(const l of Jl(n))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(n,a){for(const l of n.filters)if(!l.matches(a))return!1;return!0})(i,e)&&(function(n,a){return!(n.startAt&&!(function(c,f,m){const g=II(c,f,m);return c.inclusive?g<=0:g<0})(n.startAt,Jl(n),a)||n.endAt&&!(function(c,f,m){const g=II(c,f,m);return c.inclusive?g>=0:g>0})(n.endAt,Jl(n),a))})(i,e)}function ix(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function rx(i){return(e,t)=>{let n=!1;for(const a of Jl(i)){const l=n4(a,e,t);if(l!==0)return l;n=n||a.field.isKeyField()}return 0}}function n4(i,e,t){const n=i.field.isKeyField()?me.comparator(e.key,t.key):(function(l,c,f){const m=c.data.field(l),g=f.data.field(l);return m!==null&&g!==null?va(m,g):ye(42886)})(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return ye(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[a,l]of n)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[t]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){xa(this.inner,((t,n)=>{for(const[a,l]of n)e(a,l)}))}isEmpty(){return UR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=new ft(me.comparator);function Wn(){return i4}const sx=new ft(me.comparator);function rh(...i){let e=sx;for(const t of i)e=e.insert(t.key,t);return e}function ax(i){let e=sx;return i.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function xr(){return vh()}function ox(){return vh()}function vh(){return new gs((i=>i.toString()),((i,e)=>i.isEqual(e)))}const r4=new ft(me.comparator),s4=new at(me.comparator);function Le(...i){let e=s4;for(const t of i)e=e.add(t);return e}const a4=new at(Oe);function Hv(){return a4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oh(e)?"-0":e}}function lx(i){return{integerValue:""+i}}function ux(i,e){return RR(e)?lx(e):Gv(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this._=void 0}}function o4(i,e,t){return i instanceof mu?(function(a,l){const c={fields:{[zR]:{stringValue:BR},[qR]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&op(l)&&(l=lp(l)),l&&(c.fields[FR]=l),{mapValue:c}})(t,e):i instanceof Po?hx(i,e):i instanceof Oo?dx(i,e):(function(a,l){const c=cx(a,l),f=CI(c)+CI(a.Ae);return Ay(c)&&Ay(a.Ae)?lx(f):Gv(a.serializer,f)})(i,e)}function l4(i,e,t){return i instanceof Po?hx(i,e):i instanceof Oo?dx(i,e):t}function cx(i,e){return i instanceof pu?(function(n){return Ay(n)||(function(l){return!!l&&"doubleValue"in l})(n)})(e)?e:{integerValue:0}:null}class mu extends cp{}class Po extends cp{constructor(e){super(),this.elements=e}}function hx(i,e){const t=fx(e);for(const n of i.elements)t.some((a=>Vr(a,n)))||t.push(n);return{arrayValue:{values:t}}}class Oo extends cp{constructor(e){super(),this.elements=e}}function dx(i,e){let t=fx(e);for(const n of i.elements)t=t.filter((a=>!Vr(a,n)));return{arrayValue:{values:t}}}class pu extends cp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function CI(i){return Et(i.integerValue||i.doubleValue)}function fx(i){return jh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.field=e,this.transform=t}}function u4(i,e){return i.field.isEqual(e.field)&&(function(n,a){return n instanceof Po&&a instanceof Po||n instanceof Oo&&a instanceof Oo?su(n.elements,a.elements,Vr):n instanceof pu&&a instanceof pu?Vr(n.Ae,a.Ae):n instanceof mu&&a instanceof mu})(i.transform,e.transform)}class c4{constructor(e,t){this.version=e,this.transformResults=t}}class bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fm(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class hp{}function mx(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Du(i.key,bt.none()):new Nu(i.key,i.data,bt.none());{const t=i.data,n=_n.empty();let a=new at(wt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?n.delete(l):n.set(l,c),a=a.add(l)}return new _s(i.key,n,new Yn(a.toArray()),bt.none())}}function h4(i,e,t){i instanceof Nu?(function(a,l,c){const f=a.value.clone(),m=DI(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(i,e,t):i instanceof _s?(function(a,l,c){if(!fm(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=DI(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(px(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Th(i,e,t,n){return i instanceof Nu?(function(l,c,f,m){if(!fm(l.precondition,c))return f;const g=l.value.clone(),y=PI(l.fieldTransforms,m,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,e,t,n):i instanceof _s?(function(l,c,f,m){if(!fm(l.precondition,c))return f;const g=PI(l.fieldTransforms,m,c),y=c.data;return y.setAll(px(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(i,e,t,n):(function(l,c,f){return fm(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(i,e,t)}function d4(i,e){let t=null;for(const n of i.fieldTransforms){const a=e.data.field(n.field),l=cx(n.transform,a||null);l!=null&&(t===null&&(t=_n.empty()),t.set(n.field,l))}return t||null}function NI(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&su(n,a,((l,c)=>u4(l,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Nu extends hp{constructor(e,t,n,a=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class _s extends hp{constructor(e,t,n,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function px(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=i.data.field(t);e.set(t,n)}})),e}function DI(i,e,t){const n=new Map;we(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let a=0;a<t.length;a++){const l=i[a],c=l.transform,f=e.data.field(l.field);n.set(l.field,l4(c,f,t[a]))}return n}function PI(i,e,t){const n=new Map;for(const a of i){const l=a.transform,c=t.data.field(a.field);n.set(a.field,o4(l,c,e))}return n}class Du extends hp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kv extends hp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,t,n,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&h4(l,e,n[a])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Th(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Th(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ox();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=mx(c,f);m!==null&&n.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Se.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&su(this.mutations,e.mutations,((t,n)=>NI(t,n)))&&su(this.baseMutations,e.baseMutations,((t,n)=>NI(t,n)))}}class $v{constructor(e,t,n,a){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=a}static from(e,t,n){we(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=(function(){return r4})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,n[c].version);return new $v(e,t,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,$e;function gx(i){switch(i){case K.OK:return ye(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return ye(15467,{code:i})}}function _x(i){if(i===void 0)return Ut("GRPC error has no .code"),K.UNKNOWN;switch(i){case Yt.OK:return K.OK;case Yt.CANCELLED:return K.CANCELLED;case Yt.UNKNOWN:return K.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return K.INTERNAL;case Yt.UNAVAILABLE:return K.UNAVAILABLE;case Yt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Yt.NOT_FOUND:return K.NOT_FOUND;case Yt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Yt.ABORTED:return K.ABORTED;case Yt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Yt.DATA_LOSS:return K.DATA_LOSS;default:return ye(39323,{code:i})}}($e=Yt||(Yt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=new ca([4294967295,4294967295],0);function OI(i){const e=yx().encode(i),t=new cR;return t.update(e),new Uint8Array(t.digest())}function kI(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ca([t,n],0),new ca([a,l],0)]}class Wv{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new sh(`Invalid padding: ${t}`);if(n<0)throw new sh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new sh(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new sh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ca.fromNumber(this.ge)}ye(e,t,n){let a=e.add(t.multiply(ca.fromNumber(n)));return a.compare(m4)===1&&(a=new ca([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=OI(e),[n,a]=kI(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(n,a,l);if(!this.we(c))return!1}return!0}static create(e,t,n){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Wv(l,a,t);return n.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=OI(e),[n,a]=kI(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(n,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class sh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t,n,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const a=new Map;return a.set(e,ud.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ld(Se.min(),a,new ft(Oe),Wn(),Le())}}class ud{constructor(e,t,n,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ud(n,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,t,n,a){this.be=e,this.removedTargetIds=t,this.key=n,this.De=a}}class vx{constructor(e,t){this.targetId=e,this.Ce=t}}class Tx{constructor(e,t,n=Nt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=a}}class VI{constructor(){this.ve=0,this.Fe=MI(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),n=Le();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:n=n.add(a);break;default:ye(38017,{changeType:l})}})),new ud(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=MI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class p4{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wn(),this.Je=$f(),this.He=$f(),this.Ye=new ft(Oe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,n=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Nm(l))if(n===0){const c=new me(l.path);this.et(t,c,gt.newNoDocument(c,Se.min()))}else we(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=hs(n).toUint8Array()}catch(m){if(m instanceof jR)return kr("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Wv(c,a,l)}catch(m){return kr(m instanceof sh?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let a=0;return n.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Nm(f.target)){const m=new me(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,gt.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let n=Le();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(n=n.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new ld(e,t,this.Ye,this.je,n);return this.je=Wn(),this.Je=$f(),this.He=$f(),this.Ye=new ft(Oe),a}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new VI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new at(Oe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new at(Oe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new VI),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function $f(){return new ft(me.comparator)}function MI(){return new ft(me.comparator)}const g4={asc:"ASCENDING",desc:"DESCENDING"},_4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y4={and:"AND",or:"OR"};class v4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dy(i,e){return i.useProto3Json||nd(e)?e:{value:e}}function gu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ex(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function T4(i,e){return gu(i,e.toTimestamp())}function jt(i){return we(!!i,49232),Se.fromTimestamp((function(t){const n=cs(t);return new tt(n.seconds,n.nanos)})(i))}function Xv(i,e){return Py(i,e).canonicalString()}function Py(i,e){const t=(function(a){return new Fe(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function wx(i){const e=Fe.fromString(i);return we(Px(e),10190,{key:e.toString()}),e}function zh(i,e){return Xv(i.databaseId,e.path)}function Nr(i,e){const t=wx(e);if(t.get(1)!==i.databaseId.projectId)throw new te(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new te(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new me(Sx(t))}function bx(i,e){return Xv(i.databaseId,e)}function Ix(i){const e=wx(i);return e.length===4?Fe.emptyPath():Sx(e)}function Oy(i){return new Fe(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Sx(i){return we(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function LI(i,e,t){return{name:zh(i,e),fields:t.value.mapValue.fields}}function Ax(i,e,t){const n=Nr(i,e.name),a=jt(e.updateTime),l=e.createTime?jt(e.createTime):Se.min(),c=new _n({mapValue:{fields:e.fields}}),f=gt.newFoundDocument(n,a,l,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function E4(i,e){return"found"in e?(function(n,a){we(!!a.found,43571),a.found.name,a.found.updateTime;const l=Nr(n,a.found.name),c=jt(a.found.updateTime),f=a.found.createTime?jt(a.found.createTime):Se.min(),m=new _n({mapValue:{fields:a.found.fields}});return gt.newFoundDocument(l,c,f,m)})(i,e):"missing"in e?(function(n,a){we(!!a.missing,3894),we(!!a.readTime,22933);const l=Nr(n,a.missing),c=jt(a.readTime);return gt.newNoDocument(l,c)})(i,e):ye(7234,{result:e})}function w4(i,e){let t;if("targetChange"in e){e.targetChange;const n=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ye(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(we(y===void 0||typeof y=="string",58123),Nt.fromBase64String(y||"")):(we(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Nt.fromUint8Array(y||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(g){const y=g.code===void 0?K.UNKNOWN:_x(g.code);return new te(y,g.message||"")})(c);t=new Tx(n,a,l,f||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Nr(i,n.document.name),l=jt(n.document.updateTime),c=n.document.createTime?jt(n.document.createTime):Se.min(),f=new _n({mapValue:{fields:n.document.fields}}),m=gt.newFoundDocument(a,l,c,f),g=n.targetIds||[],y=n.removedTargetIds||[];t=new mm(g,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Nr(i,n.document),l=n.readTime?jt(n.readTime):Se.min(),c=gt.newNoDocument(a,l),f=n.removedTargetIds||[];t=new mm([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Nr(i,n.document),l=n.removedTargetIds||[];t=new mm([],l,a,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:l}=n,c=new f4(a,l),f=n.targetId;t=new vx(f,c)}}return t}function Fh(i,e){let t;if(e instanceof Nu)t={update:LI(i,e.key,e.value)};else if(e instanceof Du)t={delete:zh(i,e.key)};else if(e instanceof _s)t={update:LI(i,e.key,e.data),updateMask:x4(e.fieldMask)};else{if(!(e instanceof Kv))return ye(16599,{Vt:e.type});t={verify:zh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(l,c){const f=c.transform;if(f instanceof mu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Po)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Oo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pu)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw ye(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:T4(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ye(27497)})(i,e.precondition)),t}function ky(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?bt.updateTime(jt(l.updateTime)):l.exists!==void 0?bt.exists(l.exists):bt.none()})(e.currentDocument):bt.none(),n=e.updateTransforms?e.updateTransforms.map((a=>(function(c,f){let m=null;if("setToServerValue"in f)we(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new mu;else if("appendMissingElements"in f){const y=f.appendMissingElements.values||[];m=new Po(y)}else if("removeAllFromArray"in f){const y=f.removeAllFromArray.values||[];m=new Oo(y)}else"increment"in f?m=new pu(c,f.increment):ye(16584,{proto:f});const g=wt.fromServerFormat(f.fieldPath);return new od(g,m)})(i,a))):[];if(e.update){e.update.name;const a=Nr(i,e.update.name),l=new _n({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new Yn(g.map((y=>wt.fromServerFormat(y))))})(e.updateMask);return new _s(a,l,c,t,n)}return new Nu(a,l,t,n)}if(e.delete){const a=Nr(i,e.delete);return new Du(a,t)}if(e.verify){const a=Nr(i,e.verify);return new Kv(a,t)}return ye(1463,{proto:e})}function b4(i,e){return i&&i.length>0?(we(e!==void 0,14353),i.map((t=>(function(a,l){let c=a.updateTime?jt(a.updateTime):jt(l);return c.isEqual(Se.min())&&(c=jt(l)),new c4(c,a.transformResults||[])})(t,e)))):[]}function Rx(i,e){return{documents:[bx(i,e.path)]}}function xx(i,e){const t={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=bx(i,a);const l=(function(g){if(g.length!==0)return Dx(st.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((y=>(function(I){return{field:ql(I.field),direction:S4(I.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Dy(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function Cx(i){let e=Ix(i.parent);const t=i.structuredQuery,n=t.from?t.from.length:0;let a=null;if(n>0){we(n===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(T){const I=Nx(T);return I instanceof st&&Fv(I)?I.getFilters():[I]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((I=>(function(F){return new Bh(Hl(F.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let I;return I=typeof T=="object"?T.value:T,nd(I)?null:I})(t.limit));let m=null;t.startAt&&(m=(function(T){const I=!!T.before,D=T.values||[];return new Ta(D,I)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const I=!T.before,D=T.values||[];return new Ta(D,I)})(t.endAt)),tx(e,a,c,l,f,"F",m,g)}function I4(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Nx(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Hl(t.unaryFilter.field);return Ge.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Hl(t.unaryFilter.field);return Ge.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Hl(t.unaryFilter.field);return Ge.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Hl(t.unaryFilter.field);return Ge.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Ge.create(Hl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return st.create(t.compositeFilter.filters.map((n=>Nx(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(i):ye(30097,{filter:i})}function S4(i){return g4[i]}function A4(i){return _4[i]}function R4(i){return y4[i]}function ql(i){return{fieldPath:i.canonicalString()}}function Hl(i){return wt.fromServerFormat(i.fieldPath)}function Dx(i){return i instanceof Ge?(function(t){if(t.op==="=="){if(EI(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NAN"}};if(TI(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(EI(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NAN"}};if(TI(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(t.field),op:A4(t.op),value:t.value}}})(i):i instanceof st?(function(t){const n=t.getFilters().map((a=>Dx(a)));return n.length===1?n[0]:{compositeFilter:{op:R4(t.op),filters:n}}})(i):ye(54877,{filter:i})}function x4(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Px(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,t,n,a,l=Se.min(),c=Se.min(),f=Nt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.yt=e}}function C4(i,e){let t;if(e.document)t=Ax(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=me.fromSegments(e.noDocument.path),a=Vo(e.noDocument.readTime);t=gt.newNoDocument(n,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const n=me.fromSegments(e.unknownDocument.path),a=Vo(e.unknownDocument.version);t=gt.newUnknownDocument(n,a)}}return e.readTime&&t.setReadTime((function(a){const l=new tt(a[0],a[1]);return Se.fromTimestamp(l)})(e.readTime)),t}function UI(i,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Om(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(l,c){return{name:zh(l,c.key),fields:c.data.value.mapValue.fields,updateTime:gu(l,c.version.toTimestamp()),createTime:gu(l,c.createTime.toTimestamp())}})(i.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:ko(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:ko(e.version)}}return n}function Om(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function ko(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vo(i){const e=new tt(i.seconds,i.nanoseconds);return Se.fromTimestamp(e)}function po(i,e){const t=(e.baseMutations||[]).map((l=>ky(i.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];c.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const n=e.mutations.map((l=>ky(i.yt,l))),a=tt.fromMillis(e.localWriteTimeMs);return new Qv(e.batchId,a,t,n)}function ah(i){const e=Vo(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Vo(i.lastLimboFreeSnapshotVersion):Se.min();let n;return n=(function(l){return l.documents!==void 0})(i.query)?(function(l){const c=l.documents.length;return we(c===1,1966,{count:c}),Ln(Cu(Ix(l.documents[0])))})(i.query):(function(l){return Ln(Cx(l))})(i.query),new rs(n,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Nt.fromBase64String(i.resumeToken))}function kx(i,e){const t=ko(e.snapshotVersion),n=ko(e.lastLimboFreeSnapshotVersion);let a;a=Nm(e.target)?Rx(i.yt,e.target):xx(i.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Do(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function Jv(i){const e=Cx({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Pm(e,e.limit,"L"):e}function $_(i,e){return new Yv(e.largestBatchId,ky(i.yt,e.overlayMutation))}function jI(i,e){const t=e.path.lastSegment();return[i,xn(e.path.popLast()),t]}function BI(i,e,t,n){return{indexId:i,uid:e,sequenceNumber:t,readTime:ko(n.readTime),documentKey:xn(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{getBundleMetadata(e,t){return zI(e).get(t).next((n=>{if(n)return(function(l){return{id:l.bundleId,createTime:Vo(l.createTime),version:l.version}})(n)}))}saveBundleMetadata(e,t){return zI(e).put((function(a){return{bundleId:a.id,createTime:ko(jt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return FI(e).get(t).next((n=>{if(n)return(function(l){return{name:l.name,query:Jv(l.bundledQuery),readTime:Vo(l.readTime)}})(n)}))}saveNamedQuery(e,t){return FI(e).put((function(a){return{name:a.name,readTime:ko(jt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function zI(i){return tn(i,rp)}function FI(i){return tn(i,sp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new dp(e,n)}getOverlay(e,t){return Qc(e).get(jI(this.userId,t)).next((n=>n?$_(this.serializer,n):null))}getOverlays(e,t){const n=xr();return j.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&n.set(a,l)})))).next((()=>n))}saveOverlays(e,t,n){const a=[];return n.forEach(((l,c)=>{const f=new Yv(t,c);a.push(this.St(e,f))})),j.waitFor(a)}removeOverlaysForBatchId(e,t,n){const a=new Set;t.forEach((c=>a.add(xn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const f=IDBKeyRange.bound([this.userId,c,n],[this.userId,c,n+1],!1,!0);l.push(Qc(e).Z(wy,f))})),j.waitFor(l)}getOverlaysForCollection(e,t,n){const a=xr(),l=xn(t),c=IDBKeyRange.bound([this.userId,l,n],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Qc(e).J(wy,c).next((f=>{for(const m of f){const g=$_(this.serializer,m);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,n,a){const l=xr();let c;const f=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qc(e).ee({index:OR,range:f},((m,g,y)=>{const T=$_(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):y.done()})).next((()=>l))}St(e,t){return Qc(e).put((function(a,l,c){const[f,m,g]=jI(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Fh(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Qc(i){return tn(i,ap)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{bt(e){return tn(e,Uv)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t==null?void 0:t.value;return n?Nt.fromUint8Array(n):Nt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Et(e.integerValue));else if("doubleValue"in e){const n=Et(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Oh(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=cs(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(hs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?GR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):up(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ye(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const a of Object.keys(n))this.Ot(a,t),this.Ct(n[a],t)}kt(e,t){var c,f;const n=e.fields||{};this.Ft(t,53);const a=hu,l=((f=(c=n[a].arrayValue)==null?void 0:c.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(Et(l)),this.Ot(a,t),this.Ct(n[a],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const a of n)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),me.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}go.Kt=new go;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=255;function P4(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function qI(i){const e=64-(function(n){let a=0;for(let l=0;l<8;++l){const c=P4(255&n[l]);if(a+=c,c!==8)break}return a})(i);return Math.ceil(e/8)}class O4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),n=qI(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let a=t.length-n;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),n=qI(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let a=t.length-n;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Ml),this.sn(255)}_n(){this.an(Ml),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let a=1;a<t.length;++a)t[a]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ml?(this.sn(Ml),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ml?(this.an(Ml),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class k4{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class V4{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class $c{constructor(){this.cn=new O4,this.ln=new k4(this.cn),this.hn=new V4(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t,n,a){this.Tn=e,this.In=t,this.En=n,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new _o(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:pm(this.En),directionalValue:pm(this.dn),orderedDocumentKey:pm(t),documentKey:n.path.toArray()}}Vn(e,t,n){const a=this.Rn(e,t,n);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function ea(i,e){let t=i.Tn-e.Tn;return t!==0?t:(t=HI(i.En,e.En),t!==0?t:(t=HI(i.dn,e.dn),t!==0?t:me.comparator(i.In,e.In)))}function HI(i,e){for(let t=0;t<i.length&&t<e.length;++t){const n=i[t]-e[t];if(n!==0)return n}return i.length-e.length}function pm(i){return WS()?(function(t){let n="";for(let a=0;a<t.length;a++)n+=String.fromCharCode(t[a]);return n})(i):i}function GI(i){return typeof i!="string"?i:(function(t){const n=new Uint8Array(t.length);for(let a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n})(i)}class KI{constructor(e){this.mn=new at(((t,n)=>wt.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(we(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=vy(e);if(t!==void 0&&!this.wn(t))return!1;const n=co(e);let a=new Set,l=0,c=0;for(;l<n.length&&this.wn(n[l]);++l)a=a.add(n[l].fieldPath.canonicalString());if(l===n.length)return!0;if(this.mn.size>0){const f=this.mn.getIterator().getNext();if(!a.has(f.field.canonicalString())){const m=n[l];if(!this.Sn(f,m)||!this.bn(this.fn[c++],m))return!1}++l}for(;l<n.length;++l){const f=n[l];if(c>=this.fn.length||!this.bn(this.fn[c++],f))return!1}return!0}Dn(){if(this.pn)return null;let e=new at(wt.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new om(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new om(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new om(n.field,n.dir==="asc"?0:1)));return new Am(Am.UNKNOWN_ID,this.collectionId,t,Ph.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(i){var t,n;if(we(i instanceof Ge||i instanceof st,20012),i instanceof Ge){if(i instanceof ex){const a=((n=(t=i.value.arrayValue)==null?void 0:t.values)==null?void 0:n.map((l=>Ge.create(i.field,"==",l))))||[];return st.create(a,"or")}return i}const e=i.filters.map((a=>Vx(a)));return st.create(e,i.op)}function M4(i){if(i.getFilters().length===0)return[];const e=Ly(Vx(i));return we(Mx(e),7391),Vy(e)||My(e)?[e]:e.getFilters()}function Vy(i){return i instanceof Ge}function My(i){return i instanceof st&&Fv(i)}function Mx(i){return Vy(i)||My(i)||(function(t){if(t instanceof st&&Ry(t)){for(const n of t.getFilters())if(!Vy(n)&&!My(n))return!1;return!0}return!1})(i)}function Ly(i){if(we(i instanceof Ge||i instanceof st,34018),i instanceof Ge)return i;if(i.filters.length===1)return Ly(i.filters[0]);const e=i.filters.map((n=>Ly(n)));let t=st.create(e,i.op);return t=km(t),Mx(t)?t:(we(t instanceof st,64498),we(fu(t),40251),we(t.filters.length>1,57927),t.filters.reduce(((n,a)=>Zv(n,a))))}function Zv(i,e){let t;return we(i instanceof Ge||i instanceof st,38388),we(e instanceof Ge||e instanceof st,25473),t=i instanceof Ge?e instanceof Ge?(function(a,l){return st.create([a,l],"and")})(i,e):QI(i,e):e instanceof Ge?QI(e,i):(function(a,l){if(we(a.filters.length>0&&l.filters.length>0,48005),fu(a)&&fu(l))return XR(a,l.getFilters());const c=Ry(a)?a:l,f=Ry(a)?l:a,m=c.filters.map((g=>Zv(g,f)));return st.create(m,"or")})(i,e),km(t)}function QI(i,e){if(fu(e))return XR(e,i.getFilters());{const t=e.filters.map((n=>Zv(i,n)));return st.create(t,"or")}}function km(i){if(we(i instanceof Ge||i instanceof st,11850),i instanceof Ge)return i;const e=i.getFilters();if(e.length===1)return km(e[0]);if(YR(i))return i;const t=e.map((a=>km(a))),n=[];return t.forEach((a=>{a instanceof Ge?n.push(a):a instanceof st&&(a.op===i.op?n.push(...a.filters):n.push(a))})),n.length===1?n[0]:st.create(n,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(){this.Cn=new eT}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(hi.min())}updateCollectionGroup(e,t,n){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class eT{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),a=this.index[t]||new at(Fe.comparator),l=!a.has(n);return this.index[t]=a.add(n),l}has(e){const t=e.lastSegment(),n=e.popLast(),a=this.index[t];return a&&a.has(n)}getEntries(e){return(this.index[e]||new at(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="IndexedDbIndexManager",Yf=new Uint8Array(0);class U4{constructor(e,t){this.databaseId=t,this.vn=new eT,this.Fn=new gs((n=>Do(n)),((n,a)=>rd(n,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:n,parent:xn(a)};return YI(e).put(l)}return j.resolve()}getCollectionParents(e,t){const n=[],a=IDBKeyRange.bound([t,""],[yR(t),""],!1,!0);return YI(e).J(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;n.push(Rr(c.parent))}return n}))}addFieldIndex(e,t){const n=Yc(e),a=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const l=n.add(a);if(t.indexState){const c=Ul(e);return l.next((f=>{c.put(BI(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const n=Yc(e),a=Ul(e),l=Ll(e);return n.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Yc(e),n=Ll(e),a=Ul(e);return t.Z().next((()=>n.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return j.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((a=>{if(a===0||a===1){const l=new KI(n).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const n=Ll(e);let a=!0;const l=new Map;return j.forEach(this.Mn(t),(c=>this.xn(e,c).next((f=>{a&&(a=!!f),l.set(c,f)})))).next((()=>{if(a){let c=Le();const f=[];return j.forEach(l,((m,g)=>{re($I,`Using index ${(function(se){return`id=${se.indexId}|cg=${se.collectionGroup}|f=${se.fields.map((ge=>`${ge.fieldPath}:${ge.kind}`)).join(",")}`})(m)} to execute ${Do(t)}`);const y=(function(se,ge){const Ae=vy(ge);if(Ae===void 0)return null;for(const Ee of Dm(se,Ae.fieldPath))switch(Ee.op){case"array-contains-any":return Ee.value.arrayValue.values||[];case"array-contains":return[Ee.value]}return null})(g,m),T=(function(se,ge){const Ae=new Map;for(const Ee of co(ge))for(const x of Dm(se,Ee.fieldPath))switch(x.op){case"==":case"in":Ae.set(Ee.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return Ae.set(Ee.fieldPath.canonicalString(),x.value),Array.from(Ae.values())}return null})(g,m),I=(function(se,ge){const Ae=[];let Ee=!0;for(const x of co(ge)){const R=x.kind===0?AI(se,x.fieldPath,se.startAt):RI(se,x.fieldPath,se.startAt);Ae.push(R.value),Ee&&(Ee=R.inclusive)}return new Ta(Ae,Ee)})(g,m),D=(function(se,ge){const Ae=[];let Ee=!0;for(const x of co(ge)){const R=x.kind===0?RI(se,x.fieldPath,se.endAt):AI(se,x.fieldPath,se.endAt);Ae.push(R.value),Ee&&(Ee=R.inclusive)}return new Ta(Ae,Ee)})(g,m),F=this.On(m,g,I),B=this.On(m,g,D),U=this.Nn(m,g,T),ne=this.Bn(m.indexId,y,F,I.inclusive,B,D.inclusive,U);return j.forEach(ne,(ie=>n.Y(ie,t.limit).next((se=>{se.forEach((ge=>{const Ae=me.fromSegments(ge.documentKey);c.has(Ae)||(c=c.add(Ae),f.push(Ae))}))}))))})).next((()=>f))}return j.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=M4(st.create(e.filters,"and")).map((n=>Cy(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,a,l,c,f){const m=(t!=null?t.length:1)*Math.max(n.length,l.length),g=m/(t!=null?t.length:1),y=[];for(let T=0;T<m;++T){const I=t?this.Ln(t[T/g]):Yf,D=this.kn(e,I,n[T%g],a),F=this.qn(e,I,l[T%g],c),B=f.map((U=>this.kn(e,I,U,!0)));y.push(...this.createRange(D,F,B))}return y}kn(e,t,n,a){const l=new _o(e,me.empty(),t,n);return a?l:l.An()}qn(e,t,n,a){const l=new _o(e,me.empty(),t,n);return a?l.An():l}xn(e,t){const n=new KI(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const f of l)n.yn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c}))}getIndexType(e,t){let n=2;const a=this.Mn(t);return j.forEach(a,(l=>this.xn(e,l).next((c=>{c?n!==0&&c.fields.length<(function(m){let g=new at(wt.comparator),y=!1;for(const T of m.filters)for(const I of T.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?y=!0:g=g.add(I.field));for(const T of m.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(y?1:0)})(l)&&(n=1):n=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&n===2?1:n))}Qn(e,t){const n=new $c;for(const a of co(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=n.Pn(a.kind);go.Kt.Dt(l,c)}return n.un()}Ln(e){const t=new $c;return go.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new $c;return go.Kt.Dt(No(this.databaseId,t),n.Pn((function(l){const c=co(l);return c.length===0?0:c[c.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let a=[];a.push(new $c);let l=0;for(const c of co(e)){const f=n[l++];for(const m of a)if(this.Un(t,c.fieldPath)&&jh(f))a=this.Kn(a,c,f);else{const g=m.Pn(c.kind);go.Kt.Dt(f,g)}}return this.Wn(a)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const a=[...e],l=[];for(const c of n.arrayValue.values||[])for(const f of a){const m=new $c;m.seed(f.un()),go.Kt.Dt(c,m.Pn(t.kind)),l.push(m)}return l}Un(e,t){return!!e.filters.find((n=>n instanceof Ge&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=Yc(e),a=Ul(e);return(t?n.J(Ey,IDBKeyRange.bound(t,t)):n.J()).next((l=>{const c=[];return j.forEach(l,(f=>a.get([f.indexId,this.uid]).next((m=>{c.push((function(y,T){const I=T?new Ph(T.sequenceNumber,new hi(Vo(T.readTime),new me(Rr(T.documentKey)),T.largestBatchId)):Ph.empty(),D=y.fields.map((([F,B])=>new om(wt.fromServerFormat(F),B)));return new Am(y.indexId,y.collectionGroup,D,I)})(f,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,a)=>{const l=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Oe(n.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const a=Yc(e),l=Ul(e);return this.Gn(e).next((c=>a.J(Ey,IDBKeyRange.bound(t,t)).next((f=>j.forEach(f,(m=>l.put(BI(m.indexId,this.uid,c,n))))))))}updateIndexEntries(e,t){const n=new Map;return j.forEach(t,((a,l)=>{const c=n.get(a.collectionGroup);return(c?j.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((f=>(n.set(a.collectionGroup,f),j.forEach(f,(m=>this.zn(e,a,m).next((g=>{const y=this.jn(l,m);return g.isEqual(y)?j.resolve():this.Jn(e,l,m,g,y)})))))))}))}Hn(e,t,n,a){return Ll(e).put(a.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,a){return Ll(e).delete(a.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const a=Ll(e);let l=new at(ea);return a.ee({index:PR,range:IDBKeyRange.only([n.indexId,this.uid,pm(this.$n(n,t))])},((c,f)=>{l=l.add(new _o(n.indexId,t,GI(f.arrayValue),GI(f.directionalValue)))})).next((()=>l))}jn(e,t){let n=new at(ea);const a=this.Qn(t,e);if(a==null)return n;const l=vy(t);if(l!=null){const c=e.data.field(l.fieldPath);if(jh(c))for(const f of c.arrayValue.values||[])n=n.add(new _o(t.indexId,e.key,this.Ln(f),a))}else n=n.add(new _o(t.indexId,e.key,Yf,a));return n}Jn(e,t,n,a,l){re($I,"Updating index entries for document '%s'",t.key);const c=[];return(function(m,g,y,T,I){const D=m.getIterator(),F=g.getIterator();let B=Vl(D),U=Vl(F);for(;B||U;){let ne=!1,ie=!1;if(B&&U){const se=y(B,U);se<0?ie=!0:se>0&&(ne=!0)}else B!=null?ie=!0:ne=!0;ne?(T(U),U=Vl(F)):ie?(I(B),B=Vl(D)):(B=Vl(D),U=Vl(F))}})(a,l,ea,(f=>{c.push(this.Hn(e,t,n,f))}),(f=>{c.push(this.Yn(e,t,n,f))})),j.waitFor(c)}Gn(e){let t=1;return Ul(e).ee({index:DR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((c,f)=>ea(c,f))).filter(((c,f,m)=>!f||ea(c,m[f-1])!==0));const a=[];a.push(e);for(const c of n){const f=ea(c,e),m=ea(c,t);if(f===0)a[0]=e.An();else if(f>0&&m<0)a.push(c),a.push(c.An());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const f=a[c].Vn(this.uid,Yf,me.empty()),m=a[c+1].Vn(this.uid,Yf,me.empty());l.push(IDBKeyRange.bound(f,m))}return l}Zn(e,t){return ea(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(WI)}getMinOffset(e,t){return j.mapArray(this.Mn(t),(n=>this.xn(e,n).next((a=>a||ye(44426))))).next(WI)}}function YI(i){return tn(i,Mh)}function Ll(i){return tn(i,_h)}function Yc(i){return tn(i,Lv)}function Ul(i){return tn(i,gh)}function WI(i){we(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<i.length;n++){const a=i[n].indexState.offset;kv(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new hi(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lx=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(i,e,t){const n=i.store(Gi),a=i.store(ou),l=[],c=IDBKeyRange.only(t.batchId);let f=0;const m=n.ee({range:c},((y,T,I)=>(f++,I.delete())));l.push(m.next((()=>{we(f===1,47070,{batchId:t.batchId})})));const g=[];for(const y of t.mutations){const T=xR(e,y.key.path,t.batchId);l.push(a.delete(T)),g.push(y.key)}return j.waitFor(l).next((()=>g))}function Vm(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw ye(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(Lx,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class fp{constructor(e,t,n,a){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=a,this.Xn={}}static wt(e,t,n,a){we(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new fp(l,t,n,a)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).ee({index:To,range:n},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,n,a){const l=Gl(e),c=ta(e);return c.add({}).next((f=>{we(typeof f=="number",49019);const m=new Qv(f,t,n,a),g=(function(D,F,B){const U=B.baseMutations.map((ie=>Fh(D.yt,ie))),ne=B.mutations.map((ie=>Fh(D.yt,ie)));return{userId:F,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:U,mutations:ne}})(this.serializer,this.userId,m),y=[];let T=new at(((I,D)=>Oe(I.canonicalString(),D.canonicalString())));for(const I of a){const D=xR(this.userId,I.key.path,f);T=T.add(I.key.path.popLast()),y.push(c.put(g)),y.push(l.put(D,yM))}return T.forEach((I=>{y.push(this.indexManager.addToCollectionParentIndex(e,I))})),e.addOnCommittedListener((()=>{this.Xn[f]=m.keys()})),j.waitFor(y).next((()=>m))}))}lookupMutationBatch(e,t){return ta(e).get(t).next((n=>n?(we(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),po(this.serializer,n)):null))}er(e,t){return this.Xn[t]?j.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const a=n.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,a=IDBKeyRange.lowerBound([this.userId,n]);let l=null;return ta(e).ee({index:To,range:a},((c,f,m)=>{f.userId===this.userId&&(we(f.batchId>=n,47524,{tr:n}),l=po(this.serializer,f)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=ha;return ta(e).ee({index:To,range:t,reverse:!0},((a,l,c)=>{n=l.batchId,c.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ha],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).J(To,t).next((n=>n.map((a=>po(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=lm(this.userId,t.path),a=IDBKeyRange.lowerBound(n),l=[];return Gl(e).ee({range:a},((c,f,m)=>{const[g,y,T]=c,I=Rr(y);if(g===this.userId&&t.path.isEqual(I))return ta(e).get(T).next((D=>{if(!D)throw ye(61480,{nr:c,batchId:T});we(D.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:D.userId,batchId:T}),l.push(po(this.serializer,D))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new at(Oe);const a=[];return t.forEach((l=>{const c=lm(this.userId,l.path),f=IDBKeyRange.lowerBound(c),m=Gl(e).ee({range:f},((g,y,T)=>{const[I,D,F]=g,B=Rr(D);I===this.userId&&l.path.isEqual(B)?n=n.add(F):T.done()}));a.push(m)})),j.waitFor(a).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,a=n.length+1,l=lm(this.userId,n),c=IDBKeyRange.lowerBound(l);let f=new at(Oe);return Gl(e).ee({range:c},((m,g,y)=>{const[T,I,D]=m,F=Rr(I);T===this.userId&&n.isPrefixOf(F)?F.length===a&&(f=f.add(D)):y.done()})).next((()=>this.rr(e,f)))}rr(e,t){const n=[],a=[];return t.forEach((l=>{a.push(ta(e).get(l).next((c=>{if(c===null)throw ye(35274,{batchId:l});we(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),n.push(po(this.serializer,c))})))})),j.waitFor(a).next((()=>n))}removeMutationBatch(e,t){return Ux(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),j.forEach(n,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return j.resolve();const n=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Gl(e).ee({range:n},((l,c,f)=>{if(l[0]===this.userId){const m=Rr(l[1]);a.push(m)}else f.done()})).next((()=>{we(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return jx(e,this.userId,t)}_r(e){return Bx(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ha,lastStreamToken:""}))}}function jx(i,e,t){const n=lm(e,t.path),a=n[1],l=IDBKeyRange.lowerBound(n);let c=!1;return Gl(i).ee({range:l,X:!0},((f,m,g)=>{const[y,T,I]=f;y===e&&T===a&&(c=!0),g.done()})).next((()=>c))}function ta(i){return tn(i,Gi)}function Gl(i){return tn(i,ou)}function Bx(i){return tn(i,kh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mo(0)}static cr(){return new Mo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Mo(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Se.fromTimestamp(new tt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>jl(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(we(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let a=0;const l=[];return jl(e).ee(((c,f)=>{const m=ah(f);m.sequenceNumber<=t&&n.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))})).next((()=>j.waitFor(l))).next((()=>a))}forEachTarget(e,t){return jl(e).ee(((n,a)=>{const l=ah(a);t(l)}))}lr(e){return JI(e).get(Cm).next((t=>(we(t!==null,2888),t)))}hr(e,t){return JI(e).put(Cm,t)}Pr(e,t){return jl(e).put(kx(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=Do(t),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let l=null;return jl(e).ee({range:a,index:NR},((c,f,m)=>{const g=ah(f);rd(t,g.target)&&(l=g,m.done())})).next((()=>l))}addMatchingKeys(e,t,n){const a=[],l=ra(e);return t.forEach((c=>{const f=xn(c.path);a.push(l.put({targetId:n,path:f})),a.push(this.referenceDelegate.addReference(e,n,c))})),j.waitFor(a)}removeMatchingKeys(e,t,n){const a=ra(e);return j.forEach(t,(l=>{const c=xn(l.path);return j.waitFor([a.delete([n,c]),this.referenceDelegate.removeReference(e,n,l)])}))}removeMatchingKeysForTargetId(e,t){const n=ra(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),a=ra(e);let l=Le();return a.ee({range:n,X:!0},((c,f,m)=>{const g=Rr(c[1]),y=new me(g);l=l.add(y)})).next((()=>l))}containsKey(e,t){const n=xn(t.path),a=IDBKeyRange.bound([n],[yR(n)],!1,!0);let l=0;return ra(e).ee({index:Mv,X:!0,range:a},(([c,f],m,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return jl(e).get(t).next((n=>n?ah(n):null))}}function jl(i){return tn(i,lu)}function JI(i){return tn(i,So)}function ra(i){return tn(i,uu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="LruGarbageCollector",B4=1048576;function eS([i,e],[t,n]){const a=Oe(i,t);return a===0?Oe(e,n):a}class z4{constructor(e){this.Ir=e,this.buffer=new at(eS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();eS(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zx{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(ZI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ra(t)?re(ZI,"Ignoring IndexedDB error during garbage collection: ",t):await Aa(t)}await this.Vr(3e5)}))}}class F4{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return j.resolve($n.ce);const n=new z4(t);return this.mr.forEachTarget(e,(a=>n.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>n.Ar(a))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(XI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XI):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,a,l,c,f,m,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(n=T,f=Date.now(),this.removeTargets(e,n,t)))).next((T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,n)))).next((T=>(g=Date.now(),zl()<=ze.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${T} documents in `+(g-m)+`ms
Total Duration: ${g-y}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function Fx(i,e){return new F4(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,t){this.db=e,this.garbageCollector=Fx(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((a=>n+a))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,a)=>t(a)))}addReference(e,t,n){return Wf(e,n)}removeReference(e,t,n){return Wf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Wf(e,t)}br(e,t){return(function(a,l){let c=!1;return Bx(a).te((f=>jx(a,f,l).next((m=>(m&&(c=!0),j.resolve(!m)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,((c,f)=>{if(f<=t){const m=this.br(e,c).next((g=>{if(!g)return l++,n.getEntry(e,c).next((()=>(n.removeEntry(c,Se.min()),ra(e).delete((function(T){return[0,xn(T.path)]})(c)))))}));a.push(m)}})).next((()=>j.waitFor(a))).next((()=>n.apply(e))).next((()=>l))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Wf(e,t)}Sr(e,t){const n=ra(e);let a,l=$n.ce;return n.ee({index:Mv},(([c,f],{path:m,sequenceNumber:g})=>{c===0?(l!==$n.ce&&t(new me(Rr(a)),l),l=g,a=m):l=$n.ce})).next((()=>{l!==$n.ce&&t(new me(Rr(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wf(i,e){return ra(i).put((function(n,a){return{targetId:0,path:xn(n.path),sequenceNumber:a}})(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.changes=new gs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?j.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return lo(e).put(n)}removeEntry(e,t,n){return lo(e).delete((function(l,c){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Om(c),f[f.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=gt.newInvalidDocument(t);return lo(e).ee({index:um,range:IDBKeyRange.only(Wc(t))},((a,l)=>{n=this.Cr(t,l)})).next((()=>n))}vr(e,t){let n={size:0,document:gt.newInvalidDocument(t)};return lo(e).ee({index:um,range:IDBKeyRange.only(Wc(t))},((a,l)=>{n={document:this.Cr(t,l),size:Vm(l)}})).next((()=>n))}getEntries(e,t){let n=Wn();return this.Fr(e,t,((a,l)=>{const c=this.Cr(a,l);n=n.insert(a,c)})).next((()=>n))}Mr(e,t){let n=Wn(),a=new ft(me.comparator);return this.Fr(e,t,((l,c)=>{const f=this.Cr(l,c);n=n.insert(l,f),a=a.insert(l,Vm(c))})).next((()=>({documents:n,Or:a})))}Fr(e,t,n){if(t.isEmpty())return j.resolve();let a=new at(iS);t.forEach((m=>a=a.add(m)));const l=IDBKeyRange.bound(Wc(a.first()),Wc(a.last())),c=a.getIterator();let f=c.getNext();return lo(e).ee({index:um,range:l},((m,g,y)=>{const T=me.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;f&&iS(f,T)<0;)n(f,null),f=c.getNext();f&&f.isEqual(T)&&(n(f,g),f=c.hasNext()?c.getNext():null),f?y.j(Wc(f)):y.done()})).next((()=>{for(;f;)n(f,null),f=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,n,a,l){const c=t.path,f=[c.popLast().toArray(),c.lastSegment(),Om(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lo(e).J(IDBKeyRange.bound(f,m,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let y=Wn();for(const T of g){const I=this.Cr(me.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);I.isFoundDocument()&&(ad(t,I)||a.has(I.key))&&(y=y.insert(I.key,I))}return y}))}getAllFromCollectionGroup(e,t,n,a){let l=Wn();const c=nS(t,n),f=nS(t,hi.max());return lo(e).ee({index:CR,range:IDBKeyRange.bound(c,f,!0)},((m,g,y)=>{const T=this.Cr(me.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&y.done()})).next((()=>l))}newChangeBuffer(e){return new G4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return tS(e).get(Ty).next((t=>(we(!!t,20021),t)))}Dr(e,t){return tS(e).put(Ty,t)}Cr(e,t){if(t){const n=C4(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Se.min())))return n}return gt.newInvalidDocument(e)}}function Hx(i){return new H4(i)}class G4 extends qx{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new gs((n=>n.toString()),((n,a)=>n.isEqual(a)))}applyChanges(e){const t=[];let n=0,a=new at(((l,c)=>Oe(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const f=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,f.readTime)),c.isValidDocument()){const m=UI(this.Nr.serializer,c);a=a.add(l.path.popLast());const g=Vm(m);n+=g-f.size,t.push(this.Nr.addEntry(e,l,m))}else if(n-=f.size,this.trackRemovals){const m=UI(this.Nr.serializer,c.convertToNoDocument(Se.min()));t.push(this.Nr.addEntry(e,l,m))}})),a.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,n)),j.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:a})=>(a.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:n.get(l).readTime})})),n)))}}function tS(i){return tn(i,Vh)}function lo(i){return tn(i,xm)}function Wc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nS(i,e){const t=e.documentKey.path.toArray();return[i,Om(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function iS(i,e){const t=i.path.toArray(),n=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<n.length-2;++l)if(a=Oe(t[l],n[l]),a)return a;return a=Oe(t.length,n.length),a||(a=Oe(t[t.length-2],n[n.length-2]),a||Oe(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t,n,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(n!==null&&Th(n.mutation,a,Yn.empty(),tt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Le()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Le()){const a=xr();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,n).next((l=>{let c=rh();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=xr();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Le())))}populateOverlays(e,t,n){const a=[];return n.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,n,a){let l=Wn();const c=vh(),f=(function(){return vh()})();return t.forEach(((m,g)=>{const y=n.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof _s)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),Th(y.mutation,g,y.mutation.getFieldMask(),tt.now())):c.set(g.key,Yn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,y)=>c.set(g,y))),t.forEach(((g,y)=>f.set(g,new K4(y,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const n=vh();let a=new ft(((c,f)=>c-f)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let y=n.get(m)||Yn.empty();y=f.applyToLocalView(g,y),n.set(m,y);const T=(a.get(f.batchId)||Le()).add(m);a=a.insert(f.batchId,T)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,y=m.value,T=ox();y.forEach((I=>{if(!l.has(I)){const D=mx(t.get(I),n.get(I));D!==null&&T.set(I,D),l=l.add(I)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return j.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,a){return(function(c){return me.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,a):this.getDocumentsMatchingCollectionQuery(e,t,n,a)}getNextDocuments(e,t,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,a-l.size):j.resolve(xr());let f=au,m=l;return c.next((g=>j.forEach(g,((y,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(y)?j.resolve():this.remoteDocumentCache.getEntry(e,y).next((I=>{m=m.insert(y,I)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,Le()))).next((y=>({batchId:f,changes:ax(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next((n=>{let a=rh();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,a){const l=t.collectionGroup;let c=rh();return this.indexManager.getCollectionParents(e,l).next((f=>j.forEach(f,(m=>{const g=(function(T,I){return new ps(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,n,a).next((y=>{y.forEach(((T,I)=>{c=c.insert(T,I)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,l,a)))).next((c=>{l.forEach(((m,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,gt.newInvalidDocument(y)))}));let f=rh();return c.forEach(((m,g)=>{const y=l.get(m);y!==void 0&&Th(y.mutation,g,Yn.empty(),tt.now()),ad(t,g)&&(f=f.insert(m,g))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:jt(a.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:Jv(a.bundledQuery),readTime:jt(a.readTime)}})(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this.overlays=new ft(me.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const n=xr();return j.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&n.set(a,l)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((a,l)=>{this.St(e,t,l)})),j.resolve()}removeOverlaysForBatchId(e,t,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(n)),j.resolve()}getOverlaysForCollection(e,t,n){const a=xr(),l=t.length+1,c=new me(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>n&&a.set(m.getKey(),m)}return j.resolve(a)}getOverlaysForCollectionGroup(e,t,n,a){let l=new ft(((g,y)=>g-y));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>n){let y=l.get(g.largestBatchId);y===null&&(y=xr(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const f=xr(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,y)=>f.set(g,y))),!(f.size()>=a)););return j.resolve(f)}St(e,t,n){const a=this.overlays.get(n.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new Yv(t,n));let l=this.qr.get(t);l===void 0&&(l=Le(),this.qr.set(t,l)),this.qr.set(t,l.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.Qr=new at(an.$r),this.Ur=new at(an.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new an(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new an(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new me(new Fe([])),n=new an(t,e),a=new an(t,e+1),l=[];return this.Ur.forEachInRange([n,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new me(new Fe([])),n=new an(t,e),a=new an(t,e+1);let l=Le();return this.Ur.forEachInRange([n,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new an(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class an{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return me.comparator(e.key,t.key)||Oe(e.Yr,t.Yr)}static Kr(e,t){return Oe(e.Yr,t.Yr)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new at(an.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Qv(l,t,n,a);this.mutationQueue.push(c);for(const f of a)this.Zr=this.Zr.add(new an(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return j.resolve(c)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,a=this.ei(n),l=a<0?0:a;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?ha:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new an(t,0),a=new an(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([n,a],(c=>{const f=this.Xr(c.Yr);l.push(f)})),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new at(Oe);return t.forEach((a=>{const l=new an(a,0),c=new an(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{n=n.add(f.Yr)}))})),j.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,a=n.length+1;let l=n;me.isDocumentKey(l)||(l=l.child(""));const c=new an(new me(l),0);let f=new at(Oe);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!n.isPrefixOf(g)&&(g.length===a&&(f=f.add(m.Yr)),!0)}),c),j.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((n=>{const a=this.Xr(n);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){we(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return j.forEach(t.mutations,(a=>{const l=new an(a.key,t.batchId);return n=n.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new an(t,0),a=this.Zr.firstAfterOrEqual(n);return j.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.ri=e,this.docs=(function(){return new ft(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,a=this.docs.get(n),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return j.resolve(n?n.document.mutableCopy():gt.newInvalidDocument(t))}getEntries(e,t){let n=Wn();return t.forEach((a=>{const l=this.docs.get(a);n=n.insert(a,l?l.document.mutableCopy():gt.newInvalidDocument(a))})),j.resolve(n)}getDocumentsMatchingQuery(e,t,n,a){let l=Wn();const c=t.path,f=new me(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||kv(bR(y),n)<=0||(a.has(y.key)||ad(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(e,t,n,a){ye(9500)}ii(e,t){return j.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new J4(this)}getSize(e){return j.resolve(this.size)}}class J4 extends qx{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)})),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.persistence=e,this.si=new gs((t=>Do(t)),rd),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new tT,this.targetCount=0,this.ai=Mo.ur()}forEachTarget(e,t){return this.si.forEach(((n,a)=>t(a))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,n){let a=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&n.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),j.waitFor(l).next((()=>a))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return j.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),j.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),j.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return j.resolve(n)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,t){this.ui={},this.overlays={},this.ci=new $n(0),this.li=!1,this.li=!0,this.hi=new Y4,this.referenceDelegate=e(this),this.Pi=new Z4(this),this.indexManager=new L4,this.remoteDocumentCache=(function(a){return new X4(a)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new Ox(t),this.Ii=new Q4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new W4(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){re("MemoryPersistence","Starting transaction:",e);const a=new eL(this.ci.next());return this.referenceDelegate.Ei(),n(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return j.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class eL extends SR{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Ri=new tT,this.Vi=null}static mi(e){return new mp(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),j.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(n=>{const a=me.fromPath(n);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Mm{constructor(e,t){this.persistence=e,this.pi=new gs((n=>xn(n.path)),((n,a)=>n.isEqual(a))),this.garbageCollector=Fx(this,t)}static mi(e,t){return new Mm(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((a=>n+a))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return j.forEach(this.pi,((n,a)=>this.br(e,n,a).next((l=>l?j.resolve():t(a)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((f=>{f||(n++,l.removeEntry(c,Se.min()))})))).next((()=>l.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hm(e.data.value)),t}br(e,t,n){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return j.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.serializer=e}k(e,t,n,a){const l=new ip("createOrUpgrade",t);n<1&&a>=1&&((function(m){m.createObjectStore(id)})(e),(function(m){m.createObjectStore(kh,{keyPath:_M}),m.createObjectStore(Gi,{keyPath:mI,autoIncrement:!0}).createIndex(To,pI,{unique:!0}),m.createObjectStore(ou)})(e),rS(e),(function(m){m.createObjectStore(ho)})(e));let c=j.resolve();return n<3&&a>=3&&(n!==0&&((function(m){m.deleteObjectStore(uu),m.deleteObjectStore(lu),m.deleteObjectStore(So)})(e),rS(e)),c=c.next((()=>(function(m){const g=m.store(So),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return g.put(Cm,y)})(l)))),n<4&&a>=4&&(n!==0&&(c=c.next((()=>(function(m,g){return g.store(Gi).J().next((T=>{m.deleteObjectStore(Gi),m.createObjectStore(Gi,{keyPath:mI,autoIncrement:!0}).createIndex(To,pI,{unique:!0});const I=g.store(Gi),D=T.map((F=>I.put(F)));return j.waitFor(D)}))})(e,l)))),c=c.next((()=>{(function(m){m.createObjectStore(cu,{keyPath:AM})})(e)}))),n<5&&a>=5&&(c=c.next((()=>this.yi(l)))),n<6&&a>=6&&(c=c.next((()=>((function(m){m.createObjectStore(Vh)})(e),this.wi(l))))),n<7&&a>=7&&(c=c.next((()=>this.Si(l)))),n<8&&a>=8&&(c=c.next((()=>this.bi(e,l)))),n<9&&a>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&a>=10&&(c=c.next((()=>this.Di(l)))),n<11&&a>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(rp,{keyPath:RM})})(e),(function(m){m.createObjectStore(sp,{keyPath:xM})})(e)}))),n<12&&a>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore(ap,{keyPath:VM});g.createIndex(wy,MM,{unique:!1}),g.createIndex(OR,LM,{unique:!1})})(e)}))),n<13&&a>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(xm,{keyPath:vM});g.createIndex(um,TM),g.createIndex(CR,EM)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(ho)))),n<14&&a>=14&&(c=c.next((()=>this.Fi(e,l)))),n<15&&a>=15&&(c=c.next((()=>(function(m){m.createObjectStore(Lv,{keyPath:CM,autoIncrement:!0}).createIndex(Ey,NM,{unique:!1}),m.createObjectStore(gh,{keyPath:DM}).createIndex(DR,PM,{unique:!1}),m.createObjectStore(_h,{keyPath:OM}).createIndex(PR,kM,{unique:!1})})(e)))),n<16&&a>=16&&(c=c.next((()=>{t.objectStore(gh).clear()})).next((()=>{t.objectStore(_h).clear()}))),n<17&&a>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(Uv,{keyPath:UM})})(e)}))),n<18&&a>=18&&WS()&&(c=c.next((()=>{t.objectStore(gh).clear()})).next((()=>{t.objectStore(_h).clear()}))),c}wi(e){let t=0;return e.store(ho).ee(((n,a)=>{t+=Vm(a)})).next((()=>{const n={byteSize:t};return e.store(Vh).put(Ty,n)}))}yi(e){const t=e.store(kh),n=e.store(Gi);return t.J().next((a=>j.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,ha],[l.userId,l.lastAcknowledgedBatchId]);return n.J(To,c).next((f=>j.forEach(f,(m=>{we(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=po(this.serializer,m);return Ux(e,l.userId,g).next((()=>{}))}))))}))))}Si(e){const t=e.store(uu),n=e.store(ho);return e.store(So).get(Cm).next((a=>{const l=[];return n.ee(((c,f)=>{const m=new Fe(c),g=(function(T){return[0,xn(T)]})(m);l.push(t.get(g).next((y=>y?j.resolve():(T=>t.put({targetId:0,path:xn(T),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>j.waitFor(l)))}))}bi(e,t){e.createObjectStore(Mh,{keyPath:SM});const n=t.store(Mh),a=new eT,l=c=>{if(a.add(c)){const f=c.lastSegment(),m=c.popLast();return n.put({collectionId:f,parent:xn(m)})}};return t.store(ho).ee({X:!0},((c,f)=>{const m=new Fe(c);return l(m.popLast())})).next((()=>t.store(ou).ee({X:!0},(([c,f,m],g)=>{const y=Rr(f);return l(y.popLast())}))))}Di(e){const t=e.store(lu);return t.ee(((n,a)=>{const l=ah(a),c=kx(this.serializer,l);return t.put(c)}))}Ci(e,t){const n=t.store(ho),a=[];return n.ee(((l,c)=>{const f=t.store(xm),m=(function(T){return T.document?new me(Fe.fromString(T.document.name).popFirst(5)):T.noDocument?me.fromSegments(T.noDocument.path):T.unknownDocument?me.fromSegments(T.unknownDocument.path):ye(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(f.put(g))})).next((()=>j.waitFor(a)))}Fi(e,t){const n=t.store(Gi),a=Hx(this.serializer),l=new nT(mp.mi,this.serializer.yt);return n.J().next((c=>{const f=new Map;return c.forEach((m=>{let g=f.get(m.userId)??Le();po(this.serializer,m).keys().forEach((y=>g=g.add(y))),f.set(m.userId,g)})),j.forEach(f,((m,g)=>{const y=new on(g),T=dp.wt(this.serializer,y),I=l.getIndexManager(y),D=fp.wt(y,this.serializer,I,l.referenceDelegate);return new Gx(a,D,T,I).recalculateAndSaveOverlaysForDocumentKeys(new by(t,$n.ce),m).next()}))}))}}function rS(i){i.createObjectStore(uu,{keyPath:bM}).createIndex(Mv,IM,{unique:!0}),i.createObjectStore(lu,{keyPath:"targetId"}).createIndex(NR,wM,{unique:!0}),i.createObjectStore(So)}const na="IndexedDbPersistence",Y_=18e5,W_=5e3,X_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Kx="main";class iT{constructor(e,t,n,a,l,c,f,m,g,y,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=l,this.window=c,this.document=f,this.xi=g,this.Oi=y,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=I=>Promise.resolve(),!iT.v())throw new te(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new q4(this,a),this.$i=t+Kx,this.serializer=new Ox(m),this.Ui=new Cr(this.$i,this.Ni,new tL(this.serializer)),this.hi=new D4,this.Pi=new j4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Hx(this.serializer),this.Ii=new N4,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,y===!1&&Ut(na,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te(K.FAILED_PRECONDITION,X_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new $n(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Xf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ra(e))return re(na,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re(na,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Xc(e).get(kl).next((t=>j.resolve(this.es(t))))}ts(e){return Xf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Y_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=tn(t,cu);return n.J().next((a=>{const l=this.ss(a,Y_),c=a.filter((f=>l.indexOf(f)===-1));return j.forEach(c,(f=>n.delete(f.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?j.resolve(!0):Xc(e).get(kl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,W_)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new te(K.FAILED_PRECONDITION,X_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xf(e).J().next((n=>this.ss(n,W_).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(l||c&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&re(na,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[id,cu],(e=>{const t=new by(e,$n.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Xf(e).J().next((t=>this.ss(t,Y_).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return fp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new U4(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return dp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){re(na,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?zM:m===17?LR:m===16?BM:m===15?jv:m===14?MR:m===13?VR:m===12?jM:m===11?kR:void ye(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,a,l,(f=>(c=new by(f,this.ci?this.ci.next():$n.ce),t==="readwrite-primary"?this.Hi(c).next((m=>!!m||this.Yi(c))).next((m=>{if(!m)throw Ut(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new te(K.FAILED_PRECONDITION,IR);return n(c)})).next((m=>this.Xi(c).next((()=>m)))):this.Is(c).next((()=>n(c)))))).then((f=>(c.raiseOnCommittedEvent(),f)))}Is(e){return Xc(e).get(kl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,W_)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new te(K.FAILED_PRECONDITION,X_)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xc(e).put(kl,t)}static v(){return Cr.v()}Zi(e){const t=Xc(e);return t.get(kl).next((n=>this.es(n)?(re(na,"Releasing primary lease."),t.delete(kl)):j.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ut(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;YS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const n=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return re(na,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ut(na,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ut("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xc(i){return tn(i,id)}function Xf(i){return tn(i,cu)}function rT(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t,n,a){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=a}static As(e,t){let n=Le(),a=Le();for(const l of t.docChanges)switch(l.type){case 0:n=n.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new sT(e,t.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return YS()?8:AR(St())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,n).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new nL;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,n,a){return n.documentReadCount<this.fs?(zl()<=ze.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Fl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(zl()<=ze.DEBUG&&re("QueryEngine","Query:",Fl(t),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(zl()<=ze.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Fl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(t))):j.resolve())}ys(e,t){if(xI(t))return j.resolve(null);let n=Ln(t);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Pm(t,null,"F"),n=Ln(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((l=>{const c=Le(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,n).next((m=>{const g=this.Ds(t,f);return this.Cs(t,g,c,m.readTime)?this.ys(e,Pm(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,n,a){return xI(t)||a.isEqual(Se.min())?j.resolve(null):this.ps.getDocuments(e,n).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,n,a)?j.resolve(null):(zl()<=ze.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Fl(t)),this.vs(e,c,t,wR(a,au)).next((f=>f)))}))}Ds(e,t){let n=new at(rx(e));return t.forEach(((a,l)=>{ad(e,l)&&(n=n.add(l))})),n}Cs(e,t,n,a){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,n){return zl()<=ze.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Fl(t)),this.ps.getDocumentsMatchingQuery(e,t,hi.min(),n)}vs(e,t,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="LocalStore",iL=3e8;class rL{constructor(e,t,n,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new ft(Oe),this.xs=new gs((l=>Do(l)),rd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function $x(i,e,t,n){return new rL(i,e,t,n)}async function Yx(i,e){const t=pe(i);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return t.mutationQueue.getAllMutationBatches(n).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((l=>{const c=[],f=[];let m=Le();for(const g of a){c.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){f.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(n,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function sL(i,e){const t=pe(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,y){const T=g.batch,I=T.keys();let D=j.resolve();return I.forEach((F=>{D=D.next((()=>y.getEntry(m,F))).next((B=>{const U=g.docVersions.get(F);we(U!==null,48541),B.version.compareTo(U)<0&&(T.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),y.addEntry(B)))}))})),D.next((()=>f.mutationQueue.removeMutationBatch(m,T)))})(t,n,e,l).next((()=>l.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(f){let m=Le();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(n,a)))}))}function Wx(i){const e=pe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function aL(i,e){const t=pe(i),n=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach(((y,T)=>{const I=a.get(T);if(!I)return;f.push(t.Pi.removeMatchingKeys(l,y.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,y.addedDocuments,T))));let D=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?D=D.withResumeToken(Nt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):y.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(y.resumeToken,n)),a=a.insert(T,D),(function(B,U,ne){return B.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=iL?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(I,D,y)&&f.push(t.Pi.updateTargetData(l,D))}));let m=Wn(),g=Le();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(Xx(l,c,e.documentUpdates).next((y=>{m=y.ks,g=y.qs}))),!n.isEqual(Se.min())){const y=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,n)));f.push(y)}return j.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function Xx(i,e,t){let n=Le(),a=Le();return t.forEach((l=>n=n.add(l))),e.getEntries(i,n).next((l=>{let c=Wn();return t.forEach(((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Se.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):re(aT,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function oL(i,e){const t=pe(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=ha),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function _u(i,e){const t=pe(i);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return t.Pi.getTargetData(n,e).next((l=>l?(a=l,j.resolve(a)):t.Pi.allocateTargetId(n).next((c=>(a=new rs(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=t.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function yu(i,e,t){const n=pe(i),a=n.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",l,(c=>n.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Ra(c))throw c;re(aT,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function Lm(i,e,t){const n=pe(i);let a=Se.min(),l=Le();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,y){const T=pe(m),I=T.xs.get(y);return I!==void 0?j.resolve(T.Ms.get(I)):T.Pi.getTargetData(g,y)})(n,c,Ln(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?a:Se.min(),t?l:Le()))).next((f=>(e1(n,ix(e),f),{documents:f,Qs:l})))))}function Jx(i,e){const t=pe(i),n=pe(t.Pi),a=t.Ms.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>n.At(l,e).next((c=>c?c.target:null))))}function Zx(i,e){const t=pe(i),n=t.Os.get(e)||Se.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.Ns.getAllFromCollectionGroup(a,e,wR(n,au),Number.MAX_SAFE_INTEGER))).then((a=>(e1(t,e,a),a)))}function e1(i,e,t){let n=i.Os.get(e)||Se.min();t.forEach(((a,l)=>{l.readTime.compareTo(n)>0&&(n=l.readTime)})),i.Os.set(e,n)}async function lL(i,e,t,n){const a=pe(i);let l=Le(),c=Wn();for(const g of t){const y=e.$s(g.metadata.name);g.document&&(l=l.add(y));const T=e.Us(g);T.setReadTime(e.Ks(g.metadata.readTime)),c=c.insert(y,T)}const f=a.Ns.newChangeBuffer({trackRemovals:!0}),m=await _u(a,(function(y){return Ln(Cu(Fe.fromString(`__bundle__/docs/${y}`)))})(n));return a.persistence.runTransaction("Apply bundle documents","readwrite",(g=>Xx(g,f,c).next((y=>(f.apply(g),y))).next((y=>a.Pi.removeMatchingKeysForTargetId(g,m.targetId).next((()=>a.Pi.addMatchingKeys(g,l,m.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(g,y.ks,y.qs))).next((()=>y.ks))))))}async function uL(i,e,t=Le()){const n=await _u(i,Ln(Jv(e.bundledQuery))),a=pe(i);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const c=jt(e.readTime);if(n.snapshotVersion.compareTo(c)>=0)return a.Ii.saveNamedQuery(l,e);const f=n.withResumeToken(Nt.EMPTY_BYTE_STRING,c);return a.Ms=a.Ms.insert(f.targetId,f),a.Pi.updateTargetData(l,f).next((()=>a.Pi.removeMatchingKeysForTargetId(l,n.targetId))).next((()=>a.Pi.addMatchingKeys(l,t,n.targetId))).next((()=>a.Ii.saveNamedQuery(l,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="firestore_clients";function sS(i,e){return`${t1}_${i}_${e}`}const n1="firestore_mutations";function aS(i,e,t){let n=`${n1}_${i}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}const i1="firestore_targets";function J_(i,e){return`${i1}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="SharedClientState";class Um{constructor(e,t,n,a){this.user=e,this.batchId=t,this.state=n,this.error=a}static Ws(e,t,n){const a=JSON.parse(n);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new te(a.error.code,a.error.message))),c?new Um(e,t,a.state,l):(Ut(Tr,`Failed to parse mutation state for ID '${t}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Eh{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ws(e,t){const n=JSON.parse(t);let a,l=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return l&&n.error&&(l=typeof n.error.message=="string"&&typeof n.error.code=="string",l&&(a=new te(n.error.code,n.error.message))),l?new Eh(e,n.state,a):(Ut(Tr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const n=JSON.parse(t);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,l=Hv();for(let c=0;a&&c<n.activeTargetIds.length;++c)a=RR(n.activeTargetIds[c]),l=l.add(n.activeTargetIds[c]);return a?new jm(e,l):(Ut(Tr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class oT{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new oT(t.clientId,t.onlineState):(Ut(Tr,`Failed to parse online state: ${e}`),null)}}class Uy{constructor(){this.activeTargetIds=Hv()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z_{constructor(e,t,n,a,l){this.window=e,this.Mi=t,this.persistenceKey=n,this.Js=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ft(Oe),this.started=!1,this.Xs=[];const c=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.eo=sS(this.persistenceKey,this.Js),this.no=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Uy),this.ro=new RegExp(`^${t1}_${c}_([^_]*)$`),this.io=new RegExp(`^${n1}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${i1}_${c}_(\\d+)$`),this.oo=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this._o=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const n of e){if(n===this.Js)continue;const a=this.getItem(sS(this.persistenceKey,n));if(a){const l=jm.Ws(n,a);l&&(this.Zs=this.Zs.insert(l.clientId,l))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const n=this.uo(t);n&&this.co(n)}for(const n of this.Xs)this.Ys(n);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((n,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,n){this.ho(e,t,n),this.Po(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(J_(this.persistenceKey,e));if(a){const l=Eh.Ws(e,a);l&&(n=l.state)}}return t&&this.To.zs(e),this.ao(),n}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(J_(this.persistenceKey,e))}updateQueryState(e,t,n){this.Io(e,t,n)}handleUserChange(e,t,n){t.forEach((a=>{this.Po(a)})),this.currentUser=e,n.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return re(Tr,"READ",e,t),t}setItem(e,t){re(Tr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){re(Tr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(re(Tr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Ut("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const n=this.Ro(t.key);return this.Vo(n,null)}{const n=this.mo(t.key,t.newValue);if(n)return this.Vo(n.clientId,n)}}else if(this.io.test(t.key)){if(t.newValue!==null){const n=this.fo(t.key,t.newValue);if(n)return this.po(n)}}else if(this.so.test(t.key)){if(t.newValue!==null){const n=this.yo(t.key,t.newValue);if(n)return this.wo(n)}}else if(t.key===this.oo){if(t.newValue!==null){const n=this.uo(t.newValue);if(n)return this.co(n)}}else if(t.key===this.no){const n=(function(l){let c=$n.ce;if(l!=null)try{const f=JSON.parse(l);we(typeof f=="number",30636,{So:l}),c=f}catch(f){Ut(Tr,"Failed to read sequence number from WebStorage",f)}return c})(t.newValue);n!==$n.ce&&this.sequenceNumberHandler(n)}else if(t.key===this._o){const n=this.bo(t.newValue);await Promise.all(n.map((a=>this.syncEngine.Do(a))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,n){const a=new Um(this.currentUser,e,t,n),l=aS(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Gs())}Po(e){const t=aS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,n){const a=J_(this.persistenceKey,e),l=new Eh(e,t,n);this.setItem(a,l.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const n=this.Ro(e);return jm.Ws(n,t)}fo(e,t){const n=this.io.exec(e),a=Number(n[1]),l=n[2]!==void 0?n[2]:null;return Um.Ws(new on(l),a,t)}yo(e,t){const n=this.so.exec(e),a=Number(n[1]);return Eh.Ws(a,t)}uo(e){return oT.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);re(Tr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const n=t?this.Zs.insert(e,t):this.Zs.remove(e),a=this.lo(this.Zs),l=this.lo(n),c=[],f=[];return l.forEach((m=>{a.has(m)||c.push(m)})),a.forEach((m=>{l.has(m)||f.push(m)})),this.syncEngine.Fo(c,f).then((()=>{this.Zs=n}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Hv();return e.forEach(((n,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class r1{constructor(){this.Mo=new Uy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Uy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="ConnectivityMonitor";class lS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(oS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(oS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf=null;function jy(){return Jf===null?Jf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jf++,"0x"+Jf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="RestConnection",hL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===Iy?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,t,n,a,l){const c=jy(),f=this.zo(e,t.toUriEncodedString());re(ey,`Sending RPC '${e}' ${c}:`,f,n);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(f),y=Ia(g);return this.Jo(e,f,m,n,y).then((T=>(re(ey,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw kr(ey,`RPC '${e}' ${c} failed with error: `,T,"url: ",f,"request:",n),T}))}Ho(e,t,n,a,l,c){return this.Go(e,t,n,a,l)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),n&&n.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const n=hL[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="WebChannelConnection";class mL extends dL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,a,l){const c=jy();return new Promise(((f,m)=>{const g=new hR;g.setWithCredentials(!0),g.listenOnce(dR.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case am.NO_ERROR:const T=g.getResponseJson();re(bn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),f(T);break;case am.TIMEOUT:re(bn,`RPC '${e}' ${c} timed out`),m(new te(K.DEADLINE_EXCEEDED,"Request time out"));break;case am.HTTP_ERROR:const I=g.getStatus();if(re(bn,`RPC '${e}' ${c} failed with status:`,I,"response text:",g.getResponseText()),I>0){let D=g.getResponseJson();Array.isArray(D)&&(D=D[0]);const F=D==null?void 0:D.error;if(F&&F.status&&F.message){const B=(function(ne){const ie=ne.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(ie)>=0?ie:K.UNKNOWN})(F.status);m(new te(B,F.message))}else m(new te(K.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new te(K.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{re(bn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);re(bn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",y,n,15)}))}T_(e,t,n){const a=jy(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=pR(),f=mR(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,n),m.encodeInitMessageHeaders=!0;const y=l.join("");re(bn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const T=c.createWebChannel(y,m);this.I_(T);let I=!1,D=!1;const F=new fL({Yo:U=>{D?re(bn,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(I||(re(bn,`Opening RPC '${e}' stream ${a} transport.`),T.open(),I=!0),re(bn,`RPC '${e}' stream ${a} sending:`,U),T.send(U))},Zo:()=>T.close()}),B=(U,ne,ie)=>{U.listen(ne,(se=>{try{ie(se)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return B(T,ih.EventType.OPEN,(()=>{D||(re(bn,`RPC '${e}' stream ${a} transport opened.`),F.o_())})),B(T,ih.EventType.CLOSE,(()=>{D||(D=!0,re(bn,`RPC '${e}' stream ${a} transport closed`),F.a_(),this.E_(T))})),B(T,ih.EventType.ERROR,(U=>{D||(D=!0,kr(bn,`RPC '${e}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),F.a_(new te(K.UNAVAILABLE,"The operation could not be completed")))})),B(T,ih.EventType.MESSAGE,(U=>{var ne;if(!D){const ie=U.data[0];we(!!ie,16349);const se=ie,ge=(se==null?void 0:se.error)||((ne=se[0])==null?void 0:ne.error);if(ge){re(bn,`RPC '${e}' stream ${a} received error:`,ge);const Ae=ge.status;let Ee=(function(C){const V=Yt[C];if(V!==void 0)return _x(V)})(Ae),x=ge.message;Ee===void 0&&(Ee=K.INTERNAL,x="Unknown error status: "+Ae+" with message "+ge.message),D=!0,F.a_(new te(Ee,x)),T.close()}else re(bn,`RPC '${e}' stream ${a} received:`,ie),F.u_(ie)}})),B(f,fR.STAT_EVENT,(U=>{U.stat===_y.PROXY?re(bn,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===_y.NOPROXY&&re(bn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(){return typeof window<"u"?window:null}function gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(i){return new v4(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,t,n=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-n);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="PersistentStream";class a1{constructor(e,t,n,a,l,c,f,m){this.Mi=e,this.S_=n,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Ut(t.toString()),Ut("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.D_===t&&this.G_(n,a)}),(n=>{e((()=>{const a=new te(K.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{n((()=>this.z_(a)))})),this.stream.onMessage((a=>{n((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(uS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(re(uS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pL extends a1{constructor(e,t,n,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=w4(this.serializer,e),n=(function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?jt(c.readTime):Se.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Oy(this.serializer),t.addTarget=(function(l,c){let f;const m=c.target;if(f=Nm(m)?{documents:Rx(l,m)}:{query:xx(l,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Ex(l,c.resumeToken);const g=Dy(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Se.min())>0){f.readTime=gu(l,c.snapshotVersion.toTimestamp());const g=Dy(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const n=I4(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Oy(this.serializer),t.removeTarget=e,this.q_(t)}}class gL extends a1{constructor(e,t,n,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=b4(e.writeResults,e.commitTime),n=jt(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Oy(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>Fh(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{}class yL extends _L{constructor(e,t,n,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new te(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Py(t,n),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new te(K.UNKNOWN,l.toString())}))}Ho(e,t,n,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Py(t,n),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new te(K.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class vL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ut(t),this.aa=!1):re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="RemoteStore";class TL{constructor(e,t,n,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{Ca(this)&&(re(Lo,"Restarting streams for network reachability change."),await(async function(m){const g=pe(m);g.Ea.add(4),await Pu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await hd(g)})(this))}))})),this.Ra=new vL(n,a)}}async function hd(i){if(Ca(i))for(const e of i.da)await e(!0)}async function Pu(i){for(const e of i.da)await e(!1)}function pp(i,e){const t=pe(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),hT(t)?cT(t):ku(t).O_()&&uT(t,e))}function vu(i,e){const t=pe(i),n=ku(t);t.Ia.delete(e),n.O_()&&o1(t,e),t.Ia.size===0&&(n.O_()?n.L_():Ca(t)&&t.Ra.set("Unknown"))}function uT(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ku(i).Y_(e)}function o1(i,e){i.Va.Ue(e),ku(i).Z_(e)}function cT(i){i.Va=new p4({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),ku(i).start(),i.Ra.ua()}function hT(i){return Ca(i)&&!ku(i).x_()&&i.Ia.size>0}function Ca(i){return pe(i).Ea.size===0}function l1(i){i.Va=void 0}async function EL(i){i.Ra.set("Online")}async function wL(i){i.Ia.forEach(((e,t)=>{uT(i,e)}))}async function bL(i,e){l1(i),hT(i)?(i.Ra.ha(e),cT(i)):i.Ra.set("Unknown")}async function IL(i,e,t){if(i.Ra.set("Online"),e instanceof Tx&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.Va.removeTarget(f))})(i,e)}catch(n){re(Lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Bm(i,n)}else if(e instanceof mm?i.Va.Ze(e):e instanceof vx?i.Va.st(e):i.Va.tt(e),!t.isEqual(Se.min()))try{const n=await Wx(i.localStore);t.compareTo(n)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(g);y&&l.Ia.set(g,y.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(Nt.EMPTY_BYTE_STRING,y.snapshotVersion)),o1(l,m);const T=new rs(y.target,m,g,y.sequenceNumber);uT(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(i,t)}catch(n){re(Lo,"Failed to raise snapshot:",n),await Bm(i,n)}}async function Bm(i,e,t){if(!Ra(e))throw e;i.Ea.add(1),await Pu(i),i.Ra.set("Offline"),t||(t=()=>Wx(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{re(Lo,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await hd(i)}))}function u1(i,e){return e().catch((t=>Bm(i,t,e)))}async function Ou(i){const e=pe(i),t=Ea(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ha;for(;SL(e);)try{const a=await oL(e.localStore,n);if(a===null){e.Ta.length===0&&t.L_();break}n=a.batchId,AL(e,a)}catch(a){await Bm(e,a)}c1(e)&&h1(e)}function SL(i){return Ca(i)&&i.Ta.length<10}function AL(i,e){i.Ta.push(e);const t=Ea(i);t.O_()&&t.X_&&t.ea(e.mutations)}function c1(i){return Ca(i)&&!Ea(i).x_()&&i.Ta.length>0}function h1(i){Ea(i).start()}async function RL(i){Ea(i).ra()}async function xL(i){const e=Ea(i);for(const t of i.Ta)e.ea(t.mutations)}async function CL(i,e,t){const n=i.Ta.shift(),a=$v.from(n,e,t);await u1(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Ou(i)}async function NL(i,e){e&&Ea(i).X_&&await(async function(n,a){if((function(c){return gx(c)&&c!==K.ABORTED})(a.code)){const l=n.Ta.shift();Ea(n).B_(),await u1(n,(()=>n.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Ou(n)}})(i,e),c1(i)&&h1(i)}async function cS(i,e){const t=pe(i);t.asyncQueue.verifyOperationInProgress(),re(Lo,"RemoteStore received new credentials");const n=Ca(t);t.Ea.add(3),await Pu(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hd(t)}async function By(i,e){const t=pe(i);e?(t.Ea.delete(2),await hd(t)):e||(t.Ea.add(2),await Pu(t),t.Ra.set("Unknown"))}function ku(i){return i.ma||(i.ma=(function(t,n,a){const l=pe(t);return l.sa(),new pL(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Xo:EL.bind(null,i),t_:wL.bind(null,i),r_:bL.bind(null,i),H_:IL.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),hT(i)?cT(i):i.Ra.set("Unknown")):(await i.ma.stop(),l1(i))}))),i.ma}function Ea(i){return i.fa||(i.fa=(function(t,n,a){const l=pe(t);return l.sa(),new gL(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:RL.bind(null,i),r_:NL.bind(null,i),ta:xL.bind(null,i),na:CL.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Ou(i)):(await i.fa.stop(),i.Ta.length>0&&(re(Lo,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,t,n,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=a,this.removalCallback=l,this.deferred=new yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,a,l){const c=Date.now()+n,f=new dT(e,t,c,a,l);return f.start(n),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vu(i,e){if(Ut("AsyncQueue",`${e}: ${i}`),Ra(i))return new te(K.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{static emptySet(e){return new Zl(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||me.comparator(t.key,n.key):(t,n)=>me.comparator(t.key,n.key),this.keyedMap=rh(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=n.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Zl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.ga=new ft(me.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Tu{constructor(e,t,n,a,l,c,f,m,g){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,n,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Tu(e,t,Zl.emptySet(t),c,n,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==n[a].type||!t[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class PL{constructor(){this.queries=dS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const a=pe(t),l=a.queries;a.queries=dS(),l.forEach(((c,f)=>{for(const m of f.Sa)m.onError(n)}))})(this,new te(K.ABORTED,"Firestore shutting down"))}}function dS(){return new gs((i=>nx(i)),sd)}async function fT(i,e){const t=pe(i);let n=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(n=2):(l=new DL,n=e.Da()?0:1);try{switch(n){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=Vu(c,`Initialization of query '${Fl(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&pT(t)}async function mT(i,e){const t=pe(i),n=e.query;let a=3;const l=t.queries.get(n);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function OL(i,e){const t=pe(i);let n=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(a)&&(n=!0);c.wa=a}}n&&pT(t)}function kL(i,e,t){const n=pe(i),a=n.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);n.queries.delete(e)}function pT(i){i.Ca.forEach((e=>{e.next()}))}var zy,fS;(fS=zy||(zy={})).Ma="default",fS.Cache="cache";class gT{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Tu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zy.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.serializer=e}$s(e){return Nr(this.serializer,e)}Us(e){return e.metadata.exists?Ax(this.serializer,e.document,!1):gt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return jt(e)}}class ML{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=d1(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const n=Fe.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,n=new mS(this.serializer);for(const a of e)if(a.metadata.queries){const l=n.$s(a.metadata.name);for(const c of a.metadata.queries){const f=(t.get(c)||Le()).add(l);t.set(c,f)}}return t}async ja(e){const t=await lL(e,new mS(this.serializer),this.Wa,this.Ua.id),n=this.za(this.documents);for(const a of this.Ka)await uL(e,a,n.get(a.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function d1(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.key=e}}class m1{constructor(e){this.key=e}}class p1{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=rx(e),this.tu=new Zl(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new hS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,T)=>{const I=a.get(y),D=ad(this.query,T)?T:null,F=!!I&&this.mutatedKeys.has(I.key),B=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let U=!1;I&&D?I.data.isEqual(D.data)?F!==B&&(n.track({type:3,doc:D}),U=!0):this.su(I,D)||(n.track({type:2,doc:D}),U=!0,(m&&this.eu(D,m)>0||g&&this.eu(D,g)<0)&&(f=!0)):!I&&D?(n.track({type:0,doc:D}),U=!0):I&&!D&&(n.track({type:1,doc:I}),U=!0,(m||g)&&(f=!0)),U&&(D?(c=c.add(D),l=B?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),n.track({type:1,doc:y})}return{tu:c,iu:n,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,T)=>(function(D,F){const B=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:U})}};return B(D)-B(F)})(y.type,T.type)||this.eu(y.doc,T.doc))),this.ou(n),a=a??!1;const f=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new Tu(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new m1(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new f1(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Tu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Na="SyncEngine";class LL{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class UL{constructor(e){this.key=e,this.hu=!1}}class jL{constructor(e,t,n,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new gs((f=>nx(f)),sd),this.Iu=new Map,this.Eu=new Set,this.du=new ft(me.comparator),this.Au=new Map,this.Ru=new tT,this.Vu={},this.mu=new Map,this.fu=Mo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BL(i,e,t=!0){const n=gp(i);let a;const l=n.Tu.get(e);return l?(n.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await g1(n,e,t,!0),a}async function zL(i,e){const t=gp(i);await g1(t,e,!0,!1)}async function g1(i,e,t,n){const a=await _u(i.localStore,Ln(e)),l=a.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let f;return n&&(f=await _T(i,e,l,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&pp(i.remoteStore,a),f}async function _T(i,e,t,n,a){i.pu=(T,I,D)=>(async function(B,U,ne,ie){let se=U.view.ru(ne);se.Cs&&(se=await Lm(B.localStore,U.query,!1).then((({documents:x})=>U.view.ru(x,se))));const ge=ie&&ie.targetChanges.get(U.targetId),Ae=ie&&ie.targetMismatches.get(U.targetId)!=null,Ee=U.view.applyChanges(se,B.isPrimaryClient,ge,Ae);return Fy(B,U.targetId,Ee.au),Ee.snapshot})(i,T,I,D);const l=await Lm(i.localStore,e,!0),c=new p1(e,l.Qs),f=c.ru(l.documents),m=ud.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",a),g=c.applyChanges(f,i.isPrimaryClient,m);Fy(i,t,g.au);const y=new LL(e,t,c);return i.Tu.set(e,y),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),g.snapshot}async function FL(i,e,t){const n=pe(i),a=n.Tu.get(e),l=n.Iu.get(a.targetId);if(l.length>1)return n.Iu.set(a.targetId,l.filter((c=>!sd(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await yu(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),t&&vu(n.remoteStore,a.targetId),Eu(n,a.targetId)})).catch(Aa)):(Eu(n,a.targetId),await yu(n.localStore,a.targetId,!0))}async function qL(i,e){const t=pe(i),n=t.Tu.get(e),a=t.Iu.get(n.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),vu(t.remoteStore,n.targetId))}async function HL(i,e,t){const n=ET(i);try{const a=await(function(c,f){const m=pe(c),g=tt.now(),y=f.reduce(((D,F)=>D.add(F.key)),Le());let T,I;return m.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let F=Wn(),B=Le();return m.Ns.getEntries(D,y).next((U=>{F=U,F.forEach(((ne,ie)=>{ie.isValidDocument()||(B=B.add(ne))}))})).next((()=>m.localDocuments.getOverlayedDocuments(D,F))).next((U=>{T=U;const ne=[];for(const ie of f){const se=d4(ie,T.get(ie.key).overlayedDocument);se!=null&&ne.push(new _s(ie.key,se,QR(se.value.mapValue),bt.exists(!0)))}return m.mutationQueue.addMutationBatch(D,g,ne,f)})).next((U=>{I=U;const ne=U.applyToLocalDocumentSet(T,B);return m.documentOverlayCache.saveOverlays(D,U.batchId,ne)}))})).then((()=>({batchId:I.batchId,changes:ax(T)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(c,f,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new ft(Oe)),g=g.insert(f,m),c.Vu[c.currentUser.toKey()]=g})(n,a.batchId,t),await ys(n,a.changes),await Ou(n.remoteStore)}catch(a){const l=Vu(a,"Failed to persist write");t.reject(l)}}async function _1(i,e){const t=pe(i);try{const n=await aL(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(we(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?we(c.hu,14607):a.removedDocuments.size>0&&(we(c.hu,42227),c.hu=!1))})),await ys(t,n,e)}catch(n){await Aa(n)}}function pS(i,e,t){const n=pe(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const a=[];n.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const m=pe(c);m.onlineState=f;let g=!1;m.queries.forEach(((y,T)=>{for(const I of T.Sa)I.va(f)&&(g=!0)})),g&&pT(m)})(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function GL(i,e,t){const n=pe(i);n.sharedClientState.updateQueryState(e,"rejected",t);const a=n.Au.get(e),l=a&&a.key;if(l){let c=new ft(me.comparator);c=c.insert(l,gt.newNoDocument(l,Se.min()));const f=Le().add(l),m=new ld(Se.min(),new Map,new ft(Oe),c,f);await _1(n,m),n.du=n.du.remove(l),n.Au.delete(e),TT(n)}else await yu(n.localStore,e,!1).then((()=>Eu(n,e,t))).catch(Aa)}async function KL(i,e){const t=pe(i),n=e.batch.batchId;try{const a=await sL(t.localStore,e);vT(t,n,null),yT(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await ys(t,a)}catch(a){await Aa(a)}}async function QL(i,e,t){const n=pe(i);try{const a=await(function(c,f){const m=pe(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return m.mutationQueue.lookupMutationBatch(g,f).next((T=>(we(T!==null,37113),y=T.keys(),m.mutationQueue.removeMutationBatch(g,T)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>m.localDocuments.getDocuments(g,y)))}))})(n.localStore,e);vT(n,e,t),yT(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await ys(n,a)}catch(a){await Aa(a)}}async function $L(i,e){const t=pe(i);Ca(t.remoteStore)||re(Na,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await(function(c){const f=pe(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>f.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(t.localStore);if(n===ha)return void e.resolve();const a=t.mu.get(n)||[];a.push(e),t.mu.set(n,a)}catch(n){const a=Vu(n,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function yT(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function vT(i,e,t){const n=pe(i);let a=n.Vu[n.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function Eu(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const n of i.Iu.get(e))i.Tu.delete(n),t&&i.Pu.yu(n,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((n=>{i.Ru.containsKey(n)||y1(i,n)}))}function y1(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(vu(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),TT(i))}function Fy(i,e,t){for(const n of t)n instanceof f1?(i.Ru.addReference(n.key,e),YL(i,n)):n instanceof m1?(re(Na,"Document no longer in limbo: "+n.key),i.Ru.removeReference(n.key,e),i.Ru.containsKey(n.key)||y1(i,n.key)):ye(19791,{wu:n})}function YL(i,e){const t=e.key,n=t.path.canonicalString();i.du.get(t)||i.Eu.has(n)||(re(Na,"New document in limbo: "+t),i.Eu.add(n),TT(i))}function TT(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new me(Fe.fromString(e)),n=i.fu.next();i.Au.set(n,new UL(t)),i.du=i.du.insert(t,n),pp(i.remoteStore,new rs(Ln(Cu(t.path)),n,"TargetPurposeLimboResolution",$n.ce))}}async function ys(i,e,t){const n=pe(i),a=[],l=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((f,m)=>{c.push(n.pu(m,e,t).then((g=>{var y;if((g||t)&&n.isPrimaryClient){const T=g?!g.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:y.current;n.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(g){a.push(g);const T=sT.As(m.targetId,g);l.push(T)}})))})),await Promise.all(c),n.Pu.H_(a),await(async function(m,g){const y=pe(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>j.forEach(g,(I=>j.forEach(I.Es,(D=>y.persistence.referenceDelegate.addReference(T,I.targetId,D))).next((()=>j.forEach(I.ds,(D=>y.persistence.referenceDelegate.removeReference(T,I.targetId,D)))))))))}catch(T){if(!Ra(T))throw T;re(aT,"Failed to update sequence numbers: "+T)}for(const T of g){const I=T.targetId;if(!T.fromCache){const D=y.Ms.get(I),F=D.snapshotVersion,B=D.withLastLimboFreeSnapshotVersion(F);y.Ms=y.Ms.insert(I,B)}}})(n.localStore,l))}async function WL(i,e){const t=pe(i);if(!t.currentUser.isEqual(e)){re(Na,"User change. New user:",e.toKey());const n=await Yx(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new te(K.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await ys(t,n.Ls)}}function XL(i,e){const t=pe(i),n=t.Au.get(e);if(n&&n.hu)return Le().add(n.key);{let a=Le();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}async function JL(i,e){const t=pe(i),n=await Lm(t.localStore,e.query,!0),a=e.view.cu(n);return t.isPrimaryClient&&Fy(t,e.targetId,a.au),a}async function ZL(i,e){const t=pe(i);return Zx(t.localStore,e).then((n=>ys(t,n)))}async function eU(i,e,t,n){const a=pe(i),l=await(function(f,m){const g=pe(f),y=pe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(T=>y.er(T,m).next((I=>I?g.localDocuments.getDocuments(T,I):j.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Ou(a.remoteStore):t==="acknowledged"||t==="rejected"?(vT(a,e,n||null),yT(a,e),(function(f,m){pe(pe(f).mutationQueue).ir(m)})(a.localStore,e)):ye(6720,"Unknown batchState",{Su:t}),await ys(a,l)):re(Na,"Cannot apply mutation batch with id: "+e)}async function tU(i,e){const t=pe(i);if(gp(t),ET(t),e===!0&&t.gu!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),a=await gS(t,n.toArray());t.gu=!0,await By(t.remoteStore,!0);for(const l of a)pp(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const n=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?n.push(c):a=a.then((()=>(Eu(t,c),yu(t.localStore,c,!0)))),vu(t.remoteStore,c)})),await a,await gS(t,n),(function(c){const f=pe(c);f.Au.forEach(((m,g)=>{vu(f.remoteStore,g)})),f.Ru.Jr(),f.Au=new Map,f.du=new ft(me.comparator)})(t),t.gu=!1,await By(t.remoteStore,!1)}}async function gS(i,e,t){const n=pe(i),a=[],l=[];for(const c of e){let f;const m=n.Iu.get(c);if(m&&m.length!==0){f=await _u(n.localStore,Ln(m[0]));for(const g of m){const y=n.Tu.get(g),T=await JL(n,y);T.snapshot&&l.push(T.snapshot)}}else{const g=await Jx(n.localStore,c);f=await _u(n.localStore,g),await _T(n,v1(g),c,!1,f.resumeToken)}a.push(f)}return n.Pu.H_(l),a}function v1(i){return tx(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function nU(i){return(function(t){return pe(pe(t).persistence).Ts()})(pe(i).localStore)}async function iU(i,e,t,n){const a=pe(i);if(a.gu)return void re(Na,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await Zx(a.localStore,ix(l[0])),f=ld.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Nt.EMPTY_BYTE_STRING);await ys(a,c,f);break}case"rejected":await yu(a.localStore,e,!0),Eu(a,e,n);break;default:ye(64155,t)}}async function rU(i,e,t){const n=gp(i);if(n.gu){for(const a of e){if(n.Iu.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){re(Na,"Adding an already active target "+a);continue}const l=await Jx(n.localStore,a),c=await _u(n.localStore,l);await _T(n,v1(l),c.targetId,!1,c.resumeToken),pp(n.remoteStore,c)}for(const a of t)n.Iu.has(a)&&await yu(n.localStore,a,!1).then((()=>{vu(n.remoteStore,a),Eu(n,a)})).catch(Aa)}}function gp(i){const e=pe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=_1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GL.bind(null,e),e.Pu.H_=OL.bind(null,e.eventManager),e.Pu.yu=kL.bind(null,e.eventManager),e}function ET(i){const e=pe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QL.bind(null,e),e}function sU(i,e,t){const n=pe(i);(async function(l,c,f){try{const m=await c.getMetadata();if(await(function(D,F){const B=pe(D),U=jt(F.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",(ne=>B.Ii.getBundleMetadata(ne,F.id))).then((ne=>!!ne&&ne.createTime.compareTo(U)>=0))})(l.localStore,m))return await c.close(),f._completeWith((function(D){return{taskState:"Success",documentsLoaded:D.totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}})(m)),Promise.resolve(new Set);f._updateProgress(d1(m));const g=new ML(m,c.serializer);let y=await c.bu();for(;y;){const I=await g.Ga(y);I&&f._updateProgress(I),y=await c.bu()}const T=await g.ja(l.localStore);return await ys(l,T.Ha,void 0),await(function(D,F){const B=pe(D);return B.persistence.runTransaction("Save bundle","readwrite",(U=>B.Ii.saveBundleMetadata(U,F)))})(l.localStore,m),f._completeWith(T.progress),Promise.resolve(T.Ja)}catch(m){return kr(Na,`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}})(n,e,t).then((a=>{n.sharedClientState.notifyBundleLoaded(a)}))}class qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return $x(this.persistence,new Qx,e.initialUser,this.serializer)}Cu(e){return new nT(mp.mi,this.serializer)}Du(e){return new r1}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qh.provider={build:()=>new qh};class aU extends qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){we(this.persistence.referenceDelegate instanceof Mm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new zx(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new nT((n=>Mm.mi(n,t)),this.serializer)}}class T1 extends qh{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await ET(this.xu.syncEngine),await Ou(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return $x(this.persistence,new Qx,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new zx(n,e.asyncQueue,t)}Mu(e,t){const n=new pM(t,this.persistence);return new mM(e.asyncQueue,n)}Cu(e){const t=rT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new iT(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,s1(),gm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new r1}}class oU extends T1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Z_&&(this.sharedClientState.syncEngine={Co:eU.bind(null,t),vo:iU.bind(null,t),Fo:rU.bind(null,t),Ts:nU.bind(null,t),Do:ZL.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async n=>{await tU(this.xu.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Du(e){const t=s1();if(!Z_.v(t))throw new te(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=rT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Z_(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Hh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>pS(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=WL.bind(null,this.syncEngine),await By(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PL})()}createDatastore(e){const t=cd(e.databaseInfo.databaseId),n=(function(l){return new mL(l)})(e.databaseInfo);return(function(l,c,f,m){return new yL(l,c,f,m)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,a,l,c,f){return new TL(n,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>pS(this.syncEngine,t,0)),(function(){return lS.v()?new lS:new cL})())}createSyncEngine(e,t){return(function(a,l,c,f,m,g,y){const T=new jL(a,l,c,f,m,g);return y&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=pe(a);re(Lo,"RemoteStore shutting down."),l.Ea.add(5),await Pu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Hh.provider={build:()=>new Hh};function _S(i,e=10240){let t=0;return{async read(){if(t<i.byteLength){const n={value:i.slice(t,t+e),done:!1};return t+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ut("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new yn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((n=>{n&&n.$a()?this.metadata.resolve(n.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.Qa)}`))}),(n=>this.metadata.reject(n)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),n=Number(t);isNaN(n)&&this.Qu(`length string (${t}) is not valid number`);const a=await this.$u(n);return new VL(JSON.parse(a),e.length+n)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new te(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const c=pe(a),f={documents:l.map((T=>zh(c.serializer,T)))},m=await c.Ho("BatchGetDocuments",c.serializer.databaseId,Fe.emptyPath(),f,l.length),g=new Map;m.forEach((T=>{const I=E4(c.serializer,T);g.set(I.key.toString(),I)}));const y=[];return l.forEach((T=>{const I=g.get(T.toString());we(!!I,55234,{key:T}),y.push(I)})),y})(this.datastore,e);return t.forEach((n=>this.recordVersion(n))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Du(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,n)=>{const a=me.fromPath(n);this.mutations.push(new Kv(a,this.precondition(a)))})),await(async function(n,a){const l=pe(n),c={writes:a.map((f=>Fh(l.serializer,f)))};await l.Go("Commit",l.serializer.databaseId,Fe.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ye(50498,{Gu:e.constructor.name});t=Se.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new te(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Se.min())?bt.exists(!1):bt.updateTime(t):bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Se.min()))throw new te(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,t,n,a,l){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=a,this.deferred=l,this.zu=n.maxAttempts,this.M_=new lT(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new uU(this.datastore),t=this.Hu(e);t&&t.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((a=>{this.Yu(a)}))))})).catch((n=>{this.Yu(n)}))}))}Hu(e){try{const t=this.updateFunction(e);return!nd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!gx(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="FirestoreClient";class hU{constructor(e,t,n,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=a,this.user=on.UNAUTHENTICATED,this.clientId=Pv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(n,(async c=>{re(wa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(re(wa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Vu(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function ty(i,e){i.asyncQueue.verifyOperationInProgress(),re(wa,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener((async a=>{n.isEqual(a)||(await Yx(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function yS(i,e){i.asyncQueue.verifyOperationInProgress();const t=await wT(i);re(wa,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((n=>cS(e.remoteStore,n))),i.setAppCheckTokenChangeListener(((n,a)=>cS(e.remoteStore,a))),i._onlineComponents=e}async function wT(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){re(wa,"Using user provided OfflineComponentProvider");try{await ty(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===K.FAILED_PRECONDITION||a.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;kr("Error using user provided cache. Falling back to memory cache: "+t),await ty(i,new qh)}}else re(wa,"Using default OfflineComponentProvider"),await ty(i,new aU(void 0));return i._offlineComponents}async function yp(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(re(wa,"Using user provided OnlineComponentProvider"),await yS(i,i._uninitializedComponentsProvider._online)):(re(wa,"Using default OnlineComponentProvider"),await yS(i,new Hh))),i._onlineComponents}function E1(i){return wT(i).then((e=>e.persistence))}function bT(i){return wT(i).then((e=>e.localStore))}function w1(i){return yp(i).then((e=>e.remoteStore))}function IT(i){return yp(i).then((e=>e.syncEngine))}function dU(i){return yp(i).then((e=>e.datastore))}async function wu(i){const e=await yp(i),t=e.eventManager;return t.onListen=BL.bind(null,e.syncEngine),t.onUnlisten=FL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=zL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qL.bind(null,e.syncEngine),t}function fU(i){return i.asyncQueue.enqueue((async()=>{const e=await E1(i),t=await w1(i);return e.setNetworkEnabled(!0),(function(a){const l=pe(a);return l.Ea.delete(0),hd(l)})(t)}))}function mU(i){return i.asyncQueue.enqueue((async()=>{const e=await E1(i),t=await w1(i);return e.setNetworkEnabled(!1),(async function(a){const l=pe(a);l.Ea.add(0),await Pu(l),l.Ra.set("Offline")})(t)}))}function pU(i,e){const t=new yn;return i.asyncQueue.enqueueAndForget((async()=>(async function(a,l,c){try{const f=await(function(g,y){const T=pe(g);return T.persistence.runTransaction("read document","readonly",(I=>T.localDocuments.getDocument(I,y)))})(a,l);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new te(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Vu(f,`Failed to get document '${l} from cache`);c.reject(m)}})(await bT(i),e,t))),t.promise}function b1(i,e,t={}){const n=new yn;return i.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,g){const y=new _p({next:I=>{y.Nu(),c.enqueueAndForget((()=>mT(l,T)));const D=I.docs.has(f);!D&&I.fromCache?g.reject(new te(K.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&I.fromCache&&m&&m.source==="server"?g.reject(new te(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),T=new gT(Cu(f.path),y,{includeMetadataChanges:!0,qa:!0});return fT(l,T)})(await wu(i),i.asyncQueue,e,t,n))),n.promise}function gU(i,e){const t=new yn;return i.asyncQueue.enqueueAndForget((async()=>(async function(a,l,c){try{const f=await Lm(a,l,!0),m=new p1(l,f.Qs),g=m.ru(f.documents),y=m.applyChanges(g,!1);c.resolve(y.snapshot)}catch(f){const m=Vu(f,`Failed to execute query '${l} against cache`);c.reject(m)}})(await bT(i),e,t))),t.promise}function I1(i,e,t={}){const n=new yn;return i.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,g){const y=new _p({next:I=>{y.Nu(),c.enqueueAndForget((()=>mT(l,T))),I.fromCache&&m.source==="server"?g.reject(new te(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),T=new gT(f,y,{includeMetadataChanges:!0,qa:!0});return fT(l,T)})(await wu(i),i.asyncQueue,e,t,n))),n.promise}function _U(i,e){const t=new _p(e);return i.asyncQueue.enqueueAndForget((async()=>(function(a,l){pe(a).Ca.add(l),l.next()})(await wu(i),t))),()=>{t.Nu(),i.asyncQueue.enqueueAndForget((async()=>(function(a,l){pe(a).Ca.delete(l)})(await wu(i),t)))}}function yU(i,e,t,n){const a=(function(c,f){let m;return m=typeof c=="string"?yx().encode(c):c,(function(y,T){return new lU(y,T)})((function(y,T){if(y instanceof Uint8Array)return _S(y,T);if(y instanceof ArrayBuffer)return _S(new Uint8Array(y),T);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),f)})(t,cd(e));i.asyncQueue.enqueueAndForget((async()=>{sU(await IT(i),a,n)}))}function vU(i,e){return i.asyncQueue.enqueue((async()=>(function(n,a){const l=pe(n);return l.persistence.runTransaction("Get named query","readonly",(c=>l.Ii.getNamedQuery(c,a)))})(await bT(i),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="firestore.googleapis.com",TS=!0;class ES{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=A1,this.ssl=TS}else this.host=e.host,this.ssl=e.ssl??TS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<B4)throw new te(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S1(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new te(K.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new te(K.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new te(K.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dd{constructor(e,t,n,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ES({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ES(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new nM;switch(n.type){case"firstParty":return new aM(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new te(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=vS.get(t);n&&(re("ComponentProvider","Removing Datastore"),vS.delete(t),n.terminate())})(this),Promise.resolve()}}function TU(i,e,t,n={}){var g;i=Ye(i,dd);const a=Ia(e),l=i._getSettings(),c={...l,emulatorOptions:i._getEmulatorOptions()},f=`${e}:${t}`;a&&(iv(`https://${f}`),rv("Firestore",!0)),l.host!==A1&&l.host!==f&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:a,emulatorOptions:n};if(!fa(m,c)&&(i._setSettings(m),n.mockUserToken)){let y,T;if(typeof n.mockUserToken=="string")y=n.mockUserToken,T=on.MOCK_USER;else{y=GS(n.mockUserToken,(g=i._app)==null?void 0:g.options.projectId);const I=n.mockUserToken.sub||n.mockUserToken.user_id;if(!I)throw new te(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new on(I)}i._authCredentials=new iM(new _R(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Un=class R1{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new R1(this.firestore,e,this._query)}},dt=class oh{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new da(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oh(this.firestore,e,this._key)}toJSON(){return{type:oh._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(td(t,oh._jsonSchema))return new oh(e,n||null,new me(Fe.fromString(t.referencePath)))}};dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:Xt("string",dt._jsonSchemaVersion),referencePath:Xt("string")};let da=class x1 extends Un{constructor(e,t,n){super(e,t,Cu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new me(e))}withConverter(e){return new x1(this.firestore,e,this._path)}};function Hi(i,e,...t){if(i=Ie(i),Ov("collection","path",e),i instanceof dd){const n=Fe.fromString(e,...t);return uI(n),new da(i,null,n)}{if(!(i instanceof dt||i instanceof da))throw new te(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Fe.fromString(e,...t));return uI(n),new da(i.firestore,null,n)}}function EU(i,e){if(i=Ye(i,dd),Ov("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new te(K.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Un(i,null,(function(n){return new ps(Fe.emptyPath(),n)})(e))}function pn(i,e,...t){if(i=Ie(i),arguments.length===1&&(e=Pv.newId()),Ov("doc","path",e),i instanceof dd){const n=Fe.fromString(e,...t);return lI(n),new dt(i,null,new me(n))}{if(!(i instanceof dt||i instanceof da))throw new te(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Fe.fromString(e,...t));return lI(n),new dt(i.firestore,i instanceof da?i.converter:null,new me(n))}}function C1(i,e){return i=Ie(i),e=Ie(e),(i instanceof dt||i instanceof da)&&(e instanceof dt||e instanceof da)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function N1(i,e){return i=Ie(i),e=Ie(e),i instanceof Un&&e instanceof Un&&i.firestore===e.firestore&&sd(i._query,e._query)&&i.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="AsyncQueue";class bS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lT(this,"async_queue_retry"),this._c=()=>{const n=gm();n&&re(wS,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=gm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new yn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ra(e))throw e;re(wS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Ut("INTERNAL UNHANDLED ERROR: ",IS(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=dT.createAndSchedule(this,e,t,n,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ye(47125,{Pc:IS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function IS(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(i){return(function(t,n){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of n)if(l in a&&typeof a[l]=="function")return!0;return!1})(i,["next","error","complete"])}class wU{constructor(){this._progressObserver={},this._taskCompletionResolver=new yn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=-1;let Dt=class extends dd{constructor(e,t,n,a){super(e,t,n,a),this.type="firestore",this._queue=new bS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bS(e),this._firestoreClient=void 0,await e}}};function Tn(i){if(i._terminated)throw new te(K.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||D1(i),i._firestoreClient}function D1(i){var n,a,l;const e=i._freezeSettings(),t=(function(f,m,g,y){return new HM(f,m,g,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,S1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(i._databaseId,((n=i._app)==null?void 0:n.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new hU(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}})(i._componentsProvider))}function IU(i,e){kr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return P1(i,Hh.provider,{build:n=>new T1(n,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function SU(i){kr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=i._freezeSettings();P1(i,Hh.provider,{build:t=>new oU(t,e.cacheSizeBytes)})}function P1(i,e,t){if((i=Ye(i,Dt))._firestoreClient||i._terminated)throw new te(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new te(K.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},D1(i)}function AU(i){if(i._initialized&&!i._terminated)throw new te(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yn;return i._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(n){if(!Cr.v())return Promise.resolve();const a=n+Kx;await Cr.delete(a)})(rT(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function RU(i){return(function(t){const n=new yn;return t.asyncQueue.enqueueAndForget((async()=>$L(await IT(t),n))),n.promise})(Tn(i=Ye(i,Dt)))}function xU(i){return fU(Tn(i=Ye(i,Dt)))}function CU(i){return mU(Tn(i=Ye(i,Dt)))}function NU(i,e){const t=Tn(i=Ye(i,Dt)),n=new wU;return yU(t,i._databaseId,e,n),n}function DU(i,e){return vU(Tn(i=Ye(i,Dt)),e).then((t=>t?new Un(i,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sn(Nt.fromBase64String(e))}catch(t){throw new te(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sn(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(td(e,Sn._jsonSchema))return Sn.fromBase64String(e.bytes)}}Sn._jsonSchemaVersion="firestore/bytes/1.0",Sn._jsonSchema={type:Xt("string",Sn._jsonSchemaVersion),bytes:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qi._jsonSchemaVersion}}static fromJSON(e){if(td(e,Qi._jsonSchema))return new Qi(e.latitude,e.longitude)}}Qi._jsonSchemaVersion="firestore/geoPoint/1.0",Qi._jsonSchema={type:Xt("string",Qi._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let l=0;l<n.length;++l)if(n[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(td(e,Dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Dr(e.vectorValues);throw new te(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Dr._jsonSchemaVersion="firestore/vectorValue/1.0",Dr._jsonSchema={type:Xt("string",Dr._jsonSchemaVersion),vectorValues:Xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=/^__.*__$/;class OU{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nu(e,this.data,t,this.fieldTransforms)}}class O1{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new _s(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function k1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:i})}}class vp{constructor(e,t,n,a,l,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(k1(this.Ac)&&PU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kU{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||cd(e)}Cc(e,t,n,a=!1){return new vp({Ac:e,methodName:t,Dc:n,path:wt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qo(i){const e=i._freezeSettings(),t=cd(i._databaseId);return new kU(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Tp(i,e,t,n,a,l={}){const c=i.Cc(l.merge||l.mergeFields?2:0,e,t,a);DT("Data must be an object, but it was:",c,n);const f=L1(n,c);let m,g;if(l.merge)m=new Yn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const T of l.mergeFields){const I=Hy(e,T,t);if(!c.contains(I))throw new te(K.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);j1(y,I)||y.push(I)}m=new Yn(y),g=c.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,g=c.fieldTransforms;return new OU(new _n(f),m,g)}class fd extends Fo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fd}}function V1(i,e,t){return new vp({Ac:3,Dc:e.settings.Dc,methodName:i._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ST extends Fo{_toFieldTransform(e){return new od(e.path,new mu)}isEqual(e){return e instanceof ST}}class AT extends Fo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=V1(this,e,!0),n=this.vc.map((l=>Ho(l,t))),a=new Po(n);return new od(e.path,a)}isEqual(e){return e instanceof AT&&fa(this.vc,e.vc)}}class RT extends Fo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=V1(this,e,!0),n=this.vc.map((l=>Ho(l,t))),a=new Oo(n);return new od(e.path,a)}isEqual(e){return e instanceof RT&&fa(this.vc,e.vc)}}class xT extends Fo{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new pu(e.serializer,ux(e.serializer,this.Fc));return new od(e.path,t)}isEqual(e){return e instanceof xT&&this.Fc===e.Fc}}function CT(i,e,t,n){const a=i.Cc(1,e,t);DT("Data must be an object, but it was:",a,n);const l=[],c=_n.empty();xa(n,((m,g)=>{const y=PT(e,m,t);g=Ie(g);const T=a.yc(y);if(g instanceof fd)l.push(y);else{const I=Ho(g,T);I!=null&&(l.push(y),c.set(y,I))}}));const f=new Yn(l);return new O1(c,f,a.fieldTransforms)}function NT(i,e,t,n,a,l){const c=i.Cc(1,e,t),f=[Hy(e,n,t)],m=[a];if(l.length%2!=0)throw new te(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)f.push(Hy(e,l[I])),m.push(l[I+1]);const g=[],y=_n.empty();for(let I=f.length-1;I>=0;--I)if(!j1(g,f[I])){const D=f[I];let F=m[I];F=Ie(F);const B=c.yc(D);if(F instanceof fd)g.push(D);else{const U=Ho(F,B);U!=null&&(g.push(D),y.set(D,U))}}const T=new Yn(g);return new O1(y,T,c.fieldTransforms)}function M1(i,e,t,n=!1){return Ho(t,i.Cc(n?4:3,e))}function Ho(i,e){if(U1(i=Ie(i)))return DT("Unsupported field value:",e,i),L1(i,e);if(i instanceof Fo)return(function(n,a){if(!k1(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const l=n._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,a){const l=[];let c=0;for(const f of n){let m=Ho(f,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(i,e)}return(function(n,a){if((n=Ie(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return ux(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const l=tt.fromDate(n);return{timestampValue:gu(a.serializer,l)}}if(n instanceof tt){const l=new tt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:gu(a.serializer,l)}}if(n instanceof Qi)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Sn)return{bytesValue:Ex(a.serializer,n._byteString)};if(n instanceof dt){const l=a.databaseId,c=n.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Xv(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Dr)return(function(c,f){return{mapValue:{fields:{[Bv]:{stringValue:zv},[hu]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw f.Sc("VectorValues must only contain numeric values.");return Gv(f.serializer,g)}))}}}}}})(n,a);throw a.Sc(`Unsupported field value: ${np(n)}`)})(i,e)}function L1(i,e){const t={};return UR(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xa(i,((n,a)=>{const l=Ho(a,e.mc(n));l!=null&&(t[n]=l)})),{mapValue:{fields:t}}}function U1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof tt||i instanceof Qi||i instanceof Sn||i instanceof dt||i instanceof Fo||i instanceof Dr)}function DT(i,e,t){if(!U1(t)||!TR(t)){const n=np(t);throw n==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+n)}}function Hy(i,e,t){if((e=Ie(e))instanceof ba)return e._internalPath;if(typeof e=="string")return PT(i,e);throw zm("Field path arguments must be of type string or ",i,!1,void 0,t)}const VU=new RegExp("[~\\*/\\[\\]]");function PT(i,e,t){if(e.search(VU)>=0)throw zm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ba(...e.split("."))._internalPath}catch{throw zm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function zm(i,e,t,n,a){const l=n&&!n.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${n}`),c&&(m+=` in document ${a}`),m+=")"),new te(K.INVALID_ARGUMENT,f+i+m)}function j1(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t,n,a,l){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ep("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class MU extends Gh{data(){return super.data()}}function Ep(i,e){return typeof e=="string"?PT(i,e):e instanceof ba?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new te(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OT{}class md extends OT{}function yr(i,e,...t){let n=[];e instanceof OT&&n.push(e),n=n.concat(t),(function(l){const c=l.filter((m=>m instanceof kT)).length,f=l.filter((m=>m instanceof wp)).length;if(c>1||c>0&&f>0)throw new te(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)i=a._apply(i);return i}class wp extends md{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new wp(e,t,n)}_apply(e){const t=this._parse(e);return F1(e._query,t),new Un(e.firestore,e.converter,Ny(e._query,t))}_parse(e){const t=qo(e.firestore);return(function(l,c,f,m,g,y,T){let I;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new te(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){AS(T,y);const F=[];for(const B of T)F.push(SS(m,l,B));I={arrayValue:{values:F}}}else I=SS(m,l,T)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||AS(T,y),I=M1(f,c,T,y==="in"||y==="not-in");return Ge.create(g,y,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Gy(i,e,t){const n=e,a=Ep("where",i);return wp._create(a,n,t)}class kT extends OT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new kT(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:st.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const m of f)F1(c,m),c=Ny(c,m)})(e._query,t),new Un(e.firestore,e.converter,Ny(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class VT extends md{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new VT(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new te(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new te(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bh(l,c)})(e._query,this._field,this._direction);return new Un(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new ps(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function LU(i,e="asc"){const t=e,n=Ep("orderBy",i);return VT._create(n,t)}class bp extends md{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new bp(e,t,n)}_apply(e){return new Un(e.firestore,e.converter,Pm(e._query,this._limit,this._limitType))}}function UU(i){return ER("limit",i),bp._create("limit",i,"F")}function jU(i){return ER("limitToLast",i),bp._create("limitToLast",i,"L")}class Ip extends md{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Ip(e,t,n)}_apply(e){const t=z1(e,this.type,this._docOrFields,this._inclusive);return new Un(e.firestore,e.converter,(function(a,l){return new ps(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,t))}}function BU(...i){return Ip._create("startAt",i,!0)}function zU(...i){return Ip._create("startAfter",i,!1)}class Sp extends md{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Sp(e,t,n)}_apply(e){const t=z1(e,this.type,this._docOrFields,this._inclusive);return new Un(e.firestore,e.converter,(function(a,l){return new ps(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)})(e._query,t))}}function FU(...i){return Sp._create("endBefore",i,!1)}function qU(...i){return Sp._create("endAt",i,!0)}function z1(i,e,t,n){if(t[0]=Ie(t[0]),t[0]instanceof Gh)return(function(l,c,f,m,g){if(!m)throw new te(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const y=[];for(const T of Jl(l))if(T.field.isKeyField())y.push(No(c,m.key));else{const I=m.data.field(T.field);if(op(I))throw new te(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(I===null){const D=T.field.canonicalString();throw new te(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${D}' (used as the orderBy) does not exist.`)}y.push(I)}return new Ta(y,g)})(i._query,i.firestore._databaseId,e,t[0]._document,n);{const a=qo(i.firestore);return(function(c,f,m,g,y,T){const I=c.explicitOrderBy;if(y.length>I.length)throw new te(K.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const D=[];for(let F=0;F<y.length;F++){const B=y[F];if(I[F].field.isKeyField()){if(typeof B!="string")throw new te(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof B}`);if(!qv(c)&&B.indexOf("/")!==-1)throw new te(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${B}' contains a slash.`);const U=c.path.child(Fe.fromString(B));if(!me.isDocumentKey(U))throw new te(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const ne=new me(U);D.push(No(f,ne))}else{const U=M1(m,g,B);D.push(U)}}return new Ta(D,T)})(i._query,i.firestore._databaseId,a,e,t,n)}}function SS(i,e,t){if(typeof(t=Ie(t))=="string"){if(t==="")throw new te(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qv(e)&&t.indexOf("/")!==-1)throw new te(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Fe.fromString(t));if(!me.isDocumentKey(n))throw new te(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return No(i,new me(n))}if(t instanceof dt)return No(i,t._key);throw new te(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${np(t)}.`)}function AS(i,e){if(!Array.isArray(i)||i.length===0)throw new te(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function F1(i,e){const t=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new te(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class MT{convertValue(e,t="none"){switch(ya(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return xa(e,((a,l)=>{n[a]=this.convertValue(l,t)})),n}convertVectorValue(e){var n,a,l;const t=(l=(a=(n=e.fields)==null?void 0:n[hu].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>Et(c.doubleValue)));return new Dr(t)}convertGeoPoint(e){return new Qi(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=lp(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Lh(e));default:return null}}convertTimestamp(e){const t=cs(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Fe.fromString(e);we(Px(n),9688,{name:e});const a=new _a(n.get(1),n.get(3)),l=new me(n.popFirst(5));return a.isEqual(t)||Ut(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(i,e,t){let n;return n=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,n}class HU extends MT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}class Eo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let xi=class q1 extends Gh{constructor(e,t,n,a,l,c){super(e,t,n,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Ep("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=q1._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",xi._jsonSchema={type:Xt("string",xi._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};let wh=class extends xi{data(e={}){return super.data(e)}},$i=class H1{constructor(e,t,n,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Eo(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new wh(this._firestore,this._userDataWriter,n.key,n,new Eo(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const m=new wh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Eo(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new wh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Eo(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),y=c.indexOf(f.doc.key)),{type:GU(f.type),doc:m,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=H1._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),n.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function GU(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:i})}}function G1(i,e){return i instanceof xi&&e instanceof xi?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(i._document===null?e._document===null:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof $i&&e instanceof $i&&i._firestore===e._firestore&&N1(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(i){i=Ye(i,dt);const e=Ye(i.firestore,Dt);return b1(Tn(e),i._key).then((t=>LT(e,i,t)))}$i._jsonSchemaVersion="firestore/querySnapshot/1.0",$i._jsonSchema={type:Xt("string",$i._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Go extends MT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function QU(i){i=Ye(i,dt);const e=Ye(i.firestore,Dt),t=Tn(e),n=new Go(e);return pU(t,i._key).then((a=>new xi(e,n,i._key,a,new Eo(a!==null&&a.hasLocalMutations,!0),i.converter)))}function $U(i){i=Ye(i,dt);const e=Ye(i.firestore,Dt);return b1(Tn(e),i._key,{source:"server"}).then((t=>LT(e,i,t)))}function Ky(i){i=Ye(i,Un);const e=Ye(i.firestore,Dt),t=Tn(e),n=new Go(e);return B1(i._query),I1(t,i._query).then((a=>new $i(e,n,i,a)))}function YU(i){i=Ye(i,Un);const e=Ye(i.firestore,Dt),t=Tn(e),n=new Go(e);return gU(t,i._query).then((a=>new $i(e,n,i,a)))}function WU(i){i=Ye(i,Un);const e=Ye(i.firestore,Dt),t=Tn(e),n=new Go(e);return I1(t,i._query,{source:"server"}).then((a=>new $i(e,n,i,a)))}function RS(i,e,t){i=Ye(i,dt);const n=Ye(i.firestore,Dt),a=Ap(i.converter,e,t);return Mu(n,[Tp(qo(n),"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,bt.none())])}function Ql(i,e,t,...n){i=Ye(i,dt);const a=Ye(i.firestore,Dt),l=qo(a);let c;return c=typeof(e=Ie(e))=="string"||e instanceof ba?NT(l,"updateDoc",i._key,e,t,n):CT(l,"updateDoc",i._key,e),Mu(a,[c.toMutation(i._key,bt.exists(!0))])}function XU(i){return Mu(Ye(i.firestore,Dt),[new Du(i._key,bt.none())])}function JU(i,e){const t=Ye(i.firestore,Dt),n=pn(i),a=Ap(i.converter,e);return Mu(t,[Tp(qo(i.firestore),"addDoc",n._key,a,i.converter!==null,{}).toMutation(n._key,bt.exists(!1))]).then((()=>n))}function bh(i,...e){var m,g,y;i=Ie(i);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||qy(e[n])||(t=e[n++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(qy(e[n])){const T=e[n];e[n]=(m=T.next)==null?void 0:m.bind(T),e[n+1]=(g=T.error)==null?void 0:g.bind(T),e[n+2]=(y=T.complete)==null?void 0:y.bind(T)}let l,c,f;if(i instanceof dt)c=Ye(i.firestore,Dt),f=Cu(i._key.path),l={next:T=>{e[n]&&e[n](LT(c,i,T))},error:e[n+1],complete:e[n+2]};else{const T=Ye(i,Un);c=Ye(T.firestore,Dt),f=T._query;const I=new Go(c);l={next:D=>{e[n]&&e[n](new $i(c,I,T,D))},error:e[n+1],complete:e[n+2]},B1(i._query)}return(function(I,D,F,B){const U=new _p(B),ne=new gT(D,U,F);return I.asyncQueue.enqueueAndForget((async()=>fT(await wu(I),ne))),()=>{U.Nu(),I.asyncQueue.enqueueAndForget((async()=>mT(await wu(I),ne)))}})(Tn(c),f,a,l)}function ZU(i,e){return _U(Tn(i=Ye(i,Dt)),qy(e)?e:{next:e})}function Mu(i,e){return(function(n,a){const l=new yn;return n.asyncQueue.enqueueAndForget((async()=>HL(await IT(n),a,l))),l.promise})(Tn(i),e)}function LT(i,e,t){const n=t.docs.get(e._key),a=new Go(i);return new xi(i,a,e._key,n,new Eo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K1=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qo(e)}set(e,t,n){this._verifyNotCommitted();const a=oa(e,this._firestore),l=Ap(a.converter,t,n),c=Tp(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,n);return this._mutations.push(c.toMutation(a._key,bt.none())),this}update(e,t,n,...a){this._verifyNotCommitted();const l=oa(e,this._firestore);let c;return c=typeof(t=Ie(t))=="string"||t instanceof ba?NT(this._dataReader,"WriteBatch.update",l._key,t,n,a):CT(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=oa(e,this._firestore);return this._mutations=this._mutations.concat(new Du(t._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function oa(i,e){if((i=Ie(i)).firestore!==e)throw new te(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qo(e)}get(e){const t=oa(e,this._firestore),n=new HU(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return ye(24041);const l=a[0];if(l.isFoundDocument())return new Gh(this._firestore,n,l.key,l,t.converter);if(l.isNoDocument())return new Gh(this._firestore,n,t._key,null,t.converter);throw ye(18433,{doc:l})}))}set(e,t,n){const a=oa(e,this._firestore),l=Ap(a.converter,t,n),c=Tp(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,n);return this._transaction.set(a._key,c),this}update(e,t,n,...a){const l=oa(e,this._firestore);let c;return c=typeof(t=Ie(t))=="string"||t instanceof ba?NT(this._dataReader,"Transaction.update",l._key,t,n,a):CT(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=oa(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n6=class extends t6{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=oa(e,this._firestore),n=new Go(this._firestore);return super.get(e).then((a=>new xi(this._firestore,n,t._key,a._document,new Eo(!1,!1),t.converter)))}};function i6(i,e,t){i=Ye(i,Dt);const n={...e6,...t};return(function(l){if(l.maxAttempts<1)throw new te(K.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(l,c,f){const m=new yn;return l.asyncQueue.enqueueAndForget((async()=>{const g=await dU(l);new cU(l.asyncQueue,g,f,c,m).ju()})),m.promise})(Tn(i),(a=>e(new n6(i,a))),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(){return new fd("deleteField")}function s6(){return new ST("serverTimestamp")}function a6(...i){return new AT("arrayUnion",i)}function o6(...i){return new RT("arrayRemove",i)}function l6(i){return new xT("increment",i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(i){return Tn(i=Ye(i,Dt)),new K1(i,(e=>Mu(i,e)))}(function(e,t=!0){(function(a){xu=a})(ds),ls(new Ci("firestore",((n,{instanceIdentifier:a,options:l})=>{const c=n.getProvider("app").getImmediate(),f=new Dt(new rM(n.getProvider("auth-internal")),new oM(c,n.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new te(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(g.options.projectId,y)})(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),ci(rI,sI,e),ci(rI,sI,"esm2020")})();const u6="@firebase/firestore-compat",c6="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(i,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new te("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(){if(typeof Uint8Array>"u")throw new te("unimplemented","Uint8Arrays are not available in this environment.")}function CS(){if(!FM())throw new te("unimplemented","Blobs are unavailable in Firestore in this environment.")}let Q1=class Qy{constructor(e){this._delegate=e}static fromBase64String(e){return CS(),new Qy(Sn.fromBase64String(e))}static fromUint8Array(e){return xS(),new Qy(Sn.fromUint8Array(e))}toBase64(){return CS(),this._delegate.toBase64()}toUint8Array(){return xS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(i){return h6(i,["next","error","complete"])}function h6(i,e){if(typeof i!="object"||i===null)return!1;const t=i;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{enableIndexedDbPersistence(e,t){return IU(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return SU(e._delegate)}clearIndexedDbPersistence(e){return AU(e._delegate)}}class $1{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof _a||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&kr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,n={}){TU(this._delegate,e,t,n)}enableNetwork(){return xU(this._delegate)}disableNetwork(){return CU(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,vR("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return RU(this._delegate)}onSnapshotsInSync(e){return ZU(this._delegate,e)}get app(){if(!this._appCompat)throw new te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bu(this,Hi(this._delegate,e))}catch(t){throw Vn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ai(this,pn(this._delegate,e))}catch(t){throw Vn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new kn(this,EU(this._delegate,e))}catch(t){throw Vn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return i6(this._delegate,t=>e(new Y1(this,t)))}batch(){return Tn(this._delegate),new W1(new K1(this._delegate,e=>Mu(this._delegate,e)))}loadBundle(e){return NU(this._delegate,e)}namedQuery(e){return DU(this._delegate,e).then(t=>t?new kn(this,t):null)}}class Rp extends MT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Q1(new Sn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ai.forKey(t,this.firestore,null)}}function f6(i){eM(i)}class Y1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Rp(e)}get(e){const t=wo(e);return this._delegate.get(t).then(n=>new Kh(this._firestore,new xi(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,t.converter)))}set(e,t,n){const a=wo(e);return n?(UT("Transaction.set",n),this._delegate.set(a,t,n)):this._delegate.set(a,t),this}update(e,t,n,...a){const l=wo(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,n,...a),this}delete(e){const t=wo(e);return this._delegate.delete(t),this}}class W1{constructor(e){this._delegate=e}set(e,t,n){const a=wo(e);return n?(UT("WriteBatch.set",n),this._delegate.set(a,t,n)):this._delegate.set(a,t),this}update(e,t,n,...a){const l=wo(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,n,...a),this}delete(e){const t=wo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Uo{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new wh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qh(this._firestore,n),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Uo.INSTANCES;let a=n.get(e);a||(a=new WeakMap,n.set(e,a));let l=a.get(t);return l||(l=new Uo(e,new Rp(e),t),a.set(t,l)),l}}Uo.INSTANCES=new WeakMap;class Ai{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rp(e)}static forPath(e,t,n){if(e.length%2!==0)throw new te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ai(t,new dt(t._delegate,n,new me(e)))}static forKey(e,t,n){return new Ai(t,new dt(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new bu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bu(this.firestore,Hi(this._delegate,e))}catch(t){throw Vn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ie(e),e instanceof dt?C1(this._delegate,e):!1}set(e,t){t=UT("DocumentReference.set",t);try{return t?RS(this._delegate,e,t):RS(this._delegate,e)}catch(n){throw Vn(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return arguments.length===1?Ql(this._delegate,e):Ql(this._delegate,e,t,...n)}catch(a){throw Vn(a,"updateDoc()","DocumentReference.update()")}}delete(){return XU(this._delegate)}onSnapshot(...e){const t=X1(e),n=J1(e,a=>new Kh(this.firestore,new xi(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return bh(this._delegate,t,n)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=QU(this._delegate):(e==null?void 0:e.source)==="server"?t=$U(this._delegate):t=KU(this._delegate),t.then(n=>new Kh(this.firestore,new xi(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(e){return new Ai(this.firestore,e?this._delegate.withConverter(Uo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Vn(i,e,t){return i.message=i.message.replace(e,t),i}function X1(i){for(const e of i)if(typeof e=="object"&&!$y(e))return e;return{}}function J1(i,e){var n,a;let t;return $y(i[0])?t=i[0]:$y(i[1])?t=i[1]:typeof i[0]=="function"?t={next:i[0],error:i[1],complete:i[2]}:t={next:i[1],error:i[2],complete:i[3]},{next:l=>{t.next&&t.next(e(l))},error:(n=t.error)==null?void 0:n.bind(t),complete:(a=t.complete)==null?void 0:a.bind(t)}}class Kh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ai(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return G1(this._delegate,e._delegate)}}class Qh extends Kh{data(e){const t=this._delegate.data(e);return this._delegate._converter||tM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class kn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rp(e)}where(e,t,n){try{return new kn(this.firestore,yr(this._delegate,Gy(e,t,n)))}catch(a){throw Vn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new kn(this.firestore,yr(this._delegate,LU(e,t)))}catch(n){throw Vn(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new kn(this.firestore,yr(this._delegate,UU(e)))}catch(t){throw Vn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new kn(this.firestore,yr(this._delegate,jU(e)))}catch(t){throw Vn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new kn(this.firestore,yr(this._delegate,BU(...e)))}catch(t){throw Vn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new kn(this.firestore,yr(this._delegate,zU(...e)))}catch(t){throw Vn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new kn(this.firestore,yr(this._delegate,FU(...e)))}catch(t){throw Vn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new kn(this.firestore,yr(this._delegate,qU(...e)))}catch(t){throw Vn(t,"endAt()","Query.endAt()")}}isEqual(e){return N1(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=YU(this._delegate):(e==null?void 0:e.source)==="server"?t=WU(this._delegate):t=Ky(this._delegate),t.then(n=>new Yy(this.firestore,new $i(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...e){const t=X1(e),n=J1(e,a=>new Yy(this.firestore,new $i(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return bh(this._delegate,t,n)}withConverter(e){return new kn(this.firestore,e?this._delegate.withConverter(Uo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class m6{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Qh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Yy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new kn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new m6(this._firestore,t))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new Qh(this._firestore,n))})}isEqual(e){return G1(this._delegate,e._delegate)}}class bu extends kn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ai(this.firestore,e):null}doc(e){try{return e===void 0?new Ai(this.firestore,pn(this._delegate)):new Ai(this.firestore,pn(this._delegate,e))}catch(t){throw Vn(t,"doc()","CollectionReference.doc()")}}add(e){return JU(this._delegate,e).then(t=>new Ai(this.firestore,t))}isEqual(e){return C1(this._delegate,e._delegate)}withConverter(e){return new bu(this.firestore,e?this._delegate.withConverter(Uo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wo(i){return Ye(i,dt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(...e){this._delegate=new ba(...e)}static documentId(){return new jT(wt.keyField().canonicalString())}isEqual(e){return e=Ie(e),e instanceof ba?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{static serverTimestamp(){const e=s6();return e._methodName="FieldValue.serverTimestamp",new yo(e)}static delete(){const e=r6();return e._methodName="FieldValue.delete",new yo(e)}static arrayUnion(...e){const t=a6(...e);return t._methodName="FieldValue.arrayUnion",new yo(t)}static arrayRemove(...e){const t=o6(...e);return t._methodName="FieldValue.arrayRemove",new yo(t)}static increment(e){const t=l6(e);return t._methodName="FieldValue.increment",new yo(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6={Firestore:$1,GeoPoint:Qi,Timestamp:tt,Blob:Q1,Transaction:Y1,WriteBatch:W1,DocumentReference:Ai,DocumentSnapshot:Kh,Query:kn,QueryDocumentSnapshot:Qh,QuerySnapshot:Yy,CollectionReference:bu,FieldPath:jT,FieldValue:yo,setLogLevel:f6,CACHE_SIZE_UNLIMITED:bU};function g6(i,e){i.INTERNAL.registerComponent(new Ci("firestore-compat",t=>{const n=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(n,a)},"PUBLIC").setServiceProps({...p6}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(i){g6(i,(e,t)=>new $1(e,t,new d6)),i.registerVersion(u6,c6)}_6(Yi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="firebasestorage.googleapis.com",eC="storageBucket",y6=120*1e3,v6=600*1e3,T6=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt extends Rn{constructor(e,t,n=0){super(ny(e),`Firebase Storage: ${t} (${ny(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ny(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yt;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yt||(yt={}));function ny(i){return"storage/"+i}function BT(){const i="An unknown error occurred, please check the error payload for server response.";return new Rt(yt.UNKNOWN,i)}function E6(i){return new Rt(yt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function w6(i){return new Rt(yt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function b6(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rt(yt.UNAUTHENTICATED,i)}function I6(){return new Rt(yt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function S6(i){return new Rt(yt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function tC(){return new Rt(yt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nC(){return new Rt(yt.CANCELED,"User canceled the upload/download.")}function A6(i){return new Rt(yt.INVALID_URL,"Invalid URL '"+i+"'.")}function R6(i){return new Rt(yt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function x6(){return new Rt(yt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eC+"' property when initializing the app?")}function iC(){return new Rt(yt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function C6(){return new Rt(yt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function N6(){return new Rt(yt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function D6(i){return new Rt(yt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function eu(i){return new Rt(yt.INVALID_ARGUMENT,i)}function rC(){return new Rt(yt.APP_DELETED,"The Firebase app was deleted.")}function sC(i){return new Rt(yt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ih(i,e){return new Rt(yt.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function Zc(i){throw new Rt(yt.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=An.makeFromUrl(e,t)}catch{return new An(e,"")}if(n.path==="")return n;throw R6(e)}static makeFromUrl(e,t){let n=null;const a="([A-Za-z0-9.\\-_]+)";function l(ge){ge.path.charAt(ge.path.length-1)==="/"&&(ge.path_=ge.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function g(ge){ge.path_=decodeURIComponent(ge.path)}const y="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",D=new RegExp(`^https?://${T}/${y}/b/${a}/o${I}`,"i"),F={bucket:1,path:3},B=t===Z1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",ne=new RegExp(`^https?://${B}/${a}/${U}`,"i"),se=[{regex:f,indices:m,postModify:l},{regex:D,indices:F,postModify:g},{regex:ne,indices:{bucket:1,path:2},postModify:g}];for(let ge=0;ge<se.length;ge++){const Ae=se[ge],Ee=Ae.regex.exec(e);if(Ee){const x=Ee[Ae.indices.bucket];let R=Ee[Ae.indices.path];R||(R=""),n=new An(x,R),Ae.postModify(n);break}}if(n==null)throw A6(e);return n}}class P6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(i,e,t){let n=1,a=null,l=null,c=!1,f=0;function m(){return f===2}let g=!1;function y(...U){g||(g=!0,e.apply(null,U))}function T(U){a=setTimeout(()=>{a=null,i(D,m())},U)}function I(){l&&clearTimeout(l)}function D(U,...ne){if(g){I();return}if(U){I(),y.call(null,U,...ne);return}if(m()||c){I(),y.call(null,U,...ne);return}n<64&&(n*=2);let se;f===1?(f=2,se=0):se=(n+Math.random())*1e3,T(se)}let F=!1;function B(U){F||(F=!0,I(),!g&&(a!==null?(U||(f=2),clearTimeout(a),T(0)):U||(f=1)))}return T(0),l=setTimeout(()=>{c=!0,B(!0)},t),B}function k6(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(i){return i!==void 0}function M6(i){return typeof i=="function"}function L6(i){return typeof i=="object"&&!Array.isArray(i)}function xp(i){return typeof i=="string"||i instanceof String}function NS(i){return zT()&&i instanceof Blob}function zT(){return typeof Blob<"u"}function Wy(i,e,t,n){if(n<e)throw eu(`Invalid value for '${i}'. Expected ${e} or greater.`);if(n>t)throw eu(`Invalid value for '${i}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(i,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${i}`}function aC(i){const e=encodeURIComponent;let t="?";for(const n in i)if(i.hasOwnProperty(n)){const a=e(n)+"="+e(i[n]);t=t+a+"&"}return t=t.slice(0,-1),t}var Ao;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Ao||(Ao={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(i,e){const t=i>=500&&i<600,a=[408,429].indexOf(i)!==-1,l=e.indexOf(i)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,t,n,a,l,c,f,m,g,y,T,I=!0,D=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=y,this.connectionFactory_=T,this.retry=I,this.isUsingEmulator=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,B)=>{this.resolve_=F,this.reject_=B,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new Zf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=f=>{const m=f.loaded,g=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const f=l.getErrorCode()===Ao.NO_ERROR,m=l.getStatus();if(!f||oC(m,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Ao.ABORT;n(!1,new Zf(!1,null,y));return}const g=this.successCodes_.indexOf(m)!==-1;n(!0,new Zf(g,l))})},t=(n,a)=>{const l=this.resolve_,c=this.reject_,f=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());V6(m)?l(m):l()}catch(m){c(m)}else if(f!==null){const m=BT();m.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,m)):c(m)}else if(a.canceled){const m=this.appDelete_?rC():nC();c(m)}else{const m=tC();c(m)}};this.canceled_?t(!1,new Zf(!1,null,!0)):this.backoffId_=O6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&k6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zf{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function j6(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function B6(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function z6(i,e){e&&(i["X-Firebase-GMPID"]=e)}function F6(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function q6(i,e,t,n,a,l,c=!0,f=!1){const m=aC(i.urlParams),g=i.url+m,y=Object.assign({},i.headers);return z6(y,e),j6(y,t),B6(y,l),F6(y,n),new U6(g,i.method,y,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,a,c,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function G6(...i){const e=H6();if(e!==void 0){const t=new e;for(let n=0;n<i.length;n++)t.append(i[n]);return t.getBlob()}else{if(zT())return new Blob(i);throw new Rt(yt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function K6(i,e,t){return i.webkitSlice?i.webkitSlice(e,t):i.mozSlice?i.mozSlice(e,t):i.slice?i.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(i){if(typeof atob>"u")throw D6("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class iy{constructor(e,t){this.data=e,this.contentType=t||null}}function lC(i,e){switch(i){case Ri.RAW:return new iy(uC(e));case Ri.BASE64:case Ri.BASE64URL:return new iy(cC(i,e));case Ri.DATA_URL:return new iy(Y6(e),W6(e))}throw BT()}function uC(i){const e=[];for(let t=0;t<i.length;t++){let n=i.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<i.length-1&&(i.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=n,c=i.charCodeAt(++t);n=65536|(l&1023)<<10|c&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function $6(i){let e;try{e=decodeURIComponent(i)}catch{throw Ih(Ri.DATA_URL,"Malformed data URL.")}return uC(e)}function cC(i,e){switch(i){case Ri.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw Ih(i,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Ri.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw Ih(i,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Q6(e)}catch(a){throw a.message.includes("polyfill")?a:Ih(i,"Invalid character found")}const n=new Uint8Array(t.length);for(let a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n}class hC{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ih(Ri.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=X6(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Y6(i){const e=new hC(i);return e.base64?cC(Ri.BASE64,e.rest):$6(e.rest)}function W6(i){return new hC(i).contentType}function X6(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,t){let n=0,a="";NS(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(NS(this.data_)){const n=this.data_,a=K6(n,e,t);return a===null?null:new ns(a)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new ns(n,!0)}}static getBlob(...e){if(zT()){const t=e.map(n=>n instanceof ns?n.data_:n);return new ns(G6.apply(null,t))}else{const t=e.map(c=>xp(c)?lC(Ri.RAW,c).data:c.data_);let n=0;t.forEach(c=>{n+=c.byteLength});const a=new Uint8Array(n);let l=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)a[l++]=c[f]}),new ns(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(i){let e;try{e=JSON.parse(i)}catch{return null}return L6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function Z6(i,e){const t=e.split("/").filter(n=>n.length>0).join("/");return i.length===0?t:i+"/"+t}function dC(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(i,e){return e}class On{constructor(e,t,n,a){this.server=e,this.local=t||e,this.writable=!!n,this.xform=a||e3}}let em=null;function t3(i){return!xp(i)||i.length<2?i:dC(i)}function Cp(){if(em)return em;const i=[];i.push(new On("bucket")),i.push(new On("generation")),i.push(new On("metageneration")),i.push(new On("name","fullPath",!0));function e(l,c){return t3(c)}const t=new On("name");t.xform=e,i.push(t);function n(l,c){return c!==void 0?Number(c):c}const a=new On("size");return a.xform=n,i.push(a),i.push(new On("timeCreated")),i.push(new On("updated")),i.push(new On("md5Hash",null,!0)),i.push(new On("cacheControl",null,!0)),i.push(new On("contentDisposition",null,!0)),i.push(new On("contentEncoding",null,!0)),i.push(new On("contentLanguage",null,!0)),i.push(new On("contentType",null,!0)),i.push(new On("metadata","customMetadata",!0)),em=i,em}function n3(i,e){function t(){const n=i.bucket,a=i.fullPath,l=new An(n,a);return e._makeStorageReference(l)}Object.defineProperty(i,"ref",{get:t})}function i3(i,e,t){const n={};n.type="file";const a=t.length;for(let l=0;l<a;l++){const c=t[l];n[c.local]=c.xform(n,e[c.server])}return n3(n,i),n}function fC(i,e,t){const n=FT(e);return n===null?null:i3(i,n,t)}function r3(i,e,t,n){const a=FT(e);if(a===null||!xp(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(g=>{const y=i.bucket,T=i.fullPath,I="/b/"+c(y)+"/o/"+c(T),D=Da(I,t,n),F=aC({alt:"media",token:g});return D+F})[0]}function qT(i,e){const t={},n=e.length;for(let a=0;a<n;a++){const l=e[a];l.writable&&(t[l.server]=i[l.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="prefixes",PS="items";function s3(i,e,t){const n={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[DS])for(const a of t[DS]){const l=a.replace(/\/$/,""),c=i._makeStorageReference(new An(e,l));n.prefixes.push(c)}if(t[PS])for(const a of t[PS]){const l=i._makeStorageReference(new An(e,a.name));n.items.push(l)}return n}function a3(i,e,t){const n=FT(t);return n===null?null:s3(i,e,n)}class vs{constructor(e,t,n,a){this.url=e,this.method=t,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(i){if(!i)throw BT()}function Np(i,e){function t(n,a){const l=fC(i,a,e);return Pr(l!==null),l}return t}function o3(i,e){function t(n,a){const l=a3(i,e,a);return Pr(l!==null),l}return t}function l3(i,e){function t(n,a){const l=fC(i,a,e);return Pr(l!==null),r3(l,a,i.host,i._protocol)}return t}function Lu(i){function e(t,n){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=I6():a=b6():t.getStatus()===402?a=w6(i.bucket):t.getStatus()===403?a=S6(i.path):a=n,a.status=t.getStatus(),a.serverResponse=n.serverResponse,a}return e}function Dp(i){const e=Lu(i);function t(n,a){let l=e(n,a);return n.getStatus()===404&&(l=E6(i.path)),l.serverResponse=a.serverResponse,l}return t}function mC(i,e,t){const n=e.fullServerUrl(),a=Da(n,i.host,i._protocol),l="GET",c=i.maxOperationRetryTime,f=new vs(a,l,Np(i,t),c);return f.errorHandler=Dp(e),f}function u3(i,e,t,n,a){const l={};e.isRoot?l.prefix="":l.prefix=e.path+"/",t.length>0&&(l.delimiter=t),n&&(l.pageToken=n),a&&(l.maxResults=a);const c=e.bucketOnlyServerUrl(),f=Da(c,i.host,i._protocol),m="GET",g=i.maxOperationRetryTime,y=new vs(f,m,o3(i,e.bucket),g);return y.urlParams=l,y.errorHandler=Lu(e),y}function c3(i,e,t){const n=e.fullServerUrl(),a=Da(n,i.host,i._protocol),l="GET",c=i.maxOperationRetryTime,f=new vs(a,l,l3(i,t),c);return f.errorHandler=Dp(e),f}function h3(i,e,t,n){const a=e.fullServerUrl(),l=Da(a,i.host,i._protocol),c="PATCH",f=qT(t,n),m={"Content-Type":"application/json; charset=utf-8"},g=i.maxOperationRetryTime,y=new vs(l,c,Np(i,n),g);return y.headers=m,y.body=f,y.errorHandler=Dp(e),y}function d3(i,e){const t=e.fullServerUrl(),n=Da(t,i.host,i._protocol),a="DELETE",l=i.maxOperationRetryTime;function c(m,g){}const f=new vs(n,a,c,l);return f.successCodes=[200,204],f.errorHandler=Dp(e),f}function f3(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function pC(i,e,t){const n=Object.assign({},t);return n.fullPath=i.path,n.size=e.size(),n.contentType||(n.contentType=f3(null,e)),n}function m3(i,e,t,n,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let se="";for(let ge=0;ge<2;ge++)se=se+Math.random().toString().slice(2);return se}const m=f();c["Content-Type"]="multipart/related; boundary="+m;const g=pC(e,n,a),y=qT(g,t),T="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,I=`\r
--`+m+"--",D=ns.getBlob(T,n,I);if(D===null)throw iC();const F={name:g.fullPath},B=Da(l,i.host,i._protocol),U="POST",ne=i.maxUploadRetryTime,ie=new vs(B,U,Np(i,t),ne);return ie.urlParams=F,ie.headers=c,ie.body=D.uploadData(),ie.errorHandler=Lu(e),ie}class Fm{constructor(e,t,n,a){this.current=e,this.total=t,this.finalized=!!n,this.metadata=a||null}}function HT(i,e){let t=null;try{t=i.getResponseHeader("X-Goog-Upload-Status")}catch{Pr(!1)}return Pr(!!t&&(e||["active"]).indexOf(t)!==-1),t}function p3(i,e,t,n,a){const l=e.bucketOnlyServerUrl(),c=pC(e,n,a),f={name:c.fullPath},m=Da(l,i.host,i._protocol),g="POST",y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},T=qT(c,t),I=i.maxUploadRetryTime;function D(B){HT(B);let U;try{U=B.getResponseHeader("X-Goog-Upload-URL")}catch{Pr(!1)}return Pr(xp(U)),U}const F=new vs(m,g,D,I);return F.urlParams=f,F.headers=y,F.body=T,F.errorHandler=Lu(e),F}function g3(i,e,t,n){const a={"X-Goog-Upload-Command":"query"};function l(g){const y=HT(g,["active","final"]);let T=null;try{T=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Pr(!1)}T||Pr(!1);const I=Number(T);return Pr(!isNaN(I)),new Fm(I,n.size(),y==="final")}const c="POST",f=i.maxUploadRetryTime,m=new vs(t,c,l,f);return m.headers=a,m.errorHandler=Lu(e),m}const OS=256*1024;function _3(i,e,t,n,a,l,c,f){const m=new Fm(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=n.size()),n.size()!==m.total)throw C6();const g=m.total-m.current;let y=g;a>0&&(y=Math.min(y,a));const T=m.current,I=T+y;let D="";y===0?D="finalize":g===y?D="upload, finalize":D="upload";const F={"X-Goog-Upload-Command":D,"X-Goog-Upload-Offset":`${m.current}`},B=n.slice(T,I);if(B===null)throw iC();function U(ge,Ae){const Ee=HT(ge,["active","final"]),x=m.current+y,R=n.size();let C;return Ee==="final"?C=Np(e,l)(ge,Ae):C=null,new Fm(x,R,Ee==="final",C)}const ne="POST",ie=e.maxUploadRetryTime,se=new vs(t,ne,U,ie);return se.headers=F,se.body=B.uploadData(),se.progressCallback=f||null,se.errorHandler=Lu(i),se}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3={STATE_CHANGED:"state_changed"},Mn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ry(i){switch(i){case"running":case"pausing":case"canceling":return Mn.RUNNING;case"paused":return Mn.PAUSED;case"success":return Mn.SUCCESS;case"canceled":return Mn.CANCELED;case"error":return Mn.ERROR;default:return Mn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,t,n){if(M6(e)||t!=null||n!=null)this.next=e,this.error=t??void 0,this.complete=n??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(i){return(...e)=>{Promise.resolve().then(()=>i(...e))}}class T3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ao.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ao.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ao.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,a,l){if(this.sent_)throw Zc("cannot .send() more than once");if(Ia(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Zc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class E3 extends T3{initXhr(){this.xhr_.responseType="text"}}function Sr(){return new E3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Cp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(yt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(oC(a.status,[]))if(l)a=tC();else{this.sleepTime=Math.max(this.sleepTime*2,T6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(yt.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,l)=>{this._resolve=a,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const n=p3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Sr,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const a=g3(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(a,Sr,t,n);this._request=l,l.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=OS*this._chunkMultiplier,t=new Fm(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,l)=>{let c;try{c=_3(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){this._error=m,this._transition("error");return}const f=this._ref.storage._makeRequest(c,Sr,a,l,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){OS*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=mC(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,Sr,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=m3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Sr,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=nC(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=ry(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,a){const l=new v3(t||void 0,n||void 0,a||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(ry(this._state)){case Mn.SUCCESS:Bl(this._resolve.bind(null,this.snapshot))();break;case Mn.CANCELED:case Mn.ERROR:const t=this._reject;Bl(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ry(this._state)){case Mn.RUNNING:case Mn.PAUSED:e.next&&Bl(e.next.bind(e,this.snapshot))();break;case Mn.SUCCESS:e.complete&&Bl(e.complete.bind(e))();break;case Mn.CANCELED:case Mn.ERROR:e.error&&Bl(e.error.bind(e,this._error))();break;default:e.error&&Bl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t){this._service=e,t instanceof An?this._location=t:this._location=An.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new jo(e,t)}get root(){const e=new An(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dC(this._location.path)}get storage(){return this._service}get parent(){const e=J6(this._location.path);if(e===null)return null;const t=new An(this._location.bucket,e);return new jo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw sC(e)}}function w3(i,e,t){return i._throwIfRoot("uploadBytesResumable"),new gC(i,new ns(e),t)}function b3(i){const e={prefixes:[],items:[]};return _C(i,e).then(()=>e)}async function _C(i,e,t){const a=await yC(i,{pageToken:t});e.prefixes.push(...a.prefixes),e.items.push(...a.items),a.nextPageToken!=null&&await _C(i,e,a.nextPageToken)}function yC(i,e){e!=null&&typeof e.maxResults=="number"&&Wy("options.maxResults",1,1e3,e.maxResults);const t=e||{},n=u3(i.storage,i._location,"/",t.pageToken,t.maxResults);return i.storage.makeRequestWithTokens(n,Sr)}function I3(i){i._throwIfRoot("getMetadata");const e=mC(i.storage,i._location,Cp());return i.storage.makeRequestWithTokens(e,Sr)}function S3(i,e){i._throwIfRoot("updateMetadata");const t=h3(i.storage,i._location,e,Cp());return i.storage.makeRequestWithTokens(t,Sr)}function A3(i){i._throwIfRoot("getDownloadURL");const e=c3(i.storage,i._location,Cp());return i.storage.makeRequestWithTokens(e,Sr).then(t=>{if(t===null)throw N6();return t})}function R3(i){i._throwIfRoot("deleteObject");const e=d3(i.storage,i._location);return i.storage.makeRequestWithTokens(e,Sr)}function vC(i,e){const t=Z6(i._location.path,e),n=new An(i._location.bucket,t);return new jo(i.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(i){return/^[A-Za-z]+:\/\//.test(i)}function C3(i,e){return new jo(i,e)}function TC(i,e){if(i instanceof GT){const t=i;if(t._bucket==null)throw x6();const n=new jo(t,t._bucket);return e!=null?TC(n,e):n}else return e!==void 0?vC(i,e):i}function N3(i,e){if(e&&x3(e)){if(i instanceof GT)return C3(i,e);throw eu("To use ref(service, url), the first argument must be a Storage instance.")}else return TC(i,e)}function kS(i,e){const t=e==null?void 0:e[eC];return t==null?null:An.makeFromBucketSpec(t,i)}function D3(i,e,t,n={}){i.host=`${e}:${t}`;const a=Ia(e);a&&(iv(`https://${i.host}/b`),rv("Storage",!0)),i._isUsingEmulator=!0,i._protocol=a?"https":"http";const{mockUserToken:l}=n;l&&(i._overrideAuthToken=typeof l=="string"?l:GS(l,i.app.options.projectId))}class GT{constructor(e,t,n,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=Z1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=y6,this._maxUploadRetryTime=v6,this._requests=new Set,a!=null?this._bucket=An.makeFromBucketSpec(a,this._host):this._bucket=kS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=An.makeFromBucketSpec(this._url,e):this._bucket=kS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Wy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Wy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(_t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jo(this,e)}_makeRequest(e,t,n,a,l=!0){if(this._deleted)return new P6(rC());{const c=q6(e,this._appId,n,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,a).getPromise()}}const VS="@firebase/storage",MS="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3="storage";function O3(i,e,t){return i=Ie(i),w3(i,e,t)}function k3(i){return i=Ie(i),I3(i)}function V3(i,e){return i=Ie(i),S3(i,e)}function M3(i,e){return i=Ie(i),yC(i,e)}function L3(i){return i=Ie(i),b3(i)}function U3(i){return i=Ie(i),A3(i)}function j3(i){return i=Ie(i),R3(i)}function LS(i,e){return i=Ie(i),N3(i,e)}function B3(i,e){return vC(i,e)}function z3(i,e,t,n={}){D3(i,e,t,n)}function F3(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),n=i.getProvider("auth-internal"),a=i.getProvider("app-check-internal");return new GT(t,n,a,e,ds)}function q3(){ls(new Ci(P3,F3,"PUBLIC").setMultipleInstances(!0)),ci(VS,MS,""),ci(VS,MS,"esm2020")}q3();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new tm(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(n=>{if(e)return e(new tm(n,this,this._ref))},t)}on(e,t,n,a){let l;return t&&(typeof t=="function"?l=c=>t(new tm(c,this,this._ref)):l={next:t.next?c=>t.next(new tm(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,l,n||void 0,a||void 0)}}class jS{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new as(e,this._service))}get items(){return this._delegate.items.map(e=>new as(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=B3(this._delegate,e);return new as(t,this.storage)}get root(){return new as(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new as(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new US(O3(this._delegate,e,t),this)}putString(e,t=Ri.RAW,n){this._throwIfRoot("putString");const a=lC(t,e),l={...n};return l.contentType==null&&a.contentType!=null&&(l.contentType=a.contentType),new US(new gC(this._delegate,new ns(a.data,!0),l),this)}listAll(){return L3(this._delegate).then(e=>new jS(e,this.storage))}list(e){return M3(this._delegate,e||void 0).then(t=>new jS(t,this.storage))}getMetadata(){return k3(this._delegate)}updateMetadata(e){return V3(this._delegate,e)}getDownloadURL(){return U3(this._delegate)}delete(){return this._throwIfRoot("delete"),j3(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw sC(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(BS(e))throw eu("ref() expected a child path but got a URL, use refFromURL instead.");return new as(LS(this._delegate,e),this)}refFromURL(e){if(!BS(e))throw eu("refFromURL() expected a full URL but got a child path, use ref() instead.");try{An.makeFromUrl(e,this._delegate.host)}catch{throw eu("refFromUrl() expected a valid full URL but got an invalid one.")}return new as(LS(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,n={}){z3(this._delegate,e,t,n)}}function BS(i){return/^[A-Za-z]+:\/\//.test(i)}const H3="@firebase/storage-compat",G3="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="storage-compat";function Q3(i,{instanceIdentifier:e}){const t=i.getProvider("app-compat").getImmediate(),n=i.getProvider("storage").getImmediate({identifier:e});return new EC(t,n)}function $3(i){const e={TaskState:Mn,TaskEvent:y3,StringFormat:Ri,Storage:EC,Reference:as};i.INTERNAL.registerComponent(new Ci(K3,Q3,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),i.registerVersion(H3,G3)}$3(Yi);const Y3={VITE_API_KEY:"AIzaSyBWwjWC4Np0ko2cqkpLRxYXTNQr_lJkS6M",VITE_APP_ID:"1:124464215211:web:996cfead596a09d05f73ee",VITE_AUTH_DOMAIN:"gram-d8166.firebaseapp.com",VITE_MESSAGING_SENDER_ID:"124464215211",VITE_PROJECT_ID:"gram-d8166",VITE_STORAGE_BUCKET:"gram-d8166.firebasestorage.app"},fo=Y3;if(!fo){const i=`
  CRITICAL ERROR: Firebase configuration is missing.
  This application requires environment variables to connect to Firebase.

  Please follow these steps:
  1. Create a file named '.env.local' in the root directory of this project.
  2. Open the file and add your Firebase project credentials like this:
     VITE_API_KEY="AIzaSy..."
     VITE_AUTH_DOMAIN="your-project.firebaseapp.com"
     VITE_PROJECT_ID="your-project-id"
     VITE_STORAGE_BUCKET="your-project.appspot.com"
     VITE_MESSAGING_SENDER_ID="1234567890"
     VITE_APP_ID="1:1234567890:web:abcdef12345"
  3. After saving the file, restart the development server.
  `,e=document.getElementById("root");throw e&&(e.innerHTML=`
      <div style="padding: 2rem; font-family: 'Inter', sans-serif; background-color: #FFFBEB; color: #92400E; border: 1px solid #FBBF24; margin: 2rem; border-radius: 0.5rem;">
        <h1 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem;">Firebase Configuration Error</h1>
        <p style="margin-bottom: 1rem;">The connection to the database failed because the Firebase API keys are missing.</p>
        <p style="margin-bottom: 1rem;">Please follow the instructions in the developer console to set up your project credentials.</p>
        <code style="background-color: #FEF3C7; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-family: monospace;">.env.local</code>
      </div>
    `),console.error(i),new Error("Firebase configuration missing. See console for instructions.")}const W3={apiKey:fo.VITE_API_KEY,authDomain:fo.VITE_AUTH_DOMAIN,projectId:fo.VITE_PROJECT_ID,storageBucket:fo.VITE_STORAGE_BUCKET,messagingSenderId:fo.VITE_MESSAGING_SENDER_ID,appId:fo.VITE_APP_ID};Yi.apps.length||Yi.initializeApp(W3);const Xy=Yi.auth(),It=Yi.firestore(),sy=Yi.storage(),X3=()=>{const[i,e]=_e.useState(""),[t,n]=_e.useState(""),[a,l]=_e.useState(""),[c,f]=_e.useState(!1),m=async g=>{g.preventDefault(),f(!0),l("");try{await BA(Xy,i,t)}catch(y){switch(y.code){case"auth/invalid-email":l("Invalid email address format.");break;case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":l("Invalid email or password.");break;default:l("An unexpected error occurred. Please try again."),console.error(y)}}finally{f(!1)}};return w.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:w.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-white rounded-xl shadow-lg",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-indigo-600",viewBox:"0 0 20 20",fill:"currentColor",children:w.jsx("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L9 9.61v5.07a1 1 0 001.527.854l4-2.222a1 1 0 00.473-.854V9.61l3.71-2.06a1 1 0 000-1.84l-7-3zM10 8.39L3.71 5.33l6.29-2.94 6.29 2.94L10 8.39zM11 11.07v2.88l2 1.11v-2.88l-2-1.11z"})}),w.jsx("h1",{className:"mt-4 text-3xl font-bold text-gray-900",children:"Vidya Gram"}),w.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Admin Portal"})]}),w.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),w.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email Address",value:i,onChange:g=>e(g.target.value)})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password-input",className:"sr-only",children:"Password"}),w.jsx("input",{id:"password-input",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:t,onChange:g=>n(g.target.value)})]})]}),a&&w.jsx("p",{className:"text-sm text-center text-red-500",children:a}),w.jsx("div",{children:w.jsx("button",{type:"submit",disabled:c,className:"relative flex justify-center w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md group hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:c?"Signing in...":"Sign in"})})]})]})})};var qi=(i=>(i.Dashboard="DASHBOARD",i.Students="STUDENTS",i.Batches="BATCHES",i.Payments="PAYMENTS",i))(qi||{});const J3=({onDataLoaded:i})=>{const[e,t]=_e.useState(null),[n,a]=_e.useState(!1),[l,c]=_e.useState(null),f=_e.useCallback(g=>{var I;const y=(I=g.target.files)==null?void 0:I[0];if(!y)return;t(y.name),a(!0),c(null);const T=new FileReader;T.onload=D=>{var F;try{const B=(F=D.target)==null?void 0:F.result,U=XLSX.read(B,{type:"binary"}),ne=U.SheetNames[0],ie=U.Sheets[ne],se=XLSX.utils.sheet_to_json(ie);i(se)}catch(B){console.error("Error parsing Excel file:",B),c("Failed to parse the Excel file. Please check the format.")}finally{a(!1)}},T.onerror=()=>{c("Failed to read the file."),a(!1)},T.readAsBinaryString(y)},[i]),m=()=>{const g=[{"Roll No":101,Name:"Aarav Sharma",Father:"Rajesh Sharma",Mother:"Priya Sharma",Phone:"9876543210","Emergency Number":"9876543211",Gender:"Male",Batch:"A1",Address:"123, Main Street, Delhi","Total Fees":5e4,"Amount Paid":1e4,"Full Paid":"No","Payment Method":"UPI","Payment Date":"2023-08-01",Mode:"Monthly",Remarks:"First installment"}],y=XLSX.utils.json_to_sheet(g),T=XLSX.utils.book_new();XLSX.utils.book_append_sheet(T,y,"Students"),XLSX.writeFile(T,"VidyaGram_Demo_Sheet.xlsx")};return w.jsxs("div",{children:[w.jsx("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:w.jsx("div",{className:"flex items-center justify-center w-full px-6 py-10 border-2 border-gray-300 border-dashed rounded-md",children:w.jsxs("div",{className:"space-y-1 text-center",children:[w.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:w.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),w.jsxs("div",{className:"flex text-sm text-gray-600",children:[w.jsx("span",{className:"text-indigo-600",children:"Upload a file"}),w.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:".xlsx, .xls",onChange:f}),w.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),w.jsx("p",{className:"text-xs text-gray-500",children:"XLSX, XLS up to 10MB"})]})})}),w.jsx("div",{className:"text-center mt-4",children:w.jsx("button",{type:"button",onClick:m,className:"text-sm font-medium text-indigo-600 hover:text-indigo-500 hover:underline",children:"Download Demo Excel Format"})}),n&&w.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Processing file..."}),e&&!n&&w.jsxs("p",{className:"mt-2 text-sm text-green-600",children:["File loaded: ",e]}),l&&w.jsx("p",{className:"mt-2 text-sm text-red-600",children:l})]})},Z3=({students:i,onClose:e})=>{const t=["Roll No","Name","Father","Mother","Phone","Emergency Number","Gender","Batch","Address","Total Fees","Total Paid","Fees Remaining","Full Paid","Mode","Remarks","imageUrl"],[n,a]=_e.useState(new Set(t)),l=m=>{a(g=>{const y=new Set(g);return y.has(m)?y.delete(m):y.add(m),y})},c=m=>{a(m?new Set(t):new Set)},f=()=>{if(n.size===0){alert("Please select at least one column to export.");return}const m=I=>(I.payments||[]).reduce((D,F)=>D+F.amount,0),g=i.map(I=>{const D=m(I),F=I["Total Fees"]-D,B={...I,"Total Paid":D,"Fees Remaining":F>0&&!I["Full Paid"]?F:0},U={};return n.forEach(ne=>{U[ne]=B[ne]}),U}),y=XLSX.utils.json_to_sheet(g),T=XLSX.utils.book_new();XLSX.utils.book_append_sheet(T,y,"Students"),XLSX.writeFile(T,`student_data_${new Date().toISOString().slice(0,10)}.xlsx`),e()};return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Export Student Data"}),w.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select columns for export."}),w.jsxs("div",{className:"mb-4 flex gap-4",children:[w.jsx("button",{onClick:()=>c(!0),className:"text-sm text-indigo-600 hover:underline",children:"Select All"}),w.jsx("button",{onClick:()=>c(!1),className:"text-sm text-indigo-600 hover:underline",children:"Deselect All"})]}),w.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-60 overflow-y-auto border p-2 rounded-md",children:t.map(m=>w.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[w.jsx("input",{type:"checkbox",checked:n.has(m),onChange:()=>l(m),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),w.jsx("span",{children:m})]},m))}),w.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[w.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),w.jsx("button",{onClick:f,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Export"})]})]})})},ej=({students:i,onEditStudent:e,onCreateBatch:t,onDeleteStudent:n,onRecordPayment:a})=>{const[l,c]=_e.useState(""),[f,m]=_e.useState(new Set),[g,y]=_e.useState(!1),[T,I]=_e.useState(!1),[D,F]=_e.useState(""),[B,U]=_e.useState(null),[ne,ie]=_e.useState("desc"),se=_e.useMemo(()=>{if(!l.trim())return i;const A=l.toLowerCase().trim();return i.filter(De=>String(De.Name??"").toLowerCase().includes(A)||String(De["Roll No"]??"").toLowerCase().includes(A)||String(De.Phone??"").toLowerCase().includes(A))},[i,l]),ge=A=>{m(De=>{const Qe=new Set(De);return Qe.has(A)?Qe.delete(A):Qe.add(A),Qe})},Ae=A=>{A.target.checked?m(new Set(se.map(De=>De.id))):m(new Set)},Ee=()=>{f.size>0?y(!0):alert("Please select students to form a batch.")},x=()=>{D.trim()&&f.size>0&&(t(D,Array.from(f)),F(""),m(new Set),y(!1))},R=A=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(A),C=()=>{ie(A=>A==="desc"?"asc":"desc")},V=({label:A,value:De})=>w.jsxs("div",{children:[w.jsx("p",{className:"text-xs text-gray-500",children:A}),w.jsx("p",{className:"text-sm font-medium text-gray-800",children:De||"N/A"})]}),O=({student:A})=>{const De=(A.payments||[]).reduce((ue,ae)=>ue+ae.amount,0);if(A["Full Paid"]||De>=A["Total Fees"])return w.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"PAID"});const $=A["Total Fees"]-De;return w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-semibold text-red-600",children:R($)}),w.jsx("button",{onClick:ue=>{ue.stopPropagation(),a(A)},title:"Record Payment",className:"text-blue-500 hover:text-blue-700",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[w.jsx("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"}),w.jsx("path",{fillRule:"evenodd",d:"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z",clipRule:"evenodd"})]})})]})},M=A=>(A.payments||[]).reduce((De,Qe)=>De+Qe.amount,0);return w.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[w.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Student List"}),w.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",se.length," of ",i.length," students"]})]}),w.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto",children:[w.jsxs("div",{className:"relative w-full sm:w-64",children:[w.jsx("input",{type:"text",placeholder:"Search by name, roll, or phone...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",value:l,onChange:A=>c(A.target.value)}),l&&w.jsx("button",{onClick:()=>c(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:w.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]}),w.jsx("button",{onClick:Ee,disabled:f.size===0,className:"w-full sm:w-auto px-4 py-2 bg-indigo-600 text-white rounded-md disabled:bg-indigo-300 hover:bg-indigo-700 transition-colors",children:"Create Batch"}),w.jsx("button",{onClick:()=>I(!0),className:"w-full sm:w-auto px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Export Data"})]})]}),w.jsxs("div",{className:"overflow-x-auto",children:[w.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[w.jsx("thead",{className:"bg-gray-50",children:w.jsxs("tr",{children:[w.jsx("th",{scope:"col",className:"p-4",children:w.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500",onChange:Ae,checked:f.size>0&&f.size===se.length})}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roll No"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount Paid"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dues"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),w.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:se.map(A=>{const De=B===A.id,Qe=_e.useMemo(()=>[...A.payments||[]].sort(($,ue)=>{const ae=new Date($.date).getTime(),ve=new Date(ue.date).getTime();return ne==="desc"?ve-ae:ae-ve}),[A.payments,ne]);return w.jsxs(FS.Fragment,{children:[w.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>U(De?null:A.id),children:[w.jsx("td",{className:"p-4",onClick:$=>$.stopPropagation(),children:w.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500",checked:f.has(A.id),onChange:()=>ge(A.id)})}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A["Roll No"]}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.Name}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.Phone}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:R(M(A))}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:w.jsx(O,{student:A})}),w.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",onClick:$=>$.stopPropagation(),children:[w.jsx("button",{onClick:()=>e(A),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),w.jsx("button",{onClick:()=>n(A),className:"ml-4 text-red-600 hover:text-red-900",children:"Delete"})]})]}),De&&w.jsx("tr",{className:"bg-gray-50",children:w.jsx("td",{colSpan:7,className:"p-4",children:w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex gap-6",children:[w.jsx("div",{className:"flex-shrink-0",children:A.imageUrl?w.jsx("img",{src:A.imageUrl,alt:A.Name,className:"h-24 w-24 rounded-full object-cover shadow-md"}):w.jsx("div",{className:"h-24 w-24 rounded-full bg-gray-200 flex items-center justify-center shadow-md",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:w.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})}),w.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 flex-1",children:[w.jsx(V,{label:"Roll No",value:A["Roll No"]}),w.jsx(V,{label:"Gender",value:A.Gender}),w.jsx(V,{label:"Batch",value:A.Batch}),w.jsx(V,{label:"Payment Mode",value:A.Mode}),w.jsx(V,{label:"Address",value:A.Address}),w.jsx(V,{label:"Father's Name",value:A.Father}),w.jsx(V,{label:"Mother's Name",value:A.Mother}),w.jsx(V,{label:"Emergency Number",value:A["Emergency Number"]}),w.jsx(V,{label:"Total Fees",value:R(A["Total Fees"])}),w.jsx("div",{className:"col-span-full",children:w.jsx(V,{label:"Remarks",value:A.Remarks})})]})]}),w.jsx("div",{className:"pt-4 mt-4 border-t border-gray-200",children:w.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-inner",children:[w.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-3 gap-2",children:[w.jsx("h4",{className:"text-md font-semibold text-gray-700",children:"Payment History"}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("p",{className:"text-xs font-medium text-gray-600",children:["Total Paid: ",w.jsx("span",{className:"font-bold text-green-700",children:R(M(A))})]}),w.jsxs("p",{className:"text-xs font-medium text-gray-600",children:["Fees Remaining: ",w.jsx("span",{className:"font-bold text-red-700",children:R(Math.max(0,A["Total Fees"]-M(A)))})]}),w.jsx("button",{onClick:()=>a(A),className:"px-3 py-1 text-xs font-medium text-white bg-indigo-600 rounded-full hover:bg-indigo-700",children:"Add Payment"})]})]}),Qe.length>0?w.jsxs("table",{className:"min-w-full text-sm",children:[w.jsx("thead",{className:"bg-gray-100",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:w.jsxs("button",{onClick:C,className:"flex items-center gap-1 hover:text-gray-700",children:["Date",w.jsx("span",{className:"text-indigo-600",children:ne==="desc"?"":""})]})}),w.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Amount"}),w.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Method"}),w.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Remarks"})]})}),w.jsx("tbody",{className:"divide-y divide-gray-100",children:Qe.map($=>w.jsxs("tr",{children:[w.jsx("td",{className:"px-4 py-2",children:$.date}),w.jsx("td",{className:"px-4 py-2",children:R($.amount)}),w.jsx("td",{className:"px-4 py-2",children:$.method}),w.jsx("td",{className:"px-4 py-2",children:$.remarks})]},$.id))})]}):w.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:"No payments recorded for this student."})]})})]})})})]},`${A.id}-${(A.payments||[]).length}`)})})]}),se.length===0&&w.jsx("p",{className:"text-center py-4 text-gray-500",children:"No students found."})]}),g&&w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-center",children:w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[w.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Create New Batch"}),w.jsx("input",{type:"text",placeholder:"Enter batch name",value:D,onChange:A=>F(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),w.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[f.size," student(s) selected."]}),w.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[w.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),w.jsx("button",{onClick:x,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Create"})]})]})}),T&&w.jsx(Z3,{students:se,onClose:()=>I(!1)})]})},tj=({student:i,onClose:e,onSave:t})=>{const[n,a]=_e.useState(i),[l,c]=_e.useState(null),[f,m]=_e.useState(i.imageUrl||null);_e.useEffect(()=>{a(i),m(i.imageUrl||null),c(null)},[i]);const g=B=>{const{name:U,value:ne,type:ie}=B.target;if(ie==="checkbox"){const{checked:ge}=B.target;a(Ae=>({...Ae,[U]:ge}));return}const se=U==="Total Fees";a(ge=>({...ge,[U]:ie==="number"&&se?parseFloat(ne)||0:ne}))},y=B=>{var ne;const U=(ne=B.target.files)==null?void 0:ne[0];if(U){c(U);const ie=new FileReader;ie.onloadend=()=>{m(ie.result)},ie.readAsDataURL(U)}},T=B=>{B.preventDefault(),t(n,l||void 0)},I=_e.useMemo(()=>(n.payments||[]).reduce((B,U)=>B+U.amount,0),[n.payments]),D=_e.useMemo(()=>(n["Total Fees"]||0)-I,[n,I]),F=B=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(B);return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:w.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-4xl max-h-full overflow-y-auto",children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Edit Student Profile"}),w.jsxs("form",{onSubmit:T,className:"space-y-6",children:[w.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[w.jsxs("div",{className:"md:w-1/3 space-y-4",children:[w.jsxs("fieldset",{children:[w.jsx("legend",{className:"text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4",children:"Profile Photo"}),w.jsxs("div",{className:"flex flex-col items-center",children:[f?w.jsx("img",{src:f,alt:"Student",className:"h-32 w-32 rounded-full object-cover shadow-lg mb-4"}):w.jsx("div",{className:"h-32 w-32 rounded-full bg-gray-200 flex items-center justify-center shadow-lg mb-4",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:w.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),w.jsxs("label",{htmlFor:"photo-upload",className:"cursor-pointer px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:[w.jsx("span",{children:"Change Photo"}),w.jsx("input",{id:"photo-upload",name:"photo-upload",type:"file",className:"sr-only",accept:"image/*",onChange:y})]})]})]}),w.jsxs("div",{className:"text-center md:text-left",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Roll No"}),w.jsx("input",{type:"text",name:"Roll No",value:n["Roll No"],onChange:g,className:"mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm focus:outline-none sm:text-sm",readOnly:!0})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),w.jsx("input",{type:"text",name:"Name",value:n.Name,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),w.jsx("div",{className:"md:w-2/3",children:w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),w.jsxs("select",{name:"Gender",value:n.Gender,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[w.jsx("option",{children:"Male"}),w.jsx("option",{children:"Female"}),w.jsx("option",{children:"Other"})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Batch"}),w.jsx("input",{type:"text",name:"Batch",value:n.Batch,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Father"}),w.jsx("input",{type:"text",name:"Father",value:n.Father||"",onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mother"}),w.jsx("input",{type:"text",name:"Mother",value:n.Mother||"",onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),w.jsx("input",{type:"tel",name:"Phone",value:n.Phone,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Emergency Number"}),w.jsx("input",{type:"tel",name:"Emergency Number",value:n["Emergency Number"]||"",onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),w.jsxs("div",{className:"md:col-span-2",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),w.jsx("input",{type:"text",name:"Address",value:n.Address||"",onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]})})]}),w.jsxs("fieldset",{children:[w.jsx("legend",{className:"text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4",children:"Payment Details"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Fees"}),w.jsx("input",{type:"number",name:"Total Fees",value:n["Total Fees"]||"",onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 50000"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Mode"}),w.jsxs("select",{name:"Mode",value:n.Mode||"",onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[w.jsx("option",{value:"",children:"Not Specified"}),w.jsx("option",{children:"Monthly"}),w.jsx("option",{children:"One Time"})]})]}),w.jsxs("div",{className:"md:col-span-2",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Paid"}),w.jsx("div",{className:"mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm sm:text-sm",children:F(I)})]}),w.jsx("div",{className:"md:col-span-2",children:w.jsxs("div",{className:"p-3 bg-gray-50 rounded-md text-center",children:[w.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Remaining Fees: "}),w.jsx("span",{className:`font-bold ${D>0?"text-red-600":"text-green-600"}`,children:F(D)})]})}),w.jsxs("div",{className:"flex items-center gap-2 mt-2 md:col-span-2",children:[w.jsx("input",{id:"full-paid",name:"Full Paid",type:"checkbox",checked:n["Full Paid"]??!1,onChange:g,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"full-paid",className:"text-sm font-medium text-gray-700",children:"Mark as Full Paid"}),w.jsx("p",{className:"text-xs text-gray-500",children:"Overrides calculated status. Use for discounts or scholarships."})]})]})]}),w.jsxs("div",{className:"mt-4",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Student Remarks"}),w.jsx("textarea",{name:"Remarks",value:n.Remarks||"",onChange:g,rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Add any general remarks for the student here."})]})]}),w.jsxs("fieldset",{className:"mt-6",children:[w.jsx("legend",{className:"text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2 mb-4",children:"Transaction History"}),w.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-md bg-gray-50",children:(n.payments||[]).length>0?w.jsxs("table",{className:"min-w-full text-sm",children:[w.jsx("thead",{className:"bg-gray-100 sticky top-0",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:"Date"}),w.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:"Amount"}),w.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:"Method"}),w.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:"Remarks"})]})}),w.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:[...n.payments].sort((B,U)=>new Date(U.date).getTime()-new Date(B.date).getTime()).map(B=>w.jsxs("tr",{children:[w.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:B.date}),w.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:F(B.amount)}),w.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:B.method}),w.jsx("td",{className:"px-4 py-2",children:B.remarks})]},B.id))})]}):w.jsx("p",{className:"text-center text-gray-500 py-6",children:"No payment history found."})})]}),w.jsxs("div",{className:"flex justify-end gap-4 pt-8 border-t mt-8",children:[w.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),w.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save Changes"})]})]})]})})},ia=({title:i,value:e})=>w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",children:[w.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:i}),w.jsx("p",{className:"mt-2 text-3xl font-semibold text-gray-900",children:e})]}),nj=({batches:i,students:e,onDeleteBatch:t,onAddWarden:n,onRemoveWarden:a,onAssignStudents:l})=>{const[c,f]=_e.useState(null),[m,g]=_e.useState(null),[y,T]=_e.useState(!1),[I,D]=_e.useState(null),[F,B]=_e.useState(""),[U,ne]=_e.useState(!1),[ie,se]=_e.useState(null),[ge,Ae]=_e.useState(new Set),Ee=_e.useMemo(()=>new Map(e.map(ae=>[ae.id,ae])),[e]),x=ae=>Ee.get(ae),R=ae=>{f(ve=>ve===ae?null:ae)},C=ae=>g(ae),V=()=>{m&&(t(m.id),g(null))},O=(ae,ve)=>{D({batch:ae,gender:ve}),B(""),T(!0)},M=()=>{F&&I&&n(I.batch.id,F),T(!1),D(null)},A=(ae,ve)=>{se({batch:ae,warden:ve}),Ae(new Set(ve.assignedStudentIds)),ne(!0)},De=ae=>{Ae(ve=>{const Pe=new Set(ve);return Pe.has(ae)?Pe.delete(ae):Pe.add(ae),Pe})},Qe=()=>{ie&&l(ie.batch.id,ie.warden.wardenStudentId,Array.from(ge)),ne(!1),se(null)},$=()=>{if(!y||!I)return null;const{batch:ae,gender:ve}=I,Pe=new Set(ae.wardens.map(X=>X.wardenStudentId)),P=ae.studentIds.map(X=>x(X)).filter(X=>!!(X&&X.Gender===ve&&!Pe.has(X.id)));return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:w.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[w.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Select ",ve," Warden for ",ae.name]}),w.jsxs("select",{value:F,onChange:X=>B(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500",children:[w.jsx("option",{value:"",children:"-- Select a Student --"}),P.map(X=>w.jsxs("option",{value:X.id,children:[X.Name," (Roll: ",X["Roll No"],")"]},X.id))]}),P.length===0&&w.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["No eligible ",ve.toLowerCase()," students available in this batch."]}),w.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[w.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),w.jsx("button",{onClick:M,disabled:!F,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-300",children:"Add Warden"})]})]})})},ue=()=>{if(!U||!ie)return null;const{batch:ae,warden:ve}=ie,Pe=x(ve.wardenStudentId),P=new Set(ae.wardens.map(Y=>Y.wardenStudentId)),X=new Set(ae.wardens.flatMap(Y=>Y.wardenStudentId===ve.wardenStudentId?[]:Y.assignedStudentIds)),he=ae.studentIds.map(Y=>x(Y)).filter(Y=>!!(Y&&!P.has(Y.id)&&!X.has(Y.id)));return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:w.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[w.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Assign Students to ",Pe==null?void 0:Pe.Name]}),w.jsxs("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-md p-2 space-y-2",children:[he.map(Y=>w.jsxs("div",{className:"flex items-center",children:[w.jsx("input",{type:"checkbox",id:`student-${Y.id}`,checked:ge.has(Y.id),onChange:()=>De(Y.id),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),w.jsxs("label",{htmlFor:`student-${Y.id}`,className:"ml-3 text-sm text-gray-700",children:[Y.Name," (Roll: ",Y["Roll No"],")"]})]},Y.id)),he.length===0&&w.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No students available for assignment."})]}),w.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[ge.size," student(s) selected."]}),w.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[w.jsx("button",{onClick:()=>ne(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),w.jsx("button",{onClick:Qe,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save Assignments"})]})]})})};return w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[w.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Batch Management"}),i.length===0?w.jsx("p",{className:"text-gray-500",children:"No batches created yet. Go to the Students tab to select students and create a batch."}):w.jsx("div",{className:"space-y-4",children:i.map(ae=>w.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[w.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer hover:bg-gray-50",onClick:()=>R(ae.id),children:[w.jsxs("div",{children:[w.jsx("h3",{className:"font-semibold text-lg text-indigo-700",children:ae.name}),w.jsxs("p",{className:"text-sm text-gray-500",children:[ae.studentIds.length," members"]})]}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("button",{onClick:ve=>{ve.stopPropagation(),C(ae)},className:"text-red-500 hover:text-red-700 font-medium text-sm",children:"Delete"}),w.jsx("svg",{className:`w-5 h-5 text-gray-500 transform transition-transform ${c===ae.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})]}),c===ae.id&&w.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-6",children:[w.jsxs("div",{children:[w.jsx("h4",{className:"text-md font-medium text-gray-600 mb-2",children:"Members:"}),w.jsx("ul",{className:"divide-y divide-gray-100 max-h-40 overflow-y-auto",children:ae.studentIds.map(ve=>x(ve)).filter(Boolean).map(ve=>w.jsxs("li",{className:"py-2 flex justify-between items-center",children:[w.jsx("span",{children:ve.Name}),w.jsxs("span",{className:"text-sm text-gray-500",children:["Roll: ",ve["Roll No"]]})]},ve.id))})]}),w.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[w.jsxs("div",{className:"flex justify-between items-center mb-3",children:[w.jsx("h4",{className:"text-md font-semibold text-gray-700",children:"Warden Management"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>O(ae,"Female"),className:"px-3 py-1 text-xs font-medium text-pink-700 bg-pink-100 rounded-full hover:bg-pink-200",children:"Add Girl Warden"}),w.jsx("button",{onClick:()=>O(ae,"Male"),className:"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-full hover:bg-blue-200",children:"Add Boy Warden"})]})]}),w.jsxs("div",{className:"space-y-3",children:[ae.wardens.map(ve=>{const Pe=x(ve.wardenStudentId);return Pe?w.jsxs("div",{className:"p-3 bg-gray-50 rounded-md",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsxs("p",{className:"font-semibold text-gray-800",children:[Pe.Name," ",w.jsx("span",{className:"text-xs text-gray-500",children:"(Warden)"})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("button",{onClick:()=>A(ae,ve),className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Assign Students"}),w.jsx("button",{onClick:()=>a(ae.id,ve.wardenStudentId),className:"text-sm text-red-500 hover:text-red-700",children:"Remove"})]})]}),w.jsxs("ul",{className:"mt-2 pl-4 text-sm text-gray-600 list-disc",children:[ve.assignedStudentIds.map(P=>x(P)).filter(Boolean).map(P=>w.jsx("li",{children:P.Name},P.id)),ve.assignedStudentIds.length===0&&w.jsx("li",{className:"list-none text-xs text-gray-400",children:"No students assigned."})]})]},ve.wardenStudentId):null}),ae.wardens.length===0&&w.jsx("p",{className:"text-sm text-gray-400",children:"No wardens assigned to this batch."})]})]})]})]},ae.id))})]}),m&&w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Deletion"}),w.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:['Are you sure you want to delete the batch "',m.name,'"? This will also delete all ',m.studentIds.length," students in this batch. This action cannot be undone."]}),w.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[w.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),w.jsx("button",{onClick:V,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})}),y&&w.jsx($,{}),U&&w.jsx(ue,{})]})},ij=({student:i,onClose:e,onSave:t})=>{const[n,a]=_e.useState(""),[l,c]=_e.useState("Online"),[f,m]=_e.useState(new Date().toISOString().slice(0,10)),[g,y]=_e.useState(""),T=_e.useMemo(()=>(i.payments||[]).reduce((U,ne)=>U+ne.amount,0),[i.payments]),I=_e.useMemo(()=>i["Total Fees"]-T,[i,T]),D=U=>{const ne=U.target.value;/^\d*\.?\d*$/.test(ne)&&a(ne)},F=U=>{U.preventDefault();const ne=parseFloat(n);if(!ne||ne<=0){alert("Please enter a valid positive amount.");return}if(!f||new Date(f).toString()==="Invalid Date"){alert("Please select a valid date.");return}const ie={id:`payment-${i.id}-${Date.now()}`,amount:ne,method:l,date:f,remarks:g};t(i,ie)},B=U=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(U);return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-2xl w-full max-w-md",children:[w.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Record Payment"}),w.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["For: ",w.jsx("span",{className:"font-semibold",children:i.Name})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 bg-gray-50 p-4 rounded-md",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-xs text-gray-500",children:"Total Fees"}),w.jsx("p",{className:"font-semibold",children:B(i["Total Fees"])})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-xs text-gray-500",children:"Fees Remaining"}),w.jsx("p",{className:`font-semibold ${I>0?"text-red-600":"text-green-600"}`,children:B(I)})]})]}),w.jsxs("form",{onSubmit:F,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),w.jsx("input",{type:"text",value:n,onChange:D,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter amount being paid",required:!0,pattern:"^\\d*\\.?\\d*$"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),w.jsxs("select",{value:l,onChange:U=>c(U.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[w.jsx("option",{children:"Online"}),w.jsx("option",{children:"Cash"}),w.jsx("option",{children:"Card"}),w.jsx("option",{children:"UPI"}),w.jsx("option",{children:"Other"})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Date"}),w.jsx("input",{type:"date",value:f,onChange:U=>m(U.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks (Optional)"}),w.jsx("textarea",{value:g,onChange:U=>y(U.target.value),rows:2,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Transaction ID, partial payment"})]}),w.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[w.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),w.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save Payment"})]})]})]})})},rj=({transactions:i})=>{const[e,t]=_e.useState(""),n=_e.useMemo(()=>{if(!e)return i;const l=e.toLowerCase();return i.filter(c=>c.studentName.toLowerCase().includes(l)||c.studentRollNo.toString().toLowerCase().includes(l)||c.studentId.toLowerCase().includes(l))},[i,e]),a=l=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(l);return w.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[w.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[w.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Payment History"}),w.jsx("input",{type:"text",placeholder:"Search by name, roll, or ID...",className:"w-full sm:w-64 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",value:e,onChange:l=>t(l.target.value)})]}),w.jsxs("div",{className:"overflow-x-auto",children:[w.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[w.jsx("thead",{className:"bg-gray-50",children:w.jsxs("tr",{children:[w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roll No"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),w.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(l=>w.jsxs("tr",{children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.date}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:l.studentName}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.studentRollNo}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.studentId}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:a(l.amount)}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.method}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.remarks})]},l.id))})]}),n.length===0&&w.jsx("p",{className:"text-center py-8 text-gray-500",children:i.length===0?"No payments have been recorded yet.":"No matching payments found."})]})]})},sj=({message:i,type:e,onClose:t})=>{const n=e==="success"?"bg-green-500":"bg-red-500";return _e.useEffect(()=>{const a=setTimeout(t,4e3);return()=>clearTimeout(a)},[t]),w.jsxs("div",{className:`fixed top-5 right-5 z-50 text-white px-6 py-3 rounded-lg shadow-lg flex items-center ${n}`,children:[w.jsx("p",{children:i}),w.jsx("button",{onClick:t,className:"ml-4 text-xl font-semibold",children:""})]})},aj=({onLogout:i})=>{const[e,t]=_e.useState([]),[n,a]=_e.useState([]),[l,c]=_e.useState([]),[f,m]=_e.useState(null),[g,y]=_e.useState(null),[T,I]=_e.useState(null),[D,F]=_e.useState(qi.Dashboard),[B,U]=_e.useState(!1),[ne,ie]=_e.useState(null),[se,ge]=_e.useState(!0);_e.useEffect(()=>{ge(!0);const Y=bh(Hi(It,"students"),ce=>{t(ce.docs.map(Ne=>({...Ne.data(),id:Ne.id}))),ge(!1)},ce=>{console.error("Error fetching students: ",ce),ie({message:"Error connecting to the database. Check console.",type:"error",onClose:()=>ie(null)}),ge(!1)}),le=bh(Hi(It,"batches"),ce=>{a(ce.docs.map(Ne=>({...Ne.data(),id:Ne.id})))}),fe=bh(Hi(It,"transactions"),ce=>{c(ce.docs.map(Ne=>({...Ne.data(),id:Ne.id})))});return()=>{Y(),le(),fe()}},[]);const Ae=_e.useCallback(async Y=>{const le=Jc(It),fe=new Map;Y.forEach(ce=>{const Ne=pn(Hi(It,"students")),Re=Ne.id,We=["yes","true","paid",1].includes(String(ce["Full Paid"]).toLowerCase()),Cn=parseFloat(ce["Amount Paid"])||0,En=Cn>0?[{id:`payment-${Re}-initial`,amount:Cn,date:ce["Payment Date"]||new Date().toISOString().slice(0,10),method:ce["Payment Method"]||"Other",remarks:"Initial payment from upload"}]:[],di={"Roll No":ce["Roll No"]??"N/A",Name:ce.Name??"Unnamed Student",Father:ce.Father??"",Mother:ce.Mother??"",Phone:ce.Phone??"","Emergency Number":ce["Emergency Number"]??"",Gender:ce.Gender??"Other",Batch:ce.Batch||"Unassigned",Address:ce.Address??"","Total Fees":parseFloat(ce["Total Fees"])||0,payments:En,Remarks:ce.Remarks||"","Full Paid":We,imageUrl:ce["Image URL"]||""},jn=ce.Mode;(jn==="Monthly"||jn==="One Time")&&(di.Mode=jn),le.set(Ne,di);const Mr=di.Batch;fe.has(Mr)||fe.set(Mr,[]),fe.get(Mr).push(Re)}),Array.from(fe.entries()).forEach(([ce,Ne])=>{const Re=pn(Hi(It,"batches")),We={name:ce,studentIds:Ne,wardens:[]};le.set(Re,We)});try{await le.commit(),ie({message:`${Y.length} records loaded & ${fe.size} batches created.`,type:"success",onClose:()=>ie(null)}),F(qi.Students)}catch(ce){console.error("Error writing batch to Firestore: ",ce),ie({message:"Failed to upload data. Check for invalid fields.",type:"error",onClose:()=>ie(null)})}},[]),Ee=_e.useCallback(async(Y,le)=>{let fe={...Y};if(delete fe.id,le){const Ne={maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0};try{const Re=await imageCompression(le,Ne),We=sy.ref().child(`student-images/${Y.id}/${Date.now()}_${le.name}`);await We.put(Re);const Cn=await We.getDownloadURL();fe.imageUrl=Cn}catch(Re){console.error("Error uploading image:",Re),ie({message:"Image upload failed.",type:"error",onClose:()=>ie(null)})}}const ce=pn(It,"students",Y.id);await Ql(ce,fe),m(null),ie({message:`${fe.Name}'s profile updated.`,type:"success",onClose:()=>ie(null)})},[]),x=_e.useCallback(async(Y,le)=>{const fe=Jc(It),ce=pn(It,"students",Y.id),Ne=pn(Hi(It,"transactions")),Re={...le,studentId:Y.id,studentName:Y.Name,studentRollNo:Y["Roll No"]};fe.set(Ne,Re),fe.update(ce,{payments:[...Y.payments||[],le]}),await fe.commit(),I(null)},[]),R=_e.useCallback(async Y=>{if(!g||Y!==g.id)return;const le=Jc(It);try{const fe=pn(It,"students",Y);le.delete(fe);const ce=yr(Hi(It,"transactions"),Gy("studentId","==",Y));(await Ky(ce)).forEach(We=>le.delete(We.ref));const Re=n.filter(We=>We.studentIds.includes(Y));for(const We of Re){const Cn=We.studentIds.filter(di=>di!==Y),En=pn(It,"batches",We.id);Cn.length===0?le.delete(En):le.update(En,{studentIds:Cn})}if(await le.commit(),g.imageUrl)try{await sy.refFromURL(g.imageUrl).delete()}catch(We){console.error("Could not delete image, it might already be removed:",We)}ie({message:`Deleted ${g.Name}.`,type:"success",onClose:()=>ie(null)})}catch(fe){console.error("Error deleting student:",fe),ie({message:"Deletion failed.",type:"error",onClose:()=>ie(null)})}finally{y(null)}},[g,n]),C=_e.useCallback(async(Y,le)=>{const fe={name:Y,studentIds:le,wardens:[]},ce=pn(Hi(It,"batches")),Ne=Jc(It);Ne.set(ce,fe),await Ne.commit()},[]),V=_e.useCallback(async Y=>{const le=n.find(Re=>Re.id===Y);if(!le)return;const fe=Jc(It),ce=new Set(le.studentIds),Ne=e.filter(Re=>ce.has(Re.id));for(const Re of Ne){fe.delete(pn(It,"students",Re.id));const We=yr(Hi(It,"transactions"),Gy("studentId","==",Re.id));if((await Ky(We)).forEach(En=>fe.delete(En.ref)),Re.imageUrl)try{const En=sy.refFromURL(Re.imageUrl)}catch(En){console.warn("Could not find image to delete during batch deletion",En)}}fe.delete(pn(It,"batches",Y)),await fe.commit()},[n,e]),O=_e.useCallback(async(Y,le)=>{const fe=pn(It,"batches",Y),ce=n.find(Re=>Re.id===Y);if(!ce||ce.wardens.some(Re=>Re.wardenStudentId===le))return;const Ne={wardenStudentId:le,assignedStudentIds:[]};await Ql(fe,{wardens:[...ce.wardens,Ne]})},[n]),M=_e.useCallback(async(Y,le)=>{const fe=pn(It,"batches",Y),ce=n.find(Re=>Re.id===Y);if(!ce)return;const Ne=ce.wardens.filter(Re=>Re.wardenStudentId!==le);await Ql(fe,{wardens:Ne})},[n]),A=_e.useCallback(async(Y,le,fe)=>{const ce=pn(It,"batches",Y),Ne=n.find(We=>We.id===Y);if(!Ne)return;const Re=Ne.wardens.map(We=>We.wardenStudentId===le?{...We,assignedStudentIds:fe}:We);await Ql(ce,{wardens:Re})},[n]),De=Y=>(Y.payments||[]).reduce((le,fe)=>le+fe.amount,0),Qe=_e.useMemo(()=>e.filter(Y=>{var le;return((le=Y.Gender)==null?void 0:le.toLowerCase())==="female"}).length,[e]),$=_e.useMemo(()=>e.filter(Y=>{var le;return((le=Y.Gender)==null?void 0:le.toLowerCase())==="male"}).length,[e]),ue=_e.useMemo(()=>e.filter(Y=>Y["Full Paid"]||De(Y)>=Y["Total Fees"]).length,[e]),ae=_e.useMemo(()=>e.reduce((Y,le)=>Y+De(le),0),[e]),ve=_e.useMemo(()=>e.reduce((Y,le)=>{if(le["Full Paid"])return Y;const fe=le["Total Fees"]-De(le);return Y+(fe>0?fe:0)},0),[e]),Pe=Y=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(Y),P=()=>{if(se)return w.jsx("div",{className:"flex items-center justify-center h-full",children:w.jsxs("div",{className:"text-center",children:[w.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-600 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),w.jsx("p",{className:"mt-2 text-gray-600",children:"Loading data from database..."})]})});switch(D){case qi.Students:return w.jsx(ej,{students:e,onEditStudent:m,onCreateBatch:C,onDeleteStudent:y,onRecordPayment:I});case qi.Batches:return w.jsx(nj,{batches:n,students:e,onDeleteBatch:V,onAddWarden:O,onRemoveWarden:M,onAssignStudents:A});case qi.Payments:return w.jsx(rj,{transactions:l});case qi.Dashboard:default:return w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Overview"}),w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[w.jsx(ia,{title:"Total Students",value:e.length.toString()}),w.jsx(ia,{title:"Girls",value:Qe.toString()}),w.jsx(ia,{title:"Boys",value:$.toString()}),w.jsx(ia,{title:"Total Batches",value:n.length.toString()}),w.jsx(ia,{title:"Fees Collected",value:Pe(ae)}),w.jsx(ia,{title:"Fees Remaining",value:Pe(ve)}),w.jsx(ia,{title:"Full Paid Students",value:ue.toString()}),w.jsx(ia,{title:"Payments Recorded",value:l.length.toString()})]}),w.jsxs("div",{className:"mt-8 p-6 bg-white rounded-lg shadow",children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Upload Student Data"}),w.jsx("p",{className:"text-gray-600 mb-4",children:"Upload an Excel file to add new students. This will not affect existing data. Recommended columns: 'Roll No', 'Name', 'Father', 'Mother', 'Phone', 'Gender', 'Batch', 'Address', 'Total Fees', 'Amount Paid', 'Full Paid', 'Mode', 'Image URL'."}),w.jsx(J3,{onDataLoaded:Ae})]})]})}},X=Y=>{F(Y),U(!1)},he=({currentView:Y,targetView:le,setView:fe,children:ce})=>w.jsx("button",{onClick:()=>fe(le),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 text-left w-full ${Y===le?"bg-indigo-600 text-white":"text-gray-600 hover:bg-gray-200"}`,children:ce});return w.jsxs("div",{className:"flex h-screen bg-gray-100",children:[ne&&w.jsx(sj,{...ne}),B&&w.jsx("div",{onClick:()=>U(!1),className:"fixed inset-0 bg-black opacity-50 z-20 lg:hidden"}),w.jsxs("aside",{className:`w-64 flex-shrink-0 bg-white shadow-md p-4 flex flex-col justify-between fixed inset-y-0 left-0 transform ${B?"translate-x-0":"-translate-x-full"} lg:relative lg:translate-x-0 transition-transform duration-300 ease-in-out z-30`,children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-2xl font-bold text-indigo-600 mb-8 px-2",children:"Vidya Gram"}),w.jsxs("nav",{className:"flex flex-col space-y-2",children:[w.jsx(he,{currentView:D,targetView:qi.Dashboard,setView:X,children:"Dashboard"}),w.jsx(he,{currentView:D,targetView:qi.Students,setView:X,children:"Students"}),w.jsx(he,{currentView:D,targetView:qi.Batches,setView:X,children:"Batches"}),w.jsx(he,{currentView:D,targetView:qi.Payments,setView:X,children:"Payments"})]})]}),w.jsx("button",{onClick:i,className:"w-full px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-md hover:bg-red-600",children:"Logout"})]}),w.jsxs("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto",children:[w.jsx("button",{onClick:()=>U(!0),className:"lg:hidden p-2 mb-4 text-gray-600 bg-white rounded-md shadow",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})}),P()]}),f&&w.jsx(tj,{student:f,onClose:()=>m(null),onSave:Ee}),T&&w.jsx(ij,{student:T,onClose:()=>I(null),onSave:x}),g&&w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Deletion"}),w.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:['Are you sure you want to delete the student "',g.Name,'"? This will also remove them from batches and delete their payment history. This action cannot be undone.']}),w.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[w.jsx("button",{onClick:()=>y(null),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),w.jsx("button",{onClick:()=>R(g.id),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})},oj=()=>{const[i,e]=_e.useState(null),[t,n]=_e.useState(!0);_e.useEffect(()=>{const l=LO(Xy,c=>{e(c),n(!1)});return()=>l()},[]);const a=()=>{Xy.signOut()};return t?w.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100",children:w.jsxs("div",{className:"text-center",children:[w.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-600 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),w.jsx("p",{className:"mt-2 text-gray-600",children:"Authenticating..."})]})}):w.jsx("div",{className:"min-h-screen bg-slate-100 font-sans",children:i?w.jsx(aj,{onLogout:a}):w.jsx(X3,{})})},wC=document.getElementById("root");if(!wC)throw new Error("Could not find root element to mount to");const lj=uD.createRoot(wC);lj.render(w.jsx(FS.StrictMode,{children:w.jsx(oj,{})}));
